-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION wheb_exportar_xml_pck.elimina_caracteres_especiais ( ds_valor_p text, ds_carac_esp_p text) RETURNS varchar AS $body$
DECLARE

	ds_valor_w 	varchar(1000);
	contador_w	bigint;
	contador_ww	bigint;
	ds_carac_analisar_w	varchar(60);
	ds_carac_esp_w	varchar(60);
	ds_esp_w	varchar(1);
	
BEGIN
	ds_valor_w	:= '';
	for contador_w in 1 .. length(ds_valor_p) loop
		ds_carac_analisar_w	:= substr(ds_valor_p, contador_w, 1);
		ds_esp_w	:= 'N';
		
		for contador_ww in 1 .. length(ds_carac_esp_p) loop
				ds_carac_esp_w := substr(ds_carac_esp_p, contador_ww, 1);
				if (ASCII(ds_carac_analisar_w) = ASCII(ds_carac_esp_w)) then
					ds_carac_analisar_w 	:= '';
					ds_esp_w	:= 'S';
					exit;
				end	if;		
		end	loop;
		if	ds_esp_w = 'N' then
			ds_valor_w	:= ds_valor_w || ds_carac_analisar_w;
		end	if;		
	end	loop;
	
	return ds_valor_w;
	END;

$body$
LANGUAGE PLPGSQL
 STABLE;
-- REVOKE ALL ON FUNCTION wheb_exportar_xml_pck.elimina_caracteres_especiais ( ds_valor_p text, ds_carac_esp_p text) FROM PUBLIC;
