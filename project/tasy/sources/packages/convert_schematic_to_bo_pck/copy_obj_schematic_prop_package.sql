-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

	--FIM COPIA DO OBJETO_SCHEMATIC 
 
	--COPIA DAS PROPRIEDADES DO OBJETO_SCHEMATIC 
CREATE OR REPLACE PROCEDURE convert_schematic_to_bo_pck.copy_obj_schematic_prop (nr_seq_obj_old_p bigint, nr_seq_obj_new_p bigint) AS $body$
DECLARE

 
	objeto_schematic_prop_w		objeto_schematic_prop%rowtype;
	dic_objeto_property_w		dic_objeto_property%rowtype;
	nr_sequencia_w			objeto_schematic_prop.nr_sequencia%type;
	nr_seq_dic_prop_w		dic_objeto_property.nr_sequencia%type;
	ie_records_w			boolean := true;

	
BEGIN 
 
	begin 
		select	a.* 
		into STRICT	objeto_schematic_prop_w 
		from	objeto_schematic_prop a 
		where	a.nr_seq_objeto	= nr_seq_obj_old_p;
	exception 
	when others then 
		ie_records_w := false;
	end;
 
	if (ie_records_w) then 
 
		select	nextval('objeto_schematic_prop_seq') 
		into STRICT	nr_sequencia_w 
		;
 
		objeto_schematic_prop_w.nr_sequencia		:= nr_sequencia_w;
		objeto_schematic_prop_w.nr_seq_objeto		:= nr_seq_obj_new_p;
		objeto_schematic_prop_w.nm_usuario		:= current_setting('convert_schematic_to_bo_pck.nm_usuario_w')::usuario.nm_usuario%type;
		objeto_schematic_prop_w.nm_usuario_nrec		:= current_setting('convert_schematic_to_bo_pck.nm_usuario_w')::usuario.nm_usuario%type;
		objeto_schematic_prop_w.dt_atualizacao		:= clock_timestamp();
		objeto_schematic_prop_w.dt_atualizacao_nrec	:= clock_timestamp();
 
		insert into objeto_schematic_prop values (objeto_schematic_prop_w.*);
	end if;
 
	begin 
		select	a.* 
		into STRICT	dic_objeto_property_w 
		from	dic_objeto_property a 
		where	a.nr_seq_obj_schematic	= nr_seq_obj_old_p;
	exception 
	when others then 
		ie_records_w := false;
	end;
 
	if (ie_records_w) then 
 
		select	nextval('dic_objeto_property_seq') 
		into STRICT	nr_seq_dic_prop_w 
		;
 
		dic_objeto_property_w.nr_sequencia		:= nr_seq_dic_prop_w;
		dic_objeto_property_w.nr_seq_obj_schematic	:= nr_seq_obj_new_p;
		dic_objeto_property_w.nr_seq_funcao_schematic	:= null;
		dic_objeto_property_w.nm_usuario		:= current_setting('convert_schematic_to_bo_pck.nm_usuario_w')::usuario.nm_usuario%type;
		dic_objeto_property_w.dt_atualizacao		:= clock_timestamp();
 
		insert into dic_objeto_property values (dic_objeto_property_w.*);
 
	end if;
 
	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE convert_schematic_to_bo_pck.copy_obj_schematic_prop (nr_seq_obj_old_p bigint, nr_seq_obj_new_p bigint) FROM PUBLIC;
