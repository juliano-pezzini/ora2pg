-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_ame_pck.obter_dt_competencia_copartic (nr_seq_lote_rem_dest_p pls_ame_lote_rem_destino.nr_sequencia%type) RETURNS timestamp AS $body$
DECLARE

dt_competencia_mens_w	pls_lote_coparticipacao.dt_competencia_mens%type;

BEGIN
select	max(g.dt_competencia_mens)
into STRICT	dt_competencia_mens_w
FROM pls_lote_coparticipacao g, pls_ame_lote_rem_valor b, pls_ame_lote_rem_arquivo a, pls_ame_lote_rem_valor_det c
LEFT OUTER JOIN pls_ame_lote_rem_valor_cop d ON (c.nr_sequencia = d.nr_seq_rem_valor_detalhe)
, pls_lib_coparticipacao f
LEFT OUTER JOIN pls_conta_coparticipacao e ON (f.nr_seq_conta_coparticipacao = e.nr_sequencia)
WHERE b.nr_seq_lote_rem_arq		= a.nr_sequencia and c.nr_seq_lote_rem_valor		= b.nr_sequencia  and d.nr_seq_conta_coparticipacao	= e.nr_sequencia  and f.nr_seq_lote			= g.nr_sequencia and a.nr_seq_lote_rem_dest		= nr_seq_lote_rem_dest_p;
return dt_competencia_mens_w;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_ame_pck.obter_dt_competencia_copartic (nr_seq_lote_rem_dest_p pls_ame_lote_rem_destino.nr_sequencia%type) FROM PUBLIC;
