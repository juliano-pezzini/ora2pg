-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_ame_pck.carrega_dados_lote_regra_lote (nr_seq_lote_rem_p pls_ame_lote_remessa.nr_sequencia%type) AS $body$
BEGIN
	select	*
	into STRICT	current_setting('pls_ame_pck.dados_lote_remessa_w')::pls_ame_lote_remessa%rowtype
	from	pls_ame_lote_remessa
	where	nr_sequencia	= nr_seq_lote_rem_p;

	current_setting('pls_ame_pck.dados_lote_remessa_w')::pls_ame_lote_remessa%rowtype.dt_ref_mensalidade := trunc(current_setting('pls_ame_pck.dados_lote_remessa_w')::pls_ame_lote_remessa%rowtype.dt_ref_mensalidade,'mm');

	select	*
	into STRICT	current_setting('pls_ame_pck.dados_regra_geracao_lote_rem_w')::pls_ame_regra_geracao%rowtype
	from	pls_ame_regra_geracao
	where	nr_sequencia	= current_setting('pls_ame_pck.dados_lote_remessa_w')::pls_ame_lote_remessa%rowtype.nr_seq_regra_geracao;

	PERFORM set_config('pls_ame_pck.ie_data_origem_mensalidade_w', coalesce(current_setting('pls_ame_pck.dados_regra_geracao_lote_rem_w')::pls_ame_regra_geracao%rowtype.ie_data_origem_mensalidade, 'C'), false);
	
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_ame_pck.carrega_dados_lote_regra_lote (nr_seq_lote_rem_p pls_ame_lote_remessa.nr_sequencia%type) FROM PUBLIC;
