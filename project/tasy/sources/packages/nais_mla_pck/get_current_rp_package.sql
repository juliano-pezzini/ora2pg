-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION nais_mla_pck.get_current_rp ( nr_seq_interno_p cpoe_material.nr_seq_cpoe_rp%type ) RETURNS bigint AS $body$
DECLARE


   rp_seq_w numeric(20);

BEGIN


      select    c.nr_seq_cpoe_rp
      into STRICT      rp_seq_w
      from      prescr_material  p,
                cpoe_material    c,
                cpoe_order_unit  a,
                cpoe_tipo_pedido cp,	
                cpoe_rp          d
      where     p.nr_seq_mat_cpoe           = c.nr_sequencia
                and a.nr_seq_cpoe_tipo_pedido   = cp.nr_sequencia
                and c.nr_seq_cpoe_order_unit    = a.nr_sequencia
                and d.nr_sequencia              = c.nr_seq_cpoe_rp
                and p.nr_seq_interno            = nr_seq_interno_p 
                order by c.nr_seq_cpoe_rp desc;


        return rp_seq_w;

   END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION nais_mla_pck.get_current_rp ( nr_seq_interno_p cpoe_material.nr_seq_cpoe_rp%type ) FROM PUBLIC;
