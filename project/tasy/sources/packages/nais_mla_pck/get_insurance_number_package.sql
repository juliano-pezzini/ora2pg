-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION nais_mla_pck.get_insurance_number ( nr_seq_nais_insurance_p cpoe_order_unit.nr_seq_nais_insurance%type ) RETURNS bigint AS $body$
DECLARE


    nr_insurance_number_w  cpoe_order_unit.nr_seq_nais_insurance%type;

BEGIN  
    <<get_insurance_number>>
    begin 

        nr_insurance_number_w :=nr_seq_nais_insurance_p;
        select lpad(cd_insurance_pattern,2,0)
        into STRICT  nr_insurance_number_w
        from nais_insurance
        where nr_sequencia=nr_insurance_number_w;

        exception
            when no_data_found then
                nr_insurance_number_w := null;
        END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION nais_mla_pck.get_insurance_number ( nr_seq_nais_insurance_p cpoe_order_unit.nr_seq_nais_insurance%type ) FROM PUBLIC;
