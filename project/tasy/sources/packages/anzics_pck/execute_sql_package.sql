-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION anzics_pck.execute_sql ( ds_sql_p text, ds_parameters_p text) RETURNS SQL_PCK.T_CURSOR AS $body$
DECLARE

    vetorparamtype_w vetorparamtype;
    dt_aux_w timestamp;
    bind_w sql_pck.t_dado_bind;
    cursor_w sql_pck.t_cursor;

BEGIN
    vetorparamtype_w := anzics_pck.get_parameters(ds_parameters_p);
    bind_w.delete;
    IF ( vetorparamtype_w.count > 0) THEN
      FOR i IN vetorparamtype_w.first..vetorparamtype_w.last
      LOOP
        BEGIN
          IF (vetorparamtype_w[i].nm_parameter LIKE 'DT_%') THEN
            dt_aux_w := to_date(vetorparamtype_w[i].vl_parameter,'dd/mm/yyyy hh24:mi:ss');
            bind_w := sql_pck.bind_variable( ':'||lower(vetorparamtype_w[i].nm_parameter), dt_aux_w, bind_w);
          ELSE
            bind_w := sql_pck.bind_variable( ':'||lower(vetorparamtype_w[i].nm_parameter), vetorparamtype_w[i].vl_parameter, bind_w);
          END IF;
        END;
      END LOOP;
    END IF;
    bind_w := sql_pck.executa_sql_cursor(ds_sql_p, bind_w);
    RETURN cursor_w;
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION anzics_pck.execute_sql ( ds_sql_p text, ds_parameters_p text) FROM PUBLIC;
