-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION apap_dinamico_pck.get_ds_tooltip_cpoe ( nr_seq_dieta_cpoe_p bigint) RETURNS varchar AS $body$
DECLARE

	ds_tooltip_w varchar(4000);

BEGIN
	begin
	  select  distinct 
			  substr(cpoe_obter_ds_dieta( cd.ie_tipo_dieta,
										  cd.cd_dieta,
										  cd.cd_material,
										  cd.cd_mat_prod1,
										  cd.nr_seq_tipo,
										  cd.dt_liberacao,
										  'S',
										  cd.dt_lib_suspensao,
										  cd.dt_suspensao,
										  cd.ie_administracao,
										  cd.cd_intervalo,
										  cd.cd_unid_med_prod1,
										  cd.ie_via_leite1,
										  cd.qt_dose_prod1,
										  cd.cd_mat_prod2,
										  cd.cd_unid_med_prod2,
										  cd.qt_dose_prod2,
										  cd.cd_mat_prod3,
										  cd.cd_unid_med_prod3,
										  cd.qt_dose_prod3,
										  cd.cd_mat_prod4,
										  cd.cd_unid_med_prod4,
										  cd.qt_dose_prod4,
										  cd.cd_mat_prod5,
										  cd.cd_unid_med_prod5,
										  cd.qt_dose_prod5,
										  cd.ie_forma,
										  cd.qt_dose,
										  cd.cd_unidade_medida_dose,
										  cd.ie_baixado_por_alta,
										  cd.dt_alta_medico,
										  'N',
										  null,
										  cd.nr_sequencia,
										  obter_horarios_regra(cd.ds_horarios)), 1, 2000)
	  into STRICT    ds_tooltip_w
	  from    cpoe_dieta cd
	  where   cd.nr_sequencia = nr_seq_dieta_cpoe_p;
	exception
	  when others then
		ds_tooltip_w := '';
	end;

	return ds_tooltip_w;
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION apap_dinamico_pck.get_ds_tooltip_cpoe ( nr_seq_dieta_cpoe_p bigint) FROM PUBLIC;
