-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE ptu_aviso_pck.grava_aviso_mat_item (nm_usuario_p usuario.nm_usuario%type, nr_seq_aviso_material_p INOUT pls_util_cta_pck.t_number_table, nr_seq_conta_p INOUT pls_util_cta_pck.t_number_table, nr_seq_conta_mat_p INOUT pls_util_cta_pck.t_number_table, nr_seq_pos_mat_p INOUT pls_util_cta_pck.t_number_table, nr_seq_conta_pos_estab_p INOUT pls_util_cta_pck.t_number_table, qt_executada_p INOUT pls_util_cta_pck.t_number_table, vl_unitario_p INOUT pls_util_cta_pck.t_number_table, vl_total_p INOUT pls_util_cta_pck.t_number_table, ie_local_p INOUT dbms_sql.varchar2_table, ie_commit_p text, ie_esvaziar_table_p text) AS $body$
BEGIN

forall i in nr_seq_aviso_material_p.first..nr_seq_aviso_material_p.last

	insert into ptu_aviso_mat_item(nr_sequencia,
					dt_atualizacao,
					nm_usuario,
					dt_atualizacao_nrec,
					nm_usuario_nrec,
					nr_seq_aviso_material,
					nr_seq_conta,
					nr_seq_conta_mat,
					nr_seq_pos_mat,
					nr_seq_conta_pos_estab,
					qt_executada,
					vl_unitario,
					vl_total,
					ie_local)	
	values (nextval('ptu_aviso_mat_item_seq'),
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		nm_usuario_p,
		nr_seq_aviso_material_p(i),
		nr_seq_conta_p(i),
		nr_seq_conta_mat_p(i),
		nr_seq_pos_mat_p(i),
		nr_seq_conta_pos_estab_p(i),
		qt_executada_p(i),
		vl_unitario_p(i),
		vl_total_p(i),
		ie_local_p(i));


if (coalesce(ie_esvaziar_table_p, 'N') = 'S') then

	nr_seq_aviso_material_p.delete;
	nr_seq_conta_p.delete;
	nr_seq_conta_mat_p.delete;
	nr_seq_pos_mat_p.delete;
	nr_seq_conta_pos_estab_p.delete;
	qt_executada_p.delete;
	vl_unitario_p.delete;
	vl_total_p.delete;
	ie_local_p.delete;
end if;

if (coalesce(ie_commit_p, 'S') = 'S') then

	commit;
end if;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ptu_aviso_pck.grava_aviso_mat_item (nm_usuario_p usuario.nm_usuario%type, nr_seq_aviso_material_p INOUT pls_util_cta_pck.t_number_table, nr_seq_conta_p INOUT pls_util_cta_pck.t_number_table, nr_seq_conta_mat_p INOUT pls_util_cta_pck.t_number_table, nr_seq_pos_mat_p INOUT pls_util_cta_pck.t_number_table, nr_seq_conta_pos_estab_p INOUT pls_util_cta_pck.t_number_table, qt_executada_p INOUT pls_util_cta_pck.t_number_table, vl_unitario_p INOUT pls_util_cta_pck.t_number_table, vl_total_p INOUT pls_util_cta_pck.t_number_table, ie_local_p INOUT dbms_sql.varchar2_table, ie_commit_p text, ie_esvaziar_table_p text) FROM PUBLIC;
