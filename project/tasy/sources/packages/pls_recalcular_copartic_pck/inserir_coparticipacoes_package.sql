-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_recalcular_copartic_pck.inserir_coparticipacoes (t_recalc_coparticipacao_p t_recalc_coparticipacao_row) AS $body$
BEGIN
	--Somente passa pelo forall se tiver registros na estrutura.
	if (t_recalc_coparticipacao_p.nr_seq_recalc_conta.count > 0) then
		forall i in t_recalc_coparticipacao_p.nr_seq_recalc_conta.first..t_recalc_coparticipacao_p.nr_seq_recalc_conta.last
			insert into pls_recalc_coparticipacao(	nr_sequencia, dt_atualizacao, nm_usuario,
					dt_atualizacao_nrec, nm_usuario_nrec, nr_seq_recalc_conta,
					nr_seq_conta_coparticipacao, vl_coparticipacao, tx_coparticipacao,
					vl_coparticipacao_unit, vl_base_copartic, qt_liberada_copartic,
					nr_seq_regra, cd_procedimento, ie_origem_proced, nr_seq_material)
			values (	nextval('pls_recalc_coparticipacao_seq'), clock_timestamp(), t_recalc_coparticipacao_p.nm_usuario(i),
					clock_timestamp(), t_recalc_coparticipacao_p.nm_usuario(i), t_recalc_coparticipacao_p.nr_seq_recalc_conta(i),
					t_recalc_coparticipacao_p.nr_seq_conta_coparticipacao(i), t_recalc_coparticipacao_p.vl_coparticipacao(i),
					t_recalc_coparticipacao_p.tx_coparticipacao(i), t_recalc_coparticipacao_p.vl_coparticipacao_unit(i),
					t_recalc_coparticipacao_p.vl_base_copartic(i), t_recalc_coparticipacao_p.qt_liberada_copartic(i),
					t_recalc_coparticipacao_p.nr_seq_regra(i), t_recalc_coparticipacao_p.cd_procedimento(i),
					t_recalc_coparticipacao_p.ie_origem_proced(i), t_recalc_coparticipacao_p.nr_seq_material(i));
	end if;
	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_recalcular_copartic_pck.inserir_coparticipacoes (t_recalc_coparticipacao_p t_recalc_coparticipacao_row) FROM PUBLIC;
