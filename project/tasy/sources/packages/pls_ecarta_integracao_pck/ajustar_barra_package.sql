-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_ecarta_integracao_pck.ajustar_barra ( ds_caminho_p text) RETURNS varchar AS $body$
DECLARE

	ds_caminho_w	varchar(1024);

BEGIN
	-- Converte as barras dos diretórios para a mesma barra utilizada no evento da função
	ds_caminho_w := ds_caminho_p;
	if (current_setting('pls_ecarta_integracao_pck.ie_barra_w')::(varchar(1) IS NOT NULL AND (varchar(1))::text <> '')) then
		if (current_setting('pls_ecarta_integracao_pck.ie_barra_w')::varchar(1) = '/') then
			ds_caminho_w := replace(ds_caminho_w, '\', current_setting('pls_ecarta_integracao_pck.ie_barra_w')::varchar(1)); --'
		else
			ds_caminho_w := replace(ds_caminho_w, '/', current_setting('pls_ecarta_integracao_pck.ie_barra_w')::varchar(1));
		end if;
	end if;

	-- Retira barras duplicadas
	ds_caminho_w := replace(ds_caminho_w, current_setting('pls_ecarta_integracao_pck.ie_barra_w')::varchar(1) || current_setting('pls_ecarta_integracao_pck.ie_barra_w')::varchar(1), current_setting('pls_ecarta_integracao_pck.ie_barra_w')::varchar(1));
	ds_caminho_w := replace(ds_caminho_w, '\\', '\'); --'
	return ds_caminho_w;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_ecarta_integracao_pck.ajustar_barra ( ds_caminho_p text) FROM PUBLIC;
