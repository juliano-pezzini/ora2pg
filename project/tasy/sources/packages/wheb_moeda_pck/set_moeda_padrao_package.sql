-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE wheb_moeda_pck.set_moeda_padrao (cd_estabelecimento_p bigint) AS $body$
DECLARE


	cd_moeda_padrao_ww	moeda.cd_moeda%type;

	
BEGIN

	begin
	select	cd_moeda_ref
	into STRICT	cd_moeda_padrao_ww
	from	empresa a,
		estabelecimento b
	where	a.cd_empresa = b.cd_empresa
	and	b.cd_estabelecimento = cd_estabelecimento_p;
	exception
	when others then
		null;
	end;

	PERFORM set_config('wheb_moeda_pck.cd_moeda_padrao_w', cd_moeda_padrao_ww, false);
	end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE wheb_moeda_pck.set_moeda_padrao (cd_estabelecimento_p bigint) FROM PUBLIC;
