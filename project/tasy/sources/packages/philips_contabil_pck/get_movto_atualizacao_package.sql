-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION philips_contabil_pck.get_movto_atualizacao ( nr_lote_contabil_p lote_contabil.nr_lote_contabil%type) RETURNS varchar AS $body$
DECLARE


		ie_return_w     	varchar(10);

		
BEGIN
	        select coalesce(max('N'),'S')
	        into STRICT ie_return_w
	
	        where exists (
	        	SELECT 1
	        	from ctb_movimento a
	        	where a.nr_lote_contabil = nr_lote_contabil_p
	        	and coalesce(a.dt_atualizacao_saldo::text, '') = ''
	        	and a.ie_status_origem = 'SO'
	        	);

		return ie_return_w;

		END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION philips_contabil_pck.get_movto_atualizacao ( nr_lote_contabil_p lote_contabil.nr_lote_contabil%type) FROM PUBLIC;
