-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION intpd_retorno_int_superior_pck.intpd_obter_tabela_evento ( nr_seq_evento_p text, nr_seq_item_documento_p bigint) RETURNS SETOF T_TABELA AS $body$
DECLARE


r_tabela_row_w	r_tabela_row;
ie_evento_w	intpd_eventos.ie_evento%type;


BEGIN

select	ie_evento
into STRICT	ie_evento_w
from	intpd_eventos
where	nr_sequencia = nr_seq_evento_p;

if (ie_evento_w = '214') then	
	r_tabela_row_w.nm_tabela	:= 'ATENDIMENTO_PACIENTE';
elsif (ie_evento_w = '148') then	
	r_tabela_row_w.nm_tabela	:= 'AGENDA_PACIENTE';
elsif (ie_evento_w = '161') and (nr_seq_item_documento_p = 1) then
	r_tabela_row_w.nm_tabela	:= 'MATERIAL_ATEND_PACIENTE';
elsif (ie_evento_w = '161') and (nr_seq_item_documento_p = 2) then
	r_tabela_row_w.nm_tabela	:= 'PROCEDIMENTO_PACIENTE';
elsif (ie_evento_w = '161') and (nr_seq_item_documento_p in (3,4)) then
	r_tabela_row_w.nm_tabela	:= 'INTPD_DEVOL_MAT_PROC';	
end if;

RETURN NEXT r_tabela_row_w;
	
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION intpd_retorno_int_superior_pck.intpd_obter_tabela_evento ( nr_seq_evento_p text, nr_seq_item_documento_p bigint) FROM PUBLIC;
