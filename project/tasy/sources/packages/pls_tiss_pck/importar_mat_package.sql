-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_tiss_pck.importar_mat (cd_material_p pls_guia_plano_mat_imp.cd_material%type, cd_tabela_p pls_guia_plano_mat_imp.cd_tabela%type, ds_material_p pls_guia_plano_mat_imp.ds_material%type, nm_usuario_p usuario.nm_usuario%type, nr_seq_guia_plano_imp_p pls_guia_plano_imp.nr_sequencia%type, qt_solicitada_p pls_guia_plano_mat_imp.qt_solicitada%type) AS $body$
DECLARE


    /* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    Finalidade: Importar as informacoes referente aos materiais e medicamentos enviados no pedido de
    Solicitacao de Procedimento via WebService
    -------------------------------------------------------------------------------------------------------------------
    Locais de chamada direta:
    [  ]  Objetos do dicionario [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatorios [  x] Outros:
     ------------------------------------------------------------------------------------------------------------------
    Pontos de atencao:
    ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
    nr_seq_guia_plano_mat pls_guia_plano_imp.nr_sequencia%type;

  
BEGIN
  
    select nextval('pls_guia_plano_mat_imp_seq')
      into STRICT nr_seq_guia_plano_mat
;

    insert into pls_guia_plano_mat_imp(nr_sequencia,
       nm_usuario,
       dt_atualizacao,
       nr_seq_guia_plano_imp,
       cd_material,
       ds_material,
       qt_solicitada,
       cd_tabela,
       nm_usuario_nrec,
       dt_atualizacao_nrec)
    values (nr_seq_guia_plano_mat,
       nm_usuario_p,
       clock_timestamp(),
       nr_seq_guia_plano_imp_p,
       cd_material_p,
       ds_material_p,
       qt_solicitada_p,
       cd_tabela_p,
       nm_usuario_p,
       clock_timestamp());

    commit;
  end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_tiss_pck.importar_mat (cd_material_p pls_guia_plano_mat_imp.cd_material%type, cd_tabela_p pls_guia_plano_mat_imp.cd_tabela%type, ds_material_p pls_guia_plano_mat_imp.ds_material%type, nm_usuario_p usuario.nm_usuario%type, nr_seq_guia_plano_imp_p pls_guia_plano_imp.nr_sequencia%type, qt_solicitada_p pls_guia_plano_mat_imp.qt_solicitada%type) FROM PUBLIC;
