-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE mprev_base_cubo_prest_pck.limpar_base () AS $body$
BEGIN

-- Desabilitar FK's
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_pop_alvo_selecao', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_conta_proc_cubo_ops', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_guia_proc_cubo_ops', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_diagnostico_cubo_ops', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_conta_cubo_ref', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('MPREV_GUIA_CUBO_REF', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_benef_custo_cubo_ops', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_conta_cubo_ops', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_guia_plano_cubo_ops', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_benef_cubo_ops', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_compl_pessoa_cubo', 'DISABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_pessoa_cubo_ops', 'DISABLE');

-- Limpeza populacao alvo.
EXECUTE 'truncate table mprev_pop_alvo_selecao';

-- Procedimentos
EXECUTE 'truncate table mprev_conta_proc_cubo_ops';

-- Procedimentos guia
EXECUTE 'truncate table mprev_guia_proc_cubo_ops';

-- Diagnostico.
EXECUTE 'truncate table mprev_diagnostico_cubo_ops';

-- Contas
EXECUTE 'truncate table mprev_conta_cubo_ref';

-- Referencias das guias
EXECUTE 'truncate table MPREV_GUIA_CUBO_REF';

-- Custos
EXECUTE 'truncate table mprev_benef_custo_cubo_ops';

--  Contas
EXECUTE 'truncate table mprev_conta_cubo_ops';

-- guias
EXECUTE 'truncate table mprev_guia_plano_cubo_ops';

-- Beneficiarios
EXECUTE 'truncate table mprev_benef_cubo_ops';

-- Endereco pessoa fisica
EXECUTE 'truncate table mprev_compl_pessoa_cubo';

-- Pessoas
EXECUTE 'truncate table mprev_pessoa_cubo_ops';

-- Rehabilitar FK's;
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_pop_alvo_selecao', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_conta_proc_cubo_ops', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_guia_proc_cubo_ops', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_diagnostico_cubo_ops', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_conta_cubo_ref', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('MPREV_GUIA_CUBO_REF', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_benef_custo_cubo_ops', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_conta_cubo_ops', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_guia_plano_cubo_ops', 'ENABLE'); -- @
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_benef_cubo_ops', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_compl_pessoa_cubo', 'ENABLE');
CALL CALL mprev_base_cubo_prest_pck.gerencia_integridade('mprev_pessoa_cubo_ops', 'ENABLE');

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE mprev_base_cubo_prest_pck.limpar_base () FROM PUBLIC;
