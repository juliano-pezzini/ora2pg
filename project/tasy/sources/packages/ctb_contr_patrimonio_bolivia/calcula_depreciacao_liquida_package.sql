-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION ctb_contr_patrimonio_bolivia.calcula_depreciacao_liquida ( vl_ufv_inicial_p MEMORIA_CALCULO_AITB.VL_UFV_INICIO%type, vl_ufv_final_p MEMORIA_CALCULO_AITB.VL_UFV_FIM%type, vl_depreciacao_atual_p MEMORIA_CALCULO_AITB.VL_DEPRECIACAO_ATUAL%type, vl_depreciacao_acumulada_p MEMORIA_CALCULO_AITB.VL_DEPRECIACAO_ACUMULADA%type ) RETURNS bigint AS $body$
DECLARE

	vl_depreciacao_liquida_w	MEMORIA_CALCULO_AITB.VL_DEPRECIACAO_LIQUIDA%type;

BEGIN
	BEGIN
		vl_depreciacao_liquida_w := vl_depreciacao_atual_p + (((vl_ufv_final_p/vl_ufv_inicial_p) - 1) * vl_depreciacao_acumulada_p) + vl_depreciacao_acumulada_p;
	EXCEPTION
		WHEN OTHERS THEN vl_depreciacao_liquida_w := 0;
	END;
	RETURN vl_depreciacao_liquida_w;
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION ctb_contr_patrimonio_bolivia.calcula_depreciacao_liquida ( vl_ufv_inicial_p MEMORIA_CALCULO_AITB.VL_UFV_INICIO%type, vl_ufv_final_p MEMORIA_CALCULO_AITB.VL_UFV_FIM%type, vl_depreciacao_atual_p MEMORIA_CALCULO_AITB.VL_DEPRECIACAO_ATUAL%type, vl_depreciacao_acumulada_p MEMORIA_CALCULO_AITB.VL_DEPRECIACAO_ACUMULADA%type ) FROM PUBLIC;
