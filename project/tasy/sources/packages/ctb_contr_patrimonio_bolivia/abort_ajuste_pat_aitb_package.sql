-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE ctb_contr_patrimonio_bolivia.abort_ajuste_pat_aitb ( nr_sequencia_p PAT_BEM.NR_SEQUENCIA%type, cd_conta_contabil_p W_MOVIMENTO_CONTABIL.CD_CONTA_CONTABIL%type ) AS $body$
DECLARE

    	cd_bem_w			PAT_BEM.CD_BEM%type;
	ds_bem_w			PAT_BEM.DS_BEM%type;

BEGIN
	SELECT	MAX(CD_BEM),
		MAX(DS_BEM)
	INTO STRICT	cd_bem_w,
		ds_bem_w
	FROM	PAT_BEM
	WHERE	NR_SEQUENCIA = nr_sequencia_p;

	CALL WHEB_MENSAGEM_PCK.EXIBIR_MENSAGEM_ABORT(1146525, 'cd_conta_contabil_w='				||
							 cd_conta_contabil_p				||';'||
							 'ds_conta_contabil='				||
							 OBTER_DESC_CONTA_CONTABIL(cd_conta_contabil_p)	||';'||
							 'nr_seq_bem='					||
							 nr_sequencia_p					||';'||
							 'cd_bem='					||
							 cd_bem_w					||';'||
							 'ds_bem='					||
							 ds_bem_w);
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ctb_contr_patrimonio_bolivia.abort_ajuste_pat_aitb ( nr_sequencia_p PAT_BEM.NR_SEQUENCIA%type, cd_conta_contabil_p W_MOVIMENTO_CONTABIL.CD_CONTA_CONTABIL%type ) FROM PUBLIC;
