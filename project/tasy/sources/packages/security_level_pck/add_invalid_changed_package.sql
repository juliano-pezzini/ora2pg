-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE security_level_pck.add_invalid_changed (nr_sequence_p bigint, ie_new_value bigint) AS $body$
DECLARE

            qt_registro_w bigint;
            new_record    bigint;

BEGIN
            qt_registro_w := 0;
            FOR k IN 1..rules_invalid_changed.count LOOP
                IF (nr_sequence_p = rules_invalid_changed[k].nr_sequence_col) THEN
                    qt_registro_w := 1;
                    EXIT;
                END IF;
            END LOOP;

            IF (qt_registro_w = 0) THEN
                new_record := rules_invalid_changed.Count + 1;
                rules_invalid_changed[new_record].nr_sequence_col := nr_sequence_p;
                rules_invalid_changed[new_record].ie_new_value := ie_new_value;
            END IF;
        END;

        /**
        * Procedure to save the new values for rules those changed the value, only if are invalid.
        */
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE security_level_pck.add_invalid_changed (nr_sequence_p bigint, ie_new_value bigint) FROM PUBLIC;
