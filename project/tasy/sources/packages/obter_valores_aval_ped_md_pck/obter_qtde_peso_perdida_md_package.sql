-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE obter_valores_aval_ped_md_pck.obter_qtde_peso_perdida_md (qt_peso_atual_p bigint, qt_peso_habit_p bigint, qt_peso_habitual_p bigint, qt_perda_p INOUT bigint, pr_perda_peso_p INOUT bigint ) AS $body$
BEGIN
		if (qt_peso_atual_p < qt_peso_habit_p) or (qt_peso_atual_p < qt_peso_habitual_p) then
			qt_perda_p		 := (qt_peso_habitual_p - qt_peso_atual_p);	
			pr_perda_peso_p  :=   trunc(dividir_sem_round(((qt_peso_habit_p - qt_peso_atual_p) * 100), qt_peso_habit_p),3);
		else
			qt_perda_p      := 0;
			pr_perda_peso_p := 0;
		end if;
	end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_valores_aval_ped_md_pck.obter_qtde_peso_perdida_md (qt_peso_atual_p bigint, qt_peso_habit_p bigint, qt_peso_habitual_p bigint, qt_perda_p INOUT bigint, pr_perda_peso_p INOUT bigint ) FROM PUBLIC;
