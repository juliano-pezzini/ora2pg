-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION obter_valores_aval_ped_md_pck.obter_gast_ener_ireton_md (ie_respiracao_p text, qt_imc_p bigint, qt_idade_p bigint, qt_peso_atual_p bigint, ie_queimadura_p text, ie_trauma_p text, ie_sexo_p text ) RETURNS bigint AS $body$
DECLARE

	   qt_obesidade_w		       smallint;
	   qt_pont_queimadura_w	       smallint;
	   qt_pont_trauma_w		       smallint;
	   qt_pont_sexo_w		       smallint;
	   qt_gast_ener_total_ireton_w bigint;
	
BEGIN
		if (ie_respiracao_p IS NOT NULL AND ie_respiracao_p::text <> '') then
			if (ie_respiracao_p = 'ESP') then
				if (qt_imc_p IS NOT NULL AND qt_imc_p::text <> '') then
					if (qt_imc_p > 27) then
						qt_obesidade_w	:= 1;
					else
						qt_obesidade_w	:= 0;
					end if;
				end if;
			
				qt_gast_ener_total_ireton_w := 629 - (11 * qt_idade_p) + (25 * qt_peso_atual_p) - (609 * qt_obesidade_w);
			end if;
			
			if (ie_respiracao_p = 'MEC') then
			
				if (ie_queimadura_p = 'S') then
					qt_pont_queimadura_w := 1;
				else
					qt_pont_queimadura_w := 0;
				end if;
			
				if (ie_trauma_p = 'S') then
					qt_pont_trauma_w := 1;
				else
					qt_pont_trauma_w := 0;
				end if;
				
				if (ie_sexo_p = 'M') then
					qt_pont_sexo_w := 1;
				else
					qt_pont_sexo_w := 0;
				end if;
			
				qt_gast_ener_total_ireton_w := 1784 - (11 * qt_idade_p) + (5 * qt_peso_atual_p) + (244 * qt_pont_sexo_w) + (239 * qt_pont_trauma_w) + (840 * qt_pont_queimadura_w); 			
			end if;

		end if;

		return qt_gast_ener_total_ireton_w;
	end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_valores_aval_ped_md_pck.obter_gast_ener_ireton_md (ie_respiracao_p text, qt_imc_p bigint, qt_idade_p bigint, qt_peso_atual_p bigint, ie_queimadura_p text, ie_trauma_p text, ie_sexo_p text ) FROM PUBLIC;
