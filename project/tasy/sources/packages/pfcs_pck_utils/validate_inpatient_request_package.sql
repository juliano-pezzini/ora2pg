-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pfcs_pck_utils.validate_inpatient_request (cd_service_p text, si_status_p text, si_intent_p text) RETURNS varchar AS $body$
BEGIN
        if (( (coalesce(cd_service_p::text, '') = '' and coalesce(si_status_p::text, '') = '') or
            cd_service_p = PFCS_PCK_CONSTANTS.CD_ADMISSION
                and si_status_p = PFCS_PCK_CONSTANTS.SI_STATUS_COMPLETED
                and si_intent_p = PFCS_PCK_CONSTANTS.SI_INTENT_ORDER) or
            cd_service_p = PFCS_PCK_CONSTANTS.CD_TRANSFER or (cd_service_p = PFCS_PCK_CONSTANTS.CD_DISCHARGE
                and si_status_p <> PFCS_PCK_CONSTANTS.SI_STATUS_COMPLETED)) then
            return PFCS_PCK_CONSTANTS.IE_YES;
        end if;
        return PFCS_PCK_CONSTANTS.IE_NO;
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 IMMUTABLE;
-- REVOKE ALL ON FUNCTION pfcs_pck_utils.validate_inpatient_request (cd_service_p text, si_status_p text, si_intent_p text) FROM PUBLIC;
