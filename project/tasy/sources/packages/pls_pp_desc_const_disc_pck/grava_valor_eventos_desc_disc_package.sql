-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_pp_desc_const_disc_pck.grava_valor_eventos_desc_disc ( nr_seq_lote_p pls_pp_lote.nr_sequencia%type, tb_nr_seq_evento_p INOUT pls_util_cta_pck.t_number_table, tb_nr_seq_prestador_p INOUT pls_util_cta_pck.t_number_table, tb_vl_desc_disc_p INOUT pls_util_cta_pck.t_number_table, tb_tb_nr_seq_desc_disc_p INOUT pls_util_cta_pck.t_number_table, nm_usuario_p usuario.nm_usuario%type) AS $body$
BEGIN
 
forall i in tb_nr_seq_evento_p.first..tb_nr_seq_evento_p.last 
	insert into pls_pp_item_lote(	nr_sequencia,		dt_atualizacao,		dt_atualizacao_nrec, 
					ie_tipo_item,		nm_usuario,		nm_usuario_nrec, 
					nr_seq_lote,		nr_seq_evento,		nr_seq_prestador, 
					vl_glosa,		vl_item,		vl_liquido, 
					ie_acao_negativo,	vl_acao_negativo,	vl_desconto_tributo, 
					ie_cancelado,		nr_seq_disc_evento,	nr_seq_prestador_origem) 
	values (	nextval('pls_pp_item_lote_seq'),	clock_timestamp(),			clock_timestamp(), 
			'10',				nm_usuario_p,			nm_usuario_p, 
			nr_seq_lote_p,			tb_nr_seq_evento_p(i),		tb_nr_seq_prestador_p(i), 
			0,				tb_vl_desc_disc_p(i),		tb_vl_desc_disc_p(i), 
			'N',				0,				0, 
			'N',				tb_tb_nr_seq_desc_disc_p(i),	tb_nr_seq_prestador_p(i));
 
tb_nr_seq_evento_p.delete;
tb_nr_seq_prestador_p.delete;
tb_vl_desc_disc_p.delete;
tb_tb_nr_seq_desc_disc_p.delete;
 
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_pp_desc_const_disc_pck.grava_valor_eventos_desc_disc ( nr_seq_lote_p pls_pp_lote.nr_sequencia%type, tb_nr_seq_evento_p INOUT pls_util_cta_pck.t_number_table, tb_nr_seq_prestador_p INOUT pls_util_cta_pck.t_number_table, tb_vl_desc_disc_p INOUT pls_util_cta_pck.t_number_table, tb_tb_nr_seq_desc_disc_p INOUT pls_util_cta_pck.t_number_table, nm_usuario_p usuario.nm_usuario%type) FROM PUBLIC;
