-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pkg_name_utils.get_format (locale text, format_type text) RETURNS varchar AS $body$
DECLARE

	format		person_name_format.ds_format%type;

BEGIN
	select	ds_format
	into STRICT	format
	from (	SELECT	ds_format ds_format
			from	person_name_format
			where	coalesce(ds_locale, current_setting('pkg_name_utils.default_locale')::varchar(30)) = coalesce(locale, current_setting('pkg_name_utils.default_locale')::varchar(30))
			and		ds_type = format_type
			
union all

			SELECT	ds_format
			from	person_name_format
			where	coalesce(ds_locale, current_setting('pkg_name_utils.default_locale')::varchar(30)) = current_setting('pkg_name_utils.default_locale')::varchar(30)
			and		ds_type = coalesce(format_type, current_setting('pkg_name_utils.format_full')::person_name_format.ds_format%type)) alias13 LIMIT 1;

	return format;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pkg_name_utils.get_format (locale text, format_type text) FROM PUBLIC;
