-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';


-- This function will help in order to extract the machine name by which the user has logged in
CREATE OR REPLACE FUNCTION nais_interface_pck.get_machine_name ( nm_user_p text ) RETURNS varchar AS $body$
DECLARE

        nm_machine_w    varchar(255);

BEGIN
            select  substr(coalesce(max(ds_maquina), 'TASY'),1,8) 
            into STRICT    nm_machine_w
            from    tasy_log_acesso 
            where   (ds_maquina IS NOT NULL AND ds_maquina::text <> '') 
            and     nm_usuario = nm_user_p;
            
    return nm_machine_w;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION nais_interface_pck.get_machine_name ( nm_user_p text ) FROM PUBLIC;
