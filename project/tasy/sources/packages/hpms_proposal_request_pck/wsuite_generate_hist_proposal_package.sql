-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE hpms_proposal_request_pck.wsuite_generate_hist_proposal (nr_seq_proposta_p pls_proposta_online.nr_sequencia%type, nr_seq_prop_benef_online_p pls_proposta_benef_online.nr_sequencia%type, ds_hsitorico_p text, nm_usuario_p text, ie_commit_p text) AS $body$
DECLARE


/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:
Insert proposal logs
-------------------------------------------------------------------------------------------------------------------

Locais de chamada direta: 
[ x ]  Objetos do dicionario [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatorios [ ] Outros:
 ------------------------------------------------------------------------------------------------------------------

Pontos de atencao:
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */



BEGIN

insert into pls_proposta_hist_online(nr_sequencia, dt_atualizacao, dt_atualizacao_nrec,
	nm_usuario, nm_usuario_nrec, dt_criacao,
	ie_tipo_historico, nr_seq_prop_online, nr_seq_prop_benef_online,
	ds_historico, dt_liberacao)
values (nextval('pls_proposta_hist_online_seq'), clock_timestamp(), clock_timestamp(),
	nm_usuario_p, nm_usuario_p, clock_timestamp(),
	'LS', nr_seq_proposta_p,nr_seq_prop_benef_online_p,
	substr(ds_hsitorico_p,1,4000), clock_timestamp());

if (ie_commit_p = 'S') then
	commit;
end if;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE hpms_proposal_request_pck.wsuite_generate_hist_proposal (nr_seq_proposta_p pls_proposta_online.nr_sequencia%type, nr_seq_prop_benef_online_p pls_proposta_benef_online.nr_sequencia%type, ds_hsitorico_p text, nm_usuario_p text, ie_commit_p text) FROM PUBLIC;
