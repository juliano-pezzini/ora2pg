-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_smp_pck.gerar_valor_deflator ( regra_simulacao_p pls_smp_pck.regra_simulacao, vl_simulacao_p pls_smp_result_regra.vl_simulacao%type) RETURNS PLS_SMP_RESULT_REGRA.VL_SIMULACAO%TYPE AS $body$
DECLARE

/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:	Aplicar o delfator / inflator da regra quando houver
-------------------------------------------------------------------------------------------------------------------
Locais de chamada direta: 
[X]  Objetos do dicionario [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatorios [ ] Outros:
-------------------------------------------------------------------------------------------------------------------
Pontos de atencao:	O valor do percentual vai indicar se e m inflator (positivo) ou deflator(negativo), por isso
		so o percentual zerado deve ser desconsiderado
Alteracoes:
-------------------------------------------------------------------------------------------------------------------
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
vl_simulacao_w	pls_smp_result_regra.vl_simulacao%type;

BEGIN

-- Atribui o valor passado, para ser o retorno "Padrao"
vl_simulacao_w := vl_simulacao_p;

-- se tem algum inflator ou deflator
if (regra_simulacao_p.pr_inflator_deflator <> 0) then

	vl_simulacao_w := vl_simulacao_p + (vl_simulacao_p * (regra_simulacao_p.pr_inflator_deflator / 100));
end if;

return vl_simulacao_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_smp_pck.gerar_valor_deflator ( regra_simulacao_p pls_smp_pck.regra_simulacao, vl_simulacao_p pls_smp_result_regra.vl_simulacao%type) FROM PUBLIC;
