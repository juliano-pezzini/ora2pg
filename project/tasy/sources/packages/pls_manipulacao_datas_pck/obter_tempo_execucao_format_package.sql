-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_manipulacao_datas_pck.obter_tempo_execucao_format ( dt_inicio_p timestamp, dt_termino_p timestamp) RETURNS varchar AS $body$
DECLARE

					
dt_final_w	timestamp;
ds_retorno_w	varchar(30) := null;
ds_hora_w	varchar(30) := '00';
ds_minuto_w	varchar(2) := '00';
ds_segundo_w	varchar(2) := '00';


BEGIN

if (dt_inicio_p IS NOT NULL AND dt_inicio_p::text <> '' AND dt_termino_p IS NOT NULL AND dt_termino_p::text <> '') then
	ds_hora_w := round((trunc( abs(dt_termino_p - dt_inicio_p) * 24 ))::numeric, 0);
	ds_minuto_w := lpad(trunc(mod(trunc(abs(dt_termino_p - dt_inicio_p) * 24 * 60 ), 60)), 2, '0');
	ds_segundo_w := lpad(trunc(mod(round(abs(dt_termino_p - dt_inicio_p) * 24 * 60 * 60), 60)), 2, '0');

	ds_retorno_w := ds_hora_w || ':' || ds_minuto_w || ':' || ds_segundo_w;
end if;

return ds_retorno_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_manipulacao_datas_pck.obter_tempo_execucao_format ( dt_inicio_p timestamp, dt_termino_p timestamp) FROM PUBLIC;
