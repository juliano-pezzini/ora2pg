-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0000 () AS $body$
BEGIN

--Inicializa valores de variaveias
PERFORM set_config('fis_sef_edoc_arq_geral_pck.nm_usuario_w', Obter_Usuario_Ativo, false);

--Cursor Pincipal
open current_setting('fis_sef_edoc_arq_geral_pck.c_controle')::CURSOR;
fetch current_setting('fis_sef_edoc_arq_geral_pck.c_controle')::into CURSOR current_setting('fis_sef_edoc_arq_geral_pck.vetregcontrole')::fis_sef_edoc_controle%RowType;
close current_setting('fis_sef_edoc_arq_geral_pck.c_controle')::CURSOR;


--
--Chamada da procedure que gera os dados no arquivo dos registros 0000 dos arquivos
CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0000_edoc();

--Chamada da procedure que gera os dados no arquivo dos registros 0001 dos arquivos
CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_abertura_0();

--Chamada da procedure que gera os dados no arquivo dos registros 0005 dos arquivos
CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0005_edoc();

if (current_setting('fis_sef_edoc_arq_geral_pck.vetregcontrole')::fis_sef_edoc_controle%RowType.ie_tipo_arquivo in ('2','4','5','6','7')) then
	--Chamada da procedure que gera os dados no arquivo dos registros 0025 dos arquivos
	CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0025_edoc();
end if;

--Chamada da procedure que gera os dados no arquivo dos registros 0030 dos arquivos
CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0030_edoc();

--Chamada da procedure que gera os dados no arquivo dos registros 0100 dos arquivos
CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0100_edoc();

if (current_setting('fis_sef_edoc_arq_geral_pck.vetregcontrole')::fis_sef_edoc_controle%RowType.ie_tipo_arquivo in ('1','2','3','4','6','7')) then
	--ATENÇÃO - O 0175 É CHAMANDO DENTRO DO 0150 Chamada da procedure que gera os dados no arquivo dos registros 0150 dos arquivos
	CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0150_edoc();
end if;

if (current_setting('fis_sef_edoc_arq_geral_pck.vetregcontrole')::fis_sef_edoc_controle%RowType.ie_tipo_arquivo in ('1','5','7')) then
	--Chamada da procedure que gera os dados no arquivo dos registros 0200 dos arquivos
	CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0200_edoc();
end if;

if (current_setting('fis_sef_edoc_arq_geral_pck.vetregcontrole')::fis_sef_edoc_controle%RowType.ie_tipo_arquivo in ('1','2','5')) then
	--Chamada da procedure que gera os dados no arquivo dos registros 0400 dos arquivos
	CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0400_edoc();
end if;

if (current_setting('fis_sef_edoc_arq_geral_pck.vetregcontrole')::fis_sef_edoc_controle%RowType.ie_tipo_arquivo in ('1','2','4','5','6','7')) then
	--Chamada da procedure que gera os dados no arquivo dos registros 0450 dos arquivos
	CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0450_edoc();
end if;

CALL fis_sef_edoc_arq_geral_pck.fis_gerar_arq_encerram_0();

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE fis_sef_edoc_arq_geral_pck.fis_gerar_arq_0000 () FROM PUBLIC;
