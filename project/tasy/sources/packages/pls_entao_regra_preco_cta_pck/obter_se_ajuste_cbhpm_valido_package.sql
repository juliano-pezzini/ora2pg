-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_entao_regra_preco_cta_pck.obter_se_ajuste_cbhpm_valido ( nr_seq_prest_ajuste_p pls_ajuste_porte_cbhpm.nr_seq_prestador%type, cd_proced_ajuste_p pls_ajuste_porte_cbhpm.cd_procedimento%type, ie_orig_proc_ajuste_p pls_ajuste_porte_cbhpm.ie_origem_proced%type, cd_grupo_proc_ajuste_p pls_ajuste_porte_cbhpm.cd_grupo_proc%type, cd_espec_ajuste_p pls_ajuste_porte_cbhpm.cd_especialidade%type, cd_area_proc_ajuste_p pls_ajuste_porte_cbhpm.cd_area_procedimento%type, nr_seq_prestador_p pls_prestador.nr_sequencia%type, cd_procedimento_p procedimento.cd_procedimento%type, ie_origem_proced_p procedimento.ie_origem_proced%type, cd_grupo_proc_p procedimento.cd_grupo_proc%type, cd_especialidade_p grupo_proc.cd_especialidade%type, cd_area_proced_p especialidade_proc.cd_area_procedimento%type) RETURNS varchar AS $body$
DECLARE


ie_valido_w	varchar(1);


BEGIN
-- inicia sendo v√°lido
ie_valido_w := 'S';

-- se algum dos campos for diferente de null eve ser olhado o valor passado no parametro
if (nr_seq_prest_ajuste_p IS NOT NULL AND nr_seq_prest_ajuste_p::text <> '') and (nr_seq_prest_ajuste_p != nr_seq_prestador_p) then

	ie_valido_w := 'N';
end if;

if (cd_proced_ajuste_p IS NOT NULL AND cd_proced_ajuste_p::text <> '') and (cd_proced_ajuste_p != cd_procedimento_p) then

	ie_valido_w := 'N';
end if;

if (ie_orig_proc_ajuste_p IS NOT NULL AND ie_orig_proc_ajuste_p::text <> '') and (ie_orig_proc_ajuste_p != ie_origem_proced_p) then

	ie_valido_w := 'N';
end if;

if (cd_grupo_proc_ajuste_p IS NOT NULL AND cd_grupo_proc_ajuste_p::text <> '') and (cd_grupo_proc_ajuste_p != cd_grupo_proc_p) then

	ie_valido_w := 'N';
end if;

if (cd_espec_ajuste_p IS NOT NULL AND cd_espec_ajuste_p::text <> '') and (cd_espec_ajuste_p != cd_especialidade_p) then

	ie_valido_w := 'N';
end if;

if (cd_area_proc_ajuste_p IS NOT NULL AND cd_area_proc_ajuste_p::text <> '') and (cd_area_proc_ajuste_p != cd_area_proced_p) then

	ie_valido_w := 'N';
end if;


return ie_valido_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_entao_regra_preco_cta_pck.obter_se_ajuste_cbhpm_valido ( nr_seq_prest_ajuste_p pls_ajuste_porte_cbhpm.nr_seq_prestador%type, cd_proced_ajuste_p pls_ajuste_porte_cbhpm.cd_procedimento%type, ie_orig_proc_ajuste_p pls_ajuste_porte_cbhpm.ie_origem_proced%type, cd_grupo_proc_ajuste_p pls_ajuste_porte_cbhpm.cd_grupo_proc%type, cd_espec_ajuste_p pls_ajuste_porte_cbhpm.cd_especialidade%type, cd_area_proc_ajuste_p pls_ajuste_porte_cbhpm.cd_area_procedimento%type, nr_seq_prestador_p pls_prestador.nr_sequencia%type, cd_procedimento_p procedimento.cd_procedimento%type, ie_origem_proced_p procedimento.ie_origem_proced%type, cd_grupo_proc_p procedimento.cd_grupo_proc%type, cd_especialidade_p grupo_proc.cd_especialidade%type, cd_area_proced_p especialidade_proc.cd_area_procedimento%type) FROM PUBLIC;
