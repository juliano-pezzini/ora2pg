-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_conv_xml_cta_pck.obter_via_acesso_conv ( ie_via_acesso_p pls_conta_item_imp.ie_via_acesso%type) RETURNS varchar AS $body$
DECLARE


ie_via_acesso_conv_w	pls_conta_item_imp.ie_via_acesso_conv%type;


BEGIN
-- atribui a variavel de retorno o valor importado no XML

ie_via_acesso_conv_w := ie_via_acesso_p;

-- se depende de regra salva como nulo 

if (current_setting('pls_conv_xml_cta_pck.ie_via_acesso_regra_w')::pls_parametros.ie_via_acesso_regra%type = 'N') then
	
	-- faz a convers_o do valor enviado no XML para o dominio Tasy

	case(ie_via_acesso_conv_w)

		-- quando vem 1 no XML _ _nica ou principal

		when '1' then
			ie_via_acesso_conv_w := 'U';
			
		-- 2 _ Mesma via de acesso

		when '2' then
			ie_via_acesso_conv_w := 'M';
			
		-- 3 _ Via de acesso diferente

		when '3' then
			ie_via_acesso_conv_w := 'D';
		else
			null;
	end case;
else
	ie_via_acesso_conv_w := null;
end if;

return ie_via_acesso_conv_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_conv_xml_cta_pck.obter_via_acesso_conv ( ie_via_acesso_p pls_conta_item_imp.ie_via_acesso%type) FROM PUBLIC;
