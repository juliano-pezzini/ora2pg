-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION alto_custo_artrite_pck.get_data_inicio_sintomas (cd_pessoa_fisica_p text) RETURNS timestamp AS $body$
DECLARE


	ds_retorno_w timestamp;
	
	
BEGIN
		  
		select  min(pac.dt_inicio)
		into STRICT    ds_retorno_w
		from    paciente_antec_clinico pac
		where   (pac.dt_inicio IS NOT NULL AND pac.dt_inicio::text <> '')
		and     (pac.dt_liberacao IS NOT NULL AND pac.dt_liberacao::text <> '')
		and     coalesce(pac.dt_inativacao::text, '') = ''
		and     alto_custo_pck.obter_se_tipo_doenca(pac.cd_doenca, 'A') = 'S'
		and     pac.cd_pessoa_fisica = cd_pessoa_fisica_p
		and     trunc(pac.dt_inicio) >= alto_custo_pck.get_data_inicio_emissao_guia
		and     trunc(pac.dt_inicio) <= alto_custo_pck.get_data_corte;

		return ds_retorno_w;

	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION alto_custo_artrite_pck.get_data_inicio_sintomas (cd_pessoa_fisica_p text) FROM PUBLIC;
