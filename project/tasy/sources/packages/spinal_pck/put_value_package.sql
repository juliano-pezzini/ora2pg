-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE spinal_pck.put_value ( key_p text, value_p text) AS $body$
BEGIN		
		if ((trim(both value_p) IS NOT NULL AND (trim(both value_p))::text <> '')) then
			json_aux_w.put(key_p,value_p);
		end if;		
		end;
	begin

	json_aux_w := philips_json();
	CALL spinal_pck.put_value('tasy-specialty',wheb_usuario_pck.GET_CD_ESPECIALIDADE);
	CALL spinal_pck.put_value('tasy-establishment',current_setting('spinal_pck.cd_establishment_w')::estabelecimento.cd_estabelecimento%type);
	CALL spinal_pck.put_value('tasy-function',wheb_usuario_pck.GET_CD_FUNCAO);
	CALL spinal_pck.put_value('tasy-profile',wheb_usuario_pck.GET_CD_PERFIL);
	CALL spinal_pck.put_value('tasy-encounter-department',wheb_usuario_pck.GET_CD_SETOR_ATENDIMENTO);
	CALL spinal_pck.put_value('tasy-form',wheb_usuario_pck.GET_DS_FORM);
	CALL spinal_pck.put_value('tasy-update-ledger-account',wheb_usuario_pck.GET_IE_ATUALIZACAO_CONTABIL);
	CALL spinal_pck.put_value('tasy-commit',wheb_usuario_pck.GET_IE_COMMIT);
	CALL spinal_pck.put_value('tasy-execute-trigger',wheb_usuario_pck.GET_IE_EXECUTAR_TRIGGER);
	CALL spinal_pck.put_value('tasy-accounting-batch',wheb_usuario_pck.GET_IE_LOTE_CONTABIL);
	CALL spinal_pck.put_value('tasy-machine',wheb_usuario_pck.GET_MACHINE);
	CALL spinal_pck.put_value('tasy-station-name',wheb_usuario_pck.GET_NM_ESTACAO);
	CALL spinal_pck.put_value('tasy-machine-name',wheb_usuario_pck.GET_NM_MAQUINA);
	CALL spinal_pck.put_value('tasy-machine-ip',wheb_usuario_pck.GET_CD_MAQUINA_IP);
	CALL spinal_pck.put_value('tasy-user',wheb_usuario_pck.GET_NM_USUARIO);
	CALL spinal_pck.put_value('tasy-idiom',wheb_usuario_pck.GET_NR_SEQ_IDIOMA);

	CALL spinal_pck.put_value('tasy-establishment-calendar',pkg_i18n.GET_ESTAB_CALENDAR);
	CALL spinal_pck.put_value('tasy-establishment-currency',pkg_i18n.GET_ESTAB_CURRENCY);
	CALL spinal_pck.put_value('tasy-establishment-first-week-day',pkg_i18n.GET_ESTAB_FIRST_WEEK_DAY);
	CALL spinal_pck.put_value('tasy-establishment-locale',pkg_i18n.GET_ESTAB_LOCALE);
	CALL spinal_pck.put_value('tasy-establishment-secondary-calendar',pkg_i18n.GET_ESTAB_SECONDARY_CALENDAR);
	CALL spinal_pck.put_value('tasy-establishment-timezone',pkg_i18n.GET_ESTAB_TIMEZONE);
	CALL spinal_pck.put_value('tasy-user-calendar',pkg_i18n.GET_USER_CALENDAR);
	CALL spinal_pck.put_value('tasy-user-language',pkg_i18n.GET_USER_LANGUAGE);
	CALL spinal_pck.put_value('tasy-user-locale',pkg_i18n.GET_USER_LOCALE);
	CALL spinal_pck.put_value('tasy-user-secondary-calendar',pkg_i18n.GET_USER_SECONDARY_CALENDAR);
	CALL spinal_pck.put_value('tasy-user-timezone',pkg_i18n.GET_USER_TIMEZONE);

	CALL spinal_pck.put_value('tasy-country',philips_param_pck.GET_CD_PAIS);
	CALL spinal_pck.put_value('tasy-locale',philips_param_pck.GET_DS_LOCALE);
	
	CALL spinal_pck.put_value('tasy-data-source',obter_valor_param_usuario(0, 231, 0, null, 0));
	
	CALL spinal_pck.put_value('tasy-module-name',ds_module_w);
	CALL spinal_pck.put_value('tasy-action-name',ds_action_w);


	begin
	json_w := json_aux_w.to_char;
	exception
	when others then
		null;
	end;

	return;

	END;

	--##### PUBLISH_SPINAL_MESSAGE
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE spinal_pck.put_value ( key_p text, value_p text) FROM PUBLIC;
