-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE gerar_resumo_oftalmo_pkg.gravar_resumo_banco (nr_seq_laudo_p bigint) AS $body$
BEGIN	
		if (nr_seq_laudo_p IS NOT NULL AND nr_seq_laudo_p::text <> '') then
			PERFORM set_config('gerar_resumo_oftalmo_pkg.ds_resumo_w', null, false);
		end if;
		
		insert into w_oft_resumo_consulta(
			nr_sequencia,
			nr_atendimento,
			dt_atendimento,
			cd_pessoa_fisica,
			nm_usuario,
			ds_resumo,
			nr_seq_laudo)
		values (
			nextval('w_oft_resumo_consulta_seq'),
			current_setting('gerar_resumo_oftalmo_pkg.nr_atendimento_w')::bigint,
			current_setting('gerar_resumo_oftalmo_pkg.dt_entrada_w')::timestamp,
			current_setting('gerar_resumo_oftalmo_pkg.cd_pessoa_fisica_w')::varchar(10),
			current_setting('gerar_resumo_oftalmo_pkg.nm_usuario_w')::varchar(15),
			current_setting('gerar_resumo_oftalmo_pkg.ds_resumo_w')::varchar(32000),
			nr_seq_laudo_p
		);
		commit;
	end;


$body$
LANGUAGE PLPGSQL
;
-- REVOKE ALL ON PROCEDURE gerar_resumo_oftalmo_pkg.gravar_resumo_banco (nr_seq_laudo_p bigint) FROM PUBLIC;
