-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION hdm_indic_pck.get_proced_type (cd_procedure_p bigint, si_proced_origin_p bigint) RETURNS bigint AS $body$
DECLARE

	nr_seq_proc_type_w	bigint;
	c_procedure CURSOR FOR
		SELECT	x.nr_sequencia
		from	hdm_indic_dm_procedure x
		where	exists (SELECT	1
				from	hdm_indic_proc_type_item b,
					hdm_indic_procedure_type a
				where	b.ie_origem_proced = coalesce(si_proced_origin_p, b.ie_origem_proced)
				and	b.cd_procedimento = cd_procedure_p
				and	a.nr_sequencia = b.nr_seq_type
				and	x.nm_procedure_type = a.nm_type);
	
BEGIN
		for	r_c_procedure in c_procedure loop
			nr_seq_proc_type_w := r_c_procedure.nr_sequencia;
		end loop;
		
		return coalesce(nr_seq_proc_type_w,0);
	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION hdm_indic_pck.get_proced_type (cd_procedure_p bigint, si_proced_origin_p bigint) FROM PUBLIC;
