-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE tax_parallel_procedure_pck.add_record_to_queue (username_p fis_fila_arquivo.nm_usuario%type, batch_code_p fis_fila_arquivo.nr_seq_lote%type, batch_description_p fis_fila_arquivo.ds_lote%type, tax_obligation_p fis_fila_arquivo.ie_obrigacao%type, generation_type_p fis_fila_arquivo.ie_tipo_geracao%type, sequence_p INOUT fis_fila_arquivo.nr_sequencia%type) AS $body$
DECLARE


        sequence_w fis_fila_arquivo.nr_sequencia%type;


BEGIN
        select  nextval('fis_fila_arquivo_seq')
        into STRICT    sequence_w
;

        insert into fis_fila_arquivo(	nr_sequencia,
                                        dt_atualizacao,
                                        nm_usuario,
                                        dt_atualizacao_nrec,
                                        nm_usuario_nrec,
                                        ie_status,
                                        nr_seq_lote,
                                        ie_obrigacao,
                                        ds_url,
                                        ie_tipo_geracao,
                                        dt_inicio,
                                        dt_fim,
                                        ds_parametros,
                                        ds_nome_arquivo,
                                        ds_log,
                                        ds_lote,
                                        ie_bloqueado,
                                        cd_sid)
                                values (	sequence_w,
                                        clock_timestamp(), 
                                        username_p, 
                                        clock_timestamp(), 
                                        username_p, 
                                        1,
                                        batch_code_p, 
                                        tax_obligation_p, 
                                        null,
                                        generation_type_p,
                                        clock_timestamp(),
                                        null,
                                        null,
                                        null,
                                        null,
                                        batch_description_p,
                                        0,
                                        0);
            commit;

        sequence_p := sequence_w;

    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tax_parallel_procedure_pck.add_record_to_queue (username_p fis_fila_arquivo.nm_usuario%type, batch_code_p fis_fila_arquivo.nr_seq_lote%type, batch_description_p fis_fila_arquivo.ds_lote%type, tax_obligation_p fis_fila_arquivo.ie_obrigacao%type, generation_type_p fis_fila_arquivo.ie_tipo_geracao%type, sequence_p INOUT fis_fila_arquivo.nr_sequencia%type) FROM PUBLIC;
