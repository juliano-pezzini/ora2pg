-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE tax_parallel_procedure_pck.add_notification (message_code_p bigint, language_code_p bigint, username_p fis_notificacao_fila_arq.nm_usuario%type, profile_code_p fis_notificacao_fila_arq.cd_profiles_destino%type, generation_type_p fis_fila_arquivo.ie_tipo_geracao%type, tax_obligation_p fis_fila_arquivo.ie_obrigacao%type, batch_code_p fis_fila_arquivo.nr_seq_lote%type) AS $body$
DECLARE


        title_w fis_notificacao_fila_arq.ds_titulo%type;
        content_w fis_notificacao_fila_arq.ds_conteudo%type;

BEGIN
        title_w := tax_parallel_procedure_pck.get_title_notification(generation_type_p, tax_obligation_p, batch_code_p, language_code_p);
        content_w := obter_texto_tasy(message_code_p, language_code_p);

        insert into fis_notificacao_fila_arq(   nr_sequencia,
                                                dt_atualizacao,
                                                nm_usuario,
                                                dt_atualizacao_nrec,
                                                nm_usuario_nrec,
                                                ds_titulo,
                                                ds_conteudo,
                                                nm_usuarios_destino,
                                                cd_profiles_destino,
                                                cd_grupos_destino,
                                                cd_setores_desitno,
                                                ie_status)
                                        values (nextval('fis_notificacao_fila_arq_seq'),
                                                clock_timestamp(),
                                                username_p,
                                                clock_timestamp(),
                                                username_p,
                                                title_w,
                                                content_w,
                                                null,
                                                profile_code_p,
                                                null,
                                                null,
                                                3);

    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tax_parallel_procedure_pck.add_notification (message_code_p bigint, language_code_p bigint, username_p fis_notificacao_fila_arq.nm_usuario%type, profile_code_p fis_notificacao_fila_arq.cd_profiles_destino%type, generation_type_p fis_fila_arquivo.ie_tipo_geracao%type, tax_obligation_p fis_fila_arquivo.ie_obrigacao%type, batch_code_p fis_fila_arquivo.nr_seq_lote%type) FROM PUBLIC;
