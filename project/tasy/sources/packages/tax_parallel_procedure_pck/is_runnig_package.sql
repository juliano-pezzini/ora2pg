-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION tax_parallel_procedure_pck.is_runnig ( tax_obligation_p text, generation_type_p fis_fila_arquivo.ie_tipo_geracao%type, batch_code_p fis_fila_arquivo.nr_seq_lote%type) RETURNS bigint AS $body$
DECLARE

      runnig_size_w bigint := 0;

BEGIN
      select  count(*)
      into STRICT    runnig_size_w
      from    fis_fila_arquivo
      where   ie_status in (1, 2) 
      and     nr_seq_lote = batch_code_p
      and     ie_tipo_geracao = generation_type_p
      and     ie_obrigacao in (   SELECT  vl_dominio 
                                  from    valor_dominio 
                                  where   cd_dominio = 9533 
                                  and     ds_valor_dominio like '%' || tax_obligation_p || '%'  );

      return runnig_size_w;

    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION tax_parallel_procedure_pck.is_runnig ( tax_obligation_p text, generation_type_p fis_fila_arquivo.ie_tipo_geracao%type, batch_code_p fis_fila_arquivo.nr_seq_lote%type) FROM PUBLIC;
