-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE itech_pck.generate_file ( event_code bigint, file_name text, file_data text) AS $body$
DECLARE

    ds_local_w         varchar(100) := null;
    qt_maximum_size_w  bigint    := 32767;
    current_setting('itech_pck.ds_line_w')::varchar(32767)          varchar(32767);
    ie_windows_linux_w varchar(2) := 'W';

BEGIN
    ds_local_w := jpn_utl_file_pck.create_file(event_code, file_name, 'S', qt_maximum_size_w, ds_local_w, ie_windows_linux_w); -- Create the file
    PERFORM set_config('itech_pck.ds_line_w', file_data, false);
    CALL jpn_utl_file_pck.write_file(current_setting('itech_pck.ds_line_w')::varchar(32767));
    CALL jpn_utl_file_pck.close_file();
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE itech_pck.generate_file ( event_code bigint, file_name text, file_data text) FROM PUBLIC;
