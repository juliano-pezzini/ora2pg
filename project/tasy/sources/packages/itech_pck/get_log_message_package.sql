-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION itech_pck.get_log_message ( data_file_p text, message_type_p text, receiver_code_p text, nr_prontuario_p bigint default null, nr_prescricao_p bigint default null, nm_usuario_p text default null) RETURNS varchar AS $body$
BEGIN
    PERFORM set_config('itech_pck.ds_log_message_w', 'Log Message = File created successfully'||', '
                        ||'File Name = '||data_file_p||', ' 
                        ||'Interface Message Code ='|| message_type_p||', ' 
                        ||'Date of Transmission = '||to_char(clock_timestamp(),'dd/mm/yyyy')||', ' 
                        ||'Time of Transmission = '||to_char(clock_timestamp(),'hh24:mi:ss')||', ' 
                        ||'Own System Code = AB'||', ' 
                        ||'Counterpart System code = ' || receiver_code_p ||', '
                        ||'Patient MRN = '||to_char(nr_prontuario_p)||', ' 
                        ||'Order No = '||to_char(nr_prescricao_p)||', ' 
                        ||'User ID = '||nm_usuario_p||'' , false);
    return current_setting('itech_pck.ds_log_message_w')::varchar(32767);
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION itech_pck.get_log_message ( data_file_p text, message_type_p text, receiver_code_p text, nr_prontuario_p bigint default null, nr_prescricao_p bigint default null, nm_usuario_p text default null) FROM PUBLIC;
