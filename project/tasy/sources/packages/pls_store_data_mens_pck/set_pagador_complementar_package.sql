-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_store_data_mens_pck.set_pagador_complementar (nr_seq_pagador_p pls_contrato_pagador.nr_sequencia%type, nr_seq_pagador_benef_p pls_contrato_pagador.nr_sequencia%type) AS $body$
DECLARE

	C01 CURSOR FOR 
		SELECT	nr_seq_pagador_item, 
			ie_tipo_item 
		from	pls_pagador_item_mens 
		where	nr_seq_pagador		= nr_seq_pagador_benef_p;
		/*where	nr_seq_pagador		= nr_seq_pagador_p 
		and	get_ie_pag_complementar	= 'N' 
		union all 
		select	nr_seq_pagador_item, 
			ie_tipo_item 
		from	pls_pagador_item_mens 
		where	nr_seq_pagador_item	= nr_seq_pagador_p 
		and	nr_seq_pagador		= nr_seq_pagador_benef_p 
		and	get_ie_pag_complementar	= 'S';*/
	
BEGIN 
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_preco_pre_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_copartic_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_cobr_retro_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_fx_etaria_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_pos_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_subsid_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_vl_n_coberto_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_bonificacao_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_lanc_manual_w', nr_seq_pagador_benef_p, false);
	PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_var_custo_w', nr_seq_pagador_benef_p, false);
	for r_c01_w in C01 loop 
		if (r_c01_w.ie_tipo_item = '1') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_preco_pre_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '3') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_copartic_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '4') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_cobr_retro_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '5') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_fx_etaria_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '6') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_pos_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '12') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_subsid_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '13') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_vl_n_coberto_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '14') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_bonificacao_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '20') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_lanc_manual_w', r_c01_w.nr_seq_pagador_item, false);
		elsif (r_c01_w.ie_tipo_item = '25') then 
			PERFORM set_config('pls_store_data_mens_pck.nr_seq_pagador_var_custo_w', r_c01_w.nr_seq_pagador_item, false);
		end if;
	end loop;
	end;
	

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_store_data_mens_pck.set_pagador_complementar (nr_seq_pagador_p pls_contrato_pagador.nr_sequencia%type, nr_seq_pagador_benef_p pls_contrato_pagador.nr_sequencia%type) FROM PUBLIC;
