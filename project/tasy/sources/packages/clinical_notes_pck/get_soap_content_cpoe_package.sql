-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION clinical_notes_pck.get_soap_content_cpoe ( nr_atendimento_p bigint, nr_sequencia_p bigint, ie_record_type_p text, ie_record_sub_type_p text, ie_soap_type text, ie_stage_p bigint, nr_prescricao_p text default null, ie_action_p bigint default null) RETURNS varchar AS $body$
DECLARE

    clinical_note_fields CURSOR FOR
      SELECT *
      from table(clinical_notes_pck.get_clinical_note_rule(nr_atendimento_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p));
    /* CPOE - Nutrition */

    c00 CURSOR FOR
    SELECT cpoe_obter_ds_dieta( b.ie_tipo_dieta, b.cd_dieta, b.cd_material, b.cd_mat_prod1, b.nr_seq_tipo, b.dt_liberacao, 'S', b.dt_lib_suspensao, b.dt_suspensao, b.ie_administracao, b.cd_intervalo, b.cd_unid_med_prod1, b.ie_via_leite1, b.qt_dose_prod1, b.cd_mat_prod2,
    b.cd_unid_med_prod2, b.qt_dose_prod2, b.cd_mat_prod3, b.cd_unid_med_prod3, b.qt_dose_prod3, b.cd_mat_prod4, b.cd_unid_med_prod4, b.qt_dose_prod4, b.cd_mat_prod5, b.cd_unid_med_prod5, b.qt_dose_prod5, b.ie_forma, b.qt_dose, b.cd_unidade_medida_dose) ds_item,
    obter_pf_usuario(coalesce(b.nm_usuario, b.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(b.dt_atualizacao_nrec,b.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(b.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    b.ds_horarios ds_hours_w,
    b.ds_orientacao ds_orientation_w,
    b.ds_justificativa ds_justificatio_w,
    b.ds_observacao ds_notes_w,
    (SELECT max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_staple_food,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=b.cd_dieta and b.NR_SEQ_STAPLE_FOOD = nc.nr_sequencia)ds_staple_food_w, 
    (select max(ds_local_refeicao) from    NUT_LOCAL_REFEICAO where   ie_situacao = 'A' and  nr_sequencia = b.NR_SEQ_NUT_LOCAL_REF) ds_location_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_beverage,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=b.cd_dieta  and b.NR_SEQ_BEVERAGE = nc.nr_sequencia) ds_beverage_w
    FROM (select a.nr_seq_dieta_cpoe nr_seq_dieta_cpoe, c.dt_suspensao dt_suspensao ,c.nr_prescricao nr_prescricao
    from prescr_dieta a,prescr_medica c
    where a.nr_prescricao = c.nr_prescricao
    and coalesce(c.dt_suspensao::text, '') = ''
    and c.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dieta b
LEFT OUTER JOIN t ON (b.nr_sequencia = t.nr_seq_dieta_cpoe)
WHERE coalesce(b.dt_lib_suspensao::text, '') = '' and coalesce(b.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 0 and b.nr_sequencia = nr_sequencia_p and b.ie_tipo_dieta = 'O'
     
union all

    select cpoe_obter_ds_dieta(c.ie_tipo_dieta, c.cd_dieta, c.cd_material, c.cd_mat_prod1, c.nr_seq_tipo, c.dt_liberacao,'S', c.dt_lib_suspensao, c.dt_suspensao, c.ie_administracao, c.cd_intervalo, c.cd_unid_med_prod1, c.ie_via_leite1, c.qt_dose_prod1, c.cd_mat_prod2, c.cd_unid_med_prod2, 
    c.qt_dose_prod2, c.cd_mat_prod3, c.cd_unid_med_prod3, c.qt_dose_prod3, c.cd_mat_prod4, c.cd_unid_med_prod4, c.qt_dose_prod4, c.cd_mat_prod5, c.cd_unid_med_prod5, c.qt_dose_prod5, c.ie_forma, c.qt_dose, c.cd_unidade_medida_dose) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    c.ds_orientacao ds_orientation_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_staple_food,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=c.cd_dieta and c.NR_SEQ_STAPLE_FOOD = nc.nr_sequencia)ds_staple_food_w, 
    (select max(ds_local_refeicao) from    NUT_LOCAL_REFEICAO where   ie_situacao = 'A' and  nr_sequencia = c.NR_SEQ_NUT_LOCAL_REF) ds_location_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_beverage,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=c.cd_dieta  and c.NR_SEQ_BEVERAGE = nc.nr_sequencia) ds_beverage_w
    FROM (select b.nr_seq_dieta_cpoe nr_seq_dieta_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao
    from prescr_material b,prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dieta c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_dieta_cpoe)
WHERE coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 0 and c.nr_sequencia = nr_sequencia_p and c.ie_tipo_dieta = 'E'
     
union all

    select cpoe_obter_ds_dieta(c.ie_tipo_dieta, c.cd_dieta, c.cd_material, c.cd_mat_prod1, c.nr_seq_tipo, c.dt_liberacao, 'S', c.dt_lib_suspensao, c.dt_suspensao, c.ie_administracao, c.cd_intervalo, c.cd_unid_med_prod1, c.ie_via_leite1, c.qt_dose_prod1, c.cd_mat_prod2, c.cd_unid_med_prod2, 
    c.qt_dose_prod2, c.cd_mat_prod3, c.cd_unid_med_prod3, c.qt_dose_prod3, c.cd_mat_prod4, c.cd_unid_med_prod4, c.qt_dose_prod4, c.cd_mat_prod5, c.cd_unid_med_prod5, c.qt_dose_prod5, c.ie_forma,c.qt_dose, c.cd_unidade_medida_dose) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    c.ds_orientacao ds_orientation_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_staple_food,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=c.cd_dieta and c.NR_SEQ_STAPLE_FOOD = nc.nr_sequencia)ds_staple_food_w, 
    (select max(ds_local_refeicao) from    NUT_LOCAL_REFEICAO where   ie_situacao = 'A' and  nr_sequencia = c.NR_SEQ_NUT_LOCAL_REF) ds_location_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_beverage,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=c.cd_dieta  and c.NR_SEQ_BEVERAGE = nc.nr_sequencia) ds_beverage_w
    FROM (select b.nr_seq_dieta_cpoe nr_seq_dieta_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao
    from prescr_material b,prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dieta c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_dieta_cpoe)
WHERE coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 0 and c.nr_sequencia = nr_sequencia_p and c.ie_tipo_dieta = 'S'
     
union all

    select cpoe_obter_ds_dieta( d.ie_tipo_dieta, d.cd_dieta, d.cd_material, d.cd_mat_prod1, d.nr_seq_tipo, d.dt_liberacao, 'S', d.dt_lib_suspensao, d.dt_suspensao, d.ie_administracao, d.cd_intervalo, d.cd_unid_med_prod1, d.ie_via_leite1, d.qt_dose_prod1, d.cd_mat_prod2, 
    d.cd_unid_med_prod2, d.qt_dose_prod2, d.cd_mat_prod3, d.cd_unid_med_prod3, d.qt_dose_prod3, d.cd_mat_prod4, d.cd_unid_med_prod4, d.qt_dose_prod4, d.cd_mat_prod5, d.cd_unid_med_prod5, d.qt_dose_prod5, d.ie_forma, d.qt_dose, d.cd_unidade_medida_dose) ds_item,
    obter_pf_usuario(coalesce(d.nm_usuario, d.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(d.dt_atualizacao_nrec,d.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(d.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    d.ds_horarios ds_hours_w,
    d.ds_orientacao ds_orientation_w,
    d.ds_justificativa ds_justificatio_w,
    d.ds_observacao ds_notes_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_staple_food,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=d.cd_dieta and d.NR_SEQ_STAPLE_FOOD = nc.nr_sequencia)ds_staple_food_w, 
    (select max(ds_local_refeicao) from    NUT_LOCAL_REFEICAO where   ie_situacao = 'A' and  nr_sequencia = d.NR_SEQ_NUT_LOCAL_REF) ds_location_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_beverage,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=d.cd_dieta  and d.NR_SEQ_BEVERAGE = nc.nr_sequencia) ds_beverage_w
    FROM (select b.nr_seq_dieta_cpoe nr_seq_dieta_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao
    from prescr_dieta a,prescr_leite_deriv b,prescr_material c
    where a.nr_prescricao = c.nr_prescricao
    and a.nr_prescricao    = b.nr_prescricao
    and c.nr_seq_leite_deriv = b.nr_sequencia
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dieta d
LEFT OUTER JOIN t ON (d.nr_sequencia = t.nr_seq_dieta_cpoe)
WHERE coalesce(d.dt_lib_suspensao::text, '') = '' and coalesce(d.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 0 and d.nr_sequencia = nr_sequencia_p and d.ie_tipo_dieta      = 'L'
     
union all

    select cpoe_obter_ds_dieta( a.ie_tipo_dieta, a.cd_dieta, a.cd_material, a.cd_mat_prod1, a.nr_seq_tipo, a.dt_liberacao, 'S', a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao, a.cd_intervalo, a.cd_unid_med_prod1, a.ie_via_leite1, a.qt_dose_prod1, a.cd_mat_prod2, 
    a.cd_unid_med_prod2, a.qt_dose_prod2, a.cd_mat_prod3, a.cd_unid_med_prod3, a.qt_dose_prod3, a.cd_mat_prod4, a.cd_unid_med_prod4, a.qt_dose_prod4, a.cd_mat_prod5, a.cd_unid_med_prod5, a.qt_dose_prod5, a.ie_forma, a.qt_dose, a.cd_unidade_medida_dose) ds_item,
    obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(a.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    a.ds_horarios ds_hours_w,
    a.ds_orientacao ds_orientation_w,
    a.ds_justificativa ds_justificatio_w,
    a.ds_observacao ds_notes_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_staple_food,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=a.cd_dieta and a.NR_SEQ_STAPLE_FOOD = nc.nr_sequencia)ds_staple_food_w, 
    (select max(ds_local_refeicao) from    NUT_LOCAL_REFEICAO where   ie_situacao = 'A' and  nr_sequencia = a.NR_SEQ_NUT_LOCAL_REF) ds_location_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_beverage,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=a.cd_dieta  and a.NR_SEQ_BEVERAGE = nc.nr_sequencia) ds_beverage_w
    FROM (select c.nr_seq_npt_cpoe nr_seq_npt_cpoe /* , c.dt_suspensao dt_suspensao */
 ,b.nr_prescricao nr_prescricao
    from prescr_medica b,nut_pac c
    where b.nr_prescricao = c.nr_prescricao
    and b.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dieta a
LEFT OUTER JOIN t ON (a.nr_sequencia = t.nr_seq_npt_cpoe)
WHERE coalesce(a.dt_lib_suspensao::text, '') = '' and (a.dt_liberacao IS NOT NULL AND a.dt_liberacao::text <> '') and coalesce(a.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 0 and a.nr_sequencia = nr_sequencia_p and a.ie_tipo_dieta    in ('P', 'I')
     
union all

    select cpoe_obter_ds_dieta( a.ie_tipo_dieta, a.cd_dieta, a.cd_material, a.cd_mat_prod1, a.nr_seq_tipo, a.dt_liberacao, 'S', a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao, a.cd_intervalo, a.cd_unid_med_prod1, a.ie_via_leite1, a.qt_dose_prod1, a.cd_mat_prod2, 
    a.cd_unid_med_prod2, a.qt_dose_prod2, a.cd_mat_prod3, a.cd_unid_med_prod3, a.qt_dose_prod3, a.cd_mat_prod4, a.cd_unid_med_prod4, a.qt_dose_prod4, a.cd_mat_prod5, a.cd_unid_med_prod5, a.qt_dose_prod5, a.ie_forma, a.qt_dose, a.cd_unidade_medida_dose) ds_item,
    obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(a.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    a.ds_horarios ds_hours_w,
    a.ds_orientacao ds_orientation_w,
    a.ds_justificativa ds_justificatio_w,
    a.ds_observacao ds_notes_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_staple_food,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=a.cd_dieta and a.NR_SEQ_STAPLE_FOOD = nc.nr_sequencia)ds_staple_food_w, 
    (select max(ds_local_refeicao) from    NUT_LOCAL_REFEICAO where   ie_situacao = 'A' and  nr_sequencia = a.NR_SEQ_NUT_LOCAL_REF) ds_location_w,
    (select max(nc.DS_COMPOSICAO)from NUT_COMPOSICAO nc, DIETA_COMP_SERVICO dcs where coalesce(nc.ie_beverage,'N') = 'S'and nc.ie_situacao = 'A'and nc.nr_sequencia = dcs.nr_seq_composicao_serv and dcs.nr_seq_dieta=a.cd_dieta  and a.NR_SEQ_BEVERAGE = nc.nr_sequencia) ds_beverage_w
    FROM (select c.nr_seq_dieta_cpoe nr_seq_dieta_cpoe /* , c.dt_suspensao dt_suspensao */
 ,b.nr_prescricao nr_prescricao
    from prescr_medica b,rep_jejum c
    where b.nr_prescricao = c.nr_prescricao
    and b.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dieta a
LEFT OUTER JOIN t ON (a.nr_sequencia = t.nr_seq_dieta_cpoe)
WHERE coalesce(a.dt_lib_suspensao::text, '') = '' and coalesce(a.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 0 and a.nr_sequencia = nr_sequencia_p and a.ie_tipo_dieta     = 'J';
    /* CPOE - Medicines and Infusions */

    c01 CURSOR FOR
    SELECT ds_item,
    ds_orderer_w,
    ds_order_w,
    dt_start_w,
    ds_hours_w,
    ds_orientation_w,
    ds_justificatio_w,
    ds_notes_w,
    yj_code_w,
    by_patient_w,
    diagnosis_usd_w,
    prescr_loc_w,
    ds_reason_w,
    nr_order_unit_w,
    si_type_of_prescription_w,
    ds_rp_w,
    adm_days_w,
    ord_unit_cmnts_w,
    rp_cmnts_w,
    is_no_time_interval_w,
    ds_dose_total_w,
    ds_dose_daily_w,
    ds_interval_w,
    rp_type_sol_w,
    rp_bag_vol_w,
    rp_total_time_w,
    rp_inf_device_w,
    rp_infu_set_vol_w   ,
    rp_corr_fac_w,
    rp_ref_cal_w,
    rp_stages_w,
    rp_tot_vol_w,
    rp_in_rate_w,
    rp_stage_w,
    rp_rapid_inf_w,
    rp_min_irate_w,
    rp_max_irate_w,
    rp_ther_dose_w,
    rp_incremt_w,
    rp_inc_dose_w,
    rp_analgesia_w,
    rp_mode_w,
    rp_flow_dose_w,
    rp_bolus_dose_w,
    rp_lockout_w,
    rp_ini_dose_w,
    ie_controle_tempo_w,
	rp_via_route_w,
    rp_drip_shot_w,
    rp_times_w,
    ie_formato_admin_w,
	qt_dose_single_w,
	qt_dias_padrao_w
    from
    (
    SELECT    CPOE_Obter_desc_info_material(c.cd_material,c.cd_mat_comp1,c.qt_dose_comp1,c.cd_unid_med_dose_comp1,c.cd_mat_comp2,c.qt_dose_comp2,c.cd_unid_med_dose_comp2,c.cd_mat_comp3,c.qt_dose_comp3,c.cd_unid_med_dose_comp3,c.cd_mat_dil,c.qt_dose_dil,c.cd_unid_med_dose_dil,c.cd_mat_red,c.qt_dose_red,c.cd_unid_med_dose_red,c.dt_liberacao,null,null,c.ie_via_aplicacao,null,c.dt_lib_suspensao,c.dt_suspensao,c.ie_administracao,c.nr_seq_ataque,
	c.nr_seq_procedimento,c.nr_seq_adicional,c.nr_seq_hemoterapia,c.ds_dose_diferenciada,c.ds_dose_diferenciada_dil,c.ds_dose_diferenciada_red,c.ds_dose_diferenciada_comp1,c.ds_dose_diferenciada_comp2,c.ds_dose_diferenciada_comp3,c.cd_mat_comp4,c.qt_dose_comp4,c.cd_unid_med_dose_comp4,c.ds_dose_diferenciada_comp4,c.cd_mat_comp5,c.qt_dose_comp5,c.cd_unid_med_dose_comp5,c.ds_dose_diferenciada_comp5,c.cd_mat_comp6,c.qt_dose_comp6,c.cd_unid_med_dose_comp6,c.ds_dose_diferenciada_comp6,
	c.dt_inicio,c.dt_fim, c.dt_fim_cih,c.nr_dia_util,c.ie_antibiotico,c.ie_tipo_solucao,c.cd_mat_comp7,c.qt_dose_comp7,c.cd_unid_med_dose_comp7,c.ds_dose_diferenciada_comp7,null,c.cd_mat_recons,c.qt_dose_recons,c.cd_unid_med_dose_recons,c.ds_dose_diferenciada_rec,c.ds_solucao,c.ie_duracao,c.ie_ref_calculo,c.nr_etapas,c.ie_controle_tempo,c.qt_dias_solicitado,c.qt_dias_liberado,c.nr_atendimento,c.ie_baixado_por_alta,c.dt_alta_medico,substr(cpoe_if_item_allowed(wheb_usuario_pck.get_cd_perfil,'DR'),1,80),
	'N',c.nr_sequencia,obter_horarios_regra(c.ds_horarios),null,c.ie_reset_atb,c.nr_seq_cpoe_anterior,c.ds_calc_therap_dose,null,c.qt_final_concentration,c.ie_um_final_conc_pca,c.qt_dose_range_min,c.qt_dose_range_max,c.ie_dose_range,c.ds_medic_nao_padrao,c.ie_medicacao_paciente,'S',c.qt_dose_dia) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'shortDate',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    replace(c.ds_horarios,' ',',') ds_hours_w,
    coalesce( c.DS_REF_CALCULO, c.DS_ORIENTACAO_PREPARO) ds_orientation_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w,
    coalesce(m.CD_YJ_CODE, null) yj_code_w,
    obter_valor_dominio(6,c.ie_medicacao_paciente) by_patient_w,
    obter_valor_dominio(6,c.si_diagnosis_used) diagnosis_usd_w,
    obter_valor_dominio(3148,c.ie_procedencia) prescr_loc_w,
    null ds_reason_w,
    d.nr_order_unit nr_order_unit_w, -- order slip number
    obter_valor_dominio(10080,d.SI_TYPE_OF_PRESCRIPTION) si_type_of_prescription_w, -- Order Type of prescription
    get_cpoe_rp_description(e.nr_sequencia, 'S') ds_rp_w, -- RP number
    CASE WHEN c.ie_duracao='P' THEN PKG_DATE_FORMATERS.to_varchar(e.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) || '-' || PKG_DATE_FORMATERS.to_varchar( e.dt_fim,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario)  ELSE PKG_DATE_FORMATERS.to_varchar(e.dt_inicio,'shortDate',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) || '-' || 'Until second order' END  adm_days_w,  --Administration days
    CPOE_GET_LIST_OF_COMMENTS(d.nr_sequencia, 'CPOE_ORDER_UNIT','DC', null) ord_unit_cmnts_w, -- Comments for Order unit
    CPOE_GET_LIST_OF_COMMENTS(e.nr_sequencia, 'CPOE_RP','DC', null) rp_cmnts_w,--Comments for RP,
    clinical_notes_pck.get_no_time_interval(c.cd_intervalo) is_no_time_interval_w,
    nvl2(c.qt_dose,c.qt_dose || ' ' ||(SELECT max(z.DS_UNIDADE_MEDIDA)  FROM UNIDADE_MEDIDA_DOSE_V z where z.CD_UNIDADE_MEDIDA = c.CD_UNIDADE_MEDIDA),null) ds_dose_total_w,
    nvl2(c.qt_dose_dia,c.qt_dose_dia || ' ' ||(SELECT max(z.DS_UNIDADE_MEDIDA)  FROM UNIDADE_MEDIDA_DOSE_V z where z.CD_UNIDADE_MEDIDA = c.CD_UNIDADE_MEDIDA),null) ds_dose_daily_w,
    Obter_desc_intervalo_prescr(c.cd_intervalo) ds_interval_w,
    OBTER_DESC_CAMPO_GRID(716712,e.IE_TIPO_SOLUCAO )rp_type_sol_w,
    e.qt_volume rp_bag_vol_w,
    e.QT_TEMPO_APLICACAO rp_total_time_w,
    obter_valor_dominio(1537,e.IE_BOMBA_INFUSAO) rp_inf_device_w,
    (Obter_vol_Dispositivo_solucao(e.ie_bomba_infusao))::numeric  rp_infu_set_vol_w   ,
    obter_valor_dominio(6,e.IE_FATOR_CORRECAO)rp_corr_fac_w,
    obter_valor_dominio(7040,e.IE_REF_CALCULO)rp_ref_cal_w,
    e.nr_etapas rp_stages_w,
    e.qt_solucao_total rp_tot_vol_w,
    (CASE WHEN (e.qt_dosagem IS NOT NULL AND e.qt_dosagem::text <> '') THEN e.qt_dosagem||' '|| obter_valor_dominio(93,e.ie_tipo_dosagem) ELSE null END)rp_in_rate_w,
    e.qt_hora_fase rp_stage_w,
    substr(obter_desc_campo_grid(1036618,e.si_rapid_infusion),1,255)rp_rapid_inf_w,
    (CASE WHEN (e.qt_dosagem_min IS NOT NULL AND e.qt_dosagem_min::text <> '') THEN e.qt_dosagem_min||' '||obter_valor_dominio(93,e.ie_tipo_dosagem) ELSE null END)rp_min_irate_w,
    (CASE WHEN (e.qt_dosagem_max IS NOT NULL AND e.qt_dosagem_max::text <> '') THEN e.qt_dosagem_min||' '||obter_valor_dominio(93,e.ie_tipo_dosagem) ELSE null END)rp_max_irate_w,
    nvl2(e.qt_dose_terapeutica,e.qt_dose_terapeutica||' '||( select coalesce(  coalesce(coalesce(obter_desc_expressao(cd_exp_dose),obter_desc_expressao(cd_exp_abreviacao)),ds_abreviacao), coalesce(obter_desc_expressao(cd_exp_dose),ds_dose_terapeutica)) ds
    from  regra_dose_terap where ie_situacao = 'A' and ie_solucao = 'S' and nr_sequencia=e.CD_UNID_MEDIC_TERAP),null)rp_ther_dose_w,
    obter_valor_dominio(6,e.ie_incrementar)rp_incremt_w,
    (CASE WHEN (e.qt_dosagem_inc IS NOT NULL AND e.qt_dosagem_inc::text <> '') THEN e.qt_dosagem_inc||' '||obter_valor_dominio(93,e.ie_tipo_dosagem_inc) ELSE null END)rp_inc_dose_w,
    obter_valor_dominio(2715,e.ie_tipo_analgesia) rp_analgesia_w,
    obter_valor_dominio(2714,e.ie_pca_modo_prog) rp_mode_w,
    (CASE WHEN (e.qt_vol_infusao_pca IS NOT NULL AND e.qt_vol_infusao_pca::text <> '') THEN e.qt_vol_infusao_pca||' '||obter_valor_dominio(3184,e.ie_um_fluxo_pca) ELSE null END)rp_flow_dose_w,
    (CASE WHEN (e.qt_bolus_pca IS NOT NULL AND e.qt_bolus_pca::text <> '') THEN e.qt_bolus_pca||' '||obter_valor_dominio(3185,e.ie_um_bolus_pca) ELSE null END)rp_bolus_dose_w,
    e.qt_intervalo_bloqueio rp_lockout_w,
    (CASE WHEN (e.qt_dose_inicial_pca IS NOT NULL AND e.qt_dose_inicial_pca::text <> '') THEN e.qt_dose_inicial_pca||' '||obter_valor_dominio(3185,e.ie_um_dose_inicio_pca) ELSE null END)rp_ini_dose_w,
	coalesce(c.ie_controle_tempo,'N') ie_controle_tempo_w,
	(select x.DS_VIA_APLICACAO from VIA_APLICACAO x where x.IE_VIA_APLICACAO=e.IE_VIA_APLICACAO) rp_via_route_w,
    obter_desc_campo_grid(1044740,e.IE_DRIP_SHOT) rp_drip_shot_w,
    REPLACE(e.DS_HORARIOS,' ',',') rp_times_w,
	(select max(coalesce(x.ie_formato_administracao,'TD')) from via_aplicacao x where x.ie_via_aplicacao  = coalesce(e.ie_via_aplicacao,c.ie_via_aplicacao))ie_formato_admin_w,
    nvl2(c.qt_dose,c.qt_dose || ' ' ||(SELECT max(z.DS_UNIDADE_MEDIDA) FROM UNIDADE_MEDIDA_DOSE_V z where z.CD_UNIDADE_MEDIDA = c.CD_UNIDADE_MEDIDA),null) qt_dose_single_w,
	(CASE WHEN (e.qt_dias_padrao IS NOT NULL AND e.qt_dias_padrao::text <> '') THEN e.qt_dias_padrao || ' ' ||  obter_desc_expressao(653185) ELSE null END) qt_dias_padrao_w
    from cpoe_material c
    join material m on m.cd_material = c.cd_material
    left outer join(select b.nr_seq_mat_cpoe,b.ie_agrupador, a.dt_suspensao, a.nr_prescricao
    from prescr_medica a ,prescr_material b
    where b.ie_agrupador in (1,4)
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao =  (nr_prescricao_p)::numeric  )t on c.nr_sequencia = t.nr_seq_mat_cpoe
    left outer join cpoe_rp e on c.nr_seq_cpoe_rp = e.nr_sequencia
    left outer join cpoe_order_unit d on e.nr_seq_cpoe_order_unit = d.nr_sequencia
    where coalesce(ie_material,'N') = 'N'
    and coalesce(c.dt_lib_suspensao::text, '') = ''
    and coalesce(c.dt_suspensao::text, '') = ''
    and (ie_record_sub_type_p)::numeric  = 1
    and c.nr_sequencia = nr_sequencia_p
    ) alias94group by ds_item, ds_orderer_w, ds_order_w, dt_start_w, ds_hours_w, ds_orientation_w, ds_justificatio_w, ds_notes_w, yj_code_w, by_patient_w, diagnosis_usd_w, prescr_loc_w, ds_reason_w,nr_order_unit_w,si_type_of_prescription_w,ds_rp_w,adm_days_w,ord_unit_cmnts_w,rp_cmnts_w,is_no_time_interval_w,ds_dose_total_w,ds_dose_daily_w,ds_interval_w,
    rp_type_sol_w,rp_bag_vol_w,rp_total_time_w,rp_inf_device_w,rp_infu_set_vol_w,rp_corr_fac_w,rp_ref_cal_w,rp_stages_w,rp_tot_vol_w,rp_in_rate_w,rp_stage_w,rp_rapid_inf_w,rp_min_irate_w,rp_max_irate_w,rp_ther_dose_w,rp_incremt_w,rp_inc_dose_w,rp_analgesia_w,rp_mode_w,rp_flow_dose_w,rp_bolus_dose_w,rp_lockout_w, rp_ini_dose_w,ie_controle_tempo_w,rp_drip_shot_w,rp_via_route_w,rp_times_w,ie_formato_admin_w,qt_dose_single_w, qt_dias_padrao_w;
	/* CPOE - Exams and procedures */

    c02 CURSOR FOR
    SELECT cpoe_obter_desc_grid_proc( substr(cpoe_obter_desc_proc_interno(c.nr_seq_proc_interno),1,255), c.cd_intervalo, c.qt_procedimento, c.cd_mat_proc1, c.qt_dose_mat1, c.cd_unid_medida_dose_mat1, c.ie_assoc_adep1, c.cd_mat_proc2, c.qt_dose_mat2, c.cd_unid_medida_dose_mat2, c.ie_assoc_adep2, c.cd_mat_proc3, c.qt_dose_mat3,
    c.cd_unid_medida_dose_mat3, c.ie_assoc_adep3, c.cd_mat_proc4, c.qt_dose_mat4, c.cd_unid_medida_dose_mat4, c.ie_assoc_adep4, c.cd_mat_proc5, c.qt_dose_mat5, c.cd_unid_medida_dose_mat5, c.ie_assoc_adep5, c.dt_lib_suspensao, c.dt_suspensao, c.ie_administracao, null, null, c.cd_mat_proc6, c.qt_dose_mat6, c.cd_unid_medida_dose_mat6, c.ie_assoc_adep6, c.cd_mat_proc7, c.qt_dose_mat7, c.cd_unid_medida_dose_mat7, c.ie_assoc_adep7) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    null ds_purpose_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w,
    (SELECT CASE WHEN max(upper(x.ie_tipo))='REAB' THEN 'S'  ELSE 'N' END   from  proc_interno x where x.nr_sequencia = c.nr_seq_proc_interno) is_rehab_proc_w,
    cpoe_get_list_of_comments(c.nr_sequencia, 'CPOE_PROCEDIMENTO', 'DC',null) ds_std_cmnts_w,
    obter_valor_dominio(8664,c.cd_posicao)ds_initial_pos_w,
    pkg_date_formaters.to_varchar(c.dt_desired_start,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_desired_start_w,
    (select max(x.ds_topografia) from	topografia_dor x where 	x.nr_sequencia = c.nr_seq_topografia) ds_topography_w,
    obter_valor_dominio(7279,c.ie_lado) ds_side_w,
    (CASE WHEN (c.qt_duration IS NOT NULL AND c.qt_duration::text <> '') THEN c.qt_duration || ' ' || obter_desc_expressao(293308) ELSE null END) qt_duration_w,
    c.priscription_instruction ds_priscription_instruction_w,
    c.rp_comments rp_comments_w
    FROM (select b.nr_seq_proc_cpoe nr_seq_proc_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao
    from  prescr_procedimento b, prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_procedimento c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_proc_cpoe)
WHERE coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 2 and c.nr_sequencia = nr_sequencia_p;
	/*Exams and procedures - Rehabilitation*/

	crehab CURSOR FOR
	SELECT
	obter_nome_pf(cd_medico_resp) ds_medico_w,
	(SELECT ds_origem_paciente from rp_origem_paciente where nr_sequencia = a.nr_seq_origem_paciente) ds_origin_w,
	b.rp_disability_status ds_disability_w,
	obter_valor_dominio(6,b.ie_trat_principal)main_trtmnt_w,
	(select ds_status from rp_status_reabilitacao where nr_sequencia = a.nr_seq_status) ds_status_w,
	a.ds_observacao ds_notes_w,
	(select ds_tratamento from rp_tipo_tratamento where nr_sequencia = b.nr_seq_tipo_tratamento) ds_trtmnt_type_w,
	(select ds_calc_classif from rp_calc_classif where nr_sequencia = b.nr_seq_calc_classif) ds_calc_classif_w,
	pkg_date_formaters.to_varchar(b.dt_inicio_tratamento, 'timestamp', wheb_usuario_pck.get_cd_estabelecimento, wheb_usuario_pck.get_nm_usuario) dt_strt_trtmnt_w,
	pkg_date_formaters.to_varchar(b.dt_fim_tratamento, 'timestamp', wheb_usuario_pck.get_cd_estabelecimento, wheb_usuario_pck.get_nm_usuario) dt_end_trtmnt_w,
	pkg_date_formaters.to_varchar(b.dt_prevista_alta, 'timestamp', wheb_usuario_pck.get_cd_estabelecimento, wheb_usuario_pck.get_nm_usuario) dt_est_dschrg_w,
	obter_valor_dominio(10031,b.ie_calculation_date) ds_date_calc_w,
	b.ds_diagnosis ds_diagnosis_w,
	b.ds_complicacao ds_complication_w,
	(select ds_status from rp_status_reabilitacao where nr_sequencia = b.nr_seq_status) ds_status_trtmn_w,
	(select ds_classificacao from rp_disease_classif where nr_sequencia = b.nr_seq_dis_classif) ds_diag_classif_w,
     to_char(b.dt_early_addition_start,'YYYY/MM/DD')  dt_early_addition_start_w,
    obter_nome_medico(c.CD_SOLICITANTE_MEDICO,'n') cd_solicitante_medico_w,
    cpoe_get_order_unit_desc(c.nr_seq_cpoe_order_unit, 'S') nr_seq_cpoe_order_unit_w,
    to_char(c.DT_DIAGNOSTICO,'YYYY/MM/DD') dt_diagnostico_w,
	pkg_date_formaters.to_varchar((select max(z.dt_agenda) from agenda_consulta z where z.nr_sequencia in (select max(y.nr_seq_agenda) from agenda_consulta_adic y where y.nr_seq_tratamento = b.nr_sequencia)),'timestamp', wheb_usuario_pck.get_cd_estabelecimento, wheb_usuario_pck.get_nm_usuario)dt_agenda_w
	from rp_paciente_reabilitacao a,
	rp_tratamento b,
    cpoe_procedimento c
	where b.nr_seq_pac_reav = a.nr_sequencia
	AND b.nr_seq_cpoe_procedimento = nr_sequencia_p
    and b.nr_seq_cpoe_procedimento = c.nr_sequencia;
    /*Rehab - Reservation*/

    rehabrev CURSOR FOR
    SELECT p.nr_sequencia nr_sequencia_w,
	(SELECT max(substr(obter_nome_agenda(cd_agenda),1,100))  from	agenda_consulta a,agenda_consulta_adic b where    a.nr_sequencia = b.nr_seq_agenda and  b.nr_seq_reab_times = p.nr_sequencia) ds_agenda_w,
	to_char(p.DT_STARTDATE,'YYYY/MM/DD')  dt_start_date_w,
    to_char(p.DT_ENDDATE,'YYYY/MM/DD')  dt_end_date_w,
	substr(get_rehab_treatment_type(p.nr_sequencia),1,500) IE_TREATMENT_TYPE_W,
    CASE WHEN DS_TREATMENT_TYPE='I' THEN 'Individual' WHEN DS_TREATMENT_TYPE='G' THEN 'In group' WHEN DS_TREATMENT_TYPE='O' THEN 'others' END  DS_TREATMENT_TYPE_W
	from rp_reab_times p where nr_sequencia  in (
    select distinct(a.nr_sequencia) from rp_reab_times a, agenda_consulta_adic b,rp_tratamento c
    where a.nr_sequencia = b.NR_SEQ_REAB_TIMES
    and b.NR_SEQ_TRATAMENTO = c.nr_sequencia
    and c.nr_seq_cpoe_procedimento = nr_sequencia_p);

    rehabdet CURSOR(nr_sequencia_w bigint) FOR
	SELECT
		to_char(dt_agenda, 'YYYY/MM/DD(dy) hh24:mi-') || to_char(dt_agenda + (1/1440*a.nr_minuto_duracao),'hh24:mi') resvdata_w
	from	agenda_consulta a,
		agenda_consulta_adic b
	where    a.nr_sequencia = b.nr_seq_agenda
		and  b.nr_seq_reab_times = nr_sequencia_w
	order by 	dt_agenda;

    /* CPOE - Gastherapy */

    c03 CURSOR FOR
    SELECT cpoe_obter_desc_grid_gas( substr(cpoe_obter_desc_gas(c.nr_seq_gas,c.dt_liberacao),1,254), c.qt_gasoterapia, cpoe_obter_desc_unid_med_gas(c.ie_unidade_medida), substr(obter_valor_dominio(1299, c.ie_respiracao),1,200),
    substr(obter_desc_intervalo_prescr(c.cd_intervalo),1,255), dt_lib_suspensao, c.dt_suspensao, ie_administracao) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w
    FROM (SELECT b.nr_seq_gas_cpoe nr_seq_gas_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao,a.dt_prescricao dt_prescricao
    from  prescr_gasoterapia b,
    prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_gasoterapia c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_gas_cpoe)
WHERE (ie_record_sub_type_p)::numeric  = 3 and c.nr_sequencia = nr_sequencia_p and coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '';
    /* CPOE - Interventions and recommendations */

    c04 CURSOR FOR
    SELECT cpoe_obter_desc_grid_recom( substr(cpoe_obter_desc_recomendacao(c.cd_recomendacao,c.dt_liberacao),1,255), substr(obter_desc_intervalo_prescr(c.cd_intervalo),1,255), dt_lib_suspensao, c.dt_suspensao, ie_administracao) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w
    FROM (SELECT b.nr_seq_rec_cpoe nr_seq_rec_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao
    from  prescr_recomendacao b, prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_recomendacao c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_rec_cpoe)
WHERE (ie_record_sub_type_p)::numeric  = 4 and c.nr_sequencia = nr_sequencia_p and coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '';
	 /*CPOE - Interventions and Recommendations - Nutritional guidance*/

	 c041 CURSOR FOR
    SELECT cpoe_obter_desc_grid_recom( substr(cpoe_obter_desc_recomendacao(c.cd_recomendacao,c.dt_liberacao),1,255), substr(obter_desc_intervalo_prescr(c.cd_intervalo),1,255), dt_lib_suspensao, c.dt_suspensao, ie_administracao) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w,
    u.nm_guidance guidance_w,
    u.qt_calories calories_w,
    u.qt_composition_fat fat_w,
    u.qt_composition_potassium potas_w,
    u.qt_composition_carb carb_w,
    u.qt_ps_ratio ps_ratio_w
    FROM (select n.qt_calories, n.qt_composition_fat, n.qt_composition_potassium, n.qt_composition_carb,
    n.qt_ps_ratio,np.nm_guidance, n.NR_SEQ_RECOMENDACAO
    from CPOE_NUT_GUIDANCE n,
    NUTRITIONAL_GUIDANCE_PAT np
    where n.nr_seq_nut_guidance = np.nr_sequencia)u, cpoe_recomendacao c
LEFT OUTER JOIN (SELECT b.nr_seq_rec_cpoe,  a.dt_suspensao                        
     from prescr_medica a,
     prescr_recomendacao b   
     where a.nr_prescricao   = b.nr_prescricao
     and a.nr_prescricao     =  (nr_prescricao_p)::numeric 
     and coalesce(a.dt_suspensao::text, '') = '') t ON (c.nr_sequencia = t.nr_seq_rec_cpoe)
LEFT OUTER JOIN u ON (c.nr_sequencia = u.NR_SEQ_RECOMENDACAO)
WHERE (ie_record_sub_type_p)::numeric  = 4 and c.nr_sequencia = nr_sequencia_p and coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '';
    /* CPOE - Blood and blood compoennets */

    c05 CURSOR FOR
    SELECT substr(cpoe_obter_ds_hemoterapia( c.nr_sequencia, c.dt_liberacao, 'S', c.dt_lib_suspensao, c.dt_suspensao, c.ie_tipo, c.qt_procedimento, c.ie_reserva),1,255) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    null ds_orientation_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w,
    (SELECT DS_DESCRICAO
    FROM CPOE_MOTIVO_DIF_TIPO_SAN
    where NR_SEQUENCIA = c.NR_SEQ_MOTIVO_DIF_TIPO_SAN) ds_trans_reason_w,
    Obter_Indicacao_clinica_hem(c.NR_SEQ_INDICACAO1) ds_indication_w,
	(select max(nr_order_unit) from  cpoe_order_unit x where x.nr_sequencia = c.nr_seq_cpoe_order_unit) nr_order_unit_w
    FROM (select b.nr_seq_hemo_cpoe nr_seq_hemo_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao,a.dt_prescricao dt_prescricao
    from  prescr_solic_bco_sangue b,
    prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_hemoterapia c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_hemo_cpoe)
WHERE (ie_record_sub_type_p)::numeric  = 5 and c.nr_sequencia = nr_sequencia_p and coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '';
    /* CPOE - Dialysis */

	c06 CURSOR FOR
    SELECT cpoe_obter_desc_dialise( c.ie_tipo_dialise, c.nr_seq_protocolo, dt_lib_suspensao, c.dt_suspensao, c.qt_fluxo_sangue, qt_hora_min_sessao,null,c.ie_hemodialise) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    PKG_DATE_FORMATERS.to_varchar(c.DT_FIM,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_end_w,
    c.ds_justificativa ds_justificatio_w,
    CASE WHEN c.ie_tipo_dialise ='DI' THEN obter_desc_expressao(929268) WHEN c.ie_tipo_dialise ='DP' THEN  obter_desc_expressao(314156) END  ds_type_w,
    c.ds_observacao ds_notes_w
    FROM (SELECT b.nr_seq_dialise_cpoe nr_seq_dialise_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao,a.dt_prescricao dt_prescricao
    from hd_prescricao b,prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dialise c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_dialise_cpoe)
WHERE (ie_record_sub_type_p)::numeric  = 6 and c.nr_sequencia = nr_sequencia_p and coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = ''

union

    select cpoe_obter_desc_dialise( c.ie_tipo_dialise, c.nr_seq_protocolo, dt_lib_suspensao, c.dt_suspensao, c.qt_fluxo_sangue, qt_hora_min_sessao,null,c.ie_hemodialise) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    PKG_DATE_FORMATERS.to_varchar(c.DT_FIM,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_end_w,
    c.ds_justificativa ds_justificatio_w,
    CASE WHEN c.ie_tipo_dialise ='DI' THEN obter_desc_expressao(929268) WHEN c.ie_tipo_dialise ='DP' THEN  obter_desc_expressao(314156) END  ds_type_w,
    c.ds_observacao ds_notes_w
    FROM (select b.nr_seq_dialise_cpoe nr_seq_dialise_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao,a.dt_prescricao dt_prescricao
    from PRESCR_SOLUCAO b,prescr_medica a
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_dialise c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_dialise_cpoe)
WHERE (ie_record_sub_type_p)::numeric  = 6 and c.nr_sequencia = nr_sequencia_p and coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '';
    /* CPOE - Nursing Interventions */

    c07 CURSOR FOR
    SELECT CPOE_OBTER_DESC_GRID_SAE(c.nr_seq_proc, c.cd_intervalo, c.dt_lib_suspensao, c.dt_suspensao, c.ie_administracao) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    c.ds_observacao ds_notes_w
    FROM (SELECT a.nr_seq_cpoe_interv nr_seq_cpoe_interv, b.nr_atendimento nr_atendimento ,b.nr_prescricao nr_prescricao
    from pe_prescr_proc a,pe_prescricao b
    where a.nr_seq_prescr = b.nr_sequencia
    and coalesce(a.dt_suspensao::text, '') = ''
    and ((coalesce((nr_prescricao_p)::numeric ,0) = 0)  or (b.nr_prescricao = (nr_prescricao_p)::numeric ))
    and b.nr_sequencia = nr_sequencia_p)t, cpoe_intervencao c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_cpoe_interv)
WHERE (ie_record_sub_type_p)::numeric  = 7 and c.nr_sequencia = nr_sequencia_p;
    /* CPOE - Materials */

    c08 CURSOR FOR
    SELECT cpoe_obter_desc_info_material( c.cd_material, c.cd_mat_comp1, c.qt_dose_comp1, c.cd_unid_med_dose_comp1, c.cd_mat_comp2, c.qt_dose_comp2, c.cd_unid_med_dose_comp2, c.cd_mat_comp3, c.qt_dose_comp3, c.cd_unid_med_dose_comp3, c.cd_mat_dil,
    c.qt_dose_dil, c.cd_unid_med_dose_dil, c.cd_mat_red, c.qt_dose_red, c.cd_unid_med_dose_red, c.dt_liberacao, c.qt_dose, c.cd_unidade_medida, c.ie_via_aplicacao, c.cd_intervalo, c.dt_lib_suspensao, c.dt_suspensao, c.ie_administracao, c.nr_seq_ataque, 
    c.nr_seq_procedimento, c.nr_seq_adicional, c.nr_seq_hemoterapia, c.ds_dose_diferenciada, c.ds_dose_diferenciada_dil, c.ds_dose_diferenciada_red, c.ds_dose_diferenciada_comp1, c.ds_dose_diferenciada_comp2, c.ds_dose_diferenciada_comp3, c.cd_mat_comp4, 
    c.qt_dose_comp4, c.cd_unid_med_dose_comp4, c.ds_dose_diferenciada_comp4, c.cd_mat_comp5, c.qt_dose_comp5, c.cd_unid_med_dose_comp5, c.ds_dose_diferenciada_comp5, c.cd_mat_comp6, c.qt_dose_comp6, c.cd_unid_med_dose_comp6,c.ds_dose_diferenciada_comp6) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_horarios ds_hours_w,
    c.ds_justificativa ds_justificatio_w,
    c.ds_observacao ds_notes_w
    FROM (SELECT b.nr_seq_mat_cpoe nr_seq_mat_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao,a.dt_prescricao dt_prescricao
    from prescr_medica a,prescr_material b
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao  = (nr_prescricao_p)::numeric )t, cpoe_material c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_mat_cpoe)
WHERE ie_material         = 'S' and coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 8 and c.nr_sequencia = nr_sequencia_p;
    /* CPOE - Anatomy pathology Exams */

    c09 CURSOR FOR
    SELECT cpoe_obter_desc_grid_proc( substr(cpoe_obter_desc_proc_interno(c.nr_seq_proc_interno),1,255), null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, c.dt_lib_suspensao, c.dt_suspensao, c.ie_administracao) ds_item,
    obter_pf_usuario(coalesce(c.nm_usuario, c.nm_usuario_nrec),'N') ds_orderer_w,
    to_char((coalesce(c.dt_atualizacao_nrec,c.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
    PKG_DATE_FORMATERS.to_varchar(c.dt_inicio,'timestamp',wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) dt_start_w,
    c.ds_observacao ds_notes_w
    FROM (SELECT b.nr_seq_proc_cpoe nr_seq_proc_cpoe, a.dt_suspensao dt_suspensao ,a.nr_prescricao nr_prescricao,a.dt_prescricao dt_prescricao
    from prescr_medica a,prescr_procedimento b
    where a.nr_prescricao = b.nr_prescricao
    and coalesce(a.dt_suspensao::text, '') = ''
    and a.nr_prescricao = (nr_prescricao_p)::numeric )t, cpoe_anatomia_patologica c
LEFT OUTER JOIN t ON (c.nr_sequencia = t.nr_seq_proc_cpoe)
WHERE coalesce(c.dt_lib_suspensao::text, '') = '' and coalesce(c.dt_suspensao::text, '') = '' and (ie_record_sub_type_p)::numeric  = 9 and c.nr_sequencia = nr_sequencia_p;
	/*CPOE - Nutrition - Suspension*/

	c0013 CURSOR FOR
	SELECT distinct cpoe_obter_ds_dieta(a.ie_tipo_dieta, a.cd_dieta, a.cd_material, a.cd_mat_prod1, a.nr_seq_tipo, a.dt_liberacao,'S', a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao, a.cd_intervalo, a.cd_unid_med_prod1, a.ie_via_leite1, a.qt_dose_prod1, a.cd_mat_prod2, a.cd_unid_med_prod2,
	a.qt_dose_prod2, a.cd_mat_prod3, a.cd_unid_med_prod3, a.qt_dose_prod3, a.cd_mat_prod4, a.cd_unid_med_prod4, a.qt_dose_prod4, a.cd_mat_prod5, a.cd_unid_med_prod5, a.qt_dose_prod5, a.ie_forma, a.qt_dose, a.cd_unidade_medida_dose) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_dieta a,
      prescr_dieta b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_dieta_cpoe
	
union

	SELECT distinct cpoe_obter_ds_dieta(a.ie_tipo_dieta, a.cd_dieta, a.cd_material, a.cd_mat_prod1, a.nr_seq_tipo, a.dt_liberacao,'S', a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao, a.cd_intervalo, a.cd_unid_med_prod1, a.ie_via_leite1, a.qt_dose_prod1, a.cd_mat_prod2, a.cd_unid_med_prod2, 
	a.qt_dose_prod2, a.cd_mat_prod3, a.cd_unid_med_prod3, a.qt_dose_prod3, a.cd_mat_prod4, a.cd_unid_med_prod4, a.qt_dose_prod4, a.cd_mat_prod5, a.cd_unid_med_prod5, a.qt_dose_prod5, a.ie_forma, a.qt_dose, a.cd_unidade_medida_dose) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_dieta a,
      prescr_material b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_dieta_cpoe;
	/*CPOE - Infusions and Medicines - Suspension*/

	c0113 CURSOR FOR
	SELECT distinct cpoe_obter_desc_info_material( a.cd_material, a.cd_mat_comp1, a.qt_dose_comp1, a.cd_unid_med_dose_comp1, a.cd_mat_comp2, a.qt_dose_comp2, a.cd_unid_med_dose_comp2, a.cd_mat_comp3, a.qt_dose_comp3, a.cd_unid_med_dose_comp3, a.cd_mat_dil, a.qt_dose_dil, a.cd_unid_med_dose_dil,
	a.cd_mat_red, a.qt_dose_red, a.cd_unid_med_dose_red, a.dt_liberacao, a.qt_dose, a.cd_unidade_medida, a.ie_via_aplicacao, a.cd_intervalo, a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao, a.nr_seq_ataque, a.nr_seq_procedimento, a.nr_seq_adicional, a.nr_seq_hemoterapia, a.ds_dose_diferenciada, 
	a.ds_dose_diferenciada_dil, a.ds_dose_diferenciada_red, a.ds_dose_diferenciada_comp1, a.ds_dose_diferenciada_comp2, a.ds_dose_diferenciada_comp3, a.cd_mat_comp4, a.qt_dose_comp4, a.cd_unid_med_dose_comp4, a.ds_dose_diferenciada_comp4, a.cd_mat_comp5, a.qt_dose_comp5, a.cd_unid_med_dose_comp5,
	a.ds_dose_diferenciada_comp5, a.cd_mat_comp6, a.qt_dose_comp6, a.cd_unid_med_dose_comp6,a.ds_dose_diferenciada_comp6) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_material a,
      prescr_material b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_mat_cpoe;
	/*CPOE - Exams and Procedures - Suspension*/

	c0213 CURSOR FOR
	SELECT distinct cpoe_obter_desc_grid_proc( substr(cpoe_obter_desc_proc_interno(a.nr_seq_proc_interno),1,255), a.cd_intervalo, a.qt_procedimento, a.cd_mat_proc1, a.qt_dose_mat1, a.cd_unid_medida_dose_mat1, a.ie_assoc_adep1, a.cd_mat_proc2, a.qt_dose_mat2, a.cd_unid_medida_dose_mat2, a.ie_assoc_adep2,
	a.cd_mat_proc3, a.qt_dose_mat3, a.cd_unid_medida_dose_mat3, a.ie_assoc_adep3, a.cd_mat_proc4, a.qt_dose_mat4, a.cd_unid_medida_dose_mat4, a.ie_assoc_adep4, a.cd_mat_proc5, a.qt_dose_mat5, a.cd_unid_medida_dose_mat5, a.ie_assoc_adep5, a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao, null, null, 
	a.cd_mat_proc6, a.qt_dose_mat6, a.cd_unid_medida_dose_mat6, a.ie_assoc_adep6, a.cd_mat_proc7, a.qt_dose_mat7, a.cd_unid_medida_dose_mat7, a.ie_assoc_adep7) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_procedimento a,
      prescr_procedimento b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_proc_cpoe;
	/*CPOE - Gastherapy - Suspension*/

	c0313 CURSOR FOR
	SELECT distinct cpoe_obter_desc_grid_gas( substr(cpoe_obter_desc_gas(a.nr_seq_gas,a.dt_liberacao),1,254), a.qt_gasoterapia, cpoe_obter_desc_unid_med_gas(a.ie_unidade_medida), substr(obter_valor_dominio(1299, a.ie_respiracao),1,200), substr(obter_desc_intervalo_prescr(a.cd_intervalo),1,255), dt_lib_suspensao, a.dt_suspensao, ie_administracao) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_gasoterapia a,
      prescr_gasoterapia b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_gas_cpoe;
	/*CPOE - Interventions and recommendations - Suspension*/

	c0413 CURSOR FOR
	SELECT distinct cpoe_obter_desc_grid_recom( substr(cpoe_obter_desc_recomendacao(a.cd_recomendacao,a.dt_liberacao),1,255), substr(obter_desc_intervalo_prescr(a.cd_intervalo),1,255), dt_lib_suspensao, a.dt_suspensao, ie_administracao) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_recomendacao a,
      prescr_recomendacao b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_rec_cpoe;
	/*CPOE - Blood and blood products - Suspension*/

	c0513 CURSOR FOR
	SELECT distinct substr(cpoe_obter_ds_hemoterapia( a.nr_sequencia, a.dt_liberacao, 'S', a.dt_lib_suspensao, a.dt_suspensao, a.ie_tipo, a.qt_procedimento, a.ie_reserva),1,255) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_hemoterapia a,
      prescr_solic_bco_sangue b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_hemo_cpoe;
	/*CPOE - Dialysis - Suspension*/

	c0613 CURSOR FOR
	SELECT distinct cpoe_obter_desc_dialise( a.ie_tipo_dialise, a.nr_seq_protocolo, a.dt_lib_suspensao, a.dt_suspensao, a.qt_fluxo_sangue, a.qt_hora_min_sessao,null,a.ie_hemodialise) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_dialise a,
      hd_prescricao b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_dialise_cpoe;
	/*CPOE - Materials - Suspension*/

	c0813 CURSOR FOR
	SELECT distinct cpoe_obter_desc_info_material( a.cd_material, a.cd_mat_comp1, a.qt_dose_comp1, a.cd_unid_med_dose_comp1, a.cd_mat_comp2, a.qt_dose_comp2, a.cd_unid_med_dose_comp2, a.cd_mat_comp3, a.qt_dose_comp3, a.cd_unid_med_dose_comp3,
	a.cd_mat_dil, a.qt_dose_dil, a.cd_unid_med_dose_dil, a.cd_mat_red, a.qt_dose_red, a.cd_unid_med_dose_red, a.dt_liberacao, a.qt_dose, a.cd_unidade_medida, a.ie_via_aplicacao, a.cd_intervalo, a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao,
	a.nr_seq_ataque, a.nr_seq_procedimento, a.nr_seq_adicional, a.nr_seq_hemoterapia, a.ds_dose_diferenciada, a.ds_dose_diferenciada_dil, a.ds_dose_diferenciada_red, a.ds_dose_diferenciada_comp1, a.ds_dose_diferenciada_comp2, a.ds_dose_diferenciada_comp3, 
	a.cd_mat_comp4, a.qt_dose_comp4, a.cd_unid_med_dose_comp4, a.ds_dose_diferenciada_comp4, a.cd_mat_comp5, a.qt_dose_comp5, a.cd_unid_med_dose_comp5, a.ds_dose_diferenciada_comp5, a.cd_mat_comp6, a.qt_dose_comp6, a.cd_unid_med_dose_comp6,a.ds_dose_diferenciada_comp6) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_material a,
      prescr_material b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_mat_cpoe;
	/*CPOE - Anatomy pathology exams - Suspension*/

	c0913 CURSOR FOR
	SELECT distinct cpoe_obter_desc_grid_proc( substr(cpoe_obter_desc_proc_interno(a.nr_seq_proc_interno),1,255), null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, a.dt_lib_suspensao, a.dt_suspensao, a.ie_administracao) ds_item,
		obter_pf_usuario(coalesce(a.nm_usuario, a.nm_usuario_nrec),'N') ds_orderer_w,
		to_char((coalesce(a.dt_atualizacao_nrec,a.dt_inicio)), 'dd/mm/yyyy hh24:mi') ds_order_w,
		a.dt_suspensao dt_susp,
		a.dt_lib_suspensao dt_lib_susp,
		a.nm_usuario_susp nm_usr_susp,
		a.ds_observacao ds_obs_susp
	from cpoe_anatomia_patologica a,
		prescr_procedimento b
	where a.nr_sequencia	= nr_sequencia_p
		and b.nr_prescricao = nr_prescricao_p
		and a.nr_sequencia = b.nr_seq_proc_cpoe;
    ds_content_w varchar(32000);
	guidance_exists_w varchar(5);
	is_rehab_proc_w varchar(1) := 'N';

BEGIN
    if ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 4 and ie_action_p = 1) then
	  select count(1)
	  into STRICT guidance_exists_w
	  from prescr_medica a,
		prescr_recomendacao b,
		CPOE_NUT_GUIDANCE n,
		cpoe_recomendacao c
	  where a.nr_prescricao = b.nr_prescricao
		and b.nr_seq_rec_cpoe   = c.nr_sequencia
		and a.nr_prescricao     = nr_prescricao_p
      and n.NR_SEQ_RECOMENDACAO = c.nr_sequencia;
	end if;
    if ( ie_record_type_p ='CPOE_ITEMS' and (ie_record_sub_type_p)::numeric  = 0 and ie_action_p = 1) then
	for r_c00 in c00 loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c00.ds_item IS NOT NULL AND r_c00.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c00.ds_orderer_w IS NOT NULL AND r_c00.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c00.ds_order_w IS NOT NULL AND r_c00.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c00.dt_start_w IS NOT NULL AND r_c00.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c00.ds_hours_w IS NOT NULL AND r_c00.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORIENTATION' and (r_c00.ds_orientation_w IS NOT NULL AND r_c00.ds_orientation_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_orientation_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_orientation_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c00.ds_justificatio_w IS NOT NULL AND r_c00.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c00.ds_notes_w IS NOT NULL AND r_c00.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_notes_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_LOCATION' and (r_c00.ds_location_w IS NOT NULL AND r_c00.ds_location_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_location_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_location_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_STAPLE_FOOD' and (r_c00.ds_staple_food_w IS NOT NULL AND r_c00.ds_staple_food_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_staple_food_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_staple_food_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_BEVERAGE' and (r_c00.ds_beverage_w IS NOT NULL AND r_c00.ds_beverage_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_beverage_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c00.ds_beverage_w;
                end if;
              end;
			end if;

        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 1 and ie_action_p = 1) then
    for r_c01 in c01
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c01.ds_item IS NOT NULL AND r_c01.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c01.ds_orderer_w IS NOT NULL AND r_c01.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c01.ds_order_w IS NOT NULL AND r_c01.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c01.dt_start_w IS NOT NULL AND r_c01.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c01.ds_hours_w IS NOT NULL AND r_c01.ds_hours_w::text <> '') and r_c01.is_no_time_interval_w = 'N') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORIENTATION' and (r_c01.ds_orientation_w IS NOT NULL AND r_c01.ds_orientation_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_orientation_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_orientation_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c01.ds_justificatio_w IS NOT NULL AND r_c01.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c01.ds_notes_w IS NOT NULL AND r_c01.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_notes_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'YJ_CODE' and (r_c01.yj_code_w IS NOT NULL AND r_c01.yj_code_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.yj_code_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.yj_code_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'BY_PATIENT' and (r_c01.by_patient_w IS NOT NULL AND r_c01.by_patient_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.by_patient_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.by_patient_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DIAGNOSIS_USD' and (r_c01.diagnosis_usd_w IS NOT NULL AND r_c01.diagnosis_usd_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.diagnosis_usd_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.diagnosis_usd_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_PRESC_LOC' and (r_c01.prescr_loc_w IS NOT NULL AND r_c01.prescr_loc_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.prescr_loc_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.prescr_loc_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_REASON' and (r_c01.ds_reason_w IS NOT NULL AND r_c01.ds_reason_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_reason_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_reason_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NR_ORD_SLIP' and (r_c01.nr_order_unit_w IS NOT NULL AND r_c01.nr_order_unit_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.nr_order_unit_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.nr_order_unit_w;
                end if;
              end;
			  end if;
                if (r_clinical_note_fields.ie_field = 'DS_PRESCR_TYPE' and (r_c01.si_type_of_prescription_w IS NOT NULL AND r_c01.si_type_of_prescription_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.si_type_of_prescription_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.si_type_of_prescription_w;
                end if;
              end;
			  end if;
                if (r_clinical_note_fields.ie_field = 'RP_NUMBER' and (r_c01.ds_rp_w IS NOT NULL AND r_c01.ds_rp_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_rp_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_rp_w;
                end if;
              end;
			  end if;
                if (r_clinical_note_fields.ie_field = 'DAYS_USE' and (r_c01.qt_dias_padrao_w IS NOT NULL AND r_c01.qt_dias_padrao_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.qt_dias_padrao_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.qt_dias_padrao_w;
                end if;
              end;
			  end if;
                if (r_clinical_note_fields.ie_field = 'DS_ADMN_DAYS' and (r_c01.adm_days_w IS NOT NULL AND r_c01.adm_days_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.adm_days_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.adm_days_w;
                end if;
              end;
			  end if;
                if (r_clinical_note_fields.ie_field = 'ORD_UNIT_CMNTS' and (r_c01.ord_unit_cmnts_w IS NOT NULL AND r_c01.ord_unit_cmnts_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ord_unit_cmnts_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ord_unit_cmnts_w;
                end if;
              end;
			  end if;
                if (r_clinical_note_fields.ie_field = 'RP_COMMENTS' and (r_c01.rp_cmnts_w IS NOT NULL AND r_c01.rp_cmnts_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_cmnts_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_cmnts_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'QT_DOSE_TOTAL' and (r_c01.ds_dose_total_w IS NOT NULL AND r_c01.ds_dose_total_w::text <> '') and (r_c01.ie_formato_admin_w='TD')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_dose_total_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_dose_total_w;
                end if;
              end;
			  end if;
                if (r_clinical_note_fields.ie_field = 'QT_DOSE_DAILY' and (r_c01.ds_dose_daily_w IS NOT NULL AND r_c01.ds_dose_daily_w::text <> '') and (r_c01.ie_formato_admin_w ='DD')) then
                begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_dose_daily_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_dose_daily_w;
                end if;
                end;
                end if;
                if (r_clinical_note_fields.ie_field = 'QT_DOSE_SINGLE' and (r_c01.qt_dose_single_w IS NOT NULL AND r_c01.qt_dose_single_w::text <> '') and (r_c01.ie_formato_admin_w='SD' or r_c01.ie_formato_admin_w ='DD')) then
                begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.qt_dose_single_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.qt_dose_single_w;
                end if;
                end;
                end if;
                if (r_clinical_note_fields.ie_field = 'DS_INTERVAL' and (r_c01.ds_interval_w IS NOT NULL AND r_c01.ds_interval_w::text <> '')) then
                begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_interval_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.ds_interval_w;
                end if;
                end;
                end if;
				if (r_clinical_note_fields.ie_field = 'DS_SOL_TYPE' and (r_c01.rp_type_sol_w IS NOT NULL AND r_c01.rp_type_sol_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_type_sol_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_type_sol_w;
                end if;
              end;
			  end if;
			     if (r_clinical_note_fields.ie_field = 'QT_BAG_VOL' and (r_c01.rp_bag_vol_w IS NOT NULL AND r_c01.rp_bag_vol_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_bag_vol_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_bag_vol_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_TOTAL_TIME' and (r_c01.rp_total_time_w IS NOT NULL AND r_c01.rp_total_time_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_total_time_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_total_time_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'DS_INF_DEVICE' and (r_c01.rp_inf_device_w IS NOT NULL AND r_c01.rp_inf_device_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_inf_device_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_inf_device_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_VOL_INF_SET' and (r_c01.rp_infu_set_vol_w IS NOT NULL AND r_c01.rp_infu_set_vol_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_infu_set_vol_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_infu_set_vol_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'IE_CORCTN_FACTR' and (r_c01.rp_corr_fac_w IS NOT NULL AND r_c01.rp_corr_fac_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_corr_fac_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_corr_fac_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'IE_REF_CALC' and (r_c01.rp_ref_cal_w IS NOT NULL AND r_c01.rp_ref_cal_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_ref_cal_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_ref_cal_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'QT_STAGE' and (r_c01.rp_stages_w IS NOT NULL AND r_c01.rp_stages_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_stages_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_stages_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'QT_VOL_TOTAL' and (r_c01.rp_tot_vol_w IS NOT NULL AND r_c01.rp_tot_vol_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_tot_vol_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_tot_vol_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'QT_INF_RATE' and (r_c01.rp_in_rate_w IS NOT NULL AND r_c01.rp_in_rate_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_in_rate_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_in_rate_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_PHASE_DUR' and (r_c01.rp_stage_w IS NOT NULL AND r_c01.rp_stage_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_stage_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_stage_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'IE_INF_RAPID' and (r_c01.rp_rapid_inf_w IS NOT NULL AND r_c01.rp_rapid_inf_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_rapid_inf_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_rapid_inf_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_INF_MAX' and (r_c01.rp_max_irate_w IS NOT NULL AND r_c01.rp_max_irate_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_max_irate_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_max_irate_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_INF_MIN' and (r_c01.rp_min_irate_w IS NOT NULL AND r_c01.rp_min_irate_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_min_irate_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_min_irate_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_TERAP_DOSE' and (r_c01.rp_ther_dose_w IS NOT NULL AND r_c01.rp_ther_dose_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_ther_dose_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_ther_dose_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'IE_INCREMENTS' and (r_c01.rp_incremt_w IS NOT NULL AND r_c01.rp_incremt_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_incremt_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_incremt_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_DOSE_INCR' and (r_c01.rp_inc_dose_w IS NOT NULL AND r_c01.rp_inc_dose_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_inc_dose_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_inc_dose_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'IE_ANALGES_TYPE' and (r_c01.rp_analgesia_w IS NOT NULL AND r_c01.rp_analgesia_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_analgesia_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_analgesia_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_FLOW' and (r_c01.rp_flow_dose_w IS NOT NULL AND r_c01.rp_flow_dose_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_flow_dose_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_flow_dose_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'IE_PCA_MODE' and (r_c01.rp_mode_w IS NOT NULL AND r_c01.rp_mode_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_mode_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_mode_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_BOLUS' and (r_c01.rp_bolus_dose_w IS NOT NULL AND r_c01.rp_bolus_dose_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_bolus_dose_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_bolus_dose_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_INT_LOCKOUT' and (r_c01.rp_lockout_w IS NOT NULL AND r_c01.rp_lockout_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_lockout_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_lockout_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_VIA_ROUTE' and (r_c01.rp_via_route_w IS NOT NULL AND r_c01.rp_via_route_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_via_route_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_via_route_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DS_DRIP_SHOT' and (r_c01.rp_drip_shot_w IS NOT NULL AND r_c01.rp_drip_shot_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_drip_shot_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_drip_shot_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DS_HORARIOS_RP' and (r_c01.rp_times_w IS NOT NULL AND r_c01.rp_times_w::text <> '') ) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_times_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_times_w;
                end if;
              end;
			  end if;
			   if (r_clinical_note_fields.ie_field = 'QT_DOSE_PCA' and (r_c01.rp_ini_dose_w IS NOT NULL AND r_c01.rp_ini_dose_w::text <> '') and r_c01.ie_controle_tempo_w ='S') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_ini_dose_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c01.rp_ini_dose_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 2 and ie_action_p = 1) then
      for r_c02 in c02
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c02.ds_item IS NOT NULL AND r_c02.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c02.ds_orderer_w IS NOT NULL AND r_c02.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c02.ds_order_w IS NOT NULL AND r_c02.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c02.dt_start_w IS NOT NULL AND r_c02.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c02.ds_hours_w IS NOT NULL AND r_c02.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_PURPOSE' and (r_c02.ds_purpose_w IS NOT NULL AND r_c02.ds_purpose_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_purpose_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_purpose_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c02.ds_justificatio_w IS NOT NULL AND r_c02.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c02.ds_notes_w IS NOT NULL AND r_c02.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_notes_w;
                end if;
              end;
			  end if;
			if (r_clinical_note_fields.ie_field = 'TXT_COMMENT_STD' and (r_c02.ds_std_cmnts_w IS NOT NULL AND r_c02.ds_std_cmnts_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_std_cmnts_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_std_cmnts_w;
                end if;
              end;
			end if;
			if (r_clinical_note_fields.ie_field = 'RP_CMNTS' and (r_c02.rp_comments_w IS NOT NULL AND r_c02.rp_comments_w::text <> '')) then
				begin
				if ( coalesce(ds_content_w::text, '') = '' ) then
					ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
					ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.rp_comments_w;
				else
					ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.rp_comments_w;
				end if;
				end;
			end if;
			if (r_clinical_note_fields.ie_field = 'DS_PRESCR_INTSR' and (r_c02.ds_priscription_instruction_w IS NOT NULL AND r_c02.ds_priscription_instruction_w::text <> '')) then
				begin
				if ( coalesce(ds_content_w::text, '') = '' ) then
					ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
					ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_priscription_instruction_w;
				else
					ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_priscription_instruction_w;
				end if;
				end;
			end if;
			if (r_clinical_note_fields.ie_field = 'IE_SURG_POS' and (r_c02.ds_initial_pos_w IS NOT NULL AND r_c02.ds_initial_pos_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_initial_pos_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_initial_pos_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DT_START_DESRD' and (r_c02.dt_desired_start_w IS NOT NULL AND r_c02.dt_desired_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.dt_desired_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.dt_desired_start_w;
                end if;
              end;
			  end if;
            if (r_clinical_note_fields.ie_field = 'IE_TOPOGRAPHY' and (r_c02.ds_topography_w IS NOT NULL AND r_c02.ds_topography_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_topography_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_topography_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'IE_SIDE' and (r_c02.ds_side_w IS NOT NULL AND r_c02.ds_side_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_side_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.ds_side_w;
                end if;
              end;
			  end if;
            if (r_clinical_note_fields.ie_field = 'QT_DURATION' and (r_c02.qt_duration_w IS NOT NULL AND r_c02.qt_duration_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.qt_duration_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c02.qt_duration_w;
                end if;
              end;
			  end if;
        end;
      end loop;
		is_rehab_proc_w := r_c02.is_rehab_proc_w;
	  end loop;
	if (is_rehab_proc_w = 'S') then
      for r_crehab in crehab loop
      for r_clinical_note_fields in clinical_note_fields loop
        begin
			  if (r_clinical_note_fields.ie_field = 'DS_ORIGIN' and (r_crehab.ds_origin_w IS NOT NULL AND r_crehab.ds_origin_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_origin_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_origin_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_DISABILITY' and (r_crehab.ds_disability_w IS NOT NULL AND r_crehab.ds_disability_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_disability_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_disability_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'MAIN_TRTMNT' and (r_crehab.main_trtmnt_w IS NOT NULL AND r_crehab.main_trtmnt_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.main_trtmnt_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.main_trtmnt_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_STATUS' and (r_crehab.ds_status_w IS NOT NULL AND r_crehab.ds_status_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_status_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_status_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_crehab.ds_notes_w IS NOT NULL AND r_crehab.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_notes_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'CD_TRTMNT_TYPE' and (r_crehab.ds_trtmnt_type_w IS NOT NULL AND r_crehab.ds_trtmnt_type_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_trtmnt_type_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_trtmnt_type_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NR_CALC_CLASSIF' and (r_crehab.ds_calc_classif_w IS NOT NULL AND r_crehab.ds_calc_classif_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_calc_classif_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_calc_classif_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DT_STRT_TRTMNT' and (r_crehab.dt_strt_trtmnt_w IS NOT NULL AND r_crehab.dt_strt_trtmnt_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_strt_trtmnt_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_strt_trtmnt_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DT_END_TRTMNT' and (r_crehab.dt_end_trtmnt_w IS NOT NULL AND r_crehab.dt_end_trtmnt_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_end_trtmnt_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_end_trtmnt_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DT_EST_DSCHRG' and (r_crehab.dt_est_dschrg_w IS NOT NULL AND r_crehab.dt_est_dschrg_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_est_dschrg_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_est_dschrg_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'IE_DATE_CALC' and (r_crehab.ds_date_calc_w IS NOT NULL AND r_crehab.ds_date_calc_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_date_calc_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_date_calc_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DS_DIAGNOSIS' and (r_crehab.ds_diagnosis_w IS NOT NULL AND r_crehab.ds_diagnosis_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_diagnosis_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_diagnosis_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DS_COMPLICATION' and (r_crehab.ds_complication_w IS NOT NULL AND r_crehab.ds_complication_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_complication_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_complication_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DS_STATUS_TRTMN' and (r_crehab.ds_status_trtmn_w IS NOT NULL AND r_crehab.ds_status_trtmn_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_status_trtmn_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_status_trtmn_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'IE_DIAG_CLASSIF' and (r_crehab.ds_diag_classif_w IS NOT NULL AND r_crehab.ds_diag_classif_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_diag_classif_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.ds_diag_classif_w;
                end if;
              end;
			  end if;
              if (r_clinical_note_fields.ie_field = 'DT_RESERVATION' and (r_crehab.dt_agenda_w IS NOT NULL AND r_crehab.dt_agenda_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_agenda_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_agenda_w;
                end if;
              end;
			  end if;
			if (r_clinical_note_fields.ie_field = 'DT_EFF_START_DT' and (r_crehab.dt_early_addition_start_w IS NOT NULL AND r_crehab.dt_early_addition_start_w::text <> '')) then
                begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                end if;
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_early_addition_start_w;
                end;
            end if;
              if (r_clinical_note_fields.ie_field = 'CD_PHYSICIAN' and (r_crehab.cd_solicitante_medico_w IS NOT NULL AND r_crehab.cd_solicitante_medico_w::text <> '')) then
                begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.cd_solicitante_medico_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.cd_solicitante_medico_w;
                end if;
                end;
            end if;
            if (r_clinical_note_fields.ie_field = 'DS_ORDER_UNIT' and (r_crehab.nr_seq_cpoe_order_unit_w IS NOT NULL AND r_crehab.nr_seq_cpoe_order_unit_w::text <> '')) then
                begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.nr_seq_cpoe_order_unit_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.nr_seq_cpoe_order_unit_w;
                end if;
                end;
            end if;
            if (r_clinical_note_fields.ie_field = 'DT_DIAGNOSTICO' and (r_crehab.dt_diagnostico_w IS NOT NULL AND r_crehab.dt_diagnostico_w::text <> '')) then
                begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_diagnostico_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_crehab.dt_diagnostico_w;
                end if;
                end;
            end if;
        end;
      end loop;
	  end loop;
      for rev_rehab in rehabrev loop
        for r_clinical_note_fields in clinical_note_fields loop
            if (r_clinical_note_fields.ie_field = 'DS_AGENDA' and (rev_rehab.ds_agenda_w IS NOT NULL AND rev_rehab.ds_agenda_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.ds_agenda_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.ds_agenda_w;
                end if;
              end;
            end if;
			if (r_clinical_note_fields.ie_field = 'DT_STARTDATE' and (rev_rehab.dt_start_date_w IS NOT NULL AND rev_rehab.dt_start_date_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.dt_start_date_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.dt_start_date_w;
                end if;
              end;
            end if;
			if (r_clinical_note_fields.ie_field = 'DT_ENDDATE' and (rev_rehab.dt_end_date_w IS NOT NULL AND rev_rehab.dt_end_date_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.dt_end_date_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.dt_end_date_w;
                end if;
              end;
            end if;
			if (r_clinical_note_fields.ie_field = 'IE_TREATMENT_TY' and (rev_rehab.IE_TREATMENT_TYPE_W IS NOT NULL AND rev_rehab.IE_TREATMENT_TYPE_W::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.IE_TREATMENT_TYPE_W;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.IE_TREATMENT_TYPE_W;
                end if;
              end;
            end if;
			if (r_clinical_note_fields.ie_field = 'DS_TREATMENT_TY' and (rev_rehab.DS_TREATMENT_TYPE_W IS NOT NULL AND rev_rehab.DS_TREATMENT_TYPE_W::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.DS_TREATMENT_TYPE_W;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rev_rehab.DS_TREATMENT_TYPE_W;
                end if;
              end;
            end if;
			if (r_clinical_note_fields.ie_field = 'DT_RESVN_DTLIST' and (rev_rehab.nr_sequencia_w IS NOT NULL AND rev_rehab.nr_sequencia_w::text <> '')) then
              begin
                 for rdet in rehabdet(rev_rehab.nr_sequencia_w) loop
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '</b>';
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rdet.resvdata_w;
                else
				  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| rdet.resvdata_w;
                end if;
                end loop;
              end;
            end if;
        end loop;
    end loop;
	end if;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 3 and ie_action_p = 1) then
      for r_c03 in c03
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c03.ds_item IS NOT NULL AND r_c03.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c03.ds_orderer_w IS NOT NULL AND r_c03.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c03.ds_order_w IS NOT NULL AND r_c03.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c03.dt_start_w IS NOT NULL AND r_c03.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c03.ds_hours_w IS NOT NULL AND r_c03.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c03.ds_justificatio_w IS NOT NULL AND r_c03.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c03.ds_notes_w IS NOT NULL AND r_c03.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c03.ds_notes_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 4 and guidance_exists_w > 0 and ie_action_p = 1) then
    for r_c041 in c041
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c041.ds_item IS NOT NULL AND r_c041.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c041.ds_orderer_w IS NOT NULL AND r_c041.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c041.ds_order_w IS NOT NULL AND r_c041.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c041.dt_start_w IS NOT NULL AND r_c041.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c041.ds_hours_w IS NOT NULL AND r_c041.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c041.ds_justificatio_w IS NOT NULL AND r_c041.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c041.ds_notes_w IS NOT NULL AND r_c041.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ds_notes_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NUT_GUIDANCE' and (r_c041.guidance_w IS NOT NULL AND r_c041.guidance_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.guidance_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.guidance_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_CALORIES' and (r_c041.calories_w IS NOT NULL AND r_c041.calories_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.calories_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.calories_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_FAT' and (r_c041.fat_w IS NOT NULL AND r_c041.fat_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.fat_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.fat_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_POTASSIUM' and (r_c041.potas_w IS NOT NULL AND r_c041.potas_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.potas_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.potas_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_CARB' and (r_c041.carb_w IS NOT NULL AND r_c041.carb_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.carb_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.carb_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_PS_RATIO' and (r_c041.ps_ratio_w IS NOT NULL AND r_c041.ps_ratio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ps_ratio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c041.ps_ratio_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
	elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 4 and guidance_exists_w = 0 and ie_action_p = 1) then
    for r_c04 in c04
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c04.ds_item IS NOT NULL AND r_c04.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c04.ds_orderer_w IS NOT NULL AND r_c04.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c04.ds_order_w IS NOT NULL AND r_c04.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c04.dt_start_w IS NOT NULL AND r_c04.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c04.ds_hours_w IS NOT NULL AND r_c04.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c04.ds_justificatio_w IS NOT NULL AND r_c04.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c04.ds_notes_w IS NOT NULL AND r_c04.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c04.ds_notes_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 5 and ie_action_p = 1) then
     for r_c05 in c05
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c05.ds_item IS NOT NULL AND r_c05.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c05.ds_orderer_w IS NOT NULL AND r_c05.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c05.ds_order_w IS NOT NULL AND r_c05.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c05.dt_start_w IS NOT NULL AND r_c05.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c05.ds_hours_w IS NOT NULL AND r_c05.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORIENTATION' and (r_c05.ds_orientation_w IS NOT NULL AND r_c05.ds_orientation_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_orientation_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_orientation_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c05.ds_justificatio_w IS NOT NULL AND r_c05.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c05.ds_notes_w IS NOT NULL AND r_c05.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_notes_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_TRANS_REASON' and (r_c05.ds_trans_reason_w IS NOT NULL AND r_c05.ds_trans_reason_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_trans_reason_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_trans_reason_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_INDICATION' and (r_c05.ds_indication_w IS NOT NULL AND r_c05.ds_indication_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_indication_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.ds_indication_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'ORDER_UNIT' and (r_c05.nr_order_unit_w IS NOT NULL AND r_c05.nr_order_unit_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(291262) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.nr_order_unit_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c05.nr_order_unit_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 6 and ie_action_p = 1) then
      for r_c06 in c06
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c06.ds_item IS NOT NULL AND r_c06.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c06.ds_orderer_w IS NOT NULL AND r_c06.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c06.ds_order_w IS NOT NULL AND r_c06.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c06.dt_start_w IS NOT NULL AND r_c06.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_END' and (r_c06.dt_end_w IS NOT NULL AND r_c06.dt_end_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.dt_end_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.dt_end_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_TYPE' and (r_c06.ds_type_w IS NOT NULL AND r_c06.ds_type_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_type_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_type_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c06.ds_justificatio_w IS NOT NULL AND r_c06.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c06.ds_notes_w IS NOT NULL AND r_c06.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c06.ds_notes_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 7 and ie_action_p = 1) then
    for r_c07 in c07
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c07.ds_item IS NOT NULL AND r_c07.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(491031) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c07.ds_orderer_w IS NOT NULL AND r_c07.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(491031) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c07.ds_order_w IS NOT NULL AND r_c07.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(491031) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c07.dt_start_w IS NOT NULL AND r_c07.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(491031) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c07.ds_hours_w IS NOT NULL AND r_c07.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(491031) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c07.ds_notes_w IS NOT NULL AND r_c07.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(491031) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c07.ds_notes_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 8 and ie_action_p = 1) then
      for r_c08 in c08
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c08.ds_item IS NOT NULL AND r_c08.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c08.ds_orderer_w IS NOT NULL AND r_c08.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c08.ds_order_w IS NOT NULL AND r_c08.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c08.dt_start_w IS NOT NULL AND r_c08.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_HOURS' and (r_c08.ds_hours_w IS NOT NULL AND r_c08.ds_hours_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_hours_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_hours_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_JUSTIFICATIO' and (r_c08.ds_justificatio_w IS NOT NULL AND r_c08.ds_justificatio_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_justificatio_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_justificatio_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c08.ds_notes_w IS NOT NULL AND r_c08.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c08.ds_notes_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 9 and ie_action_p = 1) then
     for r_c09 in c09
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
				if (r_clinical_note_fields.ie_field = 'ITEM_DESC' and (r_c09.ds_item IS NOT NULL AND r_c09.ds_item::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c09.ds_orderer_w IS NOT NULL AND r_c09.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c09.ds_order_w IS NOT NULL AND r_c09.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_order_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_START' and (r_c09.dt_start_w IS NOT NULL AND r_c09.dt_start_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.dt_start_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.dt_start_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_NOTES' and (r_c09.ds_notes_w IS NOT NULL AND r_c09.ds_notes_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_notes_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c09.ds_notes_w;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
	  elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 0  and ie_action_p = 0) then
     for r_c0013 in c0013
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0013.ds_item IS NOT NULL AND r_c0013.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0013.ds_orderer_w IS NOT NULL AND r_c0013.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0013.ds_order_w IS NOT NULL AND r_c0013.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_order_w;
                end if;
              end;
			  end if;		
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0013.dt_susp IS NOT NULL AND r_c0013.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0013.dt_lib_susp IS NOT NULL AND r_c0013.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0013.nm_usr_susp IS NOT NULL AND r_c0013.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0013.ds_obs_susp IS NOT NULL AND r_c0013.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(294515) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0013.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 1  and ie_action_p = 0) then
     for r_c0113 in c0113
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0113.ds_item IS NOT NULL AND r_c0113.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0113.ds_orderer_w IS NOT NULL AND r_c0113.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0113.ds_order_w IS NOT NULL AND r_c0113.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0113.dt_susp IS NOT NULL AND r_c0113.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0113.dt_lib_susp IS NOT NULL AND r_c0113.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0113.nm_usr_susp IS NOT NULL AND r_c0113.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0113.ds_obs_susp IS NOT NULL AND r_c0113.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797203) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0113.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 2  and ie_action_p = 0) then
     for r_c0213 in c0213
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0213.ds_item IS NOT NULL AND r_c0213.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0213.ds_orderer_w IS NOT NULL AND r_c0213.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0213.ds_order_w IS NOT NULL AND r_c0213.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0213.dt_susp IS NOT NULL AND r_c0213.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0213.dt_lib_susp IS NOT NULL AND r_c0213.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0213.nm_usr_susp IS NOT NULL AND r_c0213.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0213.ds_obs_susp IS NOT NULL AND r_c0213.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(614206) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 3  and ie_action_p = 0) then
     for r_c0213 in c0213
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0213.ds_item IS NOT NULL AND r_c0213.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0213.ds_orderer_w IS NOT NULL AND r_c0213.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0213.ds_order_w IS NOT NULL AND r_c0213.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0213.dt_susp IS NOT NULL AND r_c0213.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0213.dt_lib_susp IS NOT NULL AND r_c0213.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0213.nm_usr_susp IS NOT NULL AND r_c0213.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0213.ds_obs_susp IS NOT NULL AND r_c0213.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(290567) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0213.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 4  and ie_action_p = 0) then
     for r_c0313 in c0313
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0313.ds_item IS NOT NULL AND r_c0313.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0313.ds_orderer_w IS NOT NULL AND r_c0313.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0313.ds_order_w IS NOT NULL AND r_c0313.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0313.dt_susp IS NOT NULL AND r_c0313.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0313.dt_lib_susp IS NOT NULL AND r_c0313.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0313.nm_usr_susp IS NOT NULL AND r_c0313.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0313.ds_obs_susp IS NOT NULL AND r_c0313.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0313.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 5  and ie_action_p = 0) then
     for r_c0413 in c0413
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0413.ds_item IS NOT NULL AND r_c0413.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0413.ds_orderer_w IS NOT NULL AND r_c0413.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0413.ds_order_w IS NOT NULL AND r_c0413.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0413.dt_susp IS NOT NULL AND r_c0413.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0413.dt_lib_susp IS NOT NULL AND r_c0413.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0413.nm_usr_susp IS NOT NULL AND r_c0413.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0413.ds_obs_susp IS NOT NULL AND r_c0413.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(797205) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0413.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 6  and ie_action_p = 0) then
     for r_c0513 in c0513
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0513.ds_item IS NOT NULL AND r_c0513.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0513.ds_orderer_w IS NOT NULL AND r_c0513.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0513.ds_order_w IS NOT NULL AND r_c0513.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0513.dt_susp IS NOT NULL AND r_c0513.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0513.dt_lib_susp IS NOT NULL AND r_c0513.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0513.nm_usr_susp IS NOT NULL AND r_c0513.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0513.ds_obs_susp IS NOT NULL AND r_c0513.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(287725) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0513.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;	
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 8 and ie_action_p = 0) then
     for r_c0813 in c0813
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0813.ds_item IS NOT NULL AND r_c0813.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0813.ds_orderer_w IS NOT NULL AND r_c0813.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0813.ds_order_w IS NOT NULL AND r_c0813.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0813.dt_susp IS NOT NULL AND r_c0813.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0813.dt_lib_susp IS NOT NULL AND r_c0813.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0813.nm_usr_susp IS NOT NULL AND r_c0813.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0813.ds_obs_susp IS NOT NULL AND r_c0813.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(292949) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0813.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    elsif ( ie_record_type_p ='CPOE_ITEMS' and ie_record_sub_type_p = 9  and ie_action_p = 0) then
     for r_c0913 in c0913
	loop
      for r_clinical_note_fields in clinical_note_fields
      loop
        begin
			  if (r_clinical_note_fields.ie_field = 'ITEM_DESC') then
              begin
                if ( coalesce(ds_content_w::text, '') = '' and (r_c0913.ds_item IS NOT NULL AND r_c0913.ds_item::text <> '') ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_item;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_item;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_ORDERER' and (r_c0913.ds_orderer_w IS NOT NULL AND r_c0913.ds_orderer_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_orderer_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_orderer_w;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_ORDER' and (r_c0913.ds_order_w IS NOT NULL AND r_c0913.ds_order_w::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_order_w;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_order_w;
                end if;
              end;
			  end if;	
			  if (r_clinical_note_fields.ie_field = 'DT_SUSP' and (r_c0913.dt_susp IS NOT NULL AND r_c0913.dt_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '-' || obter_desc_expressao(298988) ||'</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.dt_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.dt_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DT_LIB_SUSP' and (r_c0913.dt_lib_susp IS NOT NULL AND r_c0913.dt_lib_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.dt_lib_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.dt_lib_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'NM_USR_SUSP' and (r_c0913.nm_usr_susp IS NOT NULL AND r_c0913.nm_usr_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.nm_usr_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.nm_usr_susp;
                end if;
              end;
			  end if;
			  if (r_clinical_note_fields.ie_field = 'DS_OBS_SUSP' and (r_c0913.ds_obs_susp IS NOT NULL AND r_c0913.ds_obs_susp::text <> '')) then
              begin
                if ( coalesce(ds_content_w::text, '') = '' ) then
                  ds_content_w    := '<b>' || obter_desc_expressao(314898) || '-' || obter_desc_expressao(298988)  || '</b>';
                  ds_content_w    := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_obs_susp;
                else
                  ds_content_w := ds_content_w|| '</br>' || coalesce(r_clinical_note_fields.nm_field,r_clinical_note_fields.ds_expressao) || ' - '|| r_c0913.ds_obs_susp;
                end if;
              end;
			  end if;
        end;
      end loop;
	  end loop;
    end if;
    return ds_content_w;
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION clinical_notes_pck.get_soap_content_cpoe ( nr_atendimento_p bigint, nr_sequencia_p bigint, ie_record_type_p text, ie_record_sub_type_p text, ie_soap_type text, ie_stage_p bigint, nr_prescricao_p text default null, ie_action_p bigint default null) FROM PUBLIC;
