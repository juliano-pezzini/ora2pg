-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION clinical_notes_pck.get_soap_content ( nr_atendimento_p bigint, nr_sequencia_p bigint, ie_record_type_p text, ie_record_sub_type_p text, ie_soap_type text, ie_stage_p bigint, ie_option_p text default null, cd_evolucao_p bigint default null, dt_exam_exec_p timestamp default null, ds_proc_exame_p text default null, ds_proc_dep_p text default null, cd_exam_type_p text default null, ds_comments_p text default null, cd_body_part_p text default null, ie_opcao_p text default null, transfusion_json_p HCP_FILE_DATA.DS_FILE_CONTENT%TYPE DEFAULT NULL) RETURNS varchar AS $body$
DECLARE

    ds_content_w    varchar(32000);


BEGIN
      if (ie_record_type_p = 'DIAGNOSIS')then
        ds_content_w         := clinical_notes_pck.get_soap_content_diagnosis(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
      elsif (ie_record_type_p = 'PROBLEM') then
        ds_content_w         := clinical_notes_pck.get_soap_content_problem(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
      elsif (ie_record_type_p = 'CPOE_ITEMS' and ie_stage_p =1) then
        ds_content_w         := clinical_notes_pck.get_soap_content_cpoe(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p,ie_option_p,1);
      elsif (ie_record_type_p = 'CPOE_ITEMS' and ie_stage_p =2) then
        ds_content_w         := clinical_notes_pck.get_soap_content_emar(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p, ie_option_p);
      elsif (ie_record_type_p ='INPATIENT') then
        ds_content_w         := clinical_notes_pck.get_soap_patient_addmission(nr_atendimento_p,ie_record_type_p,ie_soap_type,ie_stage_p);
      elsif (ie_record_type_p ='DISCHARGE') then
        ds_content_w         := clinical_notes_pck.get_soap_patient_discharge(nr_atendimento_p,ie_record_type_p,ie_soap_type,ie_stage_p);
      elsif (ie_record_type_p ='DEPT_TRANSFER') then
        ds_content_w         := clinical_notes_pck.get_soap_med_dept_transfer(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p,ie_option_p);
      elsif (ie_record_type_p ='WARD_TRANSFER') then
        ds_content_w         := clinical_notes_pck.get_soap_dept_transfer(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
      elsif (ie_record_type_p ='BED_TRANSFER') then
        ds_content_w         := clinical_notes_pck.get_soap_bed_transfer(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
	  elsif (ie_record_type_p ='BED_RQST') then
        ds_content_w         := clinical_notes_pck.get_soap_bed_request(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
      elsif (ie_record_type_p ='TEMP_LEAVE') then
        ds_content_w         := clinical_notes_pck.get_soap_temp_leave(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p,ie_option_p,ie_opcao_p);
        elsif (ie_record_type_p = 'CLNICAL_PATHWAY')then
        ds_content_w         := clinical_notes_pck.get_soap_clinical_pathway(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
        elsif (ie_record_type_p ='MED_CERT') then
        ds_content_w         := clinical_notes_pck.get_soap_med_certificate(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p);
        elsif (ie_record_type_p ='CONSENT') then
        ds_content_w         := clinical_notes_pck.get_soap_consent(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p);
        elsif (ie_record_type_p ='MED_GUIDANCE') then
        ds_content_w         := clinical_notes_pck.get_soap_med_guidance(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p);
        elsif (ie_record_type_p ='DPC') then
        ds_content_w         := clinical_notes_pck.get_soap_dpc(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='DSCHRG_INSTR') then
        ds_content_w         := clinical_notes_pck.get_soap_dis_inst(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='CARE_PLAN') then
        ds_content_w         := clinical_notes_pck.get_soap_care_plan(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='SURGERY') then
        ds_content_w         := clinical_notes_pck.get_soap_generate_surgery(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='INTERNAL_REF') then
        ds_content_w         := clinical_notes_pck.get_soap_in_refer(nr_atendimento_p,nr_sequencia_p ,ie_record_type_p,ie_soap_type,ie_stage_p,ie_option_p);
		elsif (ie_record_type_p ='EMERG_SERV_CONS') then
        ds_content_w         := clinical_notes_pck.get_soap_emerg_dept(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p = 'CONS_SCHD' or ie_record_type_p = 'EXAM_SCHD' or ie_record_type_p = 'SRVC_SCHD') then
        ds_content_w         := clinical_notes_pck.get_soap_integrated_schedule(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='MED_DSCHG_REQ') then
        ds_content_w         := clinical_notes_pck.get_soap_med_discharge(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='GNRL_INSTRCT') then
        ds_content_w         := clinical_notes_pck.get_soap_general_instr(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p = 'EXT_REFERRAL') then
        ds_content_w         := clinical_notes_pck.get_soap_ext_ref(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p = 'REHAB') then
        ds_content_w         := clinical_notes_pck.get_soap_pat_rehab(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p = 'NUT_GUIDANCE') then
        ds_content_w         := clinical_notes_pck.get_soap_nut_guidance(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p = 'NURSE_CARE_NEED') then
        ds_content_w         := clinical_notes_pck.get_soap_nursing_care_need(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='SURG_ACHIEVE') then
        ds_content_w         := clinical_notes_pck.get_soap_surg_achieve(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='DIALYSIS_SCHD') then
        ds_content_w         := clinical_notes_pck.get_soap_dialysis_schd(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_soap_type,ie_stage_p);
		ELSIF (ie_record_type_p = 'IP_MED_TP' ) THEN
        ds_content_w         := clinical_notes_pck.get_soap_inpat_tp(nr_atendimento_p, nr_sequencia_p, ie_record_type_p,ie_soap_type,ie_stage_p);
        ELSIF (ie_record_type_p = 'PD_MED_TP' ) THEN
        ds_content_w         := clinical_notes_pck.get_soap_post_dschg_tp(nr_atendimento_p, nr_sequencia_p, ie_record_type_p,ie_soap_type,ie_stage_p);
		elsif (ie_record_type_p ='PHYSIOLOGY') then
        ds_content_w         := get_soap_physiology(nr_atendimento_p,ie_record_type_p,ie_soap_type,ie_stage_p, dt_exam_exec_p, ds_proc_exame_p, ds_proc_dep_p);
		elsif (ie_record_type_p ='TRANS_CHECK') then
      	ds_content_w         := clinical_notes_pck.get_soap_transcheck(nr_atendimento_p,nr_sequencia_p,ie_record_type_p,ie_record_sub_type_p,ie_soap_type,ie_stage_p, transfusion_json_p );
      	elsif (ie_record_type_p ='RADIOLOGY') then
        ds_content_w         := get_soap_radiology(nr_atendimento_p,ie_record_type_p,ie_soap_type,ie_stage_p, dt_exam_exec_p, ds_proc_exame_p, cd_exam_type_p, ds_comments_p, cd_body_part_p);
      end if;
    return ds_content_w;
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION clinical_notes_pck.get_soap_content ( nr_atendimento_p bigint, nr_sequencia_p bigint, ie_record_type_p text, ie_record_sub_type_p text, ie_soap_type text, ie_stage_p bigint, ie_option_p text default null, cd_evolucao_p bigint default null, dt_exam_exec_p timestamp default null, ds_proc_exame_p text default null, ds_proc_dep_p text default null, cd_exam_type_p text default null, ds_comments_p text default null, cd_body_part_p text default null, ie_opcao_p text default null, transfusion_json_p HCP_FILE_DATA.DS_FILE_CONTENT%TYPE DEFAULT NULL) FROM PUBLIC;
