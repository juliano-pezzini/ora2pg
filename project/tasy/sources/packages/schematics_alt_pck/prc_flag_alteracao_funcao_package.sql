-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE schematics_alt_pck.prc_flag_alteracao_funcao (cd_funcao_p bigint) AS $body$
DECLARE

    nm_usuario_v     funcao_hist_schem4test.nm_usuario%type;
    dt_atualizacao_v funcao_hist_schem4test.dt_atualizacao%type;
    nr_sequencia_v   funcao_hist_schem4test.nr_sequencia%type;

BEGIN
    if (cd_funcao_p IS NOT NULL AND cd_funcao_p::text <> '') then

      select nextval('funcao_hist_schem4test_seq')
        into STRICT nr_sequencia_v
;

      nm_usuario_v     := wheb_usuario_pck.get_nm_usuario;
      dt_atualizacao_v := clock_timestamp();
      begin
        insert into funcao_hist_schem4test(nr_sequencia, cd_funcao, dt_atualizacao, nm_usuario)
        values (nr_sequencia_v, cd_funcao_p, dt_atualizacao_v, nm_usuario_v);
      exception
        when others then
          null;
      end;
      /*
            begin
              insert into funcao_hist_schem4test@schematic4test
                (nr_sequencia, cd_funcao, dt_atualizacao, nm_usuario)
              values
                (nr_sequencia_v, cd_funcao_p, dt_atualizacao_v, nm_usuario_v);
            exception
              when others then
                null;
            end;
      */
    end if;
  end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE schematics_alt_pck.prc_flag_alteracao_funcao (cd_funcao_p bigint) FROM PUBLIC;
