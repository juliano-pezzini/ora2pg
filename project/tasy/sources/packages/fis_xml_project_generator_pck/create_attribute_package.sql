-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE fis_xml_project_generator_pck.create_attribute (nr_seq_element_p text, nr_seq_apres_p bigint, ds_attribute_p text, username_p text) AS $body$
DECLARE


        nr_seq_attribute_w xml_atributo.nr_sequencia%type;

    
BEGIN
        PERFORM set_config('fis_xml_project_generator_pck.count_attributes', current_setting('fis_xml_project_generator_pck.count_attributes')::bigint + 1, false);

        $if $$tasy_local_dict=true $then
        nr_seq_attribute_w := get_remote_sequence('seq:xml_atributo_seq');
        $else
        select nextval('xml_atributo_seq') into STRICT nr_seq_attribute_w;
        $end

        current_setting('fis_xml_project_generator_pck.vector_attributes_w')::reference_attributes(current_setting('fis_xml_project_generator_pck.count_attributes')::bigint).ds_attribute := ds_attribute_p;
        current_setting('fis_xml_project_generator_pck.vector_attributes_w')::reference_attributes(current_setting('fis_xml_project_generator_pck.count_attributes')::bigint).seq_attribute := nr_seq_attribute_w;

        insert into xml_atributo(nr_sequencia,
             nr_seq_elemento,
             nr_seq_apresentacao,
             nm_atributo_xml,
             nm_atributo,
             ie_criar_nulo,
             ie_obrigatorio,
             ie_tipo_atributo,
             ds_mascara,
             nm_usuario_nrec,
             dt_atualizacao_nrec,
             nm_usuario,
             dt_atualizacao,
             nr_seq_atrib_elem,
             ie_criar_atributo,
             ds_cabecalho,
             ie_controle_pb,
             ie_remover_espaco_branco,
             ds_namespace,
             nm_tabela_def_banco,
             nm_atributo_xml_pesquisa,
             cd_exp_observacao,
             nm_tabela_base,
             nm_atributo_base,
             qt_tamanho,
             qt_decimais,
             cd_dominio,
             nr_seq_item_xsd,
             ie_atrib_cdata)
        values (nr_seq_attribute_w,
             nr_seq_element_p,
             nr_seq_apres_p,
             ds_attribute_p,
             ds_attribute_p,
             'N',
             'N',
             null,
             null,
             username_p,
             clock_timestamp(),
             username_p,
             clock_timestamp(),
             null,
             'S',
             null,
             'N',
             null,
             null,
             null,
             ds_attribute_p,
             null,
             null,
             null,
             null,
             null,
             null,
             null,
             null);
        commit;

    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE fis_xml_project_generator_pck.create_attribute (nr_seq_element_p text, nr_seq_apres_p bigint, ds_attribute_p text, username_p text) FROM PUBLIC;
