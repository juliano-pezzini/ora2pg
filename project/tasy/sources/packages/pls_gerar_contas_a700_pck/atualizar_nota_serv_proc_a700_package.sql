-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';


/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/




CREATE OR REPLACE PROCEDURE pls_gerar_contas_a700_pck.atualizar_nota_serv_proc_a700 ( nr_seq_nota_serv_table_p dbms_sql.number_table, cd_proc_table_p dbms_sql.number_table, ie_orig_proc_table_p dbms_sql.number_table, nr_seq_proc_table_p dbms_sql.number_table, nr_seq_partic_table_p dbms_sql.number_table ) AS $body$
DECLARE

/* ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade: Rotina responsavel por vincular as notas de servico aos procedimentos criados.
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */



BEGIN			
if (nr_seq_nota_serv_table_p.count > 0) then
	forall i in nr_seq_nota_serv_table_p.first..nr_seq_nota_serv_table_p.last
		update	ptu_nota_servico
		set	cd_procedimento 	= cd_proc_table_p(i),
			ie_origem_proced 	= ie_orig_proc_table_p(i),
			nr_seq_conta_proc 	= nr_seq_proc_table_p(i),
			nr_seq_proc_partic 	= nr_seq_partic_table_p(i)
		where	nr_sequencia 	= nr_seq_nota_serv_table_p(i);	

	commit;		
end if;
	
END;	

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_gerar_contas_a700_pck.atualizar_nota_serv_proc_a700 ( nr_seq_nota_serv_table_p dbms_sql.number_table, cd_proc_table_p dbms_sql.number_table, ie_orig_proc_table_p dbms_sql.number_table, nr_seq_proc_table_p dbms_sql.number_table, nr_seq_partic_table_p dbms_sql.number_table ) FROM PUBLIC;
