-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_util_pck.obter_restricao_null ( ds_bind_p text, ds_tipo_dado_p text, ie_quebra_linha_p text default 'S') RETURNS varchar AS $body$
DECLARE

ds_restricao_w	varchar(500);

BEGIN

case ds_tipo_dado_p
	when 'DATE' then
		ds_restricao_w := ' and to_date(''' || current_setting('pls_util_pck.vl_null_date')::timestamp || ''') = ' || ds_bind_p;
		if (ie_quebra_linha_p = 'S') then
			ds_restricao_w := ds_restricao_w || current_setting('pls_util_pck.enter_w')::varchar(2);
		end if;
	when 'VARCHAR2' then
		ds_restricao_w := ' and ''' || current_setting('pls_util_pck.vl_null_vch2')::varchar(1) || ''' = ' || ds_bind_p;
		if (ie_quebra_linha_p = 'S') then
			ds_restricao_w := ds_restricao_w || current_setting('pls_util_pck.enter_w')::varchar(2);
		end if;
	-- Aceitar valor calculado
	when 'NUMBER' then
		ds_restricao_w := ' and ' || current_setting('pls_util_pck.vl_null_num')::smallint || ' = ' || ds_bind_p;
		if (ie_quebra_linha_p = 'S') then
			ds_restricao_w := ds_restricao_w || current_setting('pls_util_pck.enter_w')::varchar(2);
		end if;
	else
		ds_restricao_w := '';
end case;

return ds_restricao_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_util_pck.obter_restricao_null ( ds_bind_p text, ds_tipo_dado_p text, ie_quebra_linha_p text default 'S') FROM PUBLIC;
