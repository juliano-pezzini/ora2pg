-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_util_pck.string_to_date (ds_data_p text, ds_formato_p text default null, ds_retorno_p timestamp default null) RETURNS timestamp AS $body$
DECLARE


ds_formato_w	varchar(50);
dt_retorno_w	timestamp;


BEGIN
-- verifica se foi passado um formato de data, senão foi então utiliza como padrão dia/mês/ano
if (ds_formato_p IS NOT NULL AND ds_formato_p::text <> '') then

	ds_formato_w := ds_formato_p;
else
	ds_formato_w := 'dd/mm/yyyy';
end if;

-- tenta coverter para date, caso não consiga retorna o parâmetro ou null
begin
	dt_retorno_w := to_date(ds_data_p, ds_formato_w);
exception
	when others then
	dt_retorno_w := ds_retorno_p;
end;

return dt_retorno_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_util_pck.string_to_date (ds_data_p text, ds_formato_p text default null, ds_retorno_p timestamp default null) FROM PUBLIC;
