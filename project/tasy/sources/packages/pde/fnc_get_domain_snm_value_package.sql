-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pde.fnc_get_domain_snm_value (NM_TABLE_P text, NM_ATTRIBUTE_P text, IE_DOMINIO_W bigint, CD_VALOR_TASY_P text) RETURNS varchar AS $body$
DECLARE

    DS_VALUE_W RES_CADASTRO_ONTOLOGIA_PHI.CD_VALOR_ONTOLOGIA%TYPE;

BEGIN
    IF (coalesce(IE_DOMINIO_W, 0) = 1) THEN
      SELECT MAX(PHI.CD_VALOR_ONTOLOGIA)
        INTO STRICT DS_VALUE_W
        FROM RES_CADASTRO_ONTOLOGIA_PHI PHI
       WHERE PHI.NM_TABELA = NM_TABLE_P
         AND PHI.NM_ATRIBUTO = NM_ATTRIBUTE_P
         AND PHI.CD_VALOR_TASY = CD_VALOR_TASY_P;
    END IF;

    RETURN DS_VALUE_W;
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pde.fnc_get_domain_snm_value (NM_TABLE_P text, NM_ATTRIBUTE_P text, IE_DOMINIO_W bigint, CD_VALOR_TASY_P text) FROM PUBLIC;
