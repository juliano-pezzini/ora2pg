-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pde.process_fk_values (TABLE_NAME_P text, CONSTRAINT_NAME_P text) AS $body$
DECLARE


  C RECORD;

BEGIN
      FOR C IN (SELECT UC.COLUMN_NAME, UC.POSITION
                  FROM USER_CONS_COLUMNS UC
                 WHERE UC.TABLE_NAME = TABLE_NAME_P
                   AND UC.CONSTRAINT_NAME = CONSTRAINT_NAME_P
                 ORDER BY UC.POSITION) LOOP
        IF (C.POSITION = 1) THEN
          PERFORM set_config('pde.vl_fk_1_w', ':NEW.' || C.COLUMN_NAME, false);
        ELSIF (C.POSITION = 2) THEN
          PERFORM set_config('pde.vl_fk_2_w', ':NEW.' || C.COLUMN_NAME, false);
        ELSIF (C.POSITION = 3) THEN
          PERFORM set_config('pde.vl_fk_3_w', ':NEW.' || C.COLUMN_NAME, false);
        ELSIF (C.POSITION = 4) THEN
          PERFORM set_config('pde.vl_fk_4_w', ':NEW.' || C.COLUMN_NAME, false);
        END IF;
      END LOOP;
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pde.process_fk_values (TABLE_NAME_P text, CONSTRAINT_NAME_P text) FROM PUBLIC;
