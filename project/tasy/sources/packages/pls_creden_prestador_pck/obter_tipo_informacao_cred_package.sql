-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_creden_prestador_pck.obter_tipo_informacao_cred ( nr_seq_credenciamento_p pls_creden_prestador.nr_sequencia%type) RETURNS SETOF T_TIPO_INFORMACAO AS $body$
DECLARE

t_tipo_informacao_row_w t_tipo_informacao_row;
C01 CURSOR FOR
	SELECT	x.vl_dominio,
		x.ds_valor_dominio,
		a.ie_colaboradores,
		a.ie_qt_profissionais,
		a.ie_especialidade_prestador,
		a.ie_corpo_clinico,
		a.ie_procedimentos,
		a.ie_materiais,
		a.ie_servico_terceiro,
		a.ie_leitos,
		a.ie_equipamentos,
		a.ie_qualificacao
	from	valor_dominio_v x,
		pls_tipo_cred_prestador a,
		pls_creden_prestador b
	where	a.nr_sequencia	= b.nr_seq_tipo_credenciamento
	and	b.nr_sequencia	= nr_seq_credenciamento_p
	and	x.cd_dominio = 10548
	order by x.ds_valor_dominio;
BEGIN

for c01_w in C01 loop
	begin
	
	if (c01_w.vl_dominio = '1' and c01_w.ie_colaboradores = 'S') or --Colaboradores
		(c01_w.vl_dominio = '2' and c01_w.ie_qt_profissionais = 'S') or --Quantidade de profissionais
		(c01_w.vl_dominio = '3' and c01_w.ie_especialidade_prestador = 'S') or --Especialidades medicas do prestador
		(c01_w.vl_dominio = '4' and c01_w.ie_corpo_clinico = 'S') or --Corpo clinico
		(c01_w.vl_dominio = '5' and c01_w.ie_procedimentos = 'S') or --Procedimentos
		(c01_w.vl_dominio = '6' and c01_w.ie_materiais = 'S') or --Materiais
		(c01_w.vl_dominio = '7' and c01_w.ie_servico_terceiro = 'S') or --Servicos de terceiros
		(c01_w.vl_dominio = '8') or --Documentos
		(c01_w.vl_dominio = '9') or --Dados complementares
		(c01_w.vl_dominio = '10' and c01_w.ie_leitos = 'S') or --Leitos
		(c01_w.vl_dominio = '11' and c01_w.ie_equipamentos = 'S') or --Equipamentos
		(c01_w.vl_dominio = '12' and c01_w.ie_qualificacao = 'S') then --Qualificacao
		t_tipo_informacao_row_w.ie_tipo_informacao	:= c01_w.vl_dominio;
		t_tipo_informacao_row_w.ds_tipo_informacao	:= c01_w.ds_valor_dominio;
		RETURN NEXT t_tipo_informacao_row_w;
	end if;
	
	end;
end loop;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_creden_prestador_pck.obter_tipo_informacao_cred ( nr_seq_credenciamento_p pls_creden_prestador.nr_sequencia%type) FROM PUBLIC;
