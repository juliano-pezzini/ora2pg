-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION alto_custo_erc_pck.get_pressao_art_diast ( nr_atendimento_p bigint ) RETURNS varchar AS $body$
DECLARE

        ds_retorno_w varchar(255);

BEGIN
		begin
			select  qt_pa_diastolica
			into STRICT	ds_retorno_w
			from    atendimento_sinal_vital
			where   nr_atendimento = nr_atendimento_p
			and     (qt_pa_diastolica IS NOT NULL AND qt_pa_diastolica::text <> '') 
			order by dt_sinal_vital desc LIMIT 1;

			exception
				when no_data_found then
					ds_retorno_w := 999;
		end;

      return ds_retorno_w;
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION alto_custo_erc_pck.get_pressao_art_diast ( nr_atendimento_p bigint ) FROM PUBLIC;
