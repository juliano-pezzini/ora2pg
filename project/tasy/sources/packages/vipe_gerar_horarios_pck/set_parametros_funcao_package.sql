-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';


/*Setar os parâmetros nas variáveis*/

CREATE OR REPLACE PROCEDURE vipe_gerar_horarios_pck.set_parametros_funcao ( cd_estabelecimento_p bigint, cd_setor_usuario_p bigint, cd_perfil_p bigint, ie_aba_p text, nr_atendimento_p bigint, nr_seq_dialise_p bigint, qt_horas_anteriores_p bigint, qt_horas_adicionais_p bigint, qt_horas_vigencia_p bigint, dt_referencia_p timestamp, ie_exibir_hor_realizados_p text, ie_exibir_hor_suspensos_p text, ie_so_proc_setor_usuario_p text, ie_so_interv_setor_usuario_p text, ie_solucoes_continuas_p text, nm_usuario_p text) AS $body$
BEGIN

	if	((current_setting('vipe_gerar_horarios_pck.nm_usuario_w')::(varchar(15) IS NOT NULL AND (varchar(15))::text <> '')) and (current_setting('vipe_gerar_horarios_pck.nm_usuario_w')::varchar(15)	<> nm_usuario_p)) or
		((current_setting('vipe_gerar_horarios_pck.cd_estabelecimento_w')::(smallint IS NOT NULL AND smallint::text <> '')) and (current_setting('vipe_gerar_horarios_pck.cd_estabelecimento_w')::smallint <> cd_estabelecimento_p)) or
		((current_setting('vipe_gerar_horarios_pck.cd_perfil_w')::(bigint IS NOT NULL AND bigint::text <> '')) and (current_setting('vipe_gerar_horarios_pck.cd_perfil_w')::bigint <> cd_perfil_p)) then
		PERFORM set_config('vipe_gerar_horarios_pck.ie_data_lib_prescr_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_considera_horario_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_apres_grupos_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_agrupar_acm_sn_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_exibir_suspensos_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_agrupar_dose_esp_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_obs_diferenciar_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_data_lib_proced_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_horarios_dietas_orais_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_regra_incl_ordem_medica_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_mat_med_proc_gestao_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_diluicao_acm_sn_gestao_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_agrupar_associados_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_lib_pend_rep_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_gerar_horarios_glic_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_mostrar_subs_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_exibir_dil_ccg_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_exibe_sem_lib_farm_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_exibe_dietas_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_prescr_setor_atual_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_formato_solucoes_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.nr_regra_ordem_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.ie_uliza_serv_dieta_w', null, false);
		PERFORM set_config('vipe_gerar_horarios_pck.qtdiasanteriorsolucao_w', null, false);
	end if;

	PERFORM set_config('vipe_gerar_horarios_pck.cd_perfil_w', cd_perfil_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.cd_estabelecimento_w', cd_estabelecimento_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.nm_usuario_w', nm_usuario_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.ie_aba_w', ie_aba_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.nr_atendimento_w', nr_atendimento_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.nr_seq_dialise_w', nr_seq_dialise_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.qt_horas_anteriores_w', qt_horas_anteriores_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.qt_horas_adicionais_w', qt_horas_adicionais_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.qt_horas_vigencia_w', qt_horas_vigencia_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.dt_referencia_w', dt_referencia_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.ie_exibir_hor_realizados_w', ie_exibir_hor_realizados_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.ie_exibir_hor_suspensos_w', ie_exibir_hor_suspensos_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.ie_so_proc_setor_usuario_w', ie_so_proc_setor_usuario_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.ie_so_interv_setor_usuario_w', ie_so_interv_setor_usuario_p, false);
	PERFORM set_config('vipe_gerar_horarios_pck.ie_solucoes_continuas_w', ie_solucoes_continuas_p, false);
	end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE vipe_gerar_horarios_pck.set_parametros_funcao ( cd_estabelecimento_p bigint, cd_setor_usuario_p bigint, cd_perfil_p bigint, ie_aba_p text, nr_atendimento_p bigint, nr_seq_dialise_p bigint, qt_horas_anteriores_p bigint, qt_horas_adicionais_p bigint, qt_horas_vigencia_p bigint, dt_referencia_p timestamp, ie_exibir_hor_realizados_p text, ie_exibir_hor_suspensos_p text, ie_so_proc_setor_usuario_p text, ie_so_interv_setor_usuario_p text, ie_solucoes_continuas_p text, nm_usuario_p text) FROM PUBLIC;
