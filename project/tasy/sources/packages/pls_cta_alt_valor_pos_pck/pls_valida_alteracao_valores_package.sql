-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_cta_alt_valor_pos_pck.pls_valida_alteracao_valores ( ie_opcao_p text, qt_apresentada_p pls_conta_proc_v.qt_procedimento_imp%type, qt_liberada_p pls_conta_proc_v.qt_procedimento%type, vl_liberado_p pls_conta_proc_v.vl_liberado%type, vl_apresentado_p pls_conta_proc_v.vl_procedimento_imp%type, vl_calculado_p pls_conta_proc_v.vl_procedimento%type) AS $body$
DECLARE

/*ie_opcao_p
1 - Saída quantidade
2 - Saída valor liberado
3 - Saída Valores liberados proc
4 - Saída valores liberados Co
5 - Saída valores liberados mat
6 - Saída valores taxa hi
7 - Saída valores taxa Co
8 - Saída valores taxa mat
9 - Ajustar Taxas*/
BEGIN

if (qt_liberada_p	> qt_apresentada_p) then
	CALL wheb_mensagem_pck.exibir_mensagem_abort(256822);
end if;

if (ie_opcao_p	= '3') then
	if (vl_liberado_p > vl_apresentado_p) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256926);
	end if;
elsif (ie_opcao_p	= '4') then
	if (vl_liberado_p > vl_apresentado_p) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256929);
	end if;
elsif (ie_opcao_p	= '5') then
	
	if (vl_liberado_p > vl_apresentado_p) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256927);
	end if;
	
	if (vl_liberado_p < 0) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256950);
	end if;	
elsif (ie_opcao_p	= '6') then
	if (vl_liberado_p > vl_apresentado_p) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256941);
	end if;
	
	if (vl_liberado_p < 0) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256950);
	end if;		
elsif (ie_opcao_p	= '7') then
	if (vl_liberado_p > vl_apresentado_p) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256942);
	end if;
	
	if (vl_liberado_p < 0) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256950);
	end if;
elsif (ie_opcao_p	= '8') then
	if (vl_liberado_p > vl_apresentado_p) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256945);
	end if;
	
	if (vl_liberado_p < 0) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(256950);
	end if;
elsif (ie_opcao_p	= '9') then
	if (qt_liberada_p	= 0) then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(258701);
	end if;
end if;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_cta_alt_valor_pos_pck.pls_valida_alteracao_valores ( ie_opcao_p text, qt_apresentada_p pls_conta_proc_v.qt_procedimento_imp%type, qt_liberada_p pls_conta_proc_v.qt_procedimento%type, vl_liberado_p pls_conta_proc_v.vl_liberado%type, vl_apresentado_p pls_conta_proc_v.vl_procedimento_imp%type, vl_calculado_p pls_conta_proc_v.vl_procedimento%type) FROM PUBLIC;
