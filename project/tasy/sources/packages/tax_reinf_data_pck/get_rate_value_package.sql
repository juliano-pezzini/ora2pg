-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION tax_reinf_data_pck.get_rate_value (tax_rate_p bigint, calculation_basis_p bigint, option_p bigint) RETURNS bigint AS $body$
DECLARE

    value_w double precision := 0;

BEGIN
    if tax_rate_p = 15 then
      if option_p in (2, 9) then
        value_w :=	calculation_basis_p * 0.04;
      elsif option_p = 6 then
        value_w := calculation_basis_p;
      end if;
    elsif tax_rate_p = 14 then
      if option_p in (3, 9) then
        value_w :=	calculation_basis_p * 0.03;
      elsif option_p = 7 then
        value_w := calculation_basis_p;
      end if;
    elsif tax_rate_p = 13 then
      if option_p in (4, 9) then
        value_w :=	calculation_basis_p * 0.02;
      elsif option_p = 8 then
        value_w := calculation_basis_p;
      end if;
    end if;
    return value_w;
  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION tax_reinf_data_pck.get_rate_value (tax_rate_p bigint, calculation_basis_p bigint, option_p bigint) FROM PUBLIC;
