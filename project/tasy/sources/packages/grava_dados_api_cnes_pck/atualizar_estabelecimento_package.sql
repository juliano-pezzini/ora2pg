-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE grava_dados_api_cnes_pck.atualizar_estabelecimento ( nr_seq_estabelecimento_p cnes_api_estabelecimento.nr_sequencia%type, cd_unidade_cnes_p cnes_api_estabelecimento.cd_unidade_cnes%type, ds_razao_social_p cnes_api_estabelecimento.ds_razao_social%type, nm_fantasia_p cnes_api_estabelecimento.nm_fantasia%type, nr_cnpj_p cnes_api_estabelecimento.nr_cnpj%type, ds_logradouro_p cnes_api_estabelecimento.ds_logradouro%type, nr_logradouro_p cnes_api_estabelecimento.nr_logradouro%type, ds_complemento_p cnes_api_estabelecimento.ds_complemento%type, ds_bairro_p cnes_api_estabelecimento.ds_bairro%type, cd_cep_p cnes_api_estabelecimento.cd_cep%type, cd_municipio_ibge_p cnes_api_estabelecimento.cd_municipio_ibge%type, ds_municipio_p cnes_api_estabelecimento.ds_municipio%type, cd_uf_p cnes_api_estabelecimento.cd_uf%type, sg_estado_p cnes_api_estabelecimento.sg_estado%type, dt_atualizacao_cnes_p cnes_api_estabelecimento.dt_atualizacao_cnes%type, nr_cpf_diretor_p cnes_api_estabelecimento.nr_cpf_diretor%type, nm_diretor_p cnes_api_estabelecimento.nm_diretor%type, ds_email_p cnes_api_estabelecimento.ds_email%type, cd_tipo_email_p cnes_api_estabelecimento.cd_tipo_email%type, ie_tipo_estabelecimento_p cnes_api_estabelecimento.ie_tipo_estabelecimento%type, ds_latitude_p cnes_api_estabelecimento.ds_latitude%type, ds_longitude_p cnes_api_estabelecimento.ds_longitude%type, ie_pertence_sus_p cnes_api_estabelecimento.ie_pertence_sus%type) AS $body$
BEGIN

begin
update	cnes_api_estabelecimento
set	cd_unidade_cnes		= cd_unidade_cnes_p,
	ds_razao_social		= ds_razao_social_p,
	nm_fantasia		= nm_fantasia_p,
	nr_cnpj			= nr_cnpj_p,
	ds_logradouro		= ds_logradouro_p,
	nr_logradouro		= nr_logradouro_p,
	ds_complemento		= ds_complemento_p,
	ds_bairro		= ds_bairro_p,
	cd_cep			= cd_cep_p,
	cd_municipio_ibge	= cd_municipio_ibge_p,
	ds_municipio		= ds_municipio_p,
	cd_uf			= cd_uf_p,
	sg_estado		= sg_estado_p,
	dt_atualizacao_cnes	= dt_atualizacao_cnes_p,
	nr_cpf_diretor		= nr_cpf_diretor_p,
	nm_diretor		= nm_diretor_p,
	ds_email		= ds_email_p,
	cd_tipo_email		= cd_tipo_email_p,
	ie_tipo_estabelecimento	= ie_tipo_estabelecimento_p,
	ds_latitude		= ds_latitude_p,
	ds_longitude		= ds_longitude_p,
	ie_pertence_sus		= ie_pertence_sus_p,
	ie_status		= 2
where	nr_sequencia		= nr_seq_estabelecimento_p;
exception
when others then
	CALL CALL grava_dados_api_cnes_pck.gravar_log(nr_seq_estabelecimento_p, wheb_mensagem_pck.get_texto(1204633) , 'WebServiceTIE');
end;

commit;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE grava_dados_api_cnes_pck.atualizar_estabelecimento ( nr_seq_estabelecimento_p cnes_api_estabelecimento.nr_sequencia%type, cd_unidade_cnes_p cnes_api_estabelecimento.cd_unidade_cnes%type, ds_razao_social_p cnes_api_estabelecimento.ds_razao_social%type, nm_fantasia_p cnes_api_estabelecimento.nm_fantasia%type, nr_cnpj_p cnes_api_estabelecimento.nr_cnpj%type, ds_logradouro_p cnes_api_estabelecimento.ds_logradouro%type, nr_logradouro_p cnes_api_estabelecimento.nr_logradouro%type, ds_complemento_p cnes_api_estabelecimento.ds_complemento%type, ds_bairro_p cnes_api_estabelecimento.ds_bairro%type, cd_cep_p cnes_api_estabelecimento.cd_cep%type, cd_municipio_ibge_p cnes_api_estabelecimento.cd_municipio_ibge%type, ds_municipio_p cnes_api_estabelecimento.ds_municipio%type, cd_uf_p cnes_api_estabelecimento.cd_uf%type, sg_estado_p cnes_api_estabelecimento.sg_estado%type, dt_atualizacao_cnes_p cnes_api_estabelecimento.dt_atualizacao_cnes%type, nr_cpf_diretor_p cnes_api_estabelecimento.nr_cpf_diretor%type, nm_diretor_p cnes_api_estabelecimento.nm_diretor%type, ds_email_p cnes_api_estabelecimento.ds_email%type, cd_tipo_email_p cnes_api_estabelecimento.cd_tipo_email%type, ie_tipo_estabelecimento_p cnes_api_estabelecimento.ie_tipo_estabelecimento%type, ds_latitude_p cnes_api_estabelecimento.ds_latitude%type, ds_longitude_p cnes_api_estabelecimento.ds_longitude%type, ie_pertence_sus_p cnes_api_estabelecimento.ie_pertence_sus%type) FROM PUBLIC;
