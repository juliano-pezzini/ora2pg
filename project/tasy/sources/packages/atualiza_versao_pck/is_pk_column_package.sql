-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION atualiza_versao_pck.is_pk_column (p_table text, p_attribute text) RETURNS boolean AS $body$
DECLARE

    aux_w varchar(1);
    ret_w boolean;

BEGIN
    select CASE WHEN count(*)=0 THEN  'N'  ELSE 'S' END 
      into STRICT aux_w
      from tasy_versao.indice i, tasy_versao.indice_atributo ia
     where i.nm_tabela = ia.nm_tabela
       and i.nm_indice = ia.nm_indice
       and i.nm_tabela = p_table
       and ia.nm_atributo = p_attribute
       and i.ie_tipo = 'PK';
    if aux_w = 'N' then
      ret_w := false;
    else
      ret_w := true;
    end if;
    return ret_w;
  end;

  --------------------------------------------------------------------------------------
  --                                                                                 
  -- Cria as instruções ADD COLUMN para a atualização.
  --                                                                                 
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION atualiza_versao_pck.is_pk_column (p_table text, p_attribute text) FROM PUBLIC;
