-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE atualiza_versao_pck.disable_parallelism () AS $body$
DECLARE

    v_cmd varchar(32000);

BEGIN
    v_cmd := '
  begin
    for r in (select ''alter table '''' || table_name || '''' noparallel'' cmd,
                     table_name
                from user_tables
               where trim(degree) not in (''1'', ''0'')
                 and table_name in (select nm_tabela from tabela_sistema)) loop
                 begin
                 execute immediate r.cmd;
                 exception
                 when others then
                 null;
                 end;
    end loop;
  end;';

    CALL atualiza_versao_pck.insert_cmd(p_cmd => v_cmd, p_operacao => 'DISABLE TABLE PARALLELISM');

    v_cmd := '
  begin
    for r in (select ''alter index '''' || INDEX_NAME || '''' noparallel'' cmd,
                     table_name
                from user_indexes
               where trim(degree) not in (''1'', ''0'')
                 and table_name in (select nm_tabela from tabela_sistema)) loop
                 begin
                 execute immediate r.cmd;
                 exception
                 when others then
                 null;
                 end;
    end loop;
  end;';

    CALL atualiza_versao_pck.insert_cmd(p_cmd => v_cmd, p_operacao => 'DISABLE INDEX PARALLELISM');
  end;

  --------------------------------------------------------------------------------------
  --                                                                                 
  -- Cria a a tabela de log de erros utilizada nas operações de atualização das
  -- tabelas do dicionário.
  --                                                                                 
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualiza_versao_pck.disable_parallelism () FROM PUBLIC;
