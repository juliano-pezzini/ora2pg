-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE atualiza_versao_pck.external_procedures () AS $body$
BEGIN
    CALL atualiza_versao_pck.insert_cmd(p_operacao => 'DISABLE APPLICATION',
               p_cmd      => 'begin UPDATE APLICACAO_TASY SET IE_STATUS_APLICACAO = ''I'' WHERE cd_aplicacao_tasy = ''Tasy''; commit; end;');

    /* atualiza_versao_pck.insert_cmd(p_operacao => 'ENABLE APPLICATION',
    p_cmd      => 'begin atualiza_versao_pck.enable_application(''' ||
                  p_cd_versao_destino || '''); end;');*/
  
    CALL atualiza_versao_pck.insert_cmd(p_operacao => 'CLOSE CONNECTIONS',
               p_cmd      => 'begin null; end;');

    CALL atualiza_versao_pck.insert_cmd(p_operacao => 'AJUSTAR_BASE_RELATORIO',
               p_cmd      => 'begin tasy_ajustar_base_relatorio; end;');

    CALL atualiza_versao_pck.insert_cmd(p_operacao => 'ATUALIZAR_BASE_RELATORIO',
               p_cmd      => 'begin TASY_ATUALIZAR_BASE_RELATORIO; end;');

    CALL atualiza_versao_pck.insert_cmd(p_operacao => 'ATUALIZAR_INDICADOR',
               p_cmd      => 'begin TASY_ATUALIZAR_INDICADOR; end;');

    CALL atualiza_versao_pck.insert_cmd(p_operacao => 'ELIMINAR_FUNCAO',
               p_cmd      => 'begin TASY_ELIMINAR_FUNCAO(''Tasy''); end;');

    commit;
  end;

  --------------------------------------------------------------------------------------
  --                                                                                 
  -- Script para liberar a aplicação e atualizar o número da versão
  --                                                                                 
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualiza_versao_pck.external_procedures () FROM PUBLIC;
