-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE atualiza_versao_pck.update_tasy_padrao_imagem () AS $body$
DECLARE

    v_cmd varchar(32000);

BEGIN
    v_cmd := '
    declare
      rw long raw;
    begin
      for r in (select nr_sequencia from tasy_versao.tasy_padrao_imagem i) loop
        begin
          select d.ie_imagem
            into rw
            from tasy_versao.tasy_padrao_imagem d
           where d.nr_sequencia = r.nr_sequencia;
        
          update tasy_padrao_imagem a
             set a.ie_imagem = rw
           where a.nr_sequencia = r.nr_sequencia;
        exception
          when others then
            null;
        end;
      end loop;
      commit;
    end;';
    CALL atualiza_versao_pck.insert_cmd(p_cmd => v_cmd, p_operacao => 'UPDATE TABLE PADRAO IMAGEM');
  end;

  --------------------------------------------------------------------------------------
  --                                                                                 
  -- Cria a instrução para desativar o paralelismo nas tabelas e índices do Tasy.
  --                                                                                 
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualiza_versao_pck.update_tasy_padrao_imagem () FROM PUBLIC;
