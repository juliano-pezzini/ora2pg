-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE atualiza_versao_pck.create_sequence () AS $body$
DECLARE

    v_cmd varchar(32000);

BEGIN
    for s in c_create_sequence_01 loop
    
      v_cmd := 'create sequence ' || s.seq_name || ' start with ' ||
               s.qt_seq_inicio || ' increment by ' ||
               coalesce(s.qt_seq_incremento, 1) || ' nocache ';

      CALL atualiza_versao_pck.insert_cmd(p_operacao    => 'CREATE SEQUENCE',
                 p_cmd         => v_cmd,
                 p_object_name => s.seq_name);
    end loop;

    for s in c_create_sequence_02 loop
    
      v_cmd := s.seq_cmd;

      for i in 1 .. 5 loop
        v_cmd := trim(both chr(13) from v_cmd);
        v_cmd := trim(both chr(10) from v_cmd);
        v_cmd := trim(both chr(9) from v_cmd);
        v_cmd := trim(both ' ' from v_cmd);
        v_cmd := trim(both '/' from v_cmd);
        v_cmd := trim(both ';' from v_cmd);
      end loop;

      CALL atualiza_versao_pck.insert_cmd(p_operacao    => 'CREATE SEQUENCE',
                 p_cmd         => v_cmd,
                 p_object_name => s.seq_name);
    end loop;
  end;

  --------------------------------------------------------------------------------------
  --                                                                                 
  -- Cria as instruções ALTER TABLE ADD PRIMARY KEY para a atualização.
  --                                                                                 
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualiza_versao_pck.create_sequence () FROM PUBLIC;
