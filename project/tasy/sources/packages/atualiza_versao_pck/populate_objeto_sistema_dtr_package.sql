-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE atualiza_versao_pck.populate_objeto_sistema_dtr () AS $body$
BEGIN
    delete FROM objeto_sistema_dtr;
    insert into objeto_sistema_dtr(nm_objeto,
       dt_atualizacao,
       nr_sequencia,
       ie_tipo_objeto,
       ds_script_criacao,
       ds_aplicacao,
       cd_cnpj)
      SELECT nm_objeto,
             dt_atualizacao,
             nr_sequencia,
             ie_tipo_objeto,
             to_lob(ds_script_criacao),
             ds_aplicacao,
             cd_cnpj
        from tasy_versao.objeto_sistema;
    commit;
  end;

  --------------------------------------------------------------------------------------
  --                                                                                 
  -- Cria a operação de controle. Na operação de controle são gravadas as informações
  -- sobre versão origem e destino, flag de execução e flag de finalização do
  -- prepare update.
  --                                                                                 
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualiza_versao_pck.populate_objeto_sistema_dtr () FROM PUBLIC;
