-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE atualiza_versao_pck.create_backup_dtr_tables () AS $body$
DECLARE

    v_cmd varchar(32000);

BEGIN
    v_cmd := 'CREATE TABLE ' || current_setting('atualiza_versao_pck.g_backup_prefix')::varchar(60) ||
             'ATU_VER_CMD AS SELECT * FROM ATUALIZA_VERSAO_CMD';

    CALL atualiza_versao_pck.insert_cmd(p_operacao    => 'CREATE BACKUP OF DTR TABLES',
               p_cmd         => v_cmd,
               p_object_name => 'ATUALIZA_VERSAO_CMD');

    v_cmd := 'CREATE TABLE ' || current_setting('atualiza_versao_pck.g_backup_prefix')::varchar(60) ||
             'ERR_EXP_TAB AS SELECT * FROM LOG_ERROR_EXP_TABLES';

    CALL atualiza_versao_pck.insert_cmd(p_operacao    => 'CREATE BACKUP OF DTR TABLES',
               p_cmd         => v_cmd,
               p_object_name => 'LOG_ERROR_EXP_TABLES');
  end;

  --------------------------------------------------------------------------------------
  --                                                                                 
  -- Verifica qual operação deve ser feita para cada tabela de dicionário,
  -- de acordo com as flags ie_atualizar, ie_copiar, ie_excluir.
  --                                                                                 
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualiza_versao_pck.create_backup_dtr_tables () FROM PUBLIC;
