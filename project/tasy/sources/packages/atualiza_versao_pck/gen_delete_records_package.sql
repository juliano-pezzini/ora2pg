-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE atualiza_versao_pck.gen_delete_records (p_table_name text, p_ds_campo_exclusao text, p_reg_count bigint) AS $body$
DECLARE

    v_col_list  varchar(32000);
    v_col_pk    varchar(2000);
    v_col_where varchar(2000);
    v_reg_count bigint;
    v_cmd       text;

BEGIN
    v_reg_count := 0;

    v_cmd := 'delete ' || p_table_name || ' a ' || p_ds_campo_exclusao ||
             chr(10) || ' log errors into log_error_exp_tables (''' ||
             upper(p_table_name) || ''') reject limit unlimited';

    CALL atualiza_versao_pck.insert_cmd(p_operacao         => 'DELETE RECORDS FROM DICTIONARY TABLES',
               p_cmd              => v_cmd,
               p_object_name      => p_table_name,
               p_qt_reg_exp_table => p_reg_count);

  end;

  --------------------------------------------------------------------------------------
  --
  --
  --
  --------------------------------------------------------------------------------------
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualiza_versao_pck.gen_delete_records (p_table_name text, p_ds_campo_exclusao text, p_reg_count bigint) FROM PUBLIC;
