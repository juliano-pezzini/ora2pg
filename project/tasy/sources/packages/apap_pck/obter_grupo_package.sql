-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION apap_pck.obter_grupo ( grupo_p INOUT dadosGrupo_tp) AS $body$
DECLARE


_ora2pg_r RECORD;
t_objeto_retorno_w	t_objeto_row;

BEGIN

t_objeto_retorno_w.ds_informacao		:= grupo_p.ds_informacao;
t_objeto_retorno_w.nr_seq_apap_grupo		:= grupo_p.nr_seq_apap_grupo;
t_objeto_retorno_w.ie_grupo_informacao		:= 'G';
t_objeto_retorno_w.ie_grupo_inf			:= grupo_p.ie_grupo_inf;



	
grupo_p := apap_pck.totalizar_grupo(grupo_p);
	if	((t_objeto_retorno_w.ie_grupo_inf in ('CH','OC')) or (t_objeto_retorno_w.ie_grupo_inf = 'BH') and grupo_p.ie_informacao = 'N') then
		t_objeto_retorno_w.ie_total			:= 'S';
		SELECT * FROM apap_pck.processar_dados(t_objeto_retorno_w, grupo_p.horarios_totalizador) INTO STRICT _ora2pg_r;
 t_objeto_retorno_w := _ora2pg_r.t_objeto_row_p; grupo_p.horarios_totalizador := _ora2pg_r.horarios_p;
	end if;
SELECT * FROM apap_pck.processar_totais(t_objeto_retorno_w, grupo_p.horarios_totalizador) INTO STRICT _ora2pg_r;
 t_objeto_retorno_w := _ora2pg_r.t_objeto_row_p; grupo_p.horarios_totalizador := _ora2pg_r.horarios_p;

return;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION apap_pck.obter_grupo ( grupo_p INOUT dadosGrupo_tp) FROM PUBLIC;
