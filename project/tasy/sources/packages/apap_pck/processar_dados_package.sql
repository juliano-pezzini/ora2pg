-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE apap_pck.processar_dados ( t_objeto_row_p INOUT t_objeto_row, horarios_p INOUT vetor_horarios) AS $body$
DECLARE

qt_dias_w	bigint;
nr_hora_w	bigint;
vl_informacao_w	varchar(255);
BEGIN

for i in 1..horarios_p.count loop
	begin
	qt_dias_w	:= horarios_p[i].nr_dia;
	nr_hora_w	:= horarios_p[i].nr_hora;
	if (horarios_p[i](.vl_resultado IS NOT NULL AND .vl_resultado::text <> '')) then
		vl_informacao_w	:= horarios_p[i].vl_resultado;
		if (substr(vl_informacao_w,1,1) in ('.',',')) then
			vl_informacao_w	:= '0'||vl_informacao_w;
		end if;
	else
		vl_informacao_w	:= horarios_p[i].ds_resultado;
	end if;

	if (nr_hora_w IS NOT NULL AND nr_hora_w::text <> '') and (vl_informacao_w IS NOT NULL AND vl_informacao_w::text <> '') then
		case 	qt_dias_w
			when 1 then
				t_objeto_row_p := apap_pck.add_d1(nr_hora_w, vl_informacao_w, t_objeto_row_p);
			when 2 then
				t_objeto_row_p := apap_pck.add_d2(nr_hora_w, vl_informacao_w, t_objeto_row_p);
			when 3 then
				t_objeto_row_p := apap_pck.add_d3(nr_hora_w, vl_informacao_w, t_objeto_row_p);
			when 4 then
				t_objeto_row_p := apap_pck.add_d4(nr_hora_w, vl_informacao_w, t_objeto_row_p);
			when 5 then
				t_objeto_row_p := apap_pck.add_d5(nr_hora_w, vl_informacao_w, t_objeto_row_p);
			when 6 then
				t_objeto_row_p := apap_pck.add_d6(nr_hora_w, vl_informacao_w, t_objeto_row_p);
			when 7 then
				t_objeto_row_p := apap_pck.add_d7(nr_hora_w, vl_informacao_w, t_objeto_row_p);
			else
				nr_hora_w := nr_hora_w;
		end case;
	
	end if;
	
	end;
end loop;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE apap_pck.processar_dados ( t_objeto_row_p INOUT t_objeto_row, horarios_p INOUT vetor_horarios) FROM PUBLIC;
