-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION apap_pck.obter_informacao ( informacao_p INOUT dadosInformacao_tp) AS $body$
DECLARE

_ora2pg_r RECORD;
t_objeto_retorno_w	t_objeto_row;

BEGIN


t_objeto_retorno_w.ds_informacao		:= informacao_p.ds_informacao;
t_objeto_retorno_w.nr_seq_apap_grupo		:= informacao_p.nr_seq_apap_grupo;
t_objeto_retorno_w.nr_seq_informacao		:= informacao_p.nr_seq_informacao;
t_objeto_retorno_w.ie_maxima			:= informacao_p.ie_maxima;
t_objeto_retorno_w.ie_media			:= informacao_p.ie_media;
t_objeto_retorno_w.ie_minima			:= informacao_p.ie_minima;
t_objeto_retorno_w.ie_total			:= informacao_p.ie_total;
t_objeto_retorno_w.ie_grupo_informacao		:= 'I';
t_objeto_retorno_w.ie_grupo_inf			:= informacao_p.ie_grupo_inf;
t_objeto_retorno_w.nr_seq_inf			:= informacao_p.nr_seq_inf;
t_objeto_retorno_w.ds_unidade_medida		:= informacao_p.ds_unidade_medida;

if (informacao_p.ie_grafico = 'S') then
	t_objeto_retorno_w.ie_grafico	:= 'S';
else
	t_objeto_retorno_w.ie_grafico	:= null;
end if;

SELECT * FROM apap_pck.processar_dados(t_objeto_retorno_w, informacao_p.horarios) INTO STRICT _ora2pg_r;
 t_objeto_retorno_w := _ora2pg_r.t_objeto_row_p; informacao_p.horarios := _ora2pg_r.horarios_p;
SELECT * FROM apap_pck.processar_totais(t_objeto_retorno_w, informacao_p.horarios) INTO STRICT _ora2pg_r;
 t_objeto_retorno_w := _ora2pg_r.t_objeto_row_p; informacao_p.horarios := _ora2pg_r.horarios_p;
SELECT * FROM apap_pck.processar_dados_horarios_adic(t_objeto_retorno_w, informacao_p) INTO STRICT _ora2pg_r;
 t_objeto_retorno_w := _ora2pg_r.t_objeto_row_p; informacao_p := _ora2pg_r.informacao_p;


return;


END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION apap_pck.obter_informacao ( informacao_p INOUT dadosInformacao_tp) FROM PUBLIC;
