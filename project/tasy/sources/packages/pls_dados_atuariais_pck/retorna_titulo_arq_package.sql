-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_dados_atuariais_pck.retorna_titulo_arq ( campo_arquivo_p INOUT campo_arquivo) AS $body$
DECLARE

/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:	Monta os titulos dos campos

	Se algum campo nao possuir, nao sera retornado nenhum titulo.
		
-------------------------------------------------------------------------------------------------------------------

Locais de chamada direta: 
[X]  Objetos do dicionario [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatorios [ ] Outros:
-------------------------------------------------------------------------------------------------------------------

Pontos de atencao:

	
	
Alteracoes:
-------------------------------------------------------------------------------------------------------------------

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */

qt_titulo_inexistente_w	integer := 0;
ds_retorno_w		varchar(32000):= '';

BEGIN

if (campo_arquivo_p.ds_titulo.count > 0) then

	for i in campo_arquivo_p.ds_titulo.first..campo_arquivo_p.ds_titulo.last loop

		if (coalesce(campo_arquivo_p.ds_titulo(i)::text, '') = '') then
			
			qt_titulo_inexistente_w := qt_titulo_inexistente_w + 1;
		else
		
			ds_retorno_w := ds_retorno_w||campo_arquivo_p.ds_titulo(i)||campo_arquivo_p.ie_separador(i);
		end if;

	end loop;
end if;

-- se possuir algum campo sem titulo, entao deve retornar null

if (qt_titulo_inexistente_w > 0) then

	ds_retorno_w := '';
end if;

return;


END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_dados_atuariais_pck.retorna_titulo_arq ( campo_arquivo_p INOUT campo_arquivo) FROM PUBLIC;
