-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE ctb_sped_ecd_pck.iniciar_totalizadores_blocos (regra_sped_p INOUT ctb_sped_ecd_pck.regra_sped) AS $body$
DECLARE


bloco_ecd CURSOR FOR			
	SELECT  x.vl_dominio cd_registro
	from	valor_dominio x
	where	x.cd_dominio	= 3508 
	order by x.nr_seq_apresent;	

type vetor_bloco_ecd is table of bloco_ecd%rowtype index by integer;
v_blocos_ecd_w    vetor_bloco_ecd;
	
BEGIN
open bloco_ecd;
	loop fetch bloco_ecd bulk collect into v_blocos_ecd_w limit 1000;
		EXIT WHEN NOT FOUND; /* apply on bloco_ecd */
		for i in v_blocos_ecd_w.first .. v_blocos_ecd_w.last loop
		regra_sped_p.contador_registro(v_blocos_ecd_w[i].cd_registro):= 0;
		end loop;
	end loop;
close bloco_ecd;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ctb_sped_ecd_pck.iniciar_totalizadores_blocos (regra_sped_p INOUT ctb_sped_ecd_pck.regra_sped) FROM PUBLIC;
