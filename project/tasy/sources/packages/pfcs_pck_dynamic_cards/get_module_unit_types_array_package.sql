-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pfcs_pck_dynamic_cards.get_module_unit_types_array (nr_seq_dynamic_module_p bigint) RETURNS STRARRAY AS $body$
DECLARE

        unit_classif_array_w    strarray := strarray();
        pr_occupancy_w          pfcs_module_overview.pr_occupancy%type;

BEGIN
        begin
            select case cd_unit_classification
                when PFCS_PCK_CONSTANTS.CD_UNIT_TYPE_TCU  then PFCS_PCK_CONSTANTS.CD_TCU
                when PFCS_PCK_CONSTANTS.CD_UNIT_TYPE_ED   then PFCS_PCK_CONSTANTS.CD_ED
                when PFCS_PCK_CONSTANTS.CD_UNIT_TYPE_ACU  then PFCS_PCK_CONSTANTS.CD_ACU
                when PFCS_PCK_CONSTANTS.CD_UNIT_TYPE_ICU  then PFCS_PCK_CONSTANTS.CD_ICU
                when PFCS_PCK_CONSTANTS.CD_UNIT_TYPE_HAH  then PFCS_PCK_CONSTANTS.CD_HAH
                else cd_unit_classification
            end cd_unit_classification
            bulk collect into STRICT unit_classif_array_w
            from  pfcs_module_occupancy
            where nr_seq_dynamic_module = nr_seq_dynamic_module_p;

            exception when no_data_found then
                unit_classif_array_w :=  null;
        end;
        return unit_classif_array_w;
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 IMMUTABLE;
-- REVOKE ALL ON FUNCTION pfcs_pck_dynamic_cards.get_module_unit_types_array (nr_seq_dynamic_module_p bigint) FROM PUBLIC;
