-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';


--fis_gravar_refatoracao_nf
CREATE OR REPLACE PROCEDURE fis_refatoracao_nf_pck.fis_gravar_ref_nf ( nr_seq_nf_origem_p nota_fiscal.nr_sequencia%type, nr_interno_conta_p conta_paciente.nr_interno_conta%type, nr_seq_protocolo_p protocolo_convenio.nr_seq_protocolo%type, nr_seq_far_venda_p far_venda.nr_sequencia%type, cd_pessoa_fisica_p pessoa_fisica.cd_pessoa_fisica%type, cd_pessoa_juridica_p pessoa_juridica.cd_cgc%type, cd_condicao_pagamento_p text, cd_uso_cfdi_p text, ie_refatorar_baixa_p text, ie_refatorar_adiant_p text, cd_meio_pagamento_p text, nm_usuario_p text, nr_seq_refat_nf_p INOUT fis_refatoracao_nf.nr_sequencia%type) AS $body$
DECLARE


nr_seq_refat_nf_w	fis_refatoracao_nf.nr_sequencia%type;
					

BEGIN

select 	nextval('fis_refatoracao_nf_seq')
into STRICT	nr_seq_refat_nf_w
;

insert into fis_refatoracao_nf(	nr_sequencia,
					dt_atualizacao,
					dt_atualizacao_nrec,
					nm_usuario,
					nm_usuario_nrec,
					nr_seq_nf_princ_old,
					nr_interno_conta,
					nr_seq_protocolo,
					nr_seq_far_venda,
					cd_pessoa_fisica,
					cd_cgc,
					cd_condicao_pagamento,
					cd_uso_cfdi,
					ie_refatora_baixa_tit,
					ie_refatora_adiant,
					cd_tipo_recebimento)
SELECT	nr_seq_refat_nf_w,
	clock_timestamp(),
	clock_timestamp(),
	nm_usuario_p,
	nm_usuario_p,
	nr_seq_nf_origem_p,
	nr_interno_conta_p,
	nr_seq_protocolo_p,
	nr_seq_far_venda_p,
	cd_pessoa_fisica_p,
	cd_pessoa_juridica_p,
	cd_condicao_pagamento_p,
	cd_uso_cfdi_p,		
	ie_refatorar_baixa_p,
	ie_refatorar_adiant_p,
	cd_meio_pagamento_p
;	



commit;

nr_seq_refat_nf_p:=	nr_seq_refat_nf_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE fis_refatoracao_nf_pck.fis_gravar_ref_nf ( nr_seq_nf_origem_p nota_fiscal.nr_sequencia%type, nr_interno_conta_p conta_paciente.nr_interno_conta%type, nr_seq_protocolo_p protocolo_convenio.nr_seq_protocolo%type, nr_seq_far_venda_p far_venda.nr_sequencia%type, cd_pessoa_fisica_p pessoa_fisica.cd_pessoa_fisica%type, cd_pessoa_juridica_p pessoa_juridica.cd_cgc%type, cd_condicao_pagamento_p text, cd_uso_cfdi_p text, ie_refatorar_baixa_p text, ie_refatorar_adiant_p text, cd_meio_pagamento_p text, nm_usuario_p text, nr_seq_refat_nf_p INOUT fis_refatoracao_nf.nr_sequencia%type) FROM PUBLIC;
