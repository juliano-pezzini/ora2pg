-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE conciliar_integr_resp_rec_pck.conciliar_itens () AS $body$
DECLARE

current_setting('conciliar_integr_resp_rec_pck.i')::integer integer;
k integer;
y integer;
x integer;
IE_SETOR	boolean;
IE_FUNCAO	boolean;
IE_DT_ATEND	boolean;
IE_DT_CONTA	boolean;
IE_VL_PROC	boolean;
IE_QT_PROC	boolean;

BEGIN
PERFORM set_config('conciliar_integr_resp_rec_pck.i', 0, false);
k := 0;
y := 0;
x := 0;
if (current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v.count > 0) then

	for x in current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v.first .. current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v.last loop

		if (current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v[x].ie_status = 'C') then

			if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v.count > 0) then

				for current_setting('conciliar_integr_resp_rec_pck.i')::integer in current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v.first .. current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v.last loop

					if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status = 'P') and (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).NR_SEQ_RES_REC_GUIA = current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v[x].nr_Sequencia)  THEN



						if (current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v.count > 0) then

							for k in current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v.first ..campos_proced_conta_w.last loop

								IE_SETOR	:=	false;
								IE_FUNCAO	:= 	false;
								IE_DT_ATEND	:= 	false;
								IE_DT_CONTA	:=	false;
								IE_VL_PROC	:=	false;
								IE_QT_PROC	:= 	false;

								if (current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v[x].nr_interno_conta = 	current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_interno_conta) and (current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v[x].cd_autorizacao   = 	current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_doc_convenio) and
									(
										(current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_procedimento = 	current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_procedimento) 	
										or (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_procedimento = 	current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_procedimento_tuss)
										or (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_procedimento = 	current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_procedimento_convenio) 
									)
									and 	coalesce(current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_conciliado, 'N') = 'N'
									and	current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status <> 'C'
									then

									if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec = current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_setor_atendimento) then
										IE_SETOR := true;
									end if;
									-- Tratamento para separar os valores dos participantes do procedimento	

									if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_funcao = current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_funcao_medico) then
										IE_FUNCAO := true;
									end if;	

									if (trunc(current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).dt_realizacao,'dd') = trunc(current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].dt_atendimento,'dd')) then
										IE_DT_ATEND := true;
									end if;

									if (trunc(current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).dt_realizacao,'dd') = trunc(current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].dt_conta,'dd')) then
										IE_DT_CONTA := true;
									end if;

									if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).vl_informado  = current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].vl_procedimento) or (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).vl_informado = current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].vl_medico) then	
										IE_VL_PROC := true;
									end if;

									/*participante com mesmo valor e data*/


									if (ie_funcao) and (ie_vl_proc) and (ie_dt_atend or ie_dt_conta) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_Setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_conciliado := 'S';
									/*participante com mesmo valor*/


									elsif (ie_funcao) and (ie_vl_proc) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status  :='C';
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_partic	 :=  current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_seq_partic;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_Setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_conciliado := 'S';
									/*participante com mesma data*/


									elsif (ie_funcao) and (ie_dt_atend or ie_dt_conta) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_partic	 :=  current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_seq_partic;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_Setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_conciliado := 'S';
									/*Mesma data de procedimento e valor*/


									elsif	((ie_dt_atend or ie_dt_conta) and ie_vl_proc) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_Setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_conciliado := 'S';
									/*Mesmo valor de procedimento*/


									elsif (ie_vl_proc) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_Setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_conciliado := 'S';
									/*Mesma data de procedimento*/


									elsif (ie_dt_atend or ie_dt_conta) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].cd_Setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_proced_conta_w')::campos_proced_conta_v[k].ie_conciliado := 'S';
									else
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := 0;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'I'; --Item nao encontrado na conta paciente
									end if;
								end if;
							end loop;
						end if;	


						if (current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v.count > 0) then

							for k in current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v.first ..campos_material_conta_w.last loop

								IE_SETOR	:=	false;
								IE_DT_ATEND	:= 	false;
								IE_DT_CONTA	:=	false;
								IE_VL_PROC	:=	false;
								IE_QT_PROC	:= 	false;

								if	((current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v[x].nr_interno_conta = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].nr_interno_conta) and (current_setting('conciliar_integr_resp_rec_pck.campos_guia_w')::campos_guia_v[x].cd_autorizacao   = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].nr_doc_convenio) and
									(
									(current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_procedimento = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_material_tiss) or (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_procedimento = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_material_tuss) or (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_procedimento = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_material_convenio)
									)
									and coalesce(current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].ie_conciliado, 'N') = 'N')
									and current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status <> 'C'
									then
									if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_setor_atendimento) then
										IE_SETOR := true;
									end if;


									if (trunc(current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).dt_realizacao,'dd') = trunc(current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].dt_atendimento,'dd')) then
										IE_DT_ATEND := true;
									end if;

									if (trunc(current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).dt_realizacao,'dd') = trunc(current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].dt_conta,'dd')) then
										IE_DT_CONTA := true;
									end if;

									if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).vl_informado  = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].vl_material) or (dividir(current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).vl_informado,current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).qt_executada)  = current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].vl_material)then	
										IE_VL_PROC := true;
									end if;

									/*mesmo valor e data*/


									if (ie_vl_proc) and (ie_dt_atend or ie_dt_conta) and (ie_setor) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_matpaci := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].ie_conciliado := 'S';
									/*participante com mesma data*/


									elsif (ie_dt_atend or ie_dt_conta) and (ie_setor) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_matpaci := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].ie_conciliado := 'S';
									elsif (ie_dt_atend or ie_dt_conta) and (ie_vl_proc) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_matpaci := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].ie_conciliado := 'S';
									elsif (ie_dt_atend or ie_dt_conta)  then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_matpaci := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].ie_conciliado := 'S';
									/*mesmo valor*/


									elsif (ie_vl_proc) then
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_matpaci := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].nr_sequencia;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).cd_setor_exec := current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].cd_setor_atendimento;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'C';
										current_setting('conciliar_integr_resp_rec_pck.campos_material_conta_w')::campos_material_conta_v[k].ie_conciliado := 'S';
									else
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_matpaci := 0;
										current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'I'; --Item nao encontrado na conta paciente

									end if;
								end if;
							end loop;
						end if;	

						if (current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status = 'P') then

							current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_matpaci := 0;
							current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).nr_seq_propaci := 0;
							current_setting('conciliar_integr_resp_rec_pck.campos_itens_w')::campos_itens_v(current_setting('conciliar_integr_resp_rec_pck.i')::integer).ie_status := 'I'; --Item nao encontrado na conta paciente

						end if;

					end if;


				end loop;
			end if;
		end if;
	end loop;
end if;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE conciliar_integr_resp_rec_pck.conciliar_itens () FROM PUBLIC;
