-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE ajusta_relatorio_swing_pck.armazena_parametros_sql (ds_comando_p text,ar_nm_parametros_sql_p INOUT myArray,ie_upper_param_p boolean default true) AS $body$
DECLARE

	ds_comando_w 		varchar(10000);
	nm_param_w		varchar(4000);
	pos_w			bigint;
	ar_nm_parametros_w	myArray;
	ds_caracter_w		varchar(1);
	contador_w		bigint 	:= 1;
	caracteres_validos_w	varchar(60)  :='abcdefghijklmnopqrstuvxywzABCDEFGHIJKLMNOPRQSTUVXYWZ_';
	ie_valido_w		boolean;
	
BEGIN
		ds_comando_w := ds_comando_p;
		pos_w := position(':' in ds_comando_w);
		while( pos_w > 0 ) and ( contador_w < 300 ) loop /*Variavel de controle para evitar LOOP*/
			ds_comando_w 	:= substr(ds_comando_w,pos_w+1,length(ds_comando_w));
			nm_param_w 	:= '';
			ie_valido_w	:= true;
			pos_w 		:= 1;
			while( ie_valido_w ) and ( pos_w < length(ds_comando_p)) loop  /*Variavel de controle para evitar LOOP*/
				ds_caracter_w := substr(ds_comando_w,pos_w,1);
				if ( position(ds_caracter_w in caracteres_validos_w) > 0 ) then
					nm_param_w := nm_param_w || ds_caracter_w;
				else
					ie_valido_w := false;
				end if;
				pos_w := pos_w + 1;
			end loop;
			if ( position('_' in nm_param_w) > 0 ) then
				if (ie_upper_param_p) then
					ar_nm_parametros_sql_p(ar_nm_parametros_sql_p.count+1).nm := upper(nm_param_w);
				else
					ar_nm_parametros_sql_p(ar_nm_parametros_sql_p.count+1).nm := nm_param_w;
				end if;
			end if;

			ds_comando_w := substr(ds_comando_w,pos_w,length(ds_comando_w));
			pos_w := position(':' in ds_comando_w);
			contador_w := contador_w + 1;
		end loop;
	END;


$body$
LANGUAGE PLPGSQL
;
-- REVOKE ALL ON PROCEDURE ajusta_relatorio_swing_pck.armazena_parametros_sql (ds_comando_p text,ar_nm_parametros_sql_p INOUT myArray,ie_upper_param_p boolean default true) FROM PUBLIC;
