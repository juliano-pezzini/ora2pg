-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

-- This package is responsible for cleaning all the data related to the PFCS
    -- It was created for V and V use
    -- DISCLAIMER: USE IT AT YOUR OWN RISK!
    


CREATE OR REPLACE PROCEDURE pfcs_pck_db_utils.reset_pfcs_data (cd_establishment_p bigint, nm_module_p text) AS $body$
BEGIN
        EXECUTE 'truncate table pfcs_patient_identifier';
        if (cd_establishment_p IS NOT NULL AND cd_establishment_p::text <> '') then
            CALL pfcs_pck_db_utils.remove_establishment_data(cd_establishment_p);
            CALL pfcs_pck_db_utils.insert_establishment_settings(cd_establishment_p);
        end if;
        if (nm_module_p IS NOT NULL AND nm_module_p::text <> '') then
            CALL pfcs_pck_db_utils.remove_module_settings(nm_module_p);
        end if;
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pfcs_pck_db_utils.reset_pfcs_data (cd_establishment_p bigint, nm_module_p text) FROM PUBLIC;
