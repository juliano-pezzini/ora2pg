-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION vent_bundle_report_pck.get_ie_sup_rx (nr_atendimento_p bigint) RETURNS varchar AS $body$
DECLARE


	ds_retorno_w		varchar(15) := 'N';
	cd_cla_mat_sup_rx_w	varchar(255) := '63,240,209,12393,12364';
	qt_reg_w		bigint;

	
BEGIN
		begin
			select	count(1)
			into STRICT	qt_reg_w
			from	prescr_mat_alteracao pma,
				prescr_material pm,
				material m
			where	pm.nr_prescricao = pma.nr_prescricao
			and	m.cd_material = pm.cd_material
			and	(m.cd_medicamento IS NOT NULL AND m.cd_medicamento::text <> '')
			and	pma.nr_atendimento = nr_atendimento_p
			and	obter_se_contido(m.cd_classe_material, cd_cla_mat_sup_rx_w) = 'S';
		exception
		when no_data_found then
			qt_reg_w := 0;
		end;

	if (qt_reg_w > 0) then
		begin
		ds_retorno_w := 'Y';
		end;
	end if;

	return	ds_retorno_w;

	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION vent_bundle_report_pck.get_ie_sup_rx (nr_atendimento_p bigint) FROM PUBLIC;
