-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION doc_export_auto_pkg.linearize_query (DS_QUERY_P RELATORIO.DS_SQL%TYPE) RETURNS RELATORIO_DINAMICO.DS_SQL%TYPE AS $body$
DECLARE


    DS_QUERY_W RELATORIO_DINAMICO.DS_SQL%TYPE;


BEGIN

    DS_QUERY_W := NULL;

    IF (DS_QUERY_P IS NOT NULL AND DS_QUERY_P::text <> '') THEN

      DS_QUERY_W := translate(DS_QUERY_P, 'A'||chr(9)||chr(10)||chr(13), 'A   ');
      DS_QUERY_W := replace(DS_QUERY_W, '(', ' ( ');
      DS_QUERY_W := replace(DS_QUERY_W, ')', ' ) ');
      DS_QUERY_W := replace(DS_QUERY_W, ':', ' :');
      DS_QUERY_W := trim(both DS_QUERY_W);
      DS_QUERY_W := regexp_replace(DS_QUERY_W, '( ){2,}', ' ');
      DS_QUERY_W := trim(both rtrim(DS_QUERY_W, '/'));
      DS_QUERY_W := trim(both rtrim(DS_QUERY_W, ';'));

      IF doc_export_auto_pkg.get_is_query(DS_QUERY_W) = 'N' THEN
        DS_QUERY_W := NULL;
      END IF;

    END IF;

    RETURN DS_QUERY_W;

  END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION doc_export_auto_pkg.linearize_query (DS_QUERY_P RELATORIO.DS_SQL%TYPE) FROM PUBLIC;
