-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

---------------------------------------------------------------

  --

  -- Load product tables from legacy Tasy tables.

  --

  ---------------------------------------------------------------



CREATE OR REPLACE PROCEDURE product_mgmt_pck.load_product_tables () AS $body$
BEGIN
    insert into product(product_name,
       is_product_installed,
       last_service_pack_applied,
       nm_usuario,
       dt_atualizacao)
      SELECT t.cd_aplicacao_tasy, 'N', 0, t.nm_usuario, t.dt_atualizacao
        from aplicacao_tasy t;

    insert into product_version(product_name,
       product_version,
       is_version_active,
       version_build_date,
       nm_usuario,
       dt_atualizacao)
      SELECT t.cd_aplicacao_tasy,
             t.cd_versao,
             'N',
             t.dt_versao,
             t.nm_usuario,
             t.dt_atualizacao
        from aplicacao_tasy_versao t;

    commit;
  end;

  ---------------------------------------------------------------

  --

  -- Add a new product.

  --

  ---------------------------------------------------------------


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE product_mgmt_pck.load_product_tables () FROM PUBLIC;
