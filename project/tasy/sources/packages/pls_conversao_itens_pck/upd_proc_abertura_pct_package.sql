-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_conversao_itens_pck.upd_proc_abertura_pct ( tb_upd_proc_p INOUT table_atualiza_proc_abert_pct, nm_usuario_p usuario.nm_usuario%type) AS $body$
BEGIN

	if (tb_upd_proc_p.nr_seq_proc_pct.count > 0) then
	
		forall i in tb_upd_proc_p.nr_seq_proc_pct.first..tb_upd_proc_p.nr_seq_proc_pct.last
			update	pls_conta_proc
			set	qt_procedimento_imp 	= tb_upd_proc_p.qt_procedimento_imp(i),
				vl_unitario_imp		= tb_upd_proc_p.vl_unitario_imp(i),
				vl_procedimento_imp	= tb_upd_proc_p.vl_procedimento_imp(i),
				vl_procedimento		= tb_upd_proc_p.vl_procedimento(i)
			where   nr_seq_conta            = tb_upd_proc_p.nr_seq_conta(i)
			and     cd_procedimento         = tb_upd_proc_p.cd_procedimento(i)
			and     ie_origem_proced        = tb_upd_proc_p.ie_origem_proced(i)
			and     nr_seq_regra_pct_fat    = tb_upd_proc_p.nr_seq_regra_pct_fat(i)
			and	nr_seq_proc_pct		= tb_upd_proc_p.nr_seq_proc_pct(i);
		commit;
	end if;

	tb_upd_proc_p.qt_procedimento_imp.delete;	
	tb_upd_proc_p.vl_unitario_imp.delete;		
	tb_upd_proc_p.vl_procedimento_imp.delete;	
	tb_upd_proc_p.vl_procedimento.delete;		
	tb_upd_proc_p.nr_seq_conta.delete;
	tb_upd_proc_p.cd_procedimento.delete;
	tb_upd_proc_p.ie_origem_proced.delete;
	tb_upd_proc_p.nr_seq_regra_pct_fat.delete;
        tb_upd_proc_p.nr_seq_proc_pct.delete;		

end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_conversao_itens_pck.upd_proc_abertura_pct ( tb_upd_proc_p INOUT table_atualiza_proc_abert_pct, nm_usuario_p usuario.nm_usuario%type) FROM PUBLIC;
