-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';


/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE PROCEDURE pls_regra_qtd_execucao_pck.pls_gravar_tx_qtd_exec_proc ( nr_seq_conta_proc_p dbms_sql.number_table, tx_procedimento_p dbms_sql.number_table, tx_medico_p dbms_sql.number_table, tx_custo_operacional_p dbms_sql.number_table, tx_material_p dbms_sql.number_table, tx_anestesista_p dbms_sql.number_table, tx_auxiliares_p dbms_sql.number_table, ie_via_acesso_p dbms_sql.varchar2_table) AS $body$
DECLARE

/* ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade: Esta procedure é responsável por gravar as novas taxas calculadas de acordo com a regra de quantidade de execução.
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
BEGIN

if (nr_seq_conta_proc_p.count > 0) then
  forall i in nr_seq_conta_proc_p.first..nr_seq_conta_proc_p.last
    update  pls_conta_proc
    set  tx_item      = tx_procedimento_p(i),
      tx_medico    = tx_medico_p(i),
      tx_custo_operacional  = tx_custo_operacional_p(i),
      tx_material    = tx_material_p(i),
      tx_anestesista    = tx_anestesista_p(i),
      tx_auxiliares    = tx_auxiliares_p(i),
      ie_via_acesso    = ie_via_acesso_p(i)
    where  nr_sequencia = nr_seq_conta_proc_p(i);
end if;

commit;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_regra_qtd_execucao_pck.pls_gravar_tx_qtd_exec_proc ( nr_seq_conta_proc_p dbms_sql.number_table, tx_procedimento_p dbms_sql.number_table, tx_medico_p dbms_sql.number_table, tx_custo_operacional_p dbms_sql.number_table, tx_material_p dbms_sql.number_table, tx_anestesista_p dbms_sql.number_table, tx_auxiliares_p dbms_sql.number_table, ie_via_acesso_p dbms_sql.varchar2_table) FROM PUBLIC;
