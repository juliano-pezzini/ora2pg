-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_filtro_regra_preco_cta_pck.obter_restricao_protocolo ( ie_origem_protocolo_p pls_cp_cta_filtro_prot.ie_origem_protocolo%type, cd_versao_tiss_p pls_cp_cta_filtro_prot.cd_versao_tiss%type, nr_seq_congenere_p pls_cp_cta_filtro_prot.nr_seq_congenere%type, valor_bind_p INOUT sql_pck.t_dado_bind) AS $body$
DECLARE


dados_restricao_w	varchar(2000);


BEGIN
-- Inicializar o retorno

dados_restricao_w := null;

-- Apresentacao

if (ie_origem_protocolo_p IS NOT NULL AND ie_origem_protocolo_p::text <> '') then
	dados_restricao_w :=	dados_restricao_w || '	and	' || pls_filtro_regra_preco_cta_pck.obter_alias_tabela('protocolo') || '.ie_origem_protocolo = :ie_origem_protocolo_pc ' || pls_util_pck.enter_w;
	valor_bind_p := sql_pck.bind_variable(	':ie_origem_protocolo_pc', ie_origem_protocolo_p, valor_bind_p);
end if;

-- versao TISS

if (cd_versao_tiss_p IS NOT NULL AND cd_versao_tiss_p::text <> '') then
	dados_restricao_w :=	dados_restricao_w || '	and	' || pls_filtro_regra_preco_cta_pck.obter_alias_tabela('protocolo') || '.cd_versao_tiss = :cd_versao_tiss_pc ' || pls_util_pck.enter_w;
	valor_bind_p := sql_pck.bind_variable(	':cd_versao_tiss_pc', cd_versao_tiss_p, valor_bind_p);
end if;

-- congenere do protocolo

if (nr_seq_congenere_p IS NOT NULL AND nr_seq_congenere_p::text <> '') then
	dados_restricao_w :=	dados_restricao_w || '	and	' || pls_filtro_regra_preco_cta_pck.obter_alias_tabela('protocolo') || '.nr_seq_congenere = :nr_seq_congenere_pc ' || pls_util_pck.enter_w;
	valor_bind_p := sql_pck.bind_variable(	':nr_seq_congenere_pc', nr_seq_congenere_p, valor_bind_p);
end if;

return;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_filtro_regra_preco_cta_pck.obter_restricao_protocolo ( ie_origem_protocolo_p pls_cp_cta_filtro_prot.ie_origem_protocolo%type, cd_versao_tiss_p pls_cp_cta_filtro_prot.cd_versao_tiss%type, nr_seq_congenere_p pls_cp_cta_filtro_prot.nr_seq_congenere%type, valor_bind_p INOUT sql_pck.t_dado_bind) FROM PUBLIC;
