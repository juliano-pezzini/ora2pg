-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE tiss_send_document_pck.execute_insert (nm_user_p usuario.nm_usuario%type, nr_protocol_p tiss_envio_documento.nr_protocolo%type, nr_batch_p tiss_envio_documento.nr_lote%type, nr_provider_form_p tiss_envio_documento.nr_guia_prestador%type, nr_hpms_form_p tiss_envio_documento.nr_guia_operadora%type, nr_document_p tiss_envio_documento.nr_documento%type, ie_form_type_p tiss_envio_documento.ie_natureza_guia%type, ie_doc_format_p tiss_envio_documento.ie_formato_documento%type, nr_seq_ref_p tiss_envio_documento.nr_seq_referencia_item%type, ie_doc_type_p tiss_envio_documento.ie_tipo_documento%type, ds_obs_p tiss_envio_documento.ds_observacao%type, nr_seq_auth_attach_p tiss_envio_documento.nr_seq_autor_conv_anexo%type, nr_seq_prot_attach_p tiss_envio_documento.nr_seq_protoc_conv_anexo%type, result_seq_p INOUT tiss_envio_documento.nr_sequencia%type, nr_seq_lote_hist_anexo_p tiss_envio_documento.nr_seq_lote_hist_anexo%TYPE DEFAULT NULL) AS $body$
DECLARE


result_seq_w	tiss_envio_documento.nr_sequencia%type;


BEGIN

	select 	nextval('tiss_envio_documento_seq')
	into STRICT	result_seq_w
	;

	insert into tiss_envio_documento( nr_sequencia, dt_atualizacao, nm_usuario,
				dt_atualizacao_nrec, nm_usuario_nrec, nr_lote,
				nr_protocolo, nr_guia_prestador, nr_guia_operadora,
				nr_documento, ie_natureza_guia, ie_formato_documento,
				nr_seq_referencia_item, ds_documento, ie_tipo_documento,
				ds_observacao, nr_seq_protoc_conv_anexo, nr_seq_autor_conv_anexo, nr_seq_lote_hist_anexo)
	values (result_seq_w, clock_timestamp(), nm_user_p,
				clock_timestamp(), nm_user_p, nr_batch_p,
				nr_protocol_p, nr_provider_form_p, nr_hpms_form_p,
				nr_document_p, ie_form_type_p, ie_doc_format_p,
				nr_seq_ref_p, null, ie_doc_type_p,
				ds_obs_p, nr_seq_prot_attach_p, nr_seq_auth_attach_p, nr_seq_lote_hist_anexo_p);

	commit;

	result_seq_p := result_seq_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tiss_send_document_pck.execute_insert (nm_user_p usuario.nm_usuario%type, nr_protocol_p tiss_envio_documento.nr_protocolo%type, nr_batch_p tiss_envio_documento.nr_lote%type, nr_provider_form_p tiss_envio_documento.nr_guia_prestador%type, nr_hpms_form_p tiss_envio_documento.nr_guia_operadora%type, nr_document_p tiss_envio_documento.nr_documento%type, ie_form_type_p tiss_envio_documento.ie_natureza_guia%type, ie_doc_format_p tiss_envio_documento.ie_formato_documento%type, nr_seq_ref_p tiss_envio_documento.nr_seq_referencia_item%type, ie_doc_type_p tiss_envio_documento.ie_tipo_documento%type, ds_obs_p tiss_envio_documento.ds_observacao%type, nr_seq_auth_attach_p tiss_envio_documento.nr_seq_autor_conv_anexo%type, nr_seq_prot_attach_p tiss_envio_documento.nr_seq_protoc_conv_anexo%type, result_seq_p INOUT tiss_envio_documento.nr_sequencia%type, nr_seq_lote_hist_anexo_p tiss_envio_documento.nr_seq_lote_hist_anexo%TYPE DEFAULT NULL) FROM PUBLIC;
