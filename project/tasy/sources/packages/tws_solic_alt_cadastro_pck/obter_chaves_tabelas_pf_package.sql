-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE tws_solic_alt_cadastro_pck.obter_chaves_tabelas_pf ( nm_tabela_p tabela_sistema.nm_tabela%type, cd_pessoa_fisica_p pessoa_fisica.cd_pessoa_fisica%type, ie_tipo_complemento_p compl_pessoa_fisica.ie_tipo_complemento%type, ds_chave_simples_p INOUT tasy_solic_alt_campo.ds_chave_simples%type, ds_chave_composta_p INOUT tasy_solic_alt_campo.ds_chave_composta%type) AS $body$
DECLARE


/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:
Obter as chaves simples e composta para a solicitacao de alteracao dos dados da pessoa fisica.
-------------------------------------------------------------------------------------------------------------------
Locais de chamada direta: 
[  ]  Objetos do dicionario [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatorios [ x] Outros: TWS
 ------------------------------------------------------------------------------------------------------------------
Pontos de atencao:
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
ds_chave_simples_w	tasy_solic_alt_campo.ds_chave_simples%type;
ds_chave_composta_w	tasy_solic_alt_campo.ds_chave_composta%type;


BEGIN

if (upper(nm_tabela_p)	= 'PESSOA_FISICA') then
	ds_chave_simples_w 	:= cd_pessoa_fisica_p;
elsif (upper(nm_tabela_p)	= 'COMPL_PESSOA_FISICA') then
	ds_chave_composta_w 	:= 'CD_PESSOA_FISICA='||cd_pessoa_fisica_p||'#@#@IE_TIPO_COMPLEMENTO='||coalesce(ie_tipo_complemento_p,1);
end if;

ds_chave_simples_p	:= ds_chave_simples_w;
ds_chave_composta_p	:= ds_chave_composta_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tws_solic_alt_cadastro_pck.obter_chaves_tabelas_pf ( nm_tabela_p tabela_sistema.nm_tabela%type, cd_pessoa_fisica_p pessoa_fisica.cd_pessoa_fisica%type, ie_tipo_complemento_p compl_pessoa_fisica.ie_tipo_complemento%type, ds_chave_simples_p INOUT tasy_solic_alt_campo.ds_chave_simples%type, ds_chave_composta_p INOUT tasy_solic_alt_campo.ds_chave_composta%type) FROM PUBLIC;
