-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_mensalidade_util_pck.carregar_parametros (cd_estabelecimento_p estabelecimento.cd_estabelecimento%type) AS $body$
BEGIN

begin
select	coalesce(qt_meses_benef_rescindido,12),
	qt_dias_venc_primeira_mens,
	coalesce(ie_geracao_nota_titulo,'NT'),
	coalesce(ie_geracao_nota_titulo_pf,'NT'),
	coalesce(ie_gerar_coparticipacao_a700,'N'),
	coalesce(ie_ref_copartic_mens,'N'),
	coalesce(ie_pos_estab_faturamento,'N'),
	coalesce(ie_pos_estab_fat_resc,'M'),
	ie_cobranca_pos,
	coalesce(ie_copartic_prot_sem_pag,'N'),
	coalesce(ie_mes_cobranca_reaj,'P'),
	coalesce(ie_mes_cobranca_reaj_reg,'P'),
	coalesce(ie_data_base_proporcional,'U'),
	coalesce(ie_gerar_pos_estab_reembolso,'N'),
	coalesce(ie_destacar_reajuste_sca,'N'),
	coalesce(ie_reajuste_faixa_etaria,'N'),
	coalesce(ie_data_ref_reaj_adaptado,'A'),
	coalesce(qt_idade_limite,999),
	coalesce(qt_tempo_limite,999),
	coalesce(ie_reaj_idade_limite_pre,'S'),
	coalesce(qt_parcelas_meses_anteriores,4),
	coalesce(ie_gerar_coparticipacao,'A'),
	coalesce(ie_copartic_mens_mes_ant,'N'),
	coalesce(ie_origem_titulo,3),
	coalesce(ie_mens_prop_pce,'N'),
	coalesce(ie_gerar_copart_congenere,'N'),
	coalesce(ie_reaj_retro_benef_resc,'N'),
	coalesce(ie_gerar_copartic_rec_glosa,'N'),
	coalesce(ie_att_cobertura_reativacao,'N'),
	coalesce(ie_consis_inf_fin_pag,'N'),
	coalesce(ie_susp_mens_solic_resc,'N'),
	coalesce(ie_mens_adaptacao_retro,'N'),
	coalesce(ie_reativacao_adesao_mens,'N'),
	coalesce(ie_mens_cobrar_carteira_ant, 'N'),
	coalesce(qt_dias_venc_mens, 0),
	coalesce(ie_gerar_tributo_nf_mens, 'S'),
	coalesce(ie_reajuste_fx_sca, 'N'),
	coalesce(ie_remido_sinistralidade_reaj, 'N')
into STRICT	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.qt_meses_benef_rescindido,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.qt_dias_venc_primeira_mens,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_geracao_nota_titulo,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_geracao_nota_titulo_pf,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_gerar_coparticipacao_a700,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_ref_copartic_mens,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_pos_estab_faturamento,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_pos_estab_fat_resc,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_cobranca_pos,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_copartic_prot_sem_pag,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_mes_cobranca_reaj,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_mes_cobranca_reaj_reg,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_data_base_proporcional,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_gerar_pos_estab_reembolso,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_destacar_reajuste_sca,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_reajuste_faixa_etaria,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_data_ref_reaj_adaptado,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.qt_idade_limite,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.qt_tempo_limite,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_reaj_idade_limite_pre,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.qt_parcelas_meses_anteriores,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_gerar_coparticipacao,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_copartic_mens_mes_ant,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_origem_titulo,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_mens_prop_pce,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_gerar_copart_congenere,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_reaj_retro_benef_resc,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_gerar_copartic_rec_glosa,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_att_cobertura_reativacao,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_consis_inf_fin_pag,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_susp_mens_solic_resc,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_mens_adaptacao_retro,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_reativacao_adesao_mens,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_mens_cobrar_carteira_ant,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.qt_dias_venc_mens,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_gerar_tributo_nf_mens,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_reajuste_fx_sca,
	current_setting('pls_mensalidade_util_pck.pls_parametros_w')::pls_parametros%rowtype.ie_remido_sinistralidade_reaj
from	pls_parametros
where	cd_estabelecimento	= cd_estabelecimento_p;

select	coalesce(ie_forma_pagamento,'P')
into STRICT	current_setting('pls_mensalidade_util_pck.pls_parametro_pagamento_w')::pls_parametro_pagamento%rowtype.ie_forma_pagamento
from	pls_parametro_pagamento
where	cd_estabelecimento	= cd_estabelecimento_p;

select	coalesce(ie_antecipacao_geracao,'N'),
	coalesce(ie_permite_gerar_mens_contab,'N')
into STRICT	current_setting('pls_mensalidade_util_pck.pls_parametro_contabil_w')::pls_parametro_contabil%rowtype.ie_antecipacao_geracao,
	current_setting('pls_mensalidade_util_pck.pls_parametro_contabil_w')::pls_parametro_contabil%rowtype.ie_permite_gerar_mens_contab
from	pls_parametro_contabil
where	cd_estabelecimento	= cd_estabelecimento_p;

exception
when others then
	CALL wheb_mensagem_pck.exibir_mensagem_abort(387642);
end;

begin
select	coalesce(max(ie_novo_pos_estab),'N')
into STRICT	current_setting('pls_mensalidade_util_pck.ie_novo_pos_estab_w')::pls_visible_false.ie_novo_pos_estab%type
from	pls_visible_false
where	cd_estabelecimento = cd_estabelecimento_p;
exception
when others then
	PERFORM set_config('pls_mensalidade_util_pck.ie_novo_pos_estab_w', 'N', false);
end;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_mensalidade_util_pck.carregar_parametros (cd_estabelecimento_p estabelecimento.cd_estabelecimento%type) FROM PUBLIC;
