-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_cartao_integracao_pck.buscar_parametros (cd_estabelecimento_p estabelecimento.cd_estabelecimento%type, parametros_p INOUT REFCURSOR) AS $body$
BEGIN
        open parametros_p for
            SELECT pcp.ds_merchant_id,
                   pcp.ds_merchant_key,
                   pcp.ds_api_url,
                   pcp.ds_api_query_url,
                   pcp.ds_ip_proxy,
                   pcp.ds_porta_proxy,
                   pcp.ds_usuario_proxy,
                   wheb_seguranca.decrypt(pcp.ds_senha_proxy) ds_senha_proxy
            --pcp.nm_usuario_auth_http,

            --pcp.ds_senha_auth_http

              from pls_cartao_parametro pcp
             where pcp.cd_estabelecimento = cd_estabelecimento_p
                or coalesce(pcp.cd_estabelecimento::text, '') = '';
    end;

    /*
    Funcoo para buscar a url no servico de tokenizacao de cartao de Credito
    %param cd_estabelecimento_p codigo do cd_estabelecimento
    %return retorna url do servico de tokenizacao de Cartao
    */


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_cartao_integracao_pck.buscar_parametros (cd_estabelecimento_p estabelecimento.cd_estabelecimento%type, parametros_p INOUT REFCURSOR) FROM PUBLIC;
