-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

/*
    package para realizar integracao  com a API Cielo eCommerce da Cielo, nesta
    integracao esta contemplado:
       criar recorrecia propria,
       cancelar transacao
       cappturar transacao
    
    Nao foi implementado a tokenizacao do cartao para nao ter a nessecidade de
    configurar o wallet no banco de dados, esta foi implentada em java e
    diponibilisada no servidor de integracao
    
    %see https://developercielo.github.io/manual/cielo-ecommerce
    */


    -- endpoint para cancelar pagamento

    -- %value /1/sales/#@PaymentId#@/void

    
    -- endpoint para capturar pagamento

    -- %value /1/sales/#@PaymentId#@/capture

    
    -- endpoint para solicitar pagamento

    -- %value /1/sales

    
    -- tipo de dados tabela para armazenar sistemas de integracao

    

    /*
    registro de erro retornado pela cielo  no status 400
    {*} code    Codigo do retorno  %values 201,202,400,404,500 ...
    {*} message Descricao da mensagem
    */

    

    /*
    tabela de erro retornado pela cielo no status 400
    */

    

    /*
    funcao  que retorna as configuracoes do ambiente pls_cartao_integracao_pck.sandbox(Homologacao)
    --%return Retorna ambiente de Homologacao

    */



CREATE OR REPLACE FUNCTION pls_cartao_integracao_pck.sandbox () RETURNS AMBIENTE_R AS $body$
DECLARE

        ambiente_w ambiente_r;

BEGIN
        ambiente_w.api_url       := 'https://apisandbox.cieloecommerce.cielo.com.br';
        ambiente_w.api_query_url := 'https://apiquerysandbox.cieloecommerce.cielo.com.br';
        return ambiente_w;
    end;

    /*
    funcao  que retorna as configuracoes do ambiente de producao
    %return Retorna ambiente de producoa*/


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_cartao_integracao_pck.sandbox () FROM PUBLIC;
