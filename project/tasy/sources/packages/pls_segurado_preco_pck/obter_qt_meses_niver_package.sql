-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_segurado_preco_pck.obter_qt_meses_niver ( ie_mes_cobranca_reaj_p pls_contrato.ie_mes_cobranca_reaj%type, ie_regulamentacao_p pls_plano.ie_regulamentacao%type) RETURNS bigint AS $body$
DECLARE

ie_mes_cobranca_reaj_w		pls_contrato.ie_mes_cobranca_reaj%type;

BEGIN
ie_mes_cobranca_reaj_w	:= coalesce(ie_mes_cobranca_reaj_p,'R');

if (ie_mes_cobranca_reaj_w = 'R') then
	if (ie_regulamentacao_p = 'R') then
		ie_mes_cobranca_reaj_w	:= coalesce(current_setting('pls_segurado_preco_pck.pls_parametros_w')::pls_parametros%rowtype.ie_mes_cobranca_reaj,'M');
	else
		ie_mes_cobranca_reaj_w	:= coalesce(current_setting('pls_segurado_preco_pck.pls_parametros_w')::pls_parametros%rowtype.ie_mes_cobranca_reaj_reg,'M');
	end if;
end if;

if (ie_mes_cobranca_reaj_w = 'P') then
	return 1;
else
	return 0;
end if;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_segurado_preco_pck.obter_qt_meses_niver ( ie_mes_cobranca_reaj_p pls_contrato.ie_mes_cobranca_reaj%type, ie_regulamentacao_p pls_plano.ie_regulamentacao%type) FROM PUBLIC;
