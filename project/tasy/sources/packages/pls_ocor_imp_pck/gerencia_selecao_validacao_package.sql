-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_ocor_imp_pck.gerencia_selecao_validacao ( tb_seq_selecao_p pls_util_cta_pck.t_number_table, tb_valido_p pls_util_cta_pck.t_varchar2_table_1, tb_observacao_p pls_util_cta_pck.t_varchar2_table_4000, nr_id_transacao_p pls_oc_cta_selecao_imp.nr_id_transacao%type default null, ie_sequencia_lista_p text default 'SEQ') AS $body$
BEGIN

-- se tiver registros na tabela

if (tb_seq_selecao_p.count > 0) then
	
	-- atualiza pela sequencia da tabela de seleaao

	if (ie_sequencia_lista_p = 'SEQ') then
		-- faz a atualizaaao direto, pois tudo ja esta no formato de tabela

		CALL CALL pls_ocor_imp_pck.atualizar_lista(tb_seq_selecao_p, tb_valido_p, tb_observacao_p);
	
	-- atualiza os registros da tabela de seleaao utilizando a conta

	elsif (ie_sequencia_lista_p = 'SEQ_CONTA') then
		-- faz a atualizaaao direto, pois tudo ja esta no formato de tabela

		CALL CALL pls_ocor_imp_pck.atualizar_lista_conta(tb_seq_selecao_p, tb_valido_p, tb_observacao_p, nr_id_transacao_p);
	end if;
end if;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_ocor_imp_pck.gerencia_selecao_validacao ( tb_seq_selecao_p pls_util_cta_pck.t_number_table, tb_valido_p pls_util_cta_pck.t_varchar2_table_1, tb_observacao_p pls_util_cta_pck.t_varchar2_table_4000, nr_id_transacao_p pls_oc_cta_selecao_imp.nr_id_transacao%type default null, ie_sequencia_lista_p text default 'SEQ') FROM PUBLIC;
