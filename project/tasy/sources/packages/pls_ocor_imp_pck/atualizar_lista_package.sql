-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

-- variaveis utilizadas para controle de erro de execuaao de SQL dinamico



-- variaveis utilizadas para controle de gravaaao de tempo da execuaao das regras

-- ter -> tempo execuaao regra




CREATE OR REPLACE PROCEDURE pls_ocor_imp_pck.atualizar_lista ( tb_seq_selecao_p pls_util_cta_pck.t_number_table, tb_valido_p pls_util_cta_pck.t_varchar2_table_1, tb_observacao_p pls_util_cta_pck.t_varchar2_table_4000) AS $body$
BEGIN
	
forall i in tb_seq_selecao_p.first..tb_seq_selecao_p.last
	update	pls_oc_cta_selecao_imp
	set	ie_valido_temp 	= tb_valido_p(i),
		ds_observacao 	= substr(CASE WHEN ds_observacao = NULL THEN  tb_observacao_p(i)  ELSE ds_observacao || tb_observacao_p(i) END , 0, 4000)
	where	nr_sequencia = tb_seq_selecao_p(i);
commit;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_ocor_imp_pck.atualizar_lista ( tb_seq_selecao_p pls_util_cta_pck.t_number_table, tb_valido_p pls_util_cta_pck.t_varchar2_table_1, tb_observacao_p pls_util_cta_pck.t_varchar2_table_4000) FROM PUBLIC;
