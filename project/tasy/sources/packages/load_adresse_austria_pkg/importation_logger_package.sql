-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE load_adresse_austria_pkg.importation_logger ( nr_sequencia_p IMPORT_ADRESSREGISTER.NR_SEQUENCIA%type, si_status_p IMPORT_ADRESSREGISTER.SI_STATUS%type, ds_log_p IMPORT_ADRESSREGISTER.DS_LOG%type ) AS $body$
BEGIN
        IF si_status_p = current_setting('load_adresse_austria_pkg.ie_error_status_s')::varchar(1) THEN
            ROLLBACK;
        END IF;

        UPDATE  IMPORT_ADRESSREGISTER
        SET     SI_STATUS       = si_status_p,
                DS_LOG          = ds_log_p
        WHERE   NR_SEQUENCIA    = nr_sequencia_p;

        COMMIT;

    EXCEPTION WHEN OTHERS THEN
        ROLLBACK;
        CALL WHEB_MENSAGEM_PCK.EXIBIR_MENSAGEM_ABORT(current_setting('load_adresse_austria_pkg.nr_err_import_txt_s')::bigint);
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE load_adresse_austria_pkg.importation_logger ( nr_sequencia_p IMPORT_ADRESSREGISTER.NR_SEQUENCIA%type, si_status_p IMPORT_ADRESSREGISTER.SI_STATUS%type, ds_log_p IMPORT_ADRESSREGISTER.DS_LOG%type ) FROM PUBLIC;
