-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pfcs_pck_indicators.get_specific_value ( nr_seq_indicator_p bigint, cd_establishment_p bigint, ds_department_p text default null, cd_unit_p bigint default null) RETURNS bigint AS $body$
DECLARE

        vl_return_w                 pfcs_panel.vl_indicator%type := 0;

BEGIN
        case nr_seq_indicator_p
            when current_setting('pfcs_pck_indicators.nr_tele_average_wait_time')::PFCS_INDICATOR.NR_SEQUENCIA%TYPE then
                vl_return_w := pfcs_telemetry_config_pck.get_average_waiting_time(cd_establishment_p, ds_department_p);
            when current_setting('pfcs_pck_indicators.nr_tele_patient_to_review')::PFCS_INDICATOR.NR_SEQUENCIA%TYPE then
                vl_return_w :=  pfcs_telemetry_config_pck.get_patient_review_value(cd_establishment_p, ds_department_p);
            when current_setting('pfcs_pck_indicators.nr_tele_average_time_tele')::PFCS_INDICATOR.NR_SEQUENCIA%TYPE then
                vl_return_w :=  pfcs_telemetry_config_pck.get_avg_waiting_time_on_tele(cd_establishment_p, ds_department_p);
            when current_setting('pfcs_pck_indicators.nr_tele_transition_review')::PFCS_INDICATOR.NR_SEQUENCIA%TYPE then
                vl_return_w :=  pfcs_telemetry_config_pck.get_transition_reviews(cd_establishment_p, ds_department_p);
            when current_setting('pfcs_pck_indicators.nr_tele_overall_capacity')::PFCS_INDICATOR.NR_SEQUENCIA%TYPE then
                vl_return_w :=  pfcs_telemetry_config_pck.get_capacity_unit(cd_establishment_p, ds_department_p);
            when current_setting('pfcs_pck_indicators.nr_hah_special_requests')::PFCS_INDICATOR.NR_SEQUENCIA%TYPE then
                vl_return_w := pfcs_pck_census.get_special_requests(cd_establishment_p, cd_unit_p);
            when current_setting('pfcs_pck_indicators.nr_hah_average_wait_time')::PFCS_INDICATOR.NR_SEQUENCIA%TYPE then
                vl_return_w := pfcs_pck_census.get_avg_request_time(pfcs_pck_indicators.get_conversion(nr_seq_indicator_p), cd_establishment_p, cd_unit_p);
        else
            vl_return_w := 0;
        end case;

        return vl_return_w;
    END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pfcs_pck_indicators.get_specific_value ( nr_seq_indicator_p bigint, cd_establishment_p bigint, ds_department_p text default null, cd_unit_p bigint default null) FROM PUBLIC;
