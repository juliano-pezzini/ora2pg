-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';



-- prepareDocumentEditor
CREATE OR REPLACE FUNCTION qsm_document_pck.preparedocumenteditor ( nr_seq_document_p bigint) RETURNS SETOF T_PREPAREDOCUMENTEDITOR AS $body$
DECLARE


nr_seq_documento_w			intpd_fila_transmissao.nr_seq_documento%type;
r_prepareDocumentEditor_row_w		r_prepareDocumentEditor_row;

C01 CURSOR(nr_seq_documento_pc  episodio_pac_document.nr_sequencia%type) FOR
	SELECT	e.ds_client_id client_id,
		e.nr_seq_doc_qas document_id,
		'update' mode_id
	from	episodio_pac_document e
	where	e.nr_sequencia = nr_seq_documento_pc;

BEGIN

for r_C01_w in C01(nr_seq_document_p) loop
	begin
	r_prepareDocumentEditor_row_w := qsm_document_pck.limpar_atrib_preparedoceditor(r_prepareDocumentEditor_row_w);

	r_prepareDocumentEditor_row_w.client_id		:= r_C01_w.client_id;
	r_prepareDocumentEditor_row_w.document_id	:= r_C01_w.document_id;
	r_prepareDocumentEditor_row_w.mode_id		:= r_C01_w.mode_id;

	RETURN NEXT r_prepareDocumentEditor_row_w;
	end;
end loop;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION qsm_document_pck.preparedocumenteditor ( nr_seq_document_p bigint) FROM PUBLIC;
