-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE philips_json_printer.ppstring (elem philips_json_value, buf INOUT text) AS $body$
DECLARE

    offset bigint := 1;
    v_str varchar(5000);
    amount bigint := 5000;

BEGIN
    buf := philips_json_printer.add_buf(buf, case when elem.num = 1 then '"' else '/**/' end);
    if (elem.extended_str IS NOT NULL AND elem.extended_str::text <> '') then
        while(offset <= octet_length(elem.extended_str)) loop
          dbms_lob.read(elem.extended_str, amount, offset, v_str);
          if (elem.num = 1) then
            buf := philips_json_printer.add_buf(buf, philips_json_printer.escapestring(v_str));
          else
            buf := philips_json_printer.add_buf(buf, v_str);
          end if;
          offset := offset + amount;
        end loop;
    else
        if (elem.num = 1) then
            while(offset<=length(elem.str)) loop
                v_str:=substr(elem.str, offset, amount);
                buf := philips_json_printer.add_buf(buf, philips_json_printer.escapestring(v_str));
                offset := offset + amount;
            end loop;
        else
            buf := philips_json_printer.add_buf(buf, elem.str);
        end if;
    end if;
    buf := philips_json_printer.add_buf(buf, case when elem.num = 1 then '"' else '/**/' end || current_setting('philips_json_printer.newline_char')::varchar(2));
  end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE philips_json_printer.ppstring (elem philips_json_value, buf INOUT text) FROM PUBLIC;
