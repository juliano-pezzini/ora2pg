-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE exames_grid_pck.updatetitlecolumn (nr_prescricao_p prescr_medica.nr_prescricao%type, ie_nivel_atencao_p text, dt_hora_p text, dt_result_p text, indice bigint) AS $body$
DECLARE

current_setting('exames_grid_pck.ds_comando_w')::varchar(32000)    varchar(32000);
current_setting('exames_grid_pck.ds_parametro_w')::varchar(32000)    varchar(32000);

BEGIN

PERFORM set_config('exames_grid_pck.ds_comando_w', ' update w_result_exame_grid '||
                  ' set ds_result' || to_char(indice) || ' = :nr_prescricao' ||
                  ' ,ie_nivel_atencao = :ie_nivel_atencao' ||
                  ', ds_referencia = '|| chr(39) || Wheb_mensagem_pck.get_texto(307242) /*'Prescricao'*/ || chr(39) ||
                  ' where ie_ordem = -4 '||
                  ' and nm_usuario = :nm_usuario', false);

PERFORM set_config('exames_grid_pck.ds_parametro_w', 'nr_prescricao='||nr_prescricao_p||'#@#@ie_nivel_atencao='||ie_nivel_atencao_p||'#@#@nm_usuario='||current_setting('exames_grid_pck.nm_usuario_param')::prescr_medica.nm_usuario%type||'#@#@', false);
CALL exec_sql_dinamico_bv('TASY', current_setting('exames_grid_pck.ds_comando_w')::varchar(32000),current_setting('exames_grid_pck.ds_parametro_w')::varchar(32000));

PERFORM set_config('exames_grid_pck.ds_comando_w', ' update w_result_exame_grid '||
                  ' set ds_result' || to_char(indice) || ' = :ds_hora' ||
                  ', ds_referencia = '|| chr(39) || Wheb_mensagem_pck.get_texto(307244) /*'Hora'*/ || chr(39) ||
                  ' where ie_ordem = -7 '||
                  ' and nm_usuario = :nm_usuario', false);

PERFORM set_config('exames_grid_pck.ds_parametro_w', 'ds_hora='||dt_hora_p||'#@#@nm_usuario='||current_setting('exames_grid_pck.nm_usuario_param')::prescr_medica.nm_usuario%type||'#@#@', false);
CALL exec_sql_dinamico_bv('TASY', current_setting('exames_grid_pck.ds_comando_w')::varchar(32000),current_setting('exames_grid_pck.ds_parametro_w')::varchar(32000));

PERFORM set_config('exames_grid_pck.ds_comando_w', ' update w_result_exame_grid '||
                  ' set ds_result' || to_char(indice) || ' = :ds_resultado' ||
                  ', ds_referencia = '|| chr(39) || Wheb_mensagem_pck.get_texto(307246) /*'Data resultado'*/ || chr(39) ||
                  ' where ie_ordem = -10 '||
                  ' and nm_usuario = :nm_usuario', false);

PERFORM set_config('exames_grid_pck.ds_parametro_w', 'ds_resultado='||dt_result_p||'#@#@nm_usuario='||current_setting('exames_grid_pck.nm_usuario_param')::prescr_medica.nm_usuario%type||'#@#@', false);
CALL exec_sql_dinamico_bv('TASY', current_setting('exames_grid_pck.ds_comando_w')::varchar(32000), current_setting('exames_grid_pck.ds_parametro_w')::varchar(32000));

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE exames_grid_pck.updatetitlecolumn (nr_prescricao_p prescr_medica.nr_prescricao%type, ie_nivel_atencao_p text, dt_hora_p text, dt_result_p text, indice bigint) FROM PUBLIC;
