-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE cpoe_gerar_registro_json_pck.setar_valor_entre_horas ( nr_hora_inicio_p bigint, nr_hora_fim_p bigint, ds_valor_p text) AS $body$
DECLARE


	ds_comando_w		varchar(4000);
	ds_parametro_w		varchar(4000);
	ds_hora_w			varchar(5);
	
BEGIN
	if (nr_hora_inicio_p > nr_hora_fim_p) then
		for i in nr_hora_inicio_p .. 23 loop
			begin
			if (current_setting('cpoe_gerar_registro_json_pck.cpoe_horas_enteral_w')::cpoe_horas_enteral_v[i]coalesce(.ds_valor_hora_w::text, '') = '') then
				current_setting('cpoe_gerar_registro_json_pck.cpoe_horas_enteral_w')::cpoe_horas_enteral_v[i].ds_valor_hora_w := ds_valor_p;
			end if;
			end;
		end loop;

		for i in 0 .. nr_hora_fim_p loop
			begin
			if (current_setting('cpoe_gerar_registro_json_pck.cpoe_horas_enteral_w')::cpoe_horas_enteral_v[i]coalesce(.ds_valor_hora_w::text, '') = '') then
				current_setting('cpoe_gerar_registro_json_pck.cpoe_horas_enteral_w')::cpoe_horas_enteral_v[i].ds_valor_hora_w := ds_valor_p;
			end if;		
			end;
			end loop;
	else
		for i in nr_hora_inicio_p .. nr_hora_fim_p loop
			begin
			if (current_setting('cpoe_gerar_registro_json_pck.cpoe_horas_enteral_w')::cpoe_horas_enteral_v[i]coalesce(.ds_valor_hora_w::text, '') = '') then
				current_setting('cpoe_gerar_registro_json_pck.cpoe_horas_enteral_w')::cpoe_horas_enteral_v[i].ds_valor_hora_w := ds_valor_p;
			end if;	
			end;
			end loop;
	end if;
	commit;
	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cpoe_gerar_registro_json_pck.setar_valor_entre_horas ( nr_hora_inicio_p bigint, nr_hora_fim_p bigint, ds_valor_p text) FROM PUBLIC;
