-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_utl_file_pck.novo_arquivo ( cd_evento_p evento_tasy_utl_file.cd_evento%type, nm_arquivo_p text, ie_valida_dir_ws_p text, qt_tamanho_max_linha_p bigint, ds_local_p INOUT text, ie_local_p text default 'W') AS $body$
DECLARE


-- Variaveis				
ds_local_w		varchar(4000) := null;
ds_local_windows_w	varchar(4000) := null;


BEGIN
-- Obter local reconhecido pelo ORACLE e pelo WINDOWS para gera? do arquivo UTL_FILE
SELECT * FROM pls_utl_file_pck.obter_local_utl( cd_evento_p, ds_local_w, ds_local_windows_w, ie_valida_dir_ws_p) INTO STRICT ds_local_w, ds_local_windows_w;

-- Criar e abrir o arquivo texto por UTL_FILE dentro do diret? reconhecido pelo ORACLE
CALL pls_utl_file_pck.criar_abrir( ds_local_w, nm_arquivo_p, 'W', qt_tamanho_max_linha_p);

ds_local_p := ds_local_w;
if (ie_local_p = 'W') then
	ds_local_p := ds_local_windows_w;
end if;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_utl_file_pck.novo_arquivo ( cd_evento_p evento_tasy_utl_file.cd_evento%type, nm_arquivo_p text, ie_valida_dir_ws_p text, qt_tamanho_max_linha_p bigint, ds_local_p INOUT text, ie_local_p text default 'W') FROM PUBLIC;
