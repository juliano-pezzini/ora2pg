-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION validar_integracao_metodo_pck.carregar_configuracao_email (cd_perfil_p text, nm_usuario_p text, cd_estabelecimento_p text) RETURNS varchar AS $body$
DECLARE

    retorno varchar(15000) := '';
    email_endereco_smtp_w varchar(500);
    email_usuario_smtp_w varchar(500);
    email_senha_smtp_w varchar(500);
    email_porta_smtp_w varchar(500);
    email_protocolo_ssl_w varchar(500);
    email_ie_autenticacao_w varchar(500);
    email_host_exchange_w varchar(500);
    email_porta_exchange_w varchar(500);

BEGIN
    email_endereco_smtp_w := '['|| validar_integracao_metodo_pck.local_parametro(0,20,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|20]Endereco SMTP: ' || validar_integracao_metodo_pck.tratar_parametro(0,20,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    email_usuario_smtp_w := '['|| validar_integracao_metodo_pck.local_parametro(0,38,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|38]Usuario SMTP: ' || validar_integracao_metodo_pck.tratar_parametro(0,38,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    email_senha_smtp_w := '['|| validar_integracao_metodo_pck.local_parametro(0,40,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|40]Caracteres da senha smtp: ' || coalesce(length(obter_valor_param_usuario(0,40,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p)),0);
    email_porta_smtp_w := '['|| validar_integracao_metodo_pck.local_parametro(0,109,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|109]Porta SMTP: '  || validar_integracao_metodo_pck.tratar_parametro(0,109,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    email_protocolo_ssl_w := '['|| validar_integracao_metodo_pck.local_parametro(0,110,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|110]Protocolo SSL: ' || validar_integracao_metodo_pck.tratar_parametro(0,110,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    email_ie_autenticacao_w := '['|| validar_integracao_metodo_pck.local_parametro(0,125,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|125]Tipo autenticacao: ' || validar_integracao_metodo_pck.tratar_parametro(0,125,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    email_host_exchange_w := '['|| validar_integracao_metodo_pck.local_parametro(0,208,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|208]Host Exchange: ' || validar_integracao_metodo_pck.tratar_parametro(0,208,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    email_porta_exchange_w := '['|| validar_integracao_metodo_pck.local_parametro(0,209,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|209]Porta Exchange: ' || validar_integracao_metodo_pck.tratar_parametro(0,209,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    retorno := retorno || email_endereco_smtp_w || chr(10) || email_porta_smtp_w || chr(10) || email_usuario_smtp_w || chr(10) ||
                          email_protocolo_ssl_w || chr(10) || email_ie_autenticacao_w || chr(10) || email_host_exchange_w || chr(10) || email_porta_exchange_w;
    return retorno;
  end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION validar_integracao_metodo_pck.carregar_configuracao_email (cd_perfil_p text, nm_usuario_p text, cd_estabelecimento_p text) FROM PUBLIC;
