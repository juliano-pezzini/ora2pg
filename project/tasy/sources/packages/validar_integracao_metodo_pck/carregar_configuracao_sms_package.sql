-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION validar_integracao_metodo_pck.carregar_configuracao_sms (cd_perfil_p text, nm_usuario_p text, cd_estabelecimento_p text) RETURNS varchar AS $body$
DECLARE

    retorno varchar(15000) := '';
    sms_usuario_w varchar(500);
    sms_senha_w varchar(500);
    sms_remetente_padrao_w varchar(500);
    sms_empresa_w varchar(500);
    sms_forma_envio_w varchar(500);
    sms_chip_w varchar(500);
    sms_ip_proxy_w varchar(500);
    sms_usuario_proxy_w varchar(500);
    sms_senha_proxy_w varchar(500);
    sms_endereco_integracoes_w varchar(500);
    sms_consistencia_w varchar(500);
    sms_servidor_goip_w varchar(500);
    sms_endereco_SMS_w varchar(500);

BEGIN
    sms_usuario_w := '['|| validar_integracao_metodo_pck.local_parametro(0,54,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|54]Usuario SMS: ' || validar_integracao_metodo_pck.tratar_parametro(0,54,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_senha_w   := '['|| validar_integracao_metodo_pck.local_parametro(0,55,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|55]Caracteres da senha SMS: ' || coalesce(length(obter_valor_param_usuario(0,55,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p)),0);
    sms_remetente_padrao_w := '['|| validar_integracao_metodo_pck.local_parametro(0,63,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|63]Remetente Padrao: ' || validar_integracao_metodo_pck.tratar_parametro(0,63,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_empresa_w := '['|| validar_integracao_metodo_pck.local_parametro(0,89,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|89]Empresa de envio: ' || validar_integracao_metodo_pck.tratar_parametro(0,89,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_forma_envio_w := '['|| validar_integracao_metodo_pck.local_parametro(0,202,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|202]Forma de envio: ' || validar_integracao_metodo_pck.tratar_parametro(0,202,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_chip_w := '['|| validar_integracao_metodo_pck.local_parametro(0,210,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|210]Chip envio(Provider): ' || validar_integracao_metodo_pck.tratar_parametro(0,210,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_ip_proxy_w := '['|| validar_integracao_metodo_pck.local_parametro(0,80,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|80]Ip Servidor Proxy: ' || validar_integracao_metodo_pck.tratar_parametro(0,80,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_usuario_proxy_w := '['|| validar_integracao_metodo_pck.local_parametro(0,81,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|81]Usuario Proxy: ' || validar_integracao_metodo_pck.tratar_parametro(0,81,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_senha_proxy_w := '['|| validar_integracao_metodo_pck.local_parametro(0,82,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|82]Caracteres da Senha Proxy: ' || coalesce(length(obter_valor_param_usuario(0,82,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p)),0);
    sms_endereco_integracoes_w := '['|| validar_integracao_metodo_pck.local_parametro(9041,5,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|INT|5]Servidor Integracoes: ' || validar_integracao_metodo_pck.tratar_parametro(9041,5,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_consistencia_w := '['|| validar_integracao_metodo_pck.local_parametro(0,214,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|214]Consistencia numero: ' || validar_integracao_metodo_pck.tratar_parametro(0,214,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_servidor_goip_w := '['|| validar_integracao_metodo_pck.local_parametro(0,206,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|206]Servidor GOIP: ' || validar_integracao_metodo_pck.tratar_parametro(0,206,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);
    sms_endereco_SMS_w := '['|| validar_integracao_metodo_pck.local_parametro(0,236,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p) ||'|MS|236]Servidor SMS: ' || validar_integracao_metodo_pck.tratar_parametro(0,236,cd_perfil_p,nm_usuario_p, cd_estabelecimento_p);

    retorno := retorno ||sms_usuario_w || chr(10) ||  sms_remetente_padrao_w || chr(10) || sms_empresa_w || chr(10) ||
                         sms_forma_envio_w || chr(10) || sms_chip_w || chr(10) || sms_ip_proxy_w || chr(10) || sms_usuario_proxy_w || chr(10) ||
                         sms_consistencia_w ||  chr(10) || sms_servidor_goip_w || chr(10) || sms_endereco_integracoes_w || chr(10) || sms_endereco_SMS_w;
    return retorno;
  end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION validar_integracao_metodo_pck.carregar_configuracao_sms (cd_perfil_p text, nm_usuario_p text, cd_estabelecimento_p text) FROM PUBLIC;
