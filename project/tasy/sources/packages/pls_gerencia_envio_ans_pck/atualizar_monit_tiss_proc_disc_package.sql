-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';


--Procedure utilizada para fazer o update da tabela "pls_monitor_tiss_proc_val"



CREATE OR REPLACE PROCEDURE pls_gerencia_envio_ans_pck.atualizar_monit_tiss_proc_disc ( dados_proc_update_p pls_gerencia_envio_ans_pck.dados_monitor_proc_update, nm_usuario_p usuario.nm_usuario%type) AS $body$
BEGIN
--Caso tenha registro faz o update

if (dados_proc_update_p.nr_sequencia.count > 0) then
	forall i in dados_proc_update_p.nr_sequencia.first..dados_proc_update_p.nr_sequencia.last
		update	pls_monitor_tiss_proc_val set
			qt_procedimento = dados_proc_update_p.qt_procedimento(i),
			qt_liberado 	= dados_proc_update_p.qt_liberado(i),
			vl_procedimento = dados_proc_update_p.vl_procedimento(i),
			vl_liberado 	= dados_proc_update_p.vl_liberado(i),
			vl_glosa 	= dados_proc_update_p.vl_glosa(i)
		where	nr_sequencia 	= dados_proc_update_p.nr_sequencia(i);
	commit;
end if;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_gerencia_envio_ans_pck.atualizar_monit_tiss_proc_disc ( dados_proc_update_p pls_gerencia_envio_ans_pck.dados_monitor_proc_update, nm_usuario_p usuario.nm_usuario%type) FROM PUBLIC;
