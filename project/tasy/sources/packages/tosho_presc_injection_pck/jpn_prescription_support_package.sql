-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';



    /**
	+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	PROCEDURE JPN_PRESCRIPTION_SUPPORT
	PRESCRIPTION SUPPORT SYSTEM
	+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    **/
CREATE OR REPLACE PROCEDURE tosho_presc_injection_pck.jpn_prescription_support (NR_PRESCRICAO_P bigint) AS $body$
DECLARE


			NR_SEQ_MOTIVO_SUSP_W bigint;
			SI_TYPE_OF_PRESCRIPTION_W varchar(10);
			NR_ATENDIMENTO_W bigint;
			IE_URGENCIA_W varchar(10);
			IE_MEDICACAO_PACIENTE_W varchar(10);

			COUNTER_LOOP_C01 bigint := 0;
			QTD_MEDIC_SOLIC bigint := 0;
			QTD_EOF_KBN bigint := 0;
			SYORI_KBN_W varchar(1);
			NYUGAI_KBN_W varchar(1);
			REC_KBN_W varchar(1);
			SEND_KBN_W varchar(1);
			XX_SYBT_W varchar(3);
			IRAI_KBN_W varchar(1);
			CD_PESSOA_FISICA_W varchar(10);
			CD_PF_TRIAL_W varchar(10);
			ORDER_NO_W varchar(200);
			CONTADOR_H0_W bigint;
			CONTADOR_H1_W bigint;
			CONTADOR_H2_W bigint;
			CONTADOR_H3_W bigint;
			CONTADOR_H4_W bigint;
			CONTADOR_H9_W bigint;
			CONTADOR_HJ_W bigint;
			CHICKEN_FLG_W varchar(1);
			CD_MATERIAL_W varchar(20);
			EOF_KBN_W varchar(1);
			DT_ATUALIZACAO_W timestamp;
			CONTADOR_FOR bigint := 0;
			DATA_NOME_ARQUIVO varchar(40);
			DATA_NOME_ARQUIVO_LOG varchar(40);
			NR_SEQ_CR_W bigint;
			IE_ALTA_VIGILANCIA_W varchar(1);
			IE_ALTA_VIGILANCIA_X varchar(1);
			IE_ALTO_RISCO_W varchar(1);
			IE_ALTO_RISCO_X varchar(1);
			RP_SUM_W bigint := 0;
			REPORT_KBN_W varchar(1);

			NR_SEQUENCIA_CO bigint;
			NR_CONTAGEM_A bigint;
			NR_CHAVE_W bigint;


			NR_SEQUENCIA_W bigint;
			CONTADOR_H_W varchar(100);
			TESTE_AA_W bigint;
			TESTE_BB_W bigint;


			SEQUENCIAL_W bigint;
			NM_USUARIO_MEDIC_W varchar(100);

			DS_SCRIPT_RESEND_ERROR varchar(500);
			DS_LOG_MESSAGE varchar(500);
			LOG_SEQUENCE_NUMBER_W bigint;
			DS_ARQ_LOG_MESSAGE varchar(500);

			JPN_PRESCR_INJECTION_CHK_W varchar(1);
			JPN_BODY_SURFACE_W real;			

			STRING_INJECTION text;
			STRING_FINAL text;

			GENERATED_FILE UTL_FILE.FILE_TYPE;

			C01 CURSOR FOR  SELECT '00' AS ELECTRONIC_SENTENCE_TYPE,
								  TO_CHAR(clock_timestamp(), 'YYYYMMDD') AS CREATION_DATE1,
								  TO_CHAR(clock_timestamp(), 'HH24MISS') AS CREATION_TIME1,
								  'BI' AS SEND_SIDE_SYSTEM_CODE,
								  'AB' AS RECEIVER_SIDE_SYSTEM_CODE,
								  '00000001' AS NUMBER_COMMON_READERS,
								  --END OF COMMON HEADER
								  --COMMON HEADER BETWEEN THE SYSTEMS
								  SYORI_KBN_W AS SYORI_KBN,
								  TO_CHAR(clock_timestamp(), 'YYYYMMDD') AS CREATION_DATE2,
								  TO_CHAR(clock_timestamp(), 'HH24MISS') AS CREATION_TIME2,
								  PF1.NR_PRONTUARIO AS PT_ID1,
								  XX_SYBT_W AS XX_SYBT1,
								  TO_CHAR(clock_timestamp(), 'YYYYMMDD') || SUBSTR(TO_CHAR(CM1.NR_SEQUENCIA),5,10) AS BUMON_NO1,
								  ORDER_NO_W AS ORDER_NO1,
								  NYUGAI_KBN_W AS NYUGAI_KBN1,
								  tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A') AS KA_CD1,
								  OBTER_DESC_SETOR_ATEND(tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A')) AS KA_NAME1,
								  tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A') AS BYOTO_CD1,
								  SUBSTR(OBTER_DESC_SETOR_ATEND(tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A')),1,20) AS BYOTO_NAME1,
								  AP1.CD_MEDICO_RESP AS DR_ID1,
								  '                    ' AS SH_KANA_NAME,
								  SUBSTR(OBTER_NOME_MEDICO(AP1.CD_MEDICO_RESP, 'N'),1,20) AS SH_NAME,
								  TO_CHAR(DT_ATUALIZACAO_W, 'YYYYMMDD') AS IN_DATE1,
								  '        ' AS STOP_DATE1, --FIXED
								  '1' AS STOP_RSN_FLG1,
								  PF1.NR_PRONTUARIO AS PT_ID2,

								  (SELECT B.DS_GIVEN_NAME || ' ' || B.DS_FAMILY_NAME
								     FROM PERSON_NAME B
								    WHERE B.NR_SEQUENCIA = PF1.NR_SEQ_PERSON_NAME
								      AND UPPER(B.DS_TYPE) = 'SOCIAL') AS PT_KN_NAME1,

								  (SELECT B.DS_GIVEN_NAME || ' ' || B.DS_FAMILY_NAME
								     FROM PERSON_NAME B
								    WHERE B.NR_SEQUENCIA = PF1.NR_SEQ_PERSON_NAME
								      AND UPPER(B.DS_TYPE) = 'MAIN') AS PT_KJ_NAME1,	

								  PF1.IE_SEXO AS PT_SEX1,
								  TO_CHAR(PF1.DT_NASCIMENTO, 'YYYYMMDD') AS PT_BIRTH1,
								  ' ' AS PT_STATUS1,
								  BEV.ROOM_ID AS ROOM_CD1, 
								  OBTER_LEITO_ATUAL_PAC(AP1.NR_ATENDIMENTO) AS ROOM_NAME1,
								  '00000001' AS KOBETU_CNT,
								  --END OF COMMON HEADER BETWEEN THE SYSTEMS
								  --INDIVIDUAL ITEM 1 (PRESCRIPTION ORDER INFO)
								  --HEADER INFORMATION
								  '21' AS FORMAT_KBN,
								  REC_KBN_W AS REC_KBN,
								  '00001' AS SEQ_NO,

								  ' ' AS EOF_KBN, 

								  '00000' AS RECORD_LEN,
								  '   ' AS RECORD_NUM,
								  TO_CHAR(clock_timestamp(), 'YYYYMMDD') || TO_CHAR(clock_timestamp(), 'HH24MISS') AS TIMESTAMP1,
								  '0000000000' AS RESERVE, 					  
								  --END OF HEADER INFORMATION
								  --PATIENT BASIC INFORMATION
								  PF1.NR_PRONTUARIO AS PT_ID3,

								  (SELECT B.DS_GIVEN_NAME || ' ' || B.DS_FAMILY_NAME
								     FROM PERSON_NAME B
								    WHERE B.NR_SEQUENCIA = PF1.NR_SEQ_PERSON_NAME
								      AND UPPER(B.DS_TYPE) = 'SOCIAL') AS PT_KN_NAME2,

								  (SELECT B.DS_GIVEN_NAME || ' ' || B.DS_FAMILY_NAME
								     FROM PERSON_NAME B
								    WHERE B.NR_SEQUENCIA = PF1.NR_SEQ_PERSON_NAME
								      AND UPPER(B.DS_TYPE) = 'MAIN') AS PT_KJ_NAME2,

								  PF1.IE_SEXO AS PT_SEX2,
								  TO_CHAR(PF1.DT_NASCIMENTO, 'YYYYMMDD') AS PT_BIRTH2,	
								  ' ' AS PT_STATUS2, --(FIXED)
								  PF1.QT_ALTURA_CM AS PT_HEIGHT,
								  PF1.QT_PESO AS PT_WEIGHT, 
								  'KG' AS PT_WEIGHT_TANI,

								  tosho_presc_injection_pck.jpn_body_surface(NR_PRESCRICAO_P) AS PT_TAIHYO, --BODY SURFACE AREA JRS 756 
								  TO_CHAR(PF1.DT_ATUALIZACAO, 'YYYYMMDD') AS PT_WEIGTH_DATE,
								  '        ' AS PT_CCR,
								  '1' AS PT_FLG1,
								  OBTER_CONVENIO_ATENDIMENTO(AP1.NR_ATENDIMENTO) AS HOKEN_CD,
								  OBTER_NOME_CONVENIO(OBTER_CONVENIO_ATENDIMENTO(AP1.NR_ATENDIMENTO)) AS HOKEN_NAME,
								  ' ' AS PT_FLG5, --(NOT USED)
								  tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A') AS BYOTO_CD2,
								  SUBSTR(OBTER_DESC_SETOR_ATEND(tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A')),1,20) AS BYOTO_NAME2,
								  BEV.ROOM_ID AS ROOM_CD2, --VERIFICAR
								  OBTER_LEITO_ATUAL_PAC(AP1.NR_ATENDIMENTO) AS ROOM_NAME2,
								  SUBSTR(OBTER_ENDERECO_PF(PF1.CD_PESSOA_FISICA, 'END'),1,80) AS PT_ADDR,
								  OBTER_ENDERECO_PF(PF1.CD_PESSOA_FISICA, 'CEP') AS PT_ZIP,
								  OBTER_TELEFONE_PF(PF1.CD_PESSOA_FISICA, '1') AS PT_TEL,					  
								  --END OF PATIENT BASIC INFORMATION
								  --ORDER KEY INFO
								  XX_SYBT_W AS XX_SYBT2, 
								  TO_CHAR(clock_timestamp(), 'YYYYMMDD') || SUBSTR(TO_CHAR(CM1.NR_SEQUENCIA),5,10) AS BUMON_NO2,
								  ORDER_NO_W  AS ORDER_NO2,

								  --END OF ORDER KEY INFO
								  --ORDER BASIC INFO
								  tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A') AS KA_CD2,
								  SUBSTR(OBTER_DESC_SETOR_ATEND(tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A')),1,20) AS KA_NAME2,
								  OBTER_INICIAIS_SETOR(OBTER_DESC_SETOR_ATEND(tosho_presc_injection_pck.obter_set_atend_unidade(AP1.NR_ATENDIMENTO, 'A'))) AS KA_NAME_RX,
								  NYUGAI_KBN_W AS NYUGAI_KBN2,
								  OBTER_CODIGO_USUARIO(CM1.NM_USUARIO) AS DR_ID2,
								  OBTER_NOME_MEDICO(OBTER_CODIGO_USUARIO(CM1.NM_USUARIO), 'PS') AS DR_NAME2,
								  OBTER_CODIGO_USUARIO(CM1.NM_USUARIO_LIB_FARM) AS OP_ID, --USUARIO LIBERACAO FARMACIA
								  OBTER_NOME_USUARIO(CM1.NM_USUARIO_LIB_FARM) AS OP_NAME, --USUARIO LIBERACAO FARMACIA
								  PD1.NR_DOCUMENT AS MAYAK_NO,
								  TO_CHAR(PD1.DT_START, 'YYYYMMDD') AS MAYAK_ST_DATE,	   
								  TO_CHAR(PD1.DT_VALIDADE, 'YYYYMMDD') AS MAYAK_ED_DATE,
								  TO_CHAR(CR1.DT_INICIO, 'YYYYMMDD') AS IN_DATE2,
								  TO_CHAR(CR1.DT_INICIO, 'HH24MISS') AS IN_TIME2,

								  '1' AS ORDER_MODE, --WAITING IBM
								  IRAI_KBN_W AS IRAI_KBN,

								  REPORT_KBN_W AS REPORT_KBN, --1 SE EXISTIR MEDICAMENTO DO PACIENTE. 0 SE NAO EXISTIR MEDICAMENTO DO PACIENTE 
								  '0' AS STATUS1, --WAITING IBM
								  '1' AS DO_FLG, --WAITING IBM
								  ' ' AS ST_DO_FLG, --(FIXED)
								  ' ' AS BUMON_FLG1, --(FIXED)
								  ' ' AS BUMON_FLG2, --(FIXED)
								  ' ' AS BUMON_FLG3, --(FIXED)
								  ' ' AS BUMON_FLG4, --(FIXED)
								  ' ' AS BUMON_FLG5, --(FIXED)
								  CHICKEN_FLG_W AS CHICKEN_FLG,
								  '                                                                     ' AS CHIKEN_NAME,

								  '                                        ' AS ODR_COMMENT, --(PENDENTE CAMPO REQUEST COMMENT)
								  TO_CHAR(CM1.DT_INICIO, 'YYYYMMDD') AS START_DATE2,
								  TO_CHAR(CM1.DT_FIM, 'YYYYMMDD') AS END_DATE2,
								  OBTER_DIF_DATA2(CM1.DT_INICIO, CM1.DT_FIM) AS EXEC_TIME, --(PENDENTE CAMPO)
								  ' ' AS STOP_FLG,  --(FIXED)
								  '        ' AS STOP_DATE2, --(FIXED)
								  '                                                  ' AS STOP_COMMENT, --(FIXED)
								  ' ' AS STOP_RSN_FLG2, --(FIXED)
								  '        ' AS LAST_DR_ID, --(FIXED)
								  '        ' AS LAST_NS_ID, --(FIXED)
								  '        ' AS LAST_OP_ID, --(FIXED)
								  TO_CHAR(CR1.DT_ATUALIZACAO, 'YYYYMMDD') AS LAST_DATE,
								  TO_CHAR(CR1.DT_ATUALIZACAO, 'HH24MISS') AS LAST_TIME,
								  TO_CHAR(clock_timestamp(), 'YYYYMMDD') || SUBSTR(TO_CHAR(CM1.NR_SEQUENCIA),5,10) AS BUMON_NO3,
								  '   ' AS TAKA_KA_CD1, --(PRS 359)
								  '      ' AS KA_NAME_R1, --(PRS 359)
								  '               ' AS BUMON_NO4, --(PRS 359)
								  '   '  AS TAKA_KA_CD2, --(PRS 359)
								  '      ' AS KA_NAME_R2, --(PRS 359)
								  '               ' AS BUMON_NO5, --(PRS 359)
								  '   ' AS TAKA_KA_CD3, --(PRS 359)
								  '      ' AS KA_NAME_R3, --(PRS 359)
								  '               ' AS BUMON_NO6, --(PRS 359)
								  '   ' AS TAKA_KA_CD4, --(PRS 359)
								  '      ' AS KA_NAME_R4, --(PRS 359)
								  '               ' AS BUMON_NO7, --(PRS 359)
								  '   ' AS TAKA_KA_CD5, --(PRS 359)
								  '      ' AS KA_NAME_R5, --(PRS 359)
								  '               ' AS BUMON_NO8, --(PRS 359)
								  '   ' AS TAKA_KA_CD6, --(PRS 359)
								  '      ' AS KA_NAME_R6, --(PRS 359) 
			  					  MA1.NR_CODIGO_BARRAS AS BARCODE,
								  '   ' AS SET_CD1,
								  '   ' AS SET_CD2,
								  '                                        ' AS REG_NAME, --(FIXED)
								  TO_CHAR(clock_timestamp(), 'YYYYMMDD') AS BASE_DAY,
								  '          ' AS YOBI_FLD1, --(FIXED)
								  LPAD(CR1.NR_SEQUENCIA_RP, 3, '0') AS RP_NUM,
								  --END OF PATIENT BASIC INFORMATION
								  --RP INFO
								  LPAD(CR1.NR_SEQUENCIA, 5, '0') AS RP_SEQ1,					  
								  TO_CHAR(CR1.DT_INICIO, 'YYYYMMDD') AS SYH_DATE,
								  LPAD(CR1.QT_DIAS_PADRAO, 3, '0') AS SYH_KKN,
								  '  ' AS KAKU_HI, --(PENDENTE CAMPO)
								  '       ' AS YOUBI_SJI, --(PENDENTE CAMPO)
								  ' ' AS KISUGUSU, --(PENDENTE CAMPO)
								  '  ' AS CHZ_SJI, --(PENDENTE CAMPO)
								  ' ' AS ODP_SJI, --(PENDENTE CAMPO)
								  LPAD(CM1.CD_MATERIAL, 5, 0) AS YKH_NO, --MEDICINE NUMBER (COD) (JRS 330)					  
								  '                                                            ' AS YOHO_DISP_1, --(PENDENTE DO CAMPO)
								  '                                                            ' AS YOHO_DISP_2, --(PENDENTE DO CAMPO)					  
								  '                                                            ' AS YOHO_DISP_3, --(PENDENTE DO CAMPO)
								  '                                                            ' AS YOHO_DISP_4, --(PENDENTE DO CAMPO)  					  				  
			  					  '                                                            ' AS YOHO_DISP_5, --(PENDENTE DO CAMPO)
								  '                                                            ' AS YOHO_DISP_6, --(PENDENTE DO CAMPO)
								  '                                                            ' AS YOHO_DISP_7, --(PENDENTE DO CAMPO)					  
								  '                                                            ' AS YOHO_NAI, --PENDENTE DO CAMPO (JRS 325)
								  ' ' AS SYOCHI_FLG, --(PENDENTE CAMPO)					  
								  ' ' AS FKN_FLG, --(PENDENTE CAMPO)
								  ' ' AS CMT_CD_SYU, --(PENDENTE CAMPO)
								  '  ' AS CMT_CD, --(PENTENDE CAMPO)
								  ' ' AS FR_CMT_SYU, --(PENDENTE CAMPO)
								  '                                                            ' AS FR_CMT, --(PENTENDE CAMPO) 
								  OBTER_CONVENIO_ATENDIMENTO(AP1.NR_ATENDIMENTO) AS RP_HOKEN_CD,
								  OBTER_NOME_CONVENIO(OBTER_CONVENIO_ATENDIMENTO(AP1.NR_ATENDIMENTO)) AS RP_HOKEN_NAME,
								  '0000000000000000' AS STD_YOHO_CD, --(FIXED)
								  '          ' AS YOBI_FLD2, --(FIXED)
								  --END OF ORDER BASIC INFO
								  --MEDICINE INDEX INFO
								  '       ' AS YKH_REC, --(PENDENTE CAMPO)
								  --END OF MEDICINE INDEX INFO			  
								  --MEDICINE INFORMATION
								  LPAD(CR1.NR_SEQUENCIA, 5, '0') AS RP_SEQ2,
								  CM1.CD_MATERIAL AS YKH_NUM,
								  '1' AS YAK_KIGU_FLG, --(PENDENTE CAMPO)
								  CM1.CD_MATERIAL AS YHK_ID,
								  MA1.DS_MATERIAL AS YHK_NAME,
								  CM1.DS_YJ_CODE AS K_YHK_ID,
								  '                                                                            ' AS YAK_INFO_J, --(FIXED)
								  '    ' AS YAKKOU_CD, --(FIXED)
								  '   ' AS ZAIKEI_CD, --(PENDENTE CAMPO)
								  IE_ALTA_VIGILANCIA_X AS MAYAKU_FLG, 
								  ' ' AS KONGO_FLG, --(FIXED)
								  ' ' AS KASUI_FLG, --(FIXED)
								  ' ' AS IPPOU_FLG, --(FIXED)
								  CM1.QT_DOSAGEM AS YOURYO,
								  CM1.QT_DOSAGEM AS YOURYO_1TIME,
								  ' ' AS INPUT_MODE, --WAITING IBM
								  CM1.IE_TIPO_DOSAGEM AS TANI_CD,
								  OBTER_VALOR_DOMINIO(1591,CM1.IE_TIPO_DOSAGEM) AS DSP_TANI,					  

								  CASE 
								  		WHEN UPPER(CM1.CD_UNIDADE_MEDIDA) LIKE '%ML%'
								  		THEN 2
								  		WHEN UPPER(CM1.CD_UNIDADE_MEDIDA) LIKE '%AMP%'
								  		THEN 1
								  		ELSE 3
								  END AS SELECT_TANI,

								  '        ' AS WARN_FLG, --(FIXED)
								  '  ' AS TOKU_SJI, --(FIXED)
								  ' ' AS JYOBI_FLG, --(FIXED)
								  IE_ALTO_RISCO_X AS HIGHRISK_FLG, 
								  ' ' AS DSP_TANI_KBN, --(FIXED)
								  '          '  AS YOBI_FLD3,
								  --END OF MEDICINE INFORMATION
								  
								  tosho_presc_injection_pck.obter_obs_order_unity(CO1.NR_SEQUENCIA) AS OBS_ORDER_UNITY

							 FROM PESSOA_FISICA PF1
							 JOIN ATENDIMENTO_PACIENTE AP1 ON (PF1.CD_PESSOA_FISICA = AP1.CD_PESSOA_FISICA)
							 LEFT JOIN PESSOA_DOCUMENTACAO PD1 ON (PF1.CD_PESSOA_FISICA = PD1.CD_PESSOA_FISICA)
							 LEFT JOIN MEDICO MD1 ON (PD1.CD_PESSOA_FISICA = MD1.CD_PESSOA_FISICA)

							 JOIN CPOE_MATERIAL CM1 ON (AP1.NR_ATENDIMENTO = CM1.NR_ATENDIMENTO AND	
							 							CM1.NR_SEQUENCIA = (SELECT O.NR_SEQ_MAT_CPOE
							 							 					  FROM PRESCR_MATERIAL O
							 				 						   	     WHERE O.NR_PRESCRICAO = NR_PRESCRICAO_P))  

							 JOIN CPOE_ORDER_UNIT CO1 ON (CM1.NR_SEQ_CPOE_ORDER_UNIT = CO1.NR_SEQUENCIA)
							 JOIN CPOE_RP CR1 ON (CO1.NR_SEQUENCIA = CR1.NR_SEQ_CPOE_ORDER_UNIT)
						     JOIN CPOE_TIPO_PEDIDO CT1 ON (CO1.NR_SEQ_CPOE_TIPO_PEDIDO = CT1.NR_SEQUENCIA 
						                                   AND CT1.NR_SEQ_SUB_GRP = 'I')				     
						     LEFT JOIN CPOE_COMMENT_LINKAGE CML1 ON (CM1.NR_SEQUENCIA = CML1.NR_SEQ_CPOE_MATERIAL)

						     JOIN MATERIAL MA1 ON (CM1.CD_MATERIAL = MA1.CD_MATERIAL)

			            	 LEFT JOIN INTERVALO_PRESCRICAO IP1 ON (CM1.CD_INTERVALO = IP1.CD_INTERVALO)

							 JOIN BFT_ENCOUNTER_V BEV ON (AP1.NR_ATENDIMENTO = BEV.NR_ATENDIMENTO)

							 JOIN PRESCR_MATERIAL PMAT ON (CM1.NR_SEQUENCIA = PMAT.NR_SEQ_MAT_CPOE AND
							 							   CM1.CD_MATERIAL = PMAT.CD_MATERIAL)



					        WHERE PMAT.NR_PRESCRICAO = NR_PRESCRICAO_P
					          AND CR1.NR_SEQUENCIA = NR_CHAVE_W;




			C04 CURSOR FOR  SELECT CM1.DT_ATUALIZACAO,
								  CM1.NR_SEQ_MOTIVO_SUSP,
								  CO1.SI_TYPE_OF_PRESCRIPTION,
								  AP1.NR_ATENDIMENTO,
								  CM1.IE_URGENCIA,
								  PF1.CD_PESSOA_FISICA,
								  CM1.CD_MATERIAL,
								  CO1.NR_SEQUENCIA,
								  CR1.NR_SEQUENCIA,
								  MA1.IE_ALTA_VIGILANCIA,
								  MA1.IE_ALTO_RISCO,
								  CM1.NM_USUARIO
							 FROM PESSOA_FISICA PF1
							 JOIN ATENDIMENTO_PACIENTE AP1 ON (PF1.CD_PESSOA_FISICA = AP1.CD_PESSOA_FISICA)
							 JOIN CPOE_MATERIAL CM1 ON (AP1.NR_ATENDIMENTO = CM1.NR_ATENDIMENTO)  
							 JOIN CPOE_ORDER_UNIT CO1 ON (CM1.NR_SEQ_CPOE_ORDER_UNIT = CO1.NR_SEQUENCIA)
							 JOIN CPOE_RP CR1 ON (CO1.NR_SEQUENCIA = CR1.NR_SEQ_CPOE_ORDER_UNIT)
							 JOIN MATERIAL MA1 ON (CM1.CD_MATERIAL = MA1.CD_MATERIAL)
							 JOIN PRESCR_MATERIAL PMAT ON (CM1.NR_SEQUENCIA = PMAT.NR_SEQ_MAT_CPOE)
					        WHERE (CO1.SI_TYPE_OF_PRESCRIPTION IS NOT NULL AND CO1.SI_TYPE_OF_PRESCRIPTION::text <> '') 
					          AND PMAT.NR_PRESCRICAO = NR_PRESCRICAO_P;

			
BEGIN

				JPN_PRESCR_INJECTION_CHK_W := tosho_presc_injection_pck.jpn_prescription_chk(NR_PRESCRICAO_P);

				IF (JPN_PRESCR_INJECTION_CHK_W = 'N')
				THEN RETURN;
				ELSIF (JPN_PRESCR_INJECTION_CHK_W = 'S')
				THEN


			    SELECT DISTINCT CM1.NM_USUARIO
				  INTO STRICT NM_USUARIO_MEDIC_W
				  FROM PESSOA_FISICA PF1
				  JOIN ATENDIMENTO_PACIENTE AP1 ON (PF1.CD_PESSOA_FISICA = AP1.CD_PESSOA_FISICA)
				  JOIN CPOE_MATERIAL CM1 ON (AP1.NR_ATENDIMENTO = CM1.NR_ATENDIMENTO)  
				  JOIN CPOE_ORDER_UNIT CO1 ON (CM1.NR_SEQ_CPOE_ORDER_UNIT = CO1.NR_SEQUENCIA)
				  JOIN CPOE_RP CR1 ON (CO1.NR_SEQUENCIA = CR1.NR_SEQ_CPOE_ORDER_UNIT)
				  JOIN MATERIAL MA1 ON (CM1.CD_MATERIAL = MA1.CD_MATERIAL)
				  JOIN PRESCR_MATERIAL PMAT ON (CM1.NR_SEQUENCIA = PMAT.NR_SEQ_MAT_CPOE)
				 WHERE (CO1.SI_TYPE_OF_PRESCRIPTION IS NOT NULL AND CO1.SI_TYPE_OF_PRESCRIPTION::text <> '') 
				   AND PMAT.NR_PRESCRICAO = NR_PRESCRICAO_P;


			    GENERATE_INT_SERIAL_NUMBER(0, 'TOSHO_PDATA', OBTER_ESTAB_USUARIO(NM_USUARIO_MEDIC_W), NM_USUARIO_MEDIC_W, SEQUENCIAL_W, 954);	


			    CONTADOR_H0_W := 0;
				CONTADOR_H1_W := 0;
				CONTADOR_H2_W := 0;
				CONTADOR_H3_W := 0;
				CONTADOR_H4_W := 0;
				CONTADOR_H9_W := 0;
				CONTADOR_HJ_W := 0;


				EOF_KBN_W := ' ';

				COUNTER_LOOP_C01 := 0;	

				OPEN C04;
				LOOP
				FETCH C04 INTO DT_ATUALIZACAO_W,
							   NR_SEQ_MOTIVO_SUSP_W,
							   SI_TYPE_OF_PRESCRIPTION_W,
							   NR_ATENDIMENTO_W,
							   IE_URGENCIA_W,
							   CD_PESSOA_FISICA_W,
							   CD_MATERIAL_W,
							   NR_SEQ_CR_W,
							   NR_CHAVE_W,
							   IE_ALTA_VIGILANCIA_W,
							   IE_ALTO_RISCO_W,
							   NM_USUARIO_MEDIC_W;
				EXIT WHEN NOT FOUND; /* apply on C04 */


				/*PROCESSING CLASSIFICATION*/

			  	IF (coalesce(DT_ATUALIZACAO_W::text, '') = '' AND coalesce(NR_SEQ_MOTIVO_SUSP_W::text, '') = '')
				THEN SYORI_KBN_W := '1';
				ELSIF ((DT_ATUALIZACAO_W IS NOT NULL AND DT_ATUALIZACAO_W::text <> '') AND coalesce(NR_SEQ_MOTIVO_SUSP_W::text, '') = '')
				THEN SYORI_KBN_W := '2';
				ELSIF (NR_SEQ_MOTIVO_SUSP_W IS NOT NULL AND NR_SEQ_MOTIVO_SUSP_W::text <> '')
				THEN SYORI_KBN_W := '3';
				END IF;

				--PROCESSING DATE
				IF (coalesce(DT_ATUALIZACAO_W::text, '') = '')
				THEN DT_ATUALIZACAO_W := clock_timestamp();
				END IF;

				--PATIENT TYPE (NEED TO FIND THE OTHERS CODES IN THE JAPAN/INDIA DATABASE
				IF (SI_TYPE_OF_PRESCRIPTION_W = 'INPAT' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPDP' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPE' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPI' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPR' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPT')
				THEN NYUGAI_KBN_W := '2';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'OPIHO' OR SI_TYPE_OF_PRESCRIPTION_W = 'OPOOH')
				THEN NYUGAI_KBN_W := '1';
				END IF;


			    /*INDIVIDUAL ITEM1 (INJECTION ORDER INFORMATION) - THESE FIELDS DON'T CHANGE EACH LINE*/

			 	IF (coalesce(DT_ATUALIZACAO_W::text, '') = '' AND coalesce(NR_SEQ_MOTIVO_SUSP_W::text, '') = '')
				THEN REC_KBN_W := '1';
				ELSIF ((DT_ATUALIZACAO_W IS NOT NULL AND DT_ATUALIZACAO_W::text <> '') AND coalesce(NR_SEQ_MOTIVO_SUSP_W::text, '') = '')
				THEN REC_KBN_W := '2';
				ELSIF (NR_SEQ_MOTIVO_SUSP_W IS NOT NULL AND NR_SEQ_MOTIVO_SUSP_W::text <> '')
				THEN REC_KBN_W := '3';
				END IF;

				IF (coalesce(DT_ATUALIZACAO_W::text, '') = '' AND coalesce(NR_SEQ_MOTIVO_SUSP_W::text, '') = '')
				THEN SEND_KBN_W := '0';
				ELSIF (DT_ATUALIZACAO_W IS NOT NULL AND DT_ATUALIZACAO_W::text <> '')
				THEN SEND_KBN_W := '1';
				END IF;

				IF (IE_URGENCIA_W = '0')
				THEN IRAI_KBN_W := '3';
				ELSIF ((IE_URGENCIA_W IS NOT NULL AND IE_URGENCIA_W::text <> '') AND IE_URGENCIA_W != '0' OR coalesce(IE_URGENCIA_W::text, '') = '')
				THEN IRAI_KBN_W := '1';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'BRME' AND IE_URGENCIA_W != '0')
				THEN IRAI_KBN_W := 'J';
				END IF;






				--INDIVIDUAL ITEM1 (INJECTION ORDER INFORMATION) - THESE FIELDS CHANGE EACH LINE
				SELECT COUNT(AUX1.CD_MATERIAL)
				  INTO STRICT QTD_MEDIC_SOLIC
				  FROM CPOE_MATERIAL AUX1
				  JOIN PRESCR_MATERIAL PMAT ON (AUX1.NR_SEQUENCIA = PMAT.NR_SEQ_MAT_CPOE)
				 WHERE PMAT.NR_PRESCRICAO = NR_PRESCRICAO_P;	


			    SELECT COUNT(CR2.NR_SEQUENCIA)
			      INTO STRICT QTD_EOF_KBN
				  FROM CPOE_MATERIAL CM2
				  JOIN CPOE_ORDER_UNIT CO2 ON (CM2.NR_SEQ_CPOE_ORDER_UNIT = CO2.NR_SEQUENCIA)
				  JOIN CPOE_TIPO_PEDIDO CT2 ON (CO2.NR_SEQ_CPOE_TIPO_PEDIDO = CT2.NR_SEQUENCIA)
				  JOIN CPOE_RP CR2 ON (CO2.NR_SEQUENCIA = CR2.NR_SEQ_CPOE_ORDER_UNIT)
				  JOIN PRESCR_MATERIAL PMAT ON (CM2.NR_SEQUENCIA = PMAT.NR_SEQ_MAT_CPOE)
				 WHERE PMAT.NR_PRESCRICAO = NR_PRESCRICAO_P;


				IF (SI_TYPE_OF_PRESCRIPTION_W = 'BRME')
				THEN REPORT_KBN_W := '1';
				ELSE REPORT_KBN_W := '0';
				END IF;


				IF (IE_ALTO_RISCO_W = 'S')
				THEN IE_ALTO_RISCO_X := '1';
				ELSE IE_ALTO_RISCO_X := '0';
				END IF;

				IF (IE_ALTA_VIGILANCIA_W = 'S')
				THEN IE_ALTA_VIGILANCIA_X := '1';
				ELSE IE_ALTA_VIGILANCIA_X := '0';
				END IF;	


   			    IF (SI_TYPE_OF_PRESCRIPTION_W = 'OPIHO' AND IE_ALTO_RISCO_X = '1')
				THEN XX_SYBT_W := '111';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'OPIHO' AND IE_ALTO_RISCO_X = '0')
				THEN XX_SYBT_W := '110';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'OPOOH' AND IE_ALTO_RISCO_X = '1')
				THEN XX_SYBT_W := '121';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'OPOOH' AND IE_ALTO_RISCO_X = '0')
				THEN XX_SYBT_W := '120';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'INPI' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPAT' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPR' AND IE_ALTO_RISCO_X = '1')
				THEN XX_SYBT_W := '211';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'INPI' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPAT' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPR' AND IE_ALTO_RISCO_X = '0')
				THEN XX_SYBT_W := '210';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'INPT' AND IE_ALTO_RISCO_X = '1')
				THEN XX_SYBT_W := '221';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'INPT' AND IE_ALTO_RISCO_X = '0')
				THEN XX_SYBT_W := '220';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'INPDP' AND IE_ALTO_RISCO_X = '1')
				THEN XX_SYBT_W := '241';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'INPDP' AND IE_ALTO_RISCO_X = '0')
				THEN XX_SYBT_W := '240';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'BRME' AND IE_ALTO_RISCO_X = '1')
				THEN XX_SYBT_W := '251';
				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'BRME' AND IE_ALTO_RISCO_X = '0')
				THEN XX_SYBT_W := '250';
				END IF;			


				IF (SI_TYPE_OF_PRESCRIPTION_W = 'INPI' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPAT' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPR')
				THEN COUNTER_LOOP_C01 := COUNTER_LOOP_C01 + 1;
				     CONTADOR_H1_W := CONTADOR_H1_W + 1;
				     ORDER_NO_W := 'H1' || '1' || TO_CHAR(clock_timestamp(), 'YYYY') || TO_CHAR(clock_timestamp(), 'MM') || LPAD(CONTADOR_H1_W,4,0) || SEQUENCIAL_W || '00';


				DATA_NOME_ARQUIVO := 'H'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||SEQUENCIAL_W||XX_SYBT_W||TO_CHAR(DT_ATUALIZACAO_W, 'MMDD-YYYY')||'1'||'.dat';



 				FOR R_C01 IN C01 LOOP BEGIN
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ELECTRONIC_SENTENCE_TYPE, 2, 'R');								
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEND_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECEIVER_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NUMBER_COMMON_READERS, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYORI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME1, 20, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_KANA_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME1, 23, 'R');				
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KOBETU_CNT, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FORMAT_KBN, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REC_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEQ_NO, 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EOF_KBN, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_LEN, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_NUM, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TIMESTAMP1, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RESERVE, 9, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID3, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME2, 23, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS2, 1, 'R');	
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_HEIGHT, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGHT, 8, 'R');									
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TAIHYO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGTH_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_CCR, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD2, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ADDR, 80, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ZIP, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TEL, 15, 'R');
				    CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_RX, 6, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID2, 11, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_NO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ED_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IRAI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REPORT_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ST_DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG1, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG3, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG4, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHICKEN_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHIKEN_NAME, 69, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODR_COMMENT, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.START_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.END_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EXEC_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_COMMENT, 50, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DR_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_NS_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO3, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO4, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO5, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD3, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R3, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO6, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD4, 3, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R4, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO7, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD5, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R5, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO8, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD6, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R6, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BARCODE, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REG_NAME, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BASE_DAY, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD1, 10, 'R');
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OBS_ORDER_UNITY, 535, 'R'); --OBS ORDER UNITY PRS 801
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_NUM, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ1, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYH_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.SYH_KKN, 000), 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.KAKU_HI, 00), 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOUBI_SJI, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KISUGUSU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHZ_SJI, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODP_SJI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_NO, 5, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 1, 'R'); --AS YOHO_SYBT
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 8, 'R'); --AS INTERVAL_CD
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_DISP_1, 60, 'R');


					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_NAI, 25, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYOCHI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FKN_FLG, 1, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 6, 'R'); --AS SCHEDULE
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 12, 'R'); --AS FKN_SJI
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT, 60, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.STD_YOHO_CD, 0000000000000000), 16, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_REC, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ2, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.YKH_NUM, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_KIGU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_ID, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_NAME, 48, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.K_YHK_ID, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_INFO_J, 46, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAKKOU_CD, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ZAIKEI_CD, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAKU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KONGO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KASUI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IPPOU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO_1TIME, 12, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.INPUT_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TANI_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI, 4, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SELECT_TANI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.WARN_FLG, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TOKU_SJI, 2, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.JYOBI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HIGHRISK_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD3, 10, 'R');


					PERFORM set_config('tosho_presc_injection_pck.ds_line2_w', current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767) || current_setting('tosho_presc_injection_pck.ds_line_w')::varchar(32767) || CHR(13), false);


	                 DATA_NOME_ARQUIVO_LOG := 'H'||'S'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||'.log';

				     CALL PLS_UTL_FILE_PCK.NOVA_LEITURA('142', DATA_NOME_ARQUIVO_LOG, 'A');

				     DS_ARQ_LOG_MESSAGE := 'File successfully uploaded for Injection Order Info ' || DATA_NOME_ARQUIVO || ', ' || 'Time of Transmission: ' || TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS');				

					 CALL PLS_UTL_FILE_PCK.ESCREVER(DS_ARQ_LOG_MESSAGE);
					 CALL PLS_UTL_FILE_PCK.FECHAR_ARQUIVO('T');					


					 END;
					 END LOOP;								

				     CALL CALL CALL tosho_presc_injection_pck.generate_file(147, DATA_NOME_ARQUIVO, current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767));


				ELSIF (SI_TYPE_OF_PRESCRIPTION_W = 'INPT' OR SI_TYPE_OF_PRESCRIPTION_W = 'INPE')
				THEN COUNTER_LOOP_C01 := COUNTER_LOOP_C01 + 1;
				     CONTADOR_H2_W := CONTADOR_H2_W + 1;
				     ORDER_NO_W := 'H2' || '1' || TO_CHAR(clock_timestamp(), 'YYYY') || TO_CHAR(clock_timestamp(), 'MM') || LPAD(CONTADOR_H1_W,4,0) || SEQUENCIAL_W ||  '00';


				DATA_NOME_ARQUIVO := 'H'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||SEQUENCIAL_W||XX_SYBT_W||TO_CHAR(DT_ATUALIZACAO_W, 'MMDD-YYYY')||'1'||'.dat';



				FOR R_C01 IN C01 LOOP BEGIN
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ELECTRONIC_SENTENCE_TYPE, 2, 'R');								
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEND_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECEIVER_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NUMBER_COMMON_READERS, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYORI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME1, 20, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_KANA_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME1, 23, 'R');				
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KOBETU_CNT, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FORMAT_KBN, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REC_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEQ_NO, 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EOF_KBN, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_LEN, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_NUM, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TIMESTAMP1, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RESERVE, 9, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID3, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME2, 23, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS2, 1, 'R');	
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_HEIGHT, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGHT, 8, 'R');									
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TAIHYO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGTH_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_CCR, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD2, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ADDR, 80, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ZIP, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TEL, 15, 'R');
				    CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_RX, 6, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID2, 11, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_NO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ED_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IRAI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REPORT_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ST_DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG1, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG3, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG4, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHICKEN_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHIKEN_NAME, 69, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODR_COMMENT, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.START_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.END_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EXEC_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_COMMENT, 50, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DR_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_NS_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO3, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO4, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO5, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD3, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R3, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO6, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD4, 3, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R4, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO7, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD5, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R5, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO8, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD6, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R6, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BARCODE, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REG_NAME, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BASE_DAY, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD1, 10, 'R');
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OBS_ORDER_UNITY, 535, 'R'); --OBS ORDER UNITY PRS 801
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_NUM, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ1, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYH_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.SYH_KKN, 000), 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.KAKU_HI, 00), 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOUBI_SJI, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KISUGUSU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHZ_SJI, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODP_SJI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_NO, 5, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 1, 'R'); --AS YOHO_SYBT
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 8, 'R'); --AS INTERVAL_CD
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_DISP_1, 60, 'R');


					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_NAI, 25, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYOCHI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FKN_FLG, 1, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 6, 'R'); --AS SCHEDULE
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 12, 'R'); --AS FKN_SJI
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT, 60, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.STD_YOHO_CD, 0000000000000000), 16, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_REC, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ2, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.YKH_NUM, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_KIGU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_ID, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_NAME, 48, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.K_YHK_ID, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_INFO_J, 46, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAKKOU_CD, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ZAIKEI_CD, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAKU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KONGO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KASUI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IPPOU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO_1TIME, 12, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.INPUT_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TANI_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI, 4, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SELECT_TANI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.WARN_FLG, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TOKU_SJI, 2, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.JYOBI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HIGHRISK_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD3, 10, 'R');


					PERFORM set_config('tosho_presc_injection_pck.ds_line2_w', current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767) || current_setting('tosho_presc_injection_pck.ds_line_w')::varchar(32767) || CHR(13), false);


	                 DATA_NOME_ARQUIVO_LOG := 'H'||'S'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||'.log';

				     CALL PLS_UTL_FILE_PCK.NOVA_LEITURA('142', DATA_NOME_ARQUIVO_LOG, 'A');

				     DS_ARQ_LOG_MESSAGE := 'File successfully uploaded for Injection Order Info ' || DATA_NOME_ARQUIVO || ', ' || 'Time of Transmission: ' || TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS');				

					 CALL PLS_UTL_FILE_PCK.ESCREVER(DS_ARQ_LOG_MESSAGE);
					 CALL PLS_UTL_FILE_PCK.FECHAR_ARQUIVO('T');					


					 END;
					 END LOOP;


					 CALL CALL CALL tosho_presc_injection_pck.generate_file(147, DATA_NOME_ARQUIVO, current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767));


				ELSIF (SI_TYPE_OF_PRESCRIPTION_W  = 'OPOOH')
				THEN COUNTER_LOOP_C01 := COUNTER_LOOP_C01 + 1;
				     CONTADOR_H9_W := CONTADOR_H9_W + 1;
				     ORDER_NO_W := 'H9' || '1' || TO_CHAR(clock_timestamp(), 'YYYY') || TO_CHAR(clock_timestamp(), 'MM') || LPAD(CONTADOR_H1_W,4,0) || SEQUENCIAL_W ||  '00';

				     DATA_NOME_ARQUIVO := 'H'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||SEQUENCIAL_W||XX_SYBT_W||TO_CHAR(DT_ATUALIZACAO_W, 'MMDD-YYYY')||'1'||'.dat';



				FOR R_C01 IN C01 LOOP BEGIN
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ELECTRONIC_SENTENCE_TYPE, 2, 'R');								
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEND_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECEIVER_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NUMBER_COMMON_READERS, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYORI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME1, 20, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_KANA_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME1, 23, 'R');				
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KOBETU_CNT, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FORMAT_KBN, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REC_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEQ_NO, 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EOF_KBN, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_LEN, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_NUM, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TIMESTAMP1, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RESERVE, 9, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID3, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME2, 23, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS2, 1, 'R');	
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_HEIGHT, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGHT, 8, 'R');									
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TAIHYO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGTH_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_CCR, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD2, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ADDR, 80, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ZIP, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TEL, 15, 'R');
				    CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_RX, 6, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID2, 11, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_NO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ED_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IRAI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REPORT_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ST_DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG1, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG3, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG4, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHICKEN_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHIKEN_NAME, 69, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODR_COMMENT, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.START_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.END_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EXEC_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_COMMENT, 50, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DR_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_NS_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO3, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO4, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO5, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD3, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R3, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO6, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD4, 3, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R4, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO7, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD5, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R5, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO8, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD6, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R6, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BARCODE, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REG_NAME, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BASE_DAY, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD1, 10, 'R');
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OBS_ORDER_UNITY, 535, 'R'); --OBS ORDER UNITY PRS 801
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_NUM, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ1, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYH_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.SYH_KKN, 000), 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.KAKU_HI, 00), 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOUBI_SJI, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KISUGUSU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHZ_SJI, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODP_SJI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_NO, 5, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 1, 'R'); --AS YOHO_SYBT
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 8, 'R'); --AS INTERVAL_CD
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_DISP_1, 60, 'R');


					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_NAI, 25, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYOCHI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FKN_FLG, 1, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 6, 'R'); --AS SCHEDULE
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 12, 'R'); --AS FKN_SJI
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT, 60, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.STD_YOHO_CD, 0000000000000000), 16, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_REC, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ2, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.YKH_NUM, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_KIGU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_ID, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_NAME, 48, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.K_YHK_ID, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_INFO_J, 46, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAKKOU_CD, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ZAIKEI_CD, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAKU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KONGO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KASUI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IPPOU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO_1TIME, 12, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.INPUT_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TANI_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI, 4, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SELECT_TANI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.WARN_FLG, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TOKU_SJI, 2, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.JYOBI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HIGHRISK_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD3, 10, 'R');


					PERFORM set_config('tosho_presc_injection_pck.ds_line2_w', current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767) || current_setting('tosho_presc_injection_pck.ds_line_w')::varchar(32767) || CHR(13), false);					


	                 DATA_NOME_ARQUIVO_LOG := 'H'||'S'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||'.log';

				     CALL PLS_UTL_FILE_PCK.NOVA_LEITURA('142', DATA_NOME_ARQUIVO_LOG, 'A');

				     DS_ARQ_LOG_MESSAGE := 'File successfully uploaded for Injection Order Info ' || DATA_NOME_ARQUIVO || ', ' || 'Time of Transmission: ' || TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS');				

					 CALL PLS_UTL_FILE_PCK.ESCREVER(DS_ARQ_LOG_MESSAGE);
					 CALL PLS_UTL_FILE_PCK.FECHAR_ARQUIVO('T');					


					 END;
					 END LOOP;

					 CALL CALL CALL tosho_presc_injection_pck.generate_file(141, DATA_NOME_ARQUIVO, current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767));


				ELSIF (SI_TYPE_OF_PRESCRIPTION_W  = 'OPIHO')
				THEN COUNTER_LOOP_C01 := COUNTER_LOOP_C01 + 1;
				     CONTADOR_H4_W := CONTADOR_H4_W + 1;
				     ORDER_NO_W := 'H4' || '1' || TO_CHAR(clock_timestamp(), 'YYYY') || TO_CHAR(clock_timestamp(), 'MM') || LPAD(CONTADOR_H0_W,4,0) || SEQUENCIAL_W ||  '00';

				     DATA_NOME_ARQUIVO := 'H'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||SEQUENCIAL_W||XX_SYBT_W||TO_CHAR(DT_ATUALIZACAO_W, 'MMDD-YYYY')||'1'||'.dat';



				FOR R_C01 IN C01 LOOP BEGIN
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ELECTRONIC_SENTENCE_TYPE, 2, 'R');								
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEND_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECEIVER_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NUMBER_COMMON_READERS, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYORI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME1, 20, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_KANA_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME1, 23, 'R');				
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KOBETU_CNT, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FORMAT_KBN, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REC_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEQ_NO, 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EOF_KBN, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_LEN, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_NUM, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TIMESTAMP1, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RESERVE, 9, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID3, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME2, 23, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS2, 1, 'R');	
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_HEIGHT, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGHT, 8, 'R');									
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TAIHYO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGTH_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_CCR, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD2, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ADDR, 80, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ZIP, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TEL, 15, 'R');
				    CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_RX, 6, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID2, 11, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_NO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ED_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IRAI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REPORT_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ST_DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG1, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG3, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG4, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHICKEN_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHIKEN_NAME, 69, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODR_COMMENT, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.START_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.END_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EXEC_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_COMMENT, 50, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DR_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_NS_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO3, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO4, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO5, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD3, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R3, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO6, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD4, 3, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R4, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO7, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD5, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R5, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO8, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD6, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R6, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BARCODE, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REG_NAME, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BASE_DAY, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD1, 10, 'R');
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OBS_ORDER_UNITY, 535, 'R'); --OBS ORDER UNITY PRS 801
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_NUM, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ1, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYH_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.SYH_KKN, 000), 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.KAKU_HI, 00), 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOUBI_SJI, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KISUGUSU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHZ_SJI, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODP_SJI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_NO, 5, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 1, 'R'); --AS YOHO_SYBT
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 8, 'R'); --AS INTERVAL_CD
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_DISP_1, 60, 'R');


					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_NAI, 25, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYOCHI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FKN_FLG, 1, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 6, 'R'); --AS SCHEDULE
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 12, 'R'); --AS FKN_SJI
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT, 60, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.STD_YOHO_CD, 0000000000000000), 16, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_REC, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ2, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.YKH_NUM, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_KIGU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_ID, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_NAME, 48, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.K_YHK_ID, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_INFO_J, 46, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAKKOU_CD, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ZAIKEI_CD, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAKU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KONGO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KASUI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IPPOU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO_1TIME, 12, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.INPUT_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TANI_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI, 4, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SELECT_TANI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.WARN_FLG, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TOKU_SJI, 2, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.JYOBI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HIGHRISK_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD3, 10, 'R');


					PERFORM set_config('tosho_presc_injection_pck.ds_line2_w', current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767) || current_setting('tosho_presc_injection_pck.ds_line_w')::varchar(32767) || CHR(13), false);					


	                 DATA_NOME_ARQUIVO_LOG := 'H'||'S'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||'.log';

				     CALL PLS_UTL_FILE_PCK.NOVA_LEITURA('142', DATA_NOME_ARQUIVO_LOG, 'A');

				     DS_ARQ_LOG_MESSAGE := 'File successfully uploaded for Injection Order Info ' || DATA_NOME_ARQUIVO || ', ' || 'Time of Transmission: ' || TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS');				

					 CALL PLS_UTL_FILE_PCK.ESCREVER(DS_ARQ_LOG_MESSAGE);
					 CALL PLS_UTL_FILE_PCK.FECHAR_ARQUIVO('T');					


					 END;
					 END LOOP;


					 CALL CALL CALL tosho_presc_injection_pck.generate_file(141, DATA_NOME_ARQUIVO, current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767));



				ELSIF (SI_TYPE_OF_PRESCRIPTION_W  = 'BRME')
				THEN COUNTER_LOOP_C01 := COUNTER_LOOP_C01 + 1;
				     CONTADOR_HJ_W := CONTADOR_HJ_W + 1;
				     ORDER_NO_W := 'HJ' || '1' || TO_CHAR(clock_timestamp(), 'YYYY') || TO_CHAR(clock_timestamp(), 'MM') || LPAD(CONTADOR_HJ_W,4,0) || SEQUENCIAL_W ||  '00';

				DATA_NOME_ARQUIVO := 'H'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||SEQUENCIAL_W||XX_SYBT_W||TO_CHAR(DT_ATUALIZACAO_W, 'MMDD-YYYY')||'1'||'.dat';




				FOR R_C01 IN C01 LOOP BEGIN
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ELECTRONIC_SENTENCE_TYPE, 2, 'R');								
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEND_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECEIVER_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NUMBER_COMMON_READERS, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYORI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME1, 20, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_KANA_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME1, 23, 'R');				
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KOBETU_CNT, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FORMAT_KBN, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REC_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEQ_NO, 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EOF_KBN, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_LEN, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_NUM, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TIMESTAMP1, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RESERVE, 9, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID3, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME2, 23, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS2, 1, 'R');	
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_HEIGHT, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGHT, 8, 'R');									
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TAIHYO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGTH_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_CCR, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD2, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ADDR, 80, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ZIP, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TEL, 15, 'R');
				    CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_RX, 6, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID2, 11, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_NO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ED_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IRAI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REPORT_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ST_DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG1, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG3, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG4, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHICKEN_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHIKEN_NAME, 69, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODR_COMMENT, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.START_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.END_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EXEC_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_COMMENT, 50, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DR_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_NS_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO3, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO4, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO5, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD3, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R3, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO6, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD4, 3, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R4, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO7, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD5, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R5, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO8, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD6, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R6, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BARCODE, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REG_NAME, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BASE_DAY, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD1, 10, 'R');
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OBS_ORDER_UNITY, 535, 'R'); --OBS ORDER UNITY PRS 801
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_NUM, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ1, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYH_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.SYH_KKN, 000), 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.KAKU_HI, 00), 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOUBI_SJI, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KISUGUSU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHZ_SJI, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODP_SJI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_NO, 5, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 1, 'R'); --AS YOHO_SYBT
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 8, 'R'); --AS INTERVAL_CD
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_DISP_1, 60, 'R');


					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_NAI, 25, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYOCHI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FKN_FLG, 1, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 6, 'R'); --AS SCHEDULE
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 12, 'R'); --AS FKN_SJI
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT, 60, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.STD_YOHO_CD, 0000000000000000), 16, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_REC, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ2, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.YKH_NUM, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_KIGU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_ID, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_NAME, 48, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.K_YHK_ID, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_INFO_J, 46, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAKKOU_CD, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ZAIKEI_CD, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAKU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KONGO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KASUI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IPPOU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO_1TIME, 12, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.INPUT_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TANI_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI, 4, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SELECT_TANI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.WARN_FLG, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TOKU_SJI, 2, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.JYOBI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HIGHRISK_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD3, 10, 'R');


					PERFORM set_config('tosho_presc_injection_pck.ds_line2_w', current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767) || current_setting('tosho_presc_injection_pck.ds_line_w')::varchar(32767) || CHR(13), false);


	                 DATA_NOME_ARQUIVO_LOG := 'H'||'S'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||'.log';

				     CALL PLS_UTL_FILE_PCK.NOVA_LEITURA('142', DATA_NOME_ARQUIVO_LOG, 'A');

				     DS_ARQ_LOG_MESSAGE := 'File successfully uploaded for Injection Order Info ' || DATA_NOME_ARQUIVO || ', ' || 'Time of Transmission: ' || TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS');				

					 CALL PLS_UTL_FILE_PCK.ESCREVER(DS_ARQ_LOG_MESSAGE);
					 CALL PLS_UTL_FILE_PCK.FECHAR_ARQUIVO('T');					


					 END;
					 END LOOP;

					 CALL CALL CALL tosho_presc_injection_pck.generate_file(147, DATA_NOME_ARQUIVO, current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767));


				ELSIF (SI_TYPE_OF_PRESCRIPTION_W  = 'INPDP')
				THEN COUNTER_LOOP_C01 := COUNTER_LOOP_C01 + 1;
				     CONTADOR_H3_W := CONTADOR_HJ_W + 1;
				     ORDER_NO_W := 'H3' || '1' || TO_CHAR(clock_timestamp(), 'YYYY') || TO_CHAR(clock_timestamp(), 'MM') || LPAD(CONTADOR_HJ_W,4,0) || SEQUENCIAL_W ||  '00';

				DATA_NOME_ARQUIVO := 'H'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||SEQUENCIAL_W||XX_SYBT_W||TO_CHAR(DT_ATUALIZACAO_W, 'MMDD-YYYY')||'1'||'.dat';



				FOR R_C01 IN C01 LOOP BEGIN
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ELECTRONIC_SENTENCE_TYPE, 2, 'R');								
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEND_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECEIVER_SIDE_SYSTEM_CODE, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NUMBER_COMMON_READERS, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYORI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CREATION_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO1, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME1, 20, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID1, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_KANA_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SH_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME1, 23, 'R');				
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH1, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD1, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME1, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KOBETU_CNT, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FORMAT_KBN, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REC_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SEQ_NO, 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EOF_KBN, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_LEN, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RECORD_NUM, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TIMESTAMP1, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RESERVE, 9, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ID3, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KN_NAME2, 23, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_KJ_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_SEX2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_BIRTH2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_STATUS2, 1, 'R');	
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_HEIGHT, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGHT, 8, 'R');									
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TAIHYO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_WEIGTH_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_CCR, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BYOTO_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_CD2, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ROOM_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ADDR, 80, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_ZIP, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.PT_TEL, 15, 'R');
				    CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.XX_SYBT2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_NO2, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_RX, 6, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.NYUGAI_KBN2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_ID2, 11, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DR_NAME2, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OP_NAME, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_NO, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAK_ED_DATE, 8, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IN_TIME2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ORDER_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IRAI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REPORT_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STATUS1, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ST_DO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG1, 1, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG3, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG4, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_FLG5, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHICKEN_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHIKEN_NAME, 69, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODR_COMMENT, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.START_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.END_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.EXEC_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_DATE2, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_COMMENT, 50, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.STOP_RSN_FLG2, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DR_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_NS_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_OP_ID, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.LAST_TIME, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO3, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R1, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO4, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R2, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO5, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD3, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R3, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO6, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD4, 3, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R4, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO7, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD5, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R5, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BUMON_NO8, 15, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TAKA_KA_CD6, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KA_NAME_R6, 6, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BARCODE, 20, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD1, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SET_CD2, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.REG_NAME, 40, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.BASE_DAY, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD1, 10, 'R');
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.OBS_ORDER_UNITY, 535, 'R'); --OBS ORDER UNITY PRS 801
					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_NUM, 5, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ1, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYH_DATE, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.SYH_KKN, 000), 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.KAKU_HI, 00), 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOUBI_SJI, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KISUGUSU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CHZ_SJI, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ODP_SJI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_NO, 5, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 1, 'R'); --AS YOHO_SYBT
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 8, 'R'); --AS INTERVAL_CD
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_DISP_1, 60, 'R');


					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOHO_NAI, 25, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SYOCHI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FKN_FLG, 1, 'R');

					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 6, 'R'); --AS SCHEDULE
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(' ', 12, 'R'); --AS FKN_SJI
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.CMT_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT_SYU, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.FR_CMT, 60, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.RP_HOKEN_NAME, 14, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.STD_YOHO_CD, 0000000000000000), 16, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD2, 10, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YKH_REC, 7, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.RP_SEQ2, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(coalesce(R_C01.YKH_NUM, 00000), 5, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_KIGU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_ID, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YHK_NAME, 48, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.K_YHK_ID, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAK_INFO_J, 46, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YAKKOU_CD, 4, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.ZAIKEI_CD, 3, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.MAYAKU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KONGO_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.KASUI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.IPPOU_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO, 12, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOURYO_1TIME, 12, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.INPUT_MODE, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TANI_CD, 2, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI, 4, 'R');CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.SELECT_TANI, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.WARN_FLG, 8, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.TOKU_SJI, 2, 'R');					
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.JYOBI_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.HIGHRISK_FLG, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.DSP_TANI_KBN, 1, 'R');
					CALL CALL CALL CALL CALL CALL CALL CALL CALL CALL tosho_presc_injection_pck.append_text(R_C01.YOBI_FLD3, 10, 'R');


					PERFORM set_config('tosho_presc_injection_pck.ds_line2_w', current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767) || current_setting('tosho_presc_injection_pck.ds_line_w')::varchar(32767) || CHR(13), false);


	                 DATA_NOME_ARQUIVO_LOG := 'H'||'S'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||'.log';

				     CALL PLS_UTL_FILE_PCK.NOVA_LEITURA('142', DATA_NOME_ARQUIVO_LOG, 'A');

				     DS_ARQ_LOG_MESSAGE := 'File successfully uploaded for Injection Order Info ' || DATA_NOME_ARQUIVO || ', ' || 'Time of Transmission: ' || TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS');				

					 CALL PLS_UTL_FILE_PCK.ESCREVER(DS_ARQ_LOG_MESSAGE);
					 CALL PLS_UTL_FILE_PCK.FECHAR_ARQUIVO('T');					


					 END;
					 END LOOP;

					 CALL CALL CALL tosho_presc_injection_pck.generate_file(147, DATA_NOME_ARQUIVO, current_setting('tosho_presc_injection_pck.ds_line2_w')::varchar(32767));

				END IF;


				END LOOP;
				CLOSE C04;



			    DS_LOG_MESSAGE := 'File successfully uploaded for Prescription Support System '
				                  || CHR(13)
								  || 'Prescription Number: ' || NR_PRESCRICAO_P
								  || CHR(13)
								  || ' Date of upload: ' || TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS');

				RECORD_INTEGRATION_CALL_LOG(NM_USUARIO_MEDIC_W, NM_USUARIO_MEDIC_W, clock_timestamp(), 'JAPAN_TOSHO_PDATA',
											'PRESCRIPTION SUPPORT SYSTEM', 'T', 'E', NULL, DS_LOG_MESSAGE, 
											NULL, DS_LOG_MESSAGE, DATA_NOME_ARQUIVO, LOG_SEQUENCE_NUMBER_W, 
											NR_PRESCRICAO_P, 929);	

			END IF;													

			EXCEPTION
			WHEN OTHERS THEN

				DS_SCRIPT_RESEND_ERROR := 'TOSHO_PRESC_INJECTION_PCK.JPN_PRESCRIPTION_SUPPORT ('
										  || NR_PRESCRICAO_P
										  || ');';

				DS_LOG_MESSAGE := 'Error occured while sending the integration message for Prescription Support System'
								  || CHR(13)
								  || 'Prescription Number: ' || NR_PRESCRICAO_P
								  || CHR(13)
								  || 'Time of Failure: ' || clock_timestamp();

				RECORD_INTEGRATION_CALL_LOG(NM_USUARIO_MEDIC_W, NM_USUARIO_MEDIC_W, clock_timestamp(), 'JAPAN_TOSHO_PDATA',
											'PRESCRIPTION SUPPORT SYSTEM', 'F', 'E', DS_SCRIPT_RESEND_ERROR, 
											DS_LOG_MESSAGE, NULL, DS_LOG_MESSAGE, DATA_NOME_ARQUIVO, 
											LOG_SEQUENCE_NUMBER_W, NR_PRESCRICAO_P, 929);


				DATA_NOME_ARQUIVO_LOG := 'H'||'S'||'BI'||'AB'||TO_CHAR(clock_timestamp(), 'YYYYMMDD')||'.log';
				DS_ARQ_LOG_MESSAGE := TO_CHAR(clock_timestamp(), 'YYYYMMDD HH24MISS') || ' Error occured in file creation for Prescription Support System ' || ', In CPOE ' ||  ' Tasy';

			    CALL PLS_UTL_FILE_PCK.NOVA_LEITURA('142', DATA_NOME_ARQUIVO_LOG, 'A');				
				CALL PLS_UTL_FILE_PCK.ESCREVER(DS_ARQ_LOG_MESSAGE);
				CALL PLS_UTL_FILE_PCK.FECHAR_ARQUIVO('T');															

			END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tosho_presc_injection_pck.jpn_prescription_support (NR_PRESCRICAO_P bigint) FROM PUBLIC;
