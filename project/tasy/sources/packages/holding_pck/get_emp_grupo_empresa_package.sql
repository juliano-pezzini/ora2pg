-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION holding_pck.get_emp_grupo_empresa ( cd_empresa_p bigint, cd_funcao_p bigint, cd_perfil_p bigint, nm_usuario_param_p text, nr_seq_obj_schem_param_p bigint default null, ie_nivel_acesso_p text DEFAULT NULL) RETURNS varchar AS $body$
DECLARE

  w_permissao varchar(1);

BEGIN
  begin
    select  distinct 'S'
    into STRICT  w_permissao
    from  grupo_emp_estrutura a,
      estabelecimento b
    where  a.nr_seq_grupo  =  holding_pck.get_acesso_grupo_emp(  cd_funcao_p,
                  cd_perfil_p,
                  nm_usuario_param_p,
                  nr_seq_obj_schem_param_p,
                  ie_nivel_acesso_p,
                  cd_empresa_p)
    and  a.cd_empresa  =  b.cd_empresa;
  exception
    when others then
      w_permissao := 'N';
  end;

  return w_permissao;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION holding_pck.get_emp_grupo_empresa ( cd_empresa_p bigint, cd_funcao_p bigint, cd_perfil_p bigint, nm_usuario_param_p text, nr_seq_obj_schem_param_p bigint default null, ie_nivel_acesso_p text DEFAULT NULL) FROM PUBLIC;
