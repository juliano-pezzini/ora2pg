-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION holding_pck.get_acesso_usu_funcao ( cd_funcao_p bigint, cd_perfil_p bigint, nm_usuario_param_p text, nr_seq_obj_schem_param_p bigint default null, ie_nivel_acesso_p text DEFAULT NULL) RETURNS varchar AS $body$
DECLARE

  ds_retorno_w  varchar(1):= 'N';

BEGIN
  begin
    select  distinct 'S'
    into STRICT  ds_retorno_w
    from  regra_nivel_acesso_empresa
    where  cd_funcao    =  cd_funcao_p
    AND (cd_perfil = cd_perfil_p OR coalesce(cd_perfil::text, '') = '')
    and  ie_nivel_acesso    =  ie_nivel_acesso_p
    and (nm_usuario_param  =  nm_usuario_param_p or
      nm_usuario_param  IS  NULL)
    and (nr_seq_obj_schem_param  =  nr_seq_obj_schem_param_p or
      coalesce(nr_seq_obj_schem_param::text, '') = '');
  exception
    when no_data_found then
      ds_retorno_w:= 'N';
  end;

  return ds_retorno_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION holding_pck.get_acesso_usu_funcao ( cd_funcao_p bigint, cd_perfil_p bigint, nm_usuario_param_p text, nr_seq_obj_schem_param_p bigint default null, ie_nivel_acesso_p text DEFAULT NULL) FROM PUBLIC;
