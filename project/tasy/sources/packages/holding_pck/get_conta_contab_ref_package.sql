-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION holding_pck.get_conta_contab_ref (cd_empresa_p bigint, cd_conta_referencia_p conta_contabil.cd_conta_referencia%type) RETURNS varchar AS $body$
DECLARE


cd_conta_contabil_w	conta_contabil.cd_conta_contabil%type;
				

BEGIN
  begin
	select	c.cd_conta_contabil
	into STRICT		cd_conta_contabil_w
	from 	conta_contabil c,
     			grupo_emp_estrutura g
	where 	c.cd_empresa 			= g.cd_empresa
	and 		g.nr_seq_grupo 			= holding_pck.get_grupo_emp_usuario_vigente(cd_empresa_p)
	and (c.cd_conta_referencia  = cd_conta_referencia_p or c.cd_conta_contabil = cd_conta_referencia_p)
	and 		c.cd_empresa				= cd_empresa_p;
  exception
  when others then
	cd_conta_contabil_w	:= null;
  end;
  return cd_conta_contabil_w;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION holding_pck.get_conta_contab_ref (cd_empresa_p bigint, cd_conta_referencia_p conta_contabil.cd_conta_referencia%type) FROM PUBLIC;
