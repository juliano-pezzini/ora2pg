-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_obj_plussoft_pck.obter_regra_carencia ( nr_seq_plano_p pls_proposta_plano.nr_seq_plano%type, nr_seq_proposta_p pls_proposta_adesao.nr_sequencia%type, nr_seq_benef_proposta_p pls_proposta_beneficiario.nr_sequencia%type, nr_seq_regra_p pls_regra_carencia_padrao.nr_seq_regra%type) RETURNS varchar AS $body$
DECLARE

nr_seq_grupo_carencia_w		bigint;
nr_seq_tipo_carencia_w		bigint;
nr_seq_regra_w			bigint;
qt_dias_padrao_w		integer;
dt_inclusao_operadora_w		timestamp;
dt_fim_vigencia_w		timestamp;
qt_registros_w			bigint;
ie_carencia_plano_w		varchar(10);
ie_copiar_carencia_grupo_w	varchar(10);
qt_reg_prod_w			bigint;
qt_reg_prop_benef_w		bigint;
qt_reg_prop_w			bigint;
nr_seq_plano_benef_w		bigint;
nr_seq_tipo_carencia_aux_w	bigint;
ds_regra_w			pls_regra_carencia.ds_regra%type;

C01 CURSOR FOR
	SELECT	b.nr_seq_grupo_carencia,
		b.nr_seq_tipo_carencia,
		coalesce(b.qt_dias_padrao,0),
		b.ie_carencia_plano,
		b.ie_copiar_carencia_grupo,
		b.nr_seq_regra
	from	pls_regra_carencia_padrao b
	where	nr_seq_regra	= coalesce(nr_seq_regra_p,nr_seq_regra);

C02 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_tipo_carencia
	where	nr_seq_grupo	= nr_seq_grupo_carencia_w
	and	ie_cpt		= 'N';


BEGIN
--Retorna nada
return null;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_obj_plussoft_pck.obter_regra_carencia ( nr_seq_plano_p pls_proposta_plano.nr_seq_plano%type, nr_seq_proposta_p pls_proposta_adesao.nr_sequencia%type, nr_seq_benef_proposta_p pls_proposta_beneficiario.nr_sequencia%type, nr_seq_regra_p pls_regra_carencia_padrao.nr_seq_regra%type) FROM PUBLIC;
