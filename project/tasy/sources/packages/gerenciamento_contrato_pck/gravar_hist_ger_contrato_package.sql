-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE gerenciamento_contrato_pck.gravar_hist_ger_contrato (nr_seq_contrato_p bigint, nr_seq_ger_contrato_p bigint, nm_usuario_p text, ds_historico_p text) AS $body$
DECLARE

													
		nr_sequencia_w contrato_ger_hist.nr_sequencia%type;
		ds_historico_w contrato_ger_hist.ds_historico%type;
		
		
BEGIN
			
			ds_historico_w := ds_historico_p;
		
			select nextval('contrato_ger_hist_seq')
			  into STRICT nr_sequencia_w
		;
			begin
				insert into contrato_ger_hist(nr_sequencia,
											   nr_seq_ger_contrato,
											   ds_historico,
											   nm_usuario,
											   nm_usuario_nrec,
											   dt_atualizacao,
											   dt_atualizacao_nrec)
											   values (nr_sequencia_w,
											   nr_seq_ger_contrato_p,
											   ds_historico_w,
											   nm_usuario_p,
											   nm_usuario_p,
											   clock_timestamp(),
											   clock_timestamp());
				commit;
			end;

	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerenciamento_contrato_pck.gravar_hist_ger_contrato (nr_seq_contrato_p bigint, nr_seq_ger_contrato_p bigint, nm_usuario_p text, ds_historico_p text) FROM PUBLIC;
