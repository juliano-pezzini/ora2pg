-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_sip_pck.obter_tipo_atend_item ( cd_classif_item_p sip_item_assistencial.cd_classificacao%type) RETURNS SIP_NV_DADOS.IE_TIPO_ATENDIMENTO%TYPE AS $body$
DECLARE


ds_retorno_w	sip_nv_dados.ie_tipo_atendimento%type;

BEGIN

-- jjung OS 558830 01/03/2013 - 	Criada function para obter o tipo de atendimento que deve ser filtrado para cada item assistencial.

-- 	Ambulatorial

if (cd_classif_item_p in ('A','B','C','D')) then
	ds_retorno_w := 'A';
--	Internacao

elsif (cd_classif_item_p in ('E', 'EX', 'EY', 'F', 'G')) then
	ds_retorno_w := 'I';
-- Para o item H pode ser vinculado qualquer tipo de atendimento pois este deve conter os itens que nao se encaixam em qualquer 

-- outro operacao.

elsif (cd_classif_item_p = 'H') then
	ds_retorno_w := null;
--	Odontologico

elsif (cd_classif_item_p in ('I')) then
	ds_retorno_w := 'O';
else
	ds_retorno_w := null;
end if;

return ds_retorno_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_sip_pck.obter_tipo_atend_item ( cd_classif_item_p sip_item_assistencial.cd_classificacao%type) FROM PUBLIC;
