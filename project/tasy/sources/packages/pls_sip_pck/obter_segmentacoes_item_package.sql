-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_sip_pck.obter_segmentacoes_item ( ie_ambulatorial_p sip_item_assistencial.ie_ambulatorial%type, ie_hospitalar_p sip_item_assistencial.ie_hospitalar%type, ie_hospitalar_obs_p sip_item_assistencial.ie_hospitalar_obs%type, ie_odontologico_p sip_item_assistencial.ie_odontologico%type) RETURNS SETOF PLS_SIP_PCK.TABELA_SEGMENTACAO AS $body$
DECLARE


dados_segmentacao_w 	pls_sip_pck.dados_segmentacao;

BEGIN

-- Ambulatorial

if (ie_ambulatorial_p = 'S') then
	
	dados_segmentacao_w.ie_segmentacao_sip := 1;
	
	RETURN NEXT dados_segmentacao_w;
	
	dados_segmentacao_w.ie_segmentacao_sip := null;
-- Hospitalar

elsif (ie_hospitalar_p = 'S') then
	
	dados_segmentacao_w.ie_segmentacao_sip := 2;
	
	RETURN NEXT dados_segmentacao_w;
	
	dados_segmentacao_w.ie_segmentacao_sip := null;
-- Hospitalar Obstetricia

elsif (ie_hospitalar_obs_p = 'S') then
	
	dados_segmentacao_w.ie_segmentacao_sip := 3;
	
	RETURN NEXT dados_segmentacao_w;
	
	dados_segmentacao_w.ie_segmentacao_sip := null;
-- Odontologico

elsif (ie_odontologico_p = 'S') then
	
	dados_segmentacao_w.ie_segmentacao_sip := 4;
	
	RETURN NEXT dados_segmentacao_w;
	
	dados_segmentacao_w.ie_segmentacao_sip := null;
end if;

-- Retorna as linhas geradas.

return;
END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_sip_pck.obter_segmentacoes_item ( ie_ambulatorial_p sip_item_assistencial.ie_ambulatorial%type, ie_hospitalar_p sip_item_assistencial.ie_hospitalar%type, ie_hospitalar_obs_p sip_item_assistencial.ie_hospitalar_obs%type, ie_odontologico_p sip_item_assistencial.ie_odontologico%type) FROM PUBLIC;
