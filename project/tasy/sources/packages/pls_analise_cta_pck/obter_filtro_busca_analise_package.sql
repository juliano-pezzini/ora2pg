-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_analise_cta_pck.obter_filtro_busca_analise ( ds_param_busca_p text) RETURNS TABLE_DADOS_BUSCA_ANALISE AS $body$
DECLARE


dados_filtro_w  table_dados_busca_analise;
ds_param_w  varchar(255);
ds_valor_w  varchar(255);

-- retona chave=valor

c_param_valor CURSOR(  ds_param_busca_pc text) FOR
  SELECT  ds_valor_vchr2, nr_valor_number, dt_valor_date
  from  table(pls_util_pck.converter_lista_valores(ds_param_busca_pc, ';'));

-- retorna a chave em um registro e o valor em outro

c_valor CURSOR(  ds_chave_valor_pc text) FOR
  SELECT  ds_valor_vchr2, nr_valor_number, dt_valor_date
  from  table(pls_util_pck.converter_lista_valores(ds_chave_valor_pc, '='));

BEGIN

for r_c_param_valor_w in c_param_valor(ds_param_busca_p) loop

  ds_param_w := null;

  for r_c_valor_w in c_valor(r_c_param_valor_w.ds_valor_vchr2) loop
  
    case(ds_param_w)
      when 'nr_seq_analise' then
        dados_filtro_w.nr_seq_analise := r_c_valor_w.nr_valor_number;
      when 'nr_nota_cred_deb' then
        dados_filtro_w.nr_nota_cred_deb := r_c_valor_w.nr_valor_number;
      when 'nr_seq_fatura' then
        dados_filtro_w.nr_seq_fatura := r_c_valor_w.ds_valor_vchr2;
      when 'nr_nota_cred_deb_reemb' then
        dados_filtro_w.nr_nota_cred_deb_reemb := r_c_valor_w.ds_valor_vchr2;
      when 'cd_unimed_origem' then
        dados_filtro_w.cd_unimed_origem := r_c_valor_w.ds_valor_vchr2;
      when 'cd_guia' then
        dados_filtro_w.cd_guia := r_c_valor_w.ds_valor_vchr2;
      when 'cd_guia_operadora' then
        dados_filtro_w.cd_guia_operadora := r_c_valor_w.ds_valor_vchr2;
      when 'cd_guia_prest' then
        dados_filtro_w.cd_guia_prest := r_c_valor_w.ds_valor_vchr2;
      when 'nr_seq_prestador' then
        dados_filtro_w.nr_seq_prestador := r_c_valor_w.nr_valor_number;
      when 'cd_prestador' then
        dados_filtro_w.cd_prestador := r_c_valor_w.ds_valor_vchr2;
      when 'nr_seq_lote_analise' then
        dados_filtro_w.nr_seq_lote_analise := r_c_valor_w.nr_valor_number;
      when 'cd_usuario_plano' then
        dados_filtro_w.cd_usuario_plano := r_c_valor_w.ds_valor_vchr2;
      when 'nr_seq_segurado' then
        dados_filtro_w.nr_seq_segurado := r_c_valor_w.nr_valor_number;
      when 'situacao_analise_rg.ItemIndex' then
        dados_filtro_w.situacao_analise_rg_ii := r_c_valor_w.nr_valor_number;
      when 'nm_usuario_audit' then
        dados_filtro_w.nm_usuario_audit := r_c_valor_w.ds_valor_vchr2;
      when 'analise_lib_automatic_cb.checked' then
        dados_filtro_w.analise_lib_automatic_cb := r_c_valor_w.nr_valor_number;
      when 'analise_sem_grup_vin_cb.checked' then
        dados_filtro_w.analise_sem_grup_vin_cb := r_c_valor_w.nr_valor_number;
      when 'ie_status' then
        dados_filtro_w.ie_status := r_c_valor_w.ds_valor_vchr2;
      when 'ie_tipo_guia' then
        dados_filtro_w.ie_tipo_guia := r_c_valor_w.ds_valor_vchr2;
      when 'nr_seq_grupo_auditor_atual' then
        dados_filtro_w.nr_seq_grupo_auditor_atual := r_c_valor_w.nr_valor_number;
      when 'cd_contrato' then
        dados_filtro_w.cd_contrato := r_c_valor_w.ds_valor_vchr2;
      when 'ie_formacao_preco' then
        dados_filtro_w.ie_formacao_preco := r_c_valor_w.ds_valor_vchr2;
      when 'ie_origem_conta' then
        dados_filtro_w.ie_origem_conta := r_c_valor_w.ds_valor_vchr2;
      when 'ie_tipo_conta' then
        dados_filtro_w.ie_tipo_conta := r_c_valor_w.ds_valor_vchr2;
      when 'ie_origem_analise' then
        dados_filtro_w.ie_origem_analise := r_c_valor_w.ds_valor_vchr2;
      when 'ie_origem_analise_in' then
        dados_filtro_w.ie_origem_analise_in := r_c_valor_w.ds_valor_vchr2;
      when 'nr_seq_protocolo' then
        dados_filtro_w.nr_seq_protocolo := r_c_valor_w.nr_valor_number;
      when 'nr_seq_conta' then
        dados_filtro_w.nr_seq_conta := r_c_valor_w.nr_valor_number;
      when 'ie_tipo_data_rg.ItemIndex' then
        dados_filtro_w.ie_tipo_data_rg_ii := r_c_valor_w.nr_valor_number;
      when 'dt_de' then
        dados_filtro_w.dt_de := r_c_valor_w.dt_valor_date;
      when 'dt_ate' then
        dados_filtro_w.dt_ate := r_c_valor_w.dt_valor_date;
      when 'nr_seq_lote_contest' then
        dados_filtro_w.nr_seq_lote_contest := r_c_valor_w.nr_valor_number;
      when 'cd_contrato_int' then
        dados_filtro_w.cd_contrato_int := r_c_valor_w.nr_valor_number;
      when 'nr_seq_oper_congenere' then
        dados_filtro_w.nr_seq_oper_congenere := r_c_valor_w.nr_valor_number;
      when 'nr_seq_tipo_atendimento' then
        dados_filtro_w.nr_seq_tipo_atendimento := r_c_valor_w.nr_valor_number;
      when 'tipo_apresentacao_rg.ItemIndex' then
        dados_filtro_w.tipo_apresentacao_rg_ii := r_c_valor_w.nr_valor_number;
      when 'nr_protocolo_prestador' then
        dados_filtro_w.nr_protocolo_prestador := r_c_valor_w.nr_valor_number;
      when 'ie_pcmso_cb.checked' then
        dados_filtro_w.ie_pcmso_cb := r_c_valor_w.nr_valor_number;
      when 'nr_seq_grupo_prestador' then
        dados_filtro_w.nr_seq_grupo_prestador := r_c_valor_w.nr_valor_number;
      when 'nr_seq_grupo_auditor' then
        dados_filtro_w.nr_seq_grupo_auditor := r_c_valor_w.nr_valor_number;
      when 'ie_beneficiario_pcmso_cb.checked' then
        dados_filtro_w.ie_beneficiario_pcmso_cb := r_c_valor_w.nr_valor_number;
      when 'nr_seq_ocorrencia' then
        dados_filtro_w.nr_seq_ocorrencia := r_c_valor_w.nr_valor_number;
      when 'ie_refaturamento_rg.ItemIndex' then
        dados_filtro_w.ie_refaturamento := r_c_valor_w.nr_valor_number;
      when 'qt_dias_prazo' then
        dados_filtro_w.qt_dias_prazo := r_c_valor_w.nr_valor_number;
      when 'cd_condicao_pagamento' then
        dados_filtro_w.cd_condicao_pagamento := r_c_valor_w.nr_valor_number;
      when 'nr_seq_tipo_prestador' then
        dados_filtro_w.nr_seq_tipo_prestador := r_c_valor_w.nr_valor_number;
      when 'ds_status' then
        dados_filtro_w.ds_status := r_c_valor_w.ds_valor_vchr2;
      when 'ie_buscar_guias_atend_cb.checked' then
        dados_filtro_w.ie_buscar_guias_atend_cb := r_c_valor_w.nr_valor_number;
      when 'cd_procedimento' then
        dados_filtro_w.cd_procedimento := r_c_valor_w.ds_valor_vchr2;
      when 'ie_origem_proced' then
        dados_filtro_w.ie_origem_proced := r_c_valor_w.ds_valor_vchr2;
      when 'ie_tipo_segurado' then
        dados_filtro_w.ie_tipo_segurado := r_c_valor_w.ds_valor_vchr2;
      else
        null;
    end case;

    ds_param_w := r_c_valor_w.ds_valor_vchr2;
  end loop;
end loop;

return dados_filtro_w;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_analise_cta_pck.obter_filtro_busca_analise ( ds_param_busca_p text) FROM PUBLIC;
