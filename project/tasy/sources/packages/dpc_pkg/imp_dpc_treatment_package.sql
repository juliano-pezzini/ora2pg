-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE dpc_pkg.imp_dpc_treatment ( nr_seq_edition_p bigint, si_1_or_2_p text, cd_mdc_p text, cd_classification_p text, cd_corresp_code_p text, cd_treatment_flag_p text, cd_combination_surgery_p text, ds_treatment_1_p text, ds_treatment_2_p text, cd_treatment_1_p text, cd_treatment_2_p text, si_change_category_p text, dt_start_p text, dt_end_p text, dt_update_p text, nm_usuario_p text) AS $body$
BEGIN

insert into dpc_treatment(
	nr_sequencia,    
	dt_atualizacao,         
	nm_usuario,
	dt_atualizacao_nrec,         
	nm_usuario_nrec,  
	nr_seq_edition,   
	si_1_or_2,  
	cd_mdc,  
	cd_classification, 
	cd_corresp_code,   
	cd_treatment_flag,  
	cd_combination_surgery,
	ds_treatment_1,
	ds_treatment_2,
	cd_treatment_1, 
	cd_treatment_2, 
	si_change_category,  
	dt_start,         
	dt_end,         
	dt_update)	
values (
	nextval('dpc_treatment_seq'),    
	clock_timestamp(),         
	nm_usuario_p,
    clock_timestamp(),         
	nm_usuario_p,  
	nr_seq_edition_p,   
	si_1_or_2_p,  
	cd_mdc_p,  
	cd_classification_p, 
	cd_corresp_code_p,   
	cd_treatment_flag_p,  
	cd_combination_surgery_p,
	ds_treatment_1_p,
	ds_treatment_2_p,
	cd_treatment_1_p, 
	cd_treatment_2_p, 
	si_change_category_p,  
    CASE WHEN dt_start_p='99999999' THEN null WHEN dt_start_p='00000000' THEN null  ELSE to_date(dt_start_p,'yyyy-mm-dd') END ,        
	CASE WHEN dt_end_p='99999999' THEN null WHEN dt_end_p='00000000' THEN null  ELSE to_date(dt_end_p,'yyyy-mm-dd') END ,      
    CASE WHEN dt_update_p='99999999' THEN null WHEN dt_update_p='00000000' THEN null  ELSE to_date(dt_update_p,'yyyy-mm-dd') END );
end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE dpc_pkg.imp_dpc_treatment ( nr_seq_edition_p bigint, si_1_or_2_p text, cd_mdc_p text, cd_classification_p text, cd_corresp_code_p text, cd_treatment_flag_p text, cd_combination_surgery_p text, ds_treatment_1_p text, ds_treatment_2_p text, cd_treatment_1_p text, cd_treatment_2_p text, si_change_category_p text, dt_start_p text, dt_end_p text, dt_update_p text, nm_usuario_p text) FROM PUBLIC;
