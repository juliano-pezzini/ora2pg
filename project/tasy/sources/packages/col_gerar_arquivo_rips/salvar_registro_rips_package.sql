-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE col_gerar_arquivo_rips.salvar_registro_rips ( nr_lote_p bigint ) AS $body$
BEGIN
        FOR c01 IN current_setting('col_gerar_arquivo_rips.c_dominio_rips')::LOOP CURSOR
            INSERT INTO col_arq_registro_rips(
                nr_sequencia,
                cd_estabelecimento,
                dt_atualizacao,
                nm_usuario,
                dt_atualizacao_nrec,
                nm_usuario_nrec,
                nr_seq_lote,
                ie_tipo_registro
            ) VALUES (
                nextval('col_arq_registro_rips_seq'),
                wheb_usuario_pck.get_cd_estabelecimento,
                clock_timestamp(),
                wheb_usuario_pck.get_nm_usuario,
                clock_timestamp(),
                wheb_usuario_pck.get_nm_usuario,
                nr_lote_p,
                c01.ie_tipo_registro
            );

        END LOOP;
    END;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE col_gerar_arquivo_rips.salvar_registro_rips ( nr_lote_p bigint ) FROM PUBLIC;
