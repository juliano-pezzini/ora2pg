-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE sus_obter_inco_ativa_pck.set_sus_obter_inco_ativa_trg () AS $body$
BEGIN
        if (coalesce(current_setting('sus_obter_inco_ativa_pck.registros_w')::numeric(38),0) > 0) then
                for i in 1..registros_w loop
                        if (to_char(current_setting('sus_obter_inco_ativa_pck.array_cd_inconsistencia')::strarray(i)) = to_char(current_setting('sus_obter_inco_ativa_pck.cd_inconsistencia_w')::sus_inconsistencia.cd_inconsistencia%type) and
                                to_char(current_setting('sus_obter_inco_ativa_pck.array_cd_estabelecimento')::strarray(i)) = to_char(current_setting('sus_obter_inco_ativa_pck.cd_estabelecimento_w')::smallint)) then
                                PERFORM set_config('sus_obter_inco_ativa_pck.posicao_valor_w', i, false);
                                exit;
                        end if;
                end loop;

                if (coalesce(current_setting('sus_obter_inco_ativa_pck.posicao_valor_w')::numeric(38),0) > 0) then
                        current_setting('sus_obter_inco_ativa_pck.array_ie_consiste')::strarray(current_setting('sus_obter_inco_ativa_pck.posicao_valor_w')::numeric(38)) := current_setting('sus_obter_inco_ativa_pck.ie_consiste_w')::varchar(1);
                        current_setting('sus_obter_inco_ativa_pck.array_ie_aih')::strarray(current_setting('sus_obter_inco_ativa_pck.posicao_valor_w')::numeric(38)) := current_setting('sus_obter_inco_ativa_pck.ie_aih_w')::varchar(1);
                        current_setting('sus_obter_inco_ativa_pck.array_ie_apac')::strarray(current_setting('sus_obter_inco_ativa_pck.posicao_valor_w')::numeric(38)) := current_setting('sus_obter_inco_ativa_pck.ie_apac_w')::varchar(1);
                        current_setting('sus_obter_inco_ativa_pck.array_ie_bpa_con')::strarray(current_setting('sus_obter_inco_ativa_pck.posicao_valor_w')::numeric(38)) := current_setting('sus_obter_inco_ativa_pck.ie_bpa_con_w')::varchar(1);
                        current_setting('sus_obter_inco_ativa_pck.array_ie_bpa_ind')::strarray(current_setting('sus_obter_inco_ativa_pck.posicao_valor_w')::numeric(38)) := current_setting('sus_obter_inco_ativa_pck.ie_bpa_ind_w')::varchar(1);
                end if;
        end if;
        end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE sus_obter_inco_ativa_pck.set_sus_obter_inco_ativa_trg () FROM PUBLIC;
