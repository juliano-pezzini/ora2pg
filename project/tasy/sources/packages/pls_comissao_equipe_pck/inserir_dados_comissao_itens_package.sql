-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE pls_comissao_equipe_pck.inserir_dados_comissao_itens ( nm_usuario_p usuario.nm_usuario%type) AS $body$
BEGIN

if (current_setting('pls_comissao_equipe_pck.tb_nr_seq_item_mens_w')::pls_util_cta_pck.t_number_table.count > 0) then
	forall i in current_setting('pls_comissao_equipe_pck.tb_nr_seq_item_mens_w')::pls_util_cta_pck.t_number_table.first..tb_nr_seq_item_mens_w.last
		insert	into	pls_comissao_benef_item(	nr_sequencia, nr_seq_comissao_benef, ie_tipo_item,
				vl_item_mensalidade, tx_comissao, vl_incremento,
				vl_comissao, vl_origem, nr_seq_plano,
				nr_seq_plano_sca, nr_seq_bonificacao, ie_sca_embutido,
				dt_atualizacao, nm_usuario, dt_atualizacao_nrec,
				nm_usuario_nrec, nr_seq_regra_equipe, nr_seq_regra_equipe_sup,
				vl_lanc_adic_item, nr_seq_item_mens)
			values (	nextval('pls_comissao_benef_item_seq'), current_setting('pls_comissao_equipe_pck.tb_nr_seq_comissao_benef_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_ie_tipo_item_w')::pls_util_cta_pck.t_varchar2_table_2(i),
				current_setting('pls_comissao_equipe_pck.tb_vl_item_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_pr_comissao_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_vl_comissao_w')::pls_util_cta_pck.t_number_table(i),
				current_setting('pls_comissao_equipe_pck.tb_vl_comissao_venda_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_vl_origem_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_nr_seq_plano_item_w')::pls_util_cta_pck.t_number_table(i),
				current_setting('pls_comissao_equipe_pck.tb_nr_seq_sca_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_nr_seq_bonificacao_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_ie_sca_embutido_w')::pls_util_cta_pck.t_varchar2_table_1(i),
				clock_timestamp(), nm_usuario_p, clock_timestamp(),
				nm_usuario_p, current_setting('pls_comissao_equipe_pck.tb_nr_seq_regra_meta_w')::pls_util_cta_pck.t_number_table(i), current_setting('pls_comissao_equipe_pck.tb_nr_seq_regra_equipe_sup_w')::pls_util_cta_pck.t_number_table(i),
				0, current_setting('pls_comissao_equipe_pck.tb_nr_seq_item_mens_w')::pls_util_cta_pck.t_number_table(i));
	commit;
	
	limpar_vetor_itens;
end if;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_comissao_equipe_pck.inserir_dados_comissao_itens ( nm_usuario_p usuario.nm_usuario%type) FROM PUBLIC;
