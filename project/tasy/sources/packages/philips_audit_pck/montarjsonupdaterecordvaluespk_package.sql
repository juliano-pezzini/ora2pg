-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE philips_audit_pck.montarjsonupdaterecordvaluespk () AS $body$
DECLARE

		auxPKValue varchar(32000);
	
BEGIN
		jsonUpdateRecordValuesPK := '';

		auxPKValue := '';

		if (ListRecordFieldsPK.COUNT > 0) then
			for i in 1 .. ListRecordFieldsPK.COUNT loop

				if i > 1 then
					auxPKValue := auxPKValue || ',';
				end if;

				auxPKValue := auxPKValue || ' {' ||
								'"tableName" : "'||ListRecordFieldsPK[i].TableName||'",'||
								'"columnName" : "'||ListRecordFieldsPK[i].ColumnName||'",'||
								'"columnDescription" : "'||ListRecordFieldsPK[i].ColumnDescription||'",'||
								'"type" : "'||philips_audit_pck.getjsonrecordtype(ListRecordFieldsPK[i].ColumnType) || '",'||
								'"value" : '||GetJsonRecordValue(ListRecordFieldsPK[i].ColumnType, ListRecordFieldsPK[i].ColumnNewValue)||'}';
			end loop;
		end if;

		jsonUpdateRecordValuesPK := '"recordID" : [' || auxPKValue || '],';

	end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE philips_audit_pck.montarjsonupdaterecordvaluespk () FROM PUBLIC;
