-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION philips_audit_pck.getaddress () RETURNS varchar AS $body$
DECLARE

ADDRESS_SERVER  varchar(2000);

BEGIN

if OBTER_SE_BASE_WHEB = 'S' then
   select obter_valor_param_usuario(0, 240, wheb_usuario_pck.get_cd_perfil, wheb_usuario_pck.get_nm_usuario, wheb_usuario_pck.get_cd_estabelecimento) into STRICT ADDRESS_SERVER;
else
   select max(vl_parametro) into STRICT ADDRESS_SERVER from funcao_parametro where cd_funcao = 0 and nr_sequencia = 240;
end if;

ADDRESS_SERVER := trim(both ADDRESS_SERVER);

if (ADDRESS_SERVER IS NOT NULL AND ADDRESS_SERVER::text <> '')
   and (length(ADDRESS_SERVER) > 0)
   and (substr(ADDRESS_SERVER, length(ADDRESS_SERVER), 1) = '/') then

   ADDRESS_SERVER := substr(ADDRESS_SERVER, 1, length(ADDRESS_SERVER)-1);

end if;


return ADDRESS_SERVER;
end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION philips_audit_pck.getaddress () FROM PUBLIC;
