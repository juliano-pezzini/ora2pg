-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE ptu_aviso_imp_pck.inserir_a525_item ( nr_sequencia_p INOUT ptu_aviso_ret_item.nr_sequencia%type, nm_usuario_p ptu_aviso_ret_item.nm_usuario%type, nr_seq_ret_guia_p ptu_aviso_ret_item.nr_seq_ret_guia%type, dt_execucao_p text, hr_inicial_p ptu_aviso_ret_item.hr_inicial%type, hr_final_p ptu_aviso_ret_item.hr_final%type, cd_tabela_p ptu_aviso_ret_item.cd_tabela%type, cd_item_p ptu_aviso_ret_item.cd_item%type, ds_item_p ptu_aviso_ret_item.ds_item%type, qt_executada_p ptu_aviso_ret_item.qt_executada%type, cd_unidade_medida_p ptu_aviso_ret_item.cd_unidade_medida%type, cd_despesa_p ptu_aviso_ret_item.cd_despesa%type, ie_via_acesso_p ptu_aviso_ret_item.ie_via_acesso%type, ie_tecnica_utilizada_p ptu_aviso_ret_item.ie_tecnica_utilizada%type, tx_reducao_acrescimo_p ptu_aviso_ret_item.tx_reducao_acrescimo%type, vl_unitario_p ptu_aviso_ret_item.vl_unitario%type, vl_total_p ptu_aviso_ret_item.vl_total%type, vl_glosa_p ptu_aviso_ret_item.vl_glosa%type, nr_seq_item_tiss_p ptu_aviso_ret_item.nr_seq_item_tiss%type) AS $body$
DECLARE

/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:	Insere os dados do A525 e devolve a chave primaria gerada
-------------------------------------------------------------------------------------------------------------------
Locais de chamada direta: 
[ ]  Objetos do dicionario [X] Tasy (Delphi/Java) [ X] Portal [ X]  Relatorios [ ] Outros:
-------------------------------------------------------------------------------------------------------------------
Pontos de atencao:

Alteracoes:
-------------------------------------------------------------------------------------------------------------------
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
dt_execucao_w	ptu_aviso_ret_item.dt_execucao%type;
hr_inicial_w	ptu_aviso_ret_item.hr_inicial%type;
hr_final_w	ptu_aviso_ret_item.hr_final%type;


BEGIN

dt_execucao_w	:= ptu_aviso_imp_pck.converte_data(dt_execucao_p);
hr_inicial_w	:= ptu_aviso_imp_pck.concatena_data_hora(dt_execucao_p, hr_inicial_p);
hr_final_w	:= ptu_aviso_imp_pck.concatena_data_hora(dt_execucao_p, hr_final_p);
	

insert into ptu_aviso_ret_item(	nr_sequencia,
				dt_atualizacao,
				nm_usuario,
				dt_atualizacao_nrec,
				nm_usuario_nrec,
				nr_seq_ret_guia,
				dt_execucao,
				hr_inicial,
				hr_final,
				cd_tabela,
				cd_item,
				ds_item,
				qt_executada,
				cd_unidade_medida,
				cd_despesa,
				ie_via_acesso,
				ie_tecnica_utilizada,
				tx_reducao_acrescimo,
				vl_unitario,
				vl_total,
				vl_glosa,
				nr_seq_item_tiss)
values (nextval('ptu_aviso_ret_item_seq'),
	clock_timestamp(),
	nm_usuario_p,
	clock_timestamp(),
	nm_usuario_p,
	nr_seq_ret_guia_p,
	dt_execucao_w,
	hr_inicial_p,
	hr_final_p,
	cd_tabela_p,
	cd_item_p,
	ds_item_p,
	qt_executada_p,
	cd_unidade_medida_p,
	cd_despesa_p,
	ie_via_acesso_p,
	ie_tecnica_utilizada_p,
	tx_reducao_acrescimo_p,
	vl_unitario_p,
	vl_total_p,
	vl_glosa_p,
	nr_seq_item_tiss_p) returning nr_sequencia into nr_sequencia_p;

commit;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ptu_aviso_imp_pck.inserir_a525_item ( nr_sequencia_p INOUT ptu_aviso_ret_item.nr_sequencia%type, nm_usuario_p ptu_aviso_ret_item.nm_usuario%type, nr_seq_ret_guia_p ptu_aviso_ret_item.nr_seq_ret_guia%type, dt_execucao_p text, hr_inicial_p ptu_aviso_ret_item.hr_inicial%type, hr_final_p ptu_aviso_ret_item.hr_final%type, cd_tabela_p ptu_aviso_ret_item.cd_tabela%type, cd_item_p ptu_aviso_ret_item.cd_item%type, ds_item_p ptu_aviso_ret_item.ds_item%type, qt_executada_p ptu_aviso_ret_item.qt_executada%type, cd_unidade_medida_p ptu_aviso_ret_item.cd_unidade_medida%type, cd_despesa_p ptu_aviso_ret_item.cd_despesa%type, ie_via_acesso_p ptu_aviso_ret_item.ie_via_acesso%type, ie_tecnica_utilizada_p ptu_aviso_ret_item.ie_tecnica_utilizada%type, tx_reducao_acrescimo_p ptu_aviso_ret_item.tx_reducao_acrescimo%type, vl_unitario_p ptu_aviso_ret_item.vl_unitario%type, vl_total_p ptu_aviso_ret_item.vl_total%type, vl_glosa_p ptu_aviso_ret_item.vl_glosa%type, nr_seq_item_tiss_p ptu_aviso_ret_item.nr_seq_item_tiss%type) FROM PUBLIC;
