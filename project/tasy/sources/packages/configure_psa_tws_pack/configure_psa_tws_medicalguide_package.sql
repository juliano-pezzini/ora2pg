-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE configure_psa_tws_pack.configure_psa_tws_medicalguide ( nm_attempts client.vl_allowed_login_attempts%type) AS $body$
DECLARE


id_application      	application.id%type;

ds_role_medicalguide	role.ds_role%TYPE := 'MedicalGuide';
nm_role_medical_guide	role.nm_role%TYPE := 'medicalGuide';

ds_role_cli_auth_medicalguide role.ds_role%TYPE := 'CliAuthMedicalGuide';


BEGIN

/*++++++++++++++++++++++++++++++++++++++++++++++ Create application and datasouce to MEDICAL GUIDE +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/

id_application  := configure_psa_tws_pack.create_application_client( nm_attempts, 'MEDICALGUIDE', 'medicalguide', 'HPMS', 'hpms', id_application );
CALL configure_psa_tws_pack.create_role( ds_role_medicalguide,  nm_role_medical_guide, id_application, 'N');

--Create permissions

CALL CALL configure_psa_tws_pack.create_permission_role( current_setting('configure_psa_tws_pack.permission_email_desc')::permission.ds_tag%TYPE, current_setting('configure_psa_tws_pack.permission_email_tag')::permission.ds_tag%TYPE, ds_role_medicalguide, nm_role_medical_guide,  id_application, 'N');
CALL CALL configure_psa_tws_pack.create_permission_role( current_setting('configure_psa_tws_pack.permission_reports_desc')::permission.ds_tag%TYPE, current_setting('configure_psa_tws_pack.permission_reports_tag')::permission.ds_tag%TYPE, ds_role_medicalguide, nm_role_medical_guide,  id_application, 'N' );
CALL CALL configure_psa_tws_pack.create_permission_role( current_setting('configure_psa_tws_pack.permission_utils_desc')::permission.ds_tag%TYPE, current_setting('configure_psa_tws_pack.permission_utils_tag')::permission.ds_tag%TYPE, ds_role_medicalguide,  nm_role_medical_guide, id_application, 'N');

commit;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE configure_psa_tws_pack.configure_psa_tws_medicalguide ( nm_attempts client.vl_allowed_login_attempts%type) FROM PUBLIC;
