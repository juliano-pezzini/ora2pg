-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE configure_psa_tws_pack.delete_permission_role ( permission_tag_p permission.ds_tag%type, id_application_p application.id%type) AS $body$
DECLARE

id_permission_w       	permission.id%type;


BEGIN

select 	max(id)
into STRICT	id_permission_w
from	permission
where	ds_tag 		= permission_tag_p
and	id_application 	= id_application_p;

if (id_permission_w IS NOT NULL AND id_permission_w::text <> '') then

	delete from role_permission
	where 	id_permission = id_permission_w;

	delete 	from permission
	where  	id = id_permission_w;
end if;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE configure_psa_tws_pack.delete_permission_role ( permission_tag_p permission.ds_tag%type, id_application_p application.id%type) FROM PUBLIC;
