-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION pls_filtro_regra_event_rgl_pck.obter_restricao_prestador ( nr_seq_prestador_p pls_pp_cta_filtro_prest.nr_seq_prestador%type, cd_prestador_cod_p pls_pp_cta_filtro_prest.cd_prestador_cod%type, ds_campos_p out text, valor_bind_p INOUT sql_pck.t_dado_bind) AS $body$
DECLARE


dados_restricao_w	varchar(2500);
ds_campos_w 		varchar(500);


BEGIN

-- inicializar o retorno

dados_restricao_w := null;
ds_campos_w := null;

-- Estamos enviando campos a mais que o padrao para utilizar na rotina ie_reg_valido_fil_prest

-- tipo de prestador protocolo

ds_campos_w := ds_campos_w || ',' || pls_util_pck.enter_w || pls_filtro_regra_event_rgl_pck.obter_alias_tabela('protocolo') || '.nr_sequencia nr_seq_protocolo' || pls_util_pck.enter_w;
-- prestador de pagamento da pls_conta_medica_resumo

ds_campos_w := ds_campos_w || ',' || pls_util_pck.enter_w || pls_filtro_regra_event_rgl_pck.obter_alias_tabela('resumo') || '.nr_seq_prestador_pgto' || pls_util_pck.enter_w;

-- Seq prestador

if (nr_seq_prestador_p IS NOT NULL AND nr_seq_prestador_p::text <> '') then	
	dados_restricao_w := dados_restricao_w || '	and	' || pls_filtro_regra_event_rgl_pck.obter_alias_tabela('prestador') || '.nr_sequencia = :nr_seq_prestador_pc' || pls_util_pck.enter_w;
	valor_bind_p := sql_pck.bind_variable(':nr_seq_prestador_pc', nr_seq_prestador_p, valor_bind_p);
end if;

-- Cod prestador

if (cd_prestador_cod_p IS NOT NULL AND cd_prestador_cod_p::text <> '') then	
	dados_restricao_w := dados_restricao_w || '	and	' || pls_filtro_regra_event_rgl_pck.obter_alias_tabela('prestador') || '.cd_prestador = :cd_prestador_cod_pc' || pls_util_pck.enter_w;
	valor_bind_p := sql_pck.bind_variable(':cd_prestador_cod_pc', cd_prestador_cod_p, valor_bind_p);
end if;

-- atribui valor as variaveis out

ds_campos_p := ds_campos_w;

return;

END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON FUNCTION pls_filtro_regra_event_rgl_pck.obter_restricao_prestador ( nr_seq_prestador_p pls_pp_cta_filtro_prest.nr_seq_prestador%type, cd_prestador_cod_p pls_pp_cta_filtro_prest.cd_prestador_cod%type, ds_campos_p out text, valor_bind_p INOUT sql_pck.t_dado_bind) FROM PUBLIC;
