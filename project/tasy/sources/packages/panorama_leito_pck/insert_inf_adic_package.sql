-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE PROCEDURE panorama_leito_pck.insert_inf_adic ( ie_campo_panorama_p bigint, nr_seq_interno_p bigint, cd_unidade_basica_p text, cd_unidade_compl_p text, cd_expressao_p bigint, nr_seq_texto_p bigint, ds_valor_p text, nr_valor_p bigint, dt_valor_p timestamp, nr_seq_apres_p bigint, ds_mascara_p text default null, pIeConcluido text DEFAULT NULL, cd_pessoa_fisica_p text default null, nr_atendimento_p bigint default null) AS $body$
DECLARE


	ie_atrasado_w	varchar(1)	:= 'N';

	
BEGIN

	/* Teste para campo que deva mostrar atraso */

	if (ie_campo_panorama_p = 12) then
		ie_atrasado_w	:= 'S';
	else
		ie_atrasado_w	:= 'N';
	end if;

	insert into w_pan_info_adicional(cd_unidade_basica,
		cd_unidade_compl,
		nr_seq_interno,
		cd_exp_label,
		nr_seq_texto_label,
		ds_info_adic,
		nr_info_adic,
		dt_info_adic,
		nr_seq_apres,
		ie_concluido,
		ds_mascara,
		ie_campo_panorama,
		ie_atrasado,
		cd_pessoa_fisica,
		nr_atendimento)
	values (cd_unidade_basica_p,
		cd_unidade_compl_p,
		nr_seq_interno_p,
		cd_expressao_p,
		nr_seq_texto_p,
		substr(ds_valor_p,1,255),
		nr_valor_p,
		dt_valor_p,
		nr_seq_apres_p,
		pIeConcluido,
		ds_mascara_p,
		ie_campo_panorama_p,
		ie_atrasado_w,
		cd_pessoa_fisica_p,
		nr_atendimento_p);
	END;

$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE panorama_leito_pck.insert_inf_adic ( ie_campo_panorama_p bigint, nr_seq_interno_p bigint, cd_unidade_basica_p text, cd_unidade_compl_p text, cd_expressao_p bigint, nr_seq_texto_p bigint, ds_valor_p text, nr_valor_p bigint, dt_valor_p timestamp, nr_seq_apres_p bigint, ds_mascara_p text default null, pIeConcluido text DEFAULT NULL, cd_pessoa_fisica_p text default null, nr_atendimento_p bigint default null) FROM PUBLIC;
