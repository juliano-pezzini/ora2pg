-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';




CREATE OR REPLACE FUNCTION nicu_clinical_rules_md_pck.set_color_type_md (valueToCompare_p bigint, redLowQuantity_p bigint, redHighQuantity_p bigint, yellowLowQuantity_p bigint, yellowHighQuantity_p bigint ) RETURNS varchar AS $body$
BEGIN
		if ((redLowQuantity_p IS NOT NULL AND redLowQuantity_p::text <> '') and coalesce(valueToCompare_p,0) <= redLowQuantity_p) then
            return 'R';
        elsif ((redHighQuantity_p IS NOT NULL AND redHighQuantity_p::text <> '') and coalesce(valueToCompare_p,0) >= redHighQuantity_p) then
            return 'R';
        elsif ((yellowLowQuantity_p IS NOT NULL AND yellowLowQuantity_p::text <> '') and coalesce(valueToCompare_p,0) <= yellowLowQuantity_p) then
            return 'Y';
        elsif ((yellowHighQuantity_p IS NOT NULL AND yellowHighQuantity_p::text <> '') and coalesce(valueToCompare_p,0) >= yellowHighQuantity_p) then
            return 'Y';
        else
            return '';
        end if;
	end;


$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION nicu_clinical_rules_md_pck.set_color_type_md (valueToCompare_p bigint, redLowQuantity_p bigint, redHighQuantity_p bigint, yellowLowQuantity_p bigint, yellowHighQuantity_p bigint ) FROM PUBLIC;
