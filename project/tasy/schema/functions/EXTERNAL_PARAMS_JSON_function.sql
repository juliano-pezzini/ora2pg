-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION external_params_json (cdPessoaFisica_p text, nrSeqCaptacao_p text, ieTipoAtendimento_p text, ieTipoPessoa_p text, nrOrigemGestaoAtend_p text, nmContatoPF_p text, nrTelefonePF_p text) RETURNS varchar AS $body$
DECLARE


ds_retorno_w	varchar(2000);
nr_seq_participante_w bigint;

BEGIN
  select 	max(nr_sequencia)
	into STRICT	nr_seq_participante_w
	from 	mprev_participante
	where 	cd_pessoa_fisica = cdPessoaFisica_p;
ds_retorno_w := '{"cdPessoaFisica":'||cdPessoaFisica_p||','||
                  '"nrSeqParticipante":' || nr_seq_participante_w ||','||
                  '"nrSeqCaptacao":' || coalesce(nrSeqCaptacao_p,'null') ||','||
                  '"ieTipoAtendimento":"' || ieTipoAtendimento_p || '",'||
                  '"ieTipoPessoa":"' || ieTipoPessoa_p || '",'||
                  '"nrOrigemGestaoAtend":' || nrOrigemGestaoAtend_p || ','||
                  '"nmContatoPF":"' || nmContatoPF_p || '",'||
                  '"nrTelefonePF":' || coalesce(nrTelefonePF_p, 'null') || '}';
RETURN	trim(both ds_retorno_w);

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION external_params_json (cdPessoaFisica_p text, nrSeqCaptacao_p text, ieTipoAtendimento_p text, ieTipoPessoa_p text, nrOrigemGestaoAtend_p text, nmContatoPF_p text, nrTelefonePF_p text) FROM PUBLIC;

