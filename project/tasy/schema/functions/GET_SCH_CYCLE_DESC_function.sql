-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_sch_cycle_desc ( cd_agenda_p bigint, nr_seq_schedule_cycle_p bigint) RETURNS varchar AS $body$
DECLARE

  v_sch_cycle_desc varchar(4000);

BEGIN
  BEGIN
    SELECT '('
      ||b.ds_cycle
      ||','
      ||c.ds_week
      ||')'
    INTO STRICT v_sch_cycle_desc
    FROM schedule_cycle b,
      schedule_cycle_week c
    WHERE b.nr_seq_agenda       =cd_agenda_p
    AND c.nr_sequencia          = nr_seq_schedule_cycle_p
    AND c.nr_seq_schedule_cycle = b.nr_sequencia;
  EXCEPTION
  WHEN no_data_found THEN
    v_sch_cycle_desc:=NULL;
  END;
RETURN v_sch_cycle_desc;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_sch_cycle_desc ( cd_agenda_p bigint, nr_seq_schedule_cycle_p bigint) FROM PUBLIC;

