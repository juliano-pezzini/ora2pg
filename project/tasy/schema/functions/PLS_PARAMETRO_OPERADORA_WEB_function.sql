-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION pls_parametro_operadora_web ( ie_parametro_p text, cd_estabelecimento_p bigint default null) RETURNS varchar AS $body$
DECLARE


ds_retorno_w			varchar(255);

/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:
Fazer a busca pelos parâmetros  nos momentos onde não há Login.
-------------------------------------------------------------------------------------------------------------------

Locais de chamada direta: 
[  ]  Objetos do dicionário [ ] Tasy (Delphi/Java) [  x ] Portal [  ]  Relatórios [ ] Outros:
 ------------------------------------------------------------------------------------------------------------------

Pontos de atenção:

IE_PARAMETRO_P
LPC - Habilitar link para produtos comercializados
LSIP - Habilitar link para solicitação de inclusão de prestadores
VPGM - Habilitar visualização dos produtos por prestador no Guia Médico
CT - Verificar qual tipo de categoria será utilizada na consulta do Guia Médico
EST - Estabelecimento para as funções sem login
PL  - Utilização do produto liberado
CE - Caracter Especial
DLB - Descrição login beneficiário
GM - Verificar se vai ser visualizado a nova tela do guia médico
LEE -  Listar os endereços conforme a especialidade médica selecionada
EAJ - Encerrar análise ao cancelar todos itens pela justificativa
EBP  - Exibir bairro do prestador 
TPC  - Exibir tipo de prestador (no resultado da consulta)
ER - Exibir rodapé
PCL - Produtos comercializados liberados
FPGM - Forma de filtrar o produto no guia médico
FVC - Forma de validar a carteirinha no portal
TPD - Tipo de prestador do demonstrativo 
VSIB - Valida informações do SIB ao realizar alteração cadastral
FCMB - Forma de carregar município do beneficiário
EREM -  Remente padrão para e-mails
QDID - Qt dias que a informação do prestador descredenciado será disponibilizada no Portal
FAP - Forma de apresentação do Produto no Portal
NLR - Novo layout da Requisição 
NCA - Nova consulta de autorizações
FVP - Forma de Visualização descredenciamento
-> NH - Vericar os navegadores habilitados pela operadora (substituído)
IE - Vericar se o navegador Internet Explorer está habilitado 
FI - Vericar se o navegador Firefox está habilitado 
CH - Vericar se o navegador Chrome está habilitado 
SA - Vericar se o navegador Safari está habilitado 
LL - Link para vincular ao logotipo 
OTG -Obriga informar o tipo de guia
ARN - Apresentar acreditações conforme RN405
SPP - Solicitação de prestador por tipo de pessoa
PASP -  Permite Acesso Simultaneo para prestadores
MASP - Mensagem de Acesso Simultaneo para prestadores
EEPD - Exibir email do prestador descredenciado
PW - (Plataforma web utilizada) - Definir se as configurações necessárias para o portal da Operadora serão cadastradas pelo HTML5 ou pelo Delphi.
FAC - Forma de atualização da carteira beneficiário intercâmbio.
LPO - Link Portal OPS
LSO - Link site operadora
LRN - Link de acesso informações RN379
NAD - Número máximo de anexos por demonstrativo
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
cd_estabelecimento_w	estabelecimento.cd_estabelecimento%type;


BEGIN
if ((cd_estabelecimento_p IS NOT NULL AND cd_estabelecimento_p::text <> '') and cd_estabelecimento_p > 0) then
	cd_estabelecimento_w	:= cd_estabelecimento_p;
end if;

if ( ie_parametro_p = 'LPC' ) then
	select 	coalesce(max(ie_produtos_comercial), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'LSIP' ) then
	select 	coalesce(max(ie_solic_inclusao_prestador), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'VPGM' ) then
	select 	coalesce(max(ie_produto_guia_medico), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'FPGM' ) then
	select 	coalesce(max(ie_tipo_filtro_produto), 'PP')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'CT' ) then
	select	coalesce(max(ie_categoria_guia_medico), 'A')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'IE' ) then
	select	coalesce(max(ie_internet_explorer), 'S')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'FI' ) then
	select	coalesce(max(ie_firefox), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'CH' ) then
	select	coalesce(max(ie_chrome), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'SA' ) then
	select	coalesce(max(ie_safari), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'EST' ) then
	select	max(cd_estabelecimento)
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
	if (coalesce(ds_retorno_w::text, '') = '') then
		select	min(cd_estabelecimento)
		into STRICT	ds_retorno_w
		from	pls_outorgante;
	end if;
	
elsif ( ie_parametro_p = 'PL' ) then
	select	coalesce(max(ie_produto_inter_lib), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'CE' ) then
	select	coalesce(max(ie_carecter_esp_guia_medico), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'DLB' ) then
	select	max(ds_carteira_segurado)
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'GM' ) then
	select	coalesce(max(ie_novo_guia_medico),'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'LEE' ) then
	select	coalesce(max(ie_endereco_espec),'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'EAJ' ) then
	select	coalesce(max(ie_analise_itens_justificativa),'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'EBP' ) then
	select	coalesce(max(ie_exibe_bairro_prestador),'S')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'TPC' ) then
	select	coalesce(max(ie_tipo_prestador_consulta),'S')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);	
	
elsif ( ie_parametro_p = 'ER' ) then
	select	coalesce(max(ie_guia_sem_rodape),'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'PCL' ) then
	select	coalesce(max(ie_produtos_liberados),'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'FVC' ) then
	select	coalesce(max(ie_forma_val_cart_benef),'1')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'TPD' ) then
	select	coalesce(max(ie_prest_demonstrativo),'PA')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'VSIB' ) then
	select 	coalesce(max(ie_valida_sib_alt), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'FCMB' ) then
	select	coalesce(max(ie_forma_cad_municipio_benef), 1)
	into STRICT 	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'EREM' ) then
	select	max(ds_email_remetente)
	into STRICT 	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif ( ie_parametro_p = 'QDID') then
	begin
	select 	qt_dias_info_descred
	into STRICT 	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	exception
	when others then
		ds_retorno_w := null;
	end;
	
elsif ( ie_parametro_p = 'FAP' ) then
	select 	coalesce(max(ie_forma_apres_desc_plano), 'DS')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif (ie_parametro_p = 'NLR') then
	select 	coalesce(max(ie_novo_layout), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif (ie_parametro_p = 'NCA') then
	select 	coalesce(max(ie_nova_consulta), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif (ie_parametro_p = 'FVP') then
	select 	coalesce(max(ie_forma_apres_descred_prest), 'PR')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
	
elsif (ie_parametro_p = 'LL') then
	select 	coalesce(max(ds_link_logo), '')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);

elsif (ie_parametro_p = 'OTG') then
	select 	coalesce(max(ie_obriga_tipo_guia), 'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p = 'ARN') then
	select	coalesce(max(ie_acred_rn405),'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_guia_medico 
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p = 'SPP') then
	select	coalesce(max(ie_tipo_solic_prest),'N')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral 
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);	
elsif (ie_parametro_p	= 'PASP') then
	select	coalesce(max(ie_prestador_simultaneo), 'S')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p	= 'MASP') then
	select	max(ds_acesso_simultaneo)
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p	= 'EEPD') then
	select	coalesce(max(ie_exibe_email_prest_desc), 'S')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p	= 'PW') then
	select	coalesce(max(ie_plataforma_web), '1')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p	= 'FAC') then
	select	coalesce(max(ie_atual_cart_benef_int), 'SA')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p	= 'LPO') then
	select	coalesce(max(ds_link_portal_ops), '')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p	= 'LSO') then
	select	coalesce(max(ds_link_site_operadora), '')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);
elsif (ie_parametro_p	= 'LRN') then
	select	coalesce(max(ds_link_inf_beneficiario), '')
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);		
elsif (ie_parametro_p	= 'NAD') then
	select	coalesce(max(qt_max_anexo_demonstrativo), 999)
	into STRICT	ds_retorno_w
	from	pls_web_param_geral
	where (coalesce(cd_estabelecimento_w::text, '') = ''
	or	cd_estabelecimento	= cd_estabelecimento_w);		
end if;

return	ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_parametro_operadora_web ( ie_parametro_p text, cd_estabelecimento_p bigint default null) FROM PUBLIC;

