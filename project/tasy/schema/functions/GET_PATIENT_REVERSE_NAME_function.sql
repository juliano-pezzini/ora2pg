-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_patient_reverse_name ( patient_normal_name text ) RETURNS varchar AS $body$
DECLARE


    patient_temp_name_w    varchar(4000);
    patient_final_name_w   varchar(4000);
    name_loop_count_w      bigint := 0;
    total_name_w           varchar(4000);

BEGIN
    patient_temp_name_w := regexp_replace(patient_normal_name, '[[:space:]]+', ' '); -- Replace multiple spaces as single
    LOOP
        name_loop_count_w := name_loop_count_w + 1;
        total_name_w := regexp_substr(patient_temp_name_w, '[^ ]+', 1, name_loop_count_w);
        patient_final_name_w := total_name_w
                                || ' '
                                || patient_final_name_w;
        EXIT WHEN coalesce(total_name_w::text, '') = '';
    END LOOP;

    return(trim(both patient_final_name_w));
EXCEPTION
    WHEN OTHERS THEN
        RAISE;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_patient_reverse_name ( patient_normal_name text ) FROM PUBLIC;

