-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION tws_get_name_person ( cd_pessoa_fisica_p pessoa_fisica.cd_pessoa_fisica%type, establishment_p estabelecimento.cd_estabelecimento%type ) RETURNS varchar AS $body$
DECLARE


/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finality
Function used by Web and TWS applications. It is necessary to pass the establishment because the Web users do not have establishment in the session of the database.
-------------------------------------------------------------------------------------------------------------------
Used applications
[  ]  Objetos do dicionário [ ] Tasy (Delphi/Java) [ x ] Portal [ x ]  Relatórios [ ] Outros: TWS
 ------------------------------------------------------------------------------------------------------------------
Cauntion:
- Object used in the portal of the Health Plan.
- Reports
- TWS
- Other Web Applications
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
name_w		varchar(60);


BEGIN

if (cd_pessoa_fisica_p IS NOT NULL AND cd_pessoa_fisica_p::text <> '') then
		select  substr(nm_pessoa_fisica,1,60)
		into STRICT	name_w
		from 	table(search_names_dev(null,cd_pessoa_fisica_p,null,null,null, establishment_p));
end if;

return	name_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION tws_get_name_person ( cd_pessoa_fisica_p pessoa_fisica.cd_pessoa_fisica%type, establishment_p estabelecimento.cd_estabelecimento%type ) FROM PUBLIC;

