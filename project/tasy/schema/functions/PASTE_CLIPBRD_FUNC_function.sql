-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION paste_clipbrd_func () RETURNS varchar AS $body$
DECLARE


    format_w         varchar(32000);
    type_w            varchar(32000);
    data_w             varchar(32000);
    return_format_w    varchar(32000);
    return_exp_w varchar(32000);
    cur1 CURSOR FOR
    SELECT
        ie_record_type,
        ie_clip_data
    FROM
        clipboard_data
where nm_usuario= wheb_usuario_pck.get_nm_usuario
and cd_estabelecimento= wheb_usuario_pck.get_cd_estabelecimento
order by NR_SEQUENCIA;


BEGIN
    OPEN cur1;
    LOOP
        FETCH cur1 INTO
            type_w,
            data_w;
        EXIT WHEN NOT FOUND; /* apply on cur1 */

         if (type_w = 'DIAGNOSIS')then
        return_exp_w         := obter_desc_expressao(287694);
      elsif (type_w = 'PRESCRIPTION')then
         return_exp_w         := obter_desc_expressao(297315);
         elsif (type_w = 'SURGERY') then
        return_exp_w         :=  obter_desc_expressao(284979);
      elsif (type_w ='LAB_TEST') then
        return_exp_w         :=  obter_desc_expressao(289683);
      elsif (type_w ='HOSP_HIST') then
        return_exp_w         :=  obter_desc_expressao(1031051);
      elsif (type_w ='DPC') then
        return_exp_w         :=  obter_desc_expressao(968213);
      elsif (type_w ='ADM_HIST') then
        return_exp_w         :=  obter_desc_expressao(1031045);
      elsif (type_w ='SUR_HIST') then
        return_exp_w         :=  obter_desc_expressao(662457);
      elsif (type_w ='TRANS_HIST') then
        return_exp_w         :=  obter_desc_expressao(1031049);
      elsif (type_w ='FAM_HIST') then
        return_exp_w         := obter_desc_expressao(1007486);
   elsif (type_w ='SNCP') then
       return_exp_w         :=  obter_desc_expressao(929193);
      elsif (type_w ='CLINIC_STAFF') then
        return_exp_w  :=  obter_desc_expressao(1003955);
        end if;

        
        format_w := '{"record_type":" <b><span style=font-size:20px>' || return_exp_w
                    || '</span></b>","record_value":"<div>'
                    || data_w || '</div></br>"}';
        return_format_w := return_format_w
                           || ','
                           || format_w;
    END LOOP;

    CLOSE cur1;
    RETURN '['
           ||ltrim(return_format_w,',')
           || ']';
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION paste_clipbrd_func () FROM PUBLIC;

