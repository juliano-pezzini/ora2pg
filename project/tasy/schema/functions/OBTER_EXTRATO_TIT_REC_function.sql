-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_extrato_tit_rec ( nr_titulo_p bigint, nr_seq_liq_p bigint) RETURNS bigint AS $body$
DECLARE

 
nr_seq_extrato_w	banco_extrato.nr_sequencia%type;


BEGIN 
 
select	max(g.nr_seq_extrato) 
into STRICT	nr_seq_extrato_w 
from	banco_extrato_lanc g, 
	concil_banc_movto f, 
	conciliacao_bancaria e, 
	concil_banc_movto d, 
	movto_trans_financ c, 
	cobranca_escritural b, 
	titulo_receber_liq a 
where	f.nr_sequencia		= g.nr_seq_concil 
and	e.nr_sequencia		= f.nr_seq_conciliacao 
and	d.nr_seq_conciliacao	= e.nr_sequencia 
and	c.nr_seq_concil		= d.nr_sequencia 
and	b.nr_sequencia		= c.nr_seq_cobr_escrit 
and	a.nr_seq_cobranca	= b.nr_sequencia 
and	a.nr_sequencia		= nr_seq_liq_p 
and	a.nr_titulo		= nr_titulo_p;
 
RETURN nr_seq_extrato_w;
 
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_extrato_tit_rec ( nr_titulo_p bigint, nr_seq_liq_p bigint) FROM PUBLIC;

