-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_desc_dados_dieta ( cd_dieta_p bigint) RETURNS varchar AS $body$
DECLARE

 
desc_dieta_w		varchar(1500);
dados_dieta_w		varchar(1500);
ds_retorno_w		varchar(4000);


BEGIN 
if (cd_dieta_p IS NOT NULL AND cd_dieta_p::text <> '') then 
	desc_dieta_w := substr(Obter_desc_Dieta(cd_dieta_p),1,1500);
	dados_dieta_w := substr(obter_dados_dieta(cd_dieta_p,'I',null,null,null,null),1,1500);
	 
	if (desc_dieta_w IS NOT NULL AND desc_dieta_w::text <> '') and (dados_dieta_w IS NOT NULL AND dados_dieta_w::text <> '') then 
		ds_retorno_w := wheb_mensagem_pck.get_texto(309954) || ' : ' || desc_dieta_w || chr(13) || chr(10) || wheb_mensagem_pck.get_texto(784832) || ' : ' || dados_dieta_w;
	 
	elsif (desc_dieta_w IS NOT NULL AND desc_dieta_w::text <> '') and (coalesce(dados_dieta_w::text, '') = '') then 
		ds_retorno_w := wheb_mensagem_pck.get_texto(309954) || ' : ' || desc_dieta_w;
		 
	elsif (coalesce(desc_dieta_w::text, '') = '') and (dados_dieta_w IS NOT NULL AND dados_dieta_w::text <> '') then 
		ds_retorno_w := wheb_mensagem_pck.get_texto(784832) || ' : ' || dados_dieta_w;
		 
	end if;
	 
end if;
 
return ds_retorno_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_desc_dados_dieta ( cd_dieta_p bigint) FROM PUBLIC;

