-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_sha2 ( ds_texto_p text, qt_bits_p bigint ) RETURNS bytea AS $body$
DECLARE

   output bytea := null;

BEGIN
   BEGIN
       RAISE NOTICE 'Executing default sha2 java class';
       output := obter_sha2_leg(ds_texto_p, qt_bits_p);
   EXCEPTION
       WHEN OTHERS THEN
       RAISE NOTICE 'Probably not have java install, running with dbms_crypto.hash';
       output := dbms_crypto.hash(encode(ds_texto_p::bytea, 'hex')::bytea, dbms_crypto.HASH_SH256);
   END;
   RAISE NOTICE 'hash: %', output;
   RETURN output;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_sha2 ( ds_texto_p text, qt_bits_p bigint ) FROM PUBLIC;

