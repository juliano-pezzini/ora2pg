-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_inform_reconstitucao_md ( qt_conversao_mat_p bigint, ds_unid_med_p text, qt_dose_recons_p bigint, nr_casas_diluicao_p bigint, ds_uom_p text, ds_mat_reconst_p text, ds_total_reconst_p text, ds_material_p text ) RETURNS varchar AS $body$
DECLARE

  ds_reconstituir_w varchar(2000);
  qt_resul_calc_w   varchar(20);

BEGIN

  qt_resul_calc_w := formatar_dosage_md(round(qt_dose_recons_p, nr_casas_diluicao_p));

  if (coalesce(qt_conversao_mat_p, 0) > 1 ) then
    ds_reconstituir_w := wheb_mensagem_pck.get_texto(307055, 'DS_RECONSTITUIR_W=;CD_UNIDADE_MEDIDA_W='|| qt_conversao_mat_p || ' ' ||ds_unid_med_p||';DS_MAT_PRINC_W='||ds_material_p
			||';QT_DOSE_STR_W='||qt_resul_calc_w||';CD_UNID_MED_DOSE_W='|| ds_uom_p ||' '
			||';DS_MATERIAL_W='||ds_mat_reconst_p||';DS_TOTAL_RECONST_W='|| ' ' || ds_total_reconst_p||';') || chr(13);

  else
    ds_reconstituir_w := wheb_mensagem_pck.get_texto(307055, 'DS_RECONSTITUIR_W=;CD_UNIDADE_MEDIDA_W='||ds_unid_med_p||';DS_MAT_PRINC_W='||ds_material_p
			||';QT_DOSE_STR_W='||qt_resul_calc_w||';CD_UNID_MED_DOSE_W='|| ds_uom_p ||' '
			||';DS_MATERIAL_W='||ds_mat_reconst_p||';DS_TOTAL_RECONST_W='|| ' ' || ds_total_reconst_p||';') || chr(13);
  end if;

  return ds_reconstituir_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_inform_reconstitucao_md ( qt_conversao_mat_p bigint, ds_unid_med_p text, qt_dose_recons_p bigint, nr_casas_diluicao_p bigint, ds_uom_p text, ds_mat_reconst_p text, ds_total_reconst_p text, ds_material_p text ) FROM PUBLIC;

