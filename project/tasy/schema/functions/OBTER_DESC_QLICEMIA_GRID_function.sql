-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_desc_qlicemia_grid ( nr_seq_atend_sv_p bigint) RETURNS varchar AS $body$
DECLARE

  ds_retorno_w	varchar(255);

  qt_glicemia_capilar_w	atendimento_sinal_vital.qt_glicemia_capilar%type;
  ie_glic_extrapol_w	atendimento_sinal_vital.ie_glic_extrapol%type;


BEGIN

  select  substr(qt_glicemia_capilar,0,250),
          ie_glic_extrapol
  into STRICT    qt_glicemia_capilar_w,
          ie_glic_extrapol_w
  from    atendimento_sinal_vital
  where   nr_sequencia = nr_seq_atend_sv_p;

  if (qt_glicemia_capilar_w IS NOT NULL AND qt_glicemia_capilar_w::text <> '') then
    if (ie_glic_extrapol_w = 'S') then
      ds_retorno_w := '> ' || qt_glicemia_capilar_w;
    elsif (ie_glic_extrapol_w = 'E') then
      ds_retorno_w := '< ' || qt_glicemia_capilar_w;
    else
      ds_retorno_w := qt_glicemia_capilar_w;
    end if;
  end if;

  return ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_desc_qlicemia_grid ( nr_seq_atend_sv_p bigint) FROM PUBLIC;

