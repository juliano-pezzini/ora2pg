-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_se_usuario_exibe_agenda (cd_agenda_p bigint, mm_usuario_p text) RETURNS varchar AS $body$
DECLARE

ie_exibe_agenda_w	varchar(1);
cd_pefil_exclusivo_w 	bigint;
ie_agenda_exclusiva_w	varchar(1);

BEGIN
select	coalesce(max(obter_valor_param_usuario(820, 23, obter_perfil_ativo, mm_usuario_p, wheb_usuario_pck.get_cd_estabelecimento)), 'N') 
into STRICT 	ie_agenda_exclusiva_w
;
 
 
select	coalesce(max(cd_perfil_exclusivo),0) 
into STRICT	cd_pefil_exclusivo_w 
from	agenda 
where  cd_agenda = cd_agenda_p;
if (ie_agenda_exclusiva_w = 'N') then 
	ie_exibe_agenda_w := 'S';
else 
	ie_exibe_agenda_w := obter_se_perfil_usuario(cd_pefil_exclusivo_w,mm_usuario_p);
end if;
 
return	ie_exibe_agenda_w;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_se_usuario_exibe_agenda (cd_agenda_p bigint, mm_usuario_p text) FROM PUBLIC;

