-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';



CREATE TYPE values_w AS (values_w integer[7]);


CREATE OR REPLACE FUNCTION get_glasgow_scores ( ie_classification_p text, ie_glasgow_2018_p text) RETURNS text AS $body$
DECLARE

  locale_w       varchar(10);
motor_values_w values_w;
verbal_values_w values_w;
ocular_values_w values_w;
GLASGOW_SCORES_W text;
BEGIN
  locale_w                   := OBTAIN_USER_LOCALE(WHEB_USUARIO_PCK.GET_NM_USUARIO);
  IF (locale_w                NOT IN ('pt_BR','es_MX','es_DO','de_DE','NoN')) THEN
   IF (ie_glasgow_2018_p = 'glasgow2018') THEN
        IF (ie_classification_p    = 'P') THEN
        motor_values_w         := values_w(926461, 926469, 926467, 926465, 926463, 926451,1028483);
        verbal_values_w        := values_w(926461, 926487, 926483, 926481, 926479,1028483);
        ocular_values_w        := values_w(926461, 926477, 926475, 926473,1028483);
        elsif (ie_classification_p = 'A') THEN
        motor_values_w         := values_w(926461, 926459, 926457, 926455, 926453, 926451,1028483);
        verbal_values_w        := values_w(926461, 926511, 926509, 926505, 926471,1028483);
        ocular_values_w        := values_w(926461, 926477, 926475, 926473,1028483);
        END IF;
    ELSE
        IF (ie_classification_p    = 'P') THEN
        motor_values_w         := values_w(926461, 926469, 926467, 926465, 926463, 926451);
        verbal_values_w        := values_w(926461, 926487, 926483, 926481, 926479);
        ocular_values_w        := values_w(926461, 926477, 926475, 926473);
        elsif (ie_classification_p = 'A') THEN
        motor_values_w         := values_w(926461, 926459, 926457, 926455, 926453, 926451);
        verbal_values_w        := values_w(926461, 926511, 926509, 926505, 926471);
        ocular_values_w        := values_w(926461, 926477, 926475, 926473);
        END IF;
    END IF;
  ELSIF (locale_w                IN ('de_DE')) THEN
        IF (ie_glasgow_2018_p = 'glasgow2018') THEN
                IF (ie_classification_p    = 'N') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 970257, 970259, 970261,1028483);
                verbal_values_w        := values_w(284285, 970249, 970251, 970253, 970255,1028483);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237,1028483);
                elsif (ie_classification_p = 'P') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 284590, 285275, 285414,1028483);
                verbal_values_w        := values_w(284285, 284788, 284802, 284810, 284811,1028483);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237,1028483);
                elsif (ie_classification_p = 'A') THEN
                motor_values_w         := values_w(1029826, 1029824, 285416, 285637, 285640, 285656, 285777);
                verbal_values_w        := values_w(1029830, 1029828, 284835, 284837, 284903, 285033);
                ocular_values_w        := values_w(1029822, 1029820, 285257, 285266, 285237);
                END IF;
        ELSE
                IF (ie_classification_p    = 'N') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 970257, 970259, 970261);
                verbal_values_w        := values_w(284285, 970249, 970251, 970253, 970255);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237);
                elsif (ie_classification_p = 'P') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 284590, 285275, 285414);
                verbal_values_w        := values_w(284285, 284788, 284802, 284810, 284811);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237);
                elsif (ie_classification_p = 'A') THEN
                motor_values_w         := values_w(284285, 285416, 285637, 285640, 285656, 285777);
                verbal_values_w        := values_w(284285, 284835, 284837, 284903, 285033);
                ocular_values_w        := values_w(284285, 285257, 285266, 285237);
                END IF;
        END IF;
  ELSE
        IF (ie_glasgow_2018_p = 'glasgow2018') THEN
                IF (ie_classification_p    = 'N') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 970257, 970259, 970261,1028483);
                verbal_values_w        := values_w(284285, 970249, 970251, 970253, 970255,1028483);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237,1028483);
                elsif (ie_classification_p = 'P') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 284590, 285275, 285414,1028483);
                verbal_values_w        := values_w(284285, 284788, 284802, 284810, 284811,1028483);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237,1028483);
                elsif (ie_classification_p = 'A') THEN
                motor_values_w         := values_w(284285, 285416, 285637, 285640, 285656, 285777,1028483);
                verbal_values_w        := values_w(284285, 284835, 284837, 284903, 285033,1028483);
                ocular_values_w        := values_w(284285, 285257, 285266, 285237,1028483);
                END IF;
        ELSE
                IF (ie_classification_p    = 'N') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 970257, 970259, 970261);
                verbal_values_w        := values_w(284285, 970249, 970251, 970253, 970255);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237);
                elsif (ie_classification_p = 'P') THEN
                motor_values_w         := values_w(284285, 284290, 284438, 284590, 285275, 285414);
                verbal_values_w        := values_w(284285, 284788, 284802, 284810, 284811);
                ocular_values_w        := values_w(284285, 285159, 285214, 285237);
                elsif (ie_classification_p = 'A') THEN
                motor_values_w         := values_w(284285, 285416, 285637, 285640, 285656, 285777);
                verbal_values_w        := values_w(284285, 284835, 284837, 284903, 285033);
                ocular_values_w        := values_w(284285, 285257, 285266, 285237);
                END IF;
        END IF;
  END IF;

FOR i IN 1 .. motor_values_w.count
LOOP
  GLASGOW_SCORES_W := GLASGOW_SCORES_W || OBTER_DESC_EXPRESSAO_IDIOMA(motor_values_w(i), NULL, wheb_usuario_pck.GET_NR_SEQ_IDIOMA) || ';';
END LOOP;
GLASGOW_SCORES_W := GLASGOW_SCORES_W || '~';
FOR j IN 1 .. verbal_values_w.count
LOOP
  GLASGOW_SCORES_W := GLASGOW_SCORES_W || OBTER_DESC_EXPRESSAO_IDIOMA(verbal_values_w(j), NULL, wheb_usuario_pck.GET_NR_SEQ_IDIOMA) || ';';
END LOOP;
GLASGOW_SCORES_W := GLASGOW_SCORES_W || '~';
FOR k IN 1 .. ocular_values_w.count
LOOP
  GLASGOW_SCORES_W := GLASGOW_SCORES_W || OBTER_DESC_EXPRESSAO_IDIOMA(ocular_values_w(k), NULL, wheb_usuario_pck.GET_NR_SEQ_IDIOMA) || ';';
END LOOP;
RETURN GLASGOW_SCORES_W;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_glasgow_scores ( ie_classification_p text, ie_glasgow_2018_p text) FROM PUBLIC;

