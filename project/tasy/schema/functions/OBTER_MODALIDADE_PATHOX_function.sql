-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_modalidade_pathox (nr_seq_proc_interno_p bigint) RETURNS varchar AS $body$
DECLARE


ds_retorno_w varchar(2);
cd_tipo_procedimento_w smallint;


BEGIN

SELECT	b.cd_tipo_procedimento
into STRICT	cd_tipo_procedimento_w
FROM	proc_interno a,
		procedimento b
WHERE	b.cd_procedimento = a.cd_procedimento
AND	b.ie_origem_proced = a.ie_origem_proced
AND	a.nr_sequencia = nr_seq_proc_interno_p;

if (cd_tipo_procedimento_w in (1, 34, 81, 97, 104, 110)) then
ds_retorno_w := 'CR';
elsif (cd_tipo_procedimento_w in (2, 25, 121)) then
ds_retorno_w := 'US';
elsif (cd_tipo_procedimento_w in (3, 117, 118, 119)) then
ds_retorno_w := 'CT';
elsif (cd_tipo_procedimento_w in (4)) then
ds_retorno_w := 'MR';
elsif (cd_tipo_procedimento_w in (5)) then
ds_retorno_w := 'MG';
elsif (cd_tipo_procedimento_w in (6,7,11,107,108,109,111,112,113,120)) then
ds_retorno_w := 'XA';
elsif (cd_tipo_procedimento_w in (8,26,27,92,131,132)) then
ds_retorno_w := 'ES';
elsif (cd_tipo_procedimento_w in (9,10,13,16,17,18,20,30,31,32,70,83,84,86,87,94,98,101,105,106,122,123,124,125,126,128,129,130)) then
ds_retorno_w := 'OT';
elsif (cd_tipo_procedimento_w in (12,33)) then
ds_retorno_w := 'EC';
elsif (cd_tipo_procedimento_w in (14,88)) then
ds_retorno_w := 'TE';
elsif (cd_tipo_procedimento_w in (15)) then
ds_retorno_w := 'DO';
elsif (cd_tipo_procedimento_w in (136)) then
ds_retorno_w := 'NM';
end if;

return ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_modalidade_pathox (nr_seq_proc_interno_p bigint) FROM PUBLIC;

