-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_cep_log ( cd_cep_p text, ie_cod_desc_p text) RETURNS varchar AS $body$
DECLARE


ds_resultado_w		varchar(240)	:= '';
nr_sequencia_w		bigint	:= 0;
ie_cep_novo_w		varchar(01)	:= '';



BEGIN

select	coalesce(vl_parametro, vl_parametro_padrao)
into STRICT	ie_cep_novo_w
from	funcao_parametro
where	cd_funcao	= 0
and	nr_sequencia	= 25;

if (ie_cep_novo_w = 'S') then
	select	a.nm_logradouro,
		a.nr_sequencia
	into STRICT	ds_resultado_w,
		nr_sequencia_w
	from	cep_log a
	where	a.cd_cep		= Somente_Numero(cd_cep_p);
else
	select	b.nm_logradouro,
		b.nr_logradouro
	into STRICT	ds_resultado_w,
		nr_sequencia_w
	from	cep_logradouro b
	where	b.cd_logradouro		= somente_numero(cd_cep_p);
end if;

if (ie_cod_desc_p	= 'C') then
	return nr_sequencia_w;
else
	return ds_resultado_w;
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_cep_log ( cd_cep_p text, ie_cod_desc_p text) FROM PUBLIC;

