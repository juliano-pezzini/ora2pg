-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_ret_dados_mat_estab_md ( ie_tipo_dado_p text, ie_controlado_p text, nr_registro_anvisa_p text, ie_classif_custo_p text, cd_material_conta_p text, ie_requisicao_p text, qt_consumo_mensal_p bigint, dt_validade_reg_anvisa_p timestamp, nr_protocolo_anvisa_p text, dt_validade_prot_anvisa_p timestamp, cd_unidade_medida_compra_p text, cd_unidade_medida_estoque_p text, cd_unidade_medida_consumo_p text, cd_sistema_ant_p text, qt_conv_compra_estoque_p bigint, qt_conv_estoque_consumo_p bigint, nr_minimo_cotacao_p bigint, cd_kit_material_p text, ie_prescricao_p text, ie_tipo_consignado_p text, ie_padronizado_p text, ie_baixa_estoque_p text, ie_permite_prescrever_p text, ie_vigente_anvisa_p text ) RETURNS varchar AS $body$
DECLARE

    ds_retorno_w     varchar(255);

BEGIN
    IF ( ie_tipo_dado_p = 'CO' ) THEN
         ds_retorno_w := ie_controlado_p;
    ELSIF ( ie_tipo_dado_p = 'RA' ) THEN
        ds_retorno_w := nr_registro_anvisa_p;
    ELSIF ( ie_tipo_dado_p = 'CU' ) THEN
        ds_retorno_w := ie_classif_custo_p;
    ELSIF ( ie_tipo_dado_p = 'MC' ) THEN
        ds_retorno_w := cd_material_conta_p;
    ELSIF ( ie_tipo_dado_p = 'RQ' ) THEN
        ds_retorno_w := ie_requisicao_p;
    ELSIF ( ie_tipo_dado_p = 'QC' ) THEN
        ds_retorno_w := qt_consumo_mensal_p;
    ELSIF ( ie_tipo_dado_p = 'VA' ) THEN
        ds_retorno_w := to_char(dt_validade_reg_anvisa_p, 'dd/mm/yyyy');
    ELSIF ( ie_tipo_dado_p = 'RPA' ) THEN
        ds_retorno_w := nr_protocolo_anvisa_p;
    ELSIF ( ie_tipo_dado_p = 'VPA' ) THEN
        ds_retorno_w := to_char(dt_validade_prot_anvisa_p, 'dd/mm/yyyy');
    ELSIF ( ie_tipo_dado_p = 'UMC' ) THEN
        ds_retorno_w := cd_unidade_medida_compra_p;
    ELSIF ( ie_tipo_dado_p = 'UME' ) THEN
        ds_retorno_w := cd_unidade_medida_estoque_p;
    ELSIF ( ie_tipo_dado_p = 'UMS' ) THEN
        ds_retorno_w := cd_unidade_medida_consumo_p;
    ELSIF ( ie_tipo_dado_p = 'CSA' ) THEN
        ds_retorno_w := cd_sistema_ant_p;
    ELSIF ( ie_tipo_dado_p = 'QCE' ) THEN
        ds_retorno_w := qt_conv_compra_estoque_p;
    ELSIF ( ie_tipo_dado_p = 'QEC' ) THEN
        ds_retorno_w := qt_conv_estoque_consumo_p;
    ELSIF ( ie_tipo_dado_p = 'NMC' ) THEN
        ds_retorno_w := nr_minimo_cotacao_p;
    ELSIF ( ie_tipo_dado_p = 'KIT' ) THEN
        ds_retorno_w := cd_kit_material_p;
    ELSIF ( ie_tipo_dado_p = 'PR' ) THEN
        ds_retorno_w := ie_prescricao_p;
    ELSIF ( ie_tipo_dado_p = 'TC' ) THEN
        ds_retorno_w := ie_tipo_consignado_p;
    ELSIF ( ie_tipo_dado_p = 'PD' ) THEN
        ds_retorno_w := ie_padronizado_p;
    ELSIF ( ie_tipo_dado_p = 'BE' ) THEN
        ds_retorno_w := ie_baixa_estoque_p;
    ELSIF ( ie_tipo_dado_p = 'PR' ) THEN
        ds_retorno_w := ie_permite_prescrever_p;
    ELSIF ( ie_tipo_dado_p = 'VI' ) THEN
        ds_retorno_w := ie_vigente_anvisa_p;
    END IF;

    RETURN ds_retorno_w;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_ret_dados_mat_estab_md ( ie_tipo_dado_p text, ie_controlado_p text, nr_registro_anvisa_p text, ie_classif_custo_p text, cd_material_conta_p text, ie_requisicao_p text, qt_consumo_mensal_p bigint, dt_validade_reg_anvisa_p timestamp, nr_protocolo_anvisa_p text, dt_validade_prot_anvisa_p timestamp, cd_unidade_medida_compra_p text, cd_unidade_medida_estoque_p text, cd_unidade_medida_consumo_p text, cd_sistema_ant_p text, qt_conv_compra_estoque_p bigint, qt_conv_estoque_consumo_p bigint, nr_minimo_cotacao_p bigint, cd_kit_material_p text, ie_prescricao_p text, ie_tipo_consignado_p text, ie_padronizado_p text, ie_baixa_estoque_p text, ie_permite_prescrever_p text, ie_vigente_anvisa_p text ) FROM PUBLIC;

