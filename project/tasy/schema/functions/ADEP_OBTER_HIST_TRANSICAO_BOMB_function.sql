-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION adep_obter_hist_transicao_bomb (nr_sequencia_interface_p bigint) RETURNS varchar AS $body$
DECLARE

ds_retorno_w		varchar(2000);

BEGIN
		select CASE
								WHEN bt.ds_campo = 'START_SOLUTION' THEN
									expressao_pck.obter_desc_expressao(968960)
								WHEN bt.ds_campo = 'END_SOLUTION' THEN 
									expressao_pck.obter_desc_expressao(1074741)
								WHEN bt.ds_campo = 'AUTO_CHARTING' THEN 
									REPLACE(expressao_pck.obter_desc_expressao(1074743), '@#QT_VOLUME@#', bt.qt_volume)
								WHEN bt.ds_campo = 'CHART_NOW' THEN 
									REPLACE(expressao_pck.obter_desc_expressao(1074745), '@#QT_VOLUME@#', bt.qt_volume)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'DS' THEN
										expressao_pck.obter_desc_expressao(603546)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'ST' THEN
										expressao_pck.obter_desc_expressao(295270)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'IP' THEN
										expressao_pck.obter_desc_expressao(971365)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'IS' THEN
										expressao_pck.obter_desc_expressao(1009838)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'BL' THEN
										expressao_pck.obter_desc_expressao(284344)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'AL' THEN
										expressao_pck.obter_desc_expressao(730698)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'TC' THEN
										expressao_pck.obter_desc_expressao(1009839)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'KV' THEN
										expressao_pck.obter_desc_expressao(1010636)
								WHEN bt.ds_campo = 'IE_STATUS' AND bt.ie_Status = 'KT' THEN
										expressao_pck.obter_desc_expressao(1074755)
								WHEN bt.ds_campo = 'DS_MEDICAMENTO' THEN
										expressao_pck.obter_desc_expressao(330076)|| ' ' || bt.ds_medicamento
								WHEN bt.ds_campo = 'QT_VELOCIDADE' THEN
										expressao_pck.obter_desc_expressao(301600)|| ': ' || bt.qt_velocidade
								WHEN bt.ds_campo = 'UNIDADE_ATENDIMENTO' THEN
										expressao_pck.obter_desc_expressao(300762)|| ': ' || st.ds_setor_atendimento || ' ' || st.nm_unidade_basica || ' ' || st.nm_unidade_compl
							END
							into STRICT ds_retorno_w
  from bomba_infusao_transicao bt
		left join setor_atendimento st
		  on bt.cd_setor_atendimento = st.cd_setor_atendimento
	where bt.nr_sequencia = nr_sequencia_interface_p;

return ds_retorno_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION adep_obter_hist_transicao_bomb (nr_sequencia_interface_p bigint) FROM PUBLIC;

