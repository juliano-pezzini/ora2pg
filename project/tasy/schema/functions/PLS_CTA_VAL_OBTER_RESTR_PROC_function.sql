-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION pls_cta_val_obter_restr_proc ( ie_opcao_p text, cursor_p integer, dados_filtro_proc_p pls_tipos_cta_val_pck.dados_filtro_proc) RETURNS varchar AS $body$
DECLARE


ds_restricao_w		varchar(4000);
enter_w			varchar(10)	:= pls_util_pck.enter_w;


BEGIN
-- Inicializar as variáveis
ds_restricao_w := null;
if (dados_filtro_proc_p.nr_sequencia > 0) then
	/* Código do procedimento */

	if (dados_filtro_proc_p.cd_procedimento IS NOT NULL AND dados_filtro_proc_p.cd_procedimento::text <> '') then
		if (ie_opcao_p = 'RESTRICAO') then
			ds_restricao_w	:= ds_restricao_w || enter_w || 'and	proc.ie_origem_proced = :ie_origem_proced';
			ds_restricao_w	:= ds_restricao_w || enter_w || 'and	proc.cd_procedimento = :cd_procedimento';
		else
			dbms_sql.bind_variable(cursor_p, ':ie_origem_proced', dados_filtro_proc_p.ie_origem_proced);
			dbms_sql.bind_variable(cursor_p, ':cd_procedimento', dados_filtro_proc_p.cd_procedimento);
		end if;
	end if;

end if;

return	ds_restricao_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_cta_val_obter_restr_proc ( ie_opcao_p text, cursor_p integer, dados_filtro_proc_p pls_tipos_cta_val_pck.dados_filtro_proc) FROM PUBLIC;

