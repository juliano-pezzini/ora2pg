-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION is_insert_cycle_period ( nr_seq_agenda_p SCHEDULE_CYCLE.NR_SEQ_AGENDA%type, dt_validity_start_p SCHEDULE_CYCLE.DT_VALIDITY_START%type, dt_validity_end_p SCHEDULE_CYCLE.DT_VALIDITY_END%type) RETURNS varchar AS $body$
DECLARE

  dt_validity_start_w SCHEDULE_CYCLE.DT_VALIDITY_START%type;
  dt_validity_end_w SCHEDULE_CYCLE.DT_VALIDITY_END%type;

BEGIN
  SELECT MIN(DT_VALIDITY_START),
    MAX(DT_VALIDITY_END)
  INTO STRICT dt_validity_start_w,
    dt_validity_end_w
  FROM SCHEDULE_CYCLE s
  WHERE s.NR_SEQ_AGENDA   = nr_seq_agenda_p;
  IF (dt_validity_start_p IS NOT NULL AND dt_validity_start_p::text <> '') AND (dt_validity_start_p BETWEEN dt_validity_start_w AND dt_validity_end_w) THEN
    RETURN 'N';
  END IF;
IF (dt_validity_end_p IS NOT NULL AND dt_validity_end_p::text <> '') AND (dt_validity_end_p BETWEEN dt_validity_start_w AND dt_validity_end_w) THEN
  RETURN 'N';
END IF;
RETURN 'S';
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION is_insert_cycle_period ( nr_seq_agenda_p SCHEDULE_CYCLE.NR_SEQ_AGENDA%type, dt_validity_start_p SCHEDULE_CYCLE.DT_VALIDITY_START%type, dt_validity_end_p SCHEDULE_CYCLE.DT_VALIDITY_END%type) FROM PUBLIC;

