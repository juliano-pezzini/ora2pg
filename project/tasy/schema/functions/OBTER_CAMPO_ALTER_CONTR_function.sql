-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_campo_alter_contr ( ds_field_p text, nr_seq_contrato_p bigint, tp_atributo text) RETURNS varchar AS $body$
DECLARE


ds_retorno_w	varchar(4000);
ds_comando_w	varchar(4000);
c01				integer;
retorno_w		integer;


BEGIN
if (tp_atributo = 'TDateTimeField') then
	begin
	ds_comando_w :=	'	select	to_char(' || ds_field_p || ',''dd/mm/yyyy'')' ||
					'	from	contrato						' ||
					'	where	nr_sequencia = :nr_seq_contrato ';
	end;
else
	begin
	ds_comando_w :=	'	select	' || ds_field_p 			      ||
					'	from	contrato						' ||
					'	where	nr_sequencia = :nr_seq_contrato ';
	end;
end if;

c01 := dbms_sql.open_cursor;
dbms_sql.parse(c01, ds_comando_w, dbms_sql.native);
dbms_sql.define_column(c01, 1, ds_retorno_w, 50);
dbms_sql.bind_variable(c01, 'nr_seq_contrato', 'S');
dbms_sql.bind_variable(c01, 'nr_seq_contrato', nr_seq_contrato_p);
retorno_w := dbms_sql.execute(c01);

while(dbms_sql.fetch_rows(c01) > 0 ) loop
	begin
	dbms_sql.column_value(c01, 1, ds_retorno_w);
	end;
end loop;
dbms_sql.close_cursor(c01);
return	ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_campo_alter_contr ( ds_field_p text, nr_seq_contrato_p bigint, tp_atributo text) FROM PUBLIC;

