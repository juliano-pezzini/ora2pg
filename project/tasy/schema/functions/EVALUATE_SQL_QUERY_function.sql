-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION evaluate_sql_query ( l_sql_stmt text, linebreak text ) RETURNS varchar AS $body$
DECLARE


    l_cursor_id   integer;
    ireturned     integer;
		ds_return_p   varchar(4000);
    ds_aux        varchar(4000);
    linebreak_p   varchar(10);

BEGIN

    if (coalesce(linebreak::text, '') = '') then
      linebreak_p := chr(13) || chr(10);
    else
      linebreak_p := linebreak;
    end if;

    ds_return_p := 'GENERAL INFORMATION SECTION' || linebreak_p;
    ds_return_p := ds_return_p || 'Started at: ' || to_char(clock_timestamp(), 'dd/mm/yyyy hh24:mi:ss') || linebreak_p;
    ds_return_p := ds_return_p || '-------------------------------------------------------------------------------' || linebreak_p;
    ds_return_p := ds_return_p || 'SQL Text: ' || l_sql_stmt || linebreak_p;
    ds_return_p := ds_return_p || '-------------------------------------------------------------------------------' || linebreak_p;
  begin
    l_cursor_id := dbms_sql.open_cursor;
    dbms_sql.parse(l_cursor_id, l_sql_stmt, dbms_sql.v7);
    dbms_sql.close_cursor(l_cursor_id);

    ds_return_p := ds_return_p || obter_desc_expressao(694474);
    exception
      when others then
        ds_return_p := ds_return_p || obter_desc_expressao(347264) || linebreak_p || linebreak_p;
        ds_return_p := ds_return_p || ('ERRORS SECTION - ' || sqlerrm) || linebreak_p;
        if dbms_sql.is_open(l_cursor_id) then
            dbms_sql.close_cursor(l_cursor_id);
        end if;
  end;

  return ds_return_p;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION evaluate_sql_query ( l_sql_stmt text, linebreak text ) FROM PUBLIC;

