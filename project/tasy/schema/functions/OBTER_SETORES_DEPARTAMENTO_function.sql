-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_setores_departamento (cd_departamento_p bigint) RETURNS varchar AS $body$
DECLARE


cd_setor_atendimento_w	varchar(2000);

  reg RECORD;

BEGIN
  for reg in (
      SELECT a.cd_setor_atendimento
      from   departamento_setor a
      join   setor_atendimento b
      on     b.cd_setor_atendimento = a.cd_setor_atendimento
      where  a.cd_departamento = cd_departamento_p
      order by a.cd_setor_atendimento
  )

  loop
      cd_setor_atendimento_w := cd_setor_atendimento_w || reg.cd_setor_atendimento || ',';
  end loop;

RETURN	substr(cd_setor_atendimento_w, 1, length(cd_setor_atendimento_w)-1);

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_setores_departamento (cd_departamento_p bigint) FROM PUBLIC;

