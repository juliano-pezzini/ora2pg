-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_ad_peso_npt_p_formul_md (qt_ideal_peso_p bigint, IE_PARAM_12_P text, qt_peso_p bigint, tp_genero_p text ) RETURNS bigint AS $body$
DECLARE

   qt_adjust_peso_w real;

BEGIN
    if ((qt_ideal_peso_p IS NOT NULL AND qt_ideal_peso_p::text <> '') and qt_ideal_peso_p > 0) then
        if IE_PARAM_12_P = 'S' then
            qt_adjust_peso_w := ((coalesce(qt_peso_p,0) - coalesce(qt_ideal_peso_p,0)) * 0.40) + coalesce(qt_ideal_peso_p,0);
        else
            if (tp_genero_p = 'M') then
                qt_adjust_peso_w := ((coalesce(qt_peso_p,0) - coalesce(qt_ideal_peso_p,0)) * 0.32) + coalesce(qt_ideal_peso_p,0);
            elsif (tp_genero_p = 'F') then
                qt_adjust_peso_w := ((coalesce(qt_peso_p,0) - coalesce(qt_ideal_peso_p,0)) * 0.38) + coalesce(qt_ideal_peso_p,0);
            end if;
        end if;
    end if;

    return dividir_sem_round_md((qt_adjust_peso_w * 100),100);

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_ad_peso_npt_p_formul_md (qt_ideal_peso_p bigint, IE_PARAM_12_P text, qt_peso_p bigint, tp_genero_p text ) FROM PUBLIC;

