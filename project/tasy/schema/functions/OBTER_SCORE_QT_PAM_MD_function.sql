-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_score_qt_pam_md ( nr_idade_meses_p bigint, qt_pam_p bigint ) RETURNS bigint AS $body$
DECLARE

	qt_pto_pam_w smallint;

BEGIN

	if (nr_idade_meses_p < 0) then

		if (qt_pam_p <= 16) then
			qt_pto_pam_w := 6;
		elsif (qt_pam_p >= 17) and (qt_pam_p <= 30) then
			qt_pto_pam_w := 3;
		elsif (qt_pam_p >= 31) and (qt_pam_p <= 45) then
			qt_pto_pam_w := 2;
		elsif (qt_pam_p >= 46) then
			qt_pto_pam_w := 0;
		end if;

	elsif (nr_idade_meses_p >= 1) and (nr_idade_meses_p <= 11) then

		if (qt_pam_p <= 24) then
			qt_pto_pam_w := 6;
		elsif (qt_pam_p >= 25) and (qt_pam_p <= 38) then
			qt_pto_pam_w := 3;
		elsif (qt_pam_p >= 39) and (qt_pam_p <= 54) then
			qt_pto_pam_w := 2;
		elsif (qt_pam_p >= 55) then
			qt_pto_pam_w := 0;
		end if;

	elsif (nr_idade_meses_p >= 12) and (nr_idade_meses_p <= 23) then

		if (qt_pam_p <= 30) then
			qt_pto_pam_w := 6;
		elsif (qt_pam_p >= 31) and (qt_pam_p <= 43) then
			qt_pto_pam_w := 3;
		elsif (qt_pam_p >= 44) and (qt_pam_p <= 59) then
			qt_pto_pam_w := 2;
		elsif (qt_pam_p >= 60) then
			qt_pto_pam_w := 0;
		end if;

	elsif (nr_idade_meses_p >= 24) and (nr_idade_meses_p <= 59) then

		if (qt_pam_p <= 31) then
			qt_pto_pam_w := 6;
		elsif (qt_pam_p >= 32) and (qt_pam_p <= 44) then
			qt_pto_pam_w := 3;
		elsif (qt_pam_p >= 46) and (qt_pam_p <= 61) then
			qt_pto_pam_w := 2;
		elsif (qt_pam_p >= 62) then
			qt_pto_pam_w := 0;
		end if;

	elsif (nr_idade_meses_p >= 60) and (nr_idade_meses_p <= 143) then

		if (qt_pam_p <= 35) then
			qt_pto_pam_w := 6;
		elsif (qt_pam_p >= 36) and (qt_pam_p <= 48) then
			qt_pto_pam_w := 3;
		elsif (qt_pam_p >= 49) and (qt_pam_p <= 64) then
			qt_pto_pam_w := 2;
		elsif (qt_pam_p >= 65) then
			qt_pto_pam_w := 0;
		end if;

	elsif (nr_idade_meses_p >= 144) then

		if (qt_pam_p <= 37) then
			qt_pto_pam_w := 6;
		elsif (qt_pam_p >= 38) and (qt_pam_p <= 51) then
			qt_pto_pam_w := 3;
		elsif (qt_pam_p >= 52) and (qt_pam_p <= 66) then
			qt_pto_pam_w := 2;
		elsif (qt_pam_p >= 67) then
			qt_pto_pam_w := 0;
		end if;
	end if;
	
	return qt_pto_pam_w;
	
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_score_qt_pam_md ( nr_idade_meses_p bigint, qt_pam_p bigint ) FROM PUBLIC;

