-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_tmb_npt_prot_formula_md (tp_genero_p text, qt_peso_p bigint, qt_altura_p bigint, qt_idade_p bigint ) RETURNS bigint AS $body$
DECLARE

   qt_result_w bigint;

BEGIN
		if (tp_genero_p = 'M') then
			qt_result_w := 66.5 + (13.75 * coalesce(qt_peso_p,0)) + (5.003 * coalesce(qt_altura_p,0)) - (6.775 * coalesce(qt_idade_p,0));
		elsif (tp_genero_p = 'F') then
			qt_result_w := 655.1 + (9.563 * coalesce(qt_peso_p,0)) + (1.850 * coalesce(qt_altura_p,0)) - (4.676 * coalesce(qt_idade_p,0));
		end if;

		qt_result_w := dividir_sem_round_md(qt_result_w * 100,100);

    return coalesce(trunc(qt_result_w,2),0);

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_tmb_npt_prot_formula_md (tp_genero_p text, qt_peso_p bigint, qt_altura_p bigint, qt_idade_p bigint ) FROM PUBLIC;

