-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION via_obter_dado_despesa ( nr_seq_despesa_p bigint, ie_field_p text ) RETURNS varchar AS $body$
DECLARE


        dt_despesa_w            via_despesa.dt_despesa%type;
        nr_seq_classif_desp_w	via_despesa.nr_seq_classif_desp%type;
        ie_responsavel_custo_w  via_despesa.ie_responsavel_custo%type;
        vl_despesa_w            via_despesa.vl_despesa%type;
        nr_seq_forma_pagto_w    via_despesa.nr_seq_forma_pagto%type;
        cd_retorno_w 		varchar(80);


BEGIN

        SELECT  vd.dt_despesa,
                vd.nr_seq_classif_desp,
                vd.ie_responsavel_custo,
                vd.vl_despesa,
                vd.nr_seq_forma_pagto
        INTO STRICT    dt_despesa_w,
                nr_seq_classif_desp_w,
                ie_responsavel_custo_w,
                vl_despesa_w,
                nr_seq_forma_pagto_w
        FROM    via_despesa vd
        WHERE   vd.nr_sequencia = nr_seq_despesa_p;

	if (ie_field_p = 'DT_DESPESA') then
		cd_retorno_w := to_char(dt_despesa_w, 'DD/MM/YYYY');
	elsif (ie_field_p = 'NR_SEQ_CLASSIF_DESP') then
		cd_retorno_w := nr_seq_classif_desp_w;
	elsif (ie_field_p = 'IE_RESPONSAVEL_CUSTO') then
		cd_retorno_w := ie_responsavel_custo_w;
	elsif (ie_field_p = 'VL_DESPESA') then
		cd_retorno_w := vl_despesa_w;
        elsif (ie_field_p = 'NR_SEQ_FORMA_PAGTO') then
                cd_retorno_w := nr_seq_forma_pagto_w;
	end if;

	return cd_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION via_obter_dado_despesa ( nr_seq_despesa_p bigint, ie_field_p text ) FROM PUBLIC;

