-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION pls_obter_regra_data_ptu_cobr ( ie_tipo_guia_p pls_regra_data_ptu_cobr.ie_tipo_guia%type, ie_tipo_intercambio_p pls_regra_data_ptu_cobr.ie_tipo_intercambio%type, ie_carater_internacao_p pls_regra_data_ptu_cobr.ie_carater_internacao%type, ie_indicacao_acidente_p pls_regra_data_ptu_cobr.ie_indicacao_acidente%type, ie_tipo_consulta_p pls_regra_data_ptu_cobr.ie_tipo_consulta%type, nr_seq_tipo_atendimento_p pls_regra_data_ptu_cobr.nr_seq_tipo_atendimento%type, ie_regime_atendimento_p pls_regra_data_ptu_cobr.ie_regime_atendimento%type, ie_saude_ocupacional_p pls_regra_data_ptu_cobr.ie_saude_ocupacional%type) RETURNS varchar AS $body$
DECLARE

						
ds_retorno_w	varchar(2);

C01 CURSOR FOR
	
	SELECT	a.ie_tipo_data
	from	pls_regra_data_ptu_cobr	a
	where	1 = 1
	and	((coalesce(a.ie_tipo_guia::text, '') = '') or (a.ie_tipo_guia 		= ie_tipo_guia_p))	
	and	((a.ie_tipo_intercambio = ie_tipo_intercambio_p) or (a.ie_tipo_intercambio = 'A'))
	and	((coalesce(a.ie_carater_internacao::text, '') = '') or (a.ie_carater_internacao 	= ie_carater_internacao_p))
	and	((coalesce(a.ie_indicacao_acidente::text, '') = '') or (a.ie_indicacao_acidente 	= ie_indicacao_acidente_p))
	and	((coalesce(a.ie_tipo_consulta::text, '') = '') or (a.ie_tipo_consulta 	= ie_tipo_consulta_p))
	and	((coalesce(a.nr_seq_tipo_atendimento::text, '') = '') or (a.nr_seq_tipo_atendimento 	= nr_seq_tipo_atendimento_p))
	and	((coalesce(a.ie_regime_atendimento::text, '') = '') or (a.ie_regime_atendimento	= ie_regime_atendimento_p))
	and	((coalesce(a.ie_saude_ocupacional::text, '') = '') or (a.ie_saude_ocupacional	= ie_saude_ocupacional_p))
	order by
		coalesce(a.ie_tipo_guia, 0),
		coalesce(a.ie_tipo_intercambio, 0),
		coalesce(a.ie_carater_internacao, 0),
		coalesce(a.ie_indicacao_acidente, 0),
		coalesce(a.ie_tipo_consulta, 0),
		coalesce(a.nr_sequencia, 0),
		coalesce(a.nr_seq_tipo_atendimento, 0),
		coalesce(a.ie_regime_atendimento, 0),
		coalesce(a.ie_saude_ocupacional, 0);
		

BEGIN
ds_retorno_w := null;

open C01;
loop
fetch C01 into	
	ds_retorno_w;
EXIT WHEN NOT FOUND; /* apply on C01 */
end loop;
close C01;

return	ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_obter_regra_data_ptu_cobr ( ie_tipo_guia_p pls_regra_data_ptu_cobr.ie_tipo_guia%type, ie_tipo_intercambio_p pls_regra_data_ptu_cobr.ie_tipo_intercambio%type, ie_carater_internacao_p pls_regra_data_ptu_cobr.ie_carater_internacao%type, ie_indicacao_acidente_p pls_regra_data_ptu_cobr.ie_indicacao_acidente%type, ie_tipo_consulta_p pls_regra_data_ptu_cobr.ie_tipo_consulta%type, nr_seq_tipo_atendimento_p pls_regra_data_ptu_cobr.nr_seq_tipo_atendimento%type, ie_regime_atendimento_p pls_regra_data_ptu_cobr.ie_regime_atendimento%type, ie_saude_ocupacional_p pls_regra_data_ptu_cobr.ie_saude_ocupacional%type) FROM PUBLIC;

