-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION cpoe_add_span_exl (ds_informacao_p text, cd_mat_exame_p text) RETURNS varchar AS $body$
DECLARE

ds_span_w varchar(2000);
vDesMat varchar(100);

BEGIN
  -- force re-compilation SO-2341533
  select SUBSTR(coalesce(obter_desc_material_exame_lab(cd_mat_exame_p),'-1'),1,100)  into STRICT vDesMat;
    if ((trim(both ds_informacao_p) IS NOT NULL AND (trim(both ds_informacao_p))::text <> '')) then
	begin
          if vDesMat <> '-1' then
             ds_span_w	:= '<span class=''ds-material-adic''> '||' '||ds_informacao_p||' ('||vDesMat||')'||'</span>';
          else
             ds_span_w	:= '<span class=''ds-material-adic''> '||' '||ds_informacao_p||'</span>';
          end if;
	end;
   end if;
return ds_span_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 IMMUTABLE;
-- REVOKE ALL ON FUNCTION cpoe_add_span_exl (ds_informacao_p text, cd_mat_exame_p text) FROM PUBLIC;

