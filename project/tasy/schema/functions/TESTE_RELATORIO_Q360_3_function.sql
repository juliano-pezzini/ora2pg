-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION teste_relatorio_q360_3 ( QT_UTILIZACAO_P bigint, CD_UNIDADE_MEDIDA_P bigint, IE_FREQUENCIA_P text, DT_INICIO_P timestamp, DT_FIM_P timestamp) RETURNS bigint AS $body$
DECLARE


QT_RETORNO_W		bigint := 1;


BEGIN

/*

select TESTE_RELATORIO_Q360_2(QT_UTILIZACAO_P, CD_UNIDADE_MEDIDA_P,IE_FREQUENCIA_P, DT_INICIO_P,DT_FIM_P) into  QT_RETORNO_W		 from dual;

SELECT  ((QT_UTILIZACAO_P/ (SELECT 20 FROM DUAL WHERE CD_UNIDADE_MEDIDA_P = 4 UNION SELECT 1 FROM DUAL WHERE CD_UNIDADE_MEDIDA_P = 5)) / 
        (SELECT 1 FROM DUAL WHERE IE_FREQUENCIA_P = 'D' UNION SELECT 7 FROM DUAL WHERE IE_FREQUENCIA_P = 'S' UNION SELECT 30 FROM DUAL WHERE IE_FREQUENCIA_P = 'M' UNION SELECT NULL FROM DUAL WHERE IE_FREQUENCIA_P IS NULL)) * 
        (SELECT PKG_DATE_UTILS.GET_DIFFDATE(DT_INICIO_P, DT_FIM_P , 'YEAR') FROM DUAL WHERE DT_FIM_P IS NOT NULL UNION SELECT PKG_DATE_UTILS.GET_DIFFDATE(DT_INICIO_P, SYSDATE , 'YEAR') FROM DUAL WHERE DT_FIM_P IS NULL) 
INTO QT_RETORNO_W
FROM DUAL;

*/
RETURN QT_RETORNO_W;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION teste_relatorio_q360_3 ( QT_UTILIZACAO_P bigint, CD_UNIDADE_MEDIDA_P bigint, IE_FREQUENCIA_P text, DT_INICIO_P timestamp, DT_FIM_P timestamp) FROM PUBLIC;

