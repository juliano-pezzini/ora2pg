-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_carboplatina_paciente ( qt_peso_p bigint, ie_sexo_p text, qt_auc_p bigint, ie_unid_med_p bigint, qt_creatinina_p bigint, qt_idade_p bigint) RETURNS bigint AS $body$
DECLARE


qt_carboplatina_w		double precision;
qt_clearence_w			double precision;


BEGIN


if (qt_peso_p > 0) and (qt_creatinina_p > 0) and (qt_idade_p >0 ) then
	begin
	qt_clearence_w	:= dividir(((140 - qt_idade_p) * qt_peso_p) , (7.2 * qt_creatinina_p));

	if (coalesce(ie_unid_med_p,1) = 1) then
	qt_clearence_w	:= qt_clearence_w * 0.10;
	end if;

	if (ie_sexo_p = 'F') then
		qt_clearence_w	:= qt_clearence_w * 0.85;
	end if;

	end;
end if;
if (qt_clearence_w IS NOT NULL AND qt_clearence_w::text <> '') then
	qt_carboplatina_w	:= (qt_auc_p * (qt_clearence_w + 25));
end if;



return	qt_carboplatina_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_carboplatina_paciente ( qt_peso_p bigint, ie_sexo_p text, qt_auc_p bigint, ie_unid_med_p bigint, qt_creatinina_p bigint, qt_idade_p bigint) FROM PUBLIC;

