-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_imagem_livre_ocup_hosp ( ie_status_unidade_p text, ie_sexo_p text, ie_classif_etaria_p text, ie_temporario_p text, ie_paciente_isolado_p text) RETURNS bigint AS $body$
DECLARE


nr_imagem_w	bigint	:= 5;


BEGIN

if (ie_status_unidade_p = 'P') then
	begin
	if (ie_sexo_p = 'M') then
		begin
		if (ie_classif_etaria_p = 'A') then
			nr_imagem_w	:= 195; -- Adulto M
		elsif (ie_classif_etaria_p = 'I') then
			nr_imagem_w	:= 197; -- Idoso M
		elsif (ie_classif_etaria_p = 'C') then
			nr_imagem_w	:= 190; -- Criança M
		elsif (ie_classif_etaria_p = 'L') then
			nr_imagem_w	:= 192; -- Adolescente M
		end if;
		end;
	else
		begin
		if (ie_classif_etaria_p = 'A') then
			nr_imagem_w	:= 196; -- Adulto F
		elsif (ie_classif_etaria_p = 'I') then
			nr_imagem_w	:= 198; -- Idoso F
		elsif (ie_classif_etaria_p = 'S') then
			nr_imagem_w	:= 208; -- Saída interdição
		elsif (ie_classif_etaria_p = 'C') then
			nr_imagem_w	:= 191; -- Criança F
		elsif (ie_classif_etaria_p = 'L') then
			nr_imagem_w	:= 193; -- Adolescente F
		end if;
		end;
	end if;
	end;
else
	begin
	if (ie_status_unidade_p = 'L') and (ie_temporario_p = 'S') then
		nr_imagem_w	:= 204; -- Temporário Livre
	elsif (ie_status_unidade_p = 'L') then
		nr_imagem_w	:= 203; -- Livre
	elsif (ie_status_unidade_p = 'H') then
		nr_imagem_w	:= 202; -- Higienização
	elsif (ie_status_unidade_p = 'M') then
		nr_imagem_w	:= 200; -- Acompanhante
	elsif (ie_status_unidade_p = 'I') then
		nr_imagem_w	:= 206; -- Interditado
	elsif (ie_status_unidade_p = 'A') then
		nr_imagem_w	:= 201; -- Em Alta
	elsif (ie_status_unidade_p = 'O') then
		nr_imagem_w	:= 207; -- Isolamento
	elsif (ie_status_unidade_p = 'R') then
		nr_imagem_w	:= 205; -- Reservado
	elsif (ie_status_unidade_p = 'G') then
		nr_imagem_w	:= 265; -- Aguard hig
	elsif (ie_status_unidade_p = 'AD') then
		nr_imagem_w	:= 199; -- Alta médica
	elsif (ie_status_unidade_p = 'E') then
		nr_imagem_w	:= 264; -- Manutenção
	elsif (ie_status_unidade_p = 'C') then
		nr_imagem_w	:= 263; -- Chamado manutenção
	elsif (ie_status_unidade_p = 'AP') then
		nr_imagem_w	:= 278; -- Alta prevista
	elsif (ie_status_unidade_p = 'IR') then
		nr_imagem_w	:= 332; -- Interditado radiação
	elsif (ie_status_unidade_p = 'PR') then
		nr_imagem_w	:= 330; -- Paciente radiacao
	elsif (ie_status_unidade_p = 'AS') then
		nr_imagem_w	:= 329; -- Pend Alta tes
	elsif (ie_status_unidade_p = 'AT') then
		nr_imagem_w 	:= 446; -- Alta admin
	elsif (ie_status_unidade_p = 'AP') then
		nr_imagem_w 	:= 738; -- Serviço em pausa
	end if;
	end;
end if;

if (ie_paciente_isolado_p = 'S') then
	begin
	if (ie_sexo_p = 'M') then
		nr_imagem_w	:= 209; -- Isolamento M
	else
		nr_imagem_w	:= 207; -- Isolamento F
	end if;
	end;
end if;

return	nr_imagem_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_imagem_livre_ocup_hosp ( ie_status_unidade_p text, ie_sexo_p text, ie_classif_etaria_p text, ie_temporario_p text, ie_paciente_isolado_p text) FROM PUBLIC;

