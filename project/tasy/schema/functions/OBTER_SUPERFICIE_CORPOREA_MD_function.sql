-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_superficie_corporea_md ( qt_altura_cm_p bigint, qt_peso_p bigint, ie_formula_sup_corporea_p text, nr_dec_sc_p bigint) RETURNS bigint AS $body$
DECLARE


	qt_resultado_w	   double precision;
	qt_peso_gramas_w   double precision;

BEGIN

	if (ie_formula_sup_corporea_p	= 'D') then
		qt_resultado_w	:= dividir_sem_round_md((power(qt_altura_cm_p, 0.725) * power(qt_peso_p, 0.425) * 71.84),power(10,4));
	elsif (ie_formula_sup_corporea_p	= 'M') then
		qt_resultado_w	:= sqrt(dividir_sem_round_md((qt_altura_cm_p * qt_peso_p),3600));
	elsif (ie_formula_sup_corporea_p	= 'H') then
		qt_resultado_w	:= (power(qt_altura_cm_p, 0.3964) * power(qt_peso_p, 0.5378) * 0.024265);
	elsif (ie_formula_sup_corporea_p = 'G') then
		qt_resultado_w	:= (power(qt_altura_cm_p, 0.42246) * power(qt_peso_p, 0.51456) * 0.0235);
	elsif (ie_formula_sup_corporea_p = 'B') then
		qt_peso_gramas_w	:= qt_peso_p * 1000;
		qt_resultado_w	:= ((power(qt_altura_cm_p, 0.3) * power(qt_peso_gramas_w, 0.7285 - ( 0.0188* log(10,qt_peso_gramas_w))) * 0.0003207));
	end if;

	if (nr_dec_sc_p IS NOT NULL AND nr_dec_sc_p::text <> '') then
		qt_resultado_w	:= trunc(qt_resultado_w,nr_dec_sc_p);
	end if;
	
	RETURN qt_resultado_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_superficie_corporea_md ( qt_altura_cm_p bigint, qt_peso_p bigint, ie_formula_sup_corporea_p text, nr_dec_sc_p bigint) FROM PUBLIC;

