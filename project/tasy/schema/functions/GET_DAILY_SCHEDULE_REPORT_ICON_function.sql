-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_daily_schedule_report_icon ( ie_status_agenda_p ageint_consulta_hor_usu.ie_status_agenda%TYPE, dt_confirmacao_p text, ie_encaixe_p ageint_consulta_hor_usu.ie_encaixe%TYPE, cd_paciente_p ageint_consulta_hor_usu.cd_paciente%TYPE, nm_paciente_p text, nm_usuario_acesso_p text ) RETURNS varchar AS $body$
DECLARE

    ds_titulo_w varchar(255);

BEGIN
    ds_titulo_w := '';

    IF ( ie_status_agenda_p = 'R' ) THEN
        ds_titulo_w := 'dashed-circle-icon';
    ELSIF ( (nm_paciente_p IS NOT NULL AND nm_paciente_p::text <> '') AND coalesce(dt_confirmacao_p::text, '') = '' AND ie_encaixe_p = 'S' and ie_status_agenda_p NOT IN (
        'AD',
        'A',
        'O',
        'E'
    ) ) THEN
        ds_titulo_w := 'fitting-icon';
    ELSIF ( ie_status_agenda_p = 'F' OR ie_status_agenda_p = 'FJ' ) THEN
        ds_titulo_w := 'patient-cancel-icon';
    ELSIF ( ie_status_agenda_p = 'C' ) THEN
        ds_titulo_w := 'cancel-icon';
    ELSIF ( ie_status_agenda_p = 'B' ) THEN
        ds_titulo_w := 'block-icon';
    ELSIF ( ( (nm_paciente_p IS NOT NULL AND nm_paciente_p::text <> '') OR (cd_paciente_p IS NOT NULL AND cd_paciente_p::text <> '') ) AND ie_status_agenda_p NOT IN (
        'F',
        'I',
        'A',
        'O',
        'E',
        'C',
        'B'
    ) ) THEN
        ds_titulo_w := 'bullet-grey-icon';
    ELSIF ( ie_status_agenda_p = 'E' ) THEN
        ds_titulo_w := 'check-icon';
    ELSIF ( ie_status_agenda_p = 'O' ) THEN
        ds_titulo_w := 'patient-partial-icon';
    ELSIF ( ie_status_agenda_p = 'EE' ) THEN
        ds_titulo_w := 'patient-circle-icon';
    ELSIF ( ie_status_agenda_p = 'AD' ) THEN
        ds_titulo_w := 'patient-check-icon';
    ELSIF ( ie_status_agenda_p = 'A' ) THEN
        ds_titulo_w := 'clock-icon';
    ELSIF (nm_usuario_acesso_p IS NOT NULL AND nm_usuario_acesso_p::text <> '') THEN
        ds_titulo_w := 'calendar-icon';
    ELSIF ( ie_status_agenda_p = 'RE' ) THEN
        ds_titulo_w := 'circular-arrow-check-icon';
    ELSIF ( (nm_paciente_p IS NOT NULL AND nm_paciente_p::text <> '') AND (dt_confirmacao_p IS NOT NULL AND dt_confirmacao_p::text <> '') AND ie_status_agenda_p NOT IN (
        'AD',
        'A',
        'O',
        'E'
    ) ) THEN
        ds_titulo_w := 'bullet-green-icon';
    ELSIF ( ie_status_agenda_p = 'I' ) THEN
        ds_titulo_w := 'patient-interrogation';
    END IF;

    RETURN ds_titulo_w;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_daily_schedule_report_icon ( ie_status_agenda_p ageint_consulta_hor_usu.ie_status_agenda%TYPE, dt_confirmacao_p text, ie_encaixe_p ageint_consulta_hor_usu.ie_encaixe%TYPE, cd_paciente_p ageint_consulta_hor_usu.cd_paciente%TYPE, nm_paciente_p text, nm_usuario_acesso_p text ) FROM PUBLIC;

