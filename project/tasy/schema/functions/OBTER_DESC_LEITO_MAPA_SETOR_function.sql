-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_desc_leito_mapa_setor (nr_seq_interno_p bigint, ie_chamou_p text default 'O') RETURNS varchar AS $body$
DECLARE


ds_retorno_w varchar(5000);				
ie_status_unidade_w varchar(3);

dt_prevista_w timestamp;
dt_prevista_char_w varchar(255);
dt_inicio_w timestamp;
dt_inicio_char_w varchar(255);
ds_servico_w varchar(80);
nm_prof_previsto_w varchar(60);
ds_executor_w varchar(40);
dt_historico_interdicao_w timestamp;
dt_hist_interdicao_w varchar(255);
ds_motivo_interdicao_w varchar(60);
dt_historico_manutencao_w timestamp;
dt_hist_manutencao_w varchar(255);
ds_motivo_manutencao_w varchar(80);
dt_historico_isolamento_w timestamp;
dt_hist_isolamento_w varchar(255);
ds_motivo_isolamento_w varchar(80);
nr_atendimento_w bigint;
nm_paciente_reserva_w varchar(60);
--ds_convenio_reserva_w varchar2(40);
nm_acompanhante_w varchar(60);
ie_solicitacao_reserva_pend_w bigint;
ie_retaguarda_atual_w		unidade_atendimento.ie_retaguarda_atual%type;


BEGIN

select	ie_status_unidade,
	ie_retaguarda_atual
into STRICT	ie_status_unidade_w,
	ie_retaguarda_atual_w
from	unidade_atendimento
where nr_seq_interno = nr_seq_interno_p;

CASE ie_status_unidade_w
	WHEN 'A' THEN
		begin 
			begin
				select	nr_atendimento
				into STRICT 	nr_atendimento_w
				from	unidade_atendimento
				where 	nr_seq_interno = nr_seq_interno_p  LIMIT 1;
				
			exception
			when others then
				nr_atendimento_w:=0;
			end;
				
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(283863)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||nr_atendimento_w||'</div>'
						 ||'<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(295156)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||obter_pessoa_atendimento(nr_atendimento_w, 'N')||'</div>'
						 ||'<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(309145)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||obter_dados_atendimento(nr_atendimento_w, 'DAM')||'</div>'
						 ||'<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(283377)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||obter_dados_atendimento(nr_atendimento_w, 'DA')||'</div>';
						
		end;
    WHEN 'C' THEN	--CHAMADO MANUTENCAO
		begin
			begin
				select	a.dt_historico,
						coalesce(substr(obter_desc_mot_manut(a.cd_motivo_manutencao),1,80), obter_desc_expressao(327119))
				into STRICT	dt_historico_manutencao_w,
						ds_motivo_manutencao_w
				from	unidade_atend_hist a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p
				and		b.nr_seq_interno = a.nr_seq_unidade
				and 	coalesce(a.dt_fim_historico::text, '') = ''
				and  	(a.dt_historico IS NOT NULL AND a.dt_historico::text <> '') 
				and 	a.dt_historico = 
						(SELECT	max(z.dt_historico)
						from    unidade_atend_hist z
						where   z.nr_seq_unidade = b.nr_seq_interno
						and 	coalesce(z.dt_fim_historico::text, '') = ''
						and  	(z.dt_historico IS NOT NULL AND z.dt_historico::text <> '')) LIMIT 1;
						
				dt_hist_manutencao_w := to_char(dt_historico_manutencao_w, 'dd/mm/yyyy hh24:mi');
				if (ie_chamou_p = 'P') then
					if (dt_historico_manutencao_w IS NOT NULL AND dt_historico_manutencao_w::text <> '') then
						dt_hist_manutencao_w := 'flagStart' || to_char(dt_historico_manutencao_w, 'dd/mm/yyyy hh24:mm:ss') || 'flagEnd';
					end if;
				end if;
			exception
			when others then
				dt_hist_manutencao_w:='';
				ds_motivo_manutencao_w:='';
			end;
		
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(291978)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||dt_hist_manutencao_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(293478)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_motivo_manutencao_w||'</div>';

		end;
    WHEN 'E' THEN	--MANUTENCAO
		begin
			begin
				select	a.dt_historico,
						coalesce(substr(obter_desc_mot_manut(a.cd_motivo_manutencao),1,80), obter_desc_expressao(327119))
				into STRICT	dt_historico_manutencao_w,
						ds_motivo_manutencao_w
				from	unidade_atend_hist a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p
				and		b.nr_seq_interno = a.nr_seq_unidade
				and 	coalesce(a.dt_fim_historico::text, '') = ''
				and  	(a.dt_historico IS NOT NULL AND a.dt_historico::text <> '')
				and 	a.dt_historico = 
						(SELECT	max(z.dt_historico)
						from    unidade_atend_hist z
						where   z.nr_seq_unidade = b.nr_seq_interno
						and 	coalesce(z.dt_fim_historico::text, '') = ''
						and  	(z.dt_historico IS NOT NULL AND z.dt_historico::text <> ''));
						
				dt_hist_manutencao_w := to_char(dt_historico_manutencao_w, 'dd/mm/yyyy hh24:mi');
				if (ie_chamou_p = 'P') then
					if (dt_historico_manutencao_w IS NOT NULL AND dt_historico_manutencao_w::text <> '') then
						dt_hist_manutencao_w := 'flagStart' || to_char(dt_historico_manutencao_w, 'dd/mm/yyyy hh24:mm:ss') || 'flagEnd';
					end if;
				end if;
			exception
			when others then
				dt_historico_manutencao_w:='';
				ds_motivo_manutencao_w:='';
			end;
				
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(291978)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||dt_hist_manutencao_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(293478)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_motivo_manutencao_w||'</div>';

		end;
    WHEN 'G' THEN	--AGUARDANDO HIGIENIZACAO
		begin
			begin
				select	a.dt_prevista,
						coalesce(substr(obter_descricao_padrao('SL_SERVICO', 'DS_SERVICO',a.NR_SEQ_SERVICO),1,80), obter_desc_expressao(327119)) ds_servico,
						coalesce(substr(obter_nome_pf(a.cd_prof_previsto), 1, 60), obter_desc_expressao(327119)) nm_prof_previsto
				into STRICT	dt_prevista_w,
						ds_servico_w,
						nm_prof_previsto_w
				from	sl_unid_atend a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p
				and		b.nr_seq_interno = a.nr_seq_unidade
				and 	coalesce(a.dt_fim::text, '') = ''
				and  	coalesce(a.dt_inicio::text, '') = ''
				and 	a.dt_prevista = 
						(SELECT	min(z.dt_prevista)
						from    sl_unid_atend z
						where   z.nr_seq_unidade = a.nr_seq_unidade
						and 	coalesce(z.dt_fim::text, '') = ''
						and  	coalesce(z.dt_inicio::text, '') = '');
						
				dt_prevista_char_w := to_char(dt_prevista_w, 'dd/mm/yyyy hh24:mi');
				if (ie_chamou_p = 'P') then
					if (dt_prevista_w IS NOT NULL AND dt_prevista_w::text <> '') then
						dt_prevista_char_w := 'flagStart' || to_char(dt_prevista_w, 'dd/mm/yyyy hh24:mm:ss') || 'flagEnd';
					end if;
				end if;
			exception
			when others then
				dt_prevista_w:='';
				ds_servico_w:='';
				nm_prof_previsto_w:='';
			end;
						
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(314396)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||dt_prevista_char_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(293478)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_servico_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(310486)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||nm_prof_previsto_w||'</div>';
		
		end;
	WHEN 'H' THEN	--EM HIGIENIZACAO
		begin
			begin
				select	a.dt_inicio,
						coalesce(substr(obter_descricao_padrao('SL_SERVICO', 'DS_SERVICO',a.NR_SEQ_SERVICO),1,80), obter_desc_expressao(327119)) ds_servico,
						coalesce(substr(obter_valor_dominio(1811, ie_executor),1,40), obter_desc_expressao(327119)) ds_executor
				into STRICT	dt_inicio_w,
						ds_servico_w,
						ds_executor_w
				from	sl_unid_atend a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p
				and		b.nr_seq_interno = a.nr_seq_unidade
				and 	coalesce(a.dt_fim::text, '') = ''
				and  	(a.dt_inicio IS NOT NULL AND a.dt_inicio::text <> '') 
				and 	a.dt_prevista = 
						(SELECT	min(z.dt_prevista)
						from    sl_unid_atend z
						where   z.nr_seq_unidade = a.nr_seq_unidade
						and 	coalesce(z.dt_fim::text, '') = ''
						and  	(z.dt_inicio IS NOT NULL AND z.dt_inicio::text <> '')) LIMIT 1;
						
				dt_inicio_char_w := to_char(dt_inicio_w, 'dd/mm/yyyy hh24:mi');
				
				if (ie_chamou_p = 'P') then
					if (dt_inicio_w IS NOT NULL AND dt_inicio_w::text <> '') then
						dt_inicio_char_w := 'flagStart' || to_char(dt_inicio_w, 'dd/mm/yyyy hh24:mm:ss') || 'flagEnd';
					end if;
				end if;
			exception
			when others then
				dt_inicio_w:='';
				ds_servico_w:='';
				ds_executor_w:='';
			end;
						
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(291978)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||dt_inicio_char_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(293478)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_servico_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(296514)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_executor_w||'</div>';

		end;
	WHEN 'I' THEN	--INTERDITADO
		begin
			begin
				select	a.dt_historico,
						coalesce(substr(OBTER_DESC_MOT_INTER(a.CD_MOTIVO_INTERDICAO),1,60), obter_desc_expressao(327119))
				into STRICT	dt_historico_interdicao_w,
						ds_motivo_interdicao_w
				from	unidade_atend_hist a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p
				and		b.nr_seq_interno = a.nr_seq_unidade
				and 	coalesce(a.dt_fim_historico::text, '') = ''
				and  	(a.dt_historico IS NOT NULL AND a.dt_historico::text <> '') 
				and 	a.dt_historico = 
						(SELECT	max(z.dt_historico)
						from    unidade_atend_hist z
						where   z.nr_seq_unidade = b.nr_seq_interno
						and 	coalesce(z.dt_fim_historico::text, '') = ''
						and  	(z.dt_historico IS NOT NULL AND z.dt_historico::text <> '')) LIMIT 1;
						
				dt_hist_interdicao_w := to_char(dt_historico_interdicao_w, 'dd/mm/yyyy hh24:mi');
				if (ie_chamou_p = 'P') then
					if (dt_historico_interdicao_w IS NOT NULL AND dt_historico_interdicao_w::text <> '') then
						dt_hist_interdicao_w := 'flagStart' || to_char(dt_historico_interdicao_w, 'dd/mm/yyyy hh24:mm:ss') || 'flagEnd';
					end if;
				end if;
						
			exception
			when others then
				dt_hist_interdicao_w:='';
				ds_motivo_interdicao_w:='';
			end;
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(291978)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||dt_hist_interdicao_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(293478)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_motivo_interdicao_w||'</div>';						
		end;
	WHEN 'M' THEN	--ACOMPANHANTE
		begin
			select	coalesce(obter_nome_pf(cd_paciente_reserva), nm_pac_reserva),
				nr_atendimento_acomp
			into STRICT	nm_acompanhante_w,
				nr_atendimento_w
			from	unidade_atendimento
			where	nr_seq_interno = nr_seq_interno_p;
			
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(294174)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||nm_acompanhante_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(283863)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||nr_atendimento_w||'</div>';
			
		end;
	WHEN 'O' THEN	--ISOLAMENTO
		begin
			begin
				select	a.dt_historico,
						coalesce(substr(obter_motivo_isol_leito(a.nr_seq_mot_isol),1,255), obter_desc_expressao(327119))
				into STRICT	dt_historico_isolamento_w,
						ds_motivo_isolamento_w
				from	unidade_atend_hist a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p	
				and		b.nr_seq_interno = a.nr_seq_unidade
				and 	coalesce(a.dt_fim_historico::text, '') = ''
				and  	(a.dt_historico IS NOT NULL AND a.dt_historico::text <> '') 
				and 	a.dt_historico = 
						(SELECT	max(z.dt_historico)
						from    unidade_atend_hist z
						where   z.nr_seq_unidade = b.nr_seq_interno
						and 	coalesce(z.dt_fim_historico::text, '') = ''
						and  	(z.dt_historico IS NOT NULL AND z.dt_historico::text <> '')) LIMIT 1;
						
				dt_hist_isolamento_w := to_char(dt_historico_isolamento_w, 'dd/mm/yyyy hh24:mi');
				if (ie_chamou_p = 'P') then
					if (dt_historico_isolamento_w IS NOT NULL AND dt_historico_isolamento_w::text <> '') then
						dt_hist_isolamento_w := 'flagStart' || to_char(dt_historico_isolamento_w, 'dd/mm/yyyy hh24:mm:ss') || 'flagEnd';
					end if;
				end if;
			exception
			when others then
				dt_historico_isolamento_w:= '';
				ds_motivo_isolamento_w:= '';
			end;
					
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(291978)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||dt_hist_isolamento_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(293478)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_motivo_isolamento_w||'</div>';
		end;
	WHEN 'R' THEN --RESERVADO
		begin
			select	coalesce(obter_nome_paciente_panorama(cd_paciente_reserva, obter_perfil_ativo, obter_nome_pf(cd_paciente_reserva)),obter_nome_pf(cd_paciente_reserva))
			into STRICT	nm_paciente_reserva_w
			from	unidade_atendimento
			where	nr_seq_interno = nr_seq_interno_p;
		
			ds_retorno_w	:= '';
			
			if (coalesce(ie_retaguarda_atual_w,'N') = 'S') then
				ds_retorno_w	:= ds_retorno_w || '<div class="w-dashboard-beds-additional-info-label ng-binding">' || obter_desc_expressao(683266) || '</div>'; -- Leito Retaguarda
			end if;
			
			if (nm_paciente_reserva_w IS NOT NULL AND nm_paciente_reserva_w::text <> '') then
				if (ds_retorno_w IS NOT NULL AND ds_retorno_w::text <> '') then
					ds_retorno_w	:= ds_retorno_w || '';
				end if;
				ds_retorno_w	:= ds_retorno_w || '<div class="w-dashboard-beds-additional-info-label ng-binding">' || obter_desc_expressao(295156) || ':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">' || nm_paciente_reserva_w||'</div>';
			end if;
		end;
	WHEN 'L' THEN -- LIVRE
		begin
			begin
				select	1
				into STRICT 	ie_solicitacao_reserva_pend_w
				from	unidade_atendimento a,
					gestao_vaga b
				where	a.cd_setor_atendimento = b.cd_setor_desejado
				and	a.cd_unidade_basica = b.cd_unidade_basica
				and	a.cd_unidade_compl = b.cd_unidade_compl
				and	b.ie_status not in ('F','C','D','N','T')
				and	a.nr_seq_interno = nr_seq_interno_p  LIMIT 1;
			exception
			when others then
				ie_solicitacao_reserva_pend_w := 0;
			end;

			ds_retorno_w	:= '';
			
			if (coalesce(ie_retaguarda_atual_w,'N') = 'S') then
				ds_retorno_w	:= ds_retorno_w || '<div class="w-dashboard-beds-additional-info-label ng-binding">' || obter_desc_expressao(683266) || '</div>'; -- Leito Retaguarda
			end if;
	
			if (ie_solicitacao_reserva_pend_w = 1) then
				if (ds_retorno_w IS NOT NULL AND ds_retorno_w::text <> '') then
					ds_retorno_w	:= ds_retorno_w || '';
				end if;
				ds_retorno_w	:= ds_retorno_w || obter_desc_expressao(100330842);
			end if;
		end;		
	WHEN 'S' THEN	--SAIDA INTERDICAO
		begin
			begin 
				select	a.dt_historico
				into STRICT	dt_historico_interdicao_w
				from	unidade_atend_hist a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p
				and		b.nr_seq_interno = a.nr_seq_unidade
				and 	coalesce(a.dt_fim_historico::text, '') = ''
				and  	(a.dt_historico IS NOT NULL AND a.dt_historico::text <> '') 
				and 	a.dt_historico = 
						(SELECT	max(z.dt_historico)
						from    unidade_atend_hist z
						where   z.nr_seq_unidade = b.nr_seq_interno
						and 	coalesce(z.dt_fim_historico::text, '') = ''
						and  	(z.dt_historico IS NOT NULL AND z.dt_historico::text <> '')) LIMIT 1;
						
						
				select	coalesce(substr(OBTER_DESC_MOT_INTER(a.CD_MOTIVO_INTERDICAO),1,60), obter_desc_expressao(327119))
				into STRICT	ds_motivo_interdicao_w
				from	unidade_atend_hist a,
						unidade_atendimento b
				where	a.nr_seq_unidade = nr_seq_interno_p
				and		b.nr_seq_interno = a.nr_seq_unidade
				and  	(a.dt_historico IS NOT NULL AND a.dt_historico::text <> '')
				and 	a.dt_historico = 
						(SELECT	max(z.dt_historico)
						from    unidade_atend_hist z
						where   z.nr_seq_unidade = b.nr_seq_interno
						and 	coalesce(z.dt_fim_historico::text, '') = ''
						and  	(z.dt_historico IS NOT NULL AND z.dt_historico::text <> '')
						and 	z.ie_status_unidade = 'I') LIMIT 1;

				dt_hist_interdicao_w := to_char(dt_historico_interdicao_w, 'dd/mm/yyyy hh24:mi');
				if (ie_chamou_p = 'P') then
					if (dt_historico_interdicao_w IS NOT NULL AND dt_historico_interdicao_w::text <> '') then
						dt_hist_interdicao_w := 'flagStart' || to_char(dt_historico_interdicao_w, 'dd/mm/yyyy hh24:mm:ss') || 'flagEnd';
					end if;
				end if;
			exception
			when others then
				dt_hist_interdicao_w:='';
				ds_motivo_interdicao_w:='';
			end;
						
			ds_retorno_w:= '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(291978)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||dt_hist_interdicao_w||'</div>'
						|| '<div class="w-dashboard-beds-additional-info-label ng-binding">'||obter_desc_expressao(293478)||':</div> <div class="w-dashboard-beds-additional-info-description ng-binding" ng-bind-html="information.description | wDashboardMaskFilter:information.mask">'||ds_motivo_interdicao_w||'</div>';

		end;		
	ELSE
		begin
			ds_retorno_w:= wheb_mensagem_pck.get_texto(795201);
		end;
END CASE;

return	ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_desc_leito_mapa_setor (nr_seq_interno_p bigint, ie_chamou_p text default 'O') FROM PUBLIC;

