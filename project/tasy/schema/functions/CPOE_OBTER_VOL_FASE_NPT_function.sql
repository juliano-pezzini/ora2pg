-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION cpoe_obter_vol_fase_npt ( nr_sequencia_p bigint, ie_fase_p bigint) RETURNS varchar AS $body$
DECLARE


qt_vol_1_fase_w		cpoe_npt_produto.qt_vol_1_fase%type;
qt_vol_2_fase_w		cpoe_npt_produto.qt_vol_2_fase%type;
qt_vol_3_fase_w		cpoe_npt_produto.qt_vol_3_fase%type;
qt_vol_4_fase_w		cpoe_npt_produto.qt_vol_4_fase%type;

ds_retorno_w	varchar(100);


BEGIN

select max(qt_vol_1_fase),
	   max(qt_vol_2_fase),
	   max(qt_vol_3_fase),
	   max(qt_vol_4_fase)
into STRICT   qt_vol_1_fase_w,
	   qt_vol_2_fase_w,
	   qt_vol_3_fase_w,
	   qt_vol_4_fase_w
from   cpoe_npt_produto
where  nr_seq_elemento = nr_sequencia_p;

if (ie_fase_p = 1) then
	return qt_vol_1_fase_w;
elsif (ie_fase_p = 2) then
	return qt_vol_2_fase_w;
elsif (ie_fase_p = 3) then
	return qt_vol_3_fase_w;
elsif (ie_fase_p = 4) then
	return qt_vol_4_fase_w;
end if;

return qt_vol_1_fase_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION cpoe_obter_vol_fase_npt ( nr_sequencia_p bigint, ie_fase_p bigint) FROM PUBLIC;

