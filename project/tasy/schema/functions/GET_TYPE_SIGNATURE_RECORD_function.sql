-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_type_signature_record ( tipo_item_p text ) RETURNS varchar AS $body$
DECLARE


ds_item_w varchar(200);
	

BEGIN
	/* Items of the CPOE */

	select case tipo_item_p
		when 'MED' 	then wheb_mensagem_pck.get_texto(1079843)
		when 'MAT'	then wheb_mensagem_pck.get_texto(1079844)
		when 'REC'  	then wheb_mensagem_pck.get_texto(1079845)
		when 'GAS'  	then wheb_mensagem_pck.get_texto(1079846)
		when 'PROC' 	then wheb_mensagem_pck.get_texto(1079847)
		when 'HEM'  	then wheb_mensagem_pck.get_texto(1079848)
		when 'AP'   	then wheb_mensagem_pck.get_texto(1079849)
		when 'DI'   	then wheb_mensagem_pck.get_texto(1079850)
		when 'DP'   	then wheb_mensagem_pck.get_texto(1080486)
		when 'DO'   	then wheb_mensagem_pck.get_texto(1079851)
		when 'DJ'   	then wheb_mensagem_pck.get_texto(1079852)
		when 'DE'   	then wheb_mensagem_pck.get_texto(1079853)
		when 'DS'   	then wheb_mensagem_pck.get_texto(1079854)
		when 'NPTA' 	then wheb_mensagem_pck.get_texto(1079855)
		when 'NPTI' 	then wheb_mensagem_pck.get_texto(1079856)
		when 'LD'   	then wheb_mensagem_pck.get_texto(1079857)
		else null
	end  ds_type
	into STRICT ds_item_w
	;
	

	/* Items of the PEP */

	if (coalesce(ds_item_w::text, '') = '') then
		if (tipo_item_p = 'PART') then -- Partograma
			ds_item_w := wheb_mensagem_pck.get_texto(339880);
		else
			select 	max(ds_item)
			into STRICT    	ds_item_w
			from 	prontuario_item
			where 	to_char(nr_sequencia) = tipo_item_p;	
		end if;	
	end if;

	/* PEPO */

	if (coalesce(ds_item_w,'XPTO') = 'XPTO') then
		select  max(substr(coalesce(a.ds_item_instituicao,obter_desc_expressao(a.cd_exp_desc_item,a.ds_item)), 1, 200)) ds_item
		into STRICT    ds_item_w
		from 	PEPO_ITEM a
		where 	'P-' || to_char(nr_sequencia) = tipo_item_p;	
	end if;
	/* Tabs PEPO without item*/

	if (coalesce(ds_item_w,'XPTO') = 'XPTO') then
		select case tipo_item_p
			when 'P-PRT' 	then 'Participantes' 			--wheb_mensagem_pck.get_texto(1079843)
			when 'P-JAT'	then 'Justificativa de Atraso' 	--wheb_mensagem_pck.get_texto(1079844)
			else null
		end  ds_type
		into STRICT ds_item_w
		;
	end if;

return ds_item_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_type_signature_record ( tipo_item_p text ) FROM PUBLIC;

