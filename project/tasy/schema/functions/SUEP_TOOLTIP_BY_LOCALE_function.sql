-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION suep_tooltip_by_locale (nr_pontuacao_p bigint, dt_pontuacao_p timestamp) RETURNS varchar AS $body$
DECLARE

ds_idioma_w varchar(200);
ds_base_w   varchar(200);

BEGIN
  select upper(ds_language_tag)
  into STRICT ds_idioma_w
  from tasy_idioma
  where nr_sequencia = coalesce(wheb_usuario_pck.get_nr_seq_idioma,0);

  ds_base_w := pkg_date_formaters.to_varchar(dt_pontuacao_p,'short',
              wheb_usuario_pck.get_cd_estabelecimento,wheb_usuario_pck.get_nm_usuario) || ' - ';

  if (ds_idioma_w in ('EN_AU', 'EN_GB', 'EN_US'))then
     ds_base_w := ds_base_w || obter_desc_expressao(296032) || ' ' || nr_pontuacao_p;
  else
     ds_base_w := ds_base_w || nr_pontuacao_p || ' ' || obter_desc_expressao(296032);
  end if;
  return ds_base_w;

  exception
   when no_data_found then return null;
   when too_many_rows then raise;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION suep_tooltip_by_locale (nr_pontuacao_p bigint, dt_pontuacao_p timestamp) FROM PUBLIC;

