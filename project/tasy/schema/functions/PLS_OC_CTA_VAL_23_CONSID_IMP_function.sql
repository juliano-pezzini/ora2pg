-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';



CREATE TYPE t_dados_sql AS (
	sql_partic		varchar(8000),
	sql_outro_partic	varchar(8000),
	sql_outro_partic_imp	varchar(8000),
	binds_partic		sql_pck.t_dado_bind,
	binds_outro_partic	sql_pck.t_dado_bind,
	ie_validacao		varchar(1)
);


CREATE OR REPLACE FUNCTION pls_oc_cta_val_23_consid_imp ( dados_validacao_p pls_ocor_imp_pck.dados_regra_val_util_item, nr_seq_conta_proc_p pls_conta_proc_imp_v.nr_sequencia%type, nr_seq_outro_proc_p pls_conta_proc_imp_v.nr_sequencia%type) RETURNS varchar AS $body$
DECLARE

/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:	Verificar se os procedimentos passados por parâmetros devem ser considerados iguais para a regra de utilização de itens.
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Locais de chamada direta:
[X]  Objetos do dicionário [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatórios [ ] Outros:
-------------------------------------------------------------------------------------------------------------------
Observações:
	* Esta rotina foi origininada da duplicação da function PLS_OC_CTA_VAL_23_CONSID_PROC.
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
ie_considera_w		varchar(1) := 'S';
nr_seq_protocolo_w	pls_protocolo_conta.nr_sequencia%type;

qt_partic_proc_w	integer;
qt_partic_outro_proc_w	integer;

dados_partic_proc_w		pls_tipos_ocor_pck.dados_participante;
dados_partic_outro_proc_w	pls_tipos_ocor_pck.dados_participante;

ds_sql_partic_w		varchar(4000);
ds_sql_outro_partic_w	varchar(4000);
ds_res_outro_partic_w	varchar(2000);

cursor_w			sql_pck.t_cursor;
cursor_outro_w			sql_pck.t_cursor;

ie_achou_mesmo_part_w	boolean;

dados_sql_partic_w		t_dados_sql;
dados_sql_outro_partic_w	t_dados_sql;

/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

function obter_acesso_proc_partic(	nr_seq_conta_proc_p		pls_conta_proc_v.nr_sequencia%type)
			return t_dados_sql is
/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade: 	Rotina responsável por retornar o acesso a tabela de participantes, ou seja, diz de quem deve ser buscado os participantes.
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
dados_sql_w	t_dados_sql;


BEGIN

/* Quando for informado apenas o procedimento de referência e não for informado o participante de referência, então deve
     ser retornodo todos os partipantes do procedimento de referência. */
dados_sql_w.sql_partic := 'and	partic.nr_seq_conta_proc = :nr_seq_conta_proc ';
dados_sql_w.binds_partic := sql_pck.bind_variable(':nr_seq_conta_proc', nr_seq_conta_proc_p, dados_sql_w.binds_partic);

return dados_sql_w;

end;

/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

function obter_acesso_outro_proc_partic(	nr_seq_conta_proc_p		pls_conta_proc_v.nr_sequencia%type,
			dados_partic_p			pls_tipos_ocor_pck.dados_participante,
			ie_cbo_p			varchar2)
			return t_dados_sql is
/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade: 	Rotina responsável por retornar qual validação deve ser aplicada no participante para que ele seja considerado igual ao participante da tabela de seleção.
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
dados_sql_w	t_dados_sql;

begin

dados_sql_w.ie_validacao := 'N';

/* Quando for informado apenas o procedimento de referência e não for informado o participante de referência, então deve
     ser retornodo todos os partipantes do procedimento de referência. */
dados_sql_w.sql_outro_partic := 'and	partic.nr_seq_conta_proc = :nr_seq_conta_proc ';
dados_sql_w.binds_outro_partic := sql_pck.bind_variable(':nr_seq_conta_proc', nr_seq_conta_proc_p, dados_sql_w.binds_outro_partic);

if (ie_cbo_p = 'S') then
	if (dados_partic_p.cd_cbo_saude_imp IS NOT NULL AND dados_partic_p.cd_cbo_saude_imp::text <> '') then
		dados_sql_w.sql_outro_partic := dados_sql_w.sql_outro_partic ||  pls_tipos_ocor_pck.enter_w ||
						'	and	partic.nr_seq_cbo_saude in (	select	1 ' ||  pls_tipos_ocor_pck.enter_w ||
						'						from	cbo_saude x ' ||  pls_tipos_ocor_pck.enter_w ||
						'						where	cd_cbo = :cd_cbo_saude_imp) ';

		dados_sql_w.sql_outro_partic_imp := dados_sql_w.sql_outro_partic ||  pls_tipos_ocor_pck.enter_w ||
							'	and	partic.cd_cbo_saude_profissional in (	select	1 ' ||  pls_tipos_ocor_pck.enter_w ||
							'						from	cbo_saude x ' ||  pls_tipos_ocor_pck.enter_w ||
							'						where	cd_cbo = :cd_cbo_saude_imp) ';

		dados_sql_w.binds_outro_partic := sql_pck.bind_variable(':cd_cbo_saude_imp', dados_partic_p.cd_cbo_saude_imp, dados_sql_w.binds_outro_partic);

		dados_sql_w.ie_validacao := 'S';
	else
		dados_sql_w.ie_validacao := 'N';
	end if;
end if;

return dados_sql_w;

end;
/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

function obter_acesso_outro_grau_part(	nr_seq_conta_proc_p		pls_conta_proc_v.nr_sequencia%type,
			dados_partic_p			pls_tipos_ocor_pck.dados_participante)
			return t_dados_sql is
/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade: 	Rotina responsável por retornar qual validação deve ser aplicada no participante, com mesmo grau de participacao.
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
dados_sql_w	t_dados_sql;

begin

dados_sql_w.ie_validacao := 'N';
-- Se não foi informado qual procedimento, não será validado
if (coalesce(nr_seq_conta_proc_p::text, '') = '') then

	dados_sql_w.ie_validacao := 'N';
else
	dados_sql_w.sql_outro_partic := 'and	partic.nr_seq_conta_proc = :nr_seq_conta_proc ';
	dados_sql_w.binds_outro_partic := sql_pck.bind_variable(':nr_seq_conta_proc', nr_seq_conta_proc_p, dados_sql_w.binds_outro_partic);

	dados_sql_w.sql_outro_partic_imp := 'and	partic.nr_seq_conta_proc = :nr_seq_conta_proc ';
	dados_sql_w.binds_outro_partic := sql_pck.bind_variable(':nr_seq_conta_proc', nr_seq_conta_proc_p, dados_sql_w.binds_outro_partic);

end if;


if (nr_seq_conta_proc_p IS NOT NULL AND nr_seq_conta_proc_p::text <> '') then

	-- Caso o participante tenha informação de grau de participação informada então busca os dados do grau de participação dos participantes do outro procedimento
	if (dados_partic_p.cd_grau_partic_imp IS NOT NULL AND dados_partic_p.cd_grau_partic_imp::text <> '') then

		/* Quando for conta de intercâmbio deve ser olhado o campo CD_PTU da PLS_GRAU_PARTICIPACAO e comparar com o código
		     de participação informado para o participante do procedimento que está sendo consistido. Caso contrário usa-se o campo CD_TISS. */
		dados_sql_w.sql_outro_partic :=	dados_sql_w.sql_outro_partic || pls_tipos_ocor_pck.enter_w ||
						'and	partic.nr_seq_grau_partic in (	select	grau_partic.nr_sequencia 		' || pls_tipos_ocor_pck.enter_w ||
						'					from	pls_grau_participacao grau_partic 	' || pls_tipos_ocor_pck.enter_w ||
						'					where	grau_partic.cd_tiss = :cd_tiss ) 	';

		dados_sql_w.sql_outro_partic_imp :=	dados_sql_w.sql_outro_partic || pls_tipos_ocor_pck.enter_w ||
						'and	partic.nr_seq_grau_partic_conv in (	select	grau_partic.nr_sequencia 		' || pls_tipos_ocor_pck.enter_w ||
						'						from	pls_grau_participacao grau_partic 	' || pls_tipos_ocor_pck.enter_w ||
						'						where	grau_partic.cd_tiss = :cd_tiss ) 	';

		dados_sql_w.binds_outro_partic := sql_pck.bind_variable(':cd_tiss', dados_partic_p.cd_grau_partic_imp, dados_sql_w.binds_outro_partic);


		dados_sql_w.ie_validacao := 'S';
	else
		-- se não tem grau de participação, então não valida
		dados_sql_w.ie_validacao := 'N';
	end if;

end if;

return dados_sql_w;

end;

/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

begin
-- Somente validará as informações do participante, se o profissional base for o Participante
if (dados_validacao_p.ie_medico_consistencia = 'P') then
	-- Por padrão não é considerado o procedimento, para que isto mude é necessário que o procedimento se encaixe em determinado cenário
	ie_considera_w := 'N';

	-- Deve ter informação sobre os procedimentos para que seja possível aplicar a validação
	if (nr_seq_conta_proc_p IS NOT NULL AND nr_seq_conta_proc_p::text <> '' AND nr_seq_outro_proc_p IS NOT NULL AND nr_seq_outro_proc_p::text <> '') then

		-- Se estiver falando do mesmo procedimento então insere e não é necessário verificar os participantes
		if (nr_seq_conta_proc_p = nr_seq_outro_proc_p) then
			ie_considera_w := 'S';
		else


			-- verifica se o próprio procedimento tem participantes informados.
			select	count(1)
			into STRICT	qt_partic_proc_w
			from	pls_conta_item_equipe_imp
			where	nr_seq_conta_proc = nr_seq_conta_proc_p;


			-- Se o procedimento tiver participante...
			if (qt_partic_proc_w > 0) then

				ie_achou_mesmo_part_w := false;

				-- Obtêm o acesso aos participantes,  seja do procedimento, do procedimento de referência ou um participante em específico
				dados_sql_partic_w := obter_acesso_proc_partic(nr_seq_conta_proc_p);

				-- Monta o select para obter os participantes do item que estão na tabela de seleção
				ds_sql_partic_w	:=	'select	partic.nr_sequencia, 						' || pls_tipos_ocor_pck.enter_w ||
							'	partic.nr_seq_grau_partic_conv 		nr_seq_grau_partic, 	' || pls_tipos_ocor_pck.enter_w ||
							'	partic.cd_grau_partic 			cd_grau_partic_imp, 	' || pls_tipos_ocor_pck.enter_w ||
							'	partic.cd_profissional_conv		cd_medico_imp, 		' || pls_tipos_ocor_pck.enter_w ||
							'	partic.nr_seq_cbo_profissional_conv 	cd_cbo_saude_imp,	' || pls_tipos_ocor_pck.enter_w ||
							'	prot.nr_sequencia			nr_seq_prot		' || pls_tipos_ocor_pck.enter_w ||
							'from	pls_protocolo_conta_imp prot,'	  	|| pls_tipos_ocor_pck.enter_w ||
							'	pls_conta_imp conta, '		 	|| pls_tipos_ocor_pck.enter_w ||
							'	pls_conta_item_imp item,'		|| pls_tipos_ocor_pck.enter_w ||
							'	pls_conta_item_equipe_imp partic '	|| pls_tipos_ocor_pck.enter_w ||
							'where	1 = 1 				' 	|| pls_tipos_ocor_pck.enter_w ||
							'and	conta.nr_seq_protocolo	= prot.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
							'and	item.nr_seq_conta	= conta.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
							'and	partic.nr_seq_conta_item = item.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
							dados_sql_partic_w.sql_partic;

				-- Executa o comando SQL e devolve o cursor
				dados_sql_partic_w.binds_partic := sql_pck.executa_sql_cursor(ds_sql_partic_w, dados_sql_partic_w.binds_partic);

				loop
					fetch 	cursor_w
					into 	dados_partic_proc_w.nr_sequencia,
						dados_partic_proc_w.nr_seq_grau_partic,
						dados_partic_proc_w.cd_grau_partic_imp,
						dados_partic_proc_w.cd_medico_imp,
						dados_partic_proc_w.cd_cbo_saude_imp,
						nr_seq_protocolo_w;
					EXIT WHEN NOT FOUND; /* apply on cursor_w */

					if (dados_validacao_p.ie_mesmo_medico = 'S') then

						dados_sql_outro_partic_w := obter_acesso_outro_proc_partic(nr_seq_outro_proc_p, dados_partic_proc_w, 'N');

						--Para buscar outros participantes, considera apenas o que já está integrado e também o que não está integrado dentro do protocolo do item que está sendo processado
						ds_sql_outro_partic_w :=	'select	cd_medico			' || pls_tipos_ocor_pck.enter_w ||
										'from	pls_proc_participante partic 	' || pls_tipos_ocor_pck.enter_w ||
										'where	1 = 1 				' || pls_tipos_ocor_pck.enter_w ||
										dados_sql_outro_partic_w.sql_outro_partic || pls_tipos_ocor_pck.enter_w ||
										' union all'				  || pls_tipos_ocor_pck.enter_w ||
										'select	partic.cd_profissional_conv cd_medico' || pls_tipos_ocor_pck.enter_w ||
										'from	pls_protocolo_conta_imp d,'	  	|| pls_tipos_ocor_pck.enter_w ||
										'	pls_conta_imp c, '		 	|| pls_tipos_ocor_pck.enter_w ||
										'	pls_conta_item_imp b,'			|| pls_tipos_ocor_pck.enter_w ||
										'	pls_conta_item_equipe_imp partic '	|| pls_tipos_ocor_pck.enter_w ||
										'where	d.nr_sequencia	= '||nr_seq_protocolo_w|| ' '|| pls_tipos_ocor_pck.enter_w ||
										'and	c.nr_seq_protocolo	= d.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
										'and	b.nr_seq_conta		= c.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
										'and	partic.nr_seq_conta_item = b.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
										dados_sql_outro_partic_w.sql_outro_partic_imp;



						dados_sql_outro_partic_w.binds_outro_partic := sql_pck.executa_sql_cursor( ds_sql_outro_partic_w, dados_sql_outro_partic_w.binds_outro_partic);

						loop

							fetch cursor_outro_w
							into	dados_partic_outro_proc_w.cd_medico_imp;
							EXIT WHEN NOT FOUND; /* apply on cursor_outro_w */

								if (dados_partic_proc_w.cd_medico_imp = dados_partic_outro_proc_w.cd_medico_imp) then
									ie_considera_w := 'S';
									ie_achou_mesmo_part_w := true; -- marca que achou um participante igual
								else
									ie_considera_w := 'N';
									ie_achou_mesmo_part_w := false;
								end if;

						end loop;
						close cursor_outro_w;
					else
						ie_considera_w := 'S';
						ie_achou_mesmo_part_w := false;
					end if;

					-- Verifica o grau de participação
					if (dados_validacao_p.ie_grau_participacao = 'S' and ie_considera_w = 'S') then

						-- Para cada paticipante zera a varável de controle
						qt_partic_outro_proc_w := 0;

						dados_sql_outro_partic_w := obter_acesso_outro_grau_part(nr_seq_outro_proc_p, dados_partic_proc_w);

						-- Monta o comando que será usado para verificar se o outro procedimento tem algum grau de participação igual que o procedimento informado
						ds_sql_outro_partic_w :=	' select	count(1) 			' 	|| pls_tipos_ocor_pck.enter_w ||
										' from(						'  	|| pls_tipos_ocor_pck.enter_w ||
										'       select 1 '					|| pls_tipos_ocor_pck.enter_w ||
										'	from	pls_proc_participante partic 	' 	|| pls_tipos_ocor_pck.enter_w ||
										'	where	1 = 1 				' 	|| pls_tipos_ocor_pck.enter_w ||
											dados_sql_outro_partic_w.sql_outro_partic	|| pls_tipos_ocor_pck.enter_w ||
											' union all'				  	|| pls_tipos_ocor_pck.enter_w ||
										'	select	1				' 	|| pls_tipos_ocor_pck.enter_w ||
										'	from	pls_protocolo_conta_imp d,'	  	|| pls_tipos_ocor_pck.enter_w ||
										'		pls_conta_imp c, '		 	|| pls_tipos_ocor_pck.enter_w ||
										'		pls_conta_item_imp b,'			|| pls_tipos_ocor_pck.enter_w ||
										'		pls_conta_item_equipe_imp partic '	|| pls_tipos_ocor_pck.enter_w ||
										'	where	d.nr_sequencia	= '||nr_seq_protocolo_w	|| ' '|| pls_tipos_ocor_pck.enter_w ||
										'	and	c.nr_seq_protocolo	= d.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
										'	and	b.nr_seq_conta		= c.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
										'	and	partic.nr_seq_conta_item = b.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
											dados_sql_outro_partic_w.sql_outro_partic_imp	|| pls_tipos_ocor_pck.enter_w ||
										'	)';


						-- Caso deva realizar a validação
						if (dados_sql_outro_partic_w.ie_validacao = 'S') then


							-- Executa o comando SQL e devolve o cursor
							dados_sql_outro_partic_w.binds_outro_partic := sql_pck.executa_sql_cursor( ds_sql_outro_partic_w, dados_sql_outro_partic_w.binds_outro_partic);


							loop
								fetch 	cursor_outro_w
								into 	qt_partic_outro_proc_w; -- Obtém a quantidade de participantes do outro procedimento
								EXIT WHEN NOT FOUND; /* apply on cursor_outro_w */

								-- Se tiver algum participante com o mesmo grau, deve considerar o procedimento
								if (qt_partic_outro_proc_w > 0) then
									ie_considera_w := 'S';
									exit;

								else

									ie_considera_w := 'N';
								end if;

							end loop; -- Particpantes do outro procedimento
							close cursor_outro_w;
						end if;

					end if;

					if (dados_validacao_p.ie_mesma_especialidade = 'S'  and ie_considera_w = 'S') then
						-- Zera a variável de quantidade
						qt_partic_outro_proc_w := 0;

						-- Busca a restrição para o parâmetro
						dados_sql_outro_partic_w := obter_acesso_outro_proc_partic(nr_seq_outro_proc_p, dados_partic_proc_w, 'S');

						-- Concatena o select quie será executado
						ds_sql_outro_partic_w := 	' select	count(1) 			' 	|| pls_tipos_ocor_pck.enter_w ||
										' from(						'  	|| pls_tipos_ocor_pck.enter_w ||
										'       select 1 '					|| pls_tipos_ocor_pck.enter_w ||
										'	from	pls_proc_participante partic 	' 	|| pls_tipos_ocor_pck.enter_w ||
										'	where	1 = 1 				' 	|| pls_tipos_ocor_pck.enter_w ||
											dados_sql_outro_partic_w.sql_outro_partic	|| pls_tipos_ocor_pck.enter_w ||
											' union all'				  	|| pls_tipos_ocor_pck.enter_w ||
										'	select	1				' 	|| pls_tipos_ocor_pck.enter_w ||
										'	from	pls_protocolo_conta_imp d,'	  	|| pls_tipos_ocor_pck.enter_w ||
										'		pls_conta_imp c, '		 	|| pls_tipos_ocor_pck.enter_w ||
										'		pls_conta_item_imp b,'			|| pls_tipos_ocor_pck.enter_w ||
										'		pls_conta_item_equipe_imp partic '	|| pls_tipos_ocor_pck.enter_w ||
										'	where	d.nr_sequencia	= '||nr_seq_protocolo_w	|| ' '|| pls_tipos_ocor_pck.enter_w ||
										'	and	c.nr_seq_protocolo	= d.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
										'	and	b.nr_seq_conta		= c.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
										'	and	partic.nr_seq_conta_item = b.nr_sequencia '|| pls_tipos_ocor_pck.enter_w ||
											dados_sql_outro_partic_w.sql_outro_partic_imp	|| pls_tipos_ocor_pck.enter_w ||
										'	)';

						-- Caso deva realizar a validação
						if (dados_sql_outro_partic_w.ie_validacao = 'S') then
							-- Executa o comando SQL e devolve o cursor
							dados_sql_outro_partic_w.binds_outro_partic := sql_pck.executa_sql_cursor( ds_sql_outro_partic_w, dados_sql_outro_partic_w.binds_outro_partic);

							loop
								fetch 	cursor_outro_w
								into 	qt_partic_outro_proc_w; -- Obtém a quantidade de participantes do outro procedimento
								EXIT WHEN NOT FOUND; /* apply on cursor_outro_w */

								-- Se tiver algum participante com o mesmo grau, deve considerar o procedimento
								if (qt_partic_outro_proc_w > 0) then
									ie_considera_w := 'S';
									exit;
								else
									ie_considera_w := 'N';
								end if;

							end loop; -- Particpantes do outro procedimento
							close cursor_outro_w;
						end if;
					end if;

					-- se não considera ainda o procedimento,
				end loop;
				close cursor_w; -- Particpantes do procedimento da tabela de seleção
			else
				/* Se o procedimento que está na tabela de seleção não tiver participantes então deve ser verificado se o outro procedimento tem algum participante.
				     Caso ele tenha então não será considerado, se não tiver participante será considerado. */
				--conta os participantes do procedimento
				select	count(1)
				into STRICT	qt_partic_outro_proc_w
				from	pls_proc_participante
				where	nr_seq_conta_proc = nr_seq_outro_proc_p;

				-- Se o outro procedimento tiver participantes e o procedimento da tabela de seleção não tiver, então não deve ser considerado, caso contrário deve
				if (qt_partic_outro_proc_w > 0) then
					ie_considera_w := 'N';
				else
					ie_considera_w := 'S';
				end if;
			end if;
		end if;
	else
		ie_considera_w := 'N';
	end if;
end if;

return	ie_considera_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_oc_cta_val_23_consid_imp ( dados_validacao_p pls_ocor_imp_pck.dados_regra_val_util_item, nr_seq_conta_proc_p pls_conta_proc_imp_v.nr_sequencia%type, nr_seq_outro_proc_p pls_conta_proc_imp_v.nr_sequencia%type) FROM PUBLIC;

