-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION proj_converte_hora_tempo_cron ( ds_hora_p text) RETURNS bigint AS $body$
DECLARE


qt_hora_w	double precision;
ds_hora_w	varchar(255);
qt_hh_w	varchar(255);
qt_mm_w	varchar(255);
qt_ss_w	varchar(255);



BEGIN
ds_hora_w	:= replace(ds_hora_p, 'PT', '');
ds_hora_w	:= replace(ds_hora_w, 'P', '');
ds_hora_w	:= replace(ds_hora_w, 'Y', 'H');
ds_hora_w	:= replace(ds_hora_w, '.', ',');

if (substr(ds_hora_p, length(ds_hora_p)) = 'M') then
	ds_hora_w	:= replace(ds_hora_w, 'M', 'M0S');
end if;


qt_hh_w	:= substr(ds_hora_w, 1, position('H' in ds_hora_w) - 1);
ds_hora_w	:= substr(ds_hora_w, position('H' in ds_hora_w) + 1, length(ds_hora_w));

qt_mm_w	:= substr(ds_hora_w, 1, position('M' in ds_hora_w) - 1);
ds_hora_w	:= substr(ds_hora_w, position('M' in ds_hora_w) + 1, length(ds_hora_w));

qt_ss_w	:= substr(ds_hora_w, 1, position('S' in ds_hora_w) - 1);
ds_hora_w	:= substr(ds_hora_w, position('S' in ds_hora_w) + 1, length(ds_hora_w));
		

qt_hora_w	:=
		((qt_hh_w)::numeric  +
		dividir((qt_mm_w)::numeric , 60) +
		dividir((qt_ss_w)::numeric , 1440));

return qt_hora_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION proj_converte_hora_tempo_cron ( ds_hora_p text) FROM PUBLIC;

