-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_dt_ref_cheque_cr (nr_seq_cheque_p bigint, nm_dt_referencia_p text) RETURNS timestamp AS $body$
DECLARE


dt_contabil_w		timestamp;
dt_deposito_w		timestamp;
dt_devolucao_w		timestamp;
dt_devolucao_banco_w	timestamp;
dt_reapresentacao_w	timestamp;
dt_registro_w		timestamp;
dt_saque_w		timestamp;
dt_seg_devolucao_w	timestamp;
dt_seg_reapresentacao_w	timestamp;
dt_terc_devolucao_w	timestamp;
dt_vencimento_w		timestamp;
dt_vencimento_atual_w	timestamp;
dt_venda_terc_w		timestamp;

dt_retorno_w	timestamp;


BEGIN

begin
select	dt_contabil,
	dt_deposito,
	dt_devolucao,
	dt_devolucao_banco,
	dt_reapresentacao,
	dt_registro,
	dt_saque,
	dt_seg_devolucao,
	dt_seg_reapresentacao,
	dt_terc_devolucao,
	dt_vencimento,
	dt_vencimento_atual,
	dt_venda_terc
into STRICT	dt_contabil_w,
	dt_deposito_w,
	dt_devolucao_w,
	dt_devolucao_banco_w,
	dt_reapresentacao_w,
	dt_registro_w,
	dt_saque_w,
	dt_seg_devolucao_w,
	dt_seg_reapresentacao_w,
	dt_terc_devolucao_w,
	dt_vencimento_w,
	dt_vencimento_atual_w,
	dt_venda_terc_w
from	cheque_cr
where	nr_seq_cheque	= nr_seq_cheque_p;
exception
	when others then
	dt_retorno_w	:= null;
end;

if (nm_dt_referencia_p = 'DT_CONTABIL') then
	dt_retorno_w	:= dt_contabil_w;
elsif (nm_dt_referencia_p = 'DT_DEPOSITO') then
	dt_retorno_w	:= dt_deposito_w;
elsif (nm_dt_referencia_p = 'DT_DEVOLUCAO') then
	dt_retorno_w	:= dt_devolucao_w;
elsif (nm_dt_referencia_p = 'DT_DEVOLUCAO_BANCO') then
	dt_retorno_w	:= dt_devolucao_banco_w;
elsif (nm_dt_referencia_p = 'DT_REAPRESENTACAO') then
	dt_retorno_w	:= dt_reapresentacao_w;
elsif (nm_dt_referencia_p = 'DT_TERC_DEVOLUCAO') then
	dt_retorno_w	:= dt_terc_devolucao_w;
elsif (nm_dt_referencia_p = 'DT_REGISTRO') then
	dt_retorno_w	:= dt_registro_w;
elsif (nm_dt_referencia_p = 'DT_SAQUE') then
	dt_retorno_w	:= dt_saque_w;
elsif (nm_dt_referencia_p = 'DT_SEG_DEVOLUCAO') then
	dt_retorno_w	:= dt_seg_devolucao_w;
elsif (nm_dt_referencia_p = 'DT_SEG_REAPRESENTACAO') then
	dt_retorno_w	:= dt_seg_reapresentacao_w;
elsif (nm_dt_referencia_p = 'DT_VENCIMENTO') then
	dt_retorno_w	:= dt_vencimento_w;
elsif (nm_dt_referencia_p = 'DT_VENCIMENTO_ATUAL') then
	dt_retorno_w	:= dt_vencimento_atual_w;
elsif (nm_dt_referencia_p = 'DT_VENDA_TERC') then
	dt_retorno_w	:= dt_venda_terc_w;
end if;

return	dt_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_dt_ref_cheque_cr (nr_seq_cheque_p bigint, nm_dt_referencia_p text) FROM PUBLIC;

