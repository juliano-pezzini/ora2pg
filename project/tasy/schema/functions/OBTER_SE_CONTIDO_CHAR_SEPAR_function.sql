-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_se_contido_char_separ (qt_valor_p text, ds_possib_p text, ds_separador_p text) RETURNS varchar AS $body$
DECLARE


ds_comando_w			varchar(2000);
ds_result_w			varchar(0001);
ds_possib_w			varchar(4000);
qt_controle_w			bigint;
qt_pos_separador_w		bigint;
ds_possib_aux_w			varchar(2000);
ds_separador_w			varchar(2);


BEGIN

ds_possib_w 	:= ds_possib_p;
ds_separador_w	:= substr(ds_separador_p,1,2);

if (position('(' in ds_possib_w) > 0 ) and (position(')' in ds_possib_w) > 0 ) then
	ds_possib_w		:= substr(ds_possib_p,(position('(' in ds_possib_p)+1),(position(')' in ds_possib_p)-2));
end if;
qt_controle_w 		:= 0;
ds_result_w		:= 'N';

qt_pos_separador_w 	:= position(ds_separador_w in ds_possib_w);

if ( qt_pos_separador_w = 0 ) and ( trim(both ds_possib_w) = qt_valor_p ) then
	ds_result_w	:= 'S';
else
	while( qt_pos_separador_w > 0 )  and ( qt_controle_w < 999 ) loop
		if (substr(ds_possib_w,1,qt_pos_separador_w-1) = qt_valor_p ) then
			ds_result_w	:= 'S';
			qt_controle_w	:= 999;
		else
			ds_possib_w		:= substr(ds_possib_w,qt_pos_separador_w+1,length(ds_possib_w));
			qt_pos_separador_w 	:= position(ds_separador_w in ds_possib_w);
			qt_controle_w		:= qt_controle_w + 1;
		end if;
	end loop;

	if (ds_result_w	= 'N')  and (ds_possib_w = qt_valor_p ) then
		ds_result_w	:= 'S';
	end if;

end if;

return ds_result_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_se_contido_char_separ (qt_valor_p text, ds_possib_p text, ds_separador_p text) FROM PUBLIC;

