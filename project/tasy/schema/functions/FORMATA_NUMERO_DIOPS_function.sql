-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION formata_numero_diops ( vl_campo_p text) RETURNS varchar AS $body$
DECLARE


vl_retorno_w			varchar(50);
vl_campo_w			double precision;


BEGIN

vl_campo_w	:= (abs(vl_campo_p))::numeric;

select	CASE WHEN greatest(trunc(vl_campo_w,2), trunc(vl_campo_w,1))=trunc(vl_campo_w,1) THEN  to_char(vl_campo_w,'999999999990.0')  ELSE to_char(vl_campo_w,'999999999990.00') END
into STRICT 	vl_retorno_w
;

vl_retorno_w	:= replace(vl_retorno_w,' ','');

if (coalesce(vl_campo_p,0)	< 0) then
	vl_retorno_w	:= '-'||vl_retorno_w;
end if;

return vl_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION formata_numero_diops ( vl_campo_p text) FROM PUBLIC;

