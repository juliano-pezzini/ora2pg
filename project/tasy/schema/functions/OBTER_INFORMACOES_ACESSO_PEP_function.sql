-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_informacoes_acesso_pep ( nr_seq_lib_acesso_p bigint, ie_lib_acesso_p text) RETURNS varchar AS $body$
DECLARE

 
 
ds_retorno_w		varchar(2000) := '';


BEGIN 
 
 
 
if (coalesce(nr_seq_lib_acesso_p,0) > 0) then 
	 
	if (ie_lib_acesso_p = 'A') then 
	 
		SELECT obter_desc_expressao(761956) || ' ' || SUBSTR(trim(both obter_nome_pessoa_fisica(CD_AUTORIZADOR,NULL)),1,100) 
		|| obter_desc_expressao(292551) || ' ' || SUBSTR(trim(both obter_nome_pessoa_fisica(CD_PESSOA_FISICA,NULL)),1,100) 
		|| obter_desc_expressao(291978) || ' ' || DT_INICIO || obter_desc_expressao(290101) || ' ' || DT_FIM 
		|| obter_desc_expressao(326355) || ' ' || SUBSTR(DS_MOTIVO,1,255) 
		into STRICT	ds_retorno_w 
		FROM	PEP_AUTOR_ACESSO_ATEND 
		WHERE	nr_Sequencia = nr_seq_lib_acesso_p;
	 
	 
	elsif (ie_lib_acesso_p = 'P') then 
	 
		SELECT obter_desc_expressao(761956) || ' ' || SUBSTR(trim(both obter_nome_pessoa_fisica(CD_AUTORIZADOR,NULL)),1,100) 
			|| obter_desc_expressao(292551) || ' ' || SUBSTR(trim(both obter_nome_pessoa_fisica(CD_PESSOA_FISICA,NULL)),1,100) 
			|| obter_desc_expressao(291978) || ' ' || DT_INICIO || obter_desc_expressao(290101) || ' ' || DT_FIM 
			|| obter_desc_expressao(326355) || ' ' || SUBSTR(DS_MOTIVO,1,255) 
		into STRICT 	ds_retorno_w 
		FROM	PEP_AUTOR_ACESSO 
		WHERE	NR_SEQUENCIA = nr_seq_lib_acesso_p;
		 
	END IF;
	 
end if;
 
return	ds_retorno_w;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_informacoes_acesso_pep ( nr_seq_lib_acesso_p bigint, ie_lib_acesso_p text) FROM PUBLIC;

