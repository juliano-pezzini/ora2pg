-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION ageint_obter_dados_ura (nm_usuario_p text, nm_parametro_p text, ie_status_p text DEFAULT 'E', cd_protocolo_p text DEFAULT 0) RETURNS varchar AS $body$
DECLARE


 vl_param_retorno_w varchar(4000);
 ds_comando_w		varchar(400);
 ds_param_w		    varchar(400);


BEGIN
	    
	ds_comando_w :=	'select	max(' || nm_parametro_p || ') ' ||
				'from		ageint_dados_ura ' ||
				'where		nm_usuario = :nm_usuario '  ||
				'and        (ie_status = :ie_status '   ||
				'or          nvl(cd_protocolo, 1) = :cd_protocolo)';
	ds_param_w :=    'nm_usuario='   || nm_usuario_p || ';'
                   || 'ie_status='    || ie_status_p || ';' 
                   || 'cd_protocolo=' || cd_protocolo_p;

	select	obter_select_concatenado_bv(ds_comando_w, ds_param_w, ',')
	into STRICT	vl_param_retorno_w
	;

RETURN vl_param_retorno_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION ageint_obter_dados_ura (nm_usuario_p text, nm_parametro_p text, ie_status_p text DEFAULT 'E', cd_protocolo_p text DEFAULT 0) FROM PUBLIC;

