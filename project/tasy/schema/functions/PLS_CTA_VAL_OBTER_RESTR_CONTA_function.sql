-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION pls_cta_val_obter_restr_conta ( ie_opcao_p text, cursor_p integer, dados_filtro_conta_p pls_tipos_cta_val_pck.dados_filtro_conta) RETURNS varchar AS $body$
DECLARE


/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:  Montar as restrições e binds dos campos de filtro de conta das ocorrências
combinadas
-------------------------------------------------------------------------------------------------------------------
Locais de chamada direta:
[ X]  Objetos do dicionário [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatórios [ ] Outros:
-------------------------------------------------------------------------------------------------------------------
Pontos de atenção:

IE_OPCAO_P:
RESTRICAO -Obter restrições
BIND - Atualizar Binds

-------------------------------------------------------------------------------------------------------------------
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
ds_restricao_w		varchar(4000);


BEGIN

-- Inicializar as variáveis.
ds_restricao_w := null;

if (dados_filtro_conta_p.nr_sequencia IS NOT NULL AND dados_filtro_conta_p.nr_sequencia::text <> '') then

	/* Origem conta */

	if (dados_filtro_conta_p.ie_origem_conta IS NOT NULL AND dados_filtro_conta_p.ie_origem_conta::text <> '') then
		if (ie_opcao_p = 'RESTRICAO') then
			ds_restricao_w	:= ds_restricao_w || pls_util_pck.enter_w || 'and	proc.ie_origem_conta = :ie_origem_conta';
		else
			dbms_sql.bind_variable(cursor_p, ':ie_origem_conta', dados_filtro_conta_p.ie_origem_conta);
		end if;
	end if;

end if;

return	ds_restricao_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_cta_val_obter_restr_conta ( ie_opcao_p text, cursor_p integer, dados_filtro_conta_p pls_tipos_cta_val_pck.dados_filtro_conta) FROM PUBLIC;

