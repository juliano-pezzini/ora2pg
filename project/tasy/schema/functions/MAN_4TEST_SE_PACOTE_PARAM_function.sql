-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION man_4test_se_pacote_param ( nr_seq_caso_teste_p bigint, cd_funcao_p bigint, nr_seq_parametro_p bigint ) RETURNS varchar AS $body$
DECLARE


ds_retorno_w			varchar(1) := 'N';
qt_param_w			bigint;

c_pacotes CURSOR FOR
SELECT	a.nr_seq_pacote_teste
from	caso_teste_acao a
where	a.ie_acao = '5'
and	a.nr_seq_caso_teste = nr_seq_caso_teste_p;

BEGIN

	for r_c_pacotes in c_pacotes loop

		select	count(*)
		into STRICT	qt_param_w
		from	caso_teste_parametro
		where	nr_seq_caso_teste = r_c_pacotes.nr_seq_pacote_teste
		and	cd_funcao = cd_funcao_p
		and	nr_seq_parametro = nr_seq_parametro_p;

		if (qt_param_w <> 0) then
			ds_retorno_w := 'S';
		else
			ds_retorno_w := man_4test_se_pacote_param(r_c_pacotes.nr_seq_pacote_teste, cd_funcao_p, nr_seq_parametro_p);
		end if;

	end loop;

return ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION man_4test_se_pacote_param ( nr_seq_caso_teste_p bigint, cd_funcao_p bigint, nr_seq_parametro_p bigint ) FROM PUBLIC;

