-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_tipo_glosa_ajuste_mat (cd_estabelecimento_p bigint, cd_convenio_p bigint, cd_categoria_p text, cd_material_p bigint, dt_vigencia_p timestamp, ie_tipo_atendimento_p bigint) RETURNS varchar AS $body$
DECLARE

				
ie_glosa_w		varchar(10);
vl_retorno_w		double precision;
vl_retorno_ww		varchar(05);
ie_autor_particular_w	varchar(1);
cd_convenio_glosa_ww	integer;
cd_categoria_glosa_ww	varchar(10);
nr_seq_ajuste_proc_ww	bigint;


BEGIN

SELECT * FROM obter_regra_ajuste_mat(	cd_estabelecimento_p,  	--cd_estabelecimento_p	
			cd_convenio_p,         	--cd_convenio_p
			cd_categoria_p,        	--cd_categoria_p
			cd_material_p,         	--cd_material_p
			dt_vigencia_p,         	--dt_vigencia_p
			0,                     	--cd_tipo_acomodacao_p
			ie_tipo_atendimento_p, 	--ie_tipo_atendimento_p
			0,                     	--cd_setor_atendimento_p
			0,                     	--qt_idade_p
			0,                     	--nr_sequencia_p
			null,                  	--cd_plano_p
			0,                     	--cd_proc_referencia_p
			0,                     	--ie_origem_proced_p
			null,                  	--nr_seq_proc_interno_p
			null,                  	--dt_entrada_p
			vl_retorno_w,          	--OUT tx_ajuste_p
			vl_retorno_w,          	--OUT vl_negociado_p
			vl_retorno_ww,         	--OUT ie_preco_informado_p
			ie_glosa_w,            	--OUT ie_glosa_p
			vl_retorno_w,          	--OUT tx_brasindice_pfb_p
			vl_retorno_w,          	--OUT tx_brasindice_pmc_p
			vl_retorno_w,          	--OUT tx_pmc_neg_p
			vl_retorno_w,          	--OUT tx_pmc_pos_p
			vl_retorno_w,          	--OUT tx_afaturar_p
			vl_retorno_w,          	--OUT tx_simpro_pfb_p
			vl_retorno_w,          	--OUT tx_simpro_pmc_p
			vl_retorno_ww,         	--OUT ie_origem_preco_p
			vl_retorno_ww,         	--OUT ie_precedencia_p
			vl_retorno_w, 	      	--OUT pr_glosa_p
			vl_retorno_w, 	      	--OUT vl_glosa_p
			vl_retorno_w,          	--OUT cd_tabela_preco_p
			vl_retorno_w,          	--OUT cd_motivo_exc_conta_p
			vl_retorno_w,          	--OUT nr_seq_regra_p
			ie_autor_particular_w, 	--OUT ie_autor_particular_p
			cd_convenio_glosa_ww,  	--OUT cd_convenio_glosa_p
			cd_categoria_glosa_ww, 	--OUT cd_categoria_glosa_p
			null,                  	--ie_atend_retorno_p
			vl_retorno_w,          	--OUT tx_pfb_neg_p
			vl_retorno_w,          	--OUT tx_pfb_pos_p
			vl_retorno_ww,         	--OUT ie_ignora_preco_venda_p
			vl_retorno_w,          	--OUT tx_simpro_pos_pfb_p
			vl_retorno_w,          	--OUT tx_simpro_neg_pfb_p
			vl_retorno_w,          	--OUT tx_simpro_pos_pmc_p
			vl_retorno_w,          	--OUT tx_simpro_neg_pmc_p
			null,                  	--nr_seq_origem_p
			null, 			--nr_seq_cobertura_p
			0,                     	--qt_dias_internacao_p
			null,                  	--nr_seq_regra_lanc_p
			null,                  	--nr_seq_lib_dieta_conv_p
			null,                  	--ie_clinica_p
			null,                  	--cd_usuario_convenio_p
			null) INTO STRICT 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_ww, 
			ie_glosa_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_ww, 
			vl_retorno_ww, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			ie_autor_particular_w, 
			cd_convenio_glosa_ww, 
			cd_categoria_glosa_ww, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_ww, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w, 
			vl_retorno_w;                	--nr_seq_classif_atend_p
return	upper(ie_glosa_w);

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_tipo_glosa_ajuste_mat (cd_estabelecimento_p bigint, cd_convenio_p bigint, cd_categoria_p text, cd_material_p bigint, dt_vigencia_p timestamp, ie_tipo_atendimento_p bigint) FROM PUBLIC;

