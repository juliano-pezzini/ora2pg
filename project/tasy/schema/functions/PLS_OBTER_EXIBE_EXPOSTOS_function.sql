-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION pls_obter_exibe_expostos (cd_classificacao_p sip_item_assistencial.cd_classificacao%type) RETURNS varchar AS $body$
DECLARE



--Essa listagem de itens assistenciais que tem a quantidade de expostos exibida, é baseada na RN 205. As alterações da RN devem ser refletidas nessa listagem.
ie_exibe_w		varchar(1) := 'N';
itens_exibe_expostos_w	varchar(256) :='A,A1,A2,B,C,C10.1,C3,D,E,EX2.4,EX4.1,EY1,EY2,EY3,I1,I2,I3,I3.3,I4,I5,I6,I7,I8,I9,I10';
ds_cod_item_w		varchar(10);

--Cursor utilizado para separar a lista de valores em sequencias de contas
C01 CURSOR(	ds_lista_p	text,
		ds_separador_p	text) FOR
	SELECT	ds_valor_vchr2
	from	table(pls_util_pck.converter_lista_valores(ds_lista_p, ds_separador_p));

BEGIN

	for r_C01_w in C01(itens_exibe_expostos_w, ',') loop
		ds_cod_item_w := r_C01_w.ds_valor_vchr2;
		if (ds_cod_item_w = cd_classificacao_p) then

			ie_exibe_w := 'S';
		end if;
	end loop;

return ie_exibe_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_obter_exibe_expostos (cd_classificacao_p sip_item_assistencial.cd_classificacao%type) FROM PUBLIC;

