-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_especialidade_proc_int ( nr_seq_proc_interno_p proc_interno.nr_sequencia%TYPE ) RETURNS bigint AS $body$
DECLARE


cd_especialidade_w  especialidade_proc.cd_especialidade%TYPE;
cd_procedimento_w   procedimento.cd_procedimento%TYPE;
ie_origem_proced_w  procedimento.ie_origem_proced%TYPE;


BEGIN
IF (nr_seq_proc_interno_p IS NOT NULL AND nr_seq_proc_interno_p::text <> '') THEN
SELECT  cd_procedimento,
        ie_origem_proced
INTO STRICT    cd_procedimento_w,
		ie_origem_proced_w
FROM    proc_interno
WHERE   nr_sequencia = nr_seq_proc_interno_p;

END IF;

IF (cd_procedimento_w IS NOT NULL AND cd_procedimento_w::text <> '' AND ie_origem_proced_w IS NOT NULL AND ie_origem_proced_w::text <> '') THEN
	cd_especialidade_w := obter_especialidade_proced(cd_procedimento_w, ie_origem_proced_w);
END IF;

RETURN cd_especialidade_w;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_especialidade_proc_int ( nr_seq_proc_interno_p proc_interno.nr_sequencia%TYPE ) FROM PUBLIC;

