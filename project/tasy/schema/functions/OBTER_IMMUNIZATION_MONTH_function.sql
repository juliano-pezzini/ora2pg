-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_immunization_month (nr_seq_vacina_p bigint , ie_dose_p text) RETURNS bigint AS $body$
DECLARE


ie_retorno_w		bigint;
ie_qt_idade_minima_mes bigint;
ie_qt_idade_minima_ano bigint;


BEGIN

select coalesce(qt_idade_minima_mes,0),coalesce(qt_idade_minima_ano,0)
into STRICT ie_qt_idade_minima_mes,ie_qt_idade_minima_ano
from Vacina_Calendario where nr_seq_vacina = nr_seq_vacina_p and ie_dose = ie_dose_p   LIMIT 1;

ie_retorno_w := ie_qt_idade_minima_mes + ie_qt_idade_minima_ano * 12;

return	ie_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_immunization_month (nr_seq_vacina_p bigint , ie_dose_p text) FROM PUBLIC;

