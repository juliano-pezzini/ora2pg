-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_score_esc_nabstinence_md ( ie_tonus_muscular_new_p text, ie_tonus_muscular_old_p text, ie_espasmos_mioclonicos_new_p text, ie_espasmos_mioclonicos_old_p text, ie_convulsoes_new_p text, ie_convulsoes_old_p text, ie_escoriacoes_new_p text, ie_escoriacoes_old_p text, ie_suor_new_p text, ie_suor_old_p text, ie_bocejo_frequente_new_p text, ie_bocejo_frequente_old_p text, ie_manchas_new_p text, ie_manchas_old_p text, ie_entupim_nasal_new_p text, ie_entupim_nasal_old_p text, ie_espirros_new_p text, ie_espirros_old_p text, ie_dilatacao_narinas_new_p text, ie_dilatacao_narinas_old_p text, ie_succao_excessiva_new_p text, ie_succao_excessiva_old_p text, ie_ma_alimentacao_new_p text, ie_ma_alimentacao_old_p text, ie_regurgitacao_new_p text, ie_regurgitacao_old_p text, ie_choro_p bigint, ie_sono_p bigint, ie_reflexo_moro_p bigint, ie_tremores_p bigint, ie_febre_p bigint, ie_freq_respiratoria_p bigint, ie_fezes_p bigint ) RETURNS bigint AS $body$
DECLARE

    ie_tonus_muscular_w       bigint := 0;
    ie_espasmos_mioclonicos_w bigint := 0;
    ie_convulsoes_w           bigint := 0;
    ie_escoriacoes_w          bigint := 0;
    ie_suor_w                 bigint := 0;
    ie_bocejo_frequente_w     bigint := 0;
    ie_manchas_w              bigint := 0;
    ie_entupim_nasal_w        bigint := 0;
    ie_espirros_w             bigint := 0;
    ie_dilatacao_narinas_w    bigint := 0;
    ie_succao_excessiva_w     bigint := 0;
    ie_ma_alimentacao_w       bigint := 0;
    ie_regurgitacao_w         bigint := 0;
    qt_score_w                bigint := 0;


BEGIN

    if coalesce(ie_tonus_muscular_new_p, ie_tonus_muscular_old_p) = 'S' then
        ie_tonus_muscular_w := 2;
        qt_score_w := ie_tonus_muscular_w;
    end if;

    if coalesce(ie_espasmos_mioclonicos_new_p, ie_espasmos_mioclonicos_old_p) = 'S' then 
        ie_espasmos_mioclonicos_w := 3;
        qt_score_w := qt_score_w + ie_espasmos_mioclonicos_w;
    end if;

    if coalesce(ie_convulsoes_new_p, ie_convulsoes_old_p) = 'S' then 
        ie_convulsoes_w := 5;
        qt_score_w := qt_score_w + ie_convulsoes_w;
    end if;

    if coalesce(ie_escoriacoes_new_p, ie_escoriacoes_old_p) = 'S' then 
        ie_escoriacoes_w := 1;
        qt_score_w := qt_score_w + ie_escoriacoes_w;
    end if;

    if coalesce(ie_suor_new_p, ie_suor_old_p) = 'S' then 
        ie_suor_w := 1;
        qt_score_w := qt_score_w + ie_suor_w;
    end if;

    if coalesce(ie_bocejo_frequente_new_p, ie_bocejo_frequente_old_p) = 'S' then 
        ie_bocejo_frequente_w := 1;
        qt_score_w := qt_score_w + ie_bocejo_frequente_w;
    end if;

    if coalesce(ie_manchas_new_p, ie_manchas_old_p) = 'S' then 
        ie_manchas_w := 1;
        qt_score_w := qt_score_w + ie_manchas_w;
    end if;

    if coalesce(ie_entupim_nasal_new_p, ie_entupim_nasal_old_p) = 'S' then 
        ie_entupim_nasal_w := 1;
        qt_score_w := qt_score_w + ie_entupim_nasal_w;
    end if;

    if coalesce(ie_espirros_new_p, ie_espirros_old_p) = 'S' then 
        ie_espirros_w := 1;
        qt_score_w := qt_score_w + ie_espirros_w;
    end if;

    if coalesce(ie_dilatacao_narinas_new_p, ie_dilatacao_narinas_old_p) = 'S' then 
        ie_dilatacao_narinas_w := 2;
        qt_score_w := qt_score_w + ie_dilatacao_narinas_w;
    end if;

    if coalesce(ie_succao_excessiva_new_p, ie_succao_excessiva_old_p) = 'S' then 
        ie_succao_excessiva_w := 1;
        qt_score_w := qt_score_w + ie_succao_excessiva_w;
    end if;

    if coalesce(ie_ma_alimentacao_new_p, ie_ma_alimentacao_old_p) = 'S' then 
        ie_ma_alimentacao_w := 2;
        qt_score_w := qt_score_w + ie_ma_alimentacao_w;
    end if;

    if coalesce(ie_regurgitacao_new_p, ie_regurgitacao_old_p) = 'S' then 
        ie_regurgitacao_w := 2;
        qt_score_w := qt_score_w + ie_regurgitacao_w;
    end if;

    if coalesce(ie_regurgitacao_new_p, ie_regurgitacao_old_p) = 'S' then 
        ie_regurgitacao_w := 3;
        qt_score_w := qt_score_w + ie_regurgitacao_w;
    end if;

    return qt_score_w +
	       coalesce(ie_choro_p, 0) +
		   coalesce(ie_sono_p, 0) +
		   coalesce(ie_reflexo_moro_p, 0) +
		   coalesce(ie_tremores_p, 0) +
		   coalesce(ie_febre_p, 0) +
		   coalesce(ie_freq_respiratoria_p, 0) +
		   coalesce(ie_fezes_p, 0);

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_score_esc_nabstinence_md ( ie_tonus_muscular_new_p text, ie_tonus_muscular_old_p text, ie_espasmos_mioclonicos_new_p text, ie_espasmos_mioclonicos_old_p text, ie_convulsoes_new_p text, ie_convulsoes_old_p text, ie_escoriacoes_new_p text, ie_escoriacoes_old_p text, ie_suor_new_p text, ie_suor_old_p text, ie_bocejo_frequente_new_p text, ie_bocejo_frequente_old_p text, ie_manchas_new_p text, ie_manchas_old_p text, ie_entupim_nasal_new_p text, ie_entupim_nasal_old_p text, ie_espirros_new_p text, ie_espirros_old_p text, ie_dilatacao_narinas_new_p text, ie_dilatacao_narinas_old_p text, ie_succao_excessiva_new_p text, ie_succao_excessiva_old_p text, ie_ma_alimentacao_new_p text, ie_ma_alimentacao_old_p text, ie_regurgitacao_new_p text, ie_regurgitacao_old_p text, ie_choro_p bigint, ie_sono_p bigint, ie_reflexo_moro_p bigint, ie_tremores_p bigint, ie_febre_p bigint, ie_freq_respiratoria_p bigint, ie_fezes_p bigint ) FROM PUBLIC;

