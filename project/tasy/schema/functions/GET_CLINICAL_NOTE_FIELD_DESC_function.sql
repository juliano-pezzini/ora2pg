-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_clinical_note_field_desc (ie_field_p text, ie_record_type_p text, ie_record_sub_type_p text default null, ie_stage_p bigint default 1) RETURNS varchar AS $body$
DECLARE

				
ds_field_desc_w varchar(255);



BEGIN

if ( (ie_record_type_p IS NOT NULL AND ie_record_type_p::text <> '') and  (ie_field_p IS NOT NULL AND ie_field_p::text <> '') and  coalesce(ie_record_sub_type_p::text, '') = '' and coalesce(ie_stage_p,0) = 1) then

    select max(z.DS_EXPRESSAO )
    into STRICT ds_field_desc_w 
    from (
    SELECT   DS_EXPRESSAO  from valor_dominio_v where cd_dominio = 9840 and ie_record_type_p = 'DIAGNOSIS' and vl_dominio = ie_field_p
    
union

    SELECT  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9841 and ie_record_type_p = 'PROBLEM' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9860 and ie_record_type_p = 'INPATIENT' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9861 and ie_record_type_p = 'DEPT_TRANSFER' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9862 and ie_record_type_p = 'WARD_TRANSFER' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9863 and ie_record_type_p = 'BED_TRANSFER' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9864 and ie_record_type_p = 'TEMP_LEAVE' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9865 and ie_record_type_p = 'DISCHARGE' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10118 and ie_record_type_p = 'CLNICAL_PATHWAY' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10124 and ie_record_type_p = 'DPC' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10127 and ie_record_type_p = 'CONSENT' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10128 and ie_record_type_p = 'PD_MED_TP' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10129 and ie_record_type_p = 'IP_MED_TP' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10130 and ie_record_type_p = 'CARE_PLAN' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10131 and ie_record_type_p = 'MED_CERT' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10137 and ie_record_type_p = 'DSCHRG_INSTR' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10139 and ((ie_record_type_p = 'CONS_SCHD' ) or (ie_record_type_p = 'SRVC_SCHD') or (ie_record_type_p = 'EXAM_SCHD')) and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10140 and ie_record_type_p = 'BED_RQST' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10141 and ie_record_type_p = 'TPM_ANALYSIS' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10142 and ie_record_type_p = 'INTERNAL_REF' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10143 and ie_record_type_p = 'INTERVENTION' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10144 and ie_record_type_p = 'BEDSORE_INF' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10145 and ie_record_type_p = 'NUT_GUIDANCE' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10146 and ie_record_type_p = 'PAT_ARRIVAL' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10148 and ie_record_type_p = 'EMERG_SERV_CONS' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10117 and ie_record_type_p = 'SURGERY' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10149 and ie_record_type_p = 'MED_GUIDANCE' and vl_dominio = ie_field_p
	
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10267 and ie_record_type_p = 'GNRL_INSTRCT' and vl_dominio = ie_field_p
	
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10250 and ie_record_type_p = 'MED_DSCHG_REQ' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10268 and ie_record_type_p = 'DIALYSIS_SCHD' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10278 and ie_record_type_p = 'SURG_ACHIEVE' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10274 and ie_record_type_p = 'PHYSIOLOGY' and vl_dominio = ie_field_p
	
union

	select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10638 and ie_record_type_p = 'TRANS_CHECK' and vl_dominio = ie_field_p
	
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10501 and ie_record_type_p = 'NURSE_CARE_NEED' and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10276 and ie_record_type_p = 'RADIOLOGY' and vl_dominio = ie_field_p) Z;

 elsif ((ie_record_type_p IS NOT NULL AND ie_record_type_p::text <> '') and  (ie_field_p IS NOT NULL AND ie_field_p::text <> '') and  (ie_record_sub_type_p IS NOT NULL AND ie_record_sub_type_p::text <> '') and coalesce(ie_stage_p,0) > 0)  then
    
    select max(z.DS_EXPRESSAO ) into STRICT ds_field_desc_w from (
    
    SELECT  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9851 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 0  and vl_dominio = ie_field_p -- nutrition
    
union

    SELECT  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9852 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 1 and vl_dominio = ie_field_p  -- Infusions and medicines
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9853 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 2 and vl_dominio = ie_field_p -- Exams and procedures
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9854 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 4 and vl_dominio = ie_field_p -- Intervention and recommnedation
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9855 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 6 and vl_dominio = ie_field_p -- Dialysis
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9856 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 8 and vl_dominio = ie_field_p -- Materials
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9857 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 9 and vl_dominio = ie_field_p -- Atanomy pathology exams
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9858 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 7 and vl_dominio = ie_field_p -- Nursing interventions
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9859 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 3 and vl_dominio = ie_field_p -- gas therapy
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 9866 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 5 and vl_dominio = ie_field_p -- Blood and blood componenets
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10280 and ie_record_type_p = 'EXT_REFERRAL'  and ie_record_sub_type_p = 1 and vl_dominio = ie_field_p -- Referral to another hospital
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10282 and ie_record_type_p = 'EXT_REFERRAL'  and ie_record_sub_type_p = 2 and vl_dominio = ie_field_p -- Referral from another hospital
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10279 and ie_record_type_p = 'EXT_REFERRAL'  and ie_record_sub_type_p = 3 and vl_dominio = ie_field_p -- Report to another hospital
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10281 and ie_record_type_p = 'EXT_REFERRAL'  and ie_record_sub_type_p = 4 and vl_dominio = ie_field_p -- Report from another hospital
	
union

	select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10430 and ie_record_type_p = 'REHAB'  and ie_record_sub_type_p = 1 and vl_dominio = ie_field_p -- Patient registration
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10431 and ie_record_type_p = 'REHAB'  and ie_record_sub_type_p = 2 and vl_dominio = ie_field_p -- Rehab execution
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10429 and ie_record_type_p = 'REHAB'  and ie_record_sub_type_p = 3 and vl_dominio = ie_field_p -- Rehab assessment
	
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10468 and ie_record_type_p = 'NUT_GUIDANCE'  and ie_record_sub_type_p = 1 and vl_dominio = ie_field_p -- Nutritional guidance - Accept
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10145 and ie_record_type_p = 'NUT_GUIDANCE'  and ie_record_sub_type_p = 2 and vl_dominio = ie_field_p -- Nutritional guidance - Execute
	
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10542 and ie_record_type_p = 'NUT_GUIDANCE'  and ie_record_sub_type_p = 3 and vl_dominio = ie_field_p -- Nutritional guidance - Report
	
union

	select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10290 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 0 and ie_stage_p = 2 and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10216 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 1 and ie_stage_p = 2 and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10243 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 2 and ie_stage_p = 2 and vl_dominio = ie_field_p 
    
union

	select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10163 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 3 and ie_stage_p = 2 and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10243 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 4 and ie_stage_p = 2 and vl_dominio = ie_field_p
    
union

	select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10216 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 5 and ie_stage_p = 2 and vl_dominio = ie_field_p
    
union

	select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10243 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 6 and ie_stage_p = 2 and vl_dominio = ie_field_p
    
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10243 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 8 and ie_stage_p = 2 and vl_dominio = ie_field_p
	
union

    select  DS_EXPRESSAO   from valor_dominio_v where cd_dominio = 10243 and ie_record_type_p = 'CPOE_ITEMS'  and ie_record_sub_type_p = 9 and ie_stage_p = 2 and vl_dominio = ie_field_p) Z;
end if;

return	ds_field_desc_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_clinical_note_field_desc (ie_field_p text, ie_record_type_p text, ie_record_sub_type_p text default null, ie_stage_p bigint default 1) FROM PUBLIC;

