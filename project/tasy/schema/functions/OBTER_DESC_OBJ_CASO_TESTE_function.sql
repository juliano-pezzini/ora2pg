-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_desc_obj_caso_teste ( nr_seq_acao_p bigint, nr_seq_objeto_p bigint) RETURNS varchar AS $body$
DECLARE


ds_retorno_w	varchar(500);

ie_acao_w		caso_teste_acao.ie_acao%type;


BEGIN

select	coalesce(max(ie_acao),0)
into STRICT	ie_acao_w
from	caso_teste_acao
where	nr_sequencia = nr_seq_acao_p;

if ((ie_acao_w IS NOT NULL AND ie_acao_w::text <> '') and ie_acao_w > 0)	then

	case ie_acao_w
	when '6' then		--Pastas
		select	substr(OBTER_DESC_EXPRESSAO(cd_exp_texto),1,500)
		into STRICT 	ds_retorno_w
		from	dic_objeto
		where	nr_sequencia = nr_seq_objeto_p;

	else
		select	substr(nm_objeto,1,500)
		into STRICT 	ds_retorno_w
		from	dic_objeto a
		where 	nr_sequencia = nr_seq_objeto_p;

	end case;

end if;


return	ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_desc_obj_caso_teste ( nr_seq_acao_p bigint, nr_seq_objeto_p bigint) FROM PUBLIC;

