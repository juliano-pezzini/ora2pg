-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_local_atend_trasf ( nr_ordem_compra_p bigint, nr_item_oci_p bigint default null) RETURNS bigint AS $body$
DECLARE


cd_local_transf_w	smallint;


BEGIN

    if ( OBTER_FUNCAO_ATIVA() = 221 ) then
    select cd_local_estoque
    into STRICT cd_local_transf_w
    from ordem_compra_item
    where	nr_item_oci = coalesce(nr_item_oci_p,0)
    and nr_ordem_compra = coalesce(nr_ordem_compra_p,0);

        if (coalesce(cd_local_transf_w::text, '') = '') then
        cd_local_transf_w := null;
        select	cd_local_transf
        into STRICT	cd_local_transf_w
        from	ordem_compra
        where	nr_ordem_compra = coalesce(nr_ordem_compra_p,0);

        end if;

    else

    select	cd_local_transf
    into STRICT	cd_local_transf_w
    from	ordem_compra
    where	nr_ordem_compra = coalesce(nr_ordem_compra_p,0);

    end if;

return	cd_local_transf_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_local_atend_trasf ( nr_ordem_compra_p bigint, nr_item_oci_p bigint default null) FROM PUBLIC;

