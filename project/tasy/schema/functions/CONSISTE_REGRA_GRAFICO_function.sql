-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION consiste_regra_grafico (ie_tipo_item_p text) RETURNS varchar AS $body$
DECLARE


-- Se deve consistir no gr√°fico do ADEP
ie_consistir_w	varchar(1);
ie_tipo_item_w	varchar(15);


BEGIN
select	coalesce(max('N'),'S')
into STRICT	ie_consistir_w
from	plt_regra_grafico;

if (ie_consistir_w	= 'N') then

	select	case	ie_tipo_item_p
		when 'DI'  then '1'
		when 'D'   then '2'
		when 'O'   then '3'
		when 'HM'  then '4'
		when 'J'   then '5'
		when 'MAT' then '6'
		when 'M'   then '7'
		when 'NAN' then '8'
		when 'NPN' then '9'
		when 'P'   then '12'
		when 'R'   then '13'
		when 'SNE' then '14'
		when 'S'   then '15'
		when 'SOL' then '16'
		when 'G'   then '18'
		when 'C'   then '18'
		when 'I'   then '19'
		when 'L'   then '20'
		when 'LD'  then '21' else ''
		end
	into STRICT	ie_tipo_item_w
	;

	select	coalesce(max('S'),'N')
	into STRICT	ie_consistir_w
	from	plt_regra_grafico
	where	ie_tipo_item = ie_tipo_item_w;
else
	ie_consistir_w := 'S';
end if;

return	ie_consistir_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION consiste_regra_grafico (ie_tipo_item_p text) FROM PUBLIC;

