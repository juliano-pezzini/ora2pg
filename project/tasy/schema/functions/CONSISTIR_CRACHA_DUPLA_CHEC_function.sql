-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION consistir_cracha_dupla_chec (cdCracha_p text) RETURNS varchar AS $body$
DECLARE

  nm_usuario_w varchar(80);
  ds_msg_w		varchar(255):= '';

BEGIN

    begin
      select c.nm_usuario
        into STRICT nm_usuario_w
        from usuario c
       where c.cd_barras = cdCracha_p;
     
       if (nm_usuario_w = obter_usuario_ativo)  then
          ds_msg_w := 'A dupla checagem deve ser realizada por usu치rios diferentes!';
       end if;
     Exception
     When no_data_found then
       ds_msg_w := 'Medicamento com dupla checagem. Favor informar um c칩digo de usu치rio v치lido.';
     end;
  
  return(ds_msg_w);

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION consistir_cracha_dupla_chec (cdCracha_p text) FROM PUBLIC;

