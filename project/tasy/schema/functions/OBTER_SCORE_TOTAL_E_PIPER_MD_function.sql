-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_score_total_e_piper_md (qt_reg_comport_p bigint, qt_reg_significado_p bigint, qt_reg_sensorial_p bigint, qt_reg_cognitivo_p bigint, qt_result_comport_p bigint, qt_result_significado_p bigint, qt_result_sensorial_p bigint, qt_result_cognitivo_p bigint ) RETURNS bigint AS $body$
DECLARE


  qt_quantidade_total_w integer    := 0;				
  qt_result_total_w     double precision := 0;
  QT_SCORE_w            double precision := NULL;

BEGIN
	--- Inicio MD5
	qt_quantidade_total_w	:= coalesce(qt_reg_comport_p,0) + coalesce(qt_reg_significado_p,0) + coalesce(qt_reg_sensorial_p,0) + coalesce(qt_reg_cognitivo_p,0);

	if (qt_quantidade_total_w >=  17) then
		qt_result_total_w := coalesce(qt_result_comport_p,0) + coalesce(qt_result_significado_p,0) + coalesce(qt_result_sensorial_p,0) + coalesce(qt_result_cognitivo_p,0);
		QT_SCORE_w        := dividir_md(qt_result_total_w,qt_quantidade_total_w);
	end if;
    --- Fim MD5
  RETURN QT_SCORE_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_score_total_e_piper_md (qt_reg_comport_p bigint, qt_reg_significado_p bigint, qt_reg_sensorial_p bigint, qt_reg_cognitivo_p bigint, qt_result_comport_p bigint, qt_result_significado_p bigint, qt_result_sensorial_p bigint, qt_result_cognitivo_p bigint ) FROM PUBLIC;

