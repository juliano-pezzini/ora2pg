-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_tipo_exame_res ( cd_procedimento_p text, ie_origem_proced_p text) RETURNS varchar AS $body$
DECLARE


ds_retorno_w	varchar(10);
cd_tipo_procedimento_w varchar(10);


BEGIN

IF (cd_procedimento_p IS NOT NULL AND cd_procedimento_p::text <> '') THEN

		SELECT CD_TIPO_PROCEDIMENTO
		INTO STRICT cd_tipo_procedimento_w
		FROM procedimento
		WHERE cd_procedimento = cd_procedimento_p
		AND ie_origem_proced = ie_origem_proced_p;

		IF (cd_tipo_procedimento_w IN (34,1,3,25,2,121,7,107)) THEN
			ds_retorno_w := 'EI'; --Exame de Imagem
		ELSIF (cd_tipo_procedimento_w = 20) THEN
			ds_retorno_w := 'EL'; --Exame de Laborat√≥rio
		ELSE
			ds_retorno_w := 'EP'; --Procedimentos
		END IF;
END IF;


RETURN	ds_retorno_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_tipo_exame_res ( cd_procedimento_p text, ie_origem_proced_p text) FROM PUBLIC;

