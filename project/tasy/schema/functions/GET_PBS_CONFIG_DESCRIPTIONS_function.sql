-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_pbs_config_descriptions (cd_code_p text, cd_mode_p text) RETURNS varchar AS $body$
DECLARE


/*
  cd_mode_p = 'B' => benefit-type
  cd_mode_p = 'P' => prescriber-type
*/
ds_result_w		PBS_PROG_CODE_DESC.DS_PROGRAM%type;


BEGIN

	IF (cd_code_p IS NOT NULL AND cd_code_p::text <> '' AND cd_mode_p IS NOT NULL AND cd_mode_p::text <> '') THEN
		IF (cd_mode_p = 'B') THEN
			SELECT SUBSTR(DS,1,255)
			INTO STRICT ds_result_w
			FROM PBS_CONFIG_TYPES_DEF
			WHERE SUB_TYPE = 'benefit-type' AND RDF_DESC = cd_code_p;
		ELSIF (cd_mode_p = 'P') THEN
			SELECT SUBSTR(DS,1,255)
			INTO STRICT ds_result_w
			FROM PBS_CONFIG_TYPES_DEF
			WHERE SUB_TYPE = 'prescriber-type' and CD_CODE = cd_code_p;
		END IF;
	END IF;

RETURN ds_result_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_pbs_config_descriptions (cd_code_p text, cd_mode_p text) FROM PUBLIC;

