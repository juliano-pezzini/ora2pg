-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION eliminar_caracter_esp_person (ds_campo_p text, ds_locale text default null) RETURNS varchar AS $body$
DECLARE

ds_retorno_w  varchar(255);
BEGIN
if (ds_campo_p IS NOT NULL AND ds_campo_p::text <> '') then
	if (ds_locale in ('de_DE', 'de_AT')) then -- Para esta localizacao, nao deve remover o '-'
		for	i in 1 .. length(ds_campo_p) loop
			begin			
			if	not(substr(ds_campo_p,i,1) in (chr(96),chr(191),chr(161),chr(126),chr(33),chr(64),chr(35),chr(36),chr(37),chr(46),chr(44),chr(94),chr(38),chr(42),chr(40),chr(41),chr(95),chr(61),chr(43),chr(124),chr(130),chr(60),chr(62),chr(47),chr(63),chr(59),chr(58),chr(91),chr(93),chr(123),chr(125),chr(170),chr(176),chr(186),chr(92),chr(34),chr(39),chr(180),chr(168), chr(172),chr(167),chr(162),chr(163),chr(164),chr(165), chr(171), chr(174), chr(175), chr(177), chr(181), chr(182), chr(169), chr(184) ,chr(198), chr(216), chr(247), chr(248))) then		
				ds_retorno_w	:= ds_retorno_w || substr(ds_campo_p,i,1);								
			end if;	
			end;
		end loop;
		--Avaliado que eh melhor manter o chr(223) devido a estar no nome e pode ocorrer da pessoa nao querer que o caracter seja trocado do nome

		--ds_retorno_w	:= replace(ds_retorno_w,chr(223),'ss'); -- E deve substituir o caracter chr(223) por'ss'
	elsif (ds_locale = 'en_AU') then
		for	i in 1 .. length(ds_campo_p) loop
			begin			
			if	not(substr(ds_campo_p,i,1) in (chr(191),chr(161),chr(126),chr(33),chr(64),chr(35),chr(36),chr(37),chr(46),chr(44),chr(94),chr(38),chr(42),chr(40),chr(41),chr(95),chr(61),chr(43),chr(124),chr(130),chr(60),chr(62),chr(47),chr(63),chr(59),chr(58),chr(91),chr(93),chr(123),chr(125),chr(170),chr(176),chr(186),chr(92),chr(34),chr(180),chr(168), chr(172),chr(167),chr(162),chr(163),chr(164), chr(165), chr(171), chr(174), chr(175), chr(177), chr(181), chr(182), chr(169), chr(184) ,chr(198) ,chr(199), chr(216), chr(247), chr(248))) then		
				ds_retorno_w	:= ds_retorno_w || substr(ds_campo_p,i,1);								
			end if;	
			end;
		end loop;
	else
		for	i in 1 .. length(ds_campo_p) loop
			begin
			if	not(substr(ds_campo_p,i,1) in (chr(96),chr(191),chr(161),chr(126),chr(33),chr(64),chr(35),chr(36),chr(37),chr(46),chr(44),chr(94),chr(38),chr(42),chr(40),chr(41),chr(45),chr(95),chr(61),chr(43),chr(124),chr(130),chr(60),chr(62),chr(47),chr(63),chr(59),chr(58),chr(91),chr(93),chr(123),chr(125),chr(170),chr(176),chr(186),chr(92),chr(34),chr(39),chr(180),chr(168), chr(172),chr(167),chr(162),chr(163),chr(164), chr(165), chr(171), chr(174), chr(175), chr(177), chr(181), chr(182), chr(169), chr(184) ,chr(198) ,chr(199), chr(216), chr(223), chr(247), chr(248))) then		
				ds_retorno_w	:= ds_retorno_w || substr(ds_campo_p,i,1);	
			end if;	
			end;
		end loop;
	end if;
	
else
	return ds_campo_p;
end if;
return ds_retorno_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION eliminar_caracter_esp_person (ds_campo_p text, ds_locale text default null) FROM PUBLIC;

