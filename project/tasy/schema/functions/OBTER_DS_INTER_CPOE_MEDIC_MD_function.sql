-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_ds_inter_cpoe_medic_md (ds_interacao_p text, ds_material_a_p text, ds_material_b_p text, ds_tipo_p text, ds_severidade_p text, ds_principio_ativo_p text ) RETURNS varchar AS $body$
DECLARE


    ds_interacao_w varchar(4000) := '';

BEGIN
  ds_interacao_w := ds_interacao_p;

  if (coalesce(length(ds_interacao_p),0) < 3000) then 
    if (coalesce(ds_interacao_p::text, '') = '') then 
      ds_interacao_w := Wheb_mensagem_pck.get_texto(305981, 'DS_MATERIAL_A='||ds_material_a_p||';DS_MATERIAL_B='||ds_material_b_p);
    else 
      ds_interacao_w := ds_interacao_w || chr(13) || chr(10) || Wheb_mensagem_pck.get_texto(305981, 'DS_MATERIAL_A='||ds_material_b_p||';DS_MATERIAL_B='||ds_material_a_p);
    end if;

    if (ds_tipo_p IS NOT NULL AND ds_tipo_p::text <> '') then 
      ds_interacao_w := ds_interacao_w || ' ' || Wheb_mensagem_pck.get_texto(305995) || ' ' || ds_tipo_p;
    end if;
    if (ds_severidade_p IS NOT NULL AND ds_severidade_p::text <> '') then 
      ds_interacao_w := ds_interacao_w || '. ' || Wheb_mensagem_pck.get_texto(306029) || ' ' || ds_severidade_p;
    end if;
    if (ds_principio_ativo_p IS NOT NULL AND ds_principio_ativo_p::text <> '') then 
      ds_interacao_w := ds_interacao_w || '. ' || Wheb_mensagem_pck.get_texto(306016) || ' ' || ds_principio_ativo_p;
    end if;
    
    ds_interacao_w := ds_interacao_w || chr(13) || chr(10);
  end if;

  return ds_interacao_w;
   
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_ds_inter_cpoe_medic_md (ds_interacao_p text, ds_material_a_p text, ds_material_b_p text, ds_tipo_p text, ds_severidade_p text, ds_principio_ativo_p text ) FROM PUBLIC;

