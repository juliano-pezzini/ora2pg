-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_primeiro_ultimo_nome (cd_pessoa_fisica_p text) RETURNS varchar AS $body$
DECLARE

				 
ds_primeiro_w		varchar(100) := '';
ds_ultimo_w		varchar(100) := '';
ds_retorno_w		varchar(100) := '';
nm_pessoa_w		varchar(100);
i			integer;
inicio			integer;


BEGIN 
 
IF (cd_pessoa_fisica_p IS NOT NULL AND cd_pessoa_fisica_p::text <> '') THEN 
 
	inicio			:= 0;
	nm_pessoa_w		:= obter_nome_pf(cd_pessoa_fisica_p);
	 
	FOR	i IN 1 .. LENGTH(nm_pessoa_w) LOOP 
		BEGIN 
		IF (SUBSTR(nm_pessoa_w,i,1) = ' ') THEN 
			EXIT;
		ELSE 
			ds_primeiro_w	:= ds_primeiro_w || SUBSTR(nm_pessoa_w,i,1);
		END IF;
		END;
	END LOOP;
	 
	ds_ultimo_w	:= substr(obter_ultimo_nome(nm_pessoa_w),1,30);
END IF;
 
ds_retorno_w := ds_primeiro_w||' '||ds_ultimo_w;
 
 
return	initcap(ds_retorno_w);
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_primeiro_ultimo_nome (cd_pessoa_fisica_p text) FROM PUBLIC;

