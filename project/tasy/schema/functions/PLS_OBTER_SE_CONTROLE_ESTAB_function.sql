-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION pls_obter_se_controle_estab ( ie_opcao_p text) RETURNS varchar AS $body$
DECLARE


/*
IE_OPCAO_P
GP - OPS - Gestao de Pacotes
CG - OPS - Controle dos Grupos de Analise
LA - OPS - Regras de Lancamento Automatico
GO - OPS - Glosas e Ocorrencias
RP - OPS - Regras e Criterios de Preco
LP - Localizador de prestadores
LM - Localizador de materiais
CO - Coparticipacao
AT - Atendimento(Call Center)
CP - Complemento de contas medicas no portal web
CM - Contas Medicas
RE - Item OPS - Atendimento da funcao OPS - Cadastro de regras
SP - Solicitacao Prestador
LPM - 'Gerar lancamentos programados' pasta 'Movimentacao'
GM - Guia Medico
PD - Prestador Descredenciado
SIP - SIP
GA - Gestao de atendimento (Call center)
LBW - Localizador de beneficiarios web
PR - OPS - Prestadores
GCM - Gestao de contas medicas
AA - Analise de autorizacoes
AU - Autorizacoes
XML - Importacao XML / TISS
PW - OPS - Portal Web
AW - Autorizacao Web
RPD - Rol de procedimentos
RA - Requisicoes
ANS - Monitoramento ANS
*/
ds_retorno_w			varchar(2)	:= 'N';
ie_pacote_w			varchar(2);
ie_grupo_analise_w		varchar(2);
ie_lanc_automatico_w		varchar(2);
ie_ocorrencia_w			varchar(2);
ie_regra_preco_w		varchar(2);
ie_localizador_prest_w		varchar(2);
ie_localizador_mat_w		varchar(2);
ie_coparticipacao_w		varchar(2);
ie_call_center_w		varchar(2);
qt_controle_estab_w		integer;
ie_cad_conta_medica_w		pls_controle_estab.ie_cad_conta_medica%type;
ie_complemento_conta_web_w	pls_controle_estab.ie_complemento_conta_web%type;
ie_solic_prest_web_w		pls_controle_estab.ie_solic_prest_web%type;
ie_guia_medico_web_w		pls_controle_estab.ie_guia_medico_web%type;
ie_prest_descred_web_w		pls_controle_estab.ie_prest_descred_web%type;
ie_cad_atendimento_w 		varchar(1);
ie_ocorrencia_financ_w		pls_controle_estab.ie_ocorrencia_financ%type;
ie_sip_w			pls_controle_estab.ie_sip%type;
ie_gestao_call_center_w		pls_controle_estab.ie_gestao_call_center%type;
ie_localiz_benef_web_w		pls_controle_estab.ie_localiz_benef_web%type;
ie_prestador_w			pls_controle_estab.ie_prestador%type;
ie_gestao_conta_medica_w	pls_controle_estab.ie_gestao_conta_medica%type;
ie_analise_autor_w		pls_controle_estab.ie_analise_autor%type;
ie_controle_producao_w		pls_controle_estab.ie_controle_producao%type;
ie_cad_material_w		pls_controle_estab.ie_cad_material%type;
ie_tabela_preco_w		pls_controle_estab.ie_tabela_preco%type;
ie_autorizacao_w		pls_controle_estab.ie_autorizacao%type;
ie_xml_tiss_w			pls_controle_estab.ie_xml_tiss%type;
ie_portal_web_w			pls_controle_estab.ie_portal_web%type;
ie_autorizacao_web_w		pls_controle_estab.ie_autorizacao_web%type;
ie_rol_procedimentos_w		pls_controle_estab.ie_rol_procedimentos%type;
ie_requisicao_w			pls_controle_estab.ie_requisicao%type;
ie_monitoramento_ans_w 	pls_controle_estab.ie_monitoramento_ans%type;


BEGIN

select	count(1)
into STRICT	qt_controle_estab_w
from	pls_controle_estab;

if (qt_controle_estab_w > 0) then
	begin
		select	ie_pacote,
			ie_grupo_analise,
			ie_lanc_automatico,
			ie_ocorrencia,
			ie_regra_preco,
			ie_localizador_prest,
			ie_localizador_mat,
			ie_coparticipacao,
			ie_call_center,
			ie_complemento_conta_web,
			ie_cad_conta_medica,
			ie_cad_atendimento,
			ie_solic_prest_web,
			ie_ocorrencia_financ,
			ie_guia_medico_web,
			ie_prest_descred_web,
			ie_sip,
			ie_gestao_call_center,
			ie_localiz_benef_web,
			ie_prestador,
			ie_gestao_conta_medica,
			ie_analise_autor,
			ie_controle_producao,
			ie_cad_material,
			ie_tabela_preco,
			ie_autorizacao,
			ie_xml_tiss,
			ie_portal_web,
			ie_autorizacao_web,
			ie_rol_procedimentos,
			ie_requisicao,
			ie_monitoramento_ans
		into STRICT	ie_pacote_w,
			ie_grupo_analise_w,
			ie_lanc_automatico_w,
			ie_ocorrencia_w,
			ie_regra_preco_w,
			ie_localizador_prest_w,
			ie_localizador_mat_w,
			ie_coparticipacao_w,
			ie_call_center_w,
			ie_complemento_conta_web_w,
			ie_cad_conta_medica_w,
			ie_cad_atendimento_w,
			ie_solic_prest_web_w,
			ie_ocorrencia_financ_w,
			ie_guia_medico_web_w,
			ie_prest_descred_web_w,
			ie_sip_w,
			ie_gestao_call_center_w,
			ie_localiz_benef_web_w,
			ie_prestador_w,
			ie_gestao_conta_medica_w,
			ie_analise_autor_w,
			ie_controle_producao_w,
			ie_cad_material_w,
			ie_tabela_preco_w,
			ie_autorizacao_w,
			ie_xml_tiss_w,
			ie_portal_web_w,
			ie_autorizacao_web_w,
			ie_rol_procedimentos_w,
			ie_requisicao_w,
			ie_monitoramento_ans_w
		from	pls_controle_estab;
	exception
	when others then
		ie_pacote_w			:= 'S';
		ie_grupo_analise_w		:= 'S';
		ie_lanc_automatico_w		:= 'S';
		ie_ocorrencia_w			:= 'N';
		ie_regra_preco_w		:= 'S';
		ie_localizador_prest_w		:= 'S';
		ie_localizador_mat_w		:= 'S';
		ie_coparticipacao_w		:= 'S';
		ie_call_center_w		:= 'S';
		ie_complemento_conta_web_w	:= 'S';
		ie_cad_conta_medica_w		:= 'N';
		ie_cad_atendimento_w		:= 'N';
		ie_solic_prest_web_w		:= 'N';
		ie_ocorrencia_financ_w		:= 'N';
		ie_guia_medico_web_w		:= 'N';
		ie_prest_descred_web_w		:= 'N';
		ie_sip_w			:= 'N';
		ie_gestao_call_center_w		:= 'N';
		ie_localiz_benef_web_w		:= 'N';
		ie_prestador_w			:= 'N';
		ie_gestao_conta_medica_w	:= 'N';
		ie_analise_autor_w		:= 'N';
		ie_controle_producao_w		:= 'N';
		ie_cad_material_w		:= 'N';
		ie_tabela_preco_w		:= 'N';
		ie_xml_tiss_w			:= 'S';
		ie_portal_web_w			:= 'N';	
		ie_rol_procedimentos_w		:= 'N';
		ie_requisicao_w			:= 'N';
		ie_monitoramento_ans_w 	:= 'S';
	end;
	
	if (ie_opcao_p	= 'GP') then
		ds_retorno_w	:= coalesce(ie_pacote_w,'S');
	elsif (ie_opcao_p	= 'CG') then
		ds_retorno_w	:= coalesce(ie_grupo_analise_w,'S');
	elsif (ie_opcao_p	= 'LA') then
		ds_retorno_w	:= coalesce(ie_lanc_automatico_w,'S');
	elsif (ie_opcao_p	= 'GO') then
		ds_retorno_w	:= coalesce(ie_ocorrencia_w,'N');
	elsif (ie_opcao_p	= 'RP') then
		ds_retorno_w	:= coalesce(ie_regra_preco_w,'S');
	elsif (ie_opcao_p	= 'LP') then
		ds_retorno_w	:= coalesce(ie_localizador_prest_w,'S');
	elsif (ie_opcao_p	= 'LM') then
		ds_retorno_w	:= coalesce(ie_localizador_mat_w,'S');
	elsif (ie_opcao_p	= 'CO') then
		ds_retorno_w	:= coalesce(ie_coparticipacao_w,'S');
	elsif (ie_opcao_p	= 'AT')then
		ds_retorno_w	:= coalesce(ie_call_center_w,'S');
	elsif (ie_opcao_p	= 'CP')then
		ds_retorno_w	:= coalesce(ie_complemento_conta_web_w,'S');
	elsif (ie_opcao_p	= 'CM')then
		ds_retorno_w	:= coalesce(ie_cad_conta_medica_w,'N');
	elsif (ie_opcao_p	= 'RE')then
		ds_retorno_w	:= coalesce(ie_cad_atendimento_w,'N');
	elsif (ie_opcao_p	= 'SP') then
		ds_retorno_w	:= coalesce(ie_solic_prest_web_w, 'N');
	elsif (ie_opcao_p	= 'LPM') then
		ds_retorno_w	:= coalesce(ie_ocorrencia_financ_w, 'N');
	elsif (ie_opcao_p	= 'GM') then
		ds_retorno_w	:= coalesce(ie_guia_medico_web_w, 'N');
	elsif (ie_opcao_p	= 'PD') then
		ds_retorno_w	:= coalesce(ie_prest_descred_web_w, 'N');
	elsif (ie_opcao_p	= 'SIP') then
		ds_retorno_w	:= coalesce(ie_sip_w, 'N');
	elsif (ie_opcao_p	= 'GA') then
		ds_retorno_w	:= coalesce(ie_gestao_call_center_w, 'N');
	elsif (ie_opcao_p	= 'LBW') then
		ds_retorno_w	:= coalesce(ie_localiz_benef_web_w, 'N');
	elsif (ie_opcao_p	= 'PR') then
		ds_retorno_w	:= coalesce(ie_prestador_w, 'N');
	elsif (ie_opcao_p	= 'GCM') then
		ds_retorno_w	:= coalesce(ie_gestao_conta_medica_w, 'N');
	elsif (ie_opcao_p	= 'AA') then
		ds_retorno_w	:= coalesce(ie_analise_autor_w, 'N');
	elsif (ie_opcao_p	= 'CPM') then
		ds_retorno_w	:= coalesce(ie_controle_producao_w,'N');
	elsif (ie_opcao_p	= 'CMO') then
		ds_retorno_w	:= coalesce(ie_cad_material_w, 'N');
	elsif (ie_opcao_p	= 'TP') then
		ds_retorno_w	:= coalesce(ie_tabela_preco_w,'N');
	elsif (ie_opcao_p	= 'AU') then
		ds_retorno_w	:= coalesce(ie_autorizacao_w,'N');
	elsif (ie_opcao_p	= 'XML') then
		ds_retorno_w	:= coalesce(ie_xml_tiss_w,'S');
	elsif (ie_opcao_p	= 'PW') then
		ds_retorno_w	:= coalesce(ie_portal_web_w,'S');
	elsif (ie_opcao_p	= 'AW') then
		ds_retorno_w	:= coalesce(ie_autorizacao_web_w,'N');
	elsif (ie_opcao_p	= 'RPD') then
		ds_retorno_w	:= coalesce(ie_rol_procedimentos_w,'N');
	elsif (ie_opcao_p	= 'RA') then
		ds_retorno_w	:= coalesce(ie_requisicao_w,'N');
	elsif (ie_opcao_p	= 'ANS') then
		ds_retorno_w	:= coalesce(ie_monitoramento_ans_w,'S');
	end if;
end if;
return	ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_obter_se_controle_estab ( ie_opcao_p text) FROM PUBLIC;

