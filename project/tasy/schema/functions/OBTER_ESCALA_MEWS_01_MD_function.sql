-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_escala_mews_01_md (qt_freq_cardiaca_p bigint, qt_freq_resp_p bigint, qt_pa_sistolica_p bigint, ie_nivel_consciencia_p text, qt_temp_p bigint ) RETURNS bigint AS $body$
DECLARE

  qt_pontuacao_w  bigint := 0;


BEGIN

    if (qt_freq_cardiaca_p IS NOT NULL AND qt_freq_cardiaca_p::text <> '')  then
	  if (coalesce(qt_freq_cardiaca_p, 0) <= 40) then
	    qt_pontuacao_w := qt_pontuacao_w + 2;
	  elsif (coalesce(qt_freq_cardiaca_p, 0) >= 41) and (qt_freq_cardiaca_p <= 50) then
		qt_pontuacao_w := qt_pontuacao_w + 1;	
	  elsif (coalesce(qt_freq_cardiaca_p, 0) >= 51) and (qt_freq_cardiaca_p <= 100) then
		qt_pontuacao_w := qt_pontuacao_w + 0;	
	  elsif (coalesce(qt_freq_cardiaca_p, 0) >= 101) and (qt_freq_cardiaca_p <= 110) then
		qt_pontuacao_w := qt_pontuacao_w + 1;	
	  elsif (coalesce(qt_freq_cardiaca_p, 0) >= 111) and (qt_freq_cardiaca_p <= 129) then
		qt_pontuacao_w := qt_pontuacao_w + 2;	
	  elsif (coalesce(qt_freq_cardiaca_p, 0) >= 130) then
		qt_pontuacao_w := qt_pontuacao_w + 3;	
      end if;
    end if; /*fim if (qt_freq_cardiaca_p is not null)*/
    if (qt_freq_resp_p IS NOT NULL AND qt_freq_resp_p::text <> '') then
      if (coalesce(qt_freq_resp_p,0)	< 9) then
	    qt_pontuacao_w := qt_pontuacao_w + 2;
	  elsif (coalesce(qt_freq_resp_p,0) >= 9) and (coalesce(qt_freq_resp_p,0) <= 14) then
	    qt_pontuacao_w := qt_pontuacao_w + 0;
	  elsif (coalesce(qt_freq_resp_p,0) >= 15) and (coalesce(qt_freq_resp_p,0) <= 20) then
	    qt_pontuacao_w := qt_pontuacao_w + 1;
	  elsif (coalesce(qt_freq_resp_p,0) >= 21) and (coalesce(qt_freq_resp_p,0) <= 29) then
	    qt_pontuacao_w := qt_pontuacao_w + 2;
	  elsif (coalesce(qt_freq_resp_p,0) >= 30) then
	    qt_pontuacao_w := qt_pontuacao_w + 3;
	  end if;
    end if; /*fim if (qt_freq_resp_p is not null)*/
    if (qt_pa_sistolica_p IS NOT NULL AND qt_pa_sistolica_p::text <> '') then
      if (coalesce(qt_pa_sistolica_p, 0) < 71) then
        qt_pontuacao_w := qt_pontuacao_w + 3;
	  elsif (coalesce(qt_pa_sistolica_p, 0) >= 71) and (coalesce(qt_pa_sistolica_p, 0) <= 80) then
        qt_pontuacao_w := qt_pontuacao_w + 2;	
	  elsif (coalesce(qt_pa_sistolica_p, 0) >= 81) and (coalesce(qt_pa_sistolica_p, 0) <= 100) then
	    qt_pontuacao_w := qt_pontuacao_w + 1;	
	  elsif (coalesce(qt_pa_sistolica_p, 0) >= 101) and (coalesce(qt_pa_sistolica_p, 0) <= 199) then
	    qt_pontuacao_w := qt_pontuacao_w + 0;	
	  elsif (coalesce(qt_pa_sistolica_p, 0) >= 200) then
	    qt_pontuacao_w := qt_pontuacao_w + 2;	
	  end if;
    end if; /*fim if (qt_pa_sistolica_p is not null)*/
    qt_pontuacao_w := qt_pontuacao_w + coalesce(ie_nivel_consciencia_p, 0);

    if (qt_temp_p IS NOT NULL AND qt_temp_p::text <> '') then
      if (coalesce(qt_temp_p,0) < 35) then
	    qt_pontuacao_w := qt_pontuacao_w + 2;
	  elsif (coalesce(qt_temp_p,0) >= 35) and (coalesce(qt_temp_p,0) <= 38.4) then
	    qt_pontuacao_w := qt_pontuacao_w + 0;	
	  elsif (coalesce(qt_temp_p,0) >= 38.5) then
	    qt_pontuacao_w := qt_pontuacao_w + 2;	
	  end if;
    end if; /*fim if (qt_temp_p is not null)*/
    return qt_pontuacao_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_escala_mews_01_md (qt_freq_cardiaca_p bigint, qt_freq_resp_p bigint, qt_pa_sistolica_p bigint, ie_nivel_consciencia_p text, qt_temp_p bigint ) FROM PUBLIC;

