-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_dados_cid_japan (nr_seq_cid_interno_japan_p cid_interno_japan.nr_sequencia%type, campo_p text) RETURNS varchar AS $body$
DECLARE


  ds_result_v varchar(200);


BEGIN

  CASE UPPER(campo_p)
    WHEN 'DS_CID_DOENCA' THEN
      SELECT cd.ds_doenca_cid
        INTO STRICT ds_result_v
        FROM cid_interno_japan cj         
       INNER JOIN cid_doenca cd ON cd.cd_doenca_cid = cj.cd_doenca
       WHERE nr_sequencia = nr_seq_cid_interno_japan_p;

    WHEN 'CD_DOENCA' THEN
      SELECT cd_doenca
        INTO STRICT ds_result_v
        FROM cid_interno_japan
       WHERE nr_sequencia = nr_seq_cid_interno_japan_p;

    WHEN 'CD_DOENCA_MDFY' THEN
      SELECT cd_doenca_mdfy
        INTO STRICT ds_result_v
        FROM cid_interno_japan
       WHERE nr_sequencia = nr_seq_cid_interno_japan_p;
         
    WHEN 'DS_DOENCA_MDFY' THEN
      SELECT ds_doenca_mdfy
        INTO STRICT ds_result_v
        FROM cid_interno_japan
       WHERE nr_sequencia = nr_seq_cid_interno_japan_p;
          
    WHEN 'DS_DOENCA_KATANA' THEN
       SELECT ds_doenca_katana
         INTO STRICT ds_result_v
         FROM cid_interno_japan
        WHERE nr_sequencia = nr_seq_cid_interno_japan_p;
                 
    ELSE 
      ds_result_v := '';
         
  END CASE;

  RETURN ds_result_v;

  EXCEPTION
     WHEN no_data_found THEN
       RETURN '';
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_dados_cid_japan (nr_seq_cid_interno_japan_p cid_interno_japan.nr_sequencia%type, campo_p text) FROM PUBLIC;

