-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION ciap_autocomplete_style ( ds_ciap_p text, nr_seq_problema_p text) RETURNS varchar AS $body$
DECLARE

		ds_capitulo_w	capitulo_ciap.ds_capitulo%type;
		cd_ciap_w		problema_ciap.cd_ciap%type;

BEGIN
	if (nr_seq_problema_p IS NOT NULL AND nr_seq_problema_p::text <> '') then
		select	c.ds_capitulo,
				a.cd_ciap
		into STRICT	ds_capitulo_w,
				cd_ciap_w
		from	problema_ciap a,
				componente_ciap b,
				capitulo_ciap c
		where	a.nr_seq_componente	=	b.nr_sequencia
		and		b.nr_seq_capitulo	=	c.nr_sequencia
		and		a.nr_sequencia		=	nr_seq_problema_p;

		if (ds_capitulo_w IS NOT NULL AND ds_capitulo_w::text <> '') then
			return cd_ciap_w || ' ' || ds_ciap_p || '<br><span style="color:#808080 100%; opacity: 100%; font-size:12px; font-family:''CentraleSansCndBook''; character:0.2px; top:8px;">'|| ds_capitulo_w ||'</span>';
		end if;
	else
		return ds_ciap_p;
	end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION ciap_autocomplete_style ( ds_ciap_p text, nr_seq_problema_p text) FROM PUBLIC;

