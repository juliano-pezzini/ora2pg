-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION limpa_espacos_entre ( ds_string_p text) RETURNS varchar AS $body$
DECLARE


/* Objetivo: remover caracteres de espa√ßo excedentes entre as palabras */

ds_texto_w		varchar(2000)	:= '';
ds_string_w		varchar(2000);
x			varchar(1);
y			varchar(1);
i			integer;


BEGIN

ds_string_w	:= ds_string_p;

if (ds_string_w IS NOT NULL AND ds_string_w::text <> '') then
	begin
	for i in 1..length(ds_string_p) loop
		x	:= substr(ds_string_w, i, 1);
		y	:= substr(ds_string_w, i-1, 1);
		if	((x <> y) or (i = 1)) or
			((x <> ' ') or (y <> ' ')) then
			ds_texto_w	:= ds_texto_w || x;
		elsif (x <> ' ') then
			ds_texto_w	:= ds_texto_w ||' ';
		end if;
	end loop;
	ds_string_w	:= ds_texto_w;
	end;
end if;

return	ds_string_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 IMMUTABLE;
-- REVOKE ALL ON FUNCTION limpa_espacos_entre ( ds_string_p text) FROM PUBLIC;

