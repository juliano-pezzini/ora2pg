-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_aprovador_listado (NR_SEQ_ITEM_P bigint, IE_EQUIPE_CIRURGICA_P text, CD_PESSOA_FISICA_P text, NR_SEQ_FUNCAO_PF_P bigint) RETURNS bigint AS $body$
DECLARE

qt_lista bigint;


BEGIN
    select
        count(*) into STRICT qt_lista
    from
        mult_aprov_prof 
    where 
        nr_seq_item = NR_SEQ_ITEM_P
    and (coalesce(IE_EQUIPE_CIRURGICA_P::text, '') = '' or ie_equipe_cirurgica = IE_EQUIPE_CIRURGICA_P)
    and (coalesce(CD_PESSOA_FISICA_P::text, '') = '' or cd_pessoa_fisica = CD_PESSOA_FISICA_P )
    and (coalesce(NR_SEQ_FUNCAO_PF_P::text, '') = '' or nr_seq_funcao_pf = NR_SEQ_FUNCAO_PF_P);
    return qt_lista;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_aprovador_listado (NR_SEQ_ITEM_P bigint, IE_EQUIPE_CIRURGICA_P text, CD_PESSOA_FISICA_P text, NR_SEQ_FUNCAO_PF_P bigint) FROM PUBLIC;

