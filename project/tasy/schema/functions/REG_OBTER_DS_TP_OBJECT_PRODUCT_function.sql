-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION reg_obter_ds_tp_object_product ( nr_seq_object_p reg_product_dic.nr_seq_objeto%TYPE, ie_object_type_p reg_product_dic.ie_tipo_objeto%TYPE) RETURNS varchar AS $body$
DECLARE


	ds_object_w		varchar(4000);
	ds_select_table_w	varchar(50);
	ds_select_field_w	varchar(255);
	ie_object_type_w	reg_product_dic.ie_tipo_objeto%TYPE;


BEGIN
	/**
	 * 'S' -- Schematics
	 * 'O' -- Dic_Objetos
	 * 'E' -- Evento
	 * 'D' -- Dic_dados
	 */
	IF	ie_object_type_p = 'S' THEN
		ds_select_table_w	:= 'objeto_schematic';
		ds_select_field_w	:= 'DECODE(ie_tipo_objeto, ''C'', Obter_Valor_Dominio(7629, ie_tipo_componente), NULL)';
	ELSIF	ie_object_type_p = 'O' THEN
		ds_select_table_w	:= 'Dic_objeto';
		ds_select_field_w	:= 'obter_valor_dominio(2666, ie_tipo_objeto)';
	ELSIF	ie_object_type_p = 'E' THEN
		ds_select_table_w	:= 'Obj_schematic_evento';
		ds_select_field_w	:= 'NVL(obter_desc_expressao(289651), ''Event'')';
	ELSE
		ds_select_table_w	:= 'Objeto_sistema';
		ds_select_field_w	:= 'ie_tipo_objeto';
	END IF;

	ds_object_w := OBTER_VALOR_DINAMICO_4000_BV('SELECT '||ds_select_field_w||' FROM '||ds_select_table_w||'@WHEBL02_ORCL WHERE Nr_sequencia = :nr_seq_obj ', 'nr_seq_obj='||nr_seq_object_p, ds_object_w);

	RETURN SUBSTR(ds_object_w, 1, 255);
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION reg_obter_ds_tp_object_product ( nr_seq_object_p reg_product_dic.nr_seq_objeto%TYPE, ie_object_type_p reg_product_dic.ie_tipo_objeto%TYPE) FROM PUBLIC;

