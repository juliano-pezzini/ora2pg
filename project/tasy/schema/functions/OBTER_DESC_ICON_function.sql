-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_desc_icon (tipo_retorno text, sexo text, status text) RETURNS varchar AS $body$
DECLARE


return_w   varchar(255);

BEGIN

/*
Esta function irá retornar a descrição 'D' ou o caminho do ícone que será utilizado na função "Painel de serviços da nutrição". Este processo está sendo feito, pois esses ícones não poderiam estar na legenda.

Valores retirados da tabela "classificacao_etaria"
C = criança
L = adolescente
A = adulto
I = Idoso
*/
if (sexo = 'M')then
	begin
		if (status = 'C')then --Criança masculino
		begin
			if (tipo_retorno = 'D')then
				return_w := wheb_mensagem_pck.get_texto(1036175);
			else
				return_w := '/icons/status-and-feedback/people-child.svg';
			end if;
		end;
			else if (status = 'L')then --Adolescente masculino
			begin
				if (tipo_retorno = 'D')then
					return_w := wheb_mensagem_pck.get_texto(1036178);
				else
					return_w := '/icons/status-and-feedback/people-teen.svg';
				end if;
			end;
				else if (status = 'A')then --Adulto masculino
				begin
					if (tipo_retorno = 'D')then
						return_w := wheb_mensagem_pck.get_texto(1036181);
					else
						return_w := '/icons/status-and-feedback/people-adult.svg';
					end if;
				end;
					else if (status = 'I')then --Idoso masculino
					begin
						if (tipo_retorno = 'D')then
							return_w := wheb_mensagem_pck.get_texto(1036183);
						else
							return_w := '/icons/status-and-feedback/people-old.svg';
						end if;
					end;
					end if;
				end if;
			end if;
		end if;
	end;

else
	begin
		if (status = 'C')then --Criança feminino
		begin
			if (tipo_retorno = 'D')then
				return_w := wheb_mensagem_pck.get_texto(1036177);
			else
				return_w := '/icons/status-and-feedback/people-fem-child.svg';
			end if;
		end;
			else if (status = 'L')then --Adoslescente feminino
			begin
				if (tipo_retorno = 'D')then
					return_w := wheb_mensagem_pck.get_texto(1036179);
				else
					return_w := '/icons/status-and-feedback/people-fem-teen.svg';
				end if;
			end;
				else if (status = 'A')then --Adulto feminino
				begin
					if (tipo_retorno = 'D')then
						return_w := wheb_mensagem_pck.get_texto(1036182);
					else
						return_w := '/icons/status-and-feedback/people-fem-adult.svg';
					end if;
				end;
					else if (status = 'I')then --Idoso feminino
					begin
						if (tipo_retorno = 'D')then
							return_w := wheb_mensagem_pck.get_texto(1036184);
						else
							return_w := '/icons/status-and-feedback/people-fem-old.svg';
						end if;
					end;
					end if;
				end if;
			end if;
		end if;
	end;
end if;

return	return_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_desc_icon (tipo_retorno text, sexo text, status text) FROM PUBLIC;

