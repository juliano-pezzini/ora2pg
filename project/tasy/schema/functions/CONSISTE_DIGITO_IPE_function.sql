-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION consiste_digito_ipe (cd_codigo_p text) RETURNS boolean AS $body$
DECLARE


cd_miolo_w			varchar(08);
cd_dep_w			varchar(02);
cd_dig_w			varchar(01);
cd_OL_w			varchar(02);
cd_matricula_w		varchar(12);
ie_resultado_w		boolean;



BEGIN

ie_resultado_w		:= False;

if (length(cd_codigo_p) = 13) then
	cd_ol_w		:= substr(cd_codigo_p,1,2);
	cd_miolo_w		:= substr(cd_codigo_p,3,8);
	cd_dep_w		:= substr(cd_codigo_p,11,2);
	cd_dig_w		:= substr(cd_codigo_p,13,1);
	cd_matricula_w	:= substr(cd_codigo_p,1,12);
	ie_resultado_w	:= (calcula_digito('MODULO10', cd_matricula_w) = cd_dig_w);
end if;

RETURN ie_Resultado_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION consiste_digito_ipe (cd_codigo_p text) FROM PUBLIC;

