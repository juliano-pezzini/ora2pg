-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_stages_protocol_hided (nr_seq_protocol protocolo_integrado.nr_sequencia%TYPE) RETURNS varchar AS $body$
DECLARE

    is_valid_w  protocolo_integrado_etapa.ie_evento_sumario%TYPE;

c_summary CURSOR FOR
    SELECT a.nr_sequencia, a.ie_evento_sumario
    FROM protocolo_integrado_etapa a 
    WHERE nr_seq_protocolo_integrado = nr_seq_protocol 
    ORDER BY ie_evento_sumario;

BEGIN
  is_valid_w := 'S';
  FOR r_summary IN c_summary
    LOOP
        IF (r_summary.ie_evento_sumario = 'N') THEN
            is_valid_w := 'N';
            EXIT;
        END IF;
    END LOOP;

    RETURN is_valid_w;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_stages_protocol_hided (nr_seq_protocol protocolo_integrado.nr_sequencia%TYPE) FROM PUBLIC;

