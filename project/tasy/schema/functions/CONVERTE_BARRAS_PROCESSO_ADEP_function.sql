-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION converte_barras_processo_adep (cd_barras_frac_p text) RETURNS bigint AS $body$
DECLARE


nr_seq_frac_w       bigint;
nr_seq_digito_w     smallint;
nr_seq_processo_w   bigint := 0;


BEGIN
if (length(cd_barras_frac_p) = 12) and (substr(cd_barras_frac_p,1,1) = '9') then -- fracionamento processo adep
	begin

		nr_seq_frac_w	:= (substr(cd_barras_frac_p,2,10))::numeric;
		nr_seq_digito_w	:= (substr(cd_barras_frac_p,12,1))::numeric;

		select	b.nr_sequencia
		into STRICT	nr_seq_processo_w
		from	adep_processo_frac a,
			adep_processo b
		where a.nr_sequencia = nr_seq_frac_w
		and   a.nr_seq_digito = nr_seq_digito_w
		and   a.nr_seq_processo = b.nr_sequencia;

	end;
end if;

return nr_seq_processo_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION converte_barras_processo_adep (cd_barras_frac_p text) FROM PUBLIC;

