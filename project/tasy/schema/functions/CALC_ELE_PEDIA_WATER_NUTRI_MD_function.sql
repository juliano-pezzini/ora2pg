-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION calc_ele_pedia_water_nutri_md (Qt_Aporte_Hidrico_Diario_p bigint, qt_Total_Volume_p bigint, Ie_Unid_Med_P text, Qt_Elem_KgDia_p bigint, Qt_Peso_Calorico_p bigint, Qt_Peso_p bigint ) RETURNS bigint AS $body$
DECLARE

   qt_Elem_KgDay_w bigint;

BEGIN
        qt_Elem_KgDay_w := Qt_Elem_KgDia_p;

        if (coalesce(Qt_Aporte_Hidrico_Diario_p,0) > coalesce(qt_Total_Volume_p,0)) then
            if Ie_Unid_Med_P = 'PC/d' then
               qt_Elem_KgDay_w := coalesce(Qt_Elem_KgDia_p,0) + dividir_sem_round_md((coalesce(Qt_Aporte_Hidrico_Diario_p,0) - coalesce(qt_Total_Volume_p,0)),Qt_Peso_Calorico_p);
            else
               qt_Elem_KgDay_w := coalesce(Qt_Elem_KgDia_p,0) + dividir_sem_round_md((coalesce(Qt_Aporte_Hidrico_Diario_p,0) - coalesce(qt_Total_Volume_p,0)),Qt_Peso_p);
            end if;

        elsif (coalesce(Qt_Aporte_Hidrico_Diario_p,0) < coalesce(qt_Total_Volume_p,0)) then
            if Ie_Unid_Med_P = 'PC/d' then
               qt_Elem_KgDay_w := coalesce(Qt_Elem_KgDia_p,0) - dividir_sem_round_md((coalesce(qt_Total_Volume_p,0) - coalesce(Qt_Aporte_Hidrico_Diario_p,0)),Qt_Peso_Calorico_p);
            else
               qt_Elem_KgDay_w := coalesce(Qt_Elem_KgDia_p,0) - dividir_sem_round_md((coalesce(qt_Total_Volume_p,0) - coalesce(Qt_Aporte_Hidrico_Diario_p,0)),Qt_Peso_p);
            end if;
        end if;

        if (qt_Elem_KgDay_w < 0) then
            qt_Elem_KgDay_w := 0;
        end if;

        return coalesce(qt_Elem_KgDay_w, 0);

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION calc_ele_pedia_water_nutri_md (Qt_Aporte_Hidrico_Diario_p bigint, qt_Total_Volume_p bigint, Ie_Unid_Med_P text, Qt_Elem_KgDia_p bigint, Qt_Peso_Calorico_p bigint, Qt_Peso_p bigint ) FROM PUBLIC;

