-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION pls_obter_se_analises_tela ( nr_seq_analise_p bigint, cd_guia_p text) RETURNS varchar AS $body$
DECLARE

				 
/*Esta function funciona especificamente para obter a qt de analises na tela da função 
  OPS - Análise de Contas Médicas 
   
  S - Existe mais de uma análise 
  N - Existe somente uma anáise*/
				 
				 
ds_retorno_w			varchar(1) := 'S';


BEGIN 
 
begin 
select	'N' 
into STRICT	ds_retorno_w 
from	pls_resumo_conta_v 
where	((nr_guia = cd_guia_p) or (coalesce(cd_guia_p,0) = '0')) 
and	((nr_seq_analise = nr_seq_analise_p) or (coalesce(nr_seq_analise_p,0) = 0)) 
and	coalesce(nr_seq_conta,0) > 0 
group by nr_seq_analise;
exception 
when others then 
	ds_retorno_w := 'S';
end;
 
return	ds_retorno_w;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION pls_obter_se_analises_tela ( nr_seq_analise_p bigint, cd_guia_p text) FROM PUBLIC;

