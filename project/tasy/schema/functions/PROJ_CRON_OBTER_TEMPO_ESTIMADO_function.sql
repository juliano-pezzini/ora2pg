-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION proj_cron_obter_tempo_estimado (nr_seq_projeto_p bigint, ie_apenas_cron_aprov_p text default 'N') RETURNS bigint AS $body$
DECLARE


ds_retorno_w	bigint;			
			

BEGIN

select	sum(qt_hora_prev)
into STRICT	ds_retorno_w
from	proj_cronograma p,
	proj_cron_etapa e
where	e.nr_seq_cronograma 	= p.nr_sequencia
and	((ie_apenas_cron_aprov_p =  'N') or (ie_apenas_cron_aprov_p = 'S' and (P.dt_aprovacao IS NOT NULL AND P.dt_aprovacao::text <> '')))
and	p.nr_seq_proj 		= nr_seq_projeto_p
and	p.ie_tipo_cronograma 	= 'I'
and	e.ie_tipo_ativ_met 	= 'I020';

return	ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION proj_cron_obter_tempo_estimado (nr_seq_projeto_p bigint, ie_apenas_cron_aprov_p text default 'N') FROM PUBLIC;

