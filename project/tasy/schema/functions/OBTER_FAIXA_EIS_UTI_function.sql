-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_faixa_eis_uti ( qt_origem_p bigint, ie_opcao_p text) RETURNS varchar AS $body$
DECLARE


/* Opção
E	Faixa Etária
A	Apache
R	Faixa de Risco
*/
ie_faixa_w				varchar(10);


BEGIN

ie_faixa_w				:= wheb_mensagem_pck.get_texto(309109); -- Sem Faixa
if (ie_opcao_p = 'A') then
	begin
	if (qt_origem_p <= 4) then
		ie_faixa_w		:= '00 '||wheb_mensagem_pck.get_texto(309110)||' 04'; -- a
	elsif (qt_origem_p <= 9) then
		ie_faixa_w		:= '05 '||wheb_mensagem_pck.get_texto(309110)||' 09'; -- a
	elsif (qt_origem_p <= 14) then
		ie_faixa_w		:= '10 '||wheb_mensagem_pck.get_texto(309110)||' 14'; -- a
	elsif (qt_origem_p <= 19) then
		ie_faixa_w		:= '15 '||wheb_mensagem_pck.get_texto(309110)||' 19'; -- a
	elsif (qt_origem_p <= 24) then
		ie_faixa_w		:= '20 '||wheb_mensagem_pck.get_texto(309110)||' 24'; -- a
	elsif (qt_origem_p <= 29) then
		ie_faixa_w		:= '25 '||wheb_mensagem_pck.get_texto(309110)||' 29'; -- a
	elsif (qt_origem_p <= 34) then
		ie_faixa_w		:= '30 '||wheb_mensagem_pck.get_texto(309110)||' 34'; -- a
	else
		ie_faixa_w		:= '34 <   ';
	end if;
	end;
elsif (ie_opcao_p = 'R') then
	begin
	if (qt_origem_p <= 9) then
		ie_faixa_w		:= '00 '||wheb_mensagem_pck.get_texto(309110)||' 09'; -- a
	elsif (qt_origem_p <= 19) then
		ie_faixa_w		:= '10 '||wheb_mensagem_pck.get_texto(309110)||' 19'; -- a
	elsif (qt_origem_p <= 29) then
		ie_faixa_w		:= '20 '||wheb_mensagem_pck.get_texto(309110)||' 29'; -- a
	elsif (qt_origem_p <= 39) then
		ie_faixa_w		:= '30 '||wheb_mensagem_pck.get_texto(309110)||' 39'; -- a
	elsif (qt_origem_p <= 49) then
		ie_faixa_w		:= '40 '||wheb_mensagem_pck.get_texto(309110)||' 49'; -- a
	elsif (qt_origem_p <= 59) then
		ie_faixa_w		:= '50 '||wheb_mensagem_pck.get_texto(309110)||' 59'; -- a
	elsif (qt_origem_p <= 69) then
		ie_faixa_w		:= '60 '||wheb_mensagem_pck.get_texto(309110)||' 69'; -- a
	elsif (qt_origem_p <= 79) then
		ie_faixa_w		:= '70 '||wheb_mensagem_pck.get_texto(309110)||' 79'; -- a
	elsif (qt_origem_p <= 89) then
		ie_faixa_w		:= '80 '||wheb_mensagem_pck.get_texto(309110)||' 89'; -- a
	else
		ie_faixa_w		:= '90 <  ';
	end if;
	end;
elsif (ie_opcao_p = 'E') then
	begin
	if (qt_origem_p <= 30) then
		ie_faixa_w		:= '< 30'; -- a
	elsif (qt_origem_p <= 39) then
		ie_faixa_w		:= '30 '||wheb_mensagem_pck.get_texto(309110)||' 39'; -- a
	elsif (qt_origem_p <= 49) then
		ie_faixa_w		:= '40 '||wheb_mensagem_pck.get_texto(309110)||' 49'; -- a
	elsif (qt_origem_p <= 59) then
		ie_faixa_w		:= '50 '||wheb_mensagem_pck.get_texto(309110)||' 59'; -- a
	elsif (qt_origem_p <= 69) then
		ie_faixa_w		:= '60 '||wheb_mensagem_pck.get_texto(309110)||' 69'; -- a
	elsif (qt_origem_p <= 79) then
		ie_faixa_w		:= '70 '||wheb_mensagem_pck.get_texto(309110)||' 79'; -- a
	elsif (qt_origem_p <= 89) then
		ie_faixa_w		:= '80 '||wheb_mensagem_pck.get_texto(309110)||' 89'; -- a
	else
		ie_faixa_w		:= '90 <   ';
	end if;
	end;
end if;

RETURN ie_faixa_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_faixa_eis_uti ( qt_origem_p bigint, ie_opcao_p text) FROM PUBLIC;

