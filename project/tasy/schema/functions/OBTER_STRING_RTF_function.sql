-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_string_rtf (ds_texto_p text) RETURNS varchar AS $body$
DECLARE


/* Converte texto RTF em String simples */

ds_texto_w	varchar(4000);

BEGIN

ds_texto_w := REGEXP_REPLACE( ds_texto_p,'\{?\\[[:alnum:]]+\s?([[:alnum:]]*;)?\}*','');

ds_texto_w := replace(ds_texto_w, '\''e0', 'à');
ds_texto_w := replace(ds_texto_w, '\''e1', 'á');
ds_texto_w := replace(ds_texto_w, '\''e2', 'â');
ds_texto_w := replace(ds_texto_w, '\''e3', 'ã');

ds_texto_w := replace(ds_texto_w, '\''c0', 'À');
ds_texto_w := replace(ds_texto_w, '\''c1', 'Á');
ds_texto_w := replace(ds_texto_w, '\''c2', 'Â');
ds_texto_w := replace(ds_texto_w, '\''c3', 'Ã');

ds_texto_w := replace(ds_texto_w, '\''e8', 'è');
ds_texto_w := replace(ds_texto_w, '\''e9', 'é');
ds_texto_w := replace(ds_texto_w, '\''ea', 'ê');

ds_texto_w := replace(ds_texto_w, '\''c8', 'È');
ds_texto_w := replace(ds_texto_w, '\''c9', 'É');
ds_texto_w := replace(ds_texto_w, '\''ca', 'Ê');

ds_texto_w := replace(ds_texto_w, '\''ec', 'ì');
ds_texto_w := replace(ds_texto_w, '\''ed', 'í');
ds_texto_w := replace(ds_texto_w, '\''ee', 'î');

ds_texto_w := replace(ds_texto_w, '\''cc', 'Ì');
ds_texto_w := replace(ds_texto_w, '\''cd', 'Í');
ds_texto_w := replace(ds_texto_w, '\''ce', 'Î');

ds_texto_w := replace(ds_texto_w, '\''f2', 'ò');
ds_texto_w := replace(ds_texto_w, '\''f3', 'ó');
ds_texto_w := replace(ds_texto_w, '\''f4', 'ô');
ds_texto_w := replace(ds_texto_w, '\''f5', 'õ');

ds_texto_w := replace(ds_texto_w, '\''d2', 'Ò');
ds_texto_w := replace(ds_texto_w, '\''d3', 'Ó');
ds_texto_w := replace(ds_texto_w, '\''d4', 'Ô');
ds_texto_w := replace(ds_texto_w, '\''d5', 'Õ');

ds_texto_w := replace(ds_texto_w, '\''f9', 'ù');
ds_texto_w := replace(ds_texto_w, '\''fa', 'ú');
ds_texto_w := replace(ds_texto_w, '\''fb', 'û');
	
ds_texto_w := replace(ds_texto_w, '\''d9', 'Ù');
ds_texto_w := replace(ds_texto_w, '\''da', 'Ú');
ds_texto_w := replace(ds_texto_w, '\''db', 'Û');

ds_texto_w := replace(ds_texto_w, '\''e7', 'ç');
ds_texto_w := replace(ds_texto_w, '\''c7', 'Ç');

ds_texto_w := replace(ds_texto_w, '\''ba', 'º');
ds_texto_w := replace(ds_texto_w, '\''aa', 'ª');
	
return	ds_texto_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_string_rtf (ds_texto_p text) FROM PUBLIC;

