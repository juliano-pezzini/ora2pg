-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION get_tipo_acao_mentor (nr_seq_acao_p gqa_acao.nr_sequencia%type) RETURNS varchar AS $body$
DECLARE


nr_seq_mprev_programa_w gqa_acao.nr_seq_mprev_programa%type;
nr_seq_proc_w           gqa_acao.nr_seq_proc%type;
nr_seq_proc_saps_w      gqa_acao.nr_seq_proc_saps%type;

str_return_w varchar(100) := 'UNDEFINED';


BEGIN
  SELECT
    nr_seq_mprev_programa,
    nr_seq_proc,
    nr_seq_proc_saps_w
  INTO STRICT	
    nr_seq_mprev_programa_w,
    nr_seq_proc_w,
    nr_seq_proc_saps_w
  FROM	gqa_acao
  WHERE	nr_sequencia = nr_seq_acao_p;

  if (nr_seq_mprev_programa_w IS NOT NULL AND nr_seq_mprev_programa_w::text <> '') then
    str_return_w := 'MPREV_PROGRAMA';
  end if;

  if (nr_seq_proc_w IS NOT NULL AND nr_seq_proc_w::text <> '') then
    str_return_w := 'PROC';
  end if;

  if (nr_seq_proc_saps_w IS NOT NULL AND nr_seq_proc_saps_w::text <> '') then
    str_return_w := 'PROC_SAPS';
  end if;

  RETURN str_return_w;
EXCEPTION
  when no_data_found then return null;
  when too_many_rows then raise;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION get_tipo_acao_mentor (nr_seq_acao_p gqa_acao.nr_sequencia%type) FROM PUBLIC;

