-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_tipo_classificacao ( code_P bigint, filter_p text default null) RETURNS varchar AS $body$
DECLARE


ds_retorno_w		varchar(60);


BEGIN

If ((code_p IS NOT NULL AND code_p::text <> '') and coalesce(filter_p::text, '') = '') Then

	Begin
    Select Ds_Classif_Paciente
    	into STRICT	ds_retorno_w
      From Tipo_Classificao_Paciente
      Where Nr_Sequencia = (
          SELECT B.Nr_Seq_Tipo_Classif_Pac
          From Agenda_Integrada B
          Where B.Nr_Sequencia = code_p);
	end;

elsif (code_p IS NOT NULL AND code_p::text <> '' AND filter_P IS NOT NULL AND filter_P::text <> '') Then
  Begin
    Select Ds_Classif_Paciente
    	into STRICT	ds_retorno_w
      From Tipo_Classificao_Paciente
      Where Nr_sequencia = code_p;
  end;
end if;

return ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_tipo_classificacao ( code_P bigint, filter_p text default null) FROM PUBLIC;

