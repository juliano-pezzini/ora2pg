-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_tablespace_tab_temp (nm_objeto_p text default null) RETURNS varchar AS $body$
DECLARE


nm_tablespace_w	varchar(50) := null;
nm_user_w	varchar(40);
ie_configurar_w	varchar(1);


BEGIN

if (nm_objeto_p IS NOT NULL AND nm_objeto_p::text <> '') then
	begin
	EXECUTE 'BEGIN :a := wheb_usuario_pck.get_configurar_tablespace; END;' USING IN OUT ie_configurar_w;
	if (ie_configurar_w = 'S') then
		nm_tablespace_w := OBTER_VALOR_DINAMICO_CHAR_BV('select obter_nome_tablespace(:NM_OBJETO,:IE_TIPO) from dual', 'NM_OBJETO=' || nm_objeto_p || ';' ||
				'IE_TIPO=' || 'TABELA' || ';', nm_tablespace_w);
		if (coalesce(nm_tablespace_w::text, '') = '') then
			select	obter_tablespace_tab_temp(null)
			into STRICT	nm_tablespace_w
			;
		end	if;
	end	if;
	end;
end	if;

if (coalesce(nm_tablespace_w::text, '') = '') then
	nm_tablespace_w := Obter_valor_Dinamico_char_bv('select nvl(vl_parametro,vl_parametro_padrao) from funcao_parametro where nr_sequencia = 93 and cd_funcao = 0', null, nm_tablespace_w);

	if ( coalesce(nm_tablespace_w::text, '') = '' ) then
		select	default_tablespace
		into STRICT	nm_tablespace_w
		from	user_users;
	end	if;
end	if;

return	nm_tablespace_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_tablespace_tab_temp (nm_objeto_p text default null) FROM PUBLIC;

