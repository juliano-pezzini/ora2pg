-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION tax_active_company (establishment_code_p estabelecimento.cd_estabelecimento%type) RETURNS bigint AS $body$
DECLARE


user_company_w  empresa.cd_empresa%type;
data_company_w  empresa.cd_empresa%type;


BEGIN
  select  coalesce(cd_empresa, 1)
  into STRICT    user_company_w
  from    estabelecimento
  where   cd_estabelecimento = obter_estabelecimento_ativo;

  select  coalesce(cd_empresa, 1)
  into STRICT    data_company_w
  from    estabelecimento
  where   cd_estabelecimento = establishment_code_p;

  return diutil.bool_to_int(user_company_w = data_company_w);
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION tax_active_company (establishment_code_p estabelecimento.cd_estabelecimento%type) FROM PUBLIC;

