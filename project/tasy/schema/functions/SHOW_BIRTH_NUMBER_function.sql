-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION show_birth_number (NR_ATENDIMENTO_P bigint) RETURNS varchar AS $body$
DECLARE

	DS_BIRTH_W varchar(10);	
	NR_BIRTH_NUMBER_W bigint;
	DT_YEAR_W varchar(5);
	DT_DOB_W timestamp;

BEGIN
SELECT	NR_BIRTH_NUMBER, DT_NASCIMENTO INTO STRICT NR_BIRTH_NUMBER_W ,DT_DOB_W
FROM	NASCIMENTO
WHERE	NR_ATEND_RN = NR_ATENDIMENTO_P;

SELECT EXTRACT(YEAR FROM DT_DOB_W) INTO STRICT DT_YEAR_W;

DS_BIRTH_W := NR_BIRTH_NUMBER_W||'/'||DT_YEAR_W;


RETURN	DS_BIRTH_W;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION show_birth_number (NR_ATENDIMENTO_P bigint) FROM PUBLIC;

