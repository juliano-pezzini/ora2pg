-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION resolve_icon_desc_html5 ( cd_icone_panorama_p bigint) RETURNS varchar AS $body$
DECLARE

  ds_parametro_w varchar(255);
  /* cd_icone_panorama values 0 Allergies , 1 unchecked Items,3 Alerts  can be fetched from CD_DOMINIO 7403 */

BEGIN
  SELECT a.DS_ICONE_INSTITUICAO
  INTO STRICT ds_parametro_w
  FROM REGRA_PERM_PANORAMA_ICONE a ,
    REGRA_PERM_PANORAMA p
  WHERE a.NR_SEQ_REGRA    = p.NR_SEQUENCIA
  AND a.CD_ICONE_PANORAMA =cd_icone_panorama_p
  AND p.CD_PERFIL         =wheb_usuario_pck.get_cd_perfil
  AND a.NR_SEQUENCIA      =
    (SELECT MAX( reg.NR_SEQUENCIA)
    FROM REGRA_PERM_PANORAMA_ICONE reg ,
      REGRA_PERM_PANORAMA pan
    WHERE reg.NR_SEQ_REGRA    = pan.NR_SEQUENCIA
    AND reg.CD_ICONE_PANORAMA =cd_icone_panorama_p
    AND pan.CD_PERFIL         =wheb_usuario_pck.get_cd_perfil
    );
  RETURN ds_parametro_w;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION resolve_icon_desc_html5 ( cd_icone_panorama_p bigint) FROM PUBLIC;

