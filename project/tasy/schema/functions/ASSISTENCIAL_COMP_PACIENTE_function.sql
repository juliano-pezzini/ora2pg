-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION assistencial_comp_paciente (vl_dominio_p text, nr_atendimento_p bigint, cd_pessoa_fisica_p text) RETURNS varchar AS $body$
DECLARE


vl_dominio_w varchar(255);
vl_retorno_w varchar(2000);


BEGIN
vl_retorno_w := '';

IF (vl_dominio_p = 'DTPAL') THEN
	vl_retorno_w := PKG_DATE_FORMATERS.to_varchar(OBTER_DATA_PREV_ALTA(NR_ATENDIMENTO_P), 'shortDate', OBTER_ESTABELECIMENTO_ATIVO, OBTER_USUARIO_ATIVO);
ELSIF (vl_dominio_p = 'MEWS') THEN
	vl_retorno_w := OBTER_RESULTADO_ESCALA_MEWS((NR_ATENDIMENTO_P), 0);
elsif (vl_dominio_p = 'OBT') then
	vl_retorno_w := obter_resultado_obs_triagem(nr_atendimento_p);
elsif (vl_dominio_p = 'DEF') then
	vl_retorno_w := substr(obter_deficiencia_paciente(cd_pessoa_fisica_p),1,2000);
elsif (vl_dominio_p = 'NBS') then
	vl_retorno_w := substr(obter_resultado_nbs(nr_atendimento_p),1,255);
elsif (vl_dominio_p = 'UDT') then
	vl_retorno_w := substr(Obter_Dados_Loco_Regional(cd_pessoa_fisica_p,5),1,255);
elsif (vl_dominio_p = 'EMERCONT') then
	vl_retorno_w := substr(obter_contato_emergencia(cd_pessoa_fisica_p,'NF'),1,255);
elsif (vl_dominio_p = 'PATPASS') then
	vl_retorno_w := coalesce(lab_obter_senha_pf(cd_pessoa_fisica_p), '');
elsif (vl_dominio_p = 'CNS') then
	vl_retorno_w := obter_cns(cd_pessoa_fisica_p);
elsif (vl_dominio_p = 'STADIAMED') then
	vl_retorno_w := obter_inf_estadia(obter_episodio_atendimento(nr_atendimento_p), nr_atendimento_p, 'MED');
elsif (vl_dominio_p = 'STS') then
	vl_retorno_w := substr(obter_dados_pf(cd_pessoa_fisica_p, 'SABO'), 1, 20);
elsif (vl_dominio_p = 'NOK') then
	vl_retorno_w := substr(GET_NOK_CONTACT(cd_pessoa_fisica_p,'NF'),1,255);
elsif (vl_dominio_p = 'DPC') then
	vl_retorno_w := substr(obter_codigo_dpc(nr_atendimento_p), 1, 40);
elsif (vl_dominio_p = 'DOCIDENTBOL') then
	vl_retorno_w := substr(obter_valor_ident_pat_bol(cd_pessoa_fisica_p), 1, 255);
END IF;

RETURN vl_retorno_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION assistencial_comp_paciente (vl_dominio_p text, nr_atendimento_p bigint, cd_pessoa_fisica_p text) FROM PUBLIC;

