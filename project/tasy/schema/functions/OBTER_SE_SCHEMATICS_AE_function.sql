-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_se_schematics_ae ( nr_seq_chamada_externa_p bigint, nr_seq_funcao_schematic_p bigint, cd_funcao_externa_p bigint, cd_perfil_p bigint, nm_usuario_p text, cd_estabelecimento_p bigint ) RETURNS varchar AS $body$
DECLARE


ds_retorno_w    varchar(1) := 'S';
nr_seq_obj_schem_param_w objeto_schematic_param.nr_sequencia%type;
nr_seq_obj_schemematic_w objeto_schematic.nr_sequencia%type;
ie_configuravel_w    objeto_schematic.ie_configuravel%type;


BEGIN

select  max(b.nr_sequencia),
  max(a.nr_sequencia)
into STRICT  nr_seq_obj_schemematic_w,
  nr_seq_obj_schem_param_w
from   objeto_schematic_param a,
  objeto_schematic b
where  a.cd_funcao = b.cd_funcao
and  a.nr_seq_obj_sch = b.nr_sequencia
and  b.nr_sequencia = nr_seq_chamada_externa_p
and  b.nr_seq_funcao_schematic = nr_seq_funcao_schematic_p
and   b.cd_funcao_externa = cd_funcao_externa_p
AND  b.ie_tipo_componente = 'WAE';

select  obter_se_obj_schem_param(nr_seq_obj_schem_param_w,cd_funcao_externa_p,cd_estabelecimento_p,cd_perfil_p,nm_usuario_p,nr_seq_obj_schemematic_w,'S')
into STRICT  ds_retorno_w
;

return ds_retorno_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_se_schematics_ae ( nr_seq_chamada_externa_p bigint, nr_seq_funcao_schematic_p bigint, cd_funcao_externa_p bigint, cd_perfil_p bigint, nm_usuario_p text, cd_estabelecimento_p bigint ) FROM PUBLIC;

