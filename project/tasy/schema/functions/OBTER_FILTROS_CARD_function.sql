-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION obter_filtros_card ( nr_seq_item_p bigint) RETURNS varchar AS $body$
DECLARE


ds_filtros_card_w			varchar(2000) := '';
ie_formato_busca_w			varchar(5);
qt_dias_busca_w				smallint;
qt_consultas_w				smallint;
ie_restringir_tipo_atend_w	varchar(5);
ds_formato_busca_w			varchar(255);
IE_TIPO_ITEM_w				varchar(5);
ds_restringir_tipo_atend_w	varchar(255);


BEGIN

select	max(IE_FORMATO_BUSCA),
	max(QT_DIAS_BUSCA),
	max(QT_CONSULTAS),
	max(IE_RESTRINGIR_TIPO_ATEND),
		max(IE_TIPO_ITEM)
into STRICT	ie_formato_busca_w,
	qt_dias_busca_w,
	qt_consultas_w,
	ie_restringir_tipo_atend_w,
		IE_TIPO_ITEM_w
from	item_suep
where	nr_sequencia = nr_seq_item_p;


If (coalesce(ie_formato_busca_w::text, '') = '') then


	Select 	obter_busca_padrao_suep(IE_TIPO_ITEM_w)
	into STRICT	ie_formato_busca_w
	;


end if;



if (ie_formato_busca_w = 'A') then

	ds_formato_busca_w := obter_desc_expressao(283863);

elsif (ie_formato_busca_w = 'P') then

	ds_formato_busca_w := obter_desc_expressao(295829);

elsif (ie_formato_busca_w = 'C') then


	ds_formato_busca_w := obter_desc_expressao(668979);

end if;



if (ds_formato_busca_w IS NOT NULL AND ds_formato_busca_w::text <> '') then
	ds_filtros_card_w := '<div>'||'<strong>'||obter_desc_expressao(791226) || ': '|| '</strong>' ||ds_formato_busca_w;
end if;

if (qt_dias_busca_w IS NOT NULL AND qt_dias_busca_w::text <> '') then
	ds_filtros_card_w := ds_filtros_card_w || '<br>' ||'<strong>'||obter_desc_expressao(791299) || ': '|| '</strong> ' ||qt_dias_busca_w;
end if;

if (qt_consultas_w IS NOT NULL AND qt_consultas_w::text <> '') then
	ds_filtros_card_w := ds_filtros_card_w || '<br>' ||'<strong>'||obter_desc_expressao(791303) || ': '|| '</strong> ' ||qt_consultas_w;
end if;

if (ie_restringir_tipo_atend_w IS NOT NULL AND ie_restringir_tipo_atend_w::text <> '') then

	if (ie_restringir_tipo_atend_w = 'S') then

		ds_restringir_tipo_atend_w := obter_desc_expressao(327113);

	else

		ds_restringir_tipo_atend_w := obter_desc_expressao(327114);

	end if;


	ds_filtros_card_w := ds_filtros_card_w || '<br>' || '<strong>'||obter_desc_expressao(791307) || ': '|| '</strong> ' || ds_restringir_tipo_atend_w;
end if;


if (ds_filtros_card_w = '') then
	ds_filtros_card_w := obter_desc_expressao(543333);
else

	ds_filtros_card_w := ds_filtros_card_w ||'</div>';

end if;

return	ds_filtros_card_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION obter_filtros_card ( nr_seq_item_p bigint) FROM PUBLIC;

