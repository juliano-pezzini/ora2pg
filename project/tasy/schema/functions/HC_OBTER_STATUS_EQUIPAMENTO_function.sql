-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE FUNCTION hc_obter_status_equipamento ( DT_Entrega_EQUIP_p timestamp, dt_devolucao_equip_p timestamp, dt_prorrogacao_equip_p timestamp) RETURNS varchar AS $body$
DECLARE

  ds_retorno_w varchar(255);

BEGIN
  IF (coalesce(DT_Entrega_EQUIP_p::text, '') = '') THEN
    ds_retorno_w         := SUBSTR(obter_texto_dic_objeto(1060699, wheb_usuario_pck.get_nr_seq_idioma, ' '),1,255); -- Vinculado
  ELSE
    IF ( (DT_Entrega_EQUIP_p IS NOT NULL AND DT_Entrega_EQUIP_p::text <> '') AND (coalesce(dt_devolucao_equip_p::text, '') = '' and coalesce(dt_prorrogacao_equip_p::text, '') = '') ) THEN
      ds_retorno_w          := SUBSTR(obter_texto_dic_objeto(1060700, wheb_usuario_pck.get_nr_seq_idioma, ' '),1,255); -- Entregue
    ELSE
      IF (dt_devolucao_equip_p IS NOT NULL AND dt_devolucao_equip_p::text <> '') THEN
        ds_retorno_w            := SUBSTR(obter_texto_dic_objeto(1060701, wheb_usuario_pck.get_nr_seq_idioma, ' '),1,255); -- Devolvido
      ELSE
        IF ( (dt_prorrogacao_equip_p IS NOT NULL AND dt_prorrogacao_equip_p::text <> '') AND coalesce(dt_devolucao_equip_p::text, '') = '') THEN
          ds_retorno_w                 := SUBSTR(obter_texto_dic_objeto(1060702, wheb_usuario_pck.get_nr_seq_idioma, ' '),1,255); -- Prorrogado
        ELSE
          ds_retorno_w := '';
        END IF;
      END IF;
    END IF;
   END IF;
RETURN ds_retorno_w;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION hc_obter_status_equipamento ( DT_Entrega_EQUIP_p timestamp, dt_devolucao_equip_p timestamp, dt_prorrogacao_equip_p timestamp) FROM PUBLIC;

