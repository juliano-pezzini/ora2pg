-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_gera_log_imp_tab_mat ( cd_moeda_p pls_material_preco_imp_log.cd_moeda%type, cd_tiss_brasindice_p pls_material_preco_imp_log.cd_tiss_brasindice%type, dt_inicio_vigencia_p pls_material_preco_imp_log.dt_inicio_vigencia%type, ie_status_p pls_material_preco_imp_log.ie_status%type, ie_tipo_preco_p pls_material_preco_imp_log.ie_tipo_preco%type, nr_seq_material_p pls_material_preco_imp_log.nr_seq_material%type, nr_seq_material_preco_p pls_material_preco_imp_log.nr_seq_material_preco%type, qt_convercao_p pls_material_preco_imp_log.qt_convercao%type, vl_material_p pls_material_preco_imp_log.vl_material%type, cd_tuss_p pls_material_preco_imp_log.cd_tuss%type, nm_usuario_p usuario.nm_usuario%type) AS $body$
DECLARE

/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade: Inserir as informações na tabela pls_material_preco_imp_log
-------------------------------------------------------------------------------------------------------------------
Locais de chamada direta:
[x]  Objetos do dicionário [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatórios [ ] Outros:
-------------------------------------------------------------------------------------------------------------------
Pontos de atenção:

Alterações:
-------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
nr_seq_preco_item_w		pls_material_preco_item.nr_sequencia%type;
qt_convercao_w			pls_material_valor_item.qt_convercao%type;
ie_tipo_preco_w			pls_material_valor_item.ie_tipo_preco%type;
nr_seq_log_imp_w		pls_material_preco_imp_log.nr_sequencia%type;


BEGIN

select	nextval('pls_material_preco_imp_log_seq')
into STRICT	nr_seq_log_imp_w
;

insert	into	pls_material_preco_imp_log(	nr_sequencia,nm_usuario,nm_usuario_nrec,
		dt_atualizacao,dt_atualizacao_nrec,dt_inicio_vigencia,
		cd_tiss_brasindice,cd_moeda,cd_tuss,
		ie_tipo_preco,nr_seq_material,nr_seq_material_preco,
		qt_convercao,vl_material,ie_status)
	values (	nr_seq_log_imp_w,nm_usuario_p,nm_usuario_p,
		clock_timestamp(),clock_timestamp(),dt_inicio_vigencia_p,
		cd_tiss_brasindice_p,cd_moeda_p,cd_tuss_p,
		ie_tipo_preco_w,nr_seq_material_p,nr_seq_material_preco_p,
		qt_convercao_w,vl_material_p,coalesce(ie_status_p,'N'));

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_gera_log_imp_tab_mat ( cd_moeda_p pls_material_preco_imp_log.cd_moeda%type, cd_tiss_brasindice_p pls_material_preco_imp_log.cd_tiss_brasindice%type, dt_inicio_vigencia_p pls_material_preco_imp_log.dt_inicio_vigencia%type, ie_status_p pls_material_preco_imp_log.ie_status%type, ie_tipo_preco_p pls_material_preco_imp_log.ie_tipo_preco%type, nr_seq_material_p pls_material_preco_imp_log.nr_seq_material%type, nr_seq_material_preco_p pls_material_preco_imp_log.nr_seq_material_preco%type, qt_convercao_p pls_material_preco_imp_log.qt_convercao%type, vl_material_p pls_material_preco_imp_log.vl_material%type, cd_tuss_p pls_material_preco_imp_log.cd_tuss%type, nm_usuario_p usuario.nm_usuario%type) FROM PUBLIC;

