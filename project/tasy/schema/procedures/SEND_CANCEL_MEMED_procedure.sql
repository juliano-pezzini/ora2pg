-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE send_cancel_memed (nr_sequencia_p med_receita.nr_sequencia%TYPE ,ie_acao_p text ,cd_ext_idprescricao_p text ,cd_pessoa_fisica_p text ,cd_medico_p text ,nm_usuario_p text) AS $body$
DECLARE

  result_w text;

BEGIN
  SELECT bifrost.send_integration_content('memed.prescription.cancel'
                                         ,'{"idPrescription":' ||
                                          cd_ext_idprescricao_p ||
                                          ',"type":"drugs","cdPaciente":"' ||
                                          cd_pessoa_fisica_p ||
                                          '","cdMedico":"' || cd_medico_p || '"}'
                                         ,nm_usuario_p)
    INTO STRICT result_w
;

  IF ie_acao_p = 'I' THEN
    CALL set_ds_receita_inat_memed(nr_sequencia_p);
  END IF;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE send_cancel_memed (nr_sequencia_p med_receita.nr_sequencia%TYPE ,ie_acao_p text ,cd_ext_idprescricao_p text ,cd_pessoa_fisica_p text ,cd_medico_p text ,nm_usuario_p text) FROM PUBLIC;

