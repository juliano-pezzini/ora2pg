-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE intpd_gerar_ordem_compra ( nm_usuario_p text, cd_estabelecimento_p text, cd_cgc_fornecedor_p text, cd_pessoa_fisica_p text, cd_condicao_pagamento_p text, cd_comprador_p text, cd_moeda_p text, cd_pessoa_solicitante_p text, cd_cgc_transportador_p text, cd_cnpj_seguradora_p text, cd_local_entrega_p text, cd_convenio_p text, cd_setor_atendimento_p text, cd_setor_entrega_p text, dt_ordem_compra_p timestamp, dt_emissao_p timestamp, dt_entrega_p timestamp, ie_tipo_ordem_p text, ie_frete_p text, ie_aviso_chegada_p text, ie_emite_obs_p text, ie_urgente_p text, ie_somente_pagto_p text, ie_sistema_origem_p text, vl_frete_p bigint, vl_despesa_acessoria_p bigint, vl_desconto_p bigint, vl_despesa_doc_p bigint, vl_seguro_p bigint, vl_conv_moeda_p bigint, pr_multa_atraso_p bigint, pr_desconto_p bigint, pr_desc_pgto_antec_p bigint, pr_juros_negociado_p bigint, pr_desc_financeiro_p bigint, ds_pessoa_contato_p text, ds_observacao_p text, ds_obs_interna_p text, nr_documento_externo_p bigint, nr_seq_subgrupo_compra_p text, nr_seq_forma_pagto_p text, nr_seq_tipo_compra_p text, nr_seq_mod_compra_p text, nr_seq_motivo_urgente_p text, nr_seq_motivo_solic_p text, nr_seq_sistema_p text, cd_estab_transf_p text, cd_local_transf_p text, nr_sequencia_p INOUT bigint) AS $body$
DECLARE


nr_sequencia_w						intpd_ordem_compra.nr_sequencia%type;


BEGIN

select 	nextval('intpd_ordem_compra_seq')
into STRICT	nr_sequencia_w
;

insert into intpd_ordem_compra(	nr_sequencia,
	dt_atualizacao,
	dt_atualizacao_nrec,
	nm_usuario,
	nm_usuario_nrec,
	cd_estabelecimento,
	cd_cgc_fornecedor,
	cd_pessoa_fisica,
	cd_condicao_pagamento,
	cd_comprador,
	cd_moeda,
	cd_pessoa_solicitante,
	cd_cgc_transportador,
	cd_cnpj_seguradora,
	cd_local_entrega,
	cd_convenio,
	cd_setor_atendimento,
	cd_setor_entrega,
	dt_ordem_compra,
	dt_emissao,
	dt_entrega,
	ie_tipo_ordem,
	ie_frete,
	ie_aviso_chegada,
	ie_emite_obs,
	ie_urgente,
	ie_somente_pagto,
	ie_sistema_origem,
	vl_frete,
	vl_despesa_acessoria,
	vl_desconto,
	vl_despesa_doc,
	vl_seguro,
	vl_conv_moeda,
	pr_multa_atraso,
	pr_desconto,
	pr_desc_pgto_antec,
	pr_juros_negociado,
	pr_desc_financeiro,
	ds_pessoa_contato,
	ds_observacao,
	ds_obs_interna,
	nr_documento_externo,
	nr_seq_subgrupo_compra,
	nr_seq_forma_pagto,
	nr_seq_tipo_compra,
	nr_seq_mod_compra,
	nr_seq_motivo_urgente,
	nr_seq_motivo_solic,
	nr_seq_sistema,
	cd_estab_transf,
	cd_local_transf)
values (	nr_sequencia_w,
	clock_timestamp(),
	clock_timestamp(),
	nm_usuario_p,
	nm_usuario_p,
	cd_estabelecimento_p,
	cd_cgc_fornecedor_p,
	cd_pessoa_fisica_p,
	cd_condicao_pagamento_p,
	cd_comprador_p,
	cd_moeda_p,
	cd_pessoa_solicitante_p,
	cd_cgc_transportador_p,
	cd_cnpj_seguradora_p,
	cd_local_entrega_p,
	cd_convenio_p,
	cd_setor_atendimento_p,
	cd_setor_entrega_p,
	dt_ordem_compra_p,
	dt_emissao_p,
	dt_entrega_p,
	ie_tipo_ordem_p,
	ie_frete_p,
	ie_aviso_chegada_p,
	ie_emite_obs_p,
	ie_urgente_p,
	ie_somente_pagto_p,
	ie_sistema_origem_p,
	vl_frete_p,
	vl_despesa_acessoria_p,
	vl_desconto_p,
	vl_despesa_doc_p,
	vl_seguro_p,
	vl_conv_moeda_p,
	pr_multa_atraso_p,
	pr_desconto_p,
	pr_desc_pgto_antec_p,
	pr_juros_negociado_p,
	pr_desc_financeiro_p,
	ds_pessoa_contato_p,
	ds_observacao_p,
	ds_obs_interna_p,
	nr_documento_externo_p,
	nr_seq_subgrupo_compra_p,
	nr_seq_forma_pagto_p,
	nr_seq_tipo_compra_p,
	nr_seq_mod_compra_p,
	nr_seq_motivo_urgente_p,
	nr_seq_motivo_solic_p,
	nr_seq_sistema_p,
	cd_estab_transf_p,
	cd_local_transf_p);

commit;

nr_sequencia_p := nr_sequencia_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE intpd_gerar_ordem_compra ( nm_usuario_p text, cd_estabelecimento_p text, cd_cgc_fornecedor_p text, cd_pessoa_fisica_p text, cd_condicao_pagamento_p text, cd_comprador_p text, cd_moeda_p text, cd_pessoa_solicitante_p text, cd_cgc_transportador_p text, cd_cnpj_seguradora_p text, cd_local_entrega_p text, cd_convenio_p text, cd_setor_atendimento_p text, cd_setor_entrega_p text, dt_ordem_compra_p timestamp, dt_emissao_p timestamp, dt_entrega_p timestamp, ie_tipo_ordem_p text, ie_frete_p text, ie_aviso_chegada_p text, ie_emite_obs_p text, ie_urgente_p text, ie_somente_pagto_p text, ie_sistema_origem_p text, vl_frete_p bigint, vl_despesa_acessoria_p bigint, vl_desconto_p bigint, vl_despesa_doc_p bigint, vl_seguro_p bigint, vl_conv_moeda_p bigint, pr_multa_atraso_p bigint, pr_desconto_p bigint, pr_desc_pgto_antec_p bigint, pr_juros_negociado_p bigint, pr_desc_financeiro_p bigint, ds_pessoa_contato_p text, ds_observacao_p text, ds_obs_interna_p text, nr_documento_externo_p bigint, nr_seq_subgrupo_compra_p text, nr_seq_forma_pagto_p text, nr_seq_tipo_compra_p text, nr_seq_mod_compra_p text, nr_seq_motivo_urgente_p text, nr_seq_motivo_solic_p text, nr_seq_sistema_p text, cd_estab_transf_p text, cd_local_transf_p text, nr_sequencia_p INOUT bigint) FROM PUBLIC;

