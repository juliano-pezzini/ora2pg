-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE proj_duplicar_ficha (nr_seq_ficha_p bigint, nm_usuario_p text, nr_seq_ficha_nova_p INOUT bigint) AS $body$
DECLARE


nr_seq_ficha_w	bigint;

BEGIN
select 	nextval('proj_ficha_projeto_seq')
into STRICT	nr_seq_ficha_w
;

insert into proj_ficha_projeto(nr_sequencia,
				dt_atualizacao,
				nm_usuario,
				dt_atualizacao_nrec,
				nm_usuario_nrec,
				nr_seq_projeto,
				ds_target,
				ds_objetivo,
				ds_diferencial,
				ds_benef_clinico,
				ds_benef_financeiro,
				ds_benef_operacional,
				dt_liberacao,
				nm_usuario_liberacao,
				ds_requisito_necessario)
				(SELECT nr_seq_ficha_w,
					clock_timestamp(),
					nm_usuario_p,
					clock_timestamp(),
					nm_usuario_p,
					nr_seq_projeto,
					ds_target,
					ds_objetivo,
					ds_diferencial,
					ds_benef_clinico,
					ds_benef_financeiro,
					ds_benef_operacional,
					null,
					'',
					ds_requisito_necessario
				from	proj_ficha_projeto
				where	nr_sequencia = nr_seq_ficha_p);

nr_seq_ficha_nova_p := nr_seq_ficha_w;


commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE proj_duplicar_ficha (nr_seq_ficha_p bigint, nm_usuario_p text, nr_seq_ficha_nova_p INOUT bigint) FROM PUBLIC;

