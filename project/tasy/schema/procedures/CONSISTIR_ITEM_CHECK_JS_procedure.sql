-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE consistir_item_check_js ( nr_sequencia_p bigint, cd_pessoa_fisica_p text, nr_seq_proc_interno_p INOUT bigint, ie_exige_lado_p INOUT text, ie_exige_anestesia_p INOUT text, ie_sexo_exclusivo_p INOUT text, ie_exige_classif_p INOUT text, ie_tipo_item_p INOUT text, ds_msg_p INOUT text, ie_situacao_p INOUT text, ie_localiza_prof_p INOUT text, ie_exige_topografia_p INOUT text, nr_seq_proc_interno_adic_p INOUT bigint, ie_exi_topogr_proc_adic_p INOUT text, ds_proc_exame_p INOUT text) AS $body$
BEGIN

	select	max(nr_seq_proc_interno), max(ie_localiza_prof)
	into STRICT	nr_seq_proc_interno_p, ie_localiza_prof_p
	from	agenda_int_grupo_item
	where	nr_sequencia = nr_sequencia_p;
	
	select	max(nr_seq_proc_interno)
	into STRICT	nr_seq_proc_interno_adic_p
	from	ageint_ex_adic_grupo_item
	where	nr_seq_grupo_item = nr_sequencia_p;
	
	select  max(ds_proc_exame)
  	into STRICT    ds_proc_exame_p
  	from    proc_interno
  	where   nr_sequencia = nr_seq_proc_interno_adic_p;
	
	select	max(y.ie_tipo_agendamento)
	into STRICT	ie_tipo_item_p
	from	agenda_int_grupo_item x,
		agenda_int_grupo y
	where	x.nr_seq_grupo = y.nr_sequencia
	and	x.nr_Sequencia = nr_sequencia_p;
	
	select	max(ie_situacao) ie_situacao
	into STRICT	ie_situacao_p
	from	proc_interno
	where	nr_sequencia	= nr_seq_proc_interno_p;

	ie_exige_lado_p		:= obter_se_proc_exige_lado(nr_seq_proc_interno_p,null,null);
	ie_sexo_exclusivo_p	:= consistir_sexo_exclusivo_proc(cd_pessoa_fisica_p, nr_seq_proc_interno_p, null, null);
	ds_msg_p		:= obter_texto_tasy(92116, wheb_usuario_pck.get_nr_seq_idioma);
	ie_exige_classif_p	:= ageint_obter_se_exige_classif(nr_seq_proc_interno_p);
	ie_exige_anestesia_p	:= ageint_obter_se_exige_anest(nr_seq_proc_interno_p);
	ie_exige_topografia_p	:= obter_se_proc_exige_topografia(nr_seq_proc_interno_p);
	ie_exi_topogr_proc_adic_p := obter_se_proc_exige_topografia(nr_seq_proc_interno_adic_p);

commit;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE consistir_item_check_js ( nr_sequencia_p bigint, cd_pessoa_fisica_p text, nr_seq_proc_interno_p INOUT bigint, ie_exige_lado_p INOUT text, ie_exige_anestesia_p INOUT text, ie_sexo_exclusivo_p INOUT text, ie_exige_classif_p INOUT text, ie_tipo_item_p INOUT text, ds_msg_p INOUT text, ie_situacao_p INOUT text, ie_localiza_prof_p INOUT text, ie_exige_topografia_p INOUT text, nr_seq_proc_interno_adic_p INOUT bigint, ie_exi_topogr_proc_adic_p INOUT text, ds_proc_exame_p INOUT text) FROM PUBLIC;

