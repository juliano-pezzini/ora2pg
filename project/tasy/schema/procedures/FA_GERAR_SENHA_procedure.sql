-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE fa_gerar_senha ( nr_seq_pac_entrega_p bigint, nr_seq_fila_espera_p bigint, cd_estabelecimento_p bigint, nm_usuario_p text, nr_senha_p INOUT bigint) AS $body$
DECLARE

 
 
nr_senha_w			varchar(10);	
nr_seq_senha_w			bigint;				
			 

BEGIN 
 
SELECT * FROM gerar_senha_paciente(	nr_seq_fila_espera_p, cd_estabelecimento_p, nm_usuario_p, 'N', nr_senha_w, nr_seq_senha_w) INTO STRICT nr_senha_w, nr_seq_senha_w;
 
update	fa_paciente_entrega 
set	ds_senha		= nr_senha_w, 
	nr_seq_pac_senha_fila	= nr_seq_senha_w 
where	nr_sequencia		= nr_seq_pac_entrega_p;
 
commit;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE fa_gerar_senha ( nr_seq_pac_entrega_p bigint, nr_seq_fila_espera_p bigint, cd_estabelecimento_p bigint, nm_usuario_p text, nr_senha_p INOUT bigint) FROM PUBLIC;

