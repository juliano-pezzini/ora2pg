-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE atualizar_agenda_convidados ( nr_seq_agenda_p bigint, nm_usuario_p text) AS $body$
DECLARE

 
ds_agenda_w			varchar(100);
dt_agenda_w			timestamp;
nr_seq_tipo_w			bigint;
nr_minuto_duracao_w		bigint;
ds_observacao_w			varchar(2000);
ds_local_w			varchar(50);
dt_final_w			timestamp;
nr_seq_local_w			bigint;

expressao1_w	varchar(255) := obter_desc_expressao_idioma(774008, null, wheb_usuario_pck.get_nr_seq_idioma);--Houve alterações automáticas neste agendamento por conta de alterações realizadas no agendamento de 
							

BEGIN 
 
select	ds_agenda, 
	dt_agenda, 
	nr_seq_tipo, 
	nr_minuto_duracao, 
	ds_observacao, 
	ds_local, 
	dt_final, 
	nr_seq_local 
into STRICT	ds_agenda_w, 
	dt_agenda_w, 
	nr_seq_tipo_w, 
	nr_minuto_duracao_w, 
	ds_observacao_w, 
	ds_local_w, 
	dt_final_w, 
	nr_seq_local_w 
from	agenda_tasy 
where	nr_sequencia	=	nr_seq_agenda_p;
 
update	agenda_tasy 
set	ds_agenda		=	ds_agenda_w, 
	dt_agenda		=	dt_agenda_w, 
	nr_seq_tipo		=	nr_seq_tipo_w, 
	nr_minuto_duracao	=	nr_minuto_duracao_w, 
	ds_observacao		=	expressao1_w || ' ' || chr(13) || obter_dados_usuario(nm_usuario_p) || ds_observacao, 
	ds_local		=	ds_local_w, 
	dt_final		=	dt_final_w, 
	nr_seq_local		=	nr_seq_local_w 
where	nr_seq_agenda_convite	=	nr_seq_agenda_p;
 
commit;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualizar_agenda_convidados ( nr_seq_agenda_p bigint, nm_usuario_p text) FROM PUBLIC;

