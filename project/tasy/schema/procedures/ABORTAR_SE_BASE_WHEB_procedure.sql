-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE abortar_se_base_wheb () AS $body$
DECLARE

qt_registro_w 	bigint;
nm_user_w 	varchar(10);
ds_Sep_bv_w 	varchar(50);

BEGIN
ds_sep_bv_w := obter_separador_bv;

qt_registro_w := obter_valor_dinamico_bv('select 1 from estabelecimento where cd_cgc = :cd_cgc and cd_estabelecimento = :cd_estabelecimento and ie_situacao = :ie_situacao', 'cd_cgc=01950338000177'||ds_sep_bv_w||'cd_estabelecimento=1'||ds_sep_bv_w||'ie_situacao=A', qt_registro_w);
if ( qt_registro_w > 0 ) then
	select substr(user,1,4)
	into STRICT nm_user_w
	;
	if ( nm_user_w = 'TASY' ) then
		CALL Wheb_mensagem_pck.exibir_mensagem_abort(279333);
	end if;
end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE abortar_se_base_wheb () FROM PUBLIC;

