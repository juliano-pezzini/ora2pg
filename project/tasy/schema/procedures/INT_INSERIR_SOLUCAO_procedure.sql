-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE int_inserir_solucao (cd_intervalo_p text, cd_perfil_ativo_p bigint, cd_unidade_medida_p text, cd_unid_med_conc_p text, ds_horarios_p text, ds_justif_troca_disp_p text, ds_motivo_susp_p text, ds_orientacao_p text, ds_orientacao_enf_p text, ds_solucao_p text, dt_atualizacao_p timestamp, dt_extensao_p timestamp, dt_status_p timestamp, dt_suspensao_p timestamp, hr_prim_horario_p text, ie_acm_p text, ie_bomba_infusao_p text, ie_calc_aut_p text, ie_se_necessario_p text, ie_solucao_especial_p text, ie_solucao_pca_p text, ie_status_p text, ie_suspender_p text, ie_suspenso_p text, ie_tipo_dosagem_p text, ie_unid_vel_inf_p text, ie_urgencia_p text, ie_via_aplicacao_p text, nm_usuario_susp_p text, nr_etapas_p bigint, nr_prescricao_p bigint, nr_seq_solucao_p bigint, qt_dosagem_p bigint, qt_hora_fase_p bigint, qt_hora_infusao_p bigint, qt_solucao_total_p bigint, qt_tempo_aplicacao_p bigint, nm_usuario_p text, nr_sequencia_p INOUT bigint, ds_erro_p INOUT text) AS $body$
DECLARE


nr_sequencia_w		bigint;


BEGIN

begin

select	coalesce(max(nr_sequencia),0) + 1
into STRICT	nr_sequencia_w
from	prescr_material
where	nr_prescricao	= nr_prescricao_p;

insert into prescr_solucao(cd_intervalo,
			cd_perfil_ativo,
			cd_unidade_medida,
			cd_unid_med_conc,
			ds_horarios,
			ds_justif_troca_disp,
			ds_motivo_susp,
			ds_orientacao,
			ds_orientacao_enf,
			ds_solucao,
			dt_atualizacao,
			dt_extensao,
			dt_status,
			dt_suspensao,
			hr_prim_horario,
			ie_acm,
			ie_bomba_infusao,
			ie_calc_aut,
			ie_se_necessario,
			ie_solucao_especial,
			ie_solucao_pca,
			ie_status,
			ie_suspender,
			ie_suspenso,
			ie_tipo_dosagem,
			ie_unid_vel_inf,
			ie_urgencia,
			ie_via_aplicacao,
			nm_usuario_susp,
			nr_etapas,
			nr_prescricao,
			nr_seq_solucao,
			qt_dosagem,
			qt_hora_fase,
			qt_hora_infusao,
			qt_solucao_total,
			qt_tempo_aplicacao,
			nm_usuario)
			values (
			cd_intervalo_p,
			cd_perfil_ativo_p,
			cd_unidade_medida_p,
			cd_unid_med_conc_p,
			ds_horarios_p,
			ds_justif_troca_disp_p,
			ds_motivo_susp_p,
			ds_orientacao_p,
			ds_orientacao_enf_p,
			ds_solucao_p,
			dt_atualizacao_p,
			dt_extensao_p,
			dt_status_p,
			dt_suspensao_p,
			hr_prim_horario_p,
			ie_acm_p,
			ie_bomba_infusao_p,
			ie_calc_aut_p,
			ie_se_necessario_p,
			ie_solucao_especial_p,
			ie_solucao_pca_p,
			ie_status_p,
			ie_suspender_p,
			ie_suspenso_p,
			ie_tipo_dosagem_p,
			ie_unid_vel_inf_p,
			ie_urgencia_p,
			ie_via_aplicacao_p,
			nm_usuario_susp_p,
			nr_etapas_p,
			nr_prescricao_p,
			nr_seq_solucao_p,
			qt_dosagem_p,
			qt_hora_fase_p,
			qt_hora_infusao_p,
			qt_solucao_total_p,
			qt_tempo_aplicacao_p,
			nm_usuario_p);

commit;

nr_sequencia_p		:= nr_sequencia_w;

exception
when others then
	ds_erro_p	:= substr(SQLERRM,1,255);
end;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE int_inserir_solucao (cd_intervalo_p text, cd_perfil_ativo_p bigint, cd_unidade_medida_p text, cd_unid_med_conc_p text, ds_horarios_p text, ds_justif_troca_disp_p text, ds_motivo_susp_p text, ds_orientacao_p text, ds_orientacao_enf_p text, ds_solucao_p text, dt_atualizacao_p timestamp, dt_extensao_p timestamp, dt_status_p timestamp, dt_suspensao_p timestamp, hr_prim_horario_p text, ie_acm_p text, ie_bomba_infusao_p text, ie_calc_aut_p text, ie_se_necessario_p text, ie_solucao_especial_p text, ie_solucao_pca_p text, ie_status_p text, ie_suspender_p text, ie_suspenso_p text, ie_tipo_dosagem_p text, ie_unid_vel_inf_p text, ie_urgencia_p text, ie_via_aplicacao_p text, nm_usuario_susp_p text, nr_etapas_p bigint, nr_prescricao_p bigint, nr_seq_solucao_p bigint, qt_dosagem_p bigint, qt_hora_fase_p bigint, qt_hora_infusao_p bigint, qt_solucao_total_p bigint, qt_tempo_aplicacao_p bigint, nm_usuario_p text, nr_sequencia_p INOUT bigint, ds_erro_p INOUT text) FROM PUBLIC;

