-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE definir_tamanho_banda ( qt_altura_banda_p bigint, nr_seq_relatorio_dinamico_p bigint) AS $body$
DECLARE

  cd_relatorio_w           bigint;
  nr_sequencia_relatorio_w bigint;
  nr_tipo_banda_w          bigint;

BEGIN

  SELECT MAX(cd_relatorio),
    MAX(nr_seq_relatorio),
    MAX(nr_tipo_banda)
  INTO STRICT cd_relatorio_w,
    nr_sequencia_relatorio_w,
    nr_tipo_banda_w
  FROM relatorio_dinamico
  WHERE nr_sequencia = nr_seq_relatorio_dinamico_p;

  UPDATE relatorio_dinamico
  SET qt_altura_banda  = 		coalesce(qt_altura_banda_p,'500')
  WHERE cd_relatorio   = cd_relatorio_w
  AND nr_seq_relatorio = nr_sequencia_relatorio_w
  AND nr_tipo_banda    = nr_tipo_banda_w;
  COMMIT;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE definir_tamanho_banda ( qt_altura_banda_p bigint, nr_seq_relatorio_dinamico_p bigint) FROM PUBLIC;

