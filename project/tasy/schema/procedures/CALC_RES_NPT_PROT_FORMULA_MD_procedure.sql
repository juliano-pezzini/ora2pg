-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE calc_res_npt_prot_formula_md (qt_Kcal_Proteina_p bigint, qt_Kcal_Carboidrato_p bigint, qt_Kcal_Lipidio_p bigint, Qt_GKcal_Lipidio_p bigint, Qt_GKcal_Proteina_p bigint, qt_peso_p bigint, pr_Conc_Proteina_Solucao_p bigint, Qt_Volume_Diario_p bigint, Qt_Tempo_Aplic_p bigint default NULL, Qt_Kcal_Total_p INOUT bigint DEFAULT NULL, Pr_Lipidio_p INOUT bigint DEFAULT NULL, Pr_Proteina_p INOUT bigint DEFAULT NULL, Pr_Carboidrato_p INOUT bigint DEFAULT NULL, Qt_Kcal_Kg_p INOUT bigint DEFAULT NULL, Qt_Kcal_Proteico_p INOUT bigint DEFAULT NULL, Qt_Kcal_Nao_Proteico_p INOUT bigint DEFAULT NULL, Qt_Grama_Nitrogenio_p INOUT bigint DEFAULT NULL, Qt_Rel_Cal_Nit_p INOUT bigint DEFAULT NULL, Qt_Grama_Proteina_KgDia_p INOUT bigint DEFAULT NULL, Qt_Gotejo_Npt_p INOUT bigint  DEFAULT NULL) AS $body$
BEGIN
		Qt_Kcal_Total_p  := (coalesce(qt_Kcal_Proteina_p,0) + coalesce(qt_Kcal_Carboidrato_p,0) + coalesce(qt_Kcal_Lipidio_p,0));
		Pr_Lipidio_p     := (dividir_sem_round_md(Qt_GKcal_Lipidio_p,Qt_Kcal_Total_p) * 100);
		Pr_Proteina_p    := (dividir_sem_round_md(Qt_GKcal_Proteina_p,Qt_Kcal_Total_p) * 100);
		Pr_Carboidrato_p := ( 100 - (coalesce(Pr_Lipidio_p,0) + coalesce(Pr_Proteina_p,0)));
		
		Qt_Kcal_Kg_p           := dividir_sem_round_md(Qt_Kcal_Total_p,qt_peso_p);
		Qt_Kcal_Proteico_p     := (qt_Kcal_Proteina_p);
		Qt_Kcal_Nao_Proteico_p := (coalesce(qt_Kcal_Carboidrato_p,0) + coalesce(qt_Kcal_Lipidio_p,0));
		
		Qt_Grama_Nitrogenio_p := (pr_Conc_Proteina_Solucao_p * 0.16);
		
		Qt_Rel_Cal_Nit_p := dividir_sem_round_md(Qt_Kcal_Nao_Proteico_p,Qt_Grama_Nitrogenio_p);
		
		Qt_Grama_Proteina_KgDia_p := dividir_sem_round_md(pr_Conc_Proteina_Solucao_p,qt_peso_p);
		
		Qt_Gotejo_Npt_p := dividir_sem_round_md(Qt_Volume_Diario_p, coalesce(qt_tempo_aplic_p, 24));	

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE calc_res_npt_prot_formula_md (qt_Kcal_Proteina_p bigint, qt_Kcal_Carboidrato_p bigint, qt_Kcal_Lipidio_p bigint, Qt_GKcal_Lipidio_p bigint, Qt_GKcal_Proteina_p bigint, qt_peso_p bigint, pr_Conc_Proteina_Solucao_p bigint, Qt_Volume_Diario_p bigint, Qt_Tempo_Aplic_p bigint default NULL, Qt_Kcal_Total_p INOUT bigint DEFAULT NULL, Pr_Lipidio_p INOUT bigint DEFAULT NULL, Pr_Proteina_p INOUT bigint DEFAULT NULL, Pr_Carboidrato_p INOUT bigint DEFAULT NULL, Qt_Kcal_Kg_p INOUT bigint DEFAULT NULL, Qt_Kcal_Proteico_p INOUT bigint DEFAULT NULL, Qt_Kcal_Nao_Proteico_p INOUT bigint DEFAULT NULL, Qt_Grama_Nitrogenio_p INOUT bigint DEFAULT NULL, Qt_Rel_Cal_Nit_p INOUT bigint DEFAULT NULL, Qt_Grama_Proteina_KgDia_p INOUT bigint DEFAULT NULL, Qt_Gotejo_Npt_p INOUT bigint  DEFAULT NULL) FROM PUBLIC;

