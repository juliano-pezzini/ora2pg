-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE consistir_regra_inc_plantao ( nr_seq_tipo_p bigint, cd_medico_p text, qt_minuto_p bigint, nr_seq_regra_esp_p bigint, ie_acao_p INOUT text, ds_mensagem_p INOUT text) AS $body$
BEGIN

select	max(ie_acao),
	max(ds_mensagem)
into STRICT	ie_acao_p,
	ds_mensagem_p
from	regra_inclusao_plantao
where (qt_min_inicial > qt_minuto_p or qt_min_final < qt_minuto_p)
and	coalesce(nr_seq_tipo,nr_seq_tipo_p)		= nr_seq_tipo_p
and	coalesce(cd_pessoa_fisica,cd_medico_p)		= cd_medico_p
and	coalesce(nr_seq_regra_esp,nr_seq_regra_esp_p)	= nr_seq_regra_esp_p;

end	;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE consistir_regra_inc_plantao ( nr_seq_tipo_p bigint, cd_medico_p text, qt_minuto_p bigint, nr_seq_regra_esp_p bigint, ie_acao_p INOUT text, ds_mensagem_p INOUT text) FROM PUBLIC;

