-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_retorno_lote_prot ( nr_seq_lote_protocolo_p bigint, nr_seq_retorno_p bigint, nr_seq_protocolo_p bigint, nr_seq_prot_adic_p bigint, ie_liberar_repasse_p text, ie_analisada_p text, ie_restringe_data_p text, nr_convenio_p bigint, nm_usuario_p text, ie_gerar_com_retorno_p text ) AS $body$
DECLARE

                                         
ds_mensgem_w		varchar(4000);
nr_seq_protocolo_w	bigint;

c01 CURSOR FOR                                  
SELECT	nr_seq_protocolo                             
from	protocolo_convenio                             
where	nr_seq_lote_protocolo	= nr_seq_lote_protocolo_p;


BEGIN                                      
 
open c01;
loop                                       
fetch c01 into                                  
	nr_seq_protocolo_w;
EXIT WHEN NOT FOUND; /* apply on c01 */
                                         
	ds_mensgem_w                                 
				 := gerar_retorno_protocolo(                            
				nr_seq_retorno_p, nr_seq_protocolo_w, nr_seq_prot_adic_p, ie_liberar_repasse_p, ie_analisada_p, ie_restringe_data_p, nr_convenio_p, nm_usuario_p, ie_gerar_com_retorno_p, ds_mensgem_w                                 
				);
                                         
end loop;
close c01;
 
commit;
                                         
end	;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_retorno_lote_prot ( nr_seq_lote_protocolo_p bigint, nr_seq_retorno_p bigint, nr_seq_protocolo_p bigint, nr_seq_prot_adic_p bigint, ie_liberar_repasse_p text, ie_analisada_p text, ie_restringe_data_p text, nr_convenio_p bigint, nm_usuario_p text, ie_gerar_com_retorno_p text ) FROM PUBLIC;

