-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE int_inserir_recomendacao ( cd_intervalo_p text, cd_kit_p bigint, cd_perfil_ativo_p bigint, cd_recomendacao_p bigint, ds_cor_erro_p text, ds_horarios_p text, ds_motivo_susp_p text, ds_observacao_p text, ds_recomendacao_p text, dt_atualizacao_p timestamp, dt_extensao_p timestamp, dt_inicio_p timestamp, dt_suspensao_p timestamp, dt_suspensao_progr_p timestamp, hr_prim_horario_p text, ie_acm_p text, ie_alterar_hprario_p text, ie_auxiliar_p text, ie_ciente_p text, ie_destino_rec_p text, ie_encaminhar_p text, ie_erro_p bigint, ie_estendido_p text, ie_faose_p text, ie_fazer_p text, ie_horario_susp_p text, ie_orientar_p text, ie_se_necessario_p text, ie_supervisionar_p text, ie_suspensao_p text, ie_urgencia_p text, nm_usuario_susp_p text, nr_ocorrencia_p bigint, nr_prescricao_p bigint, nr_seq_anterior_p bigint, nr_seq_apres_p bigint, nr_seq_classif_p bigint, nr_seq_interf_farm_p bigint, nr_seq_interno_p bigint, nr_seq_motivo_susp_p bigint, nr_seq_ordem_adep_p bigint, nr_seq_topografia_p bigint, qt_dia_prim_hor_p bigint, qt_recomendacao_p bigint, nm_usuario_p text, nr_sequencia_p INOUT bigint, ds_erro_p INOUT text) AS $body$
DECLARE


nr_sequencia_w		bigint;


BEGIN

begin

select	coalesce(max(nr_sequencia),0) + 1
into STRICT	nr_sequencia_w
from	prescr_recomendacao
where	nr_prescricao	= nr_prescricao_p;

insert into prescr_recomendacao(
									cd_intervalo,
									cd_kit,
									cd_perfil_ativo,
									cd_recomendacao,
									ds_cor_erro,
									ds_horarios,
									ds_motivo_susp,
									ds_observacao,
									ds_recomendacao,
									dt_atualizacao,
									dt_extensao,
									dt_inicio,
									dt_suspensao,
									dt_suspensao_progr,
									hr_prim_horario,
									ie_acm,
									ie_alterar_horario,
									ie_auxiliar,
									ie_ciente,
									ie_destino_rec,
									ie_encaminhar,
									ie_erro,
									ie_estendido,
									ie_faose,
									ie_fazer,
									ie_horario_susp,
									ie_orientar,
									ie_se_necessario,
									ie_supervisionar,
									ie_suspenso,
									ie_urgencia,
									nm_usuario_susp,
									nr_ocorrencia,
									nr_prescricao,
									nr_seq_anterior,
									nr_seq_apres,
									nr_seq_classif,
									nr_seq_interf_farm,
									nr_seq_interno,
									nr_seq_motivo_susp,
									nr_seq_ordem_adep,
									nr_seq_topografia,
									qt_dia_prim_hor,
									qt_recomendacao,
									nm_usuario,
									nr_sequencia)
									values (
									cd_intervalo_p,
									cd_kit_p,
									cd_perfil_ativo_p,
									cd_recomendacao_p,
									ds_cor_erro_p,
									ds_horarios_p,
									ds_motivo_susp_p,
									ds_observacao_p,
									ds_recomendacao_p,
									dt_atualizacao_p,
									dt_extensao_p,
									dt_inicio_p,
									dt_suspensao_p,
									dt_suspensao_progr_p,
									hr_prim_horario_p,
									ie_acm_p,
									ie_alterar_hprario_p,
									ie_auxiliar_p,
									ie_ciente_p,
									ie_destino_rec_p,
									ie_encaminhar_p,
									ie_erro_p,
									ie_estendido_p,
									ie_faose_p,
									ie_fazer_p,
									ie_horario_susp_p,
									ie_orientar_p,
									ie_se_necessario_p,
									ie_supervisionar_p,
									ie_suspensao_p,
									ie_urgencia_p,
									nm_usuario_susp_p,
									nr_ocorrencia_p,
									nr_prescricao_p,
									nr_seq_anterior_p,
									nr_seq_apres_p,
									nr_seq_classif_p,
									nr_seq_interf_farm_p,
									nr_seq_interno_p,
									nr_seq_motivo_susp_p,
									nr_seq_ordem_adep_p,
									nr_seq_topografia_p,
									qt_dia_prim_hor_p,
									qt_recomendacao_p,
									nm_usuario_p,
									nr_sequencia_w);

commit;

nr_sequencia_p		:= nr_sequencia_w;

exception
when others then
	ds_erro_p	:= substr(SQLERRM,1,255);
end;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE int_inserir_recomendacao ( cd_intervalo_p text, cd_kit_p bigint, cd_perfil_ativo_p bigint, cd_recomendacao_p bigint, ds_cor_erro_p text, ds_horarios_p text, ds_motivo_susp_p text, ds_observacao_p text, ds_recomendacao_p text, dt_atualizacao_p timestamp, dt_extensao_p timestamp, dt_inicio_p timestamp, dt_suspensao_p timestamp, dt_suspensao_progr_p timestamp, hr_prim_horario_p text, ie_acm_p text, ie_alterar_hprario_p text, ie_auxiliar_p text, ie_ciente_p text, ie_destino_rec_p text, ie_encaminhar_p text, ie_erro_p bigint, ie_estendido_p text, ie_faose_p text, ie_fazer_p text, ie_horario_susp_p text, ie_orientar_p text, ie_se_necessario_p text, ie_supervisionar_p text, ie_suspensao_p text, ie_urgencia_p text, nm_usuario_susp_p text, nr_ocorrencia_p bigint, nr_prescricao_p bigint, nr_seq_anterior_p bigint, nr_seq_apres_p bigint, nr_seq_classif_p bigint, nr_seq_interf_farm_p bigint, nr_seq_interno_p bigint, nr_seq_motivo_susp_p bigint, nr_seq_ordem_adep_p bigint, nr_seq_topografia_p bigint, qt_dia_prim_hor_p bigint, qt_recomendacao_p bigint, nm_usuario_p text, nr_sequencia_p INOUT bigint, ds_erro_p INOUT text) FROM PUBLIC;

