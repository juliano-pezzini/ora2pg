-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE atualizar_info_fim_dialise ( qt_peso_pos_p bigint, qt_peso_ideal_p bigint, qt_peso_total_p bigint, qt_peso_cadeira_p bigint, ie_operacao_p text, dif_peso_ideal_atual_p INOUT text, qt_peso_pos1_p INOUT bigint) AS $body$
DECLARE


dif_peso_ideal_atual_w		real;
qt_peso_pos1_w			real;
					

BEGIN

if (ie_operacao_p = 'P') then
	dif_peso_ideal_atual_w := coalesce(qt_peso_pos_p,0) - coalesce(qt_peso_ideal_p,0);
elsif (ie_operacao_p = 'C') then
	qt_peso_pos1_w := coalesce(qt_peso_total_p,0) - coalesce(qt_peso_cadeira_p,0);
elsif (ie_operacao_p = 'I') then
	dif_peso_ideal_atual_w := coalesce(qt_peso_pos_p,0) - coalesce(qt_peso_ideal_p,0);
end if;

dif_peso_ideal_atual_p := to_char(dif_peso_ideal_atual_w, '90D99');
qt_peso_pos1_p := qt_peso_pos1_w;


end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualizar_info_fim_dialise ( qt_peso_pos_p bigint, qt_peso_ideal_p bigint, qt_peso_total_p bigint, qt_peso_cadeira_p bigint, ie_operacao_p text, dif_peso_ideal_atual_p INOUT text, qt_peso_pos1_p INOUT bigint) FROM PUBLIC;

