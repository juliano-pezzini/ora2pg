-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE importar_d301_segmento_cux (nr_seq_dataset_p bigint, ds_conteudo_cux_p text, nm_usuario_p text) AS $body$
DECLARE


  nr_seq_301_moeda_w d301_segmento_cux.nr_seq_301_moeda%type;


BEGIN

  if upper(substr(ds_conteudo_cux_p,1,3)) = 'CUX' then

    nr_seq_301_moeda_w := obter_seq_valor_301('C301_18_MOEDA','IE_MOEDA','EUR');

    insert into d301_segmento_cux(nm_usuario,
                                  nr_seq_301_moeda,
                                  nr_sequencia,
                                  dt_atualizacao,
                                  dt_atualizacao_nrec,
                                  nm_usuario_nrec,
                                  nr_seq_dataset,
                                  nr_seq_dataset_ret) values (nm_usuario_p,
                                                              nr_seq_301_moeda_w,
                                                              nextval('d301_segmento_cux_seq'),
                                                              clock_timestamp(),
                                                              clock_timestamp(),
                                                              nm_usuario_p,
                                                              null,
                                                              nr_seq_dataset_p);

  end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE importar_d301_segmento_cux (nr_seq_dataset_p bigint, ds_conteudo_cux_p text, nm_usuario_p text) FROM PUBLIC;

