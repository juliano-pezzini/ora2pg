-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_ajustar_base_pep ( nm_usuario_p text) AS $body$
DECLARE


dt_versao_atual_cliente_w 	timestamp;
qt_registro_w			bigint;
nr_seq_check_list_w		bigint;
nr_atendimento_w		bigint;
ds_separador_w			varchar(10);
nr_sequencia_w			bigint;
qt_reg_w			bigint;
qt_reg_ww			bigint;



C01 CURSOR FOR
	SELECT	nr_sequencia
	from	ATEND_CHECK_LIST;


C02 CURSOR FOR
	SELECT	*
	from	FUNCAO_PARAM_USUARIO
	where	cd_funcao	= 96
	and	nr_sequencia	in (42,43)
	order by nr_sequencia;


C03 CURSOR FOR
	SELECT	*
	from	FUNCAO_PARAM_PERFIL
	where	cd_funcao	= 96
	and	nr_sequencia	in (42,43)
	order by nr_sequencia;

c04 CURSOR FOR
	SELECT	*
	from	 FUNCAO_PARAMETRO
	where	cd_funcao	=  96
	and	nr_sequencia	in (42,43)
	order by nr_sequencia;

c05 CURSOR FOR
	SELECT	*
	from	pe_protocolo;

c02_w c02%rowtype;

c03_w c03%rowtype;

c04_w c04%rowtype;
c05_w c05%rowtype;

	procedure dropProcedure(nm_procedimento_p	text) is
	;
BEGIN
	select	count(*)
	into STRICT	qt_reg_w
	from	user_source
	where	name = trim(both upper(nm_procedimento_p));

	if (qt_reg_w	> 0) then
		begin





		CALL exec_sql_dinamico('Martini', 'drop procedure '||nm_procedimento_p );
		exception
		when others then
			null;
		end;

	end if;

	end;

begin
/*FAVOR COLOCAR OS NOVOS AJUSTES SEMPRE NO FINAL DA PROCEDURE.*/

/*AJUSTES DE BASE DO GRUPO ASSISTENCIAL PEP */

CALL abortar_se_base_wheb();

dt_versao_atual_cliente_w := coalesce(TO_DATE(TO_CHAR(obter_data_geracao_versao-1,'dd/mm/yyyy') ||' 23:59:59','dd/mm/yyyy hh24:mi:ss'),clock_timestamp() - interval '90 days');


if (dt_versao_atual_cliente_w < to_date('10/06/2014','dd/mm/yyyy')) then

	dropProcedure('CPOE_INSERT_MEDICAMENTO');
	dropProcedure('CPOE_INSERIR_RECOM_PRESCRICAO');
	dropProcedure('CPOE_INSERIR_DIETA_PRESCRICAO');
	dropProcedure('CPOE_INSERT_SOLUCOES');
	dropProcedure('CPOE_INSERIR_GAS_PRESCRICAO');
	dropProcedure('CPOE_INSERT_PRESCR_PROCED');

end if;

if (dt_versao_atual_cliente_w < to_date('26/06/2014','dd/mm/yyyy')) then

	dropProcedure('CPOE_GERAR_PRESCRICAO_REGISTRO');

end if;

if (dt_versao_atual_cliente_w < to_date('17/07/2014','dd/mm/yyyy')) then

	dropProcedure('CPOE_GERAR_MEDIC_PROTOCOLO');
	dropProcedure('CPOE_GERAR_PROC_EXAME_PROT');
	dropProcedure('CPOE_GERAR_SOLUCAO_PROTOCOLO');
	dropProcedure('CPOE_INSERT_PROT_MEDIC_REC');
	dropProcedure('CPOE_INSERT_PROT_GAS');

end if;


if (dt_versao_atual_cliente_w < to_date('23/07/2014','dd/mm/yyyy')) then
	dropProcedure('CPOE_INSERT_PROT_DIETA');
end if;

if (dt_versao_atual_cliente_w < to_date('21/07/2009','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Martini', 'alter table  prescr_recomendacao modify (DS_RECOMENDACAO varchar2(2000))');
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('31/05/2010','dd/mm/yyyy')) then
	begin
	begin
	CALL exec_sql_dinamico('Martini', ' update	AVAL_NUTRIC_SUBJETIVA set ie_mudanca_dieta = ''S'', IE_DIETA_HIPOCALORICA = ''S'' where ie_mudanca_dieta = ''H'' ');
	CALL exec_sql_dinamico('Martini', ' update	AVAL_NUTRIC_SUBJETIVA set ie_mudanca_dieta = ''S'', IE_DIETA_PASTOSA_HIPOCALORICA = ''S'' where ie_mudanca_dieta = ''P'' ');
	CALL exec_sql_dinamico('Martini', ' update	AVAL_NUTRIC_SUBJETIVA set ie_mudanca_dieta = ''S'', IE_DIET_LIQUIDA = ''S'' where ie_mudanca_dieta = ''L'' ');
	CALL exec_sql_dinamico('Martini', ' update	AVAL_NUTRIC_SUBJETIVA set ie_mudanca_dieta = ''S'', IE_JEJUM = ''S'' where ie_mudanca_dieta = ''J'' ');
	CALL exec_sql_dinamico('Martini', ' update	AVAL_NUTRIC_SUBJETIVA set ie_mudanca_dieta = ''S'', IE_MUDANCA_PERSISTENTE = ''S'' where ie_mudanca_dieta = ''T'' ');
	exception
		when others then
		null;
	end;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/06/2010','dd/mm/yyyy')) then
	SELECT	count(*)
	into STRICT	qt_registro_w
	FROM	USER_CONS_COLUMNS
	WHERE	CONSTRAINT_NAME = 'PEPLIAC_UK';
	begin
	if (qt_registro_w < 7) then
		CALL Exec_sql_Dinamico('Martini','ALTER TABLE PEP_LIB_ACESSO DROP CONSTRAINT PEPLIAC_UK');
		CALL Exec_sql_Dinamico('Martini','ALTER TABLE PEP_LIB_ACESSO ADD (  '||
		      			' CONSTRAINT PEPLIAC_UK Unique  (	'||
					'               CD_ESTABELECIMENTO,		'||
					'               NR_SEQ_PERFIL_PAC,		'||
					'               NR_SEQ_PERFIL_USUARIO,		'||
					'               IE_SITUACAO_PACIENTE,		'||
					'               IE_REGRA_SETOR,	'||
					'               IE_CONSISTE_EQUIPE,	'||
					'               NR_SEQ_ITEM_PRONT)		'||
					' USING INDEX   Tablespace TASY_INDEX)');
	end if;
	exception
		when others then
		null;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('25/06/2010','dd/mm/yyyy')) then
	begin
	qt_reg_w	:= 0;
	ds_separador_w	:= obter_Separador_bv;
	open C01;
	loop
	fetch C01 into
		nr_seq_check_list_w;
	EXIT WHEN NOT FOUND; /* apply on C01 */
		begin
		select	max(nr_atendimento)
		into STRICT	nr_atendimento_w
		from	atendimento_paciente
		where	NR_SEQ_CHECK_LIST	= nr_seq_check_list_w;

		if (nr_atendimento_w IS NOT NULL AND nr_atendimento_w::text <> '') then


			CALL Exec_sql_Dinamico_bv('Martini',	' 	update  ATEND_CHECK_LIST 	'||
							'	set	nr_atendimento	= :nr_atendimento '||
							'	where	nr_sequencia	= :nr_sequencia ',
							'nr_atendimento='||nr_atendimento_w||ds_separador_w||
							'nr_sequencia='||nr_seq_check_list_w||ds_separador_w);

		end if;

		qt_reg_w	:= qt_reg_w + 1;

		if (qt_reg_w	= 500) then
			commit;
			qt_reg_w	:= 0;
		end if;

		end;
	end loop;
	close C01;

	commit;
	exception
		when others then
		null;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/07/2010','dd/mm/yyyy')) then
	begin

	CALL Exec_sql_Dinamico('Martini', ' Drop Sequence macro_prontuario_seq ');

	CALL Exec_sql_Dinamico('Martini', ' Create Sequence macro_prontuario_seq  '||
				     '		Increment by 1     	'||
				     '	Start With 9000000		'||
				     '	MaxValue 9999999999			'||
				     '	Cycle 					'||
				     '	NoCache');

	end;
end if;



if (dt_versao_atual_cliente_w < to_date('15/07/2010','dd/mm/yyyy')) then
	begin


	open C02;
	loop
	fetch C02 into
		c02_w;
	EXIT WHEN NOT FOUND; /* apply on C02 */
		begin
		RAISE NOTICE '%', c02_w.NR_SEQUENCIA;
		INSERT INTO FUNCAO_PARAM_USUARIO(
		CD_FUNCAO, NR_SEQUENCIA, NM_USUARIO_PARAM,
		DT_ATUALIZACAO, NM_USUARIO, VL_PARAMETRO,
		DS_OBSERVACAO )
		 VALUES (
		281, CASE WHEN c02_w.NR_SEQUENCIA=42 THEN 727  ELSE 728 END , c02_w.NM_USUARIO_PARAM,
		clock_timestamp(), c02_w.NM_USUARIO, c02_w.VL_PARAMETRO,
		c02_w.DS_OBSERVACAO );


		end;
	end loop;
	close C02;


	open C03;
	loop
	fetch C03 into
		c03_w;
	EXIT WHEN NOT FOUND; /* apply on C03 */
		begin
		INSERT INTO FUNCAO_PARAM_PERFIL(
		CD_FUNCAO, NR_SEQUENCIA, CD_PERFIL,
		DT_ATUALIZACAO, NM_USUARIO, VL_PARAMETRO,
		DS_OBSERVACAO )
		 VALUES ( 281, CASE WHEN c03_w.NR_SEQUENCIA=42 THEN 727  ELSE 728 END , c03_w.CD_PERFIL,
		clock_timestamp(), c03_w.NM_USUARIO, c03_w.VL_PARAMETRO,
		c03_w.DS_OBSERVACAO );


		end;
	end loop;
	close C03;

	open C04;
	loop
	fetch C04 into
		c04_w;
	EXIT WHEN NOT FOUND; /* apply on C04 */
		begin
		update	funcao_parametro
		set	vl_parametro	= c04_w.vl_parametro
		where	cd_funcao	= 281
		and	nr_sequencia	= CASE WHEN c04_w.NR_SEQUENCIA=42 THEN 727  ELSE 728 END;
		end;
	end loop;
	close C04;
	exception
		when others then
		null;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('11/08/2010','dd/mm/yyyy')) then
	begin
	CALL Exec_sql_Dinamico('Edilson','DROP TABLE CONTRATO_TIPO_CHECHUP_PF');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('20/09/2010','dd/mm/yyyy')) then
	begin
	ds_separador_w	:= obter_Separador_bv;
	open C05;
	loop
	fetch C05 into
		c05_w;
	EXIT WHEN NOT FOUND; /* apply on C05 */
		begin


		nr_sequencia_w	:=  Obter_select_concatenado_bv('select  pe_protocolo_subtipo_seq.nextval from dual','',';');


		CALL Exec_sql_Dinamico_bv('Martini',' insert into pe_protocolo_subtipo (	nr_sequencia, 	'||
										'	dt_atualizacao,	'||
										'	nm_usuario,	'||
										'	dt_atualizacao_nrec,'||
										'	nm_usuario_nrec, '||
										'	DS_SUBTIPO,	 '||
										'	nr_seq_protocolo,'||
										'	ie_situacao)  '||
								'	values	(	:nr_sequencia	,'||
										'	sysdate,	 '||
										'	:nm_usuario,	 '||
										'	sysdate,'||
										'	:nm_usuario,	'||
										'	:ds_subtipo,'	||
										'	:nr_seq_protocolo,'||
										'	:ie_situacao)',
										'nr_sequencia='||nr_sequencia_w||ds_separador_w||
										'nm_usuario='||c05_w.nm_usuario||ds_separador_w||
										'ds_subtipo='||c05_w.DS_PROTOCOLO||ds_separador_w||
										'nr_seq_protocolo='||c05_w.nr_sequencia||ds_separador_w||
										'ie_situacao=A'||ds_separador_w);


		CALL Exec_sql_Dinamico_bv('Martini',' update pe_protocolo_proc '||
						'set NR_SEQ_SUBTIPO = :NR_SEQ_SUBTIPO '||
						'where nr_seq_protocolo = :nr_seq_protocolo ',
						'nr_seq_protocolo='||c05_w.nr_sequencia||ds_separador_w||
						'NR_SEQ_SUBTIPO='||nr_sequencia_w||ds_separador_w);

		end;
	end loop;
	close C05;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('27/09/2010','dd/mm/yyyy')) then
	begin

	CALL Exec_sql_Dinamico('Martini','	update	atendimento_gravidez	'||
					'	set	cd_pessoa_fisica	= obter_pessoa_Atendimento(nr_atendimento,''C''	)	'||
					'	where	cd_pessoa_fisica is null');

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/10/2010','dd/mm/yyyy')) then
	begin

	CALL Exec_sql_Dinamico('Martini','	update	PACIENTE_JUSTIFICATIVA	'||
					'	set	cd_pessoa_fisica	= obter_pessoa_Atendimento(nr_atendimento,''C''	)	'||
					'	where	cd_pessoa_fisica is null');

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('28/09/2010','dd/mm/yyyy')) then
	begin
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PA_SISTOLICA'' where nr_sequencia = 1');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PA_DIASTOLICA'' where nr_sequencia = 2');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_FREQ_RESP'' where nr_sequencia = 3');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_TEMP'' where nr_sequencia = 4');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_SATURACAO_O2'' where nr_sequencia = 6');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_GLICEMIA_CAPILAR'' where nr_sequencia = 7');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PAM'' where nr_sequencia = 8');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_FREQ_CARDIACA'' where nr_sequencia = 9');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_ESCALA_DOR'' where nr_sequencia = 10');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_BCF'' where nr_sequencia = 11');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PESO'' where nr_sequencia = 12');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_ALTURA_CM'' where nr_sequencia = 13');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_IMC'' where nr_sequencia = 14');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_SUPERF_CORPORIA'' where nr_sequencia = 15');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PVC_H2O'' where nr_sequencia = 16');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PVC'' where nr_sequencia = 17');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PAE'' where nr_sequencia = 18');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PRESSAO_INTRA_CRANIO'' where nr_sequencia = 19');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PRESSAO_INTRA_ABD'' where nr_sequencia = 20');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_TEMP_INCUBADORA'' where nr_sequencia = 21');
	CALL Exec_sql_Dinamico('Martini','update sinal_vital set nm_atributo = ''QT_PERIMETRO_CEFALICO'' where nr_sequencia = 22');
	exception
		when others then
		null;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('30/09/2010','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('Edilson','alter table NASCIMENTO_EF_ALTA drop column DS_OBSERVACAO_PELE');
end if;

if (dt_versao_atual_cliente_w < to_date('08/11/2010','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('Martini','update ATENDIMENTO_ALTA set dt_registro = dt_atualizacao where dt_registro is null');
end if;

if (dt_versao_atual_cliente_w < to_date('08/11/2010','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('Martini','update PARECER_MEDICO_REQ set ie_tipo_parecer = ''P'' where ((CD_ESPECIALIDADE_PROF is not null) or (CD_ESPECIALIDADE_DEST_PROF is not null))');
end if;

if (dt_versao_atual_cliente_w < to_date('07/01/2011','dd/mm/yyyy')) then
	begin
	CALL Exec_sql_Dinamico('Martini','	update  CHECKUP_DADO_ESTAT a				' ||
				    '	set cd_paciente = (	select x.cd_pessoa_fisica 	' ||
				    '			from	atendimento_paciente x    	' ||
				    '			where	x.nr_atendimento = a.nr_atendimento) '||
				   '	where cd_paciente is null');

	exception
	when others then
		null;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('10/01/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name		= 'CHECKUP_COMUNICACAO'
	and	column_name		= 'DS_MENSAGEM_PADRAO'
	and	upper(data_type)	= 'LONG';
	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table CHECKUP_COMUNICACAO add DS_MENSAGEM_PADRAO_long long');
		CALL Exec_Sql_Dinamico('Martini','update CHECKUP_COMUNICACAO set DS_MENSAGEM_PADRAO_long = DS_MENSAGEM_PADRAO');
		CALL Exec_Sql_Dinamico('Martini','alter table CHECKUP_COMUNICACAO drop column DS_MENSAGEM_PADRAO');
		--Exec_Sql_Dinamico('Martini','alter table CHECKUP_COMUNICACAO rename column DS_MENSAGEM_PADRAO to DS_MENSAGEM_PADRAO_OLD');
		CALL Exec_Sql_Dinamico('Martini','alter table CHECKUP_COMUNICACAO rename column DS_MENSAGEM_PADRAO_long to DS_MENSAGEM_PADRAO');

	end if;
	exception
		when others then
		null;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('24/01/2011','dd/mm/yyyy')) then

	select count(*)
	into STRICT	qt_registro_w
	from 	user_objects
	where OBJECT_NAME = 'REVISAR_ALERGIA_HIST_SAUDE';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('jdalponte','drop procedure REVISAR_ALERGIA_HIST_SAUDE'
);
	end if;

	select count(*)
	into STRICT	qt_registro_w
	from 	user_objects
	where OBJECT_NAME = 'REVISAR_MEDIC_USO_HIST_SAUDE';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('jdalponte','drop procedure REVISAR_MEDIC_USO_HIST_SAUDE'
);
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('07/01/2011','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name		= 'ATENDIMENTO_BOLETIM'
	and	column_name		= 'DS_BOLETIM_OLD';
	if (qt_registro_w = 0) then
		CALL Exec_sql_Dinamico('Edilson','alter table ATENDIMENTO_BOLETIM drop column DS_BOLETIM_OLD');
	end if;
end if;


if (dt_versao_atual_cliente_w < to_date('25/03/2011','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Martini','update atendimento_sinal_vital set cd_escala_dor = ''PD'' where cd_escala_dor = ''ADDA'' ');
	CALL Exec_sql_Dinamico('Martini','update ESCALA_DOR_PERFIL set cd_escala_dor = ''PD'' where cd_escala_dor = ''ADDA'' ');

end if;

if (dt_versao_atual_cliente_w < to_date('06/04/2011','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Martini','update ANAMNESE_ONCOLOGIA set cd_pessoa_fisica	= obter_pessoa_atendimento(nr_atendimento,''C'') where nr_Atendimento is not null and cd_pessoa_fisica is null');


end if;
/*
if	(dt_versao_atual_cliente_w < to_date('07/04/2011','dd/mm/yyyy')) then

	Exec_sql_Dinamico('Martini','update ANAMNESE_PACIENTE set cd_pessoa_fisica	= obter_pessoa_atendimento(nr_atendimento,''C'') where nr_Atendimento is not null and cd_pessoa_fisica is null');


end if;
*/
if (dt_versao_atual_cliente_w < to_date('08/04/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'FA_RECEITA_FARMACIA_ITEM'
	and		column_name			= 'DS_TEXTO_RECEITA'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table FA_RECEITA_FARMACIA_ITEM add DS_TEXTO_RECEITA_long long');
		CALL Exec_Sql_Dinamico('Martini','update FA_RECEITA_FARMACIA_ITEM set DS_TEXTO_RECEITA_long = DS_TEXTO_RECEITA');
		CALL Exec_Sql_Dinamico('Martini','alter table FA_RECEITA_FARMACIA_ITEM drop column DS_TEXTO_RECEITA');
		CALL Exec_Sql_Dinamico('Martini','alter table FA_RECEITA_FARMACIA_ITEM rename column DS_TEXTO_RECEITA_long to DS_TEXTO_RECEITA');
	end if;
	exception
		when others then
		null;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('13/04/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'PROTOCOLO_CONSULTA'
	and		column_name			= 'DS_CONSULTA'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_CONSULTA add DS_CONSULTA_long long');
		CALL Exec_Sql_Dinamico('Martini','update PROTOCOLO_CONSULTA set DS_CONSULTA_long = DS_CONSULTA');
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_CONSULTA drop column DS_CONSULTA');
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_CONSULTA rename column DS_CONSULTA_long to DS_CONSULTA');
	end if;



	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'PROTOCOLO_EVOLUCAO'
	and		column_name			= 'DS_EVOLUCAO'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_EVOLUCAO add DS_EVOLUCAO_long long');
		CALL Exec_Sql_Dinamico('Martini','update PROTOCOLO_EVOLUCAO set DS_EVOLUCAO_long = DS_EVOLUCAO');
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_EVOLUCAO drop column DS_EVOLUCAO');
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_EVOLUCAO rename column DS_EVOLUCAO_long to DS_EVOLUCAO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'PROTOCOLO_GRUPO_DESCRICAO'
	and		column_name			= 'DS_GRUPO_FORMATADO'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_GRUPO_DESCRICAO add DS_GRUPO_FORMATADO_long long');
		CALL Exec_Sql_Dinamico('Martini','update PROTOCOLO_GRUPO_DESCRICAO set DS_GRUPO_FORMATADO_long = DS_GRUPO_FORMATADO');
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_GRUPO_DESCRICAO drop column DS_GRUPO_FORMATADO');
		CALL Exec_Sql_Dinamico('Martini','alter table PROTOCOLO_GRUPO_DESCRICAO rename column DS_GRUPO_FORMATADO_long to DS_GRUPO_FORMATADO');
	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'CHECKUP_HIST'
	and		column_name			= 'DS_HISTORICO'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table CHECKUP_HIST add DS_HISTORICO_long long');
		CALL Exec_Sql_Dinamico('Martini','update CHECKUP_HIST set DS_HISTORICO_long = DS_HISTORICO');
		CALL Exec_Sql_Dinamico('Martini','alter table CHECKUP_HIST drop column DS_HISTORICO');
		CALL Exec_Sql_Dinamico('Martini','alter table CHECKUP_HIST rename column DS_HISTORICO_long to DS_HISTORICO');
	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'CUR_CURATIVO_ORIENTACAO'
	and		column_name			= 'DS_ORIENTACAO'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table CUR_CURATIVO_ORIENTACAO add DS_ORIENTACAO_long long');
		CALL Exec_Sql_Dinamico('Martini','update CUR_CURATIVO_ORIENTACAO set DS_ORIENTACAO_long = DS_ORIENTACAO');
		CALL Exec_Sql_Dinamico('Martini','alter table CUR_CURATIVO_ORIENTACAO drop column DS_ORIENTACAO');
		CALL Exec_Sql_Dinamico('Martini','alter table CUR_CURATIVO_ORIENTACAO rename column DS_ORIENTACAO_long to DS_ORIENTACAO');
	end if;



	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'CUR_EVOLUCAO'
	and		column_name			= 'DS_EVOLUCAO'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table CUR_EVOLUCAO add DS_EVOLUCAO_long long');
		CALL Exec_Sql_Dinamico('Martini','update CUR_EVOLUCAO set DS_EVOLUCAO_long = DS_EVOLUCAO');
		CALL Exec_Sql_Dinamico('Martini','alter table CUR_EVOLUCAO drop column DS_EVOLUCAO');
		CALL Exec_Sql_Dinamico('Martini','alter table CUR_EVOLUCAO rename column DS_EVOLUCAO_long to DS_EVOLUCAO');
	end if;

	exception
		when others then
		null;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('19/05/2011','dd/mm/yyyy')) then
	begin

	qt_registro_w := Obter_valor_Dinamico('select	count(*) from	diagnostico_status', qt_registro_w);

	if (qt_registro_w	= 0) then
		CALL Exec_sql_Dinamico('TASY','insert into diagnostico_status(	IE_STATUS, '||
					'					DS_STATUS, '||
					'					dt_atualizacao,	    '||
					'					nm_usuario,	    '||
					'					ie_situacao)	    '||
					' select		vl_dominio,			    '||
					'		substr(ds_valor_dominio,1,100),			    '||
					'		dt_atualizacao,				    '||
					'		nm_usuario,				    '||
					'		ie_situacao				    '||
					'from		valor_dominio				    '||
					'where		cd_dominio	= 1332			    ');
	end if;
	exception
		when others then
		null;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('23/05/2011','dd/mm/yyyy')) then
	BEGIN

	qt_registro_w := Obter_valor_Dinamico('select	count(*) from	NASCIMENTO_AMAMENTACAO', qt_registro_w);
	if (qt_registro_w	= 0) then
		CALL Exec_sql_Dinamico('TASY','insert into NASCIMENTO_AMAMENTACAO (	nr_sequencia, 		'||
				'		dt_atualizacao,		'||
				'		nm_usuario,		'||
				'		dt_atualizacao_nrec,	'||
				'		nm_usuario_nrec,	'||
				'		nr_atendimento,		'||
				'		nr_seq_nascimento,	'||
				'		cd_profissional,	'||
				'		dt_registro,		'||
				'		ds_cirurgia_mama,	'||
				'		ie_primeira_mamada,	'||
				'		ie_mamilos,		'||
				'		ds_amamentacao_ant,	'||
				'		ie_amamentacao_ant,	'||
				'		ie_fissura_mamaria,	'||
				'		ie_cirurgia_mama,	'||
				'		ie_amam_contato_pele,	'||
				'		ie_amam_colostro,	'||
				'		ie_amam_mat_exclusivo,	'||
				'		ie_amam_tempo_succao,	'||
				'		ie_amam_hgt_rn,		'||
				'		qt_amam_hgt_rn,		'||
				'		ie_interc_amamentacao,	'||
				'		ds_interc_amamentacao,	'||
				'		ie_situacao)'||
				' select	NASCIMENTO_AMAMENTACAO_seq.nextval,'||
				'		dt_atualizacao,		'||
				'		nm_usuario,		'||
				'		dt_atualizacao,		'||
				'		nm_usuario,		'||
				'		nr_atendimento,		'||
				'		nr_sequencia,		'||
				'		null,			'||
				'		dt_atualizacao,		'||
				'		ds_cirurgia_mama,	'||
				'		ie_primeira_mamada,	'||
				'		ie_mamilos,		'||
				'		ds_amamentacao_ant,	'||
				'		ie_amamentacao_ant,	'||
				'		ie_fissura_mamaria,	'||
				'		ie_cirurgia_mama,	'||
				'		ie_amam_contato_pele,	'||
				'		ie_amam_colostro,	'||
				'		ie_amam_mat_exclusivo,	'||
				'		ie_amam_tempo_succao,	'||
				'		ie_amam_hgt_rn,		'||
				'		qt_amam_hgt_rn,		'||
				'		ie_interc_amamentacao,	'||
				'		ds_interc_amamentacao,	'||
				'		''A''	'||
				' from		nascimento ');

	end if;
	exception
		when others then
		null;
	end;

end if;

if (dt_versao_atual_cliente_w < to_date('06/07/2011','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Martini','update PRE_NATAL set NM_OBSTETRA	= obter_nome_pf(cd_pediatra) where NM_OBSTETRA is null');


end if;

if (dt_versao_atual_cliente_w < to_date('07/07/2011','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'CONDESF_UK';
	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Martini', 'alter table CONSISTENCIA_DESFECHO drop constraint CONDESF_UK');
	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'CONDESF_UK';
	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Martini', 'drop index CONDESF_UK');
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('24/08/2011','dd/mm/yyyy')) then
	begin
	insert into TASY_PADRAO_COR_PERFIL(	nr_sequencia,
				cd_estabelecimento,
				cd_perfil,
				nr_seq_padrao,
				dt_atualizacao,
				nm_usuario,
				ds_cor_fundo,
				ds_cor_fonte,
				ds_cor_selecao,
				dt_atualizacao_nrec,
				nm_usuario_nrec)
	SELECT	nextval('tasy_padrao_cor_perfil_seq'),
			cd_estabelecimento,
			cd_perfil,
			3306,
			dt_atualizacao,
			nm_usuario,
			ds_cor_fundo,
			ds_cor_fonte,
			ds_cor_selecao,
			dt_atualizacao_nrec,
			nm_usuario_nrec
	from	TASY_PADRAO_COR_PERFIL
	where	nr_seq_padrao = 967;


	insert into TASY_PADRAO_COR_PERFIL(	nr_sequencia,
				cd_estabelecimento,
				cd_perfil,
				nr_seq_padrao,
				dt_atualizacao,
				nm_usuario,
				ds_cor_fundo,
				ds_cor_fonte,
				ds_cor_selecao,
				dt_atualizacao_nrec,
				nm_usuario_nrec)
	SELECT	nextval('tasy_padrao_cor_perfil_seq'),
			cd_estabelecimento,
			cd_perfil,
			3307,
			dt_atualizacao,
			nm_usuario,
			ds_cor_fundo,
			ds_cor_fonte,
			ds_cor_selecao,
			dt_atualizacao_nrec,
			nm_usuario_nrec
	from	TASY_PADRAO_COR_PERFIL
	where	nr_seq_padrao = 969;



	exception
	when others then
		null;
	end;

end if;

if (dt_versao_atual_cliente_w < to_date('25/08/2011','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Martini','update PEP_REGRA_INFORMACAO set IE_REGRA_ALERTA	= ''A'' where IE_REGRA_ALERTA is null');


end if;


if (dt_versao_atual_cliente_w < to_date('29/08/2011','dd/mm/yyyy')) then
	begin

	CALL Exec_sql_Dinamico('Martini','	update	PEP_ORIENTACAO_GERAL	'||
					'	set	cd_pessoa_fisica	= obter_pessoa_Atendimento(nr_atendimento,''C''	)	'||
					'	where	cd_pessoa_fisica is null');

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/09/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name		= 'PRESCR_DIETA_HOR'
	and	column_name		= 'CD_DIETA';

	if (qt_registro_w	> 0) then
		CALL exec_sql_dinamico('Martini','alter table PRESCR_DIETA_HOR drop column CD_DIETA');
	end if;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('29/09/2011','dd/mm/yyyy')) then
	begin

	CALL Exec_sql_Dinamico('Martini','	update	ATEND_NIH	'||
					'	set	cd_paciente	= obter_pessoa_Atendimento(nr_atendimento,''C''	)	'||
					'	where	cd_paciente is null');

	CALL Exec_sql_Dinamico('Martini','	update	atend_escala_indice	'||
					'	set	cd_paciente	= obter_pessoa_Atendimento(nr_atendimento,''C''	)	'||
					'	where	cd_paciente is null');

	CALL Exec_sql_Dinamico('Martini','	update	ESCALA_CINCINNATI	'||
					'	set	cd_paciente	= obter_pessoa_Atendimento(nr_atendimento,''C''	)	'||
					'	where	cd_paciente is null');

	end;

end if;


if (dt_versao_atual_cliente_w < to_date('29/09/2011','dd/mm/yyyy')) then
	begin

	CALL Exec_sql_Dinamico('Martini','	update	PROTOCOLO_MEDIC_MATERIAL	'||
					'	set	NR_SEQ_INTERNO	= PROTOCOLO_MEDIC_MATERIAL_seq.nextval	'||
					'	where	NR_SEQ_INTERNO is null');



	end;

end if;



if (dt_versao_atual_cliente_w < to_date('05/11/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_reg_w
	from	user_constraints
	where	constraint_name = 'MEDAVPA_ATEPACU_FK';


	if (qt_reg_w	> 0) then

		CALL Exec_sql_Dinamico('Martini','	Alter Table MED_AVALIACAO_PACIENTE drop constraint MEDAVPA_ATEPACU_FK  ');

	end if;


	end;

end if;


if (dt_versao_atual_cliente_w < to_date('14/12/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_reg_w
	from	user_objects
	where	object_name = 'EHR_REGISTRO_PEND_ATUAL';


	if (qt_reg_w	> 0) then

		CALL Exec_sql_Dinamico('Martini','	drop trigger  EHR_REGISTRO_PEND_ATUAL ');

	end if;


	end;

end if;


if (dt_versao_atual_cliente_w < to_date('26/01/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'TIPO_ATESTADO'
	and		column_name			= 'DS_ATESTADO'
	and		upper(data_type)	= 'LONG';

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('Martini','alter table TIPO_ATESTADO add DS_ATESTADO_long long');
		CALL Exec_Sql_Dinamico('Martini','update TIPO_ATESTADO set DS_ATESTADO_long = DS_ATESTADO');
		CALL Exec_Sql_Dinamico('Martini','alter table TIPO_ATESTADO rename column DS_ATESTADO to DS_ATESTADO_OLD');
		CALL Exec_Sql_Dinamico('Martini','alter table TIPO_ATESTADO rename column DS_ATESTADO_LONG to DS_ATESTADO');

	end if;
	exception
		when others then
		null;
	end;


end if;
if (dt_versao_atual_cliente_w < to_date('12/03/2012','dd/mm/yyyy')) then
	begin
	CALL baca_acerto_enf_faose();
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('28/03/2012','dd/mm/yyyy')) then
	begin

	CALL Exec_Sql_Dinamico('jdalponte','update pre_parto set ie_apresentacao_fetal = ''CE'' where ie_apresentacao_fetal = ''C'' ');
	CALL Exec_Sql_Dinamico('jdalponte','update pre_parto set ie_apresentacao_fetal = ''PE'' where ie_apresentacao_fetal = ''P'' ');
	CALL Exec_Sql_Dinamico('jdalponte','update pre_parto set ie_apresentacao_fetal = null, ie_situacao_fetal = ''T'' where ie_apresentacao_fetal = ''T'' ');

	exception
		when others then
		null;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('04/04/2012','dd/mm/yyyy')) then
	begin

	update	MACRO_PRONTUARIO
	set	NM_MACRO =  	'@Artig_pronome'
	where	lower(nm_macro)	= lower('@Artigo_pronome');
	commit;

	exception
		when others then
		null;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('09/05/2012','dd/mm/yyyy')) then
	begin

	CALL Exec_Sql_Dinamico('Martini','update TRIAGEM_PRONTO_ATEND set CD_SENHA_GERADA = obter_dados_senha(NR_SEQ_PAC_FILA,''CD'') where NR_SEQ_PAC_FILA is not null');


	exception
		when others then
		null;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('11/05/2012','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PACPRMH_PACATEN_FK';
	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Martini', 'alter table PACIENTE_PROT_MEDIC_HIST drop constraint PACPRMH_PACATEN_FK');
	end if;
end if;


if (dt_versao_atual_cliente_w < to_date('17/05/2012','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name   	= 'TRIAGEM_PRONTO_ATEND'
	and		COLUMN_NAME		= 'CD_SENHA_GERADA'
	and		DATA_TYPE		='NUMBER';
	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Martini', 'alter table TRIAGEM_PRONTO_ATEND add CD_SENHA_GERADA_novo varchar2(15) ');
		CALL Exec_sql_Dinamico('Martini', 	' update	triagem_pronto_atend '||
										'	set		cd_senha_gerada_novo	= cd_senha_gerada  '||
										'	where	cd_senha_gerada is not null ');

		CALL Exec_sql_Dinamico('Martini', ' alter table TRIAGEM_PRONTO_ATEND rename column CD_SENHA_GERADA to CD_SENHA_GERADA_old ');
		CALL Exec_sql_Dinamico('Martini', ' alter table TRIAGEM_PRONTO_ATEND rename  column CD_SENHA_GERADA_novo to CD_SENHA_GERADA ');

	end if;
end if;


if (dt_versao_atual_cliente_w < to_date('22/05/2012','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from 	user_objects
	where OBJECT_NAME = 'GERAR_ADM_HORARIO_ESP';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Edilson','drop procedure GERAR_ADM_HORARIO_ESP'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from 	user_objects
	where OBJECT_NAME = 'GERAR_HORARIOS_GESTAO_PRESCR';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Edilson','drop procedure GERAR_HORARIOS_GESTAO_PRESCR'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from 	user_objects
	where OBJECT_NAME = 'GERAR_RESUMO_OFTALMO';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Edilson','drop procedure GERAR_RESUMO_OFTALMO'
);
	end if;
end if;


if (dt_versao_atual_cliente_w < to_date('23/05/2012','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'OCORREN_REGTUGP_FK';

	if (qt_registro_w	> 0) then
		CALL Exec_sql_Dinamico('Martini',' alter table OCORRENCIA drop constraint OCORREN_REGTUGP_FK ');
	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	INDEX_NAME      = 'OCORREN_REGTUGP_FK_I';

	if (qt_registro_w	> 0) then
		CALL Exec_sql_Dinamico('Martini',' drop index OCORREN_REGTUGP_FK_I ');
	end if;



	qt_registro_w := Obter_valor_Dinamico('SELECT count(*) from regra_turno_oc', qt_registro_w);

	if (qt_registro_w	= 0) then

		CALL Exec_sql_Dinamico('Martini','	insert into regra_turno_oc '||
									'	(	nr_sequencia,			'||
									'		DT_ATUALIZACAO,			'||
									'		NM_USUARIO,				'||
									'		DT_ATUALIZACAO_NREC,	'||
									'		NM_USUARIO_NREC,		'||
									'		CD_ESTABELECIMENTO,		'||
									'		CD_SETOR_ATENDIMENTO,	'||
									'		CD_TURNO,				'||
									'		DT_FINAL,				'||
									'		DT_INICIAL)				'||
									' select	nr_sequencia,			'||
									'		DT_ATUALIZACAO,			'||
									'		NM_USUARIO,				'||
									'		DT_ATUALIZACAO_NREC,	'||
									'		NM_USUARIO_NREC,		'||
									'		CD_ESTABELECIMENTO,		'||
									'		CD_SETOR_ATENDIMENTO,	'||
									'		CD_TURNO,				'||
									'		DT_FINAL,				'||
									'		DT_INICIAL				'||
									' from	regra_turno_gp			');

	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name	= 'OCORREN_RETUROC_FK';

	if (qt_registro_w	= 0) then
		CALL Exec_sql_Dinamico('Martini','	Alter Table OCORRENCIA add (  '||
									'	Constraint OCORREN_RETUROC_FK Foreign Key ( '||
									'	NR_SEQ_TURNO '||
									'	) References REGRA_TURNO_OC ( '||
									'	NR_SEQUENCIA))	');

	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name	= 'OCORREN_RETUROC_FK_I';

	if (qt_registro_w	= 0) then
		CALL Exec_sql_Dinamico('Martini',' Create Index OCORREN_RETUROC_FK_I on OCORRENCIA(NR_SEQ_TURNO) ');
	end if;


end if;

if (dt_versao_atual_cliente_w < to_date('04/06/2012','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('jdalponte', 	'update macro_prontuario ' ||
					'set nm_atributo = ''NR_SEQ_CONSENTIMENTO'' ' ||
					'where nm_macro in (''@PROCED_CONSENTIMENTO'',''@LADO_PROCED_CONSENTIMENTO'',''@AMB_PROCED_CONSENTIMENTO'')');
end if;



if (dt_versao_atual_cliente_w < to_date('27/06/2012','dd/mm/yyyy')) then

	select count(*)
	into STRICT	qt_registro_w
	from	user_cons_columns
	where	constraint_name = 'MEDEXPO_PK';

	if (qt_registro_w	= 2) then
		CALL Exec_sql_Dinamico('Martini',' alter table MED_EXAME_PROTOCOLO  DROP CONSTRAINT MEDEXPO_PK');

		select count(*)
		into STRICT	qt_registro_w
		from	user_indexes
		where	INDEX_NAME = 'MEDEXPO_PK';


		if (qt_registro_w		> 0) then
			CALL Exec_sql_Dinamico('Martini',' drop index  MEDEXPO_PK');
		end if;

		CALL Exec_sql_Dinamico('Martini',' update MED_EXAME_PROTOCOLO set nr_sequencia = MED_EXAME_PROTOCOLO_seq.nextval ');


		select	count(*)
		into STRICT	qt_registro_w
		from	user_tab_columns
		where	table_name	= 'MED_EXAME_PROTOCOLO'
		and	COLUMN_NAME  	= 'NR_SEQ_EXAME'
		and	nullable	= 'N';

		if (qt_registro_w	> 0) then
			CALL Exec_sql_Dinamico('Martini',' ALTER TABLE  MED_EXAME_PROTOCOLO MODIFY  NR_SEQ_EXAME   NULL');
		end if;

	end if;

end if;


if (dt_versao_atual_cliente_w < to_date('27/06/2012','dd/mm/yyyy')) then


	select count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PEITARV_UK';

	if (qt_registro_w	> 0) then
		CALL Exec_sql_Dinamico('Martini',' alter table PEP_ITEM_ARVORE  DROP CONSTRAINT PEITARV_UK');
	end if;


	select count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	INDEX_NAME = 'PEITARV_UK';


	if (qt_registro_w		> 0) then
		CALL Exec_sql_Dinamico('Martini',' drop index  PEITARV_UK');
	end if;


end if;



if (dt_versao_atual_cliente_w < to_date('09/10/2012','dd/mm/yyyy')) then

	delete from VALOR_DOMINIO
	where	cd_dominio = 2764
	and	vl_dominio in ('B','BD','ND','NH','DDP','MU');

end if;

if (dt_versao_atual_cliente_w < to_date('23/10/2012','dd/mm/yyyy')) then

	delete from VALOR_DOMINIO
	where	cd_dominio = 3598
	and	vl_dominio in ('M');

end if;


if (dt_versao_atual_cliente_w < to_date('15/01/2013','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Martini',' update PARECER_MEDICO_REQ set DT_ATUALIZACAO_NREC = DT_ATUALIZACAO where DT_ATUALIZACAO_NREC is null');

end if;


if (dt_versao_atual_cliente_w < to_date('04/02/2013','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Martini',' delete from TAB_ATRIB_REGRA_ITEM where nr_sequencia = 11 ');

end if;


if (dt_versao_atual_cliente_w < to_date('15/02/2013','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Martini',' update  ESCALA_FRAMINGHAM set IE_ESC_ORIGINAL = ''N'' where IE_ESC_ORIGINAL is null');

end if;

if (dt_versao_atual_cliente_w < to_date('15/02/2013','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('Aldo','delete from valor_dominio where cd_dominio = 1958 and vl_dominio = ''TX''');

end if;

if (dt_versao_atual_cliente_w < to_date('15/07/2013','dd/mm/yyyy')) then
	update funcao
	Set ie_maximizar = 'S'
	where cd_funcao in (	1009,96,10030,2468, 1129, 9030, 9037, 1011,-1002, -980,  286, 3250,-1003, 9095, 1136,  275,  169, 2020,  281, 1355, 7047,-1004,  932,  996,  935,   90, 32, 922, 1134, 9090, 4200,  -19, 9045,  355,-1012,

			354,6542,  162, 6542, 5484, 1801, 7044, -995,  924, 1113, -404,  -16, -325,-2230,-1010,-2170, 1119, -315,-2050,  -40,-2100,  -18,  998, -996, 1290,  950, 7015, 8030, 8050, 1700, 7036, 7036,  162, 1133,

		9096,47,870,871,872,873,874,875,896,900,901,909, 931, 944,1112,1135,1580,3010,3112,3130,7010, 7020, 7022, 8008, 8010, 8012,9007,9019,9044,10025,10026,-2222,-2150,-2025,-2013,-2010, -1113, -1001);

end if;

if (dt_versao_atual_cliente_w < to_date('18/07/2013','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_reg_w
	from	user_constraints
	where	constraint_name = 'PEPITPE_QUAEVPA_FK';


	if (qt_reg_w	> 0) then

		CALL Exec_sql_Dinamico('lafeller','	alter table PEP_ITEM_PENDENTE drop constraint PEPITPE_QUAEVPA_FK');

		CALL Exec_sql_Dinamico('lafeller',' Alter Table PEP_ITEM_PENDENTE add ( '||
      					     ' Constraint PEPITPE_QUAEVPA_FK Foreign Key ( '||
              				     ' NR_SEQ_EVENTO) References QUA_EVENTO_PACIENTE ( NR_SEQUENCIA ) on delete cascade)');

	end if;

	end;

end if;



if (dt_versao_atual_cliente_w < to_date('30/07/2013','dd/mm/yyyy')) then
	begin

	CALL Exec_sql_Dinamico('Martini', ' Drop Sequence tof_meta_seq ');

	CALL Exec_sql_Dinamico('Martini', ' Create Sequence tof_meta_seq  '||
				     '		Increment by 1     	'||
				     '	Start With 9000000		'||
				     '	MaxValue 9999999999			'||
				     '	Cycle 					'||
				     '	NoCache');

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('19/08/2013','dd/mm/yyyy')) then
	begin

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	VALOR_DOMINIO
	where  	VL_DOMINIO = 'T'
	and		CD_DOMINIO = 5840;

	Select 	count(*)
	into STRICT	qt_reg_ww
	from   	VALOR_DOMINIO
	where  	VL_DOMINIO = '2'
	and		CD_DOMINIO = 5840;


	if (qt_reg_w	> 0) and (qt_reg_ww = 0)then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET	VL_DOMINIO = ''2'' WHERE 	VL_DOMINIO = ''T'' AND	CD_DOMINIO = 5840');
	end if;

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	VALOR_DOMINIO
	where  	VL_DOMINIO = 'S'
	and		CD_DOMINIO = 5840;

	Select 	count(*)
	into STRICT	qt_reg_ww
	from   	VALOR_DOMINIO
	where  	VL_DOMINIO = '1'
	and		CD_DOMINIO = 5840;

	if (qt_reg_w	> 0) and (qt_reg_ww = 0)then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET	VL_DOMINIO = ''1'' WHERE 	VL_DOMINIO = ''S'' AND	CD_DOMINIO = 5840');
	end if;
	end;

end if;



if (dt_versao_atual_cliente_w < to_date('21/08/2013','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('Martini','	update	ENF_TRI_OBSTETRICA	'||'	set	cd_pessoa_fisica	= obter_pessoa_Atendimento(nr_atendimento,''C''	)	'||'	where	cd_pessoa_fisica is null');
end if;


if (dt_versao_atual_cliente_w < to_date('06/09/2013','dd/mm/yyyy')) then
	begin

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	VALOR_DOMINIO
	where  	VL_DOMINIO = 'D'
	and		CD_DOMINIO = 4734;

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET	DS_VALOR_DOMINIO = ' || obter_desc_expressao(499916) || 'WHERE 	VL_DOMINIO = ''D'' AND	CD_DOMINIO = 4734');
	end if;

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	VALOR_DOMINIO
	where  	VL_DOMINIO = 'L'
	and		CD_DOMINIO = 4734;

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET	DS_VALOR_DOMINIO = ' || obter_desc_expressao(497941) ||' WHERE 	VL_DOMINIO = ''L'' AND	CD_DOMINIO = 4734');
	end if;

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	VALOR_DOMINIO
	where  	VL_DOMINIO = 'N'
	and		CD_DOMINIO = 4734;

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET	DS_VALOR_DOMINIO = ' || obter_desc_expressao(497942) || ' WHERE 	VL_DOMINIO = ''N'' AND	CD_DOMINIO = 4734');
	end if;


	end;

end if;

if (dt_versao_atual_cliente_w < to_date('06/09/2013','dd/mm/yyyy')) then
	begin



	CALL Exec_sql_Dinamico('Martini',' update NASCIMENTO_AMAMENTACAO set IE_MAMILOS_ESQ = IE_MAMILOS ');
	CALL Exec_sql_Dinamico('Martini',' update NASCIMENTO_AMAMENTACAO set IE_PRIMEIRA_AVALIACAO = ''S'' ');

	end;
end if;


if (dt_versao_atual_cliente_w < to_date('10/12/2013','dd/mm/yyyy')) then
	begin

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	user_indexes
	where  	index_name = 'TIPEVOL_I1';

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('Martini',' drop index TIPEVOL_I1 ');
	end if;




	end;
end if;





if (dt_versao_atual_cliente_w < to_date('27/02/2014','dd/mm/yyyy')) then
	begin

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	user_constraints
	where  	constraint_name = 'EIESIR_EIESIII_FK2';

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('ahkienolt',' alter table EIF_ESCALA_ITEM_REGRA drop constraint EIESIR_EIESIII_FK2 ');
	end if;

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	user_indexes
	where  	index_name = 'EIESIR_EIESIII_FK2_I';

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('ahkienolt',' drop index EIESIR_EIESIII_FK2_I ');
	end if;


	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/06/2014','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_reg_w
	from	MACRO_PRONTUARIO
	where	NM_MACRO = '@Exame_Lab()';

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('tfferretti',' update MACRO_PRONTUARIO set NM_MACRO = ''@Exame_Lab[]'' where	NM_MACRO = ''@Exame_Lab()'' ');
	end if;

	end;
end if;


if (dt_versao_atual_cliente_w < to_date('03/04/2014','dd/mm/yyyy')) then
	begin

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	user_constraints
	where  	constraint_name = 'PEPRDRE_PEDIREE_FK';

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('ahkienolt',' alter table PE_PRESCR_DIAG_RES_ESP drop constraint PEPRDRE_PEDIREE_FK ');
	end if;

	Select 	count(*)
	into STRICT	qt_reg_w
	from   	user_indexes
	where  	index_name = 'PEPRDRE_PEDIREE_FK_I';

	if (qt_reg_w	> 0) then
		CALL Exec_sql_Dinamico('ahkienolt',' drop index PEPRDRE_PEDIREE_FK_I ');
	end if;


	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/04/2014','dd/mm/yyyy')) then
	begin

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RC';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = ''Risco de Sepsis grave confirmado'', NR_SEQ_APRESENT = 25 WHERE 	VL_DOMINIO = ''RC'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RD';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = ' || obter_desc_expressao(299756) || ', NR_SEQ_APRESENT = 30 WHERE 	VL_DOMINIO = ''RD'' AND	CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RE';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = ' || obter_desc_expressao(302757) || ', NR_SEQ_APRESENT = 40 WHERE  VL_DOMINIO = ''RE'' AND	CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RF';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = '|| obter_desc_expressao(302764) ||', NR_SEQ_APRESENT = 50 WHERE  VL_DOMINIO = ''RF'' AND	CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RN';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = '|| obter_desc_expressao(301024) ||', NR_SEQ_APRESENT = 20 WHERE 	VL_DOMINIO = ''RN'' AND	CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SC';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = '|| obter_desc_expressao(299508) ||', NR_SEQ_APRESENT = 10 WHERE 	VL_DOMINIO = ''SC'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SE';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = ''Suspeita de Sepsis pendente de ação da enfermagem'', NR_SEQ_APRESENT = 0 WHERE VL_DOMINIO = ''SE'' AND	CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SM';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = '|| obter_desc_expressao(301022) ||', NR_SEQ_APRESENT = 5 WHERE 	VL_DOMINIO = ''SM'' AND	CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SN';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = '|| obter_desc_expressao(299673) ||', NR_SEQ_APRESENT = 15 WHERE 	VL_DOMINIO = ''SN'' AND	CD_DOMINIO = 7056');
	end if;

	end;
end if;


if (dt_versao_atual_cliente_w < to_date('01/05/2014','dd/mm/yyyy')) then
	begin

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RC';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = '|| obter_desc_expressao(305958) ||', NR_SEQ_APRESENT = 25 WHERE 	VL_DOMINIO = ''RC'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SE';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = ''Suspeita de Sepsis pendente de ação da enfermagem/médica'', NR_SEQ_APRESENT = 0 WHERE VL_DOMINIO = ''SE'' AND	CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SM';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET DS_VALOR_DOMINIO = '|| obter_desc_expressao(305825) ||', NR_SEQ_APRESENT = 5 WHERE 	VL_DOMINIO = ''SM'' AND	CD_DOMINIO = 7056');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('13/05/2014','dd/mm/yyyy')) then


	select 	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'EIESIR_UK';

	if (qt_registro_w	> 0) then
		CALL Exec_sql_Dinamico('ahkienolt',' alter table EIF_ESCALA_ITEM_REGRA  DROP CONSTRAINT EIESIR_UK');
	end if;

	select 	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	INDEX_NAME = 'EIESIR_UK';


	if (qt_registro_w		> 0) then
		CALL Exec_sql_Dinamico('ahkienolt',' drop index  EIESIR_UK');
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('30/05/2014','dd/mm/yyyy')) then

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 3134
	and   VL_DOMINIO = 'D';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 296600 WHERE VL_DOMINIO = ''D'' AND	 CD_DOMINIO = 3134');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 3134
	and   VL_DOMINIO = 'ALT';


	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 340906;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DT_ATUALIZACAO)
 values (340906,obter_desc_expressao(340906),'lafeller','','',TO_DATE('30/05/2014 13:08:40','dd/mm/yyyy hh24:mi:ss'));

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 340906 WHERE VL_DOMINIO = ''ALT'' AND	 CD_DOMINIO = 3134');
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('13/06/2014','dd/mm/yyyy')) then

	update	VALOR_DOMINIO
	set	NR_SEQ_APRESENT = 20
	where	cd_dominio = 7069
	and	vl_dominio = '0';

	update	VALOR_DOMINIO
	set	NR_SEQ_APRESENT = 15
	where	cd_dominio = 7069
	and	vl_dominio = '5';

	update	VALOR_DOMINIO
	set	NR_SEQ_APRESENT = 10
	where	cd_dominio = 7069
	and	vl_dominio = '10';

	update	VALOR_DOMINIO
	set	NR_SEQ_APRESENT = 5
	where	cd_dominio = 7069
	and	vl_dominio = '15';

end if;

if (dt_versao_atual_cliente_w < to_date('10/07/2014','dd/mm/yyyy')) then

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 1298
	and   VL_DOMINIO = 'ECD';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 345624;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DT_ATUALIZACAO)
 values (345624,obter_desc_expressao(345624),'lafeller',obter_desc_expressao(345624),'',TO_DATE('25/07/2014 17:00:08','dd/mm/yyyy hh24:mi:ss'));

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 345624 WHERE VL_DOMINIO = ''ECD'' AND	 CD_DOMINIO = 1298');
	end if;


end if;

if (dt_versao_atual_cliente_w < to_date('14/08/2014','dd/mm/yyyy')) then
	dropProcedure('CPOE_GERAR_EXAMES_ROTINAS');

end if;


if (dt_versao_atual_cliente_w < to_date('20/09/2014','dd/mm/yyyy')) then

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 5842
	and   VL_DOMINIO = 'ESC';

	if (qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET IE_SITUACAO = ''I'' WHERE VL_DOMINIO = ''ESC'' AND	 CD_DOMINIO = 5842');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 5842
	and   VL_DOMINIO = 'I';


	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 600428;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DT_ATUALIZACAO)
 values (600428,obter_desc_expressao(600428),'lafeller','','',TO_DATE('20/09/2014 13:08:40','dd/mm/yyyy hh24:mi:ss'));

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 600428 WHERE VL_DOMINIO = ''I'' AND	 CD_DOMINIO = 5842');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 5842
	and   VL_DOMINIO = 'TEV';


	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 308841;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DT_ATUALIZACAO)
 values (308841,obter_desc_expressao(308841),'lafeller','','',TO_DATE('20/09/2014 13:08:40','dd/mm/yyyy hh24:mi:ss'));

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 308841 WHERE VL_DOMINIO = ''TEV'' AND	 CD_DOMINIO = 5842');
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('03/11/2014','dd/mm/yyyy')) then

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 6146
	and   VL_DOMINIO = 'E';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 330779;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
 values (330779,obter_desc_expressao(330779),'Fernando',obter_desc_expressao(330779),obter_desc_expressao(330779),obter_desc_expressao(330779),TO_DATE('19/09/2014 17:12:43','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 330779 WHERE VL_DOMINIO = ''E'' AND	 CD_DOMINIO = 6146');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 6146
	and   VL_DOMINIO = 'F';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 340818;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
 values (340818,obter_desc_expressao(340818),'cnietsche',obter_desc_expressao(340818),obter_desc_expressao(340818),obter_desc_expressao(340818),TO_DATE('19/09/2014 17:59:46','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 340818 WHERE VL_DOMINIO = ''F'' AND	 CD_DOMINIO = 6146');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('09/12/2014','dd/mm/yyyy')) then

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RB';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 642252;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
	 values (642252,obter_desc_expressao(642252),'lafeller',obter_desc_expressao(642252),'',obter_desc_expressao(642252),TO_DATE('26/11/2014 17:28:47','dd/mm/yyyy hh24:mi:ss'),'',null);


		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 642252 WHERE VL_DOMINIO = ''RB'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RC';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 305958;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
		 values (305958,obter_desc_expressao(305958),'lafeller',obter_desc_expressao(305958),obter_desc_expressao(305958),obter_desc_expressao(305958),TO_DATE('19/09/2014 17:12:39','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 305958 WHERE VL_DOMINIO = ''RC'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RD';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 299756;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
		 values (299756,obter_desc_expressao(299756),'lafeller',obter_desc_expressao(299756),obter_desc_expressao(299756),obter_desc_expressao(299756),TO_DATE('16/09/2014 10:53:16','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 299756 WHERE VL_DOMINIO = ''RD'' AND	 CD_DOMINIO = 7056');
	end if;


	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RE';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 302757;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
		 values (302757,obter_desc_expressao(302757),'lafeller',obter_desc_expressao(302757),obter_desc_expressao(302757),obter_desc_expressao(302757),TO_DATE('16/09/2014 10:53:16','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 302757 WHERE VL_DOMINIO = ''RE'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RF';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 302764;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
	 values (302764,obter_desc_expressao(302764),'lafeller',obter_desc_expressao(302764),obter_desc_expressao(302764),obter_desc_expressao(302764),TO_DATE('16/09/2014 10:53:16','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 302764 WHERE VL_DOMINIO = ''RF'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'RN';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 301024;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
		values (301024,obter_desc_expressao(301024),'lafeller',obter_desc_expressao(301024),obter_desc_expressao(301024),obter_desc_expressao(301024),TO_DATE('16/09/2014 10:53:16','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 301024 WHERE VL_DOMINIO = ''RN'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SA';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 301022;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
	 values (301022,obter_desc_expressao(301022),'lafeller',obter_desc_expressao(301022),obter_desc_expressao(301022),obter_desc_expressao(301022),TO_DATE('16/09/2014 10:53:16','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 301022 WHERE VL_DOMINIO = ''SA'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SC';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 299508;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
	 values (299508,obter_desc_expressao(299508),'Martini',obter_desc_expressao(299508),obter_desc_expressao(299508),obter_desc_expressao(299508),TO_DATE('16/09/2014 10:53:16','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 299508 WHERE VL_DOMINIO = ''SC'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SE';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 642253;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
	 values (642253,obter_desc_expressao(642253),'lafeller',obter_desc_expressao(642253),'',obter_desc_expressao(642253),TO_DATE('26/11/2014 17:31:41','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 642253 WHERE VL_DOMINIO = ''SE'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SM';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 305825;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
	 values (305825,obter_desc_expressao(305825),'lafeller',obter_desc_expressao(305825),obter_desc_expressao(305825),obter_desc_expressao(305825),TO_DATE('19/09/2014 17:12:38','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 305825 WHERE VL_DOMINIO = ''SM'' AND	 CD_DOMINIO = 7056');
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where cd_dominio = 7056
	and   VL_DOMINIO = 'SN';

	if (qt_reg_w > 0) then

		Select  count(*)
		into STRICT	qt_reg_ww
		from	DIC_EXPRESSAO
		where	CD_EXPRESSAO = 299673;

		if (qt_reg_ww = 0 ) then

		insert into DIC_EXPRESSAO(CD_EXPRESSAO,DS_EXPRESSAO_BR,NM_USUARIO,DS_EXPRESSAO_MX,DS_EXPRESSAO_US,DS_GLOSSARIO,DT_ATUALIZACAO,NM_USUARIO_NREC,DT_ATUALIZACAO_NREC)
	 values (299673,obter_desc_expressao(299673),'lafeller',obter_desc_expressao(299673),obter_desc_expressao(299673),obter_desc_expressao(299673),TO_DATE('16/09/2014 10:53:16','dd/mm/yyyy hh24:mi:ss'),'',null);

		end if;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 299673 WHERE VL_DOMINIO = ''SN'' AND	 CD_DOMINIO = 7056');
	end if;


end if;

if (dt_versao_atual_cliente_w < to_date('22/12/2014','dd/mm/yyyy')) then

Select COUNT(*)
into STRICT   qt_reg_w
from   VALOR_DOMINIO
where  cd_dominio = 3611
and    VL_DOMINIO = '4';

if (qt_reg_w > 0) then

	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET VL_DOMINIO = ''0'' WHERE VL_DOMINIO = ''1'' AND	 CD_DOMINIO = 3611');
	commit;
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET VL_DOMINIO = ''1'' WHERE VL_DOMINIO = ''2'' AND	 CD_DOMINIO = 3611');
	commit;
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET VL_DOMINIO = ''2'' WHERE VL_DOMINIO = ''3'' AND	 CD_DOMINIO = 3611');
	commit;
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET VL_DOMINIO = ''3'' WHERE VL_DOMINIO = ''4'' AND	 CD_DOMINIO = 3611');
	commit;

end if;


end if;

if (dt_versao_atual_cliente_w < to_date('23/01/2015','dd/mm/yyyy')) then

Select COUNT(*)
into STRICT   qt_reg_w
from   VALOR_DOMINIO
where  cd_dominio = 5842
and    VL_DOMINIO = 'ESC';

if (qt_reg_w > 0) then

	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET IE_SITUACAO = ''A'' WHERE VL_DOMINIO = ''ESC'' AND	 CD_DOMINIO = 5842');
	commit;

end if;
end if;


if (dt_versao_atual_cliente_w < to_date('18/05/2015','dd/mm/yyyy')) then

Select count(*)
into STRICT   qt_reg_w
from   VALOR_DOMINIO
where  cd_dominio = 5603
and    VL_DOMINIO = 'A';

if (qt_reg_w > 0) then

	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET IE_SITUACAO = ''A'' WHERE VL_DOMINIO = ''A'' AND	 CD_DOMINIO = 5603');
	commit;
end if;

end if;

if (dt_versao_atual_cliente_w < to_date('25/11/2015','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	INDEX_NAME      = 'MOVENCA_MODVENT_FK_I';

	if (qt_registro_w	> 0) then
		CALL Exec_sql_Dinamico('Martini',' drop index MOVENCA_MODVENT_FK_I ');
	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'MOVENCA_MODVENT_FK';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('Martini', 'alter table MODALIDADE_VENTIL_CALC drop constraint MOVENCA_MODVENT_FK');
	end if;

end if;


if (dt_versao_atual_cliente_w < to_date('29/12/2014','dd/mm/yyyy')) then

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where  cd_dominio = 7647
	and    VL_DOMINIO = '1';

	if (qt_reg_w > 0) then

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET NR_SEQ_APRESENT = 30 WHERE VL_DOMINIO = ''1'' AND	 CD_DOMINIO = 7647');
		commit;
	end if;

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where  cd_dominio = 7647
	and    VL_DOMINIO = '2';

	if (qt_reg_w > 0) then

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET NR_SEQ_APRESENT = 20 WHERE VL_DOMINIO = ''2'' AND	 CD_DOMINIO = 7647');
		commit;
	end if;


	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where  cd_dominio = 7647
	and    VL_DOMINIO = '3';

	if (qt_reg_w > 0) then

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET NR_SEQ_APRESENT = 10 WHERE VL_DOMINIO = ''3'' AND	 CD_DOMINIO = 7647');
		commit;
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('18/03/2016','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('lafeller','	ALTER TABLE ATENDIMENTO_SINAL_VITAL MODIFY (QT_ALTURA_M NUMBER(10,2)) ');

	qt_registro_w := 0;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'ATESIVI_EHRUNME_FK';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('lafeller',' Alter Table ATENDIMENTO_SINAL_VITAL drop constraint ATESIVI_EHRUNME_FK ');
	end if;

	qt_registro_w := 0;

	select count(*)
	into STRICT qt_registro_w
	from ATENDIMENTO_SINAL_VITAL a
	WHERE NOT EXISTS (  SELECT 1
						FROM EHR_UNIDADE_MEDIDA b
						WHERE 1 = 1
						AND a.QT_PESO_UM = b.NR_SEQUENCIA)
	AND (a.QT_PESO_UM IS NOT NULL AND a.QT_PESO_UM::text <> '');

	if (qt_registro_w > 0) then
		UPDATE ATENDIMENTO_SINAL_VITAL a
		SET  QT_PESO_UM  = NULL
		WHERE NOT EXISTS (  SELECT 1
							FROM EHR_UNIDADE_MEDIDA b
							WHERE 1 = 1
							AND a.QT_PESO_UM = b.NR_SEQUENCIA)
		AND (a.QT_PESO_UM IS NOT NULL AND a.QT_PESO_UM::text <> '');

		commit;
	end if;



	CALL Exec_sql_Dinamico('lafeller','ALTER TABLE ATENDIMENTO_SINAL_VITAL ADD (CONSTRAINT ATESIVI_EHRUNME_FK FOREIGN KEY (QT_PESO_UM) REFERENCES EHR_UNIDADE_MEDIDA (NR_SEQUENCIA))');

	qt_registro_w := 0;

	select count(*)
	into STRICT qt_registro_w
	from CID_ESPECIALIDADE
	where coalesce(ie_situacao::text, '') = '';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('lafeller', 'update CID_ESPECIALIDADE set ie_situacao = ''A'' where ie_situacao is null');
		commit;
	end if;

	qt_registro_w := 0;

	select count(*)
	into STRICT qt_registro_w
	from CID_CATEGORIA
	where coalesce(ie_situacao::text, '') = '';

	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('lafeller', 'update CID_CATEGORIA set ie_situacao = ''A'' where ie_situacao is null');
		commit;
	end if;

end if;


if (dt_versao_atual_cliente_w < to_date('28/03/2016','dd/mm/yyyy')) then

	Select COUNT(*)
	into STRICT   qt_reg_w
	from   VALOR_DOMINIO
	where  cd_dominio = 5643
	and    VL_DOMINIO = 'TESTE';

	if (qt_reg_w > 0) then

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO  SET  VL_DOMINIO =  ''PATHWAYS''   WHERE VL_DOMINIO = ''TESTE'' AND	 CD_DOMINIO = 5643');
		commit;
	end if;

	update tabela_atributo
	set qt_tamanho = 16
	where nm_atributo = 'QT_NEC_HIDRICA_DIARIA'
	and nm_tabela = 'NUT_PAC';

	commit;

	CALL Exec_sql_Dinamico('cpdias',' alter table nut_pac modify (qt_nec_hidrica_diaria number(16,1))');

end if;


if (dt_versao_atual_cliente_w < to_date('21/07/2016','dd/mm/yyyy')) then

	begin
	CALL Exec_sql_Dinamico('Martini',' update	PARECER_MEDICO set  nr_seq_interno = PARECER_MEDICO_seq.nextval where nr_seq_interno is null ');
	exception
		when others then
			null;
		end;

end if;

if (dt_versao_atual_cliente_w < to_date('21/07/2016','dd/mm/yyyy')) then
  /*
	Retirado a opção devido que a mesma foi apenas realizada para um cliente específico, sem uma avaliação clínica da Philips
	Vl_dominio  - Ds_Valor_dominio - Cd_exp_valor_dominio
		7 	    - Risco 	       - 297901*/
	CALL Exec_sql_Dinamico('lafeller','delete from valor_dominio where cd_dominio = 7403 and vl_dominio = ''7''');

end if;

if (dt_versao_atual_cliente_w < to_date('25/07/2016','dd/mm/yyyy')) then
	begin
	Select COUNT(*)
	into STRICT   qt_reg_w
	from   REGRA_OCORRENCIA_TURNO_LIB;

	if (qt_reg_w > 0) then

		CALL Exec_sql_Dinamico('lafeller',' delete from REGRA_OCORRENCIA_TURNO_LIB');

	end if;

	CALL Exec_sql_Dinamico('lafeller',' alter table REGRA_OCORRENCIA_TURNO_LIB modify NR_SEQ_TIPO_OCORRENCIA varchar2(255)');


	exception
		when others then
			null;
		end;


end if;

if (dt_versao_atual_cliente_w < to_date('06/09/2016','dd/mm/yyyy')) then
  /*
	Retirado a opção devido que a mesma foi apenas realizada para um cliente específico, sem uma avaliação clínica da Philips
	Vl_dominio  - Ds_Valor_dominio - Cd_exp_valor_dominio
		7 	    - Risco 	       - 297901*/
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name	= 'W_SUEP_ITEM'
	and	COLUMN_NAME  	= 'NR_SEQ_ITEM'
	and	nullable	= 'N';

	if (qt_registro_w	> 0) then

		CALL Exec_sql_Dinamico('ahkienolt','alter table W_SUEP_ITEM modify NR_SEQ_ITEM null');

	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('09/06/2017','dd/mm/yyyy')) then
	begin

	Select 	count(*)
	into STRICT	qt_reg_w
	from 	INTEGRIDADE_REFERENCIAL
	where  	NM_TABELA = 'CIAP_ATENDIMENTO'
	and   	NM_INTEGRIDADE_REFERENCIAL = 'CIAPATE_CIAPPRO_FK';


	if ( qt_reg_w > 0) then

		CALL Exec_sql_Dinamico('lafeller',' update	ATEND_ENCAMINHAMENTO set		CD_CIAP = null where	CD_CIAP is not null ');
		CALL Exec_sql_Dinamico('lafeller',' update	CAD_LISTA_PROBLEMA_ITEM set		CD_CIAP = null	where	CD_CIAP is not null ');
		CALL Exec_sql_Dinamico('lafeller',' update	LISTA_PROBLEMA_PAC	set		CD_CIAP = null	where	CD_CIAP is not null ');
		CALL Exec_sql_Dinamico('lafeller',' update	GQA_PENDENCIA_REGRA	set		CD_CIAP = null	where	CD_CIAP is not null ');
		CALL Exec_sql_Dinamico('lafeller',' update	PROTOCOLO	set		CD_CIAP = null	where	CD_CIAP is not null ');
		CALL Exec_sql_Dinamico('lafeller',' Delete from	PROTOCOLO_SINTOMA ');
		CALL Exec_sql_Dinamico('lafeller',' Delete from	CIAP_ATENDIMENTO ');

		commit;

		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index ATENEN_CIAPPRO_FK_I');
		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index CALIPRI_CIAPPRO_FK_I');
		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index LIPRPAC_CIAPPRO_FK_I');
		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index GQAPERE_CIAPPRO_FK_I');
		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index PROTOCO_CIAPPRO_FK_I');
		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index PROSINT_CIAPPRO_FK_I');
		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index CIAPATE_CIAPPRO_FK_I');

		commit;

		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table ATEND_ENCAMINHAMENTO drop constraint ATENEN_CIAPPRO_FK');
		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table CAD_LISTA_PROBLEMA_ITEM drop constraint CALIPRI_CIAPPRO_FK');
		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table LISTA_PROBLEMA_PAC drop constraint LIPRPAC_CIAPPRO_FK');
		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table GQA_PENDENCIA_REGRA drop constraint GQAPERE_CIAPPRO_FK');
		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table PROTOCOLO drop constraint PROTOCO_CIAPPRO_FK');
		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table PROTOCOLO_SINTOMA drop constraint PROSINT_CIAPPRO_FK');
		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table CIAP_ATENDIMENTO drop constraint CIAPATE_CIAPPRO_FK');

		commit;

		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'ATENEN_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'ATEND_ENCAMINHAMENTO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'ATENEN_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'ATEND_ENCAMINHAMENTO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'CALIPRI_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CAD_LISTA_PROBLEMA_ITEM' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'CALIPRI_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CAD_LISTA_PROBLEMA_ITEM' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'LIPRPAC_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'LISTA_PROBLEMA_PAC' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'LIPRPAC_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'LISTA_PROBLEMA_PAC' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'GQAPERE_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'GQA_PENDENCIA_REGRA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'GQAPERE_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'GQA_PENDENCIA_REGRA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'PROTOCO_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'PROTOCO_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'PROSINT_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO_SINTOMA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'PROSINT_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO_SINTOMA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'CIAPATE_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CIAP_ATENDIMENTO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'CIAPATE_CIAPPRO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CIAP_ATENDIMENTO' || chr(39));

		commit;

		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'ATENEN_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'ATEND_ENCAMINHAMENTO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'ATENEN_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'ATEND_ENCAMINHAMENTO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'CALIPRI_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CAD_LISTA_PROBLEMA_ITEM' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'CALIPRI_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CAD_LISTA_PROBLEMA_ITEM' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'LIPRPAC_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'LISTA_PROBLEMA_PAC' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'LIPRPAC_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'LISTA_PROBLEMA_PAC' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'GQAPERE_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'GQA_PENDENCIA_REGRA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'GQAPERE_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'GQA_PENDENCIA_REGRA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'PROTOCO_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'PROTOCO_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'PROSINT_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO_SINTOMA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'PROSINT_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PROTOCOLO_SINTOMA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'CIAPATE_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CIAP_ATENDIMENTO' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'CIAPATE_CIAPPRO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'CIAP_ATENDIMENTO' || chr(39));


		commit;

	end if;


	exception
		when others then
			null;
		end;


end if;


if (dt_versao_atual_cliente_w < to_date('13/06/2017','dd/mm/yyyy')) then
	begin

	select 	count(*)
	into STRICT	qt_reg_w
	from   	TABELA_ATRIBUTO
	where  	nm_atributo = 'NR_SEQ_HEMOTERAPIA '
	and    	nm_tabela = 'PRESCR_ITEM_SINTOMA';


	if ( qt_reg_w > 0) then

		CALL Exec_sql_Dinamico('lafeller',' Delete from PRESCR_ITEM_SINTOMA where nr_seq_hemoterapia is not null');
		CALL Exec_Sql_Dinamico('lafeller', 'Drop Index PEITSIN_CPOHEMO_FK_I');
		CALL Exec_Sql_Dinamico('lafeller', 'Alter Table PRESCR_ITEM_SINTOMA drop constraint PEITSIN_CPOHEMO_FK');

		CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'PEITSIN_CPOHEMO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PRESCR_ITEM_SINTOMA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'PEITSIN_CPOHEMO_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PRESCR_ITEM_SINTOMA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'PEITSIN_CPOHEMO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PRESCR_ITEM_SINTOMA' || chr(39));
		CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'PEITSIN_CPOHEMO_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PRESCR_ITEM_SINTOMA' || chr(39));

		commit;

		CALL Exec_sql_Dinamico('lafeller','	UPDATE 	TABELA_ATRIBUTO  SET  NM_ATRIBUTO =  ''NR_SEQ_HEMOTERAPIA''   WHERE NM_ATRIBUTO = ''NR_SEQ_HEMOTERAPIA '' AND	 NM_TABELA = ''PRESCR_ITEM_SINTOMA''');

		commit;

	end if;


	exception
		when others then
			null;
		end;


end if;



if (dt_versao_atual_cliente_w < to_date('04/07/2017','dd/mm/yyyy')) then
	begin

	select 	count(*)
	into STRICT	qt_reg_w
	from	PRONTUARIO_ITEM
	where	nr_sequencia = 73
	and		ie_outros = 'S';

	if ( qt_reg_w > 0) then
		CALL Exec_sql_Dinamico('bmfelski',' update PRONTUARIO_ITEM set IE_OUTROS = ''N'' where nr_sequencia = 73 ');
		commit;
	end if;

	exception
		when others then
			null;
		end;
end if;


if (dt_versao_atual_cliente_w < to_date('20/07/2017','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('lafeller','delete from valor_dominio where cd_dominio = 8408 and vl_dominio = ''T''');

	CALL Exec_sql_Dinamico('mvassuiti', ' alter table EHR_ARQ_ELEMENTO modify NR_SEQ_ELEMENTO     null');
	CALL Exec_sql_Dinamico('mvassuiti', ' alter table EHR_ARQ_ELEMENTO modify NR_SEQ_APRES        null');
	CALL Exec_sql_Dinamico('mvassuiti', ' alter table EHR_ARQ_ELEMENTO modify QT_DESLOC_DIREITA   null');

end if;

if (dt_versao_atual_cliente_w < to_date('31/08/2017','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('tskistner', 'alter table aval_nutricao add qt_caloria_2 number(5)');
	CALL Exec_sql_Dinamico('tskistner', 'alter table aval_nutricao_ped add qt_caloria_2 number(5)');

	CALL Exec_sql_Dinamico('tskistner',	'	update  aval_nutricao a				' ||
									'	set qt_caloria_2 = (	select x.qt_caloria 	' ||
									'			from	aval_nutricao x    	' ||
									'			where	x.nr_sequencia = a.nr_sequencia), ' ||
									'       qt_caloria = null '||
									' where qt_caloria is not null ');

	CALL Exec_sql_Dinamico('tskistner',	'	update  aval_nutricao_ped a				' ||
									'	set qt_caloria_2 = (	select x.qt_caloria 	' ||
									'			from	aval_nutricao_ped x    	' ||
									'			where	x.nr_sequencia = a.nr_sequencia), ' ||
									'       qt_caloria = null '||
									' where qt_caloria is not null ');

	CALL Exec_sql_Dinamico('tskistner', 'alter table aval_nutricao modify QT_CALORIA number(6,1)');
	CALL Exec_sql_Dinamico('tskistner', 'alter table aval_nutricao_ped modify QT_CALORIA number(6,1)');

	CALL Exec_sql_Dinamico('tskistner',	'	update  aval_nutricao a				' ||
									'	set qt_caloria = (	select x.qt_caloria_2 	' ||
									'			from	aval_nutricao x    	' ||
									'			where	x.nr_sequencia = a.nr_sequencia) '||
									'	where qt_caloria_2 is not null ');

	CALL Exec_sql_Dinamico('tskistner',	'	update  aval_nutricao_ped a				' ||
									'	set qt_caloria = (	select x.qt_caloria_2 	' ||
									'			from	aval_nutricao_ped x    	' ||
									'			where	x.nr_sequencia = a.nr_sequencia)  '||
									'	where qt_caloria_2 is not null ');

	CALL Exec_sql_Dinamico('tskistner', 'alter table aval_nutricao_ped drop column qt_caloria_2');
	CALL Exec_sql_Dinamico('tskistner', 'alter table aval_nutricao drop column qt_caloria_2');

end if;

if (dt_versao_atual_cliente_w < to_date('31/08/2017','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('lafeller', ' alter table ATEND_PROGRAMA_SAUDE modify NR_SEQ_PROGRAMA_SAUDE  null');
	CALL Exec_sql_Dinamico('lafeller','	update 	valor_dominio  set  ie_situacao =  ''I''   where vl_dominio = ''5'' and	 cd_dominio = 8221');

end if;

if (dt_versao_atual_cliente_w < to_date('31/08/2017','dd/mm/yyyy')) then

    CALL Exec_sql_dinamico('mvassuiti', 'alter table  EHR_ARQUETIPO_HEADER modify (DS_KEYWORDS varchar2(2000))');

end if;

if (dt_versao_atual_cliente_w < to_date('11/09/2017','dd/mm/yyyy')) then

    CALL Exec_sql_dinamico('mvassuiti', 'alter table  EHR_ARQUETIPO modify (CD_ARQUETIPO varchar2(100))');

end if;

if (dt_versao_atual_cliente_w < to_date('11/09/2017','dd/mm/yyyy')) then

	CALL Exec_sql_dinamico('bmfelski', 'alter table item_suep drop constraint ITESUEP_UK');

	CALL Exec_sql_dinamico('bmfelski', 'delete from INDICE_ATRIBUTO where nm_indice = ''ITESUEP_UK'' ');

	CALL Exec_sql_dinamico('bmfelski', 'delete from INDICE where nm_indice = ''ITESUEP_UK'' ');

end if;

if (dt_versao_atual_cliente_w < to_date('21/09/2017','dd/mm/yyyy')) then

	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_ALTURA_JOELHO number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_CIRC_PULSO number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_CIRC_ABDOMEN number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_PREGA_CUT_SUBESC number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_PREGA_CUT_SUPRAILIACA number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_PREGA_CUT_BICIPAL number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_PREGA_ADUT_POLEGAR number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO modify (QT_PREGA_CUT_ABD number(5,2))');

	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_ALTURA_JOELHO number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_CIRC_PULSO number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_CIRC_ABDOMEN number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_PREGA_CUT_SUBESC number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_PREGA_CUT_SUPRAILIACA number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_PREGA_CUT_BICIPAL number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_PREGA_ADUT_POLEGAR number(5,2))');
	CALL Exec_sql_dinamico('tskistner', 'alter table  AVAL_NUTRICAO_PED modify (QT_PREGA_CUT_ABD number(5,2))');
end if;


if (dt_versao_atual_cliente_w < to_date('19/10/2017','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('ahkienolt','alter table w_suep modify (NR_ATENDIMENTO null)');

end if;

if (dt_versao_atual_cliente_w < to_date('07/11/2017','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('lafeller','delete from valor_dominio where cd_dominio = 8221 and vl_dominio = ''A''');
	CALL Exec_sql_Dinamico('lafeller','delete from valor_dominio where cd_dominio = 8221 and vl_dominio = ''R''');
	CALL Exec_sql_Dinamico('lafeller','delete from valor_dominio where cd_dominio = 8221 and vl_dominio = ''C''');

	CALL Exec_sql_Dinamico('lafeller','alter table REGRA_LIBERACAO_SUEP modify (CD_SETOR_ATENDIMENTO null)');
	CALL Exec_sql_Dinamico('lafeller','alter table w_suep modify (CD_CATEGORIA null)');

end if;

if (dt_versao_atual_cliente_w < to_date('18/12/2017','dd/mm/yyyy')) then

	select 	count(*)
	into STRICT	qt_reg_w
	from	OBJETO_SISTEMA
	where   NM_OBJETO = 'TRIGGER ESCALA_CAPRINI_ATUAL';

	if ( qt_reg_w > 0) then

	CALL Exec_sql_Dinamico('lafeller','delete from OBJETO_SISTEMA_HIST where  NM_OBJETO = ''TRIGGER ESCALA_CAPRINI_ATUAL''');
	CALL Exec_sql_Dinamico('lafeller','update OBJETO_SISTEMA set    NM_OBJETO = ''ESCALA_CAPRINI_ATUAL'' where  NM_OBJETO = ''TRIGGER ESCALA_CAPRINI_ATUAL''');

	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('19/12/2017','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name			= 'PACIENTE_PFLEGEGRAD'
	and		column_name			= 'NM_USUARIO_REVISAO'
	and		upper(data_type)	= 'DATE';

	if (qt_registro_w > 0) then
		CALL Exec_Sql_Dinamico('Jerusa', 'alter table PACIENTE_PFLEGEGRAD modify (NM_USUARIO_REVISAO varchar2(15))');
	end if;

	end;
end if;


if (dt_versao_atual_cliente_w < to_date('27/12/2017','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 858717, ds_Valor_dominio = ''De 1 em 1 hora'', nr_seq_apresent = 1 WHERE VL_DOMINIO = ''1'' AND	CD_DOMINIO = 8682');
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 858719, ds_Valor_dominio = ''De 2 em 2 horas'', nr_seq_apresent = 2 WHERE VL_DOMINIO = ''2'' AND	CD_DOMINIO = 8682');
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 858721, ds_Valor_dominio = ''De 4 em 4 horas'', nr_seq_apresent = 3 WHERE VL_DOMINIO = ''4'' AND	CD_DOMINIO = 8682');
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 858723, ds_Valor_dominio = ''De 6 em 6 horas'', nr_seq_apresent = 4 WHERE VL_DOMINIO = ''6'' AND	CD_DOMINIO = 8682');
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 858725, ds_Valor_dominio = ''De 8 em 8 horas'', nr_seq_apresent = 5 WHERE VL_DOMINIO = ''8'' AND	CD_DOMINIO = 8682');
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	VALOR_DOMINIO SET CD_EXP_VALOR_DOMINIO = 858727, ds_Valor_dominio = ''De 12 em 12 horas'', nr_seq_apresent = 6 WHERE VL_DOMINIO = ''12'' AND	CD_DOMINIO = 8682');

	CALL Exec_sql_Dinamico('lafeller','	delete from valor_dominio where WHERE VL_DOMINIO = ''3'' AND	CD_DOMINIO = 8682');
	CALL Exec_sql_Dinamico('lafeller','	delete from valor_dominio where WHERE VL_DOMINIO = ''5'' AND	CD_DOMINIO = 8682');

end if;

if (dt_versao_atual_cliente_w < to_date('08/01/2018','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item modify (NR_SEQ_AREA null)');

end if;


if (dt_versao_atual_cliente_w < to_date('09/01/2018','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item modify (NR_SEQ_LOCAL varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item modify (NR_SEQ_DENTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item modify (NR_SEQ_SEXTANTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item modify (NR_SEQ_ARCADA varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item modify (NR_SEQ_TRATAMENTO varchar2(3))');


	CALL Exec_sql_Dinamico('lafeller','alter table AREA_IMAGEM_ITEM_PHILIPS modify (NR_SEQ_LOCAL varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table AREA_IMAGEM_ITEM_PHILIPS modify (NR_SEQ_DENTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table AREA_IMAGEM_ITEM_PHILIPS modify (NR_SEQ_SEXTANTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table AREA_IMAGEM_ITEM_PHILIPS modify (NR_SEQ_ARCADA varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table AREA_IMAGEM_ITEM_PHILIPS modify (NR_SEQ_TRATAMENTO varchar2(3))');


	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_HISTORICO modify (NR_SEQ_LOCAL varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_HISTORICO modify (NR_SEQ_DENTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_HISTORICO modify (NR_SEQ_SEXTANTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_HISTORICO modify (NR_SEQ_ARCADA varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_HISTORICO modify (NR_SEQ_TRATAMENTO varchar2(3))');


	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_PROCEDIMENTO modify (NR_SEQ_LOCAL varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_PROCEDIMENTO modify (NR_SEQ_DENTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_PROCEDIMENTO modify (NR_SEQ_SEXTANTE varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_PROCEDIMENTO modify (NR_SEQ_ARCADA varchar2(3))');
	CALL Exec_sql_Dinamico('lafeller','alter table ODONT_PROCEDIMENTO modify (NR_SEQ_TRATAMENTO varchar2(3))');

end if;


if (dt_versao_atual_cliente_w < to_date('10/01/2018','dd/mm/yyyy')) then

	CALL Exec_Sql_Dinamico('lafeller', 'Drop Index ARIMPHI_IMABANC_FK_I');
	CALL Exec_Sql_Dinamico('lafeller', 'Alter Table AREA_IMAGEM_PHILIPS drop constraint ARIMPHI_IMABANC_FK');
	CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'ARIMPHI_IMABANC_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_PHILIPS' || chr(39));
	CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'ARIMPHI_IMABANC_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_PHILIPS' || chr(39));
	CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'ARIMPHI_IMABANC_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_PHILIPS' || chr(39));
	CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'ARIMPHI_IMABANC_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_PHILIPS' || chr(39));


	CALL Exec_Sql_Dinamico('lafeller', 'Drop Index ARIMITP_AREIMAG_FK_I');
	CALL Exec_Sql_Dinamico('lafeller', 'Alter Table AREA_IMAGEM_ITEM_PHILIPS drop constraint ARIMITP_AREIMAG_FK');
	CALL exec_sql_dinamico('lafeller', ' delete from INDICE where nm_indice = ' || chr(39) || 'ARIMITP_AREIMAG_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_ITEM_PHILIPS' || chr(39));
	CALL exec_sql_dinamico('lafeller', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'ARIMITP_AREIMAG_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_ITEM_PHILIPS' || chr(39));
	CALL exec_sql_dinamico('lafeller', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'ARIMITP_AREIMAG_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_ITEM_PHILIPS' || chr(39));
	CALL exec_sql_dinamico('lafeller', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'ARIMITP_AREIMAG_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'AREA_IMAGEM_ITEM_PHILIPS' || chr(39));

	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item modify (NR_SEQ_AREA not null)');
	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item_philips modify (NR_SEQ_LOCALIZACAO null)');
	CALL Exec_sql_Dinamico('lafeller','alter table area_imagem_item_philips modify (NR_SEQ_AREA not null)');


end if;


if (dt_versao_atual_cliente_w < to_date('22/01/2018','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('lafeller', ' alter table AGENDA_LISTA_ESPERA modify NR_SEQ_PROGRAMA_SAUDE  null');
	CALL Exec_sql_Dinamico('lafeller','	UPDATE 	TABELA_ATRIBUTO  SET IE_OBRIGATORIO =  ''N''   WHERE NM_ATRIBUTO = ''NR_SEQ_PROGRAMA_SAUDE'' AND	 NM_TABELA = ''AGENDA_LISTA_ESPERA''');

end if;

if (dt_versao_atual_cliente_w < to_date('06/04/2018','dd/mm/yyyy')) then

	CALL Exec_sql_Dinamico('amramos', ' alter table PATIENT_DELETION_TABLE modify NM_ATRIBUTO_LIGACAO null');
	CALL Exec_sql_Dinamico('amramos', ' UPDATE 	TABELA_ATRIBUTO  SET IE_OBRIGATORIO =  ''N''   WHERE NM_ATRIBUTO = ''NM_ATRIBUTO_LIGACAO'' AND	 NM_TABELA = ''PATIENT_DELETION_TABLE''');

	CALL Exec_Sql_Dinamico('amramos', ' Drop Index PATDELTABL_TABATRI_FK_I');
	CALL Exec_Sql_Dinamico('amramos', ' Alter Table PATIENT_DELETION_TABLE drop constraint PATDELTABL_TABATRI_FK');

	CALL exec_sql_dinamico('amramos', ' delete from INDICE where nm_indice = ' || chr(39) || 'PATDELTABL_TABATRI_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PATIENT_DELETION_TABLE' || chr(39));
	CALL exec_sql_dinamico('amramos', ' delete from INDICE_ATRIBUTO where nm_indice = ' || chr(39) || 'PATDELTABL_TABATRI_FK_I' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PATIENT_DELETION_TABLE' || chr(39));

	CALL exec_sql_dinamico('amramos', ' delete from integridade_atributo where nm_integridade_referencial = ' || chr(39) || 'PATDELTABL_TABATRI_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PATIENT_DELETION_TABLE' || chr(39));
	CALL exec_sql_dinamico('amramos', ' delete from integridade_referencial where nm_integridade_referencial = ' || chr(39) || 'PATDELTABL_TABATRI_FK' || chr(39) || ' and nm_tabela = ' || chr(39) || 'PATIENT_DELETION_TABLE' || chr(39));

end if;

if (dt_versao_atual_cliente_w < to_date('14/05/2018','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'WLWOR_WLREWO_FK_I';
	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('gvvieira', 'drop index WLWOR_WLREWO_FK_I');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'WLWOR_WLREWO_FK_I';
	if (qt_registro_w > 0) then
		CALL Exec_sql_Dinamico('gvvieira', 'Create Index WLWOR_WLITEM_FK_I on WL_WORKLIST(NR_SEQ_ITEM)');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('30/05/2018','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('tfferretti', ' UPDATE 	TABELA_ATRIBUTO  SET IE_OBRIGATORIO =  ''N''   WHERE NM_ATRIBUTO = ''NM_DESTINATARIO'' AND	 NM_TABELA = ''PARTICIPANTE_CARTA_MEDICA''');
	CALL Exec_Sql_Dinamico('tfferretti', ' Alter Table PARTICIPANTE_CARTA_MEDICA modify NM_DESTINATARIO null');
end if;

if (dt_versao_atual_cliente_w < to_date('11/06/2018','dd/mm/yyyy')) then
	CALL Exec_sql_Dinamico('cpmarco', ' update     tabela_atributo set    IE_OBRIGATORIO = ''N'' where    nm_tabela = ''WL_REGRA_ITEM'' and    nm_atributo = ''IE_ESCALA''');
	CALL Exec_Sql_Dinamico('cpmarco', ' alter table wl_regra_item modify ie_escala null');
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_ajustar_base_pep ( nm_usuario_p text) FROM PUBLIC;

