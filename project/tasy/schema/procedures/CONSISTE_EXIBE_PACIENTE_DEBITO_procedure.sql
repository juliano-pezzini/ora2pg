-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE consiste_exibe_paciente_debito ( cd_pessoa_fisica_p text, cd_estabelecimento_p bigint, ds_mensagem_p INOUT text, ie_opcao_alerta_p INOUT text, cd_perfil_comunic_p INOUT text, cd_pessoa_comunic_p INOUT text) AS $body$
DECLARE

ie_se_mostra_debito_w	varchar(1);

BEGIN
if (cd_pessoa_fisica_p IS NOT NULL AND cd_pessoa_fisica_p::text <> '') and (cd_estabelecimento_p IS NOT NULL AND cd_estabelecimento_p::text <> '') then 
	begin 
	ie_se_mostra_debito_w := obter_se_mostra_debito_estab( 
						cd_pessoa_fisica_p, 
						cd_estabelecimento_p);
	if (ie_se_mostra_debito_w = 'S') then 
		begin 
		SELECT * FROM consiste_paciente_debito( 
             	wheb_usuario_pck.get_cd_estabelecimento, cd_pessoa_fisica_p, 'N', wheb_usuario_pck.get_nm_usuario, ie_opcao_alerta_p, ds_mensagem_p, cd_perfil_comunic_p, cd_pessoa_comunic_p, null) INTO STRICT ie_opcao_alerta_p, ds_mensagem_p, cd_perfil_comunic_p, cd_pessoa_comunic_p;
		end;
	end if;
	end;
end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE consiste_exibe_paciente_debito ( cd_pessoa_fisica_p text, cd_estabelecimento_p bigint, ds_mensagem_p INOUT text, ie_opcao_alerta_p INOUT text, cd_perfil_comunic_p INOUT text, cd_pessoa_comunic_p INOUT text) FROM PUBLIC;

