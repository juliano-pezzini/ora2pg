-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_atualizar_interface (cd_interface_p bigint) AS $body$
DECLARE

qt_registro_w	bigint;

BEGIN

qt_registro_w := obter_valor_dinamico_bv('select count(*) from tasy_versao.interface where cd_interface = :cd_interface', 'cd_interface=' || cd_interface_p, qt_registro_w);
if (qt_registro_w > 0) then
	CALL mudar_integridade_tabela('INTERFACE','DISABLE');
	CALL mudar_integridade_tabela('INTERFACE_REG','DISABLE');
	CALL mudar_integridade_tabela('INTERFACE_ATRIBUTO','DISABLE');

	CALL exec_sql_dinamico_bv('IMPORTAR_INTERFACE', 'delete from interface where cd_interface = :cd_interface', 'cd_interface=' || cd_interface_p);
	tasy_copiar_tabela('TASY_VERSAO', 'INTERFACE', 'N', 'N', ' where a.cd_interface = ' || cd_interface_p);

	CALL exec_sql_dinamico_bv('IMPORTAR_INTERFACE', 'delete from interface_reg where cd_interface = :cd_interface', 'cd_interface=' || cd_interface_p);
	tasy_copiar_tabela('TASY_VERSAO', 'INTERFACE_REG', 'N', 'N', ' where a.cd_interface = ' || cd_interface_p);

	CALL exec_sql_dinamico_bv('IMPORTAR_INTERFACE', 'delete from interface_atributo where cd_interface = :cd_interface', 'cd_interface=' || cd_interface_p);
	tasy_copiar_tabela('TASY_VERSAO', 'INTERFACE_ATRIBUTO', 'N', 'N', ' where a.cd_interface = ' || cd_interface_p);

	CALL mudar_integridade_tabela('INTERFACE_REG','ENABLE');
	CALL mudar_integridade_tabela('INTERFACE','ENABLE');
	CALL mudar_integridade_tabela('INTERFACE_ATRIBUTO','ENABLE');
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_atualizar_interface (cd_interface_p bigint) FROM PUBLIC;

