-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_cria_pls_parametro_v (dt_versao_cliente timestamp) AS $body$
DECLARE


ds_sql_w		varchar(32000);
qt_objeto_w		integer;
ds_erro_w		varchar(2000);

BEGIN

begin
	select	count(1)
	into STRICT	qt_objeto_w
	from	user_objects
	where	object_name = 'PLS_PARAMETROS_V';

	-- se a view existir, dropa
	if (qt_objeto_w > 0) then
		EXECUTE 'drop view pls_parametros_v';
	end if;

	ds_sql_w := f_retorna_sql_create_view;

	-- tenta criar a view
	EXECUTE ds_sql_w;

exception
when others then
	ds_erro_w	:= SQLERRM(SQLSTATE);
	insert into log_tasy(dt_atualizacao,nm_usuario,cd_log,ds_log) values (clock_timestamp(), 'TasyVersao', 996,  'Erro durante criação da view pls_parametros_v -> ' || ds_erro_w);
	commit;
end;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_cria_pls_parametro_v (dt_versao_cliente timestamp) FROM PUBLIC;

