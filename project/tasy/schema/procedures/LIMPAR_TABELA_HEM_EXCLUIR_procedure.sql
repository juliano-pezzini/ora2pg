-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE limpar_tabela_hem_excluir (ie_tabela_p text, nr_seq_registro_p bigint) AS $body$
BEGIN

if (ie_tabela_p = 'CONCLUSAO') then
	BEGIN
	update	hem_cat c
	set	c.nr_seq_coronaria			 = NULL,
		c.nr_seq_coronaria_adic		 = NULL,
		c.nr_seq_ponte			 = NULL,
		c.nr_seq_ponte_adic			 = NULL,
		c.nr_seq_ve				 = NULL,
		c.nr_seq_ve_adic			 = NULL,
		c.nr_seq_valvula_aortica		 = NULL,
		c.nr_seq_valvula_aortica_adic	 = NULL,
		c.nr_seq_mitral			 = NULL,
		c.nr_seq_mitral_adic			 = NULL
	where	c.nr_sequencia			= nr_seq_registro_p;
	END;

elsif (ie_tabela_p = 'USIC_PLACA') then
	BEGIN
	update	hem_usic p
	set	p.ds_observacao_placa		 = NULL,
		p.ie_placa_env_orig_ramo		 = NULL,
		p.ie_placa_trombo			 = NULL,
		p.ie_placa_disseccao			 = NULL,
		p.ie_placa_hematoma			 = NULL,
		p.ie_placa_excentrica		 = NULL,
		p.ie_placa_calcificada		 = NULL,
		p.ie_placa_lipidica			 = NULL,
		p.ie_placa_fibrotica			 = NULL,
		p.ie_placa_mista			 = NULL,
		p.ie_placa_vulneravel		 = NULL
	where	p.nr_sequencia			= nr_seq_registro_p;
	END;

elsif (ie_tabela_p = 'USIC_STENT') then
	BEGIN
	update	hem_usic s
	set	s.nr_seq_reestenose_stent		 = NULL,
		s.ds_observacao_stent		 = NULL,
		s.ie_stent_pervio			 = NULL,
		s.ie_stent_hipoexpandido		 = NULL,
		s.ie_stent_aposicao_haste		 = NULL,
		s.ie_stent_disseccao_bordo		 = NULL
	where	s.nr_sequencia			= nr_seq_registro_p;
	END;
end if;

END	;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE limpar_tabela_hem_excluir (ie_tabela_p text, nr_seq_registro_p bigint) FROM PUBLIC;

