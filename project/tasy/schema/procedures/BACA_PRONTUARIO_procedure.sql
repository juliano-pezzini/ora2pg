-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE baca_prontuario () AS $body$
DECLARE



cd_pessoa_fisica_w			varchar(10);
nr_prontuario_w			bigint;

C01 CURSOR FOR
	SELECT	cd_pessoa_fisica
     	from 	pessoa_fisica
     	where	coalesce(nr_prontuario::text, '') = '';


BEGIN

OPEN C01;
LOOP
FETCH C01 into
	cd_pessoa_fisica_w;
EXIT WHEN NOT FOUND; /* apply on c01 */
	begin
	select	nextval('prontuario_seq')
	into STRICT		nr_prontuario_w
	;
	update 	pessoa_fisica
	set		nr_prontuario	= nr_prontuario_w
	where		cd_pessoa_fisica= cd_pessoa_fisica_w;

	end;
END LOOP;
CLOSE C01;


commit;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE baca_prontuario () FROM PUBLIC;

