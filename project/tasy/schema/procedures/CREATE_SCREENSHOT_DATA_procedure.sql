-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE create_screenshot_data ( ds_img_name_p screenshot_report.ds_img_name%type, nr_section_p screenshot_report.nr_section%type, ds_type_p Screenshot_Report.Ds_Type%type, nr_coluna_p screenshot_report.nr_coluna%type, nr_linha_p screenshot_report.nr_linha%type, ds_img_src_clob_p screenshot_report.ds_img_src_clob%type, nr_encounter_p screenshot_report.nr_atendimento%type) AS $body$
DECLARE

  nr_sequence_w screenshot_report.nr_sequencia%type;

BEGIN
  $if dbms_db_version.version >= 11 $then nr_sequence_w := nextval('screenshot_report_seq');
  $else
  SELECT nextval('screenshot_report_seq') INTO STRICT nr_sequence_w;
  $end
  IF (nr_encounter_p > 0) THEN
    INSERT
    INTO SCREENSHOT_REPORT(
        NR_SEQUENCIA,
        DS_IMG_NAME,
        NR_SECTION,
        DS_TYPE,
        NR_COLUNA,
        NR_LINHA,
        NM_USUARIO,
        DS_IMG_SRC_CLOB,
        NR_ATENDIMENTO,
        DT_ATUALIZACAO
      )
      VALUES (
        nr_sequence_w,
        ds_img_name_p,
        nr_section_p,
        ds_type_p,
        nr_coluna_p,
        nr_linha_p,
        wheb_usuario_pck.get_nm_usuario,
        ds_img_src_clob_p,
        nr_encounter_p,
        clock_timestamp()
      );
  END IF;
  COMMIT;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE create_screenshot_data ( ds_img_name_p screenshot_report.ds_img_name%type, nr_section_p screenshot_report.nr_section%type, ds_type_p Screenshot_Report.Ds_Type%type, nr_coluna_p screenshot_report.nr_coluna%type, nr_linha_p screenshot_report.nr_linha%type, ds_img_src_clob_p screenshot_report.ds_img_src_clob%type, nr_encounter_p screenshot_report.nr_atendimento%type) FROM PUBLIC;

