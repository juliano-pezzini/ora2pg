-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE mims_import_unit ( cd_unidade_medida_p text, ds_unidade_medida_p text, nm_usuario_p text, nr_mims_ver_p bigint) AS $body$
DECLARE


qt_reg_w	bigint;

unidade_medida_w	imp_unidade_medida%rowtype;


BEGIN







select	count(1)

into STRICT	qt_reg_w

from	imp_unidade_medida

where	cd_unidade_medida	= cd_unidade_medida_p;



if (qt_reg_w	= 0) then

	

	unidade_medida_w.cd_unidade_medida	:= cd_unidade_medida_p;

	unidade_medida_w.ds_unidade_medida	:= substr(ds_unidade_medida_p,1,40);

	unidade_medida_w.dt_atualizacao		:= clock_timestamp();

	unidade_medida_w.dt_atualizacao_nrec	:= clock_timestamp();

	unidade_medida_w.nm_usuario			:= nm_usuario_p;

	unidade_medida_w.nm_usuario_nrec	:= nm_usuario_p;

	unidade_medida_w.ie_situacao		:= 'A';

	unidade_medida_w.IE_ADM_DILUICAO	:= 'N';

  unidade_medida_w.NR_SEQ_MIMS_VERSION := nr_mims_ver_p;
	

	insert into imp_unidade_medida values (unidade_medida_w.*);



end if;





end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE mims_import_unit ( cd_unidade_medida_p text, ds_unidade_medida_p text, nm_usuario_p text, nr_mims_ver_p bigint) FROM PUBLIC;

