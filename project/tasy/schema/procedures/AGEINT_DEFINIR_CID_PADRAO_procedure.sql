-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ageint_definir_cid_padrao (cd_doenca_cid_p text, nr_seq_ageint_p bigint, ds_itens_p text, nm_usuario_p text) AS $body$
DECLARE

v_sql varchar(4000) :=
  ' UPDATE agenda_integrada_item
     SET cd_doenca_cid = upper(:cd_doenca_cid_p)
  WHERE obter_se_contido(nr_sequencia,:ds_itens_p) = ''S''
     AND nr_seq_agenda_int = :nr_seq_ageint_p';


ds_sep_bv_w    varchar(50);

BEGIN

ds_sep_bv_w  := obter_separador_bv;
  IF (ds_itens_p IS NOT NULL AND ds_itens_p::text <> '') AND
     position(',' in ds_itens_p) > 0 THEN

  CALL exec_sql_dinamico_bv('AGEINT', v_sql,
              'CD_DOENCA_CID_P='|| cd_doenca_cid_p || ds_sep_bv_w ||
              'DS_ITENS_P='|| ds_itens_p || ds_sep_bv_w ||
              'NR_SEQ_AGEINT_P='||nr_Seq_Ageint_p|| ds_sep_bv_w);

    COMMIT;
  END IF;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ageint_definir_cid_padrao (cd_doenca_cid_p text, nr_seq_ageint_p bigint, ds_itens_p text, nm_usuario_p text) FROM PUBLIC;

