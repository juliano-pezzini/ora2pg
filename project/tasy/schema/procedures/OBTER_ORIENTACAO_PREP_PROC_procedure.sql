-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_orientacao_prep_proc (nr_sequencia_p bigint, nm_usuario_p text, ds_retorno_p INOUT text) AS $body$
DECLARE

											
nr_sequencia_w			ageint_orient_preparo.nr_sequencia%TYPE;
nr_seq_rtf_srtring_w	varchar(50);
ds_espec_w				varchar(4000);


BEGIN
IF (nr_sequencia_p	IS	NOT	NULL) THEN
	nr_seq_rtf_srtring_w := Converte_rtf_string(
	'SELECT	ds_orientacao_preparo
	 FROM	ageint_orient_preparo
	 WHERE	nr_sequencia	=	:nr_sequencia_p', nr_sequencia_p, nm_usuario_p, nr_seq_rtf_srtring_w);

	BEGIN
		SELECT	ds_texto
		INTO STRICT	ds_espec_w
		FROM	tasy_conversao_rtf
		WHERE	nr_sequencia	=	nr_seq_rtf_srtring_w;
	EXCEPTION
		WHEN	OTHERS	THEN
		ds_espec_w	:=	NULL;
	END;

	IF (coalesce(ds_espec_w::text, '') = '')THEN	
		ds_espec_w	:=	Convert_long_html_to_str('ds_orientacao_preparo',
												'ageint_orient_preparo',
												'nr_sequencia	=	'
												||
												nr_sequencia_p);	
	END	IF;
	ds_retorno_p	:=	ds_espec_w;
END	IF;
END	;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_orientacao_prep_proc (nr_sequencia_p bigint, nm_usuario_p text, ds_retorno_p INOUT text) FROM PUBLIC;

