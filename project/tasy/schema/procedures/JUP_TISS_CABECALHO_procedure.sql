-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE jup_tiss_cabecalho (NR_SEQUENCIA_P bigint, NM_USUARIO_P text, NR_SEQ_RETORNO_P bigint, DS_TIPO_TRANSACAO_P text, NR_SEQ_TRANSACAO_P bigint, CD_ANS_ORIGEM_P text, CD_CGC_PRESTADOR_P text, CD_PRESTADOR_CONVENIO_P text, DS_VERSAO_P text, DS_ARQUIVO_P text, NR_SEQ_LOTE_HIST_P bigint) AS $body$
BEGIN

update TISS_CABECALHO
set DT_ATUALIZACAO = clock_timestamp(),
    NM_USUARIO = NM_USUARIO_p,
    NR_SEQ_RETORNO = coalesce(NR_SEQ_RETORNO_P, NR_SEQ_RETORNO),
    DS_TIPO_TRANSACAO = coalesce(DS_TIPO_TRANSACAO_P, DS_TIPO_TRANSACAO),
    NR_SEQ_TRANSACAO = coalesce(NR_SEQ_TRANSACAO_P, NR_SEQ_TRANSACAO),
    CD_ANS_ORIGEM = coalesce(CD_ANS_ORIGEM_P, CD_ANS_ORIGEM),
    CD_CGC_PRESTADOR = coalesce(CD_CGC_PRESTADOR_P, CD_CGC_PRESTADOR),
    CD_PRESTADOR_CONVENIO = coalesce(CD_PRESTADOR_CONVENIO_P, CD_PRESTADOR_CONVENIO),
    DS_VERSAO = coalesce(DS_VERSAO_P, DS_VERSAO),
    DS_ARQUIVO = coalesce(DS_ARQUIVO_P, DS_ARQUIVO),
    NR_SEQ_LOTE_HIST = coalesce(NR_SEQ_LOTE_HIST_P, NR_SEQ_LOTE_HIST)
where NR_SEQUENCIA = NR_SEQUENCIA_P;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE jup_tiss_cabecalho (NR_SEQUENCIA_P bigint, NM_USUARIO_P text, NR_SEQ_RETORNO_P bigint, DS_TIPO_TRANSACAO_P text, NR_SEQ_TRANSACAO_P bigint, CD_ANS_ORIGEM_P text, CD_CGC_PRESTADOR_P text, CD_PRESTADOR_CONVENIO_P text, DS_VERSAO_P text, DS_ARQUIVO_P text, NR_SEQ_LOTE_HIST_P bigint) FROM PUBLIC;

