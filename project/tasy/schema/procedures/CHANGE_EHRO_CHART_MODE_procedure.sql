-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE change_ehro_chart_mode (ie_agrupado_p text, nm_usuario_p text, ie_apos_leitura_p text, ie_ocultar_item_p text) AS $body$
DECLARE


record_count_w smallint;
						

BEGIN

SELECT COUNT(1)
INTO STRICT record_count_w
FROM PEPO_GRAFICO_USUARIO
WHERE nm_usuario = nm_usuario_p;

IF (record_count_w > 0) THEN

	IF (ie_apos_leitura_p = 'N') THEN
		update PEPO_GRAFICO_USUARIO
		set ie_agrupado = ie_agrupado_p,
			ie_ocultar_item = ie_ocultar_item_p,
			dt_atualizacao = clock_timestamp()
		where nm_usuario = nm_usuario_p;
	END IF;
	
ELSE
	
	INSERT INTO PEPO_GRAFICO_USUARIO
	VALUES (clock_timestamp(), nm_usuario_p, clock_timestamp(), nm_usuario_p, ie_agrupado_p, ie_ocultar_item_p);

END IF;
	
COMMIT;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE change_ehro_chart_mode (ie_agrupado_p text, nm_usuario_p text, ie_apos_leitura_p text, ie_ocultar_item_p text) FROM PUBLIC;

