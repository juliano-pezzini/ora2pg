-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE cpoe_atualizar_med_sol_rp ( NR_SEQ_CPOE_RP_P cpoe_material.nr_seq_cpoe_rp%type ) AS $body$
DECLARE



CD_INTERVALO_W cpoe_material.CD_INTERVALO%type := null;
NR_SEQ_GRUPO_INTERVAL_W cpoe_material.NR_SEQ_GRUPO_INTERVAL%type := null;
NR_SEQ_SUBGRUPO_INTERVAL_W cpoe_material.NR_SEQ_SUBGRUPO_INTERVAL%type := null;
QT_DIAS_PADRAO_W cpoe_material.QT_DIAS_PADRAO%type := null;
DS_HORARIOS_W cpoe_material.DS_HORARIOS%type := null;
DT_INICIO_W cpoe_material.DT_INICIO%type := null;
DT_FIM_W cpoe_material.DT_FIM%type := null;
IE_VIA_APLICACAO_W cpoe_material.IE_VIA_APLICACAO%type := null;
IE_SEGUNDA_W cpoe_material.IE_SEGUNDA%type := null;
IE_TERCA_W cpoe_material.IE_TERCA%type := null;
IE_QUARTA_W cpoe_material.IE_QUARTA%type := null;
IE_QUINTA_W cpoe_material.IE_QUINTA%type := null;
IE_SEXTA_W cpoe_material.IE_SEXTA%type := null;
IE_SABADO_W cpoe_material.IE_SABADO%type := null;
IE_DOMINGO_W cpoe_material.IE_DOMINGO%type := null;

c01 CURSOR FOR
SELECT  NR_SEQUENCIA
FROM    CPOE_MATERIAL
WHERE   NR_SEQ_CPOE_RP = NR_SEQ_CPOE_RP_P;

BEGIN
  SELECT  CD_INTERVALO,
          NR_SEQ_GRUPO_INTERVAL,
          NR_SEQ_SUBGRUPO_INTERVAL,
          QT_DIAS_PADRAO,
          DS_HORARIOS,
          DT_INICIO,
          DT_FIM,
          IE_VIA_APLICACAO,
          IE_SEGUNDA,
          IE_TERCA,
          IE_QUARTA,
          IE_QUINTA,
          IE_SEXTA,
          IE_SABADO,
          IE_DOMINGO
  INTO STRICT    CD_INTERVALO_W,
          NR_SEQ_GRUPO_INTERVAL_W,
          NR_SEQ_SUBGRUPO_INTERVAL_W,
          QT_DIAS_PADRAO_W,
          DS_HORARIOS_W,
          DT_INICIO_W,
          DT_FIM_W,
          IE_VIA_APLICACAO_W,
          IE_SEGUNDA_W,
          IE_TERCA_W,
          IE_QUARTA_W,
          IE_QUINTA_W,
          IE_SEXTA_W,
          IE_SABADO_W,
          IE_DOMINGO_W
  FROM    CPOE_RP
  WHERE   NR_SEQUENCIA = NR_SEQ_CPOE_RP_P;

  FOR c01_w IN c01 LOOP
    UPDATE  CPOE_MATERIAL
    SET     CD_INTERVALO = CD_INTERVALO_W,
            NR_SEQ_GRUPO_INTERVAL = NR_SEQ_GRUPO_INTERVAL_W,
            NR_SEQ_SUBGRUPO_INTERVAL = NR_SEQ_SUBGRUPO_INTERVAL_W,
            QT_DIAS_PADRAO = QT_DIAS_PADRAO_W,
            DS_HORARIOS = DS_HORARIOS_W,
            DT_INICIO = DT_INICIO_W,
            DT_FIM = DT_FIM_W,
            IE_VIA_APLICACAO = IE_VIA_APLICACAO_W,
            IE_SEGUNDA = IE_SEGUNDA_W,
            IE_TERCA = IE_TERCA_W,
            IE_QUARTA = IE_QUARTA_W,
            IE_QUINTA = IE_QUINTA_W,
            IE_SEXTA = IE_SEXTA_W,
            IE_SABADO = IE_SABADO_W,
            IE_DOMINGO = IE_DOMINGO_W
    WHERE   NR_SEQUENCIA = c01_w.NR_SEQUENCIA;
    COMMIT;
  END LOOP;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cpoe_atualizar_med_sol_rp ( NR_SEQ_CPOE_RP_P cpoe_material.nr_seq_cpoe_rp%type ) FROM PUBLIC;

