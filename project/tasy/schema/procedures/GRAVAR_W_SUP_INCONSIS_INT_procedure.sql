-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gravar_w_sup_inconsis_int ( cd_estabelecimento_p w_sup_inconsistencia_int.cd_estabelecimento%type, nm_usuario_p w_sup_inconsistencia_int.nm_usuario%type, ds_inconsistencia_p w_sup_inconsistencia_int.ds_inconsistencia%type, ie_tipo_integracao_p w_sup_inconsistencia_int.ie_tipo_integracao%type, ie_envio_recebe_p w_sup_inconsistencia_int.ie_envio_recebe%type, nr_documento_p w_sup_inconsistencia_int.nr_documento%type, ie_tipo_documento_p w_sup_inconsistencia_int.ie_tipo_documento%type) AS $body$
DECLARE


nr_sequencia_w	w_sup_inconsistencia_int.nr_sequencia%type;

BEGIN
	select	nextval('w_sup_inconsistencia_int_seq')
	into STRICT	nr_sequencia_w
	;

	insert into w_sup_inconsistencia_int(
						nr_sequencia,
						cd_estabelecimento,
						dt_atualizacao,
						nm_usuario,
						ds_inconsistencia,
						ie_tipo_integracao,
						ie_envio_recebe,
						nr_documento,
						ie_tipo_documento)
					values (
						nr_sequencia_w,
						cd_estabelecimento_p,
						clock_timestamp(),
						nm_usuario_p,
						ds_inconsistencia_p,
						ie_tipo_integracao_p,
						ie_envio_recebe_p,
						nr_documento_p,
						ie_tipo_documento_p);
	update	w_ordem_compra
	set	ie_status_integracao = '2'
	where	nr_sequencia = nr_documento_p;


commit;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gravar_w_sup_inconsis_int ( cd_estabelecimento_p w_sup_inconsistencia_int.cd_estabelecimento%type, nm_usuario_p w_sup_inconsistencia_int.nm_usuario%type, ds_inconsistencia_p w_sup_inconsistencia_int.ds_inconsistencia%type, ie_tipo_integracao_p w_sup_inconsistencia_int.ie_tipo_integracao%type, ie_envio_recebe_p w_sup_inconsistencia_int.ie_envio_recebe%type, nr_documento_p w_sup_inconsistencia_int.nr_documento%type, ie_tipo_documento_p w_sup_inconsistencia_int.ie_tipo_documento%type) FROM PUBLIC;

