-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_w_consulta_benef ( ie_resultado_p text, ds_mensagem_p text, qt_beneficiarios_p text, cd_modalidade_p text, ds_modalidade_p text, cd_plano_p text, ds_plano_p text, cd_tipo_plano_p text, ds_tipo_plano_p text, nm_plano_p text, cd_usuario_convenio_p text, nm_pessoa_fisica_p text, nr_cpf_p text, nr_identidade_p text, ds_orgao_emissor_p pessoa_fisica.ds_orgao_emissor_ci%type, sg_uf_orgao_emissor_p text, ds_pais_rg_p text, ie_sexo_p text, dt_nascimento_p timestamp, nm_mae_p text, cd_cep_p text, cd_cidade_p text, ds_cidade_p text, sg_uf_p text, ds_bairro_p text, ds_logradouro_p text, nr_endereco_p text, ds_complemento_p text, nr_telefone_1_p text, nr_telefone_2_p text, ds_email_p text, ie_status_p text, nm_usuario_p text) AS $body$
DECLARE


cd_pessoa_fisica_w	varchar(10)	:= '';


BEGIN

begin
select	max(cd_pessoa_fisica)
into STRICT	cd_pessoa_fisica_w
from	pessoa_fisica
where	nr_cpf = nr_cpf_p;
exception
	when others then
	cd_pessoa_fisica_w	:= '';
end;

insert into w_consulta_beneficiario(
	cd_usuario_convenio,
	dt_atualizacao,
	dt_atualizacao_nrec,
	dt_nascimento,
	nm_pessoa_fisica,
	nm_usuario,
	nm_usuario_nrec,
	nr_cpf,
	ie_resultado,
	ds_mensagem,
	qt_beneficiarios,
	cd_modalidade,
	ds_modalidade,
	cd_plano,
	ds_plano,
	cd_tipo_plano,
	ds_tipo_plano,
	nm_plano,
	nr_identidade,
	ds_orgao_emissor,
	sg_uf_orgao_emissor,
	ds_pais_rg,
	ie_sexo,
	nm_mae,
	cd_cep,
	cd_cidade,
	ds_cidade,
	sg_uf,
	ds_bairro,
	ds_logradouro,
	nr_endereco,
	ds_complemento,
	nr_telefone_1,
	nr_telefone_2,
	ds_email,
	ie_status,
	cd_pessoa_fisica)
values (
	cd_usuario_convenio_p,
	clock_timestamp(),
	clock_timestamp(),
	dt_nascimento_p,
	nm_pessoa_fisica_p,
	nm_usuario_p,
	nm_usuario_p,
	nr_cpf_p,
	ie_resultado_p,
	ds_mensagem_p,
	qt_beneficiarios_p,
	cd_modalidade_p,
	ds_modalidade_p,
	cd_plano_p,
	ds_plano_p,
	cd_tipo_plano_p,
	ds_tipo_plano_p,
	nm_plano_p,
	nr_identidade_p,
	ds_orgao_emissor_p,
	sg_uf_orgao_emissor_p,
	ds_pais_rg_p,
	ie_sexo_p,
	nm_mae_p,
	cd_cep_p,
	cd_cidade_p,
	ds_cidade_p,
	sg_uf_p,
	ds_bairro_p,
	ds_logradouro_p,
	nr_endereco_p,
	ds_complemento_p,
	nr_telefone_1_p,
	nr_telefone_2_p,
	ds_email_p,
	ie_status_p,
	cd_pessoa_fisica_w);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_w_consulta_benef ( ie_resultado_p text, ds_mensagem_p text, qt_beneficiarios_p text, cd_modalidade_p text, ds_modalidade_p text, cd_plano_p text, ds_plano_p text, cd_tipo_plano_p text, ds_tipo_plano_p text, nm_plano_p text, cd_usuario_convenio_p text, nm_pessoa_fisica_p text, nr_cpf_p text, nr_identidade_p text, ds_orgao_emissor_p pessoa_fisica.ds_orgao_emissor_ci%type, sg_uf_orgao_emissor_p text, ds_pais_rg_p text, ie_sexo_p text, dt_nascimento_p timestamp, nm_mae_p text, cd_cep_p text, cd_cidade_p text, ds_cidade_p text, sg_uf_p text, ds_bairro_p text, ds_logradouro_p text, nr_endereco_p text, ds_complemento_p text, nr_telefone_1_p text, nr_telefone_2_p text, ds_email_p text, ie_status_p text, nm_usuario_p text) FROM PUBLIC;

