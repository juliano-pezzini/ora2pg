-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';



CREATE TYPE exame AS (	nr_seq_exame_old	bigint,
			nr_seq_exame_new	bigint);


CREATE OR REPLACE PROCEDURE lab_copiar_exame (nr_seq_exame_p bigint, nr_seq_grupo_dest_p bigint, ie_metodo_p text, ie_material_p text, ie_referencia_p text, ie_opcional_p text, ie_convenio_p text, ie_pseudonimo_p text, ie_dependente_p text, ie_formato_p text, ie_liberacao_p text, ie_equipamento_p text, ie_filhos_p text, ie_frasco_p text, nm_usuario_p text) AS $body$
DECLARE

type vetor is table of exame index by integer;

indice				integer := 1;
vetor_exame_w			vetor;

nm_exame_w			varchar(255);
cd_procedimento_w		bigint;
ie_origem_proced_w		bigint;
nr_seq_superior_wW		bigint;
cd_exame_w			varchar(255);
ie_formato_resultado_w		varchar(255);
nr_seq_grupo_w			bigint;
ie_solicitacao_w		varchar(255);
ds_orientacao_usuario_w		varchar(4000);
ds_unidade_medida_w		varchar(255);
ds_formula_w			varchar(255);
qt_decimais_w			smallint;
ie_campo_calculo_w		varchar(255);
cd_exame_integracao_w		varchar(255);
nr_seq_apresent_w		bigint;
ds_regra_wWW			varchar(255);
ie_restricao_w			varchar(255);
ds_exame_prescricao_w		varchar(255);
nr_seq_unid_med_w		bigint;
nr_seq_grupo_imp_w		bigint;
ds_orientacao_tecnica_w		varchar(4000);
ie_apache_ii_w			varchar(255);
ie_prescricao_rotina_w		varchar(255);
cd_cgc_externo_w		varchar(255);

ds_concat_w			varchar(255);

nr_seq_exame_ant_w		bigint;
nr_seq_exame_w			bigint;
nr_seq_equip_w			bigint;
nr_seq_liberacao_w		bigint;
nr_seq_formato_ww		bigint;
nr_seq_formato_w		bigint;
nr_seq_formato_item_w		bigint;
nr_seq_pseudo_w			bigint;
nr_seq_dependente_w		bigint;

cd_equipamento_w		integer;
cd_exame_equip_w		varchar(255);
ie_padrao_w			varchar(1);

cd_estabelecimento_w		smallint;
cd_perfil_w			integer;
nm_usuario_lib_w		varchar(255);

nr_seq_material_w		bigint;
ds_cabecalho_w			varchar(255);
ds_rodape_w			varchar(2000);
ie_padrao_ww			varchar(255);
ie_mapa_laudo_w			varchar(255);
nr_seq_metodo_w			bigint;
nr_seq_superior_w		bigint;
ie_situacao_w			varchar(1);
ds_regra_w			varchar(255);

ds_texto_w			varchar(2000);
nr_linha_w			smallint;
nr_coluna_w			smallint;
ds_regra_ww			varchar(255);

ds_formato_w			text;
qt_filhos_w			integer;
ds_pseudo_w			varchar(255);
qt_copia_w			integer	:= 1;

dt_inicio_vigencia_format_w 	timestamp;
dt_fim_vigencia_format_w		timestamp;

nr_seq_mat_equip_w			bigint;
cd_material_integr_w		varchar(100);
ds_tempo_w					varchar(255);
ds_conservante_integr_w		varchar(255);
cd_formato_integracao_w		varchar(20);
ie_tipo_atend_equip_w		smallint;
ie_urg_equip_w				varchar(1);
nr_seq_regra_pseudo_w bigint;WITH RECURSIVE cte AS (


C10 CURSOR FOR
	SELECT	nr_seq_exame
	from	exame_laboratorio WHERE nr_seq_superior = nr_seq_exame_p
  UNION ALL


C10 CURSOR FOR
	SELECT	nr_seq_exame
	from	exame_laboratorio JOIN cte c ON (c.prior nr_seq_exame = nr_seq_superior)

) SELECT * FROM cte WHERE nr_seq_exame	= nr_seq_exame_p
	and	ie_filhos_p	= 'N'
	
union

	SELECT	nr_seq_exame
	from	exame_laboratorio
	where	nr_seq_exame	= nr_seq_exame_p
	and	ie_filhos_p	= 'S'
	
union

	select	nr_seq_exame
	from	exame_laboratorio
	where	ie_filhos_p	= 'S';
;

C40 CURSOR FOR
	SELECT	nr_sequencia,
		ds_pseudo,
		nr_seq_regra_pseudo
	from	exame_lab_pseudo
	where	nr_seq_exame	= nr_seq_exame_p;

C50 CURSOR FOR
	SELECT 	nr_seq_formato,
		nr_seq_material,
		ds_cabecalho,
		ds_rodape,
		ie_padrao,
		ie_mapa_laudo,
		nr_seq_metodo,
		nr_seq_superior,
		ds_regra,
		dt_inicio_vigencia,
		dt_fim_vigencia
	from	exame_lab_format
	where	nr_seq_exame	= nr_seq_exame_p;

C60 CURSOR FOR
	SELECT	ds_texto,
		nr_linha,
		nr_coluna,
		ds_regra
	from	exame_lab_format_item
	where	nr_seq_formato	= nr_seq_formato_ww;

C80 CURSOR FOR
	SELECT	cd_estabelecimento,
		cd_perfil,
		nm_usuario_lib
	from	exame_lab_liberacao
	where	nr_seq_exame	= nr_seq_exame_p;

C90 CURSOR FOR
	SELECT	cd_equipamento,
		cd_exame_equip,
		ie_padrao,
		nr_seq_material,
		cd_material_integr,
		ds_tempo,
		ds_conservante_integr,
		cd_formato_integracao,
		ie_tipo_atendimento,
		ie_urgente
	from	lab_exame_equip
	where	nr_seq_exame	= nr_seq_exame_p;


BEGIN

Open C10;
loop
fetch C10 into
	nr_seq_exame_ant_w;
EXIT WHEN NOT FOUND; /* apply on C10 */

	select	nm_exame,
		cd_procedimento,
		ie_origem_proced,
		nr_seq_superior,
		cd_exame,
		ie_formato_resultado,
		nr_seq_grupo,
		ie_solicitacao,
		ds_orientacao_usuario,
		ds_unidade_medida,
		ds_formula,
		qt_decimais,
		ie_campo_calculo,
		cd_exame_integracao,
		nr_seq_apresent,
		ds_regra,
		ie_restricao,
		ds_exame_prescricao,
		nr_seq_unid_med,
		nr_seq_grupo_imp,
		ds_orientacao_tecnica,
		ie_apache_ii,
		ie_prescricao_rotina,
		cd_cgc_externo,
		ie_situacao
	into STRICT	nm_exame_w,
		cd_procedimento_w,
		ie_origem_proced_w,
		nr_seq_superior_ww,
		cd_exame_w,
		ie_formato_resultado_w,
		nr_seq_grupo_w,
		ie_solicitacao_w,
		ds_orientacao_usuario_w,
		ds_unidade_medida_w,
		ds_formula_w,
		qt_decimais_w,
		ie_campo_calculo_w,
		cd_exame_integracao_w,
		nr_seq_apresent_w,
		ds_regra_www,
		ie_restricao_w,
		ds_exame_prescricao_w,
		nr_seq_unid_med_w,
		nr_seq_grupo_imp_w,
		ds_orientacao_tecnica_w,
		ie_apache_ii_w,
		ie_prescricao_rotina_w,
		cd_cgc_externo_w,
		ie_situacao_w
	from	exame_laboratorio
	where	nr_seq_exame	= nr_seq_exame_ant_w;

	ds_concat_w := 'C_';
	select	max(coalesce(nr_seq_exame,0)) + 1
	into STRICT	nr_seq_exame_w
	from	exame_laboratorio;WITH RECURSIVE cte AS (


	select	count(*)
	into STRICT	qt_filhos_w
	from	exame_laboratorio WHERE nr_seq_superior = nr_seq_exame_p
  UNION ALL


	select	count(*)
	into STRICT	qt_filhos_w
	from	exame_laboratorio JOIN cte c ON (c.prior nr_seq_exame = nr_seq_superior)

) SELECT * FROM cte WHERE 1=1;
;

	if (qt_filhos_w > 0) then
		vetor_exame_w[indice].nr_seq_exame_old	:= nr_seq_exame_ant_w;
		vetor_exame_w[indice].nr_seq_exame_new	:= nr_seq_exame_w;
		indice := indice + 1;
	end if;

	if (nr_seq_superior_ww IS NOT NULL AND nr_seq_superior_ww::text <> '') then
			-- somente exames filhos
		for indice in 1..vetor_exame_w.count loop
			if (nr_seq_superior_ww = vetor_exame_w[indice].nr_seq_exame_old) then
				nr_seq_superior_ww := vetor_exame_w[indice].nr_seq_exame_new;
				exit;
			end if;
		end loop;
	end if;

	begin
	insert into exame_laboratorio(nr_seq_exame,
		nm_exame,
		dt_atualizacao,
		nm_usuario,
		cd_procedimento,
		ie_origem_proced,
		nr_seq_superior,
		cd_exame,
		ie_formato_resultado,
		nr_seq_grupo,
		ie_solicitacao,
		ds_orientacao_usuario,
		ds_unidade_medida,
		ds_formula,
		qt_decimais,
		ie_campo_calculo,
		cd_exame_integracao,
		nr_seq_apresent,
		ds_regra,
		ie_restricao,
		ds_exame_prescricao,
		nr_seq_unid_med,
		nr_seq_grupo_imp,
		ds_orientacao_tecnica,
		ie_apache_ii,
		ie_prescricao_rotina,
		cd_cgc_externo,
		ie_situacao,
		ie_grid_pep)
	values (nr_seq_exame_w,
		nm_exame_w,
		clock_timestamp(),
		nm_usuario_p,
		cd_procedimento_w,
		ie_origem_proced_w,
		nr_seq_superior_ww,
		ds_concat_w || cd_exame_w,
		ie_formato_resultado_w,
		nr_seq_grupo_dest_p,
		ie_solicitacao_w,
		ds_orientacao_usuario_w,
		ds_unidade_medida_w,
		ds_formula_w,
		qt_decimais_w,
		ie_campo_calculo_w,
		cd_exame_integracao_w,
		nr_seq_apresent_w,
		ds_regra_www,
		ie_restricao_w,
		ds_exame_prescricao_w,
		nr_seq_unid_med_w,
		nr_seq_grupo_imp_w,
		ds_orientacao_tecnica_w,
		ie_apache_ii_w,
		ie_prescricao_rotina_w,
		cd_cgc_externo_w,
		ie_situacao_w,
		'S');
	exception
	when unique_violation then
		CALL wheb_mensagem_pck.exibir_mensagem_abort(203162,'CD_EXAME_W='||cd_exame_w);
	end;

	if (ie_metodo_p = 'S') then

		insert into exame_lab_metodo(nr_seq_exame,
			nr_seq_metodo,
			ie_prioridade,
			dt_atualizacao,
			nm_usuario,
			ie_gera_metodo_item_exame)
		SELECT	nr_seq_exame_w,
			nr_seq_metodo,
			ie_prioridade,
			clock_timestamp(),
			nm_usuario_p,
			ie_gera_metodo_item_exame
		from	exame_lab_metodo
		where	nr_seq_exame	= nr_seq_exame_p;

	end if;

	if (ie_material_p = 'S') then

		insert into exame_lab_material(nr_seq_exame,
			nr_seq_material,
			ie_prioridade,
			dt_atualizacao,
			nm_usuario,
			ds_unidade_medida,
			qt_decimais,
			ds_formula,
			cd_equipamento,
			ie_formato_resultado,
			qt_coleta,
			nr_etiqueta,
			ie_situacao,
			nr_seq_unid_med)
		SELECT	nr_seq_exame_w,
			nr_seq_material,
			ie_prioridade,
			clock_timestamp(),
			nm_usuario_p,
			ds_unidade_medida,
			qt_decimais,
			ds_formula,
			cd_equipamento,
			ie_formato_resultado,
			qt_coleta,
			nr_etiqueta,
			ie_situacao,
			nr_seq_unid_med
		from	exame_lab_material
		where	nr_seq_exame	= nr_seq_exame_p;

	end if;

	if (ie_frasco_p = 'S') then

		insert into exame_lab_frasco(nr_sequencia,
			nr_seq_exame,
			nm_usuario,
			dt_atualizacao,
			nr_seq_frasco,
			nr_seq_material,
			ds_frasco_inadequado,
			ds_transporte,
			ie_prioridade,
			nr_seq_amostra,
			ie_situacao)
		SELECT	nextval('exame_lab_frasco_seq'),
			nr_seq_exame_w,
			nm_usuario_p,
			clock_timestamp(),
			nr_seq_frasco,
			nr_seq_material,
			ds_frasco_inadequado,
			ds_transporte,
			ie_prioridade,
			nr_seq_amostra,
			'A'
		from	exame_lab_frasco
		where	nr_seq_exame	= nr_seq_exame_p
		and		coalesce(ie_situacao,'A') = 'A';

	end if;

	if (ie_referencia_p = 'S') then

		insert into exame_lab_padrao(nr_seq_exame,
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			ie_sexo,
			qt_minima,
			qt_maxima,
			qt_idade_min,
			qt_idade_max,
			qt_percent_min,
			qt_percent_max,
			nr_seq_metodo,
			nr_seq_material,
			ds_observacao,
			ie_tipo_valor,
			ie_periodo,
			ie_tipo_data,
			nr_seq_met_reag,
			ie_situacao,
			ie_gera_alerta)
		SELECT	nr_seq_exame_w,
			row_number() OVER () AS rownum,
			clock_timestamp(),
			nm_usuario_p,
			ie_sexo,
			qt_minima,
			qt_maxima,
			qt_idade_min,
			qt_idade_max,
			qt_percent_min,
			qt_percent_max,
			nr_seq_metodo,
			nr_seq_material,
			ds_observacao,
			ie_tipo_valor,
			ie_periodo,
			ie_tipo_data,
			nr_seq_met_reag,
			ie_situacao,
			ie_gera_alerta
		from	exame_lab_padrao
		where	nr_seq_exame	= nr_seq_exame_p;
	end if;

	if (ie_opcional_p = 'S') then

		insert into exame_lab_valor(nr_seq_exame,
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			ds_valor)
		SELECT	nr_seq_exame_w,
			row_number() OVER () AS rownum,
			clock_timestamp(),
			nm_usuario_p,
			ds_valor
		from	exame_lab_valor
		where	nr_seq_exame	= nr_seq_exame_p;

	end if;

	if (ie_convenio_p = 'S') then

		insert into exame_lab_convenio(nr_seq_exame,
			nr_sequencia,
			cd_convenio,
			cd_procedimento,
			ie_origem_proced,
			dt_atualizacao,
			nm_usuario,
			ie_autorizacao,
			dt_inicio_vigencia,
			dt_fim_vigencia,
			cd_edicao_amb,
			cd_plano_convenio,
			ie_tipo_convenio,
			cd_categoria,
			ie_tipo_atendimento,
			ie_origem_proced_regra,
			ie_origem_proc_filtro,
			ds_observacao,
			nr_seq_material,
			ie_situacao)
		SELECT	nr_seq_exame_w,
			row_number() OVER () AS rownum,
			cd_convenio,
			cd_procedimento,
			ie_origem_proced,
			clock_timestamp(),
			nm_usuario_p,
			ie_autorizacao,
			dt_inicio_vigencia,
			dt_fim_vigencia,
			cd_edicao_amb,
			cd_plano_convenio,
			ie_tipo_convenio,
			cd_categoria,
			ie_tipo_atendimento,
			ie_origem_proced_regra,
			ie_origem_proc_filtro,
			ds_observacao,
			nr_seq_material,
			ie_situacao
		from	exame_lab_convenio
		where	nr_seq_exame	= nr_seq_exame_p;

	end if;

	if (ie_pseudonimo_p = 'S') then

		Open C40;
		loop
		fetch C40 into	nr_seq_pseudo_w,
				ds_pseudo_w,
				nr_seq_regra_pseudo_w;
		EXIT WHEN NOT FOUND; /* apply on C40 */

		qt_copia_w	:= qt_copia_w + 1;

		insert into exame_lab_pseudo(nr_seq_exame,
			nr_sequencia,
			ds_pseudo,
			dt_atualizacao,
			nm_usuario,
			nr_seq_regra_pseudo)
		values (nr_seq_exame_w,
			nr_seq_pseudo_w,
			substr(Obter_Desc_Expressao(303214) || ' ' || qt_copia_w || ' '|| Obter_Desc_Expressao(746911) || ' ' || ds_pseudo_w,1,255),
			clock_timestamp(),
			nm_usuario_p,
			nr_seq_regra_pseudo_w);
		end loop;
		close c40;
	end if;

	if (ie_dependente_p = 'S') then

		select	nextval('exame_lab_dependente_seq')
		into STRICT	nr_seq_dependente_w
		;

		insert into exame_lab_dependente(nr_seq_exame,
			nr_sequencia,
			nr_seq_exame_dep,
			dt_atualizacao,
			nm_usuario,
			cd_setor_atendimento,
			cd_convenio,
			cd_categoria,
			ie_geracao,
			nr_seq_material,
			ie_excluir,
			cd_estabelecimento,
			nr_seq_material_regra,
			cd_setor_prescricao,
			cd_motivo_baixa,
			ie_material_exame_princ,
			ie_amostra,
			ie_agrupa_conta,
			ie_restringe_dep,
			ie_baixa_prescr,
			ie_status_exame)
		SELECT	nr_seq_exame_w,
			nextval('exame_lab_dependente_seq'),
			nr_seq_exame_dep,
			clock_timestamp(),
			nm_usuario_p,
			cd_setor_atendimento,
			cd_convenio,
			cd_categoria,
			ie_geracao,
			nr_seq_material,
			ie_excluir,
			cd_estabelecimento,
			nr_seq_material_regra,
			cd_setor_prescricao,
			cd_motivo_baixa,
			ie_material_exame_princ,
			ie_amostra,
			ie_agrupa_conta,
			ie_restringe_dep,
			ie_baixa_prescr,
			ie_status_exame
		from	exame_lab_dependente
		where	nr_seq_exame	= nr_seq_exame_p;

	end if;

	if (ie_formato_p = 'S') then

		open C50;
		loop
		fetch C50 into	nr_seq_formato_ww,
				nr_seq_material_w,
				ds_cabecalho_w,
				ds_rodape_w,
				ie_padrao_Ww,
				ie_mapa_laudo_w,
				nr_seq_metodo_w,
				nr_seq_superior_w,
				ds_regra_w,
				dt_inicio_vigencia_format_w,
				dt_fim_vigencia_format_w;
		EXIT WHEN NOT FOUND; /* apply on C50 */
			begin
			select	nextval('exame_lab_format_seq')
			into STRICT	nr_seq_formato_w
			;

			begin
				select	ds_formato
				into STRICT	ds_formato_w
				from	exame_lab_texto
				where	nr_seq_formato	= nr_seq_formato_wW;
			exception
				when others then
					ds_formato_w	:= ' ';
			end;

			insert into exame_lab_format(nr_seq_exame,
				nr_seq_formato,
				nr_seq_material,
				ds_cabecalho,
				ds_rodape,
				dt_atualizacao,
				nm_usuario,
				ie_padrao,
				ie_mapa_laudo,
				nr_seq_metodo,
				nr_seq_superior,
				ds_regra,
				dt_inicio_vigencia,
				dt_fim_vigencia)
			values (nr_seq_exame_w,
				nr_seq_formato_w,
				nr_seq_material_w,
				ds_cabecalho_w,
				ds_rodape_w,
				clock_timestamp(),
				nm_usuario_p,
				ie_padrao_ww,
				ie_mapa_laudo_w,
				nr_seq_metodo_w,
				nr_seq_superior_w,
				ds_regra_w,
				dt_inicio_vigencia_format_w,
				dt_fim_vigencia_format_w);

			insert into exame_lab_texto(nr_seq_formato,
				dt_atualizacao,
				nm_usuario,
				ds_formato)
			SELECT	nr_seq_formato_w,
				clock_timestamp(),
				nm_usuario_p,
				' '
			;

			if (ds_formato_w <> ' ') then

				CALL COPIA_CAMPO_LONG_DE_PARA('EXAME_LAB_TEXTO','DS_FORMATO',' where nr_seq_formato = :nr_seq_formato ','nr_seq_formato='||nr_seq_formato_wW,
					'EXAME_LAB_TEXTO','DS_FORMATO', ' where nr_seq_formato = :nr_seq_formato','nr_seq_formato='||nr_seq_formato_w);
			end if;


			nr_seq_formato_item_w	:= nr_seq_formato_w;

			open C60;
			loop
			fetch C60 into	ds_texto_w,
					nr_linha_w,
					nr_coluna_w,
					ds_regra_ww;
			EXIT WHEN NOT FOUND; /* apply on C60 */

				nr_seq_formato_item_w	:= nr_seq_formato_item_w + 1;

				insert into exame_lab_format_item(nr_seq_formato,
					nr_sequencia,
					nr_seq_exame,
					ds_texto,
					nr_linha,
					nr_coluna,
					dt_atualizacao,
					nm_usuario,
					ds_regra)
				values (nr_seq_formato_w,
					nr_seq_formato_item_w,
					nr_seq_exame_w,
					ds_texto_w,
					nr_linha_w,
					nr_coluna_w,
					clock_timestamp(),
					nm_usuario_p,
					ds_regra_ww);
			end loop;
			close C60;
			end;
		end loop;
		close C50;
	end if;

	if (ie_liberacao_p = 'S') then

		open C80;
		loop
		fetch c80 into	cd_estabelecimento_w,
				cd_perfil_w,
				nm_usuario_lib_w;
		EXIT WHEN NOT FOUND; /* apply on C80 */

			select	nextval('exame_lab_liberacao_seq')
			into STRICT	nr_seq_liberacao_w
			;

			insert into exame_lab_liberacao(nr_seq_exame,
				nr_sequencia,
				cd_estabelecimento,
				dt_atualizacao,
				nm_usuario,
				cd_perfil,
				nm_usuario_lib)
			values (nr_seq_exame_w,
				nr_seq_liberacao_w,
				cd_estabelecimento_w,
				clock_timestamp(),
				nm_usuario_p,
				cd_perfil_w,
				nm_usuario_lib_w);
		end loop;
		close C80;
	end if;

	if (ie_equipamento_p = 'S') then

		open C90;
		loop
		fetch C90 into 	cd_equipamento_w,
				cd_exame_equip_w,
				ie_padrao_w,
				nr_seq_mat_equip_w,
				cd_material_integr_w,
				ds_tempo_w,
				ds_conservante_integr_w,
				cd_formato_integracao_w,
				ie_tipo_atend_equip_w,
				ie_urg_equip_w;
		EXIT WHEN NOT FOUND; /* apply on C90 */

			select	nextval('lab_exame_equip_seq')
			into STRICT	nr_seq_equip_w
			;

			insert into lab_exame_equip(nr_seq_exame,
				nr_sequencia,
				cd_equipamento,
				cd_exame_equip,
				ie_padrao,
				dt_atualizacao,
				nm_usuario,
				nr_seq_material,
				cd_material_integr,
				ds_tempo,
				ds_conservante_integr,
				cd_formato_integracao,
				ie_tipo_atendimento,
				ie_urgente)
			values (nr_seq_exame_w,
				nr_seq_equip_w,
				cd_equipamento_w,
				cd_exame_equip_w,
				ie_padrao_w,
				clock_timestamp(),
				nm_usuario_p,
				nr_seq_mat_equip_w,
				cd_material_integr_w,
				ds_tempo_w,
				ds_conservante_integr_w,
				cd_formato_integracao_w,
				ie_tipo_atend_equip_w,
				ie_urg_equip_w);
		end loop;
		close C90;
	end if;
end loop;
close C10;
commit;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE lab_copiar_exame (nr_seq_exame_p bigint, nr_seq_grupo_dest_p bigint, ie_metodo_p text, ie_material_p text, ie_referencia_p text, ie_opcional_p text, ie_convenio_p text, ie_pseudonimo_p text, ie_dependente_p text, ie_formato_p text, ie_liberacao_p text, ie_equipamento_p text, ie_filhos_p text, ie_frasco_p text, nm_usuario_p text) FROM PUBLIC;

