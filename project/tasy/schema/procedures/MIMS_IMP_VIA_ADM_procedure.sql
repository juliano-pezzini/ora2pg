-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE mims_imp_via_adm ( ie_via_aplicacao_p text, ds_via_aplicacao_p text, nm_usuario_p text, nr_mims_ver_p bigint) AS $body$
DECLARE




qt_reg_w  bigint;

via_aplicacao_w  imp_via_aplicacao%rowtype;




BEGIN



select count(1)

into STRICT qt_reg_w

from imp_via_aplicacao

where ie_via_aplicacao = ie_via_aplicacao_p;



if (qt_reg_w = 0) then

 via_aplicacao_w.ie_via_aplicacao := ie_via_aplicacao_p;

 via_aplicacao_w.ds_via_aplicacao := ds_via_aplicacao_p;

 via_aplicacao_w.nm_usuario  := nm_usuario_p;

 via_aplicacao_w.nm_usuario_nrec  := nm_usuario_p;

 via_aplicacao_w.dt_atualizacao  := clock_timestamp();

 via_aplicacao_w.dt_atualizacao_nrec := clock_timestamp();

 via_aplicacao_w.ie_situacao  := 'A';

 via_aplicacao_w.ie_gera_diluicao := 'S';

 via_aplicacao_w.NR_SEQ_MIMS_VERSION := nr_mims_ver_p;


 insert into imp_via_aplicacao values (via_aplicacao_w.*);

-- commit;
end if;



end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE mims_imp_via_adm ( ie_via_aplicacao_p text, ds_via_aplicacao_p text, nm_usuario_p text, nr_mims_ver_p bigint) FROM PUBLIC;

