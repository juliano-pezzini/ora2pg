-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE dar_criar_dashboard_tab (nr_sequencia_p dar_dashboard_tabs.nr_sequencia%type, ds_dashboard_p dar_dashboard_tabs.ds_dashboard%type, nr_seq_dimensao_p dar_dashboard_tabs.nr_seq_dimensao%type, nr_seq_quantitativo_p dar_dashboard_tabs.nr_seq_quantitativo%type, nr_seq_dashboard_p dar_dashboard_tabs.nr_seq_dashboard%type, ie_operacao_p dar_dashboard_tabs.ie_operacao%type, ie_tipo_grafico_p dar_dashboard_tabs.ie_tipo_grafico%type, ds_texto_imagem_p dar_dashboard_tabs.ds_texto_imagem%type ) AS $body$
DECLARE


   nr_sequencia_w               dar_dashboard_tabs.nr_sequencia%type;


BEGIN
   --
   nr_sequencia_w := nr_sequencia_p;
   -- se for novo registro
   if (coalesce(nr_sequencia_p, 0) = 0) then
      -- insert record
      insert into dar_dashboard_tabs(nr_sequencia,
          ds_dashboard,
          nr_seq_dimensao,
          nr_seq_quantitativo,
          ie_operacao,
          dt_atualizacao,
          nm_usuario,
          dt_atualizacao_nrec,
          nm_usuario_nrec,
        nr_seq_dashboard,
        ie_tipo_grafico,
        nr_seq_order,
        nr_seq_tab,
      ds_texto_imagem)
      values (nextval('dar_dashboard_seq'),
          ds_dashboard_p,
          nr_seq_dimensao_p,
          nr_seq_quantitativo_p,
          ie_operacao_p,
        clock_timestamp(),
          wheb_usuario_pck.get_nm_usuario,
          clock_timestamp(),
          wheb_usuario_pck.get_nm_usuario,
        nr_seq_dashboard_p,
        ie_tipo_grafico_p,
        nextval('dar_dashboard_seq'),
        nextval('dar_dashboard_seq'),
      ds_texto_imagem_p)
       returning nr_sequencia INTO nr_sequencia_w;
   else
      -- Update record
      update dar_dashboard_tabs
         set ds_dashboard           = ds_dashboard_p,
             nr_seq_dimensao        = nr_seq_dimensao_p,
             nr_seq_quantitativo    = nr_seq_quantitativo_p,
             ie_operacao         = ie_operacao_p,
          ie_tipo_grafico        = ie_tipo_grafico_p,
       ds_texto_imagem        = ds_texto_imagem_p
       where nr_sequencia = nr_sequencia_w;
   end if;
   --
   commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE dar_criar_dashboard_tab (nr_sequencia_p dar_dashboard_tabs.nr_sequencia%type, ds_dashboard_p dar_dashboard_tabs.ds_dashboard%type, nr_seq_dimensao_p dar_dashboard_tabs.nr_seq_dimensao%type, nr_seq_quantitativo_p dar_dashboard_tabs.nr_seq_quantitativo%type, nr_seq_dashboard_p dar_dashboard_tabs.nr_seq_dashboard%type, ie_operacao_p dar_dashboard_tabs.ie_operacao%type, ie_tipo_grafico_p dar_dashboard_tabs.ie_tipo_grafico%type, ds_texto_imagem_p dar_dashboard_tabs.ds_texto_imagem%type ) FROM PUBLIC;

