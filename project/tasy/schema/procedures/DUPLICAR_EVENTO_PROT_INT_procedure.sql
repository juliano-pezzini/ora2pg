-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_evento_prot_int ( NR_SEQUENCIA_P PROTOCOLO_INTEGRADO_EVENTO.NR_SEQUENCIA%TYPE ) AS $body$
DECLARE

    NM_USUARIO_P varchar(255) := wheb_usuario_pck.get_nm_usuario;

    copy_suffix_w varchar(200) := '-Copy';

BEGIN
    INSERT INTO PROTOCOLO_INTEGRADO_EVENTO(
        NR_SEQUENCIA,
        DT_ATUALIZACAO,
        nm_usuario,
        dt_atualizacao_nrec,
        nm_usuario_nrec,
        DS_EVENTO,
        IE_TIPO_EVENTO,
        NR_DIA_EVENTO,
        NR_SEQ_PONTO_VERIFICACAO,
        NR_SEQ_ETAPA,
        DS_EVENTO_PACIENTE,
        IE_TIPO_AGENDAMENTO,
        CD_ESPECIALIDADE,
        IE_OCULTAR_VISAO_PACIENTE,
        IE_TIPO_ATENDIMENTO,
        IE_CLINICA,
        CD_PROCEDIMENTO,
        IE_ORIGEM_PROCED,
        CD_PROTOCOLO,
        NR_SEQ_GRUPO_EXAME_LAB,
        NR_SEQ_PROTOCOLO,
        NR_SEQ_TIPO_CONSULTA,
        NR_DIAS_ANT,
        NR_DIAS_DEP,
        NR_SEQ_DISPOSITIVO,
        NR_SEQ_EVENTO,
        NR_SEQ_ESCALA,
        NR_SEQ_SCORE_FLEX,
        NR_SEQ_SCORE_FLEX_II,
        NR_SEQ_INTERVENCAO,
        NR_SEQ_ORDEM,
        NR_SEQ_CLASSIF,
        IE_ACAO,
        DS_RESULTADO_EVENTO,
        IE_EVENTO_CRITICO,
        NR_SEQ_GRU_EX_NAO_LAB,
        DT_PROV_PARTO,
        CD_CLASSIF_SETOR,
        IE_DOSE,
        NR_SEQ_VACINA,
        DT_AVALIACAO,
        IE_TIPO,
        CD_ESPECIALIDADE_MEDICO,
        IE_EVOLUCAO_CLINICA,
        NR_SEQ_PROGRAMA_SAUDE,
        NR_SEQ_TEMPLATE,
        NR_SEQ_AVALIACAO,
        NR_DIA_PROTOCOLO
    )
    SELECT 
        nextval('protocolo_integrado_evento_seq'),
        clock_timestamp(),
        NM_USUARIO_P,
        clock_timestamp(),
        NM_USUARIO_P,
        a.DS_EVENTO || copy_suffix_w,
        a.IE_TIPO_EVENTO,
        a.NR_DIA_EVENTO,
        a.NR_SEQ_PONTO_VERIFICACAO,
        a.NR_SEQ_ETAPA,
        a.DS_EVENTO_PACIENTE,
        a.IE_TIPO_AGENDAMENTO,
        a.CD_ESPECIALIDADE,
        a.IE_OCULTAR_VISAO_PACIENTE,
        a.IE_TIPO_ATENDIMENTO,
        a.IE_CLINICA,
        a.CD_PROCEDIMENTO,
        a.IE_ORIGEM_PROCED,
        a.CD_PROTOCOLO,
        a.NR_SEQ_GRUPO_EXAME_LAB,
        a.NR_SEQ_PROTOCOLO,
        a.NR_SEQ_TIPO_CONSULTA,
        a.NR_DIAS_ANT,
        a.NR_DIAS_DEP,
        a.NR_SEQ_DISPOSITIVO,
        a.NR_SEQ_EVENTO,
        a.NR_SEQ_ESCALA,
        a.NR_SEQ_SCORE_FLEX,
        a.NR_SEQ_SCORE_FLEX_II,
        a.NR_SEQ_INTERVENCAO,
        a.NR_SEQ_ORDEM,
        a.NR_SEQ_CLASSIF,
        a.IE_ACAO,
        a.DS_RESULTADO_EVENTO,
        a.IE_EVENTO_CRITICO,
        a.NR_SEQ_GRU_EX_NAO_LAB,
        a.DT_PROV_PARTO,
        a.CD_CLASSIF_SETOR,
        a.IE_DOSE,
        a.NR_SEQ_VACINA,
        a.DT_AVALIACAO,
        a.IE_TIPO,
        a.CD_ESPECIALIDADE_MEDICO,
        a.IE_EVOLUCAO_CLINICA,
        a.NR_SEQ_PROGRAMA_SAUDE,
        a.NR_SEQ_TEMPLATE,
        a.NR_SEQ_AVALIACAO,
        a.NR_DIA_PROTOCOLO
    FROM PROTOCOLO_INTEGRADO_EVENTO a
    WHERE a.NR_SEQUENCIA = NR_SEQUENCIA_P;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_evento_prot_int ( NR_SEQUENCIA_P PROTOCOLO_INTEGRADO_EVENTO.NR_SEQUENCIA%TYPE ) FROM PUBLIC;

