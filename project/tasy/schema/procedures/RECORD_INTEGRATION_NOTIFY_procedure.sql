-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE record_integration_notify (cd_person_p text, nr_encounter_p bigint, ie_type_record_p text, nr_seq_record_p bigint, nr_seq_record_comp_p bigint, ie_trigger_p text) AS $body$
DECLARE


nm_usuario_w   usuario.nm_usuario%type;

BEGIN
begin
nm_usuario_w := coalesce(wheb_usuario_pck.get_nm_usuario,'Tasy');

insert into integration_notifications(nr_sequencia,
                                       dt_record,
                                       dt_atualizacao,
                                       nm_usuario,
                                       cd_person,
                                       nr_encounter,
                                       ie_type_record,
                                       nr_seq_record,
                                       nr_seq_record_comp,
                                       ds_stack,
                                       ie_viewed)
values (nextval('integration_notifications_seq'),
                                       clock_timestamp(),
                                       clock_timestamp(),
                                       nm_usuario_w,
                                       cd_person_p,
                                       nr_encounter_p,
                                       ie_type_record_p,
                                       nr_seq_record_p,
                                       nr_seq_record_comp_p,
                                       substr(dbms_utility.format_call_stack,1,1500),
                                       'N');

if (ie_trigger_p = 'N') then
   commit;
end if;

exception
when others then
	null;
end;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE record_integration_notify (cd_person_p text, nr_encounter_p bigint, ie_type_record_p text, nr_seq_record_p bigint, nr_seq_record_comp_p bigint, ie_trigger_p text) FROM PUBLIC;

