-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE definir_valores_conta ( nr_interno_conta_p conta_paciente.nr_interno_conta%type, nm_usuario_p text, pr_coseguro_hosp_p conta_paciente.pr_coseguro_hosp%type, pr_coseguro_honor_p conta_paciente.pr_coseguro_honor%type, pr_coseg_nivel_hosp_p conta_paciente.pr_coseg_nivel_hosp%type, vl_coseguro_hosp_p conta_paciente.vl_coseguro_hosp%type, vl_coseguro_honor_p conta_paciente.vl_coseguro_honor%type, vl_coseg_nivel_hosp_p conta_paciente.vl_coseg_nivel_hosp%type, vl_deduzido_p conta_paciente.vl_deduzido%type, vl_base_conta_p conta_paciente.vl_base_conta%type, vl_maximo_coseguro_p conta_paciente.vl_maximo_coseguro%type) AS $body$
BEGIN

update	conta_paciente
set	pr_coseguro_hosp	= pr_coseguro_hosp_p,
	pr_coseguro_honor	= pr_coseguro_honor_p,
	pr_coseg_nivel_hosp	= pr_coseg_nivel_hosp_p,
	vl_coseguro_hosp	= vl_coseguro_hosp_p,
	vl_coseguro_honor	= vl_coseguro_honor_p,
	vl_coseg_nivel_hosp	= vl_coseg_nivel_hosp_p,
	vl_deduzido		= vl_deduzido_p,
	vl_base_conta		= vl_base_conta_p,
	vl_maximo_coseguro	= vl_maximo_coseguro_p,
	nm_usuario	= nm_usuario_p,
	dt_atualizacao	= clock_timestamp(),
	dt_definicao_conta = clock_timestamp()
where	nr_interno_conta = nr_interno_conta_p;

commit;

if (pkg_i18n.get_user_locale = 'es_CO') then
    CALL processar_conta_col(nr_interno_conta_p,nm_usuario_p,'P');
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE definir_valores_conta ( nr_interno_conta_p conta_paciente.nr_interno_conta%type, nm_usuario_p text, pr_coseguro_hosp_p conta_paciente.pr_coseguro_hosp%type, pr_coseguro_honor_p conta_paciente.pr_coseguro_honor%type, pr_coseg_nivel_hosp_p conta_paciente.pr_coseg_nivel_hosp%type, vl_coseguro_hosp_p conta_paciente.vl_coseguro_hosp%type, vl_coseguro_honor_p conta_paciente.vl_coseguro_honor%type, vl_coseg_nivel_hosp_p conta_paciente.vl_coseg_nivel_hosp%type, vl_deduzido_p conta_paciente.vl_deduzido%type, vl_base_conta_p conta_paciente.vl_base_conta%type, vl_maximo_coseguro_p conta_paciente.vl_maximo_coseguro%type) FROM PUBLIC;

