-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE cpoe_reverter_susp_item ( ie_tipo_item_p text, nr_sequencia_p bigint, nm_usuario_p text) AS $body$
BEGIN

	if ((ie_tipo_item_p = 'N') or (ie_tipo_item_p = 'S')) then--Dietas
		update 	cpoe_dieta
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao  = NULL,
				ie_forma_suspensao  = NULL,
				Nr_Seq_Motivo_Susp  = NULL,
				ds_motivo_susp  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;

	elsif ((ie_tipo_item_p = 'M') or (ie_tipo_item_p = 'MAT') or (ie_tipo_item_p = 'MA')) then--Materiais
		update 	cpoe_material
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao = NULL,
				ie_forma_suspensao  = NULL,
				nr_seq_motivo_susp  = NULL,
				ds_motivo_susp  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;

	elsif (ie_tipo_item_p = 'P') then--Procedimento
		update 	cpoe_procedimento
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao  = NULL,
				ie_forma_suspensao  = NULL,
				nr_seq_motivo_susp  = NULL,
				ds_motivo_susp  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;

		update 	cpoe_material
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao = NULL,
				ie_forma_suspensao  = NULL,
				Nr_Seq_Motivo_Susp  = NULL,
				ds_motivo_susp  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_seq_procedimento = nr_sequencia_p;
		
	elsif (ie_tipo_item_p = 'G') then--Gasoterapia
		update 	cpoe_gasoterapia
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao  = NULL,
				ie_forma_suspensao  = NULL,
				nr_seq_motivo_susp  = NULL,
				ds_motivo_susp  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;

	elsif (ie_tipo_item_p = 'R') then--Recomendacao
		update 	cpoe_recomendacao
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao  = NULL,
				ie_forma_suspensao  = NULL,
				nr_seq_motivo_susp  = NULL,
				ds_motivo_susp  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;
	
	elsif (ie_tipo_item_p = 'DI') or (ie_tipo_item_p = 'DP') or (ie_tipo_item_p = 'D')then --Dialise
		update  cpoe_dialise
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao  = NULL,
				ie_forma_suspensao  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;
	
	elsif (ie_tipo_item_p = 'H') then --Hemoterapia
		update  cpoe_hemoterapia
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao  = NULL,
				ie_forma_suspensao  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;		
	
    elsif (ie_tipo_item_p = 'AP') then --Anatomia Patologica
		update cpoe_anatomia_patologica
		set	    nm_usuario_susp	 = NULL,
				dt_suspensao  = NULL,
				ie_forma_suspensao  = NULL,
				nr_seq_motivo_susp  = NULL,
				ds_motivo_susp  = NULL,
				dt_lib_suspensao  = NULL
		where  	nr_sequencia = nr_sequencia_p;				
	end if;	
	
commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cpoe_reverter_susp_item ( ie_tipo_item_p text, nr_sequencia_p bigint, nm_usuario_p text) FROM PUBLIC;

