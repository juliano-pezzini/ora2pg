-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_inserir_uuid (ie_database_p text, cd_estabelecimento_p bigint) AS $body$
DECLARE


cd_client_uuid_w	varchar(40);
cd_tasy_database_w	varchar(40);
cd_cgc_w		varchar(14);
registro_w		varchar(1);
valor_w			integer;


BEGIN
	CALL exec_sql_dinamico('INSERIR_UUID', 'delete from tasy_uuid');

	select	tasy_database_uuid
	into STRICT	cd_tasy_database_w
	;

	select	generate_uuid
	into STRICT	cd_client_uuid_w
	;

	select	obter_cgc_estabelecimento(cd_estabelecimento_p)
	into STRICT	cd_cgc_w
	;

	insert into tasy_uuid(CD_TASY_DATABASE, CD_CLIENT_UUID, CD_CGC, IE_DATABASE, IE_PHILIPS_API)
	values (cd_tasy_database_w, cd_client_uuid_w, cd_cgc_w, ie_database_p, 'S');

	commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_inserir_uuid (ie_database_p text, cd_estabelecimento_p bigint) FROM PUBLIC;

