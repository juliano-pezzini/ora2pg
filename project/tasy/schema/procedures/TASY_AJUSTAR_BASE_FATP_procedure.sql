-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_ajustar_base_fatp ( nm_usuario_p text) AS $body$
DECLARE


dt_versao_atual_cliente_w 		timestamp;
qt_registro_w			bigint;
nm_Tablespace_w			varchar(255);

ds_comando_w			varchar(2000);
qt_atual_w			bigint;
qt_seq_w			bigint;
nm_sequence_w			varchar(50);
qt_seq_incr_atr_w		bigint;
qt_seq_max_w			bigint;


BEGIN

CALL abortar_se_base_wheb();

dt_versao_atual_cliente_w := coalesce(to_date(to_char(obter_data_geracao_versao-1,'dd/mm/yyyy') ||' 23:59:59','dd/mm/yyyy hh24:mi:ss'),clock_timestamp() - interval '90 days');

if (dt_versao_atual_cliente_w < to_date('18/06/2010','dd/mm/yyyy')) then
	CALL baca_ajustar_vl_nota_qualidade();
end if;

if (dt_versao_atual_cliente_w < to_date('30/06/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson','alter table CLASSIF_PESSOA drop column IE_GERAR_CAD_PF');
end if;

if (dt_versao_atual_cliente_w < to_date('22/07/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson','alter table SAC_RESPONSAVEL drop column NR_SEQ_TIPO_OCORRENCIA');
	CALL exec_sql_dinamico('Anderson','alter table SAC_RESPONSAVEL drop constraint SACRESP_SACTIOC_FK');
	CALL exec_sql_dinamico('Anderson','drop index SACRESP_SACTIOC_FK_I');
end if;

if (dt_versao_atual_cliente_w < to_date('24/08/2010','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	sismama_anamnese_rad;

	if (coalesce(qt_registro_w,0) > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	user_tab_columns
		where	table_name 	= 'SISMAMA_ANAMNESE_RAD'
		and	column_name 	= 'DT_TUMORECTOMIA_DIR'
		and	data_type	= 'DATE';

		if (coalesce(qt_registro_w,0) > 0) then
			CALL sismama_altera_formato_data();
		end if;
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/09/2010','dd/mm/yyyy')) then
	begin
	update	sus_fpo_regra
	set	ie_tipo_financiamento = '01'
	where	ie_tipo_financiamento = 'AB';

	update	sus_fpo_regra
	set	ie_tipo_financiamento = '04'
	where	ie_tipo_financiamento = 'FAEC';

	update	sus_fpo_regra
	set	ie_tipo_financiamento = '06'
	where	ie_tipo_financiamento = 'MAC';
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('21/09/2010','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'alter table SUS_FPO_REGRA add ie_tipo_atendimento2 varchar2(20)');  	/*Adiciona um campo temporário*/
	CALL exec_sql_dinamico('Anderson', 'update SUS_FPO_REGRA set ie_tipo_atendimento2 = ie_tipo_atendimento');	/*Migra as informações para o novo campo*/
	CALL exec_sql_dinamico('Anderson', 'update SUS_FPO_REGRA set ie_tipo_atendimento = null');			/*Limpa o campo para poder fazer o modify*/
	CALL exec_sql_dinamico('Anderson', 'alter table SUS_FPO_REGRA modify ie_tipo_atendimento varchar2(20)');	/*Faz o modify do campo*/
	CALL exec_sql_dinamico('Anderson', 'update SUS_FPO_REGRA set ie_tipo_atendimento = ie_tipo_atendimento2');	/*Migra as informações para o campo alterado*/
	CALL exec_sql_dinamico('Anderson', 'alter table SUS_FPO_REGRA drop column ie_tipo_atendimento2');		/*Dropa o campo temporário*/
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('23/09/2010','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'PARAMETRO_FATURAMENTO'
	and	column_name 	= 'IE_SEPARA_CONTA_SETOR';

	if (qt_registro_w > 0) then
		begin
		CALL baca_separa_conta_setor();
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('23/09/2010','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 1 where cd_dominio = 1197 and vl_dominio = ''E''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 2 where cd_dominio = 1197 and vl_dominio = ''O''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 3 where cd_dominio = 1197 and vl_dominio = ''B''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 4 where cd_dominio = 1197 and vl_dominio = ''R''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 5 where cd_dominio = 1197 and vl_dominio = ''P''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 6 where cd_dominio = 1197 and vl_dominio = ''N''');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('28/09/2010','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set ds_valor_dominio = ''Encerrada com resposta ao cliente'' where cd_dominio = 1079 and vl_dominio = ''C''');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/10/2010','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set ds_valor_dominio = ''Folga'' where cd_dominio = 3661 and vl_dominio = 2');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('11/10/2010','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'alter table man_plano_insp_regra drop column nr_seq_tipo_os');
	CALL exec_sql_dinamico('Anderson', 'alter table man_plano_insp_regra drop constraint MANPIRE_MANTIOS_FK');
	CALL exec_sql_dinamico('Anderson', 'alter table man_plano_insp_regra drop column CD_SETOR_ATENDIMENTO');
	CALL exec_sql_dinamico('Anderson', 'alter table man_plano_insp_regra drop column NR_SEQ_ANDAR');
	CALL exec_sql_dinamico('Anderson', 'alter table man_plano_insp_regra drop constraint MANPIRE_SETATEN_FK');
	CALL exec_sql_dinamico('Anderson', 'alter table man_plano_insp_regra drop constraint MANPIRE_ANDSETO_FK');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('15/10/2010','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'drop table w_eis_conta_pendente_relat');
	CALL exec_sql_dinamico('Anderson', 'create table w_eis_conta_pendente_relat (
					DS_CONVENIO VARCHAR2(255),
					DS_CATEGORIA VARCHAR2(80),
					NR_ATENDIMENTO NUMBER(10),
					DT_ENTRADA DATE,
					DT_ALTA DATE,
					NM_PESSOA_FISICA VARCHAR2(60),
					NR_PRONTUARIO NUMBER(10),
					DS_PROCEDIMENTO VARCHAR2(255),
					NR_INTERNO_CONTA NUMBER(10),
					NM_USUARIO VARCHAR2(15),
					VL_CONTA NUMBER(15,2),
					VL_CONTA_SUS NUMBER(15,2),
					NM_MEDICO_EXEC VARCHAR2(60),
					DS_SETOR VARCHAR2(100),
					NR_DOC_CONVENIO VARCHAR2(30),
					IE_STATUS_CONTA VARCHAR2(30),
					NM_USUARIO_CONTA VARCHAR2(15),
					CD_CONVENIO NUMBER(5),
					CD_SETOR_ATENDIMENTO NUMBER(5),
					DS_ETAPA VARCHAR2(80),
					IE_TIPO_ATENDIMENTO NUMBER(3),
					DS_TIPO_ATENDIMENTO VARCHAR2(80),
					CD_SETOR_DESTINO NUMBER(5),
					DS_SETOR_DESTINO VARCHAR2(100),
					DS_SETOR_ETAPA VARCHAR2(100),
					DT_ULTIMA_ETAPA DATE,
					NM_ULT_USUARIO_ETAPA VARCHAR2(15),
					NR_TITULO_CONTA VARCHAR2(255),
					NM_PESSOA_ETAPA VARCHAR2(80),
					DS_SETOR_ULT_INT VARCHAR2(100),
					DS_MOTIVO_DEVOL_ETAPA VARCHAR2(80),
					CD_CARTEIRINHA VARCHAR2(100),
					CD_RESPONSAVEL VARCHAR2(10))');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('19/10/2010','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 1 where cd_dominio = 1046 and vl_dominio = ''E''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 2 where cd_dominio = 1046 and vl_dominio = ''U''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 3 where cd_dominio = 1046 and vl_dominio = ''A''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 4 where cd_dominio = 1046 and vl_dominio = ''M''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 5 where cd_dominio = 1046 and vl_dominio = ''B''');
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set nr_seq_apresent = 6 where cd_dominio = 1046 and vl_dominio = ''S''');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('05/11/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson', 'alter table qua_tipo_nao_conform modify cd_empresa null');
end if;

if (dt_versao_atual_cliente_w < to_date('08/11/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson', 'update funcao set ie_situacao = ''W'' where cd_funcao = 296');
end if;

if (dt_versao_atual_cliente_w < to_date('31/12/2010','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1321
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1321 and cd_reg_interface = 1)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('04/12/2010','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1321
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1321 and cd_reg_interface = 1)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('31/12/2010','dd/mm/yyyy')) then
	CALL baca_alter_campo_nr_cartao_sus();
end if;

if (dt_versao_atual_cliente_w < to_date('17/11/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson', 	'update funcao_parametro set ds_parametro = ''Inativo'', ' ||
					'ds_observacao = ''Inativado devido à existência do filtro por estabelecimento e do parâmetro [57] já existente.'' ' ||
					' where cd_funcao = 2000 and nr_sequencia = 62');
end if;

if (dt_versao_atual_cliente_w < to_date('20/11/2010','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_ROTA_INSP_ITEM_ATIV'
	and	column_name= 'IE_SITUACAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 	'alter table man_rota_insp_item_ativ drop column ie_situacao');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('20/11/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('gfsantos', 		'Update convenio_estabelecimento '||
					'set ie_valor_original_glosa = null '||
					'where ie_valor_original_glosa is not null');
end if;

if (dt_versao_atual_cliente_w < to_date('22/11/2010','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'SUS_REGRA_LAUDO_AIH';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table SUS_REGRA_LAUDO_AIH');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('27/11/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson', 	'update funcao_parametro set ds_parametro = ''Inativo'', ' ||
					'ds_observacao = ''Parâmetro inativado devido à existência das regras de manutenção (evento criação de anexo)'' ' ||
					' where cd_funcao = 299 and nr_sequencia = 193');
end if;

if (dt_versao_atual_cliente_w < to_date('09/12/2010','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson', 	'update tabela_atributo set ds_atributo = ''Informar o número da OS da qual esta depende'' ' ||
					'where nm_atributo = ''NR_SEQ_SUPERIOR'' and nm_tabela = ''MAN_ORDEM_SERVICO''');
end if;

if (dt_versao_atual_cliente_w < to_date('11/12/2010','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_HORARIO_TRABALHO'
	and	column_name= 'NR_SEQ_GRUPO_TRABALHO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_HORARIO_TRABALHO drop column NR_SEQ_GRUPO_TRABALHO');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('11/01/2011','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where	cd_dominio = 3661
	and	vl_dominio = '10';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'delete from valor_dominio where cd_dominio = 3661 and vl_dominio = ''10''');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('17/01/2011','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	funcao_parametro
	where	cd_funcao = 1131
	and	nr_sequencia = 3;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos',	'update funcao_parametro set ds_parametro = ''Permite visualizar a pasta Resultados'', '||
						'ds_observacao	= ''Identifica se o usuário poderá visualizar a pasta Resultados, na consulta das regras.'' '||
						'where	cd_funcao = 1131 and nr_sequencia = 3');
	end if;
end if;


if (dt_versao_atual_cliente_w < to_date('24/01/2011','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'IE_DIA_UTIL1'
	and	table_name 	= 'W_ESCALA_PLANTAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL1');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL2');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL3');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL4');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL5');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL6');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL7');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL8');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL9');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL10');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL11');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL12');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL13');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL14');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL15');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL16');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL17');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL18');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL19');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL20');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL21');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL22');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL23');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL24');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL25');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL26');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL27');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL28');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL29');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL30');
		CALL exec_sql_dinamico('Anderson', 'alter table W_ESCALA_PLANTAO drop column IE_DIA_UTIL31');
	end if;
end if;
if (dt_versao_atual_cliente_w < to_date('01/02/2011','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('ralves', 'update valor_dominio set ie_situacao = ''I'' where cd_dominio = 1197 and vl_dominio = ''E'' ');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('21/02/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	proj_ata
	where	ie_tipo_ata = 'Q';

	if (qt_registro_w = 0) then
		CALL baca_import_qua_proj_ata();
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('24/02/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'W_INTERF_HISCOLO'
	and	column_name= 'C_IDENT';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table W_INTERF_HISCOLO drop column C_IDENT');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'W_INTERF_HISCOLO'
	and	column_name= 'C_ID_IDENT';

	if (qt_registro_w = 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table W_INTERF_HISCOLO add C_ID_IDENT varchar2(12)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('08/03/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'AUTOR_DIAG_DOENCA'
	and	column_name= 'CD_MEDICO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table AUTOR_DIAG_DOENCA drop column CD_MEDICO');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/03/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	sus_inconsistencia
	where	cd_inconsistencia = 154;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'update sus_inconsistencia '||
					'set ds_inconsistencia = ''Consiste quantidade de procedimentos realizados nos motivo de saída 21 e 18'' '||
					'where cd_inconsistencia = 154');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('02/03/2011','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 	' update funcao_parametro set ds_parametro = ''Focar na pasta do item autorizado conforme o tipo de autorização'' '||
					' where cd_funcao = 988 and nr_sequencia = 20');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('04/03/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'ESTAGIO_AUTOR_USUARIO'
	and	column_name= 'CD_ESTABELECIMENTO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table ESTAGIO_AUTOR_USUARIO drop column CD_ESTABELECIMENTO');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('08/03/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'QT_PRECISAO_INFERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column QT_PRECISAO_INFERIOR');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'QT_PRECISAO_SUPERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column QT_PRECISAO_SUPERIOR');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'NR_SEQ_UNID_MED_PREC_INF';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column NR_SEQ_UNID_MED_PREC_INF');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'NR_SEQ_UNID_MED_PREC_SUP';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column NR_SEQ_UNID_MED_PREC_SUP');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'QT_LIMITE_INFERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column QT_LIMITE_INFERIOR');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'QT_LIMITE_SUPERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column QT_LIMITE_SUPERIOR');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'NR_SEQ_UNID_MED_LIM_SUP';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column NR_SEQ_UNID_MED_LIM_SUP');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_INSPECAO_RESULTADO'
	and	column_name= 'NR_SEQ_UNID_MED_LIM_INF';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_INSPECAO_RESULTADO drop column NR_SEQ_UNID_MED_LIM_INF');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/03/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name = 'PJ_USUARIOS_COMUNICACAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table PJ_USUARIOS_COMUNICACAO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name = 'PJ_REGRA_ENVIO_COMUNIC';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table PJ_REGRA_ENVIO_COMUNIC');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('11/03/2011','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('Anderson', 'update valor_dominio set ds_valor_dominio = ''Ótimo'' where cd_dominio = 1197 and vl_dominio = ''O''');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('14/03/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'WEISFPA_CONPACI_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table W_EIS_FECHAMENTO_PARTIC drop constraint WEISFPA_CONPACI_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'WEISFPA_ATEPACI_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table W_EIS_FECHAMENTO_PARTIC drop constraint WEISFPA_ATEPACI_FK');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('26/03/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2007;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2007)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in(2007)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2007)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('29/03/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_ROTA_INSP_ITEM_RESULT'
	and	column_name= 'QT_PRECISAO_INFERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_ROTA_INSP_ITEM_RESULT drop column QT_PRECISAO_INFERIOR');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_ROTA_INSP_ITEM_RESULT'
	and	column_name= 'QT_PRECISAO_SUPERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_ROTA_INSP_ITEM_RESULT drop column QT_PRECISAO_SUPERIOR');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_ROTA_INSP_ITEM_RESULT'
	and	column_name= 'QT_LIMITE_INFERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_ROTA_INSP_ITEM_RESULT drop column QT_LIMITE_INFERIOR');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'MAN_ROTA_INSP_ITEM_RESULT'
	and	column_name= 'QT_LIMITE_SUPERIOR';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_ROTA_INSP_ITEM_RESULT drop column QT_LIMITE_SUPERIOR');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('20/04/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'TESTE_CASO_TST_ACAO_RESULT'
	and	column_name= 'DT_INICIO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table TESTE_CASO_TST_ACAO_RESULT drop column DT_INICIO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'TESTE_CASO_TST_ACAO_RESULT'
	and	column_name= 'DT_FIM';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table TESTE_CASO_TST_ACAO_RESULT drop column DT_FIM');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('25/04/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'OBTER_STATUS_ATEND_CONTA_EIS'
	and	object_type = 'FUNCTION';

if (qt_registro_w > 0) then
	CALL exec_sql_dinamico('Anderson', 'drop function OBTER_STATUS_ATEND_CONTA_EIS'
);
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('28/04/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'W_EIS_FECHAMENTO_PARTIC_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence W_EIS_FECHAMENTO_PARTIC_SEQ');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('14/05/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'QUA_OBTER_SE_PF_PARTIC_ATA'
	and	object_type = 'FUNCTION';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop function QUA_OBTER_SE_PF_PARTIC_ATA'
);
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('20/05/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'MANREAU_USUARIO_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table MAN_REGRA_ENVIO_ACOMP_USU drop constraint MANREAU_USUARIO_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'MANREAU_USUARIO_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop index MANREAU_USUARIO_FK_I');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('24/05/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'COMINTE_I1';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop index COMINTE_I1');
		CALL exec_sql_dinamico('Anderson', 'create index COMINTE_I1 on COMUNIC_INTERNA(DT_COMUNICADO,NM_USUARIO,CD_PERFIL)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/06/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where	cd_dominio = 1677
	and	vl_dominio in ('RP','RA','PA');

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'delete from valor_dominio where cd_dominio = 1677 and vl_dominio = ''RP''');
		CALL exec_sql_dinamico('Anderson', 'delete from valor_dominio where cd_dominio = 1677 and vl_dominio = ''RA''');
		CALL exec_sql_dinamico('Anderson', 'delete from valor_dominio where cd_dominio = 1677 and vl_dominio = ''PA''');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('21/06/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'MAN_OBTER_PERCENT_ATRASO'
	and	object_type = 'FUNCTION';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop function MAN_OBTER_PERCENT_ATRASO'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'W_PAINEL_OS_RESUMO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table W_PAINEL_OS_RESUMO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'W_PAINEL_OS_RESUMO_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence W_PAINEL_OS_RESUMO_SEQ');
	end if;


	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'W_PAINEL_OS_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence W_PAINEL_OS_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'GERAR_PAINEL_OS'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure GERAR_PAINEL_OS'
);
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('11/07/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name = 'W_SUSAPAC_INTERF_CAB_COORD';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table W_SUSAPAC_INTERF_CAB_COORD');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'W_SUSAPAC_INTERF_CAB_COORD_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence W_SUSAPAC_INTERF_CAB_COORD_SEQ');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('14/07/2011','dd/mm/yyyy')) then
	begin
	update	sus_inconsistencia_laudo
	set	ds_inconsistencia = 'Falta informação da data de início de tratamento para laudo APAC',
		ds_acao_usuario = 'Verificar nos dados do laudo APAC pois é obrigatório a informação da data  de início de tratamento para laudo APAC de quimioterapia e radioterapia.'
	where	cd_inconsistencia = 14;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Cidade natal do paciente deve ser informada'
	where	cd_inconsistencia = 28;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Caráter de internação da AIH diferente de 02 - Urgência, sendo que o procedimento permite',
		ds_acao_usuario = 'Essa inconsistência serve para "avisar" que o procedimento principal da AIH permite cobrança de urgência, mas o caráter de internação não está informado "02 - Urgência".'
	where	cd_inconsistencia = 31;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Data emissão, início validade, final validade, competência, solicitação ou autorização incorreta para a APAC',
		ds_acao_usuario = 'Verificar nos dados da APAC a data de emissão, inicio validade, final validade, competência, solicitação e autorização, pois uma ou mais estão incorretas.'
	where	cd_inconsistencia = 74;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Permanência a maior superior ao permitido',
		ds_acao_usuario = 'A quantidade cobrada de permanência a maior é superior ao permitido, verificar nos procedimentos da conta do paciente.'
	where	cd_inconsistencia = 94;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Motivo de saída não informado ou diferente de alta',
		ds_acao_usuario = 'Verificar o motivo de saída da AIH, pois o mesmo deve ser informado e deve ser motivo de alta.
	11 ALTA CURADO
	12 ALTA MELHORADO
	13 ALTA DA PUERPURA E PERMANENCIA DO RECÉM-NASCIDO
	14 ALTA A PEDIDO
	15 ALTA COM PREVISÃO DE RETORNO PARA ACOMPANHAMENTO DO PACIENTE
	16 ALTA POR EVASÃO
	17 ALTA DA PUERPURA E RECÉM-NASCIDO
	18 ALTA POR OUTROS MOTIVOS'
	where	cd_inconsistencia = 97;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Permanência a maior superior ao permitido',
		ds_acao_usuario = 'A quantidade cobrada de permanência a maior é superior ao permitido, verificar nos procedimentos da conta do paciente.'
	where	cd_inconsistencia = 94;

	update	sus_inconsistencia
	set	ds_acao_usuario = 'Falta dados na informação da área irradiada para APAC de Radioterapia'
	where	cd_inconsistencia = 100;

	update	sus_inconsistencia
	set	ds_acao_usuario = 'Verificar data de início de validade e final de validade da APAC, pois a validade de uma APAC é de 3 meses.'
	where	cd_inconsistencia = 114;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Procedimento principal da AIH não deve ter vínculo com outro procedimento principal'
	where	cd_inconsistencia = 115;

	update	sus_inconsistencia
	set	ds_inconsistencia = 'Procedimento com classificação do serviço incompatível com a informada para o hospital'
	where	cd_inconsistencia = 117;

	update	sus_inconsistencia
	set	ds_acao_usuario = 'Verificar se foi realizada a carga do CEP através do aplicativo SUS Unificado, pois o CEP informado no Cadastro de Pessoa Física não está cadastrado na tabela SUS.'
	where	cd_inconsistencia = 120;

	update	sus_inconsistencia
	set	ds_acao_usuario = 'Falta informação de procedimento compatível com procedimento realizado'
	where	cd_inconsistencia = 133;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'GERAR_CASO_TESTE_OS'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure GERAR_CASO_TESTE_OS'
);
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('15/07/2011','dd/mm/yyyy')) then
	begin
	update	sus_inconsistencia
	set	ds_acao_usuario = 'Verificar nos dados da APAC a data de emissão, início validade, final validade, competência, solicitação e autorização, pois uma ou mais estão incorretas.'
	where	cd_inconsistencia = 74;
	end;
end if;


if (dt_versao_atual_cliente_w < to_date('20/07/2011','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'TESTE_SOFTWARE'
	and	column_name= 'CD_CODIGO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 	'alter table TESTE_SOFTWARE drop column CD_CODIGO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'TESTE_SOFTWARE'
	and	column_name= 'CD_VERSAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 	'alter table TESTE_SOFTWARE drop column CD_VERSAO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'TESTE_SOFTWARE_EXECUCAO'
	and	column_name= 'CD_CODIGO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 	'alter table TESTE_SOFTWARE_EXECUCAO drop column CD_CODIGO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'TESTE_SOFT_EXEC_ACAO'
	and	column_name= 'CD_CODIGO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 	'alter table TESTE_SOFT_EXEC_ACAO drop column CD_CODIGO');
	end if;

	delete from valor_dominio where cd_dominio = 4136 and vl_dominio = 'V';
end if;

if (dt_versao_atual_cliente_w < to_date('20/07/2011','dd/mm/yyyy')) then
	CALL gerar_calib_frequencia();
end if;

if (dt_versao_atual_cliente_w < to_date('28/07/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2106;

	if (qt_registro_w = 0) then
		CALL exec_sql_dinamico('gfsantos', 'insert into interface(select * from tasy_versao.interface where cd_interface = 2106)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg (select * from tasy_versao.interface_reg where cd_interface = 2106)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2106)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('16/09/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2121;

	if (qt_registro_w = 0) then
		CALL exec_sql_dinamico('gfsantos', 'insert into interface(select * from tasy_versao.interface where cd_interface = 2121)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg (select * from tasy_versao.interface_reg where cd_interface = 2121)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2121)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('20/09/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2106;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 	= 2106
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2106)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w	< to_date('21/09/2011','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	man_localizacao_usu_exec
	where	coalesce(ie_gerar_exec_os::text, '') = '';

	if (qt_registro_w > 0)  then
	update	man_localizacao_usu_exec
	set		ie_gerar_exec_os = 'S'
	where	coalesce(ie_gerar_exec_os::text, '') = '';
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('28/09/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2147;

	if (qt_registro_w = 0) then
		CALL exec_sql_dinamico('gfsantos', 'insert into interface(select * from tasy_versao.interface where cd_interface = 2147)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg (select * from tasy_versao.interface_reg where cd_interface = 2147)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2147)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('10/10/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2171;

	if (qt_registro_w = 0) then
		CALL exec_sql_dinamico('gfsantos', 'insert into interface(select * from tasy_versao.interface where cd_interface = 2171)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg (select * from tasy_versao.interface_reg where cd_interface = 2171)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2171)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('14/10/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2147;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface(select * from tasy_versao.interface where cd_interface = 2147)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg (select * from tasy_versao.interface_reg where cd_interface = 2147)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2147)');
		end;
	else
		begin
		delete 	from interface_atributo
		where	cd_interface 	= 2147
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2147)');
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('07/11/2011','dd/mm/yyyy')) then
	CALL baca_acerto_estadio_laudo_sus('Anderson');
end if;

if (dt_versao_atual_cliente_w < to_date('22/11/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	usuario_ordem_grid
	where	cd_funcao = 299
	and	ds_grid_tabela = 'ordem_serv_pendente_dg';

	if (qt_registro_w = 0) then
		update	usuario_ordem_grid
		set	ds_grid_tabela = 'ordem_serv_pendente_dg'
		where	cd_funcao = 299
		and	ds_grid_tabela = 'Pendente_dbg';
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	usuario_regra_grid
	where	cd_funcao = 299
	and	ds_grid_tabela = 'ordem_serv_pendente_dg';

	if (qt_registro_w = 0) then
		update	usuario_regra_grid
		set	ds_grid_tabela = 'ordem_serv_pendente_dg'
		where	cd_funcao = 299
		and	ds_grid_tabela = 'Pendente_dbg';
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('06/12/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'IE_EXIGE_FUNCAO_OS'
	and	table_name 	= 'MAN_EQUIPAMENTO';

	if (qt_registro_w > 0) then
		CALL baca_ajusta_exige_func_equip();
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/12/2011','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'CD_ESTAB_EXECUTOR'
	and	table_name 	= 'SUS_LAUDO_PACIENTE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table SUS_LAUDO_PACIENTE drop column CD_ESTAB_EXECUTOR');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('14/12/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'SUS_LAUDO_PADRAO_DADOS'
	and	column_name 	= 'CD_DIAG_CITO_HIST'
	and	data_type		= 'NUMBER';

	if (qt_registro_w > 0) then
		CALL sus_altera_campo_diag_cito();
	end if;

	end;
end if;

/*Remoção das tabelas e objetos da função Gestão de testes antiga, para reestruturação*/

if (dt_versao_atual_cliente_w < to_date('20/12/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_CASO_EXEC_OS';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_CASO_EXEC_OS');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_CASO_EXEC';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_CASO_EXEC');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_ROTEIRO_EXEC';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_ROTEIRO_EXEC');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_ROT_PAD_CASO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_ROT_PAD_CASO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_ROTEIRO_PADRAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_ROTEIRO_PADRAO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_CASO_INF';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_CASO_INF');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_CASO_PROC';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_CASO_PROC');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'TST_CASO_TESTE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop table TST_CASO_TESTE');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'TST_LIBERAR_CASO_TESTE'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure TST_LIBERAR_CASO_TESTE'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'TST_OBTER_NOME_CASO'
	and	object_type = 'FUNCTION';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop function TST_OBTER_NOME_CASO'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'TST_OBTER_NOME_ROTEIRO'
	and	object_type = 'FUNCTION';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop function TST_OBTER_NOME_ROTEIRO'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_CASO_TESTE_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_CASO_TESTE_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_CASO_PROC_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_CASO_PROC_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_CASO_INF_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_CASO_INF_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_ROTEIRO_PADRAO_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_ROTEIRO_PADRAO_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_ROT_PAD_CASO_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_ROT_PAD_CASO_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_ROTEIRO_EXEC_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_ROTEIRO_EXEC_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_CASO_EXEC_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_CASO_EXEC_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'TST_CASO_EXEC_OS_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop sequence TST_CASO_EXEC_OS_SEQ');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('21/12/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'TST_TESTE_REGRA_TEMPO'
	and	column_name 	= 'IE_FREQUENCIA';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table TST_TESTE_REGRA_TEMPO drop column IE_FREQUENCIA');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('27/12/2011','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name 	= 'MAN_CAUSA_DANO_LIB';

	if (qt_registro_w > 0) then
		CALL man_gerar_causa_dano_lib();
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('10/01/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	sus_laudo_padrao;

	if (qt_registro_w > 0) then

		update	sus_laudo_padrao
		set	nm_usuario_nrec = nm_usuario;

	end if;
	end;
end if;

/*Remoção das tabelas e objetos da função Gestão de testes antiga, para reestruturação*/

if (dt_versao_atual_cliente_w < to_date('20/01/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'TST_TESTE'
	and	column_name 	= 'DS_CONTEUDO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table TST_TESTE drop column DS_CONTEUDO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'TST_TESTE'
	and	column_name 	= 'NR_SEQ_GRUPO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table TST_TESTE drop column NR_SEQ_GRUPO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'TST_TESTE'
	and	column_name 	= 'DS_TITULO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table TST_TESTE drop column DS_TITULO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'TST_TESTE_REGRA_TEMPO'
	and	column_name 	= 'NR_SEQ_FREQUENCIA';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table TST_TESTE_REGRA_TEMPO drop column NR_SEQ_FREQUENCIA');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('25/01/2012','dd/mm/yyyy')) then
	begin
	qt_registro_w := obter_valor_dinamico('select count(*) from qua_evento_paciente where nm_usuario_analise is null and dt_analise is not null', qt_registro_w);

	if (qt_registro_w > 0) then
		CALL baca_atualiza_usu_analise_evto();
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('28/01/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'IE_SITUACAO'
	and	table_name 	= 'REGRA_CONVENIO_PLANO';

	if (coalesce(qt_registro_w,0) > 0) then
		CALL exec_sql_dinamico('Anderson', 'update REGRA_CONVENIO_PLANO set ie_situacao = ''A'' where ie_situacao is null');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'IE_SITUACAO'
	and	table_name 	= 'REGRA_CONV_PLANO_ITEM';

	if (coalesce(qt_registro_w,0) > 0) then
		CALL exec_sql_dinamico('Anderson', 'update REGRA_CONV_PLANO_ITEM set ie_situacao = ''A'' where ie_situacao is null');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('02/02/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	sismama_anamnese_rad;

	if (coalesce(qt_registro_w,0) > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	user_tab_columns
		where	table_name 	= 'SISMAMA_ANAMNESE_RAD'
		and	column_name 	= 'DT_RADIOTERAPIA_DIR'
		and	data_type	= 'DATE';

		if (coalesce(qt_registro_w,0) > 0) then
			CALL sismama_altera_formato_data_2();
		end if;
		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	sismama_mam_anamnese;

	if (coalesce(qt_registro_w,0) > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	user_tab_columns
		where	table_name 	= 'SISMAMA_MAM_ANAMNESE'
		and	column_name 	= 'DT_ULTIMA_MAMOGRAFIA'
		and	data_type	= 'DATE';

		if (coalesce(qt_registro_w,0) > 0) then
			CALL sismama_mam_alter_formato_data();
		end if;
		end;
	end if;
	end;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'QUANACC_UK';

	if (qt_registro_w = 0) then
		select	count(*)
		into STRICT	qt_registro_w
		from	user_indexes
		where	index_name = 'QUANACC_UK';

		if (qt_registro_w > 0) then
			CALL exec_sql_dinamico('Anderson', 'drop index QUANACC_UK');
		end if;

		CALL exec_sql_dinamico('Anderson', 'Alter Table QUA_NAO_CONFORM_CAUSA add ( Constraint QUANACC_UK Unique (NR_SEQ_NAO_CONFORM, NR_SEQ_TIPO_CAUSA, NR_SEQ_TIPO_CAUSA_ESPECIFIC))');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('04/02/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'IE_SITUACAO'
	and	table_name 	= 'QUA_EVENTO_CLASSIF';

	if (coalesce(qt_registro_w,0) > 0) then
		CALL exec_sql_dinamico('Anderson', 'update QUA_EVENTO_CLASSIF set ie_situacao = ''A'' where ie_situacao is null');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('21/02/2012', 'dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('ralves', 	'update	funcao_parametro ' ||
					'set	ds_parametro	= substr(''Autorizar a necessidade de autorização ao cadastrar uma senha'',1,255),' ||
					'	ds_observacao	= substr(''Identifica se o sistema deverá autorizar a necessidade ao inserir uma senha. Ao alterar uma senha existente o sistema não realizará a atualização'',1,4000)' ||
					'where	nr_sequencia		= 146  and	cd_funcao = 3004 ');

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('29/02/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1321
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1321 and cd_reg_interface = 1)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('05/03/2012','dd/mm/yyyy')) then
	begin
	update	sus_inconsistencia_laudo
	set	ds_inconsistencia = 'SISMAMA - Mamografia - Data da liberação deve ser maior ou igual a data de recebimento.'
	where	cd_inconsistencia = 56;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('20/03/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'DS_COORDENADORIA'
	and	table_name 	= 'SUS_MUNICIPIO';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'alter table SUS_MUNICIPIO drop column DS_COORDENADORIA');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('27/03/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'NM_RAZAO_SOCIAL';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column NM_RAZAO_SOCIAL');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'NM_FANTASIA';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column NM_FANTASIA');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'CD_CNPJ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column CD_CNPJ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'NR_CNES';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column NR_CNES');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'CD_MUN_IBGE_ESTAB';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column CD_MUN_IBGE_ESTAB');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'NM_MEDICO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column NM_MEDICO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'DT_NASC_MEDICO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column DT_NASC_MEDICO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'NR_CPF_MEDICO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column NR_CPF_MEDICO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'NR_CNS_MEDICO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column NR_CNS_MEDICO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'CD_MUN_IBGE_MEDICO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column CD_MUN_IBGE_MEDICO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_INTERF_WINSAUDE_XML'
	and	column_name 	= 'DS_CBO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'alter table W_INTERF_WINSAUDE_XML drop column DS_CBO');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('03/05/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'MAN_ORDEM_SERV_EXTERNO'
	and	column_name 	= 'IE_ENVIO_RECEB';

	if (qt_registro_w > 0) then
		begin
		qt_registro_w := obter_valor_dinamico('select count(*) from man_ordem_serv_externo where ie_envio_receb is null', qt_registro_w);
		if (qt_registro_w > 0) then
			CALL exec_sql_dinamico('Anderson', 'update man_ordem_serv_externo set ie_envio_receb = ''E'' where ie_envio_receb is null');
		end if;
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('04/05/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'FUNCAO_PARAMETRO'
	and	column_name 	= 'DT_LIBERACAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'update funcao_parametro set dt_liberacao = dt_atualizacao, nm_usuario_lib = nm_usuario where dt_liberacao is null');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('16/05/2012','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'QUA_ALTERA_STATUS_CONFORM'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure QUA_ALTERA_STATUS_CONFORM'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'QUA_ALTERA_STATUS_N_CONFORM'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure QUA_ALTERA_STATUS_N_CONFORM'
);
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('18/05/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'MAN_PLANO_INSP_REGRA'
	and	column_name 	= 'IE_DATA_ACAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'update man_plano_insp_regra set ie_data_acao = ''C'' where ie_data_acao is null');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('23/05/2012','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'SUS_CONSISTE_LIMITE_INTERNACAO'
	and	object_type = 'FUNCTION';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop function SUS_CONSISTE_LIMITE_INTERNACAO'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'SUS_GERAR_INTERF_AIH'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure SUS_GERAR_INTERF_AIH'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'SUP_ALTERA_OBERVACAO_NF'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure SUP_ALTERA_OBERVACAO_NF'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'ATUALIZAR_LIB_BAIX_DEV_MAT_PAC'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure ATUALIZAR_LIB_BAIX_DEV_MAT_PAC'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'ATUALIZAR_VALOR_PONTO_SH'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure ATUALIZAR_VALOR_PONTO_SH'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'CONSISITR_TIT_PAGAR_BAIXA'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure CONSISITR_TIT_PAGAR_BAIXA'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'CONTABILIZA_RECEITA'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure CONTABILIZA_RECEITA'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'GPI_OBTER_DADOS_ESTRUTURA'
	and	object_type = 'FUNCTION';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop function GPI_OBTER_DADOS_ESTRUTURA'
);
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('24/05/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where 	cd_dominio = 1940;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'delete from valor_dominio where cd_dominio = 1940');
		CALL exec_sql_dinamico('gfsantos', 'insert into valor_dominio (select * from tasy_versao.valor_dominio where cd_dominio = 1940)');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('31/05/2012','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'BACA_GERA_SUP_MOTIVO_BAIXA_REQ'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure BACA_GERA_SUP_MOTIVO_BAIXA_REQ'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'GERAR_TAXA_SALA_PORTE2'
	and	object_type = 'PROCEDURE';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop procedure GERAR_TAXA_SALA_PORTE2'
);
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('01/06/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where	cd_dominio = 1676
	and	vl_dominio = 27;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set ds_valor_dominio = ''Documento - Comunicar a primeira aprovação (pasta aprovadores)'' where cd_dominio = 1676 and vl_dominio = 27');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('16/07/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2313;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in(2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2313)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('27/07/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where 	cd_dominio = 1940;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'delete from valor_dominio where cd_dominio = 1940');
		CALL exec_sql_dinamico('gfsantos', 'insert into valor_dominio (select * from tasy_versao.valor_dominio where cd_dominio = 1940)');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('14/08/2012','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from	indice
	where	nm_tabela = 'SUS_PARAMETROS'
	and	nm_indice = 'SUSPARA_ESTABEL_FK_I';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos','delete from INDICE_ATRIBUTO where NM_TABELA = ''SUS_PARAMETROS'' and NM_INDICE = ''SUSPARA_ESTABEL_FK_I'';');
		CALL exec_sql_dinamico('gfsantos','delete from INDICE  where NM_TABELA = ''SUS_PARAMETROS'' and NM_INDICE = ''SUSPARA_ESTABEL_FK_I'';');
		CALL exec_sql_dinamico('gfsantos','Alter Table SUS_PARAMETROS drop constraint SUSPARA_ESTABEL_FK;');
		CALL exec_sql_dinamico('gfsantos','Drop Index SUSPARA_ESTABEL_FK_I;');
		end;
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('14/08/2012','dd/mm/yyyy')) then
	begin

	qt_registro_w := 0;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'SISMAMA_ACHADO_RAD'
	and	column_name = 'NR_FILMES'
	and	nullable = 'N';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos','alter table sismama_achado_rad modify nr_filmes null;');
	end if;

	qt_registro_w := 0;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'SISMAMA_ACHADO_RAD'
	and	column_name = 'IE_COMPOSICAO_MAMA'
	and	nullable = 'N';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos','alter table sismama_achado_rad modify ie_composicao_mama null;');
	end if;

	qt_registro_w := 0;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'SISMAMA_ACHADO_RAD'
	and	column_name = 'IE_PELE'
	and	nullable = 'N';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos','alter table sismama_achado_rad modify ie_pele null;');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('22/08/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2313;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in(2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2313)');
		end;
	else
		begin
		CALL exec_sql_dinamico('gfsantos', 'delete from interface_atributo where cd_interface = 2313');
		CALL exec_sql_dinamico('gfsantos', 'delete from interface_reg where cd_interface = 2313');
		CALL exec_sql_dinamico('gfsantos', 'delete from interface where cd_interface = 2313');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in(2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2313)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('25/08/2012','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('jcaraujo',	'update funcao_parametro set ds_parametro = ''Inativo'', ' ||
				'ds_observacao = ''Inativado devido à existência do parâmetro [378].'', ' ||
				'ds_dependencia = ''Inativo'' ' ||
				'where cd_funcao = 299 and nr_sequencia = 305');

	CALL exec_sql_dinamico('jcaraujo',	'update funcao_parametro set ds_parametro = ''Grau de satisfação que exigirá justificativa (no encerramento ou alteração da satisfação)'', ' ||
				'ds_observacao = ''Informar o grau de satisfação (separado por vírgula se necessário) que exigirá justificativa (no encerramento ou alteração da satisfação).'' ' ||
				'where cd_funcao = 299 and nr_sequencia = 378');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('27/08/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'IE_REGRA_DIA'
	and	table_name 	= 'SAC_CLASSIF_OCORRENCIA';

	if (coalesce(qt_registro_w,0) > 0) then
		CALL exec_sql_dinamico('Anderson', 'update SAC_CLASSIF_OCORRENCIA set IE_REGRA_DIA = ''C'' where IE_REGRA_DIA is null');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('29/08/2012','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	column_name 	= 'NR_SEQUENCIA'
	and	table_name 	= 'SUS_EQUIPE';

	if (coalesce(qt_registro_w,0) = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'alter table sus_equipe add NR_SEQUENCIA NUMBER(10,0) not null');

		select 	substr(Obter_Tablespace_Index(null),1,255)
		into STRICT	nm_Tablespace_w
		;

		CALL exec_sql_dinamico('gfsantos', 'Alter Table SUS_EQUIPE add ( Constraint SUSEQPE_PK Primary Key (NR_SEQUENCIA) Using Index Tablespace '|| nm_Tablespace_w ||')');
		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'SUS_EQUIPE_SEQ';

	if (qt_registro_w = 0) then
		CALL exec_sql_dinamico('gfsantos', 'Create Sequence SUS_EQUIPE_SEQ Increment by 1 Start With 1 MaxValue 9999999999 Cycle NoCache');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('10/09/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'RECOPF_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'Alter Table REGRA_COMPL_PESSOA_FISICA drop constraint RECOPF_UK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'RECOPF_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop index RECOPF_UK');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('11/09/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1321
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1321 and cd_reg_interface = 1)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('11/09/2012','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson', 	'update funcao_parametro set ds_parametro = ''Inativo'' where cd_funcao = 3009 and nr_sequencia = 29');
end if;

if (dt_versao_atual_cliente_w < to_date('19/09/2012','dd/mm/yyyy')) then
	begin

	select 	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'SUS_REGRA_ESPEC_AIH_PROC'
	and	column_name = 'CD_ESTABELECIMENTO'
	and	nullable = 'N';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos','Alter Table SUS_REGRA_ESPEC_AIH_PROC modify CD_ESTABELECIMENTO null');
		end;
	end if;

	select 	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'SUS_REGRA_ESPEC_AIH_PROC'
	and	column_name = 'CD_ESTABELECIMENTO'
	and	nullable = 'Y';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos','update SUS_REGRA_ESPEC_AIH_PROC set CD_ESTABELECIMENTO = null');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('20/09/2012','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson',  'delete from funcao_parametro where cd_funcao = -110 and nr_sequencia in (74,75)');
end if;

if (dt_versao_atual_cliente_w < to_date('01/11/2012','dd/mm/yyyy')) then
	CALL qua_ajustar_setor_pessoa_trein();
end if;

if (dt_versao_atual_cliente_w < to_date('01/11/2012','dd/mm/yyyy')) then
	begin
	CALL baca_excluir_relatorio();
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('05/11/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'GPWPECL_INDGEST_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table GPW_PENDENCIA_CLASSIF drop constraint GPWPECL_INDGEST_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'GPWPECL_FUNCAO_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table GPW_PENDENCIA_CLASSIF drop constraint GPWPECL_FUNCAO_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'GPWPECL_TABSIST_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table GPW_PENDENCIA_CLASSIF drop constraint GPWPECL_TABSIST_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'GPWPECL_MODIMPL_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'alter table GPW_PENDENCIA_CLASSIF drop constraint GPWPECL_MODIMPL_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'GPWPECL_INDGEST_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop index GPWPECL_INDGEST_FK_I');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'GPWPECL_FUNCAO_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop index GPWPECL_FUNCAO_FK_I');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'GPWPECL_TABSIST_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop index GPWPECL_TABSIST_FK_I');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'GPWPECL_MODIMPL_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'drop index GPWPECL_MODIMPL_FK_I');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('13/11/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1321
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1321 and cd_reg_interface = 1)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('16/11/2012','dd/mm/yyyy')) then
	begin

	select 	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'SUS_ESTRUTURA_REGRA_FPO'
	and	column_name = 'NR_SEQ_HABILITACAO'
	and	nullable = 'Y';

	if (qt_registro_w > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	sus_fpo_regra
		where	(nr_seq_estrutura_regra IS NOT NULL AND nr_seq_estrutura_regra::text <> '');

		if (qt_registro_w > 0) then
			CALL exec_sql_dinamico('gfsantos', 'update sus_fpo_regra set nr_seq_estrutura_regra = null where nr_seq_estrutura_regra is not null');
		end if;

		CALL exec_sql_dinamico('gfsantos', 'delete from sus_estrutura_regra_fpo');
		CALL exec_sql_dinamico('gfsantos', 'alter table sus_estrutura_regra_fpo modify nr_seq_habilitacao not null');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('28/11/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'CEPLOG_PK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'alter table CEP_LOG drop constraint CEPLOG_PK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'CEPLOG_PK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'drop index CEPLOG_PK');
	end if;

	select 	substr(Obter_Tablespace_Index(null),1,255)
	into STRICT	nm_Tablespace_w
	;

	CALL exec_sql_dinamico('jcaraujo', 'alter table CEP_LOG add ( Constraint CEPLOG_PK Primary Key (NR_SEQ_LOC, NR_SEQUENCIA, CD_CEP) Using Index Tablespace ' || nm_Tablespace_w || ')');

	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2258;

	if (qt_registro_w > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	interface_atributo
		where	cd_interface	= 2258
		and	cd_reg_interface	= 2
		and	nr_seq_atributo	= 22;

		if (qt_registro_w = 0) then
			CALL exec_sql_dinamico('jcaraujo', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface = 2258 and cd_reg_interface = 2 and nr_seq_atributo = 22');
		end if;
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('13/12/2012','dd/mm/yyyy')) then
	begin

	CALL exec_sql_dinamico('gfsantos', 	' update sus_inconsistencia a '||
					' set a.ds_inconsistencia = (select b.ds_inconsistencia from tasy_versao.sus_inconsistencia b where b.cd_inconsistencia = a.cd_inconsistencia), '||
					' a.ds_acao_usuario = (select c.ds_acao_usuario from tasy_versao.sus_inconsistencia c where c.cd_inconsistencia = a.cd_inconsistencia) '||
					' where exists (select 1 from tasy_versao.sus_inconsistencia d where d.cd_inconsistencia = a.cd_inconsistencia)');

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('26/12/2012','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_ind_columns
	where	index_name = 'COMPEFI_UK';

	if (qt_registro_w = 2) then
		begin
		CALL exec_sql_dinamico('Anderson', 'alter table COMPL_PESSOA_FISICA drop constraint COMPEFI_UK');

		select	count(*)
		into STRICT	qt_registro_w
		from	user_indexes
		where	index_name = 'COMPEFI_UK';

		if (qt_registro_w > 0) then
			CALL exec_sql_dinamico('Anderson', 'drop index COMPEFI_UK');
		end if;

		select 	substr(Obter_Tablespace_Index(null),1,255)
		into STRICT	nm_Tablespace_w
		;

		CALL exec_sql_dinamico('Anderson', 'Alter Table COMPL_PESSOA_FISICA add ( Constraint COMPEFI_UK Unique (CD_PESSOA_FISICA,IE_TIPO_COMPLEMENTO,NR_SEQ_TIPO_COMPL_ADIC) Using Index Tablespace '||
										nm_Tablespace_w ||')');
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('21/02/2013','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('Anderson', 	'update funcao_parametro set ds_parametro = ''Inativo'', ' ||
					'ds_observacao = ''Inativado devido à criação da opção "ATA - Comunicar participantes" nas regras de comunicação da qualidade.'' ' ||
					' where cd_funcao = 4000 and nr_sequencia = 173');
end if;

if (dt_versao_atual_cliente_w < to_date('14/02/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name	= 'SAC_HIST_BOL_OCOR'
	and	column_name	= 'DT_ATUALIZACAO_NREC';

	if (qt_registro_w > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	user_tab_columns
		where	table_name	= 'SAC_HIST_BOL_OCOR'
		and	column_name	= 'NM_USUARIO_NREC';

		if (qt_registro_w > 0) then
			CALL exec_sql_dinamico('jcaraujo', 'update sac_hist_bol_ocor set dt_atualizacao_nrec = dt_atualizacao, nm_usuario_nrec = nm_usuario where dt_atualizacao_nrec is null');
		end if;
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('19/03/2013','dd/mm/yyyy')) then
	select	count(*)
	into STRICT	qt_registro_w
	from	funcao_parametro
	where	cd_funcao = 281
	and	nr_sequencia = 1320;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos',	'update funcao_parametro set ds_parametro = ''Imprimir o relatório do laudo AIH Unificado após libera-lo'', '||
						'ds_observacao	= ''Identifica se o sistema deve imprimir automaticamente o relatório do laudo AIH Unificado, após ser efetuada a sua liberação.'' '||
						'where	cd_funcao = 281 and nr_sequencia = 1320');
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('27/03/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name	= 'SAC_HIST_BOL_OCOR'
	and	column_name	= 'DT_ATUALIZACAO_NREC';

	if (qt_registro_w > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	user_tab_columns
		where	table_name	= 'SAC_HIST_BOL_OCOR'
		and	column_name	= 'NM_USUARIO_NREC';

		if (qt_registro_w > 0) then
			CALL exec_sql_dinamico('jcaraujo', 'update sac_hist_bol_ocor set dt_atualizacao_nrec = dt_atualizacao, nm_usuario_nrec = nm_usuario where dt_atualizacao_nrec is null');
		end if;
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/04/2013','dd/mm/yyyy')) then
	begin
	CALL Tasy_posicionar_sequence('MAN_EQUIP_PERIODO_PARADO','NR_SEQUENCIA','N');
	CALL Tasy_posicionar_sequence('MAN_ORDEM_SERVICO_PARADA','NR_SEQUENCIA','N');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('19/04/2013','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	tabela_visao_atributo
	where	nr_sequencia = 9951
	and	nm_atributo = 'CD_CBO';

	if (qt_registro_w > 0) then
		begin

		update	tabela_visao_atributo
		set 	ds_valores = 'select	a.cd_cbo cd,
			substr(''C - '' || a.cd_cbo || '' - '' ||  b.ds_cbo,1,255) ds
		from 	sus_cbo			b,
			sus_cbo_pessoa_fisica	a
		where	Sus_Obter_SeCbo_Compativel(:cd_pessoa_fisica, :cd_procedimento, :ie_origem_proced, to_date(:dt_procedimento,''dd/mm/yyyy hh24:mi:ss''), a.cd_cbo, :ie_funcao) = ''S''
		and	a.cd_pessoa_fisica	= :cd_pessoa_fisica
		and	a.cd_cbo	= b.cd_cbo
		union
		select	a.cd_cbo cd,
			substr(a.cd_cbo || '' - '' ||  b.ds_cbo,1,255) ds
		from 	sus_cbo			b,
			sus_cbo_pessoa_fisica	a
		where	Sus_Obter_SeCbo_Compativel( :cd_pessoa_fisica, :cd_procedimento, :ie_origem_proced, to_date(:dt_procedimento,''dd/mm/yyyy hh24:mi:ss''), a.cd_cbo, :ie_funcao) <> ''S''
		and	a.cd_pessoa_fisica	= :cd_pessoa_fisica
		and	a.cd_cbo	= b.cd_cbo
		order by 2,1'
		where	nr_sequencia = 9951
		and	nm_atributo = 'CD_CBO';

		end;
	end if;


commit;


	end;
end if;

if (dt_versao_atual_cliente_w < to_date('22/04/2013','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where 	cd_dominio = 3230;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'delete from valor_dominio where cd_dominio = 3230');
		CALL exec_sql_dinamico('gfsantos', 'insert into valor_dominio (select * from tasy_versao.valor_dominio where cd_dominio = 3230)');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where 	cd_dominio = 3231;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'delete from valor_dominio where cd_dominio = 3231');
		CALL exec_sql_dinamico('gfsantos', 'insert into valor_dominio (select * from tasy_versao.valor_dominio where cd_dominio = 3231)');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where 	cd_dominio = 3233;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'delete from valor_dominio where cd_dominio = 3233');
		CALL exec_sql_dinamico('gfsantos', 'insert into valor_dominio (select * from tasy_versao.valor_dominio where cd_dominio = 3233)');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('23/04/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	sus_inconsistencia
	where	cd_inconsistencia = 245;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('gfsantos', 'update sus_inconsistencia '||
					'set ds_acao_usuario = ''O procedimento 0304080012 - Fator Estimulante do Crescimento de Colônias de Granulócitos / Macrófagos, só pode ser cobrado como procedimento secundário para os pacientes que estão em uso de Quimioterapia Curativa(030406).
Atende a portaria Nº 346, de 23 de Junho de 2008'' '||
					'where cd_inconsistencia = 245');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('24/04/2013','dd/mm/yyyy')) then
	CALL exec_sql_dinamico('abortoloso',	'update funcao_parametro set ds_parametro = ''Inativo'',' ||
					'ds_observacao = ''Inativado devido a criação do parâmetro [94].'' ' ||
					'where cd_funcao = 290 and nr_sequencia = 39');


end if;

if (dt_versao_atual_cliente_w < to_date('13/05/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'REGRA_QUEST_OS_PHILIPS'
	and	column_name= 'NR_SEQ_CLASSIF';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table REGRA_QUEST_OS_PHILIPS drop column NR_SEQ_CLASSIF');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'REGQOPH_MANCLAS_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table REGRA_QUEST_OS_PHILIPS drop constraint REGQOPH_MANCLAS_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'REGQOPH_MANCLAS_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','drop index REGQOPH_MANCLAS_FK_I');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('31/05/2013','dd/mm/yyyy')) then
	begin
	select 	substr(Obter_Tablespace_Index(null),1,255)
	into STRICT	nm_Tablespace_w
	;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PESTICO_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'alter table PESSOA_TITULAR_CONVENIO drop constraint PESTICO_UK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'PESTICO_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'drop index PESTICO_UK');
	end if;

	CALL exec_sql_dinamico('jcaraujo', 'Alter Table PESSOA_TITULAR_CONVENIO add ( Constraint PESTICO_UK Unique (CD_PESSOA_FISICA, CD_PESSOA_TITULAR, ' ||
					'CD_CONVENIO, CD_CATEGORIA, DT_INICIO_VIGENCIA) Using Index Tablespace ' || nm_Tablespace_w || ')');

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PESTICO_UK2';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'alter table PESSOA_TITULAR_CONVENIO drop constraint PESTICO_UK2');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'PESTICO_UK2';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'drop index PESTICO_UK2');
	end if;

	CALL exec_sql_dinamico('jcaraujo', 'Alter Table PESSOA_TITULAR_CONVENIO add ( Constraint PESTICO_UK2 Unique (CD_PESSOA_FISICA, CD_CONVENIO, CD_CATEGORIA, ' ||
					'DT_INICIO_VIGENCIA) Using Index Tablespace ' || nm_Tablespace_w || ')');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('01/06/2013','dd/mm/yyyy')) then
	CALL sus_ajustar_incon_laudo_base();
end if;

if (dt_versao_atual_cliente_w < clock_timestamp()) then
	begin

	CALL exec_sql_dinamico('gfsantos', 	' update sus_inconsistencia a '||
					' set a.ds_inconsistencia = (select b.ds_inconsistencia from tasy_versao.sus_inconsistencia b where b.cd_inconsistencia = a.cd_inconsistencia), '||
					' a.ds_acao_usuario = (select c.ds_acao_usuario from tasy_versao.sus_inconsistencia c where c.cd_inconsistencia = a.cd_inconsistencia) '||
					' where exists (select 1 from tasy_versao.sus_inconsistencia d where d.cd_inconsistencia = a.cd_inconsistencia)');

	end;
end if;

if (dt_versao_atual_cliente_w < clock_timestamp() + interval '120 days') then	/*Anderson (coloquei o 120, pois é melhor rodar 3 x no mês do que não atualizar o valor dos parâmetros e ficar errada a consulta*/
	select	count(*)
	into STRICT	qt_registro_w
	from	funcao_parametro
	where	cd_funcao = 4003
	and	nr_sequencia = 2
	and	vl_parametro in ('S','N');

	if (qt_registro_w > 0) then
		update	funcao_parametro
		set	vl_parametro = 'D'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	vl_parametro = 'S';

		update	funcao_parametro
		set	vl_parametro = 'P,E,D,R,V,I,X'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	vl_parametro = 'N';
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	funcao_parametro
	where	cd_funcao = 4003
	and	nr_sequencia = 2
	and	vl_parametro_padrao in ('S','N');

	if (qt_registro_w > 0) then
		update	FUNCAO_PARAMETRO
		set	VL_PARAMETRO_PADRAO = 'D'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	VL_PARAMETRO_PADRAO = 'S';

		update	FUNCAO_PARAMETRO
		set	VL_PARAMETRO_PADRAO = 'P,E,D,R,V,I,X'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	VL_PARAMETRO_PADRAO = 'N';
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	funcao_param_estab
	where	cd_funcao = 4003
	and	nr_seq_param = 2
	and	vl_parametro in ('S','N');

	if (qt_registro_w > 0) then
		update 	FUNCAO_PARAM_ESTAB
		set	vl_parametro = 'D'
		where	cd_funcao = 4003
		and	nr_seq_param = 2
		and	vl_parametro = 'S';

		update	FUNCAO_PARAM_ESTAB
		set	vl_parametro = 'P,E,D,R,V,I,X'
		where	cd_funcao = 4003
		and	nr_seq_param = 2
		and	vl_parametro = 'N';
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	funcao_param_perfil
	where	cd_funcao = 4003
	and	nr_sequencia = 2
	and	vl_parametro in ('S','N');

	if (qt_registro_w > 0) then
		update	FUNCAO_PARAM_PERFIL
		set	vl_parametro = 'D'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	vl_parametro = 'S';

		update	FUNCAO_PARAM_PERFIL
		set	vl_parametro = 'P,E,D,R,V,I,X'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	vl_parametro = 'N';
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	funcao_param_usuario
	where	cd_funcao = 4003
	and	nr_sequencia = 2
	and	vl_parametro in ('S','N');

	if (qt_registro_w > 0) then
		update	funcao_param_usuario
		set	vl_parametro = 'D'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	vl_parametro = 'S';

		update	funcao_param_usuario
		set	vl_parametro = 'P,E,D,R,V,I,X'
		where	cd_funcao = 4003
		and	nr_sequencia = 2
		and	vl_parametro = 'N';
	end if;
end if;

if (dt_versao_atual_cliente_w < to_date('12/09/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'REGQOPH_MANDETP_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','drop index REGQOPH_MANDETP_FK_I');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'REGQOPH_MANDETP_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table REGRA_QUEST_OS_PHILIPS drop constraint REGQOPH_MANDETP_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'REGRA_QUEST_OS_PHILIPS'
	and	column_name	= 'NR_SEQ_DETALHAMENTO_PHILIPS';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table REGRA_QUEST_OS_PHILIPS drop column NR_SEQ_DETALHAMENTO_PHILIPS');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'MAN_ORDEM_SERVICO'
	and	column_name 	= 'NR_SEQ_DETALHAMENTO_PHILIPS';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table MAN_ORDEM_SERVICO drop column NR_SEQ_DETALHAMENTO_PHILIPS');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tables
	where	table_name = 'MAN_DETALHAMENTO_PHILIPS';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','drop table MAN_DETALHAMENTO_PHILIPS');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_sequences
	where	sequence_name = 'MAN_DETALHAMENTO_PHILIPS_SEQ';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','drop sequence MAN_DETALHAMENTO_PHILIPS_SEQ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'REGRA_QUEST_OS_PHILIPS'
	and	column_name 	= 'NR_SEQ_MODELO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table REGRA_QUEST_OS_PHILIPS drop column NR_SEQ_MODELO');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'REGQOPH_MODELOT_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','drop index REGQOPH_MODELOT_FK_I');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'REGQOPH_MODELOT_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table REGRA_QUEST_OS_PHILIPS drop constraint REGQOPH_MODELOT_FK');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('08/10/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'MANOSRQ_PERGUNT_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','drop index MANOSRQ_PERGUNT_FK_I');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'MANOSRQ_PERGUNT_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson','alter table MAN_OS_RESP_QUEST_PHILIPS drop constraint MANOSRQ_PERGUNT_FK');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('13/12/2013','dd/mm/yyyy')) then
	begin

	select	count(1)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 1637  LIMIT 1;

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'delete from interface_atributo where cd_interface = 1637');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (1637)');
		end;
	end if;

	qt_registro_w	:= 0;

	select	count(1)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2313  LIMIT 1;

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'delete from interface_atributo where cd_interface = 2313');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2313)');
		end;
	end if;

	end;
end if;


if (dt_versao_atual_cliente_w < to_date('18/12/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	objeto_sistema
	where	nr_sequencia	= 38320;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('dhoffman','delete from OBJETO_SISTEMA_PARAM where nr_seq_objeto = 38320');
		CALL exec_sql_dinamico('dhoffman','delete from OBJETO_SISTEMA where nr_sequencia = 38320');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	objeto_sistema
	where	nr_sequencia	= 38532;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('dhoffman','delete from OBJETO_SISTEMA_PARAM where nr_seq_objeto = 38532');
		CALL exec_sql_dinamico('dhoffman','delete from OBJETO_SISTEMA where nr_sequencia = 38532');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'QUA_ESTONAR_LIB_AVALIACAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('dhoffman','drop procedure QUA_ESTONAR_LIB_AVALIACAO'
);
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'LIBERAR_QUA_AVALIACAO';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('dhoffman','drop procedure LIBERAR_QUA_AVALIACAO'
);
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('23/01/2014','dd/mm/yyyy')) then
	begin

	select	count(1)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'SUS_REGRA_QTD_AUX_PROC'
	and	column_name 	= 'CD_PROCEDIMENTO'
	and	nullable	= 'N'  LIMIT 1;

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos','alter table sus_regra_qtd_aux_proc modify cd_procedimento null');
		CALL exec_sql_dinamico('gfsantos','alter table sus_regra_qtd_aux_proc modify ie_origem_proced null');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('28/01/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2313;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in(2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2313)');
		end;
	else
		begin
		CALL exec_sql_dinamico('gfsantos', 'delete from interface_atributo where cd_interface = 2313');
		CALL exec_sql_dinamico('gfsantos', 'delete from interface_reg where cd_interface = 2313');
		CALL exec_sql_dinamico('gfsantos', 'delete from interface where cd_interface = 2313');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in(2313)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2313)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('03/02/2013','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name	= 'SAC_HIST_BOL_OCOR'
	and	column_name	= 'DT_ATUALIZACAO_NREC';

	if (qt_registro_w > 0) then
		begin
		select	count(*)
		into STRICT	qt_registro_w
		from	user_tab_columns
		where	table_name	= 'SAC_HIST_BOL_OCOR'
		and	column_name	= 'NM_USUARIO_NREC';

		if (qt_registro_w > 0) then
			CALL exec_sql_dinamico('jcaraujo', 'update sac_hist_bol_ocor set dt_atualizacao_nrec = dt_atualizacao, nm_usuario_nrec = nm_usuario where dt_atualizacao_nrec is null');
		end if;
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('04/02/2014','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'QUAEVPA_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'alter table QUA_EVENTO_PACIENTE drop constraint QUAEVPA_UK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'QUAEVPA_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'drop index QUAEVPA_UK');
	end if;

	CALL exec_sql_dinamico('rknoch', 'update funcao_parametro set ds_sql = null where cd_funcao = 299 and nr_sequencia = 455');
	CALL exec_sql_dinamico('rknoch', 'update funcao_param_estab set vl_parametro = 1 where cd_funcao = 299 and nr_seq_param = 455 and vl_parametro = ''dd/mm/yyyy hh:mm:ss''');
	CALL exec_sql_dinamico('rknoch', 'update funcao_param_estab set vl_parametro = 2 where cd_funcao = 299 and nr_seq_param = 455 and vl_parametro = ''dd/mm/yyyy hh:mm''');
	CALL exec_sql_dinamico('rknoch', 'update funcao_param_perfil set vl_parametro = 1 where cd_funcao = 299 and nr_sequencia = 455 and vl_parametro = ''dd/mm/yyyy hh:mm:ss''');
	CALL exec_sql_dinamico('rknoch', 'update funcao_param_perfil set vl_parametro = 2 where cd_funcao = 299 and nr_sequencia = 455 and vl_parametro = ''dd/mm/yyyy hh:mm''');
	CALL exec_sql_dinamico('rknoch', 'update funcao_param_usuario set vl_parametro = 1 where cd_funcao = 299 and nr_sequencia = 455 and vl_parametro = ''dd/mm/yyyy hh:mm:ss''');
	CALL exec_sql_dinamico('rknoch', 'update funcao_param_usuario set vl_parametro = 2 where cd_funcao = 299 and nr_sequencia = 455 and vl_parametro = ''dd/mm/yyyy hh:mm''');
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('26/02/2014','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name	= 'PESSOA_DOCUMENTACAO'
	and	column_name	= 'IE_SITUACAO';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('bjansen', 'update pessoa_documentacao set ie_situacao = ''A'' where ie_situacao is null');
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('07/03/2014','dd/mm/yyyy')) then
	/*Campo criado incorretamente, a constraint será mantida, mas para outro campo. NR_SEQ_TIPO_DOCUMENTACAO p/ NR_SEQ_DOCUMENTACAO*/

	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name	= 'PESSOA_DOC_HIST'
	and	column_name	= 'NR_SEQ_TIPO_DOCUMENTACAO';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('Anderson', 'alter table PESSOA_DOC_HIST drop column NR_SEQ_TIPO_DOCUMENTACAO');
		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_cons_columns
	where	constraint_name	= 'PESDOCH_PESDOCU_FK'
	and	column_name	<> 'NR_SEQ_DOCUMENTACAO';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('Anderson', 'alter table PESSOA_DOC_HIST drop constraint PESDOCH_PESDOCU_FK');
		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_ind_columns
	where	index_name	= 'PESDOCH_PESDOCU_FK_I'
	and	column_name	<> 'NR_SEQ_DOCUMENTACAO';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('Anderson', 'drop index PESDOCH_PESDOCU_FK_I');
		end;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('07/04/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2454;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2454)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in(2454)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2454)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('17/05/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_SUSBPA_INTERF'
	and	column_name	= 'NR_FOLHA_BPA';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'alter table w_susbpa_interf modify nr_folha_bpa number(10)');
		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_SUSBPA_INTERF'
	and	column_name	= 'NR_LINHA_FOLHA';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'alter table w_susbpa_interf modify nr_linha_folha number(10)');
		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_SUSBPA_INTERF'
	and	column_name	= 'QT_LINHAS';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'alter table w_susbpa_interf modify qt_linhas number(10)');
		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'W_SUSBPA_INTERF'
	and	column_name	= 'QT_PROCEDIMENTO';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'alter table w_susbpa_interf modify qt_procedimento number(10)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('07/08/2014','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set ds_valor_dominio = ''Concubinato/União Estável'' where cd_dominio = 5 and vl_dominio = ''7'' and ds_valor_dominio = ''Concubinado''');

	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where	ds_valor_dominio = substr(obter_desc_expressao(coalesce(cd_exp_valor_dominio,312496)),1,254)
	and	vl_dominio = '7'
	and	cd_dominio = 5;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = nvl(cd_exp_valor_dominio,312496) where cd_dominio = 5 and vl_dominio = ''7''');
	else
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = null where cd_dominio = 5 and vl_dominio = ''7''');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/08/2014','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from	sac_grau_satisfacao
	where	ie_grau_satisfacao = 'I';

	if (qt_registro_w = 0) then

		CALL exec_sql_dinamico('rfoliveira', 'insert into sac_grau_satisfacao(' ||
						'	nr_sequencia,'	||
						'	ie_grau_satisfacao,' ||
						'	ds_grau_satisfacao,' ||
						'	dt_atualizacao,' ||
						'	nm_usuario,' ||
						'	dt_atualizacao_nrec,' ||
						'	nm_usuario_nrec) values ' ||
						'	(sac_grau_satisfacao_seq.nextval,' ||
						'	''I'',' ||
						'	substr(obter_desc_expressao(487079),1,40),' ||
						'	sysdate,' ||
						'	''versao'',' ||
						'	sysdate,' ||
						'	''versao'') ');

	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	sac_grau_satisfacao
	where	ie_grau_satisfacao = 'N';

	if (qt_registro_w = 0) then

		CALL exec_sql_dinamico('rfoliveira', 'insert into sac_grau_satisfacao(' ||
						'	nr_sequencia,'	||
						'	ie_grau_satisfacao,' ||
						'	ds_grau_satisfacao,' ||
						'	dt_atualizacao,' ||
						'	nm_usuario,' ||
						'	dt_atualizacao_nrec,' ||
						'	nm_usuario_nrec) values ' ||
						'	(sac_grau_satisfacao_seq.nextval,' ||
						'	''N'',' ||
						'	substr(obter_desc_expressao(328863),1,40),' ||
						'	sysdate,' ||
						'	''versao'',' ||
						'	sysdate,' ||
						'	''versao'') ');

	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	sac_grau_satisfacao
	where	ie_grau_satisfacao = 'P';

	if (qt_registro_w = 0) then

		CALL exec_sql_dinamico('rfoliveira', 'insert into sac_grau_satisfacao(' ||
						'	nr_sequencia,'	||
						'	ie_grau_satisfacao,' ||
						'	ds_grau_satisfacao,' ||
						'	dt_atualizacao,' ||
						'	nm_usuario,' ||
						'	dt_atualizacao_nrec,' ||
						'	nm_usuario_nrec) values ' ||
						'	(sac_grau_satisfacao_seq.nextval,' ||
						'	''P'',' ||
						'	substr(obter_desc_expressao(296109),1,40),' ||
						'	sysdate,' ||
						'	''versao'',' ||
						'	sysdate,' ||
						'	''versao'') ');

	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('16/09/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	dic_expressao
	where	cd_expressao = 347713;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('rfoliveira', 'update valor_dominio set cd_exp_valor_dominio = 347713 where cd_dominio = 3396 and vl_dominio = ''N'' ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	dic_expressao
	where	cd_expressao = 347714;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('rfoliveira', 'update valor_dominio set cd_exp_valor_dominio = 347714 where cd_dominio = 3396 and vl_dominio = ''A'' ');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('29/09/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	tabela_visao_pais
	where	nr_seq_visao = 23170;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('rfoliveira', ' delete from tabela_visao_pais where nr_seq_visao = 23170 and cd_pais = 2 ');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('02/10/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PESTICO_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('rfoliveira', ' Alter Table PESSOA_TITULAR_CONVENIO Drop Constraint PESTICO_UK ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'PESTICO_UK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('rfoliveira', ' drop index PESTICO_UK ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PESTICO_UK';

	if (qt_registro_w = 0) then
		begin

		select 	substr(Obter_Tablespace_Index(null),1,255)
		into STRICT	nm_Tablespace_w
		;

		CALL exec_sql_dinamico('rfoliveira', 'Alter Table PESSOA_TITULAR_CONVENIO add ( Constraint PESTICO_UK Unique (' ||
	               					' CD_PESSOA_FISICA,' ||
	              					' CD_PESSOA_TITULAR,'||
	               					' CD_CONVENIO,' ||
							' CD_CATEGORIA,' ||
	               					' DT_INICIO_VIGENCIA,' ||
	               					' CD_USUARIO_CONVENIO)' ||
							' Using Index Tablespace '|| nm_Tablespace_w ||')');

		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'PESTICO_UK';

	if (qt_registro_w = 0) then
		begin

		select 	substr(Obter_Tablespace_Index(null),1,255)
		into STRICT	nm_Tablespace_w
		;

		CALL exec_sql_dinamico('rfoliveira', ' Create Index PESTICO_UK on PESSOA_TITULAR_CONVENIO(' ||
        	       					' CD_PESSOA_FISICA,' ||
              						' CD_PESSOA_TITULAR,'||
               						' CD_CONVENIO,' ||
							' CD_CATEGORIA,' ||
               						' DT_INICIO_VIGENCIA,' ||
               						' CD_USUARIO_CONVENIO)');

		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('08/04/2014','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1321;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1321)');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('19/05/2015','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1006;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1006
		and	cd_reg_interface	= 5;

		CALL exec_sql_dinamico('alheckmann', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1006 and cd_reg_interface = 5)');

		--Exec_Sql_Dinamico('alheckmann', 'update interface_atributo set ds_valor = null, ds_regra_validacao = null where  cd_interface = 1006 and    cd_reg_interface = 1 and    nm_atributo = ''CD_INTERNO''');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('19/05/2015','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2676;

	if (qt_registro_w = 0) then
		CALL Exec_Sql_Dinamico('alheckmann', 'insert into interface (select * from tasy_versao.interface where cd_interface = 2676)');
		CALL Exec_Sql_Dinamico('alheckmann', 'insert into interface_reg (select * from tasy_versao.interface_reg where cd_interface = 2676)');
		CALL Exec_Sql_Dinamico('alheckmann', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2676)');

		CALL Exec_Sql_Dinamico('alheckmann', 'update interface_atributo set ds_valor = null, ds_regra_validacao = null where  cd_interface = 2676 and cd_reg_interface = 1 and nm_atributo = ''CD_INTERNO''');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('21/10/2014','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	valor_dominio
	where	cd_dominio = 3491;

	if (qt_registro_w > 0) then
		delete 	from valor_dominio
		where	cd_dominio = 3491;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	dominio
	where	cd_dominio = 3491;

	if (qt_registro_w > 0) then
		delete 	from dominio
		where	cd_dominio = 3491;
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('06/11/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'SUS_ERRO_IMP_COLMEIA'
	and	column_name 	= 'NR_ATENDIMENTO'
	and	nullable	= 'N';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos','alter table sus_erro_imp_colmeia modify nr_atendimento null');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('18/11/2014','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PESTICO_UK2';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('rfoliveira', ' Alter Table PESSOA_TITULAR_CONVENIO Drop Constraint PESTICO_UK2 ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'PESTICO_UK2';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('rfoliveira', ' drop index PESTICO_UK2 ');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'PESTICO_UK2';

	if (qt_registro_w = 0) then
		begin

		select 	substr(Obter_Tablespace_Index(null),1,255)
		into STRICT	nm_Tablespace_w
		;

		CALL exec_sql_dinamico('rfoliveira', 'Alter Table PESSOA_TITULAR_CONVENIO add ( Constraint PESTICO_UK2 Unique (' ||
	               					' CD_PESSOA_FISICA,' ||
        	       					' CD_CONVENIO,' ||
							' CD_CATEGORIA,' ||
               						' DT_INICIO_VIGENCIA,' ||
               						' CD_USUARIO_CONVENIO)' ||
							' Using Index Tablespace '|| nm_Tablespace_w ||')');

		end;
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'PESTICO_UK2';

	if (qt_registro_w = 0) then
		begin

		select 	substr(Obter_Tablespace_Index(null),1,255)
		into STRICT	nm_Tablespace_w
		;

		CALL exec_sql_dinamico('rfoliveira', ' Create Index PESTICO_UK2 on PESSOA_TITULAR_CONVENIO(' ||
	               					' CD_PESSOA_FISICA,' ||
        	       					' CD_CONVENIO,' ||
							' CD_CATEGORIA,' ||
               						' DT_INICIO_VIGENCIA,' ||
               						' CD_USUARIO_CONVENIO)');

		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/01/2015','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('bcurioletti', 'update interface_atributo set DS_MASCARA_DATA = '''' where cd_interface = 1321 and cd_reg_interface = ''1'' and NM_ATRIBUTO = ''DT_NASCIMENTO'' ');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('09/04/2015','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'WSUSBIP_PROCONV_FK'
	and	delete_rule	<> 'CASCADE';
	/*Ajustar o índice para cascade, então verifica se existe o índice mas que ainda não é cascade, se existir, então exclui e cria novamente*/

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('lhalves', 'Alter Table W_SUSBPA_INFO_PROC drop constraint WSUSBIP_PROCONV_FK');
		CALL exec_sql_dinamico('lhalves', 'Alter Table W_SUSBPA_INFO_PROC add (Constraint WSUSBIP_PROCONV_FK Foreign Key (NR_SEQ_PROTOCOLO) References PROTOCOLO_CONVENIO (NR_SEQ_PROTOCOLO) on delete cascade)');
		end;
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('07/05/2015','dd/mm/yyyy')) then
	begin
	CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set ds_valor_dominio = ''Registrado'' where cd_dominio = 7457 and vl_dominio = ''1''');
	CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set ds_valor_dominio = ''Encaminhado'' where cd_dominio = 7457 and vl_dominio = ''3''');
	CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set ds_valor_dominio = ''Cancelado'' where cd_dominio = 7457 and vl_dominio = ''4''');
	CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set ds_valor_dominio = ''Concluído'' where cd_dominio = 7457 and vl_dominio = ''5''');

	select	count(*)
	into STRICT	qt_registro_w
	from	dic_expressao
	where	cd_expressao = 331525;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = 331525 where cd_dominio = 7457 and vl_dominio = ''1''');
	else
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = null where cd_dominio = 7457 and vl_dominio = ''1''');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	dic_expressao
	where	cd_expressao = 304200;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = 304200 where cd_dominio = 7457 and vl_dominio = ''3''');
	else
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = null where cd_dominio = 7457 and vl_dominio = ''3''');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	dic_expressao
	where	cd_expressao = 322155;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = 322155 where cd_dominio = 7457 and vl_dominio = ''4''');
	else
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = null where cd_dominio = 7457 and vl_dominio = ''4''');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	dic_expressao
	where	cd_expressao = 330733;

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = 330733 where cd_dominio = 7457 and vl_dominio = ''5''');
	else
		CALL exec_sql_dinamico('jcaraujo', 'update valor_dominio set cd_exp_valor_dominio = null where cd_dominio = 7457 and vl_dominio = ''5''');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('22/05/2015','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name 	= 'QUA_NAO_CONFORM_EFICACIA'
	and	column_name 	= 'CD_EXP_JUSTIFICATIVA';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('asilveira', 'alter table QUA_NAO_CONFORM_EFICACIA drop column CD_EXP_JUSTIFICATIVA');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_constraints
	where	constraint_name = 'QUANACE_DICEXPR_FK';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('asilveira', 'alter table QUA_NAO_CONFORM_EFICACIA drop constraint QUANACE_DICEXPR_FK');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'QUANACE_DICEXPR_FK_I';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('asilveira', 'drop index QUANACE_DICEXPR_FK_I');
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w IS NOT NULL AND dt_versao_atual_cliente_w::text <> '') then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2536;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2536)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in (2536)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2536)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w IS NOT NULL AND dt_versao_atual_cliente_w::text <> '') then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface
	where	cd_interface = 2695;

	if (qt_registro_w = 0) then
		begin
		CALL exec_sql_dinamico('gfsantos', 'insert into interface select * from tasy_versao.interface where cd_interface in (2695)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_reg select * from tasy_versao.interface_reg where cd_interface in (2695)');
		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo select * from tasy_versao.interface_atributo where cd_interface in (2695)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('14/08/2015','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT 	qt_registro_w
	from	interface_atributo
	where	cd_interface = 1411
	and	nm_atributo = 'DT_COMPETENCIA'
	and	cd_reg_interface	= 1;

	if (qt_registro_w = 0) then
		begin
		delete 	from interface_atributo
		where	cd_interface 		= 1411
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1411 and cd_reg_interface = 1)');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('10/02/2016','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	user_indexes
	where	index_name = 'GRUSUPO_GERWHGR_FK_I';

	if (qt_registro_w = 0) then
		CALL exec_sql_dinamico('Anderson', 'Create Index GRUSUPO_GERWHGR_FK_I on GRUPO_SUPORTE(NR_SEQ_GRUPO_GERENCIA)');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	indice_atributo
	where	nm_indice = 'GRUSUPO_GERWHGR_FK_I'
	and	nm_atributo <> 'NR_SEQ_GRUPO_GERENCIA';

	if (qt_registro_w > 0) then
		CALL exec_sql_dinamico('Anderson', 'delete from indice_atributo where nm_indice = ''GRUSUPO_GERWHGR_FK_I''');

		CALL exec_sql_dinamico('Anderson', 'INSERT INTO INDICE_ATRIBUTO ( NM_TABELA, NM_INDICE, NR_SEQUENCIA, NM_ATRIBUTO, DT_ATUALIZACAO, NM_USUARIO, DS_INDICE_FUNCTION ) VALUES ( ''GRUPO_SUPORTE'', ''GRUSUPO_GERWHGR_FK_I'', 1, ''NR_SEQ_GRUPO_GERENCIA'',  sysdate, ''Anderson'', NULL)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('24/02/2016','dd/mm/yyyy')) then
	begin
	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1321;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 1321
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1321 and cd_reg_interface = 1)');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2695;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 2695
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2695 and cd_reg_interface = 1)');
	end if;

	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 2636;

	if (qt_registro_w > 0) then
		delete 	from interface_atributo
		where	cd_interface 		= 2636
		and	cd_reg_interface	= 1;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 2636 and cd_reg_interface = 1)');
	end if;
	end;
end if;

if (dt_versao_atual_cliente_w < to_date('11/03/2016','dd/mm/yyyy')) then
	begin

	select	count(*)
	into STRICT	qt_registro_w
	from	interface
	where	cd_interface = 1515;

	if (qt_registro_w > 0) then
		begin

		delete from interface_atributo
		where cd_interface = 1515
		and cd_reg_interface = 2;

		CALL exec_sql_dinamico('gfsantos', 'insert into interface_atributo (select * from tasy_versao.interface_atributo where cd_interface = 1515 and cd_reg_interface = 2)');

		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w IS NOT NULL AND dt_versao_atual_cliente_w::text <> '') then
	begin

	ds_comando_w	:= 'Select max(NR_SEQUENCIA) from SUS_PROCED_INCREMENTO_ORIGEM';
	qt_atual_w := Obter_valor_Dinamico(ds_comando_w, qt_atual_w);
	ds_comando_w	:= 'Select SUS_PROCED_INCREMENTO_ORIGEM_S.nextval from dual';
	qt_seq_w := Obter_valor_Dinamico(ds_comando_w, qt_seq_w);

	if (qt_atual_w > qt_seq_w) then
		begin
		nm_sequence_w := 'SUS_PROCED_INCREMENTO_ORIGEM_S';

		ds_comando_w := 'drop sequence ' || nm_sequence_w;

		CALL Exec_Sql_Dinamico_bv(nm_sequence_w, ds_comando_w,'');

		select 	coalesce(max(qt_seq_incremento),1)
		into STRICT	qt_seq_incr_atr_w
		from 	tabela_atributo
		where	nm_tabela = 'SUS_PROCED_INCREMENTO_ORIGEM'
		and	nm_atributo = 'NR_SEQUENCIA';

		qt_seq_max_w	:= 9999999999;
		ds_comando_w	:= 'Create Sequence SUS_PROCED_INCREMENTO_ORIGEM_S';
		ds_comando_w	:= ds_comando_w || ' Increment by ' || qt_seq_incr_atr_w;
		ds_comando_w	:= ds_comando_w || ' Start with ' || (qt_atual_w+1);
		ds_comando_w	:= ds_comando_w || ' MaxValue ' || qt_seq_max_w;
		ds_comando_w	:= ds_comando_w || ' Cycle';
		ds_comando_w	:= ds_comando_w || ' NoCache';

		CALL gravar_processo_longo(ds_comando_w,'TASY_POSICIONAR_SEQUENCE',null);
		CALL Exec_Sql_Dinamico_bv(nm_sequence_w, ds_comando_w,'');
		end;
	end if;

	end;
end if;

if (dt_versao_atual_cliente_w < to_date('06/06/2016','dd/mm/yyyy')) then
	begin
	qt_registro_w := 0;
	select	count(1)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'PGS_CRITERIO_META'
	and	column_name = 'QT_PRONTO_CRITERIO';

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos','update tabela_atributo set nm_atributo = ''QT_PONTO_CRITERIO'' ' ||
					'where nm_atributo = ''QT_PRONTO_CRITERIO'' and nm_tabela = ''PGS_CRITERIO_META''');
		CALL exec_sql_dinamico('gfsantos','alter table pgs_criterio_meta rename column QT_PRONTO_CRITERIO to QT_PONTO_CRITERIO ');
		end;
	end if;


	end;
end if;

if (dt_versao_atual_cliente_w < to_date('22/07/2016','dd/mm/yyyy')) then

	select	count(*)
	into STRICT	qt_registro_w
	from	user_objects
	where	object_name = 'BACA_AJUSTAR_PF_AUTOR_CIR';

	if (qt_registro_w > 0) then
		CALL baca_ajustar_pf_autor_cir();
	end if;

end if;

if (dt_versao_atual_cliente_w < to_date('26/07/2016','dd/mm/yyyy')) then
	begin

	qt_registro_w := 0;

	select	count(1)
	into STRICT	qt_registro_w
	from	user_tab_columns
	where	table_name = 'ESUS_AVAL_ELEGIBILIDADE'
	and	column_name = 'CD_CID_PRINCIPAL'
	and	data_length = 1;

	if (qt_registro_w > 0) then
		begin
		CALL exec_sql_dinamico('gfsantos','alter table esus_aval_elegibilidade modify cd_cid_principal varchar2(10) ');
		CALL exec_sql_dinamico('gfsantos','alter table esus_aval_elegibilidade modify cd_cid_secundario_1 varchar2(10) ');
		CALL exec_sql_dinamico('gfsantos','alter table esus_aval_elegibilidade modify cd_cid_secundario_2 varchar2(10) ');
		end;
	end if;
	end;
end if;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_ajustar_base_fatp ( nm_usuario_p text) FROM PUBLIC;

