-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE baca_acerto_bordero_tit_rec () AS $body$
DECLARE


/*
Paulo 17/08/2007
Este BACA foi desenvolvido para alterar o campo VL_GLOSA para 15,2
*/
BEGIN

/*Criar backup da tabela*/

CALL Exec_Sql_Dinamico('TASY', ' create table BKP_BORDERO_TIT_REC as (select * from bordero_tit_rec)');

/*Criar campo VL_GLOSA_TEMP*/

CALL Exec_Sql_Dinamico('TASY', ' alter table BORDERO_TIT_REC add (VL_GLOSA_TEMP NUMBER(15,2)) ' );

/*Copiar conteudo do VL_GLOSA para VL_GLOSA_TEMP*/

CALL Exec_Sql_Dinamico('TASY', ' update BORDERO_TIT_REC set VL_GLOSA_TEMP = VL_GLOSA');

commit;

/*Limpar o campo VL_GLOSA*/

CALL Exec_Sql_Dinamico('TASY', ' update BORDERO_TIT_REC set VL_GLOSA = NULL ');

/*Apagar campo VL_GLOSA*/

CALL Exec_Sql_Dinamico('TASY', ' alter table BORDERO_TIT_REC drop column VL_GLOSA ');

/*Criar campo VL_GLOSA(15,2)*/

CALL Exec_Sql_Dinamico('TASY', ' alter table BORDERO_TIT_REC add (VL_GLOSA	NUMBER(15,2)) ');

/*Copiar conteudo de VL_GLOSA_TEMP para VL_GLOSA*/

CALL Exec_Sql_Dinamico('TASY', ' update BORDERO_TIT_REC set VL_GLOSA = VL_GLOSA_TEMP ');

/*Limpar campo VL_GLOSA_TEMP*/

CALL Exec_Sql_Dinamico('TASY', ' update BORDERO_TIT_REC set VL_GLOSA_TEMP = NULL ');

/*Apagar campo VL_GLOSA_TEMP*/

CALL Exec_Sql_Dinamico('TASY', ' alter table BORDERO_TIT_REC drop column VL_GLOSA_TEMP ');

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE baca_acerto_bordero_tit_rec () FROM PUBLIC;

