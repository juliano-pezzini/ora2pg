-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE carregar_diluente_dose_dife_md (ds_dose_diferenciada_p text, ds_aux_diluir_p text, ie_separar_p text, cd_unid_med_dose_p text, ds_unit_pill_p text, qt_dose_mat_str_p bigint, ds_additional_item_p text, ds_dose_diluicao_p text, ds_material_p text, qt_dose_diluicao_p bigint, nr_casas_diluicao_p bigint, ds_volume_ml_p text, ds_retorno_p INOUT text) AS $body$
DECLARE

  ds_retorno_w varchar(5000);

BEGIN
  if (ie_separar_p = 'S') then
    ds_retorno_w := wheb_mensagem_pck.get_texto(307089);
  else
    ds_retorno_w := wheb_mensagem_pck.get_texto(307092);
  end if;

  if (cd_unid_med_dose_p = ds_unit_pill_p) then
    ds_retorno_w := ds_retorno_w || ' ' || ds_dose_diferenciada_p || ' ' ||
                    ds_unit_pill_p || ' ';
  else
    ds_retorno_w := ds_retorno_w || ' ' ||
                    round(qt_dose_mat_str_p, nr_casas_diluicao_p) || ' ml ';
  end if;

  ds_retorno_w := ds_retorno_w || trim(both ds_aux_diluir_p) ||
                  ds_additional_item_p || ' ';

  ds_retorno_w := ds_retorno_w || wheb_mensagem_pck.get_texto(307087) || ' ' ||
                  ds_dose_diluicao_p || ' ' ||
                  wheb_mensagem_pck.get_texto(307090);
  ds_retorno_w := ds_retorno_w || ' ' || ds_material_p || '. ' ||
                  wheb_mensagem_pck.get_texto(307088) || ' ' ||
                  round((coalesce(qt_dose_mat_str_p, 0) + coalesce(qt_dose_diluicao_p, 0)),
                        nr_casas_diluicao_p) || ds_volume_ml_p || ' ' || '\n';
  ds_retorno_p := ds_retorno_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE carregar_diluente_dose_dife_md (ds_dose_diferenciada_p text, ds_aux_diluir_p text, ie_separar_p text, cd_unid_med_dose_p text, ds_unit_pill_p text, qt_dose_mat_str_p bigint, ds_additional_item_p text, ds_dose_diluicao_p text, ds_material_p text, qt_dose_diluicao_p bigint, nr_casas_diluicao_p bigint, ds_volume_ml_p text, ds_retorno_p INOUT text) FROM PUBLIC;

