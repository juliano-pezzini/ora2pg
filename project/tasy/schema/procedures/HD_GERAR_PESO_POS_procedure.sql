-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE hd_gerar_peso_pos ( nr_seq_dialise_p bigint, qt_peso_pos_p bigint, ds_erro_p INOUT text, nm_usuario_p text) AS $body$
BEGIN

if (nr_seq_dialise_p IS NOT NULL AND nr_seq_dialise_p::text <> '') then

	begin

	if (qt_peso_pos_p = 0) then

		ds_erro_p	:= wheb_mensagem_pck.get_texto(1080700);

	elsif (qt_peso_pos_p <> 0) then

		update hd_dialise
       		set qt_peso_pos	= qt_peso_pos_p,
	  	       dt_atualizacao	= clock_timestamp(),
		       nm_usuario	= nm_usuario_p
	                where nr_sequencia = nr_seq_dialise_p;

	  commit;

	end if;

	end;

end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE hd_gerar_peso_pos ( nr_seq_dialise_p bigint, qt_peso_pos_p bigint, ds_erro_p INOUT text, nm_usuario_p text) FROM PUBLIC;

