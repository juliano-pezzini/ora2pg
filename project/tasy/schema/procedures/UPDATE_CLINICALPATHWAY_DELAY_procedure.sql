-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE update_clinicalpathway_delay ( NR_SEQUENCIA_P bigint, DT_FINALIZACAO_P timestamp, NR_DIAS_REAL_P bigint, NR_DIAS_ATRASO_P bigint, NR_SEQ_VARIACAO_P PROTOCOLO_INT_PACIENTE.NR_SEQ_VARIACAO%type default null, IE_IMPACTO_VARIACAO_P PROTOCOLO_INT_PACIENTE.IE_IMPACTO_VARIACAO%type default null, IE_REVISAO_VARIACAO_P PROTOCOLO_INT_PACIENTE.IE_REVISAO_VARIACAO%type default null, DS_VARIACAO_P PROTOCOLO_INT_PACIENTE.DS_VARIACAO%type default null) AS $body$
DECLARE


IE_VARIACAO_W PROTOCOLO_INT_PACIENTE.IE_VARIACAO%type;


BEGIN

  if (NR_SEQ_VARIACAO_P IS NOT NULL AND NR_SEQ_VARIACAO_P::text <> '') then
      IE_VARIACAO_W := 'S';
   else
      IE_VARIACAO_W := 'N';
   end if;

    UPDATE PROTOCOLO_INT_PACIENTE
    SET    DT_FINALIZACAO = DT_FINALIZACAO_P,
           NR_DIAS_REAL = NR_DIAS_REAL_P,
           NR_DIAS_ATRASO = NR_DIAS_ATRASO_P,
           IE_VARIACAO = IE_VARIACAO_W,
           NR_SEQ_VARIACAO = NR_SEQ_VARIACAO_P,
           IE_IMPACTO_VARIACAO = IE_IMPACTO_VARIACAO_P,
           IE_REVISAO_VARIACAO = IE_REVISAO_VARIACAO_P,
           DS_VARIACAO = DS_VARIACAO_P
    WHERE  NR_SEQUENCIA = NR_SEQUENCIA_P;
    COMMIT;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE update_clinicalpathway_delay ( NR_SEQUENCIA_P bigint, DT_FINALIZACAO_P timestamp, NR_DIAS_REAL_P bigint, NR_DIAS_ATRASO_P bigint, NR_SEQ_VARIACAO_P PROTOCOLO_INT_PACIENTE.NR_SEQ_VARIACAO%type default null, IE_IMPACTO_VARIACAO_P PROTOCOLO_INT_PACIENTE.IE_IMPACTO_VARIACAO%type default null, IE_REVISAO_VARIACAO_P PROTOCOLO_INT_PACIENTE.IE_REVISAO_VARIACAO%type default null, DS_VARIACAO_P PROTOCOLO_INT_PACIENTE.DS_VARIACAO%type default null) FROM PUBLIC;

