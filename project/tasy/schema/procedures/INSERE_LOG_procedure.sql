-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE insere_log ( nm_atributo_p patient_profile_log.nm_atributo%type, nr_seq_origem_p patient_profile_log.nr_seq_origem%type, nr_seq_destino_p patient_profile_log.nr_seq_destino%type, dt_liberacao_p patient_profile_log.dt_liberacao%type, nm_usuario_liberacao_p patient_profile_log.nm_usuario_liberacao%type, nm_tabela_p patient_profile_log.nm_tabela%type, nr_seq_view_p patient_profile_log.cd_view%type, nm_usuario_p patient_profile_log.nm_usuario%type, dt_atualizacao_nrec_p patient_profile_log.dt_atualizacao_nrec%type, nm_usuario_nrec_p patient_profile_log.nm_usuario_nrec%type) AS $body$
BEGIN

    insert into patient_profile_log(
                                    NR_SEQUENCIA,
                                    NM_ATRIBUTO, 
                                    NR_SEQ_ORIGEM, 
                                    NR_SEQ_DESTINO, 
                                    CD_DEPARTAMENT, 
                                    DT_LIBERACAO, 
                                    NM_USUARIO_LIBERACAO, 
                                    NM_TABELA, 
                                    CD_VIEW, 
                                    DT_ATUALIZACAO, 
                                    NM_USUARIO, 
                                    DT_ATUALIZACAO_NREC, 
                                    NM_USUARIO_NREC)
                            values (
                                    nextval('patient_profile_log_seq'),
                                    nm_atributo_p,
                                    nr_seq_origem_p,
                                    nr_seq_destino_p,
                                    wheb_usuario_pck.get_cd_setor_atendimento,
                                    dt_liberacao_p,
                                    nm_usuario_liberacao_p,
                                    nm_tabela_p,
                                    nr_seq_view_p,
                                    clock_timestamp(),
                                    nm_usuario_p, 
                                    dt_atualizacao_nrec_p, 
                                    nm_usuario_nrec_p);
                                    
    commit;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE insere_log ( nm_atributo_p patient_profile_log.nm_atributo%type, nr_seq_origem_p patient_profile_log.nr_seq_origem%type, nr_seq_destino_p patient_profile_log.nr_seq_destino%type, dt_liberacao_p patient_profile_log.dt_liberacao%type, nm_usuario_liberacao_p patient_profile_log.nm_usuario_liberacao%type, nm_tabela_p patient_profile_log.nm_tabela%type, nr_seq_view_p patient_profile_log.cd_view%type, nm_usuario_p patient_profile_log.nm_usuario%type, dt_atualizacao_nrec_p patient_profile_log.dt_atualizacao_nrec%type, nm_usuario_nrec_p patient_profile_log.nm_usuario_nrec%type) FROM PUBLIC;

