-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE intpd_processar_registro_fila (nr_sequencia_p bigint) AS $body$
DECLARE


ie_status_w		intpd_fila_transmissao.ie_status%type;
nr_seq_evento_sistema_w	intpd_fila_transmissao.nr_seq_evento_sistema%type;
ds_procedure_w		intpd_eventos_sistema.ds_procedure%type;

BEGIN

begin
select	ie_status,
	nr_seq_evento_sistema
into STRICT	ie_status_w,
	nr_seq_evento_sistema_w	
from	intpd_fila_transmissao
where	nr_sequencia	= nr_sequencia_p  LIMIT 1;
exception
when others then
	ie_status_w := null;
end;

if (ie_status_w = 'R') then

	select	max(ds_procedure)
	into STRICT	ds_procedure_w
	from	intpd_eventos_sistema
	where	nr_sequencia = nr_seq_evento_sistema_w;
	
	CALL gerar_int_padrao.set_executando_recebimento('S');
	
	if (ds_procedure_w IS NOT NULL AND ds_procedure_w::text <> '') then
		CALL exec_sql_dinamico('INTPDTASY', 'declare begin ' || ds_procedure_w || '(' || nr_sequencia_p || '); end;');		
	end if;

	CALL gerar_int_padrao.set_executando_recebimento('N');
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE intpd_processar_registro_fila (nr_sequencia_p bigint) FROM PUBLIC;

