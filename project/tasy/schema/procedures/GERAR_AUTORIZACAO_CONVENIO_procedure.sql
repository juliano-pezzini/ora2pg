-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_autorizacao_convenio ( cd_convenio_p bigint, nr_sequencia_p bigint, nm_usuario_p text) AS $body$
BEGIN

if (cd_convenio_p IS NOT NULL AND cd_convenio_p::text <> '') then

	insert into regra_gerar_autorizacao(
		nr_sequencia,
		cd_estabelecimento,
		dt_atualizacao,
		nm_usuario,
		ie_tipo_autorizacao,
		ie_evento,
		ie_exige_just_medica,
		qt_hora_antecedencia,
		hr_execucao,
		ie_tipo_atendimento,
		cd_edicao_convenio,
		cd_convenio,
		ie_internado,
		cd_classif_setor,
		cd_tipo_acomodacao,
		dt_atualizacao_nrec,
		nm_usuario_nrec,
		ie_tipo_regra,
		cd_procedimento,
		ie_origem_proced,
		cd_proc_internacao,
		ie_origem_proc_int,
		ie_tipo_guia,
		cd_categoria,
		cd_setor_atendimento,
		ie_situacao,
		nr_seq_classif,
		qt_idade_min,
		ie_carater_int_tiss_regra,
		qt_sessao_agenda,
		qt_dias_geracao_vigencia,
		ie_carater_inter_sus,
		ie_unic_intern_transf_rn,
		ie_proc_diaria_acomod,
		hr_final,
		ie_carater_cirurgia,
		cd_plano,
		qt_dias_solic_padrao,
		ie_agrup_medico_dia,
		ie_feriado,
		ie_gerar_indic_clinica,
		qt_dias_prazo,
		ie_clinica,
		qt_dia_autor_rn,
		ie_equip_agenda,
		nr_seq_tipo_avaliacao,
		cd_especialidade,
		ie_gerar_inicio_vigencia,
		ie_autor_exame_adic_integ,
		hr_inicial,
		nr_seq_estagio,
		nr_seq_proc_interno_int,
		dt_vigencia_final,
		dt_vigencia_inicial,
		qt_idade_max,
		ie_autor_vaga_atend,
		ie_tipo_util,
		ie_classif_agenda_consulta,
		ie_data_fim_vigencia,
		ie_dia_util,
		ie_gerar_observacao,
		ie_tipo_acomod_atual,
		dt_dia_semana,
		ie_gerar_proc_princ_agenda,
		ie_agrupa_tipo_proc,
		ie_gerar_autor_gir,
		nr_dias_autor,
		qt_autor_sessao
		)
	SELECT	nextval('regra_gerar_autorizacao_seq'),
		cd_estabelecimento,
		clock_timestamp(),
		nm_usuario_p,
		ie_tipo_autorizacao,
		ie_evento,
		ie_exige_just_medica,
		qt_hora_antecedencia,
		hr_execucao,
		ie_tipo_atendimento,
		cd_edicao_convenio,
		cd_convenio_p,
		ie_internado,
		cd_classif_setor,
		cd_tipo_acomodacao,
		clock_timestamp(),
		nm_usuario_p,
		ie_tipo_regra,
		cd_procedimento,
		ie_origem_proced,
		cd_proc_internacao,
		ie_origem_proc_int,
		ie_tipo_guia,
		cd_categoria,
		cd_setor_atendimento,
		coalesce(ie_situacao,'A'),
		nr_seq_classif,
		qt_idade_min,
		ie_carater_int_tiss_regra,
		qt_sessao_agenda,
		qt_dias_geracao_vigencia,
		ie_carater_inter_sus,
		ie_unic_intern_transf_rn,
		ie_proc_diaria_acomod,
		hr_final,
		ie_carater_cirurgia,
		cd_plano,
		qt_dias_solic_padrao,
		ie_agrup_medico_dia,
		ie_feriado,
		ie_gerar_indic_clinica,
		qt_dias_prazo,
		ie_clinica,
		qt_dia_autor_rn,
		ie_equip_agenda,
		nr_seq_tipo_avaliacao,
		cd_especialidade,
		ie_gerar_inicio_vigencia,
		ie_autor_exame_adic_integ,
		hr_inicial,
		nr_seq_estagio,
		nr_seq_proc_interno_int,
		dt_vigencia_final,
		dt_vigencia_inicial,
		qt_idade_max,
		ie_autor_vaga_atend,
		ie_tipo_util,
		ie_classif_agenda_consulta,
		ie_data_fim_vigencia,
		ie_dia_util,
		ie_gerar_observacao,
		ie_tipo_acomod_atual,
		dt_dia_semana,
		ie_gerar_proc_princ_agenda,
		ie_agrupa_tipo_proc,
		ie_gerar_autor_gir,
		nr_dias_autor,
		qt_autor_sessao
	from	regra_gerar_autorizacao
	where	nr_sequencia = nr_sequencia_p;

	commit;

end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_autorizacao_convenio ( cd_convenio_p bigint, nr_sequencia_p bigint, nm_usuario_p text) FROM PUBLIC;

