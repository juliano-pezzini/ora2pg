-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ins_mat_recao_frm_mims ( cd_imp_material_p imp_material.cd_material%type, cd_material_w material.cd_material%type) AS $body$
DECLARE

nr_seq_mat_reacao_w material_reacao.nr_sequencia%type;
cd_material_val   material.cd_material%type;

BEGIN
select	nextval('material_reacao_seq')
into STRICT	nr_seq_mat_reacao_w
;

select	cd_material_tasy
into STRICT	cd_material_val 
from 	mims_material_tasy
where 	cd_imp_material = cd_imp_material_p;

insert into	material_reacao(nr_sequencia,
	cd_material, 
	dt_atualizacao, 
	nm_usuario, 
	dt_atualizacao_nrec, 
	nm_usuario_nrec, 
	ds_reacao
	) 
SELECT	nr_seq_mat_reacao_w, 
	cd_material_val, 
	dt_atualizacao, 
	nm_usuario, 
	dt_atualizacao_nrec, 
	nm_usuario_nrec, 
	ds_reacao 
from   	imp_material_reacao 
where  	cd_material = cd_imp_material_p;

-- reset the dirty check          

/* update	imp_material_reacao a 
set    	a.ie_dirty_check = 0 
where  	a.cd_material = cd_imp_material_p;  */
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ins_mat_recao_frm_mims ( cd_imp_material_p imp_material.cd_material%type, cd_material_w material.cd_material%type) FROM PUBLIC;

