-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE inserir_tof_meta_atend ( nr_atendimento_p bigint, nm_usuario_p text DEFAULT NULL, nr_seq_meta_p bigint DEFAULT NULL, nr_seq_pac_acao_p bigint DEFAULT NULL) AS $body$
DECLARE

  nm_usuario_w       varchar(15);
  ie_cancelar_meta_w varchar(2);


BEGIN
  nm_usuario_w := coalesce(nm_usuario_p, obter_usuario_ativo);

  INSERT
  INTO tof_meta_atend(
      nr_sequencia,
      dt_atualizacao,
      nm_usuario,
      dt_atualizacao_nrec,
      nm_usuario_nrec,
      nr_seq_meta,
      dt_inicio,
      dt_finalizacao,
      nr_atendimento,
      ie_status,
      ds_observacao,
      dt_liberacao,
      ie_via_mentor,
      nr_seq_acao
    )
    VALUES (
      nextval('tof_meta_atend_seq'),
      clock_timestamp(),
      nm_usuario_w,
      clock_timestamp(),
      nm_usuario_w,
      nr_seq_meta_p,
      clock_timestamp(),
      NULL,
      nr_atendimento_p,
      'A',
      '',
      clock_timestamp(),
      'S',
      nr_seq_pac_acao_p
    );
  
  commit;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE inserir_tof_meta_atend ( nr_atendimento_p bigint, nm_usuario_p text DEFAULT NULL, nr_seq_meta_p bigint DEFAULT NULL, nr_seq_pac_acao_p bigint DEFAULT NULL) FROM PUBLIC;

