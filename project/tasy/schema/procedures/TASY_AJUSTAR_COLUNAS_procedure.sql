-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_ajustar_colunas () AS $body$
DECLARE


nm_tabela_w			varchar(50);
nm_atributo_w          		varchar(50)    := '';
vl_default_w			varchar(50);
ie_obrigatorio_w		varchar(1);
ie_tipo_atributo_w		varchar(10);
qt_tamanho_w			bigint;
qt_decimais_w			bigint;
qt_controle_w			bigint	:= 0;
nr_sequencia_criacao_w		bigint;
dt_geracao_versao_w		timestamp;

/*CURSOR C01 IS
SELECT  b.nm_atributo,
		b.ie_obrigatorio,
		b.ie_tipo_atributo,
		b.qt_tamanho,
		b.qt_decimais,
		b.vl_default,
		b.nm_tabela,
		b.nr_sequencia_criacao
FROM	tabela_atributo_ajuste_v b;*/
/*UNION
SELECT	a.nm_atributo,
	a.ie_obrigatorio,
	a.ie_tipo_atributo,
	a.qt_tamanho,
	a.qt_decimais,
	a.vl_default,
	a.nm_tabela,
	a.nr_sequencia_criacao
FROM   	tabela_atributo a
WHERE	trunc(a.dt_atualizacao) >= trunc(dt_geracao_versao_w)
AND	a.vl_default IS NOT NULL
ORDER BY nr_sequencia_criacao;*/
BEGIN

CALL GRAVAR_PROCESSO_LONGO('','TASY_AJUSTAR_COLUNAS',qt_controle_w);

dt_geracao_versao_w := obter_data_geracao_versao;

/*OPEN C01;
LOOP
	FETCH C01 INTO 	nm_atributo_w,
			ie_obrigatorio_w,
			ie_tipo_atributo_w,
			qt_tamanho_w,
			qt_decimais_w,
			vl_default_w,
			nm_tabela_w,
			nr_sequencia_criacao_w;
	EXIT WHEN C01%NOTFOUND;
	BEGIN
		TASY_ALTERAR_COLUNA(nm_tabela_w,nm_atributo_w,ie_tipo_atributo_w,qt_tamanho_w,qt_decimais_w,ie_obrigatorio_w,vl_default_w);
		qt_controle_w := qt_controle_w + 1 ;
		GRAVAR_PROCESSO_LONGO('','TASY_AJUSTAR_COLUNAS',qt_controle_w);
	END;
END LOOP;
CLOSE C01;*/
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_ajustar_colunas () FROM PUBLIC;

