-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_ds_aplicar_md (qt_solucao_p bigint, ds_volume_p INOUT text, ie_aplicar_p text, ds_rediluir_w text, cd_volume_final_str_p text, ds_diluir_p text, qt_conv_ml_p bigint, qt_ml_diluente_p bigint, ds_conv_ml_p text, ds_aplicar_p INOUT text, ds_intervalo_p text, ds_tempo_p text, ds_unid_med_ml_p text) AS $body$
BEGIN

  if (qt_solucao_p IS NOT NULL AND qt_solucao_p::text <> '') then
    ds_volume_p := ' ' || to_char(qt_solucao_p) || ' ' ||
                   ds_unid_med_ml_p;
  elsif (ie_aplicar_p = 'S') then
    begin
      if (ds_rediluir_w IS NOT NULL AND ds_rediluir_w::text <> '') then
        ds_volume_p := ' ' || cd_volume_final_str_p || ' ' ||
                       ds_unid_med_ml_p;
      elsif (ds_diluir_p IS NOT NULL AND ds_diluir_p::text <> '') then
        ds_volume_p := ' ' || to_char(coalesce(qt_conv_ml_p, 0) + coalesce(qt_ml_diluente_p, 0)) || ' ' ||
                       ds_unid_med_ml_p;
      elsif (ds_conv_ml_p IS NOT NULL AND ds_conv_ml_p::text <> '') then
        ds_volume_p := ' ' || ds_conv_ml_p;
      end if;
    end;
  end if;

  if (ds_volume_p IS NOT NULL AND ds_volume_p::text <> '') then
    ds_aplicar_p := Wheb_mensagem_pck.get_texto(309471)
                    || replace(ds_volume_p, '.', ',') || ' (' ||
                    ds_intervalo_p || ') ' || ds_tempo_p;
  elsif (ds_tempo_p IS NOT NULL AND ds_tempo_p::text <> '') then
    ds_aplicar_p := Wheb_mensagem_pck.get_texto(309471)
                    || ds_tempo_p;
  end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_ds_aplicar_md (qt_solucao_p bigint, ds_volume_p INOUT text, ie_aplicar_p text, ds_rediluir_w text, cd_volume_final_str_p text, ds_diluir_p text, qt_conv_ml_p bigint, qt_ml_diluente_p bigint, ds_conv_ml_p text, ds_aplicar_p INOUT text, ds_intervalo_p text, ds_tempo_p text, ds_unid_med_ml_p text) FROM PUBLIC;

