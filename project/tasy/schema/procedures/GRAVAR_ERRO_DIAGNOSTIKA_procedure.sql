-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gravar_erro_diagnostika ( id_origem_p text,--nr_seq_interno da prescr_procedimento
 cd_erro_p text, ds_erro_p text, nm_usuario_p text) AS $body$
BEGIN

if (id_origem_p IS NOT NULL AND id_origem_p::text <> '') and (cd_erro_p IS NOT NULL AND cd_erro_p::text <> '') and (ds_erro_p IS NOT NULL AND ds_erro_p::text <> '') then

	update	integracao_diagnostika
	set	cd_erro_diagnostika = cd_erro_p,
		ds_erro = substr(ds_erro_p,1,2000),
		dt_atualizacao = clock_timestamp(),
		nm_usuario = nm_usuario_p
	where	nr_seq_interno = id_origem_p;

	CALL gera_log_lab('','executou procedure gravar_erro_diagnostika -  id_origem: '
||id_origem_p||
	' cd_erro: '||cd_erro_p||' ds_erro '||ds_erro_p,'',13,nm_usuario_p);
	commit;

end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gravar_erro_diagnostika ( id_origem_p text, cd_erro_p text, ds_erro_p text, nm_usuario_p text) FROM PUBLIC;

