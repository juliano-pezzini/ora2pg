-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE html_deletar_agenda_espera (nr_sequencia_p bigint) AS $body$
DECLARE

 
/*Procedure copia da DELETAR_AGENDA_LISTA_ESPERA, coma consistência via procedure. 
Para evitar programação.*/
 
 
qt_w	bigint;

BEGIN
 
if (nr_sequencia_p IS NOT NULL AND nr_sequencia_p::text <> '') then 
 
	select 	count(1) 
	into STRICT	qt_w 
	from	agenda_consulta 
	where	nr_seq_lista_espera = nr_sequencia_p;
 
	if (qt_w = 0) then 
		delete from agenda_lista_espera where nr_sequencia = nr_sequencia_p;
		commit;
	else 
		CALL wheb_mensagem_pck.exibir_mensagem_abort(286088);	
	end if;
end if;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE html_deletar_agenda_espera (nr_sequencia_p bigint) FROM PUBLIC;

