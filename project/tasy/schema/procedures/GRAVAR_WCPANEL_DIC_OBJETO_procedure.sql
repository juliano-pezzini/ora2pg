-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gravar_wcpanel_dic_objeto ( nr_seq_objeto_sup_p bigint, ie_tipo_p text, nm_objeto_p text, ds_texto_p text, cd_funcao_p bigint, ds_sql_p text, nm_campo_base_p text, nm_campo_tela_p text, qt_largura_p bigint, ie_read_only_p text, nm_usuario_p text, nr_seq_objeto_p INOUT bigint) AS $body$
DECLARE


nr_seq_objeto_w	bigint;
nr_seq_apres_w	bigint;
nm_objeto_w	varchar(50);

BEGIN

if (ie_tipo_p = 'WCP') then
	begin
	select	nextval('dic_objeto_seq')
	into STRICT	nr_seq_objeto_w
	;

	nm_objeto_w := substr(replace(replace(initcap(replace(lower(nm_objeto_p),'_',' ')),' ',''),'Wcp','WCP'),1,50);

	insert into dic_objeto(
		nr_sequencia,
		dt_atualizacao,
		dt_atualizacao_nrec,
		nm_usuario,
		nm_usuario_nrec,
		ie_tipo_objeto,
		nm_objeto,
		ds_texto,
		cd_funcao,
		ds_sql,
		ie_ctrl,
		ie_shift,
		ie_alt,
		ie_momento_sql,
		ie_objeto_nulo,
		ie_objeto_generico,
		ie_tipo_grupo_obj_wscb,
		ie_configuravel,
		ie_layout_xy,
		ie_geracao_inf_wdp,
		ie_tipo_comp_wdp,
		ie_apresent_serie_wchart,
		ie_incremento_wchart,
		ie_read_only,
		ie_situacao,
		ie_momento_obj,
		ie_tipo_obj_col_wcp,
		ie_totalizar,
		ie_estilo_fonte,
		ie_alinhamento,
		ie_mostrar_separador_coluna,
		ie_mostrar_separador_linha,
		ie_auto_expand_width,
		ie_recursivo,
		ie_tipo_obj_painel)
	values (	nr_seq_objeto_w,
		clock_timestamp(),
		clock_timestamp(),
		nm_usuario_p,
		nm_usuario_p,
		'C',
		nm_objeto_w,
		ds_texto_p,
		cd_funcao_p,
		ds_sql_p,
		'N',
		'N',
		'N',
		'L',
		'N',
		'N',
		'S',
		'N',
		'N',
		'SQL',
		'WJTF',
		'B',
		'P',
		ie_read_only_p,
		'A',
		'A',
		'T',
		'N',
		'P',
		'E',
		'N',
		'N',
		'N',
		'N',
		'S');
	end;
elsif (ie_tipo_p = 'COLWCP') then
	begin
	nr_seq_objeto_w := nr_seq_objeto_sup_p;

	select	coalesce(max(nr_seq_apres),0)+10
	into STRICT	nr_seq_apres_w
	from	dic_objeto
	where	nr_seq_obj_sup = nr_seq_objeto_w;

	insert into dic_objeto(
		nr_sequencia,
		dt_atualizacao,
		dt_atualizacao_nrec,
		nm_usuario,
		nm_usuario_nrec,
		ie_tipo_objeto,
		nr_seq_obj_sup,
		cd_funcao,
		nm_campo_base,
		nm_campo_tela,
		qt_largura,
		ie_read_only,
		ie_tipo_obj_col_wcp,
		nr_seq_apres)
	values (	nextval('dic_objeto_seq'),
		clock_timestamp(),
		clock_timestamp(),
		nm_usuario_p,
		nm_usuario_p,
		'AC',
		nr_seq_objeto_w,
		cd_funcao_p,
		nm_campo_base_p,
		nm_campo_tela_p,
		qt_largura_p,
		ie_read_only_p,
		'T',
		nr_seq_apres_w);
	end;
end if;

commit;

nr_seq_objeto_p	:= nr_seq_objeto_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gravar_wcpanel_dic_objeto ( nr_seq_objeto_sup_p bigint, ie_tipo_p text, nm_objeto_p text, ds_texto_p text, cd_funcao_p bigint, ds_sql_p text, nm_campo_base_p text, nm_campo_tela_p text, qt_largura_p bigint, ie_read_only_p text, nm_usuario_p text, nr_seq_objeto_p INOUT bigint) FROM PUBLIC;

