-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_cobranca_deb_brasil_v084 ( nr_seq_cobr_escrit_p bigint, cd_estabelecimento_p bigint, nm_usuario_p text) AS $body$
DECLARE

 
-- OS 402140 
-- Layout Padrão Febraban 240 posições V08.4 
-- 01/09/2009 
						 
ds_conteudo_w			varchar(240);
ds_brancos_205_w		varchar(205);
ds_brancos_165_w		varchar(165);
nm_empresa_w			varchar(80);
nm_pessoa_w			varchar(80);
ds_brancos_54_w			varchar(54);
ds_endereco_w			varchar(30);
ds_bairro_w			varchar(15);
ds_brancos_80_w			varchar(80);
ds_banco_w			varchar(30);
ds_brancos_25_w			varchar(25);
cd_convenio_banco_w		varchar(20);
ds_cidade_w			varchar(20);
ds_nosso_numero_w		varchar(20);
ds_complemento_w		varchar(15);
vl_juros_w			varchar(17);
ds_brancos_17_w			varchar(17);
nr_conta_corrente_w		varchar(13);
nr_conta_corrente_fav_w		varchar(12);
ie_digito_ag_fav_w		varchar(1);
dt_remessa_retorno_w		varchar(14);
dt_geracao_arquivo_w		varchar(14);
nr_inscricao_w			varchar(14);
vl_liquidacao_w			varchar(18);
vl_cobranca_w			varchar(15);
vl_desconto_w			varchar(15);
dt_desconto_w			varchar(8);
vl_mora_w			varchar(15);
nr_seq_registro_w		bigint;
ds_brancos_10_w			varchar(10);
qt_reg_lote_w			varchar(10);
dt_vencimento_w			varchar(8);
dt_emissao_w			varchar(8);
dt_pagamento_w			varchar(8);
cd_cep_w			varchar(8);
nr_seq_lote_w			varchar(7);
nr_seq_arquivo_w		varchar(6);
nr_seq_envio_w			varchar(8);
cd_agencia_bancaria_w		varchar(5);
cd_agencia_bancaria_fav_w	varchar(5);
ie_tipo_inscricao_w		varchar(5);
nr_endereco_w			varchar(5);
cd_banco_w			varchar(3);
ie_emissao_bloqueto_w		varchar(3);
nr_digito_agencia_w		varchar(2);
nr_digito_agencia_fav_w		varchar(1);
sg_uf_w				varchar(2);
ie_protesto_w			varchar(2);
ie_tipo_registro_w		varchar(1);
qt_reg_arquivo_w		bigint := 0;
ds_brancos_69_w			varchar(69);
ds_brancos_33_w			varchar(33);
dt_gravacao_w			varchar(8);
nr_nosso_numero_w		varchar(20);
nr_seq_carteira_cobr_w		varchar(1);
nr_documento_cobr_w		varchar(15);
nr_titulo_w			varchar(20);
nm_pessoa_titulo_w		varchar(30);
sg_estado_w			varchar(2);
nr_seq_apres_w			bigint	:= 1;
ds_brancos_9_w			varchar(9);
ds_brancos_2_w			varchar(2);
ds_zeros_23_w			varchar(23);
ds_brancos_8_w			varchar(8);
ds_brancos_55_w			varchar(55);
ds_brancos_28_w			varchar(28);
vl_titulo_w			varchar(15);
vl_abatimento_w			varchar(15);
vl_multa_w			varchar(15);
ds_brancos_15_w			varchar(15);
qt_moeda_w			varchar(15);
dt_debito_w			varchar(8);
vl_debito_w			varchar(15);
ds_brancos_52_w			varchar(52);
ds_brancos_40_w			varchar(40);
ds_brancos_18_w			varchar(18);

C01 CURSOR FOR 
	SELECT	lpad(coalesce(x.cd_banco,c.cd_banco),3,'0') cd_banco, 
		'3' ie_tipo_registro, 
		to_char(b.dt_pagamento_previsto,'ddmmyyyy') dt_vencimento, 
		lpad(somente_numero(c.vl_desconto),15,'0') vl_desconto, 
		lpad(somente_numero(coalesce(c.vl_juros,0)),15,'0') vl_mora, 
		lpad(somente_numero(coalesce(c.vl_multa,0)),15,'0') vl_multa, 
		rpad(elimina_caractere_especial( 
				coalesce(substr(x.cd_agencia_bancaria,1,5),substr(c.cd_agencia_bancaria,1,5))),5,'0') cd_agencia_bancaria_fav, 
		coalesce(x.ie_digito_agencia,calcula_digito('Modulo11',c.cd_agencia_bancaria)) nr_digito_agencia_fav, 
		lpad(coalesce(lpad(coalesce(substr(x.cd_conta,1,11),substr(c.nr_conta,1,11)),11,'0') || 
			coalesce(x.ie_digito_conta,e.ie_digito_conta),'0'),12,'0') nr_conta_corrente_fav, 
		coalesce(x.ie_digito_agencia,calcula_digito('Modulo11',c.cd_agencia_bancaria)) ie_digito_ag_fav, 
		rpad(coalesce(b.nr_nosso_numero,' '),20,' ') nr_nosso_numero, 
		to_char(b.dt_emissao,'ddmmyyyy') dt_emissao, 
		rpad(b.nr_titulo,20,' ') nr_titulo, 
		CASE WHEN coalesce(b.cd_pessoa_fisica::text, '') = '' THEN '2'  ELSE '1' END  ie_tipo_inscricao, 
		lpad(CASE WHEN coalesce(b.cd_pessoa_fisica::text, '') = '' THEN b.cd_cgc  ELSE (	SELECT	coalesce(x.nr_cpf,x.cd_pessoa_fisica) 								from	pessoa_fisica x 								where	x.cd_pessoa_fisica	= b.cd_pessoa_fisica) END ,14,'0') nr_inscricao, 
		rpad(upper(coalesce(substr(elimina_acentuacao(obter_nome_pf_pj(b.cd_pessoa_fisica,b.cd_cgc)),1,30),' ')),30,' ') nm_pessoa_titulo, 
		rpad(coalesce(substr(obter_dados_pf_pj(b.cd_pessoa_fisica, b.cd_cgc, 'E'),1,30),' '),30,' ') ds_endereco, 
		lpad(coalesce(substr(obter_dados_pf_pj(b.cd_pessoa_fisica, b.cd_cgc,'NR'),1,5),'0'),5,'0') nr_endereco, 
		rpad(coalesce(substr(obter_dados_pf_pj(b.cd_pessoa_fisica, b.cd_cgc, 'CO'),1,15),' '),15,' ') ds_complemento, 
		rpad(coalesce(substr(obter_dados_pf_pj(b.cd_pessoa_fisica, b.cd_cgc, 'B'),1,15),' '),15,' ') ds_bairro, 
		rpad(coalesce(substr(obter_dados_pf_pj(b.cd_pessoa_fisica, b.cd_cgc, 'CI'),1,20),' '),20,' ') ds_cidade, 
		lpad(coalesce(substr(obter_dados_pf_pj(b.cd_pessoa_fisica, b.cd_cgc, 'CEP'),1,8),'0'),8,'0') cd_cep, 
		coalesce(substr(obter_dados_pf_pj(b.cd_pessoa_fisica, b.cd_cgc, 'UF'),1,2),' ') sg_uf, 
		lpad(coalesce(elimina_caracteres_especiais(b.vl_titulo),0),15,'0') vl_titulo, 
		lpad('0',15,'0') vl_abatimento, 
		lpad('0',15,'0') qt_moeda, 
		lpad('0',8,'0') dt_debito, 
		lpad('0',15,'0') vl_debito 
	FROM banco_estabelecimento e, titulo_receber_cobr c, titulo_receber_v b
LEFT OUTER JOIN pls_mensalidade m ON (b.nr_seq_mensalidade = m.nr_sequencia)
LEFT OUTER JOIN pls_contrato_pagador_fin x ON (m.nr_seq_pagador = x.nr_seq_pagador)
, cobranca_escritural a
LEFT OUTER JOIN banco_carteira d ON (a.nr_seq_carteira_cobr = d.nr_sequencia)
WHERE a.nr_sequencia		= c.nr_seq_cobranca and c.nr_titulo		= b.nr_titulo and a.nr_seq_conta_banco	= e.nr_sequencia    and ((x.dt_inicio_vigencia	= (	select	max(z.dt_inicio_vigencia) 
						from	pls_contrato_pagador_fin z 
						where	z.nr_seq_pagador	= m.nr_seq_pagador 
						and	a.dt_remessa_retorno between coalesce(z.dt_inicio_vigencia,a.dt_remessa_retorno) and 
								coalesce(z.dt_fim_vigencia,a.dt_remessa_retorno))) or (coalesce(b.nr_seq_mensalidade::text, '') = '')) and a.nr_sequencia		= nr_seq_cobr_escrit_p;


BEGIN 
 
delete from w_envio_banco where nm_usuario = nm_usuario_p;
 
select	lpad(' ',17,' '), 
	lpad(' ',10,' '), 
	lpad(' ',54,' '), 
	lpad(' ',80,' '), 
	lpad(' ',25,' '), 
	lpad(' ',165,' '), 
	lpad(' ',205,' '), 
	lpad(' ',69,' '), 
	lpad(' ',33,' '), 
	lpad(' ',9,' '), 
	lpad(' ',2,' '), 
	lpad('0',23,'0'), 
	lpad(' ',8,' '), 
	lpad(' ',55,' '), 
	lpad(' ',28,' '), 
	lpad(' ',15,' '), 
	lpad(' ',52,' '), 
	lpad(' ',40,' '), 
	lpad(' ',18,' ') 
into STRICT	ds_brancos_17_w, 
	ds_brancos_10_w, 
	ds_brancos_54_w, 
	ds_brancos_80_w, 
	ds_brancos_25_w, 
	ds_brancos_165_w, 
	ds_brancos_205_w, 
	ds_brancos_69_w, 
	ds_brancos_33_w, 
	ds_brancos_9_w, 
	ds_brancos_2_w, 
	ds_zeros_23_w, 
	ds_brancos_8_w, 
	ds_brancos_55_w, 
	ds_brancos_28_w, 
	ds_brancos_15_w, 
	ds_brancos_52_w, 
	ds_brancos_40_w, 
	ds_brancos_18_w
;
 
/* Header Arquivo*/
 
/*select	'0' ie_tipo_registro, 
	lpad(c.cd_banco,3,'0') cd_banco, 
	to_char(sysdate,'DDMMYYYYHHMISS') dt_geracao_arquivo, 
	rpad(substr(upper(obter_nome_banco(c.cd_banco)),1,30),30,' ') ds_banco, 
	lpad(c.cd_agencia_bancaria,5,0) cd_agencia_bancaria, 
	rpad(calcula_digito('Modulo11',c.cd_agencia_bancaria),1,'0') nr_digito_agencia, 
	lpad(lpad(substr(c.cd_conta,1,11),11,'0') || rpad(c.ie_digito_conta,2,'0'),13,'0') nr_conta_corrente, 
	rpad(upper(substr(elimina_acentuacao(obter_razao_social(b.cd_cgc)),1,30)),30,' ') nm_empresa, 
	lpad(b.cd_cgc,14,'0') nr_inscricao, 
	rpad(nvl(d.cd_convenio_banco,c.cd_convenio_banco),20,'0') cd_convenio_banco, 
	lpad(a.nr_sequencia,6,'0') 
into	ie_tipo_registro_w, 
	cd_banco_w, 
	dt_geracao_arquivo_w, 
	ds_banco_w, 
	cd_agencia_bancaria_w, 
	nr_digito_agencia_w, 
	nr_conta_corrente_w, 
	nm_empresa_w, 
	nr_inscricao_w, 
	cd_convenio_banco_w, 
	nr_seq_arquivo_w 
from	estabelecimento b, 
	banco_estabelecimento c, 
	cobranca_escritural a, 
	banco_carteira d 
where	a.cd_estabelecimento	= b.cd_estabelecimento 
and	a.nr_seq_conta_banco	= c.nr_sequencia 
and	a.nr_seq_carteira_cobr 	= d.nr_sequencia(+) 
and	a.nr_sequencia		= nr_seq_cobr_escrit_p; 
 
ds_conteudo_w	:=	cd_banco_w || '0000' || ie_tipo_registro_w || ds_brancos_9_w || '2' || nr_inscricao_w || cd_convenio_banco_w ||  
			cd_agencia_bancaria_w || nr_digito_agencia_w || nr_conta_corrente_w || ' ' || nm_empresa_w || ds_banco_w || 
			ds_brancos_10_w || '1' || dt_geracao_arquivo_w || nr_seq_arquivo_w || '08400000' || ds_brancos_69_w; 
 
insert into w_envio_banco 
	(	nr_sequencia, 
		dt_atualizacao, 
		nm_usuario, 
		dt_atualizacao_nrec, 
		nm_usuario_nrec, 
		cd_estabelecimento, 
		ds_conteudo, 
		nr_seq_apres) 
values	(	w_envio_banco_seq.nextval, 
		sysdate, 
		nm_usuario_p, 
		sysdate, 
		nm_usuario_p, 
		cd_estabelecimento_p, 
		ds_conteudo_w, 
		nr_seq_apres_w); 
 
qt_reg_arquivo_w	:= qt_reg_arquivo_w + 1;*/
 
/* Fim Header Arquivo */
 
 
/* Header Lote */
 
select	'1' ie_tipo_registro, 
	lpad(c.cd_banco,3,'0') cd_banco, 
	lpad(a.nr_sequencia,8,'0') nr_seq_envio, 
	rpad(Elimina_Caracter(elimina_caractere_especial(c.cd_agencia_bancaria),'x'),5,0) cd_agencia_bancaria, 
	rpad(coalesce(substr(w.ie_digito,1,1),calcula_digito('Modulo11',c.cd_agencia_bancaria)),1,'0') nr_digito_agencia, 
	lpad(lpad(substr(c.cd_conta,1,11),11,'0') || rpad(c.ie_digito_conta,2,'0'),13,'0') nr_conta_corrente, 
	rpad(upper(substr(elimina_acentuacao(obter_razao_social(b.cd_cgc)),1,30)),30,' ') nm_empresa, 
	lpad(b.cd_cgc,14,'0') nr_inscricao, 
	rpad(coalesce(d.cd_convenio_banco,c.cd_convenio_banco),20,'0') cd_convenio_banco, 
	rpad(a.nr_sequencia,6,'0'), 
	to_char(clock_timestamp(),'DDMMYYYY') dt_gravacao, 
	rpad(coalesce(substr(obter_dados_pf_pj(null,b.cd_cgc, 'E'),1,30),' '),30,' ') ds_endereco, 
	lpad(coalesce(substr(obter_dados_pf_pj(null,b.cd_cgc,'NR'),1,5),'0'),5,'0') nr_endereco, 
	rpad(coalesce(substr(obter_dados_pf_pj(null,b.cd_cgc, 'CO'),1,15),' '),15,' ') ds_complemento, 
	rpad(coalesce(substr(obter_dados_pf_pj(null,b.cd_cgc, 'B'),1,15),' '),15,' ') ds_bairro, 
	rpad(coalesce(substr(obter_dados_pf_pj(null,b.cd_cgc, 'CI'),1,20),' '),20,' ') ds_cidade, 
	lpad(coalesce(substr(obter_dados_pf_pj(null,b.cd_cgc, 'CEP'),1,8),'0'),8,'0') cd_cep, 
	coalesce(substr(obter_dados_pf_pj(null,b.cd_cgc, 'UF'),1,2),' ') sg_uf 
into STRICT	ie_tipo_registro_w, 
	cd_banco_w, 
	nr_seq_envio_w, 
	cd_agencia_bancaria_w, 
	nr_digito_agencia_w, 
	nr_conta_corrente_w, 
	nm_empresa_w, 
	nr_inscricao_w, 
	cd_convenio_banco_w, 
	nr_seq_arquivo_w, 
	dt_gravacao_w, 
	ds_endereco_w, 
	nr_endereco_w, 
	ds_complemento_w, 
	ds_bairro_w, 
	ds_cidade_w, 
	cd_cep_w, 
	sg_uf_w 
FROM agencia_bancaria w, banco_estabelecimento c, estabelecimento b, cobranca_escritural a
LEFT OUTER JOIN banco_carteira d ON (a.nr_seq_carteira_cobr = d.nr_sequencia)
WHERE a.cd_estabelecimento	= b.cd_estabelecimento and a.nr_seq_conta_banco	= c.nr_sequencia and c.cd_agencia_bancaria	= w.cd_agencia_bancaria  and a.nr_sequencia		= nr_seq_cobr_escrit_p;
 
ds_conteudo_w	:= 	cd_banco_w || '0001' || ie_tipo_registro_w || 'D0000030 2' || nr_inscricao_w || cd_convenio_banco_w || 
			cd_agencia_bancaria_w || nr_digito_agencia_w || nr_conta_corrente_w || ' ' || nm_empresa_w || ds_brancos_40_w || 
			ds_endereco_w || nr_endereco_w || ds_complemento_w || ds_cidade_w || cd_cep_w || sg_uf_w || ds_brancos_18_w;
 
nr_seq_apres_w	:= nr_seq_apres_w + 1;
 
insert into w_envio_banco(	nr_sequencia, 
		dt_atualizacao, 
		nm_usuario, 
		dt_atualizacao_nrec, 
		nm_usuario_nrec, 
		cd_estabelecimento, 
		ds_conteudo, 
		nr_seq_apres) 
values (	nextval('w_envio_banco_seq'), 
		clock_timestamp(), 
		nm_usuario_p, 
		clock_timestamp(), 
		nm_usuario_p, 
		cd_estabelecimento_p, 
		ds_conteudo_w, 
		nr_seq_apres_w);
		 
qt_reg_arquivo_w	:= qt_reg_arquivo_w + 1;
/* Fim Header Lote */
 
 
/* Detalhe */
 
open C01;
loop 
fetch C01 into	 
	cd_banco_w, 
	ie_tipo_registro_w, 
	dt_vencimento_w, 
	vl_desconto_w, 
	vl_mora_w, 
	vl_multa_w, 
	cd_agencia_bancaria_fav_w, 
	nr_digito_agencia_fav_w, 
	nr_conta_corrente_fav_w, 
	ie_digito_ag_fav_w, 
	nr_nosso_numero_w, 
	dt_emissao_w, 
	nr_titulo_w, 
	ie_tipo_inscricao_w, 
	nr_inscricao_w, 
	nm_pessoa_titulo_w, 
	ds_endereco_w, 
	nr_endereco_w, 
	ds_complemento_w, 
	ds_bairro_w, 
	ds_cidade_w, 
	cd_cep_w, 
	sg_uf_w, 
	vl_titulo_w, 
	vl_abatimento_w, 
	qt_moeda_w, 
	dt_debito_w, 
	vl_debito_w;
EXIT WHEN NOT FOUND; /* apply on C01 */
 
	nr_seq_registro_w	:= coalesce(nr_seq_registro_w,0) + 1;
 
	/* Segmento A */
 
	nr_seq_apres_w		:= nr_seq_apres_w + 1;
 
	ds_conteudo_w	:=	cd_banco_w || '0001' || ie_tipo_registro_w || lpad(nr_seq_registro_w,5,'0') || 'A' || '0' || '00' || '  ' || 
				cd_banco_w || cd_agencia_bancaria_fav_w || nr_digito_agencia_fav_w || nr_conta_corrente_fav_w || 
				ie_digito_ag_fav_w || nm_pessoa_titulo_w || nr_titulo_w || dt_vencimento_w || 'BRL' || qt_moeda_w || vl_titulo_w || 
				nr_nosso_numero_w || dt_debito_w || vl_debito_w || ds_brancos_52_w || '0' || ds_brancos_10_w;
	 
	insert into w_envio_banco(	nr_sequencia, 
			dt_atualizacao, 
			nm_usuario, 
			dt_atualizacao_nrec, 
			nm_usuario_nrec, 
			cd_estabelecimento, 
			ds_conteudo, 
			nr_seq_apres) 
	values (	nextval('w_envio_banco_seq'), 
			clock_timestamp(), 
			nm_usuario_p, 
			clock_timestamp(), 
			nm_usuario_p, 
			cd_estabelecimento_p, 
			ds_conteudo_w, 
			nr_seq_apres_w);
			 
	qt_reg_arquivo_w	:= qt_reg_arquivo_w + 1;
	/* Fim segmento A */
 
 
	/* Segmento B */
 
	nr_seq_apres_w	:= nr_seq_apres_w + 1;
 
	ds_conteudo_w	:= 	cd_banco_w || '0001' || ie_tipo_registro_w || lpad(nr_seq_registro_w,5,'0') || 'B' || '  ' || 
				ie_tipo_inscricao_w || nr_inscricao_w || ds_endereco_w || nr_endereco_w || ds_complemento_w || 
				ds_bairro_w || ds_cidade_w || cd_cep_w || sg_uf_w || dt_vencimento_w || vl_titulo_w || vl_abatimento_w || 
				vl_desconto_w || vl_mora_w || vl_multa_w || lpad(nr_inscricao_w,15,'0') || ds_brancos_15_w;
				 
	insert into w_envio_banco(	nr_sequencia, 
			dt_atualizacao, 
			nm_usuario, 
			dt_atualizacao_nrec, 
			nm_usuario_nrec, 
			cd_estabelecimento, 
			ds_conteudo, 
			nr_seq_apres) 
	values (	nextval('w_envio_banco_seq'), 
			clock_timestamp(), 
			nm_usuario_p, 
			clock_timestamp(), 
			nm_usuario_p, 
			cd_estabelecimento_p, 
			ds_conteudo_w, 
			nr_seq_apres_w);
 
	/* Fim segmento B */
 
				 
	qt_reg_arquivo_w	:= qt_reg_arquivo_w + 1;
	 
end loop;
close C01;
/* Fim detalhe */
 
 
/* Trailler Lote*/
 
select	count(*), 
	'9' ie_tipo_registro, 
	'99999' nr_seq_envio, 
	somente_numero(to_char(sum(b.vl_liquidacao),'000000000000.00')) 
into STRICT	qt_reg_lote_w, 
	ie_tipo_registro_w, 
	nr_seq_envio_w, 
	vl_liquidacao_w 
from	titulo_receber_cobr b, 
	cobranca_escritural a 
where	a.nr_sequencia		= b.nr_seq_cobranca 
and	a.nr_sequencia		= nr_seq_cobr_escrit_p 
group by a.nr_sequencia, 
	 a.dt_remessa_retorno, 
	 a.dt_remessa_retorno, 
	 a.cd_banco, 
	a.ie_emissao_bloqueto;
	 
ds_conteudo_w	:= 	'001' || '9999' || '5' || ds_brancos_9_w || lpad(qt_reg_lote_w,6,'0') || '000000' || lpad(vl_liquidacao_w,18,'0') || 
			'000000000000000000' || ds_brancos_165_w || '0000000000';
 
nr_seq_apres_w	:= nr_seq_apres_w + 1;
	 
insert into w_envio_banco(	nr_sequencia, 
		dt_atualizacao, 
		nm_usuario, 
		dt_atualizacao_nrec, 
		nm_usuario_nrec, 
		cd_estabelecimento, 
		ds_conteudo, 
		nr_seq_apres) 
values (	nextval('w_envio_banco_seq'), 
		clock_timestamp(), 
		nm_usuario_p, 
		clock_timestamp(), 
		nm_usuario_p, 
		cd_estabelecimento_p, 
		ds_conteudo_w, 
		nr_seq_apres_w);
		 
qt_reg_arquivo_w	:= qt_reg_arquivo_w + 1;
/* Fim Trailler Lote*/
 
 
/* Trailler Arquivo*/
 
/*select	count(*), 
	'9' ie_tipo_registro, 
	'99999' nr_seq_envio, 
	somente_numero(to_char(sum(b.vl_liquidacao),'000000000000.00')) 
into	qt_reg_lote_w, 
	ie_tipo_registro_w, 
	nr_seq_envio_w, 
	vl_liquidacao_w 
from	titulo_receber_cobr b, 
	cobranca_escritural a 
where	a.nr_sequencia		= b.nr_seq_cobranca 
and	a.nr_sequencia		= nr_seq_cobr_escrit_p 
group by 
	a.nr_sequencia, 
	a.dt_remessa_retorno, 
	a.dt_remessa_retorno, 
	a.cd_banco, 
	a.ie_emissao_bloqueto; 
	 
qt_reg_arquivo_w := qt_reg_arquivo_w + 1; 
 
ds_conteudo_w	:=	'001' || '9999' || '9' || ds_brancos_9_w || '000001' || lpad(qt_reg_arquivo_w,6,'0') || '000000' || 
			ds_brancos_205_w; 
 
nr_seq_apres_w	:= nr_seq_apres_w + 1; 
 
insert into w_envio_banco 
	(	nr_sequencia, 
		dt_atualizacao, 
		nm_usuario, 
		dt_atualizacao_nrec, 
		nm_usuario_nrec, 
		cd_estabelecimento, 
		ds_conteudo, 
		nr_seq_apres) 
values	(	w_envio_banco_seq.nextval, 
		sysdate, 
		nm_usuario_p, 
		sysdate, 
		nm_usuario_p, 
		cd_estabelecimento_p, 
		ds_conteudo_w, 
		nr_seq_apres_w);*/
 
/* Fim Trailler Arquivo*/
 
 
commit;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_cobranca_deb_brasil_v084 ( nr_seq_cobr_escrit_p bigint, cd_estabelecimento_p bigint, nm_usuario_p text) FROM PUBLIC;

