-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_horarios_sem_lib ( nr_prescricao_p bigint, nm_usuario_p text) AS $body$
DECLARE

 
/*nr_sequencia_w		number(20);*/
 
cd_perfil_w		numeric(20);				
/*Cursor C01 is 
	select	nr_sequencia 
	from	prescr_material 
	where	nr_prescricao = nr_prescricao_p; 
 
Cursor C02 is 
	select	nr_sequencia 
	from	prescr_procedimento 
	where	nr_prescricao = nr_prescricao_p;	 
	 
Cursor C03 is 
	select	nr_sequencia 
	from	prescr_dieta 
	where	nr_prescricao = nr_prescricao_p;	 
	 
Cursor C04 is 
	select	nr_sequencia 
	from	prescr_recomendacao 
	where	nr_prescricao = nr_prescricao_p;	 
*/
					 

BEGIN 
-- vhkrausser ---- Resumo da procedure 
cd_perfil_w	:= obter_perfil_ativo;
CALL Gerar_prescr_mat_sem_dt_lib(nr_prescricao_p,null,cd_perfil_w,'N',nm_usuario_p,null);
CALL Gerar_prescr_proc_sem_dt_lib(nr_prescricao_p,null,cd_perfil_w,'N',nm_usuario_p);
CALL Gerar_prescr_dieta_hor_sem_lib(nr_prescricao_p,null,cd_perfil_w,'N','','N',nm_usuario_p);
CALL Gerar_prescr_hor_sem_lib(nr_prescricao_p,null,cd_perfil_w,'N',nm_usuario_p);
/* 
open C01; 
loop 
fetch C01 into	 
	nr_sequencia_w; 
exit when C01%notfound; 
	begin 
	Gerar_prescr_mat_sem_dt_lib(nr_prescricao_p,nr_sequencia_w,obter_perfil_ativo,'N',nm_usuario_p,null); 
	end; 
end loop; 
close C01; 
 
open C02; 
loop 
fetch C02 into	 
	nr_sequencia_w; 
exit when C02%notfound; 
	begin 
	Gerar_prescr_proc_sem_dt_lib(nr_prescricao_p,nr_sequencia_w,obter_perfil_ativo,'N',nm_usuario_p); 
	end; 
end loop; 
close C02; 
 
open C03; 
loop 
fetch C03 into	 
	nr_sequencia_w; 
exit when C03%notfound; 
	begin 
	Gerar_prescr_dieta_hor_sem_lib(nr_prescricao_p,nr_sequencia_w,obter_perfil_ativo,'N','','N',nm_usuario_p); 
	end; 
end loop; 
close C03; 
 
open C04; 
loop 
fetch C04 into	 
	nr_sequencia_w; 
exit when C04%notfound; 
	begin 
	Gerar_prescr_hor_sem_lib(nr_prescricao_p,nr_sequencia_w,obter_perfil_ativo,'N',nm_usuario_p); 
	end; 
end loop; 
close C04; 
*/
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_horarios_sem_lib ( nr_prescricao_p bigint, nm_usuario_p text) FROM PUBLIC;

