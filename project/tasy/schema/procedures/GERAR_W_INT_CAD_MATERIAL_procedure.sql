-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_w_int_cad_material ( cd_classif_fiscal_p text, cd_classe_material_p text, cd_fabricante_p text, cd_sistema_ant_p text, cd_unidade_medida_compra_p text, cd_unidade_medida_consumo_p text, cd_unidade_medida_estoque_p text, cd_unidade_medida_solic_p text, ds_material_p text, ds_reduzida_p text, dt_validade_cert_aprov_p text, ie_abrigo_luz_p text, ie_baixa_estoq_pac_p text, ie_baixa_inteira_p text, ie_bomba_infusao_p text, ie_cobra_paciente_p text, ie_consignado_p text, ie_controle_medico_p text, ie_curva_abc_p text, ie_diluicao_p text, ie_disponivel_mercado_p text, ie_gravar_obs_prescr_p text, ie_inf_ultima_compra_p text, ie_mistura_p text, ie_obrig_via_aplicacao_p text, ie_preco_compra_p text, ie_receita_p text, ie_situacao_p text, ie_solucao_p text, ie_tipo_material_p text, ie_umidade_controlada_p text, ie_via_aplicacao_p text, nr_certificado_aprovacao_p text, nr_seq_fabric_p text, nr_seq_familia_p text, nr_seq_grupo_rec_p text, nr_seq_localizacao_p text, qt_conv_compra_estoque_p text, qt_conv_estoque_consumo_p text, qt_dias_validade_p text, qt_horas_util_pac_p text, qt_max_prescricao_p text, qt_minimo_multiplo_solic_p text, qt_prioridade_coml_p text, nm_usuario_p text, nr_seq_cad_material_p INOUT text) AS $body$
DECLARE



nr_seq_cad_material_w	bigint;
ds_erro_w		varchar(4000);


BEGIN

delete	from w_int_cadastro_material
where	nm_usuario = nm_usuario_p;


select	nextval('w_int_cadastro_material_seq')
into STRICT	nr_seq_cad_material_w
;

begin


insert into w_int_cadastro_material(
				nr_sequencia,
				cd_classif_fiscal,
				cd_classe_material,
				cd_fabricante,
				cd_sistema_ant,
				cd_unidade_medida_compra,
				cd_unidade_medida_consumo,
				cd_unidade_medida_estoque,
				cd_unidade_medida_solic,
				ds_material,
				ds_reduzida,
				dt_atualizacao,
				dt_atualizacao_nrec,
				dt_validade_certificado_aprov,
				ie_abrigo_luz,
				ie_baixa_estoq_pac,
				ie_baixa_inteira,
				ie_bomba_infusao,
				ie_cobra_paciente,
				ie_consignado,
				ie_controle_medico,
				ie_curva_abc,
				ie_diluicao,
				ie_disponivel_mercado,
				ie_gravar_obs_prescr,
				ie_inf_ultima_compra,
				ie_mistura,
				ie_obrig_via_aplicacao,
				ie_preco_compra,
				ie_receita,
				ie_situacao,
				ie_solucao,
				ie_tipo_material,
				ie_umidade_controlada,
				ie_via_aplicacao,
				nm_usuario,
				nm_usuario_nrec,
				nr_certificado_aprovacao,
				nr_seq_fabric,
				nr_seq_familia,
				nr_seq_grupo_rec,
				nr_seq_localizacao,
				qt_conv_compra_estoque,
				qt_conv_estoque_consumo,
				qt_dias_validade,
				qt_horas_util_pac,
				qt_max_prescricao,
				qt_minimo_multiplo_solic,
				qt_prioridade_coml)
values (	nr_seq_cad_material_w,
	cd_classif_fiscal_p,
	cd_classe_material_p,
	cd_fabricante_p,
	cd_sistema_ant_p,
	cd_unidade_medida_compra_p,
	cd_unidade_medida_consumo_p,
	cd_unidade_medida_estoque_p,
	cd_unidade_medida_solic_p,
	ds_material_p,
	ds_reduzida_p,
	clock_timestamp(),
	clock_timestamp(),
	to_date(dt_validade_cert_aprov_p,'dd/mm/yyyy'),
	ie_abrigo_luz_p,
	ie_baixa_estoq_pac_p,
	ie_baixa_inteira_p,
	ie_bomba_infusao_p,
	ie_cobra_paciente_p,
	ie_consignado_p,
        (ie_controle_medico_p)::numeric ,
        ie_curva_abc_p,
        ie_diluicao_p,
        ie_disponivel_mercado_p,
        ie_gravar_obs_prescr_p,
        ie_inf_ultima_compra_p,
        ie_mistura_p,
        ie_obrig_via_aplicacao_p,
        ie_preco_compra_p,
        ie_receita_p,
        ie_situacao_p,
        ie_solucao_p,
        ie_tipo_material_p,
        ie_umidade_controlada_p,
        ie_via_aplicacao_p,
        nm_usuario_p,
        nm_usuario_p,
        nr_certificado_aprovacao_p,
        nr_seq_fabric_p,
        nr_seq_familia_p,
        nr_seq_grupo_rec_p,
        nr_seq_localizacao_p,
        (qt_conv_compra_estoque_p)::numeric ,
        (qt_conv_estoque_consumo_p)::numeric ,
        (qt_dias_validade_p)::numeric ,
        (qt_horas_util_pac_p)::numeric ,
        (qt_max_prescricao_p)::numeric ,
        (qt_minimo_multiplo_solic_p)::numeric ,
        (qt_prioridade_coml_p)::numeric );


exception
when others then
	ds_erro_w	:= substr(sqlerrm,1,4000);
end;


nr_seq_cad_material_p := nr_seq_cad_material_w;

commit;


end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_w_int_cad_material ( cd_classif_fiscal_p text, cd_classe_material_p text, cd_fabricante_p text, cd_sistema_ant_p text, cd_unidade_medida_compra_p text, cd_unidade_medida_consumo_p text, cd_unidade_medida_estoque_p text, cd_unidade_medida_solic_p text, ds_material_p text, ds_reduzida_p text, dt_validade_cert_aprov_p text, ie_abrigo_luz_p text, ie_baixa_estoq_pac_p text, ie_baixa_inteira_p text, ie_bomba_infusao_p text, ie_cobra_paciente_p text, ie_consignado_p text, ie_controle_medico_p text, ie_curva_abc_p text, ie_diluicao_p text, ie_disponivel_mercado_p text, ie_gravar_obs_prescr_p text, ie_inf_ultima_compra_p text, ie_mistura_p text, ie_obrig_via_aplicacao_p text, ie_preco_compra_p text, ie_receita_p text, ie_situacao_p text, ie_solucao_p text, ie_tipo_material_p text, ie_umidade_controlada_p text, ie_via_aplicacao_p text, nr_certificado_aprovacao_p text, nr_seq_fabric_p text, nr_seq_familia_p text, nr_seq_grupo_rec_p text, nr_seq_localizacao_p text, qt_conv_compra_estoque_p text, qt_conv_estoque_consumo_p text, qt_dias_validade_p text, qt_horas_util_pac_p text, qt_max_prescricao_p text, qt_minimo_multiplo_solic_p text, qt_prioridade_coml_p text, nm_usuario_p text, nr_seq_cad_material_p INOUT text) FROM PUBLIC;

