-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_dietas_setores_ref ( cd_setor_p bigint, cd_dominio_p bigint, qt_hora_p bigint, dt_dieta_p timestamp, nm_usuario_p text) AS $body$
DECLARE

 
cd_refeicao_w		varchar(15);

C01 CURSOR FOR 
	SELECT	vl_dominio cd_refeicao 
	from	valor_dominio 
	where	cd_dominio = cd_dominio_p;


BEGIN 
 
open C01;
loop 
fetch C01 into	 
	cd_refeicao_w;
	EXIT WHEN NOT FOUND; /* apply on C01 */
	begin 
	CALL obter_dieta_prescricao( cd_setor_p, 
				qt_hora_p, 
				dt_dieta_p, 
				cd_refeicao_w, 
				nm_usuario_p);
	end;
end loop;
close C01;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_dietas_setores_ref ( cd_setor_p bigint, cd_dominio_p bigint, qt_hora_p bigint, dt_dieta_p timestamp, nm_usuario_p text) FROM PUBLIC;

