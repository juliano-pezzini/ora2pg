-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_tabela_sline_laudo_oper (nr_prescricao_p bigint ,cd_medico_p text ,ds_oper_regans_p text ,ds_oper_nmcarteira_p text ,ds_oper_numguia_p text ,nm_usuario_p text ,nr_seq_laudo_oper_p INOUT bigint) AS $body$
DECLARE

nr_seq_sline_xml_laudo_w bigint;

BEGIN

select nr_sequencia
  into STRICT nr_seq_sline_xml_laudo_w
  from sline_xml_laudo s
 where s.cd_medico = cd_medico_p 
   and s.nr_prescricao = nr_prescricao_p;

select nextval('sline_xml_laudo_oper_seq')
  into STRICT nr_seq_laudo_oper_p
;

Insert
  into sline_xml_laudo_oper(NR_SEQUENCIA
                           ,DT_ATUALIZACAO
                           ,NM_USUARIO
                           ,DT_ATUALIZACAO_NREC
                           ,NM_USUARIO_NREC
                           ,NR_SEQ_XML_LAUDO
                           ,DS_OPER_REGANS
                           ,DS_OPER_NMCARTEIRA
                           ,DS_OPER_NUMGUIA
                           ,NR_PRESCRICAO
                           ,CD_MEDICO)
                    values (nr_seq_laudo_oper_p
                           ,clock_timestamp()
                           ,nm_usuario_p
                           ,clock_timestamp()
                           ,nm_usuario_p
                           ,nr_seq_sline_xml_laudo_w
                           ,ds_oper_regans_p
                           ,ds_oper_nmcarteira_p
                           ,ds_oper_numguia_p
                           ,nr_prescricao_p
                           ,cd_medico_p);
commit;
  
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_tabela_sline_laudo_oper (nr_prescricao_p bigint ,cd_medico_p text ,ds_oper_regans_p text ,ds_oper_nmcarteira_p text ,ds_oper_numguia_p text ,nm_usuario_p text ,nr_seq_laudo_oper_p INOUT bigint) FROM PUBLIC;

