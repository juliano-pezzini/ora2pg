-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_modelo ( nr_seq_modelo_p bigint, nm_usuario_p text) AS $body$
DECLARE


nr_seq_modelo_w		bigint;


BEGIN

select	nextval('modelo_seq')
into STRICT	nr_seq_modelo_w
;

insert into modelo(nr_sequencia, dt_atualizacao, nm_usuario,
	dt_atualizacao_nrec, nm_usuario_nrec, qt_intervalo_campo,
	qt_pos_esquerda, qt_topo_campo, ds_modelo,
	ie_situacao, ie_grupos, ie_classificacao)
(SELECT	nr_seq_modelo_w, clock_timestamp(), nm_usuario_p,
	clock_timestamp(), nm_usuario_p, qt_intervalo_campo,
	qt_pos_esquerda, qt_topo_campo, substr(obter_desc_expressao(303214)||' ' || ds_modelo,1,60),
	ie_situacao, ie_grupos, ie_classificacao
from	modelo
where	nr_sequencia = nr_seq_modelo_p);

insert into modelo_conteudo(nr_sequencia, nr_seq_modelo, nr_seq_perg_visual,
	nr_seq_pergunta, dt_atualizacao, nm_usuario,
	dt_atualizacao_nrec, nm_usuario_nrec, nr_seq_apres,
	qt_tamanho, ds_label, qt_tam_grid,
	qt_altura, ds_label_grid, ds_mascara,
	ie_readonly, ie_obrigatorio, ie_tabstop,
	ds_sql, qt_desloc_dir, qt_pos_esquerda,
	ie_italico, ie_negrito,	ie_sublinhado,
	ds_cor,	qt_fonte, ds_formula,
	vl_padrao, ie_apres_cad_pre, qt_altura_perg_visual,
	qt_tam_label, ie_alterar_label)
(SELECT	nextval('modelo_conteudo_seq'), nr_seq_modelo_w, nr_seq_perg_visual,
	nr_seq_pergunta, clock_timestamp(), nm_usuario_p,
	clock_timestamp(), nm_usuario_p, nr_seq_apres,
	qt_tamanho, ds_label, qt_tam_grid,
	qt_altura, ds_label_grid, ds_mascara,
	ie_readonly, ie_obrigatorio, ie_tabstop,
	ds_sql, qt_desloc_dir, qt_pos_esquerda,
	ie_italico, ie_negrito, ie_sublinhado,
	ds_cor, qt_fonte, ds_formula,
	vl_padrao, ie_apres_cad_pre, qt_altura_perg_visual,
	qt_tam_label, ie_alterar_label
from	modelo_conteudo
where	nr_seq_modelo	= nr_seq_modelo_p);


insert into modelo_desenho(nr_sequencia, qt_topo, qt_esquerda,
	qt_altura, qt_tamanho, nr_seq_modelo,
	nm_usuario, dt_atualizacao, nr_seq_apres)
(SELECT	nextval('modelo_desenho_seq'), qt_topo, qt_esquerda,
	qt_altura, qt_tamanho, nr_seq_modelo_w,
	nm_usuario_p, clock_timestamp(), nr_seq_apres
from	modelo_desenho
where	nr_seq_modelo	= nr_seq_modelo_p);


commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_modelo ( nr_seq_modelo_p bigint, nm_usuario_p text) FROM PUBLIC;

