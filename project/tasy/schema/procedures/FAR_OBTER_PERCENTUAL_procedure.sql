-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE far_obter_percentual (Valor1_p bigint, Valor2_p bigint, Tipo_calculo_p text, total_p INOUT bigint) AS $body$
DECLARE


-- TIPO CALCULO
-- Retorno em valor = V
-- Retorno em percentual = P
--------------------------------
BEGIN
if (tipo_calculo_p = 'V') then
	total_p:= dividir((coalesce(valor1_p,0) * 100),coalesce(valor2_p,0));
elsif (tipo_calculo_p = 'P') then
	total_p:= dividir((coalesce(valor1_p,0) * coalesce(valor2_p,0)),100);
end if;

total_p:= round((total_p)::numeric,4);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE far_obter_percentual (Valor1_p bigint, Valor2_p bigint, Tipo_calculo_p text, total_p INOUT bigint) FROM PUBLIC;

