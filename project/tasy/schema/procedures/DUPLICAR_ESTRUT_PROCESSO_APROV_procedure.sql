-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_estrut_processo_aprov ( nr_sequencia_p bigint, cd_perfil_p bigint, cd_centro_custo_p bigint, nm_usuario_p text) AS $body$
BEGIN
insert into processo_aprov_estrut(
	nr_sequencia,
	cd_processo_aprov,
	dt_atualizacao,
	nm_usuario,
	cd_estabelecimento,
	cd_grupo_material,
	cd_subgrupo_material,
	cd_classe_material,
	cd_material,
	ie_consignado,
	cd_perfil,
	ie_padronizado,
	ie_material_estoque,
	dt_atualizacao_nrec,
	nm_usuario_nrec,
	cd_centro_custo,
	cd_local_estoque,
	ie_curva_abc,
	nr_seq_proj_rec,
	ie_urgente,
	vl_compra_mes,
	cd_local_estoque_destino,
	cd_operacao_estoque,
	cd_setor_atendimento,
	ie_material_ressup,
	ie_cobra_paciente,
	ie_receita,
	cd_familia_material,
	cd_mod_cotacao,
	cd_intervalo_vl)
SELECT	nextval('processo_aprov_estrut_seq'),
	cd_processo_aprov,
	clock_timestamp(),
	nm_usuario_p,
	cd_estabelecimento,
	cd_grupo_material,
	cd_subgrupo_material,
	cd_classe_material,
	cd_material,
	ie_consignado,
	CASE WHEN cd_perfil_p=0 THEN cd_perfil  ELSE cd_perfil_p END ,
	ie_padronizado,
	ie_material_estoque,
	clock_timestamp(),
	nm_usuario_p,
	CASE WHEN cd_centro_custo_p=0 THEN cd_centro_custo  ELSE cd_centro_custo_p END ,
	cd_local_estoque,
	ie_curva_abc,
	nr_seq_proj_rec,
	ie_urgente,
	vl_compra_mes,
	cd_local_estoque_destino,
	cd_operacao_estoque,
	cd_setor_atendimento,
	ie_material_ressup,
	ie_cobra_paciente,
	ie_receita,
	cd_familia_material,
	cd_mod_cotacao,
	cd_intervalo_vl
from	processo_aprov_estrut
where	nr_sequencia = nr_sequencia_p;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_estrut_processo_aprov ( nr_sequencia_p bigint, cd_perfil_p bigint, cd_centro_custo_p bigint, nm_usuario_p text) FROM PUBLIC;

