-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE cpoe_gerar_prot_anatomia ( cd_estabelecimento_p bigint, cd_perfil_p bigint, nm_usuario_p text, cd_convenio_p bigint, cd_categoria_convenio_p text, ie_tipo_atendimento_p bigint, ie_tipo_convenio_p bigint, cd_plano_convenio_p bigint, cd_protocolo_p bigint, nr_seq_protocolo_p bigint, nr_seq_item_p bigint, cd_setor_atendimento_p bigint, nr_atendimento_p bigint, dt_inicio_presc_p timestamp, dt_fim_presc_p timestamp, dt_inicio_p timestamp, nr_seq_item_gerado_p INOUT bigint, nr_seq_transcricao_p bigint default null, ie_retrogrado_p text default 'N', cd_medico_p bigint default null, nr_cirurgia_patologia_p bigint default null, nr_cirurgia_p bigint default null, nr_seq_pepo_p bigint default null, nr_seq_agenda_p bigint default null, nr_seq_conclusao_apae_p bigint default null, cd_paciente_p text DEFAULT NULL, ie_futuro_p text default 'N', nr_seq_cpoe_rp_p cpoe_rp.nr_sequencia%type default null, nr_seq_cpoe_order_unit_p cpoe_order_unit.nr_sequencia%type default null) AS $body$
DECLARE

					
					
ds_stack_w				log_cpoe.ds_stack%type;
ds_log_cpoe_w			log_cpoe.ds_log%type;
ie_origem_proced_w		protocolo_medic_proc.ie_origem_proced%type;			
qt_procedimento_w		protocolo_medic_proc.qt_procedimento%type;
dt_atualizacao_w		protocolo_medic_proc.dt_atualizacao%type;
nm_usuario_w			protocolo_medic_proc.nm_usuario%type;
ds_observacao_w			protocolo_medic_proc.ds_observacao%type;
ds_dado_clinico_w		protocolo_medic_proc.ds_dado_clinico%type;
cd_material_exame_w		protocolo_medic_proc.cd_material_exame%type;
nr_seq_exame_w			protocolo_medic_proc.nr_seq_exame%type;
cd_setor_atendimento_w		protocolo_medic_proc.cd_setor_atendimento%type;
hr_prim_horario_w		protocolo_medic_proc.hr_prim_horario%type;
ie_urgencia_w			protocolo_medic_proc.ie_urgencia%type;
nr_seq_proc_interno_w		protocolo_medic_proc.nr_seq_proc_interno%type;
dt_prev_execucao_w		protocolo_medic_proc.dt_prev_execucao%type;
ie_executar_leito_w		protocolo_medic_proc.ie_executar_leito%type;
cd_pessoa_coleta_w		protocolo_medic_proc.cd_pessoa_coleta%type;
nr_seq_proc_int_cirur_w		protocolo_medic_proc.nr_seq_proc_int_cirur%type;
qt_peca_ap_w			protocolo_medic_proc.qt_peca_ap%type;
nr_seq_amostra_princ_w		protocolo_medic_proc.nr_seq_amostra_princ%type;
ds_qualidade_peca_ap_w		protocolo_medic_proc.ds_qualidade_peca_ap%type;
ie_forma_exame_w		protocolo_medic_proc.ie_forma_exame%type;
ds_diag_provavel_ap_w		protocolo_medic_proc.ds_diag_provavel_ap%type;
ds_exame_anterior_ap_w		protocolo_medic_proc.ds_exame_anterior_ap%type;
ds_localizacao_lesao_w		protocolo_medic_proc.ds_localizacao_lesao%type;
ds_tempo_doenca_w		protocolo_medic_proc.ds_tempo_doenca%type;
cd_cgc_laboratorio_w		protocolo_medic_proc.cd_cgc_laboratorio%type;
qt_frasco_env_w			protocolo_medic_proc.qt_frasco_env%type;
ie_amostra_w			protocolo_medic_proc.ie_amostra%type;
ie_duracao_w			protocolo_medic_proc.ie_duracao%type;
dt_prim_horario_w		protocolo_medic_proc.dt_prim_horario%type;
cd_procedimento_w		protocolo_medic_proc.cd_procedimento%type;
ie_previsao_proced_w		protocolo_medic_proc.ie_horario%type;
dt_fim_w			cpoe_anatomia_patologica.dt_fim%type;
cd_proced_aux_w			procedimento.cd_procedimento%type;
ie_origem_aux_w			procedimento.ie_origem_proced%type;
cd_setor_atend_aux_w		setor_atendimento.cd_setor_atendimento%type;
cd_setor_exclusivo_w		setor_atendimento.cd_setor_atendimento%type;
nr_seq_proc_int_aux_w		proc_interno.nr_sequencia%type;
ie_copiar_rep_w			proc_interno.ie_copiar_rep%type;
nr_seq_exame_lab_w		proc_interno.nr_seq_exame_lab%type;
ie_situacao_w			char(1);
ds_erro_w			varchar(4000);
dt_prev_exec_base_w		timestamp;
dt_prescricao_w			timestamp;
dt_primeiro_horario_w		timestamp;



c01 CURSOR FOR
SELECT	 a.ie_origem_proced,
	 a.qt_procedimento,                        
	 a.dt_atualizacao,                         
	 a.nm_usuario,                             
	 a.ds_observacao,                          
	 a.ds_dado_clinico,                       
	 a.cd_material_exame,                      
	 a.nr_seq_exame,                           
	 a.cd_setor_atendimento,                                                   
	 a.hr_prim_horario,                  
	 coalesce(a.ie_urgencia,'N'),                            
	 a.nr_seq_proc_interno,                    
	 a.dt_prev_execucao,                  
	 a.ie_executar_leito,                     
	 a.cd_pessoa_coleta,                       
	 a.nr_seq_proc_int_cirur,                  
	 a.qt_peca_ap,                             
	 a.nr_seq_amostra_princ,                   
	 a.ds_qualidade_peca_ap,                   
	 a.ie_forma_exame,                         
	 a.ds_diag_provavel_ap,                    
	 a.ds_exame_anterior_ap,                   
	 a.ds_localizacao_lesao,                   
	 a.ds_tempo_doenca,                        
	 a.cd_cgc_laboratorio,                     
	 a.qt_frasco_env,                     
	 a.ie_amostra,                       
	 coalesce(a.ie_duracao,'P'),                             
	 a.dt_prim_horario,
	 a.cd_procedimento,
	 a.ie_horario
from	protocolo_medic_proc a
where	coalesce(a.nr_seq_solic_bs::text, '') = ''
and	(a.nr_seq_proc_interno IS NOT NULL AND a.nr_seq_proc_interno::text <> '')
and	a.cd_protocolo = cd_protocolo_p
and	a.nr_sequencia = nr_seq_protocolo_p
and	a.nr_seq_proc = coalesce(nr_seq_item_p,a.nr_seq_proc)
and 	coalesce(a.ie_anatomia,'N') = 'S'
order by a.nr_seq_apres;
		

BEGIN
dt_prev_exec_base_w		:= trunc(clock_timestamp(),'hh24') + 1/24;
dt_prescricao_w			:= clock_timestamp();

open c01;
loop
fetch c01 into	
	ie_origem_proced_w,
	qt_procedimento_w,                        
	dt_atualizacao_w,                         
	nm_usuario_w,                             
	ds_observacao_w,                          
	ds_dado_clinico_w,                      
	cd_material_exame_w,                      
	nr_seq_exame_w,                           
	cd_setor_atendimento_w,                                                   
	hr_prim_horario_w,                  
	ie_urgencia_w,                            
	nr_seq_proc_interno_w,                    
	dt_prev_execucao_w,                  
	ie_executar_leito_w,                     
	cd_pessoa_coleta_w,                       
	nr_seq_proc_int_cirur_w,                 
	qt_peca_ap_w,                             
	nr_seq_amostra_princ_w,                   
	ds_qualidade_peca_ap_w,                   
	ie_forma_exame_w,                         
	ds_diag_provavel_ap_w,                    
	ds_exame_anterior_ap_w,                    
	ds_localizacao_lesao_w,                   
	ds_tempo_doenca_w,                        
	cd_cgc_laboratorio_w,                     
	qt_frasco_env_w,                     
	ie_amostra_w,                       
	ie_duracao_w,                             
	dt_prim_horario_w,
	cd_procedimento_w,
	ie_previsao_proced_w;
EXIT WHEN NOT FOUND; /* apply on c01 */
	begin
		dt_fim_w := null;
		if (nr_seq_proc_interno_w IS NOT NULL AND nr_seq_proc_interno_w::text <> '') then
			SELECT * FROM Obter_Proc_Tab_Interno( nr_seq_proc_interno_w, 0, 0, 0, cd_procedimento_w, ie_origem_proced_w, null, null) INTO STRICT cd_procedimento_w, ie_origem_proced_w;
		end if;
		
		if (nr_seq_exame_w IS NOT NULL AND nr_seq_exame_w::text <> '') then
			begin
			select	DisTINCT
				cd_procedimento,
				ie_origem_proced
			into STRICT	cd_proced_aux_w,
				ie_origem_aux_w
			from	exame_lab_convenio
			where	nr_seq_exame	= nr_seq_exame_w
			and	cd_convenio	= cd_convenio_p;
			exception
				when others then
					cd_proced_aux_w	:= null;
					ie_origem_aux_w	:= null;
			end;

			cd_procedimento_w	:= coalesce(cd_proced_aux_w,cd_procedimento_w);
			ie_origem_proced_w	:= coalesce(ie_origem_aux_w,ie_origem_proced_w);
		end if;
		
		select	coalesce(max(ie_situacao),'A')
		into STRICT	ie_situacao_w
		from	procedimento
		where	cd_procedimento		= cd_procedimento_w
		and	ie_origem_proced	= ie_origem_proced_w;

		if (ie_situacao_w = 'I') then
			return;
		else
			select	coalesce(max(ie_situacao),'A'),
					coalesce(max(ie_copiar_rep),'S'),
					max(nr_seq_exame_lab)
			into STRICT	ie_situacao_w,
				ie_copiar_rep_w,
				nr_seq_exame_lab_w
			from	proc_interno
			where	nr_sequencia	= nr_seq_proc_interno_w;

			if (ie_situacao_w = 'I') then
				return;
			end if;
		end if;
		
		if (coalesce(cd_procedimento_w::text, '') = '') then
			SELECT * FROM obter_exame_lab_convenio(	nr_seq_exame_w, cd_convenio_p, cd_categoria_convenio_p, ie_tipo_atendimento_p, cd_estabelecimento_p, ie_tipo_convenio_p, nr_seq_proc_interno_w, cd_material_exame_w, cd_plano_convenio_p, cd_setor_atend_aux_w, cd_procedimento_w, ie_origem_proced_w, ds_erro_w, nr_seq_proc_int_aux_w) INTO STRICT cd_setor_atend_aux_w, cd_procedimento_w, ie_origem_proced_w, ds_erro_w, nr_seq_proc_int_aux_w;

		end if;
		
		dt_prev_execucao_w	:= null;
		dt_primeiro_horario_w	:= Obter_data_prev_exec( dt_prescricao_w, dt_prev_exec_base_w, obter_setor_atendimento(nr_atendimento_p), 0, 'A' );	
		
		if (dt_inicio_presc_p IS NOT NULL AND dt_inicio_presc_p::text <> '') then
		dt_prev_execucao_w := dt_inicio_presc_p;
		end if;
		
		
		if	((ie_urgencia_w = 'S') and (coalesce(dt_inicio_presc_p::text, '') = '')) then
			dt_prev_execucao_w	:= clock_timestamp();
			
		-- Verificar se procedimento cadastrado com especificacao para a data prevista
		elsif	((ie_previsao_proced_w IS NOT NULL AND ie_previsao_proced_w::text <> '') and (coalesce(dt_inicio_presc_p::text, '') = '')) then
			---- Data da prescricao (DP)
			if (ie_previsao_proced_w = 'DP') then
				dt_prev_execucao_w := dt_prescricao_w;

			---- 3 horas apos a prescricao (3h)
			elsif (ie_previsao_proced_w = '3h') then
				dt_prev_execucao_w := dt_prescricao_w + 3/24;

			---- 6 horas apos a prescricao (6h)
			elsif (ie_previsao_proced_w = '6h') then
				dt_prev_execucao_w := dt_prescricao_w + 6/24;
			
			---- 9 horas apos a prescricao (9h)
			elsif (ie_previsao_proced_w = '9h') then
				dt_prev_execucao_w := dt_prescricao_w + 9/24;
			end if;		
			else if (dt_primeiro_horario_w IS NOT NULL AND dt_primeiro_horario_w::text <> '') then
				dt_prev_execucao_w := dt_primeiro_horario_w;
			end if;
		end if;
		
		dt_prev_execucao_w	:= coalesce(dt_prev_execucao_w, dt_prev_exec_base_w);
		
		if (coalesce(ie_urgencia_w, 'N') = 'N') then
				
			if (hr_prim_horario_w IS NOT NULL AND hr_prim_horario_w::text <> '') then
				dt_prev_execucao_w	:= to_date(to_char(dt_prev_execucao_w,'dd/mm/yyyy ')  || hr_prim_horario_w, 'dd/mm/yyyy hh24:mi');				
			end if;
		
		
			if (dt_prev_execucao_w < clock_timestamp()) then
				dt_prev_execucao_w := dt_prev_execucao_w + 1;
			end if;
		end if;
		
		select	max(b.cd_material_exame)
		into STRICT	cd_material_exame_w
		from	material_exame_lab b,
				exame_lab_material a
		where	a.nr_seq_material 	= b.nr_sequencia
		and		a.nr_seq_exame 		= nr_seq_exame_lab_w
		and		a.ie_situacao 		= 'A'
		and		b.cd_material_exame	= coalesce(cd_material_exame_w, b.cd_material_exame);
		
		if (dt_fim_presc_p IS NOT NULL AND dt_fim_presc_p::text <> '') then
		dt_fim_w := dt_fim_presc_p;
		end if;
		
		select	nextval('cpoe_anatomia_patologica_seq')
		into STRICT	nr_seq_item_gerado_p
		;

		insert into cpoe_anatomia_patologica(
		 NR_SEQUENCIA,
		 DS_OBSERVACAO,                                  
		 DT_ATUALIZACAO,                           
		 NM_USUARIO,                               
		 DT_ATUALIZACAO_NREC,                            
		 IE_URGENCIA,                                    
		 NM_USUARIO_NREC,                                
		 DS_DADO_CLINICO,                                
		 DT_PREV_EXECUCAO,                               
		 IE_SUSPENSO,                                    
		 CD_MATERIAL_EXAME,                              
		 IE_AMOSTRA,                                     
		 IE_COLETA_EXTERNA,                              
		 NR_SEQ_AMOSTRA_PRINC,                           
		 IE_EXECUTAR_LEITO,                              
		 IE_AUTORIZACAO,                                 
		 DT_COLETA,                                      
		 NR_SEQ_PROC_INTERNO,                            
		 NR_SEQ_PROC_INT_CIRUR,                          
		 QT_PECA_AP,                                     
		 DS_QUALIDADE_PECA_AP,                           
		 DS_DIAG_PROVAVEL_AP,                            
		 DS_EXAME_ANTERIOR_AP,                           
		 CD_PESSOA_COLETA,                               
		 CD_CGC_LABORATORIO,                             
		 DS_LOCALIZACAO_LESAO,                           
		 DS_TEMPO_DOENCA,                                
		 IE_FORMA_EXAME,                                 
		 QT_FRASCO_ENV,                                  
		 CD_SETOR_EXEC,                                  
		 DT_PRIM_HORARIO,                                
		 NR_ATENDIMENTO,                                 
		 CD_PERFIL_ATIVO,                                
		 HR_PRIM_HORARIO,                                
		 DT_LIBERACAO,                                   
		 DT_SUSPENSAO,                                   
		 NM_USUARIO_SUSP,                                
		 IE_DURACAO,                                     
		 IE_PERIODO,                                     
		 DT_PROX_GERACAO,                                
		 DT_INICIO,                                      
		 DT_FIM,                                         
		 IE_ADMINISTRACAO,                               
		 IE_EVENTO_UNICO,                               
		 NR_SEQ_CPOE_ANTERIOR,                           
		 DT_LIB_SUSPENSAO,                               
		 NR_SEQ_TRANSCRICAO,                             
		 CD_PESSOA_FISICA,                               
		 IE_RETROGRADO,                                  
		 NM_USUARIO_LIB_ENF,                             
		 CD_FARMAC_LIB,                                  
		 CD_FUNCAO_ORIGEM,                               
		 IE_BAIXADO_POR_ALTA,                            
		 IE_CPOE_FARM,                                   
		 NR_CPOE_INTERF_FARM,                            
		 IE_MOTIVO_PRESCRICAO,                           
		 IE_ITEM_VALIDO,                                 
		 IE_INTERVENCAO_FARM,                            
		 IE_ITEM_ALTA,                                   
		 CD_SETOR_ATENDIMENTO,                           
		 QT_PROCEDIMENTO,                              
		 CD_MEDICO,                                      
		 IE_PRESCRITOR_AUX,                              
		 DT_LIBERACAO_AUX,                               
		 NR_CIRURGIA_PATOLOGIA,                          
		 NR_CIRURGIA,                                    
		 NR_SEQ_PEPO,                                    
		 IE_TIPO_PRESCR_CIRUR,                           
		 NR_SEQ_AGENDA,                                  
		 NR_SEQ_CONCLUSAO_APAE,                          
		 NR_SEQ_ASSINATURA,                              
		 NR_SEQ_ASSINATURA_SUSP,                         
		 IE_FORMA_SUSPENSAO,                             
		 NR_SEQ_MOTIVO_SUSP,                             
		 DS_MOTIVO_SUSP,                                 
		 IE_FUTURO,                                      
		 DT_LIBERACAO_FUT,                               
		 NM_USUARIO_LIB_FUT,                             
		 DT_CIENCIA_MEDICO,                              
		 DT_LIBERACAO_FARM,                              
		 DT_LIBERACAO_ENF,                              
		 CD_DEPARTAMENTO,
		nr_seq_cpoe_order_unit,
		CD_PROTOCOLO,
		NR_SEQ_PROTOCOLO)
		values (
		nr_seq_item_gerado_p,
		ds_observacao_w,
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		ie_urgencia_w,
		nm_usuario_p,
		null,
		dt_prev_execucao_w,
		'N',
		cd_material_exame_w,
		coalesce(ie_amostra_w,'N'),
		'N',
		nr_seq_amostra_princ_w,
		coalesce(ie_executar_leito_w,'N'),
		'L',
		null,
		nr_seq_proc_interno_w,
		nr_seq_proc_int_cirur_w,
		qt_peca_ap_w,
		ds_qualidade_peca_ap_w,
		ds_diag_provavel_ap_w,
		ds_exame_anterior_ap_w,
		cd_pessoa_coleta_w,
		cd_cgc_laboratorio_w,
		ds_localizacao_lesao_w,
		ds_tempo_doenca_w,
		ie_forma_exame_w,
		qt_frasco_env_w,
		null,
		dt_prim_horario_w,
		nr_atendimento_p,
		cd_perfil_p,
		hr_prim_horario_w,
		null,
		null,
		null,
		ie_duracao_w,
		null,
		null,
		coalesce(dt_inicio_p,clock_timestamp()),
		coalesce(dt_fim_w,clock_timestamp() + interval '1 days'),
		'P',
		null,
		null,
		null,
		nr_seq_transcricao_p,
		cd_paciente_p,
		ie_retrogrado_p,
		null,
		null,
		2314,
		null,
		null,
		null,
		null,
		'S',
		'N',
		'N',
		coalesce(cd_setor_atendimento_p,cd_setor_atendimento_w),
		qt_procedimento_w,
		cd_medico_p,
		null,
		null,
		nr_cirurgia_patologia_p,
		nr_cirurgia_p,
		nr_seq_pepo_p,
		null,
		nr_seq_agenda_p,
		nr_seq_conclusao_apae_p,
		null,
		null,
		null,
		null,
		null,
		ie_futuro_p,
		null,
		null,
		null,
		null,
		null,
		null,
		nr_seq_cpoe_order_unit_p,
		cd_protocolo_p,
		nr_seq_protocolo_p);
		
		CALL cpoe_gerar_plano_protocolo(nr_atendimento_p, dt_fim_presc_p, nr_seq_item_gerado_p, nm_usuario_p, 'AP');
	end;
end loop;
close c01;

commit;

exception
   when others then
	rollback;

	ds_stack_w	:= substr(dbms_utility.format_call_stack,1,2000);
	ds_log_cpoe_w := substr('CPOE_GERAR_PROT_ANATOMIA '
		|| chr(13) || ' - cd_estabelecimento_p: ' || cd_estabelecimento_p
		|| chr(13) || ' - cd_perfil_p: ' || cd_perfil_p
		|| chr(13) || ' - nm_usuario_p: ' || nm_usuario_p
		|| chr(13) || ' - cd_convenio_p: ' || cd_convenio_p
		|| chr(13) || ' - cd_categoria_convenio_p: ' || cd_categoria_convenio_p
		|| chr(13) || ' - ie_tipo_atendimento_p: ' || ie_tipo_atendimento_p
		|| chr(13) || ' - ie_tipo_convenio_p: ' || ie_tipo_convenio_p
		|| chr(13) || ' - cd_plano_convenio_p: ' || cd_plano_convenio_p
		|| chr(13) || ' - cd_protocolo_p: ' || cd_protocolo_p
		|| chr(13) || ' - nr_seq_protocolo_p: ' || nr_seq_protocolo_p
		|| chr(13) || ' - nr_seq_item_p: ' || nr_seq_item_p
		|| chr(13) || ' - cd_setor_atendimento_p: ' || cd_setor_atendimento_p
		|| chr(13) || ' - nr_atendimento_p: ' || nr_atendimento_p
		|| chr(13) || ' - dt_inicio_presc_p: ' || to_char(dt_inicio_presc_p, 'dd/mm/yyyy hh24:mi:ss')
		|| chr(13) || ' - dt_fim_presc_p: ' || to_char(dt_fim_presc_p, 'dd/mm/yyyy hh24:mi:ss')
		|| chr(13) || ' - dt_inicio_p: ' || to_char(dt_inicio_p, 'dd/mm/yyyy hh24:mi:ss')
		|| chr(13) || ' - nr_seq_item_gerado_p: ' || nr_seq_item_gerado_p
		|| chr(13) || ' - nr_seq_transcricao_p: ' || nr_seq_transcricao_p
		|| chr(13) || ' - ie_retrogrado_p: ' || ie_retrogrado_p
		|| chr(13) || ' - ie_futuro_p: ' || ie_futuro_p
		|| chr(13) || ' - cd_medico_p: ' || cd_medico_p
		|| chr(13) || ' - nr_cirurgia_patologia_p: ' || nr_cirurgia_patologia_p
		|| chr(13) || ' - nr_cirurgia_p: ' || nr_cirurgia_p
		|| chr(13) || ' - nr_seq_pepo_p: ' || nr_seq_pepo_p
		|| chr(13) || ' - nr_seq_agenda_p: ' || nr_seq_agenda_p
		|| chr(13) || ' - nr_seq_conclusao_apae_p: ' || nr_seq_conclusao_apae_p
		|| chr(13) || ' - cd_paciente_p: ' || cd_paciente_p
		|| chr(13) || ' - ERRO: ' || sqlerrm
		|| chr(13) || ' - FUNCAO('||to_char(obter_funcao_ativa)||'); PERFIL('||to_char(obter_perfil_ativo)||')',1,2000);   	

	insert into log_cpoe(
		nr_sequencia, 
		nr_atendimento, 
		dt_atualizacao, 
		nm_usuario, 
		ds_log, 
		ds_stack) 
	values (
		nextval('log_cpoe_seq'), 
		nr_atendimento_p, 
		clock_timestamp(), 
		nm_usuario_p, 
		ds_log_cpoe_w, 
		ds_stack_w);
		
	commit;

	CALL wheb_mensagem_pck.exibir_mensagem_abort(sqlerrm);

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cpoe_gerar_prot_anatomia ( cd_estabelecimento_p bigint, cd_perfil_p bigint, nm_usuario_p text, cd_convenio_p bigint, cd_categoria_convenio_p text, ie_tipo_atendimento_p bigint, ie_tipo_convenio_p bigint, cd_plano_convenio_p bigint, cd_protocolo_p bigint, nr_seq_protocolo_p bigint, nr_seq_item_p bigint, cd_setor_atendimento_p bigint, nr_atendimento_p bigint, dt_inicio_presc_p timestamp, dt_fim_presc_p timestamp, dt_inicio_p timestamp, nr_seq_item_gerado_p INOUT bigint, nr_seq_transcricao_p bigint default null, ie_retrogrado_p text default 'N', cd_medico_p bigint default null, nr_cirurgia_patologia_p bigint default null, nr_cirurgia_p bigint default null, nr_seq_pepo_p bigint default null, nr_seq_agenda_p bigint default null, nr_seq_conclusao_apae_p bigint default null, cd_paciente_p text DEFAULT NULL, ie_futuro_p text default 'N', nr_seq_cpoe_rp_p cpoe_rp.nr_sequencia%type default null, nr_seq_cpoe_order_unit_p cpoe_order_unit.nr_sequencia%type default null) FROM PUBLIC;

