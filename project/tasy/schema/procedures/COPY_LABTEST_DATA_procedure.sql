-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE copy_labtest_data ( DATA_P text , SESSION_ID_P text DEFAULT NULL, RECORD_TYPE_P text  DEFAULT NULL) AS $body$
BEGIN

 IF (RECORD_TYPE_P = 'LAB_TEST') THEN
 INSERT INTO clipboard_data(
            nr_sequencia,
            cd_estabelecimento,
            dt_atualizacao,
            nm_usuario,
            dt_atualizacao_nrec,
            nm_usuario_nrec,
            ie_record_type,
            ie_clip_data,
            ie_situacao,
            id_sessao
        ) VALUES (
            nextval('clipboard_data_seq'),
           wheb_usuario_pck.get_cd_estabelecimento,
            clock_timestamp(),
            wheb_usuario_pck.get_nm_usuario,
            clock_timestamp(),
          wheb_usuario_pck.get_nm_usuario,
            RECORD_TYPE_P,
            DATA_P,
            'A',
            SESSION_ID_P);

 END IF;
 commit;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE copy_labtest_data ( DATA_P text , SESSION_ID_P text DEFAULT NULL, RECORD_TYPE_P text  DEFAULT NULL) FROM PUBLIC;

