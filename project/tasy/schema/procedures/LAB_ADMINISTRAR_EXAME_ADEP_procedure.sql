-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE lab_administrar_exame_adep (nr_prescricao_p bigint, nr_seq_proced_p text, nm_usuario_p text) AS $body$
DECLARE


	
nr_seq_prescr_w		bigint;
nr_seq_proced_w		varchar(4000);				
				    
C01 CURSOR FOR
	SELECT	nr_sequencia
	from	prescr_procedimento
	where	obter_se_contido(nr_sequencia ,(nr_seq_proced_w)) = 'S'
	and	nr_prescricao = nr_prescricao_p;


BEGIN

select	substr(nr_seq_proced_p,1,length(nr_seq_proced_p))
into STRICT	nr_seq_proced_w
;

open C01;
loop
fetch C01 into	
	nr_seq_prescr_w;
EXIT WHEN NOT FOUND; /* apply on C01 */
	begin
	CALL ge_executar_adep(nr_prescricao_p,nr_seq_prescr_w,nm_usuario_p);
	end;
end loop;
close C01;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE lab_administrar_exame_adep (nr_prescricao_p bigint, nr_seq_proced_p text, nm_usuario_p text) FROM PUBLIC;

