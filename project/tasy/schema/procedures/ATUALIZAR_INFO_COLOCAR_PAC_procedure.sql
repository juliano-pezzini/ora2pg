-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE atualizar_info_colocar_pac ( qt_peso_pre_p bigint, qt_peso_ideal_p bigint, qt_soro_reposicao_p bigint, qt_soro_devolucao_p bigint, nr_seq_dialise_p bigint, cd_pessoa_fisica_p text, dif_peso_ideal_atual_p INOUT bigint, qt_perc_gpid_p INOUT bigint, qt_valor_gpid_p INOUT bigint, dif_peso_ideal_atual_soro_p INOUT bigint) AS $body$
DECLARE

					
qt_peso_pre_w			real;
qt_peso_ideal_w			real;
dif_peso_ideal_atual_w		real;
dif_peso_ideal_atual_soro_w	real;
qt_perc_gpid_w			double precision;
qt_valor_gpid_w			double precision;

BEGIN

qt_peso_pre_w	:= coalesce(qt_peso_pre_p,0);
qt_peso_ideal_w	:= coalesce(qt_peso_ideal_p,0);

dif_peso_ideal_atual_w := (qt_peso_pre_w - qt_peso_ideal_w);

qt_perc_gpid_w :=  hd_obter_gpid(nr_seq_dialise_p, cd_pessoa_fisica_p, qt_peso_pre_w);

qt_valor_gpid_w := hd_obter_valor_gpid(nr_seq_dialise_p, cd_pessoa_fisica_p, qt_peso_pre_w);

dif_peso_ideal_atual_soro_w := (dif_peso_ideal_atual_w +(coalesce(qt_soro_reposicao_p,0)/1000)-  (coalesce(qt_soro_devolucao_p,0)/1000));

dif_peso_ideal_atual_p 	:= dif_peso_ideal_atual_w;
qt_perc_gpid_p		:= qt_perc_gpid_w;
qt_valor_gpid_p		:= qt_valor_gpid_w;
dif_peso_ideal_atual_soro_p := dif_peso_ideal_atual_soro_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualizar_info_colocar_pac ( qt_peso_pre_p bigint, qt_peso_ideal_p bigint, qt_soro_reposicao_p bigint, qt_soro_devolucao_p bigint, nr_seq_dialise_p bigint, cd_pessoa_fisica_p text, dif_peso_ideal_atual_p INOUT bigint, qt_perc_gpid_p INOUT bigint, qt_valor_gpid_p INOUT bigint, dif_peso_ideal_atual_soro_p INOUT bigint) FROM PUBLIC;

