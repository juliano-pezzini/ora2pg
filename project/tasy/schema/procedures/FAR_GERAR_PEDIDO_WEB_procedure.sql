-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE far_gerar_pedido_web ( cd_pessoa_fisica_p text, nr_seq_pedido_p INOUT bigint) AS $body$
DECLARE


nr_seq_pedido_w		bigint;
cd_estabelecimento_w	integer;


BEGIN

select	min(cd_estabelecimento)
into STRICT	cd_estabelecimento_w
from	estabelecimento_v
where	ie_situacao = 'A';

select	nextval('far_pedido_seq')
into STRICT 	nr_seq_pedido_w
;

insert into far_pedido(
	nr_sequencia,
	cd_pessoa_fisica,
	dt_pedido,
	cd_estabelecimento,
	dt_atualizacao,
	nm_usuario,
	dt_atualizacao_nrec,
	nm_usuario_nrec,
	ie_entregar,
	ie_classificacao,
	vl_desconto,
	vl_entrega,
	vl_mercadoria,
	vl_total,
	vl_troco)
values (nr_seq_pedido_w,
	cd_pessoa_fisica_p,
	clock_timestamp(),
	cd_estabelecimento_w,
	clock_timestamp(),
	'INTERNET',
	clock_timestamp(),
	'INTERNET',
	'S',
	'I',
	0, 0, 0, 0, 0);

commit;

nr_seq_pedido_p	:= nr_seq_pedido_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE far_gerar_pedido_web ( cd_pessoa_fisica_p text, nr_seq_pedido_p INOUT bigint) FROM PUBLIC;

