-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_atualizar_macro_evento ( nr_seq_pessoa_evento_p bigint, nm_usuario_p text) AS $body$
DECLARE

				 
ds_cabecalho_w			varchar(4000);
nm_prestador_exec_w		varchar(80);


BEGIN 
 
select	pls_obter_dados_prestador(nr_seq_prestador_exec,'N') 
into STRICT	nm_prestador_exec_w 
from	pls_evento_pessoa_portal 
where	nr_sequencia	= nr_seq_pessoa_evento_p;
 
ds_cabecalho_w	:= ds_cabecalho_w || ' ' || pls_substituir_macro_evento(nr_seq_pessoa_evento_p,'@prestador_executor',nm_prestador_exec_w);
 
update	pls_evento_pessoa_portal 
set	ds_cabecalho	= ds_cabecalho_w 
where	nr_sequencia	= nr_seq_pessoa_evento_p;
 
commit;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_atualizar_macro_evento ( nr_seq_pessoa_evento_p bigint, nm_usuario_p text) FROM PUBLIC;

