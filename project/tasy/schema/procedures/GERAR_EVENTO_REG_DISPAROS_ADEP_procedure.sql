-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_evento_reg_disparos_adep ( ie_tipo_dosagem_p text, ie_forma_infusao_p text, nr_seq_solucao_p bigint, nr_prescricao_p bigint, nm_usuario_p text, dt_inicio_pca_p text, dt_fim_pca_p text, nr_disparo_pca_p bigint, nr_disparo_efetivo_p bigint, qt_vol_infundido_p bigint) AS $body$
DECLARE

 
nr_sequencia_w			bigint;


BEGIN 
 
/* obter sequencia */
 
select	nextval('prescr_solucao_evento_seq') 
into STRICT	nr_sequencia_w
;
 
/* gerar evento */
 
insert into prescr_solucao_evento( 
	nr_sequencia, 
	dt_atualizacao, 
	nm_usuario, 
	dt_atualizacao_nrec, 
	nm_usuario_nrec, 
	nr_prescricao, 
	nr_seq_solucao, 
	ie_forma_infusao, 
	ie_tipo_dosagem, 
	cd_pessoa_fisica, 
	ie_alteracao, 
	dt_alteracao, 
	ie_evento_valido, 
	nr_seq_motivo, 
	ds_observacao, 
	ie_tipo_solucao, 
	dt_inicio_pca, 
	dt_fim_pca, 
	nr_disparo_pca, 
	nr_disparo_efetivo, 
	qt_vol_infundido 
	) 
values ( 
	nr_sequencia_w, 
	clock_timestamp(), 
	nm_usuario_p, 
	clock_timestamp(), 
	nm_usuario_p, 
	nr_prescricao_p, 
	nr_seq_solucao_p, 
	ie_forma_infusao_p, 
	ie_tipo_dosagem_p,	 
	obter_dados_usuario_opcao(nm_usuario_p, 'C'), 
	22, 
	clock_timestamp(), 
	'S', 
	null, 
	null, 
	1, 
	to_date(dt_inicio_pca_p,'dd/mm/yyyy hh24:mi:ss'), 
	to_date(dt_fim_pca_p,'dd/mm/yyyy hh24:mi:ss'), 
	nr_disparo_pca_p, 
	nr_disparo_efetivo_p, 
	qt_vol_infundido_p);
	 
commit;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_evento_reg_disparos_adep ( ie_tipo_dosagem_p text, ie_forma_infusao_p text, nr_seq_solucao_p bigint, nr_prescricao_p bigint, nm_usuario_p text, dt_inicio_pca_p text, dt_fim_pca_p text, nr_disparo_pca_p bigint, nr_disparo_efetivo_p bigint, qt_vol_infundido_p bigint) FROM PUBLIC;

