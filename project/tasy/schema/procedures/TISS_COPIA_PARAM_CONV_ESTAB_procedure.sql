-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tiss_copia_param_conv_estab ( cd_convenio_orig_p bigint, cd_estab_orig_p bigint, cd_estab_dest_p bigint, nm_tabela_p text, nm_usuario_p text, ie_excluir_p text) AS $body$
DECLARE


nr_seq_w			bigint;
nr_sequencia_w			bigint;

c022 CURSOR FOR
SELECT	nr_sequencia
from	tiss_regra_guia
where	cd_convenio		= cd_convenio_orig_p
and 	cd_estabelecimento	= cd_estab_orig_p;


BEGIN

if (nm_tabela_p	= 'TISS_REGRA_TABELA_MAT') then

	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_tabela_mat
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;

	insert	into tiss_regra_tabela_mat(
		nr_sequencia,
		cd_estabelecimento,
		dt_atualizacao,
		nm_usuario,
		dt_atualizacao_nrec,
		nm_usuario_nrec,
		cd_convenio,
		cd_categoria,
		dt_inicio_vigencia,
		cd_grupo_material,
		cd_subgrupo_material,
		cd_classe_material,
		cd_material,
		nr_seq_tiss_tabela,
		ie_cod_material,
		ie_conversao_externa,
		ie_situacao,
		cd_material_tiss,
		ds_material_tiss,
		ie_tipo_atendimento,
		cd_setor_atendimento,
		ie_origem_preco,
		cd_adicional,
		ie_desc_material,
		ie_prioridade,
		cd_tab_preco_material,
		dt_final_vigencia,
		ie_pacote,
		vl_inicial,
		vl_final,
		ie_registro_anvisa,
		ie_material_tuss,
		nr_seq_familia,
		ie_tipo_material)
	SELECT	nextval('tiss_regra_tabela_mat_seq'),
		cd_estab_dest_p,
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		nm_usuario_p,
		cd_convenio,
		cd_categoria,
		dt_inicio_vigencia,
		cd_grupo_material,
		cd_subgrupo_material,
		cd_classe_material,
		cd_material,
		nr_seq_tiss_tabela,
		ie_cod_material,
		ie_conversao_externa,
		ie_situacao,
		cd_material_tiss,
		ds_material_tiss,
		ie_tipo_atendimento,
		cd_setor_atendimento,
		ie_origem_preco,
		cd_adicional,
		ie_desc_material,
		ie_prioridade,
		cd_tab_preco_material,
		dt_final_vigencia,
		ie_pacote,
		vl_inicial,
		vl_final,
		ie_registro_anvisa,
		ie_material_tuss,
		nr_seq_familia,
		ie_tipo_material
	from	tiss_regra_tabela_mat
	where	cd_estabelecimento	= cd_estab_orig_p
	and	cd_convenio		= cd_convenio_orig_p;



elsif (nm_tabela_p	=	'TISS_SENHA_CONEXAO') then

	if (ie_excluir_p = 'S') then
		delete	from tiss_Senha_conexao
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;



		insert into tiss_Senha_conexao(
			NR_SEQUENCIA   ,
 			CD_ESTABELECIMENTo,
 			NM_USUARIO_TISS,
 			DS_SENHA_TISS,
 			DT_ATUALIZACAO,
 			NM_USUARIO,
 			DT_ATUALIZACAO_NREC,
 			NM_USUARIO_NREC,
 			CD_CONVENIO,
 			NM_USUARIO_SENHA,
 			IE_COMUNICACAO,
 			DS_DIR_ENTRADA,
 			DS_DIR_SAIDA,
			DS_CAMINHO_CERTIFICADO,
			DS_SENHA_CERTIFICADO,
			DS_CAMINHO_KEYSTORE,
			DS_SENHA_KEYSTORE)
		SELECT	nextval('tiss_senha_conexao_seq'),
			cd_estab_dest_p,
			nm_usuario_tiss,
			ds_senha_tiss,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			cd_convenio,
			nm_usuario_senha,
			ie_comunicacao,
			DS_DIR_ENTRADA,
 			DS_DIR_SAIDA,
			DS_CAMINHO_CERTIFICADO,
			DS_SENHA_CERTIFICADO,
			DS_CAMINHO_KEYSTORE,
			DS_SENHA_KEYSTORE
		from	tiss_Senha_conexao
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;

elsif (nm_tabela_p		= 'TISS_REGRA_TABELA_PROC') then

	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_tabela_proc
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;

	insert into tiss_regra_tabela_proc(
			NR_SEQUENCIA,
 			CD_ESTABELECIMENTO	,
 			DT_ATUALIZACAO     	,
 			NM_USUARIO          	,
 			DT_ATUALIZACAO_NREC  	,
 			NM_USUARIO_NREC     	,
 			CD_CONVENIO          	,
 			CD_CATEGORIA          	,
 			DT_INICIO_VIGENCIA     	,
 			CD_AREA_PROCEDIMENTO	,
 			CD_ESPECIALIDADE       	,
 			CD_GRUPO_PROC          	,
 			NR_SEQ_TISS_TABELA     	,
 			CD_PROCEDIMENTO        	,
 			IE_ORIGEM_PROCED,
			ie_pacote,
			cd_procedimento_convenio,
			ds_procedimento_convenio,
			ie_tipo_atendimento,
			nr_seq_proc_interno,
			cd_plano)
		SELECT	nextval('tiss_regra_tabela_proc_seq'),
			cd_estab_dest_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			cd_convenio,
			cd_categoria,
			DT_INICIO_VIGENCIA     	,
 			CD_AREA_PROCEDIMENTO	,
 			CD_ESPECIALIDADE       	,
 			CD_GRUPO_PROC          	,
 			NR_SEQ_TISS_TABELA     	,
 			CD_PROCEDIMENTO        	,
 			IE_ORIGEM_PROCED ,
			ie_pacote,
			cd_procedimento_convenio,
			ds_procedimento_convenio,
			ie_tipo_atendimento,
			nr_seq_proc_interno,
			cd_plano
		from	tiss_regra_tabela_proc
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;


elsif (nm_tabela_p		= 'TISS_REGRA_CAMPO_CONV') then

	if (ie_excluir_p = 'S') then
		delete	from TISS_REGRA_CAMPO_CONV
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;

	insert into TISS_REGRA_CAMPO_CONV(
			NR_SEQUENCIA           ,
 			CD_ESTABELECIMENTO     ,
 			DT_ATUALIZACAO         ,
 			NM_USUARIO             ,
 			DT_ATUALIZACAO_NREC    ,
 			NM_USUARIO_NREC        ,
 			CD_CONVENIO            ,
 			NR_SEQ_CAMPO           ,
 			IE_ENVIO               ,
 			DS_PADRAO      	       ,
 			IE_TIPO_ATENDIMENTO    ,
 			CD_CATEGORIA           ,
 			IE_TAXAS               ,
 			VL_MAX_CAMPO,
			DS_VALOR_GERADO        ,
			IE_GASES               ,
			IE_MEDICAMENTO         ,
			IE_MATERIAL            ,
			IE_TAXAS_DIVERSAS      ,
			IE_DIARIAS             ,
			IE_ALUGUEIS            ,
			IE_CLINICA             ,
			NR_SEQ_CLASSIFICACAO   ,
			CD_SETOR_ENTRADA       ,
			IE_TIPO_ATEND_TISS     ,
			IE_TIPO_ATEND_PROC_TISS	)
		SELECT	nextval('tiss_regra_campo_conv_seq'),
			cd_estab_dest_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			CD_CONVENIO            ,
 			NR_SEQ_CAMPO           ,
 			IE_ENVIO               ,
 			DS_PADRAO      	       ,
 			IE_TIPO_ATENDIMENTO    ,
 			CD_CATEGORIA           ,
 			IE_TAXAS               ,
 			VL_MAX_CAMPO           ,
			DS_VALOR_GERADO        ,
			IE_GASES               ,
			IE_MEDICAMENTO         ,
			IE_MATERIAL            ,
			IE_TAXAS_DIVERSAS      ,
			IE_DIARIAS             ,
			IE_ALUGUEIS            ,
			IE_CLINICA             ,
			NR_SEQ_CLASSIFICACAO   ,
			CD_SETOR_ENTRADA       ,
			IE_TIPO_ATEND_TISS     ,
			IE_TIPO_ATEND_PROC_TISS
		from	TISS_REGRA_CAMPO_CONV
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;


elsif (nm_tabela_p		= 'TISS_PARAMETROS_CONVENIO') then
	if (ie_excluir_p = 'S') then
		delete	from TISS_PARAMETROS_CONVENIO
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;


		insert into TISS_PARAMETROS_CONVENIO(
 			NR_SEQUENCIA         		,
 			CD_ESTABELECIMENTO             	,
 			DT_ATUALIZACAO                 	,
 			NM_USUARIO                     	,
 			DT_ATUALIZACAO_NREC            	,
 			NM_USUARIO_NREC                	,
 			CD_CONVENIO                    	,
 			IE_DATA_DESPESA               	,
 			IE_MEDICO_SOLIC_ATEND         	,
 			IE_AGRUPAR_PROC                	,
 			IE_FECHAR_CONTA_INCONS         	,
 			IE_CID_SPSADT                  	,
 			IE_PARTIC_CONVENIADO           	,
 			DS_OBSERVACAO                  	,
 			IE_CONSISTE_CODIGO    	        ,
 			IE_ATUALIZAR_ALTA              	,
 			IE_EXEC_SPSADT                 	,
 			IE_TOTALIZAR_OPM               	,
 			IE_CONSISTE_TISS               	,
 			IE_SPSADT_ZERADO               	,
 			IE_RI_ZERADO                   	,
 			IE_GUIA_PROTOCOLO              	,
 			IE_DESPESA_ZERADA              	,
 			DS_MASCARA_USUARIO             	,
 			IE_ARREDONDAMENTO_DESP         	,
 			IE_PROC_PARTIC                 	,
 			IE_PROC_SOLIC_SPSADT           	,
 			IE_CONSISTE_AUTOR_SPSADT       	,
 			IE_SOLICITANTE                 	,
 			IE_NUMERO_LOTE                 	,
 			IE_CRM                         	,
 			IE_GUIA_PRESTADOR              	,
 			IE_DESP_TISS_INTERNADO         	,
 			IE_CONSISTE_DESP_NEG           	,
 			IE_CONSISTE_VIA_ACESSO         	,
 			IE_COD_TISS_BRASINDICE         	,
 			IE_SAIDA_INTERNACAO            	,
 			IE_TOTAL_GUIA_DESP             	,
 			IE_DATA_PROC                   	,
 			IE_GERAR_CTA_DIF_TISS          	,
 			IE_SENHA_GUIA                  	,
 			IE_GUIA_HONORARIO              	,
 			IE_FECHAR_PROT_INCONS          	,
 			IE_CAMPO_BOOLEAN               	,
 			IE_GUIA_PRINC_HONOR            	,
 			IE_MASCARA_CID                 	,
 			DS_FORMATO_CARTEIRA            	,
 			IE_ENVIO_CARTEIRA              	,
 			DS_MASCARA_LOTE                	,
 			IE_DESC_PROC_INTERNO           	,
 			IE_ORDENACAO_OD                	,
 			IE_HONOR_PARTIC                	,
 			IE_CONSISTIR_OBS               	,
 			QT_DIAS_VALIDADE_GUIA          	,
 			DS_EMAIL_AUTOR                 	,
 			NR_SEQ_SAIDA_SPSADT            	,
 			IE_PARTIC_SPSADT               	,
 			IE_ASSINATURA_SOLIC            	,
 			IE_EMITE_OPM_ZERADO            	,
			IE_DIGITOS_DESP			,
			IE_ABORTO_NASC         		,
			IE_CONSISTE_INDICACAO  		,
			IE_REDUCAO_ACRESC		,
			IE_TOTAL_OPM           		,
			IE_CONTRATADO_CONSULTA 		,
			QT_GUIAS_PROTOCOLO     		,
			IE_DATA_ENTRADA_RI     		,
			QT_MAX_DESPESA         		,
			IE_CONSISTIR_PROC      		,
			IE_CONTRAT_EXEC_HI     		,
			IE_CONSISTIR_DECL_OBITO		,
			IE_DT_CONTRAT_RI       		,
			IE_PERIODO_DESP        		,
			IE_CONSISTE_TEC_UTIL   		,
			IE_PARTICIPANTE_RI     		,
			IE_CONSISTIR_GUIA_SENHA		,
			IE_RELAT_AUTOR         		,
			IE_REGRA_MASCARA       		,
			IE_SEPARAR_SPSADT_HONOR		,
			IE_VALOR_DESCONTO      		,
			IE_TIPO_ACOMOD         		,
			IE_EXEC_RI             		,
			IE_FORMATO_RED_ACRES   		,
			IE_EMITE_HONOR_SADT_PEP		,
			IE_ORDENACAO_XML       		,
			IE_DATA_TRANS_XML      		,
			IE_AGRUPAR_DESP_PAC    		,
			IE_MEDICO_REP          		,
			IE_HONOR_ZERADO        		,
			IE_NOME_ARQUIVO        		,
			IE_CONSISTE_TIPO_SAIDA 		,
			IE_CONSISTE_CID_AUTOR  		,
			IE_CID_SOLIC_EXTERNO   		,
			IE_ESPECIALIDADE_EXEC  		,
			IE_OBSERVACAO          		,
			IE_VALOR_UNITARIO		,
			IE_PROTOCOLO_RET 		,
			IE_ORDENACAO_SPSADT            	,
			IE_CARTEIRA_MED                	,
			IE_GUIA_DESP_MED               	,
			IE_DT_EMISSAO_GUIA             	,
			IE_TOTAL_GERAL_OPM             	,
			IE_VALOR_UNITARIO_OPM          	,
			IE_OBS_URGENTE                 	,
			IE_LADO_REP                    	,
			IE_QUEBRA_PROC_PEP             	,
			IE_CONVERSAO_QTDE_MAT          	,
			DS_DIR_PADRAO                  	,
			DS_DIR_PADRAO_RET              	,
			IE_AGRUP_RESP_CRED             	,
			IE_DATA_ENTRADA_ALTA           	,
			NR_SEQ_SAIDA_INT               	,
			IE_PACOTE                      	,
			IE_PROC_TUSS                   	,
			IE_PRESCR_UNICA                	,
			IE_DATA_ASS_PREST              	,
			IE_NOME_ABREV                  	,
			IE_SENHA_GUIA_PRINC            	,
			IE_DESC_PLANO                  	,
			IE_DESC_CONVENIO               	,
			IE_PROT_SOLIC_STATUS           	,
			IE_DATA_REF_TAB_MAT            	,
			IE_CONSISTIR_CPF               	,
			IE_CONSISTIR_UF_CRM_SOLIC	,
			DS_ARQUIVO_LOGO_COMP           	,
			IE_CONSISTIR_GUIA_DUP          	,
			IE_DT_PROC_TASYMED             	,
			IE_CONSISTIR_PROC_ZERADO	,
			IE_ATUAL_CONTA           	,
			IE_CONS_TEMPO_DOENCA      	,
			IE_AGRUP_EXAME             	,
			IE_DT_AUTOR_SADT            	,
			IE_FORCAR_AGRUP              	,
			IE_TIPO_FATUR_TISS            	,
			NR_SEQ_SAIDA_CONSULTA          	,
			IE_GERAR_TISS                  	,
			DS_FUNCTION_OBS_SPSADT         	,
			IE_CONSISTE_CBO                	,
			IE_SENHA_AUTOR                 	,
			DS_ADICIONAL_GUIA_PREST        	,
			CD_ADIC_CRM                    	,
			IE_CONSISTE_SENHA_AUTOR        	,
			IE_DT_AUTOR_RI                 	,
			IE_DT_VALIDADE_SENHA_RI        	,
			IE_MEMBRO_EXEC                 	,
			IE_DT_ASSIN_SOLIC              	,
			IE_ALT_TIPO_ATEND_CONTA        	,
			DS_FUNCTION_OBS_CONSULTA	,
			IE_GRAVAR_LOG_CONTA      	,
			IE_GESTACAO_NASC_VIVOS    	,
			IE_GESTACAO_DIF_ABORTO         	,
			IE_CONSISTE_QT_PROC     	,
			IE_ATUALIZA_SENHA_CONTA        	,
			IE_TRANSTORNO_ABORTO           	,
			NR_SEQ_TRANS_TISS              	,
			DS_MASCARA_CRM                 	,
			IE_CID_RI                      	,
			DS_NAMESPACE                   	,
			IE_CODIGO_INTERNO_DESP         	,
			IE_CD_AUTORIZACAO_RELAT        	,
			IE_DESC_EXAME_EXT              	,
			IE_PREST_SPSADT_TASYMED        	,
			IE_FONTE_PAGADORA              	,
			NR_LOTE_ATUAL                  	,
			IE_TOPO_REP                    	,
			IE_MASCARA_DNV                 	,
			IE_DATA_ATECACO                	,
			IE_GUIA_NUMERICA               	,
			IE_FORCAR_AGRUP_PARTIC         	,
			IE_MEDICO_CONVENIO             	,
			IE_TIPO_FATUR_PERIODO          	,
			IE_SPSADT_ATEND_RETORNO        	,
			IE_CONS_ATEND_RETORNO          	,
			IE_ORDENACAO_RI                	,
			IE_ATUALIZA_NR_GUIA            	,
			IE_COD_TISS_SIMPRO             	,
			IE_CRM_CONTRAT_SOLIC           	,
			IE_LADO_CONTA                  	,
			IE_CONSISTE_GRAU_PARTIC        	,
			IE_SOLIC_DEM_PAGTO             	,
			IE_NAO_HONORARIO_SADT          	,
			IE_GUIA_DESP_PROC_PRINC        	,
			IE_SADT_AUTOR_SEM_PROC 		,
			IE_MEDICO_SOLIC_EXAME          	,
			IE_DIAG_TIPO_ATEND             	,
			IE_EMITIR_HEMOCOMPONENTE	,
			IE_ASSINATURA_EXEC             	,
			IE_QUEBRA_GRUPO_EXAME		,
			IE_AGRUPAR_HONOR		,
			IE_GUIA_PRINC_AUTOR		,
			IE_ULTIMA_PRESCRICAO		,
			IE_GUIA_OPERADORA_AUTOR		,
			IE_CONVERSAO_SADT_SOLIC		,
			IE_ARQUIVOS_ZIP			,
			IE_CONSISTE_CNS			,
			IE_MATERIAL_EXEC		,
			IE_QTD_MATERIAL			,
			IE_SENHA_PROC_PRESCR		,
			IE_GUIA_SOLIC_INTE_PROC		,
			IE_CONSISTE_CODIGO_ANS		,
			IE_TIPO_SAIDA_PARCIAL		,
			IE_OBITO_PARCIAL		,
			DS_CARACTERES_XML		,
			IE_AGRUPAR_OPME			,
			IE_QUEBRA_HORARIOS_PRESCR	,
			IE_LOTE_XML_DESPESA		,
			IE_DESC_LAUDO_FATUR_MED		,
			IE_CONSISTE_VALOR_GUIA		,
			IE_DATA_ASSIN_AUTOR		,
			IE_QUEBRA_GUIA_PRESCR_ASSOC	,
			IE_GUIA_PEDIDO_EXAME		,
			IE_OBS_PRESCR_AUTOR		,
			IE_GUIA_REF_PRORROG		,
			IE_SENHA_MAT_GUIA_PROC		,
			IE_PREST_EXEC_PEDIDO_EXAME	,
			IE_DATA_LOTE_ANEXO		,
			IE_QT_DOSE_SOLIC_QUIMIO		,
			IE_REF_SOLIC_DEM_PAGTO		,
			IE_CBO_AUTOR_ESPEC		,
			IE_SETOR_EXEC_PROC		,
			IE_CONSISTE_TUSS_AUTOR		,
			IE_DOSE_QUIMIO			,
			IE_SENHA_TAXA_GUIA_PROC		,
			IE_CONSISTE_JUST_ESPEC_OPM	,
			IE_GUIA_REF_ANEXO		,
			IE_INDICACAO_PROC_PRESCR	,
			IE_PREST_SOLIC_ODONTO		,
			IE_CONTRAT_EXEC_ODONTO		,
			IE_PROF_EXEC_ODONTO		,
			NM_USUARIO_ASSINATURA_CONTRAT	,
			QT_DIAS_INT_TITULAR_CONV	,
			IE_QT_PROC_PRESCR_INTERV	,
			NR_GUIA_OPER_REC_GLOSA		,
			IE_ATUALIZA_VINCULO_TUSS	,
			IE_DESP_AGRUP_VALOR		,
			IE_IMPORT_ITENS_DEM_GRG		,
			IE_DATA_REC_GLOSA_TISS		,
			IE_IMP_VALIDADE_GUIA_SENHA
			)
		SELECT	nextval('tiss_parametros_convenio_seq'),
			cd_estab_dest_p			,
			clock_timestamp()				,
			nm_usuario_p			,
			clock_timestamp()				,
			nm_usuario_p			,
			CD_CONVENIO                    	,
 			IE_DATA_DESPESA               	,
 			IE_MEDICO_SOLIC_ATEND         	,
 			IE_AGRUPAR_PROC                	,
 			IE_FECHAR_CONTA_INCONS         	,
 			IE_CID_SPSADT                  	,
 			IE_PARTIC_CONVENIADO           	,
 			DS_OBSERVACAO                  	,
 			IE_CONSISTE_CODIGO    	        ,
 			IE_ATUALIZAR_ALTA              	,
 			IE_EXEC_SPSADT                 	,
 			IE_TOTALIZAR_OPM               	,
 			IE_CONSISTE_TISS               	,
 			IE_SPSADT_ZERADO               	,
 			IE_RI_ZERADO                   	,
 			IE_GUIA_PROTOCOLO              	,
 			IE_DESPESA_ZERADA              	,
 			DS_MASCARA_USUARIO             	,
 			IE_ARREDONDAMENTO_DESP         	,
 			IE_PROC_PARTIC                 	,
 			IE_PROC_SOLIC_SPSADT           	,
 			IE_CONSISTE_AUTOR_SPSADT       	,
 			IE_SOLICITANTE                 	,
 			IE_NUMERO_LOTE                 	,
 			IE_CRM                         	,
 			IE_GUIA_PRESTADOR              	,
 			IE_DESP_TISS_INTERNADO         	,
 			IE_CONSISTE_DESP_NEG           	,
 			IE_CONSISTE_VIA_ACESSO         	,
 			IE_COD_TISS_BRASINDICE         	,
 			IE_SAIDA_INTERNACAO            	,
 			IE_TOTAL_GUIA_DESP             	,
 			IE_DATA_PROC                   	,
 			IE_GERAR_CTA_DIF_TISS          	,
 			IE_SENHA_GUIA                  	,
 			IE_GUIA_HONORARIO              	,
 			IE_FECHAR_PROT_INCONS          	,
 			IE_CAMPO_BOOLEAN               	,
 			IE_GUIA_PRINC_HONOR            	,
 			IE_MASCARA_CID                 	,
 			DS_FORMATO_CARTEIRA            	,
 			IE_ENVIO_CARTEIRA              	,
 			DS_MASCARA_LOTE                	,
 			IE_DESC_PROC_INTERNO           	,
 			IE_ORDENACAO_OD                	,
 			IE_HONOR_PARTIC                	,
 			IE_CONSISTIR_OBS               	,
 			QT_DIAS_VALIDADE_GUIA          	,
 			DS_EMAIL_AUTOR                 	,
 			NR_SEQ_SAIDA_SPSADT            	,
 			IE_PARTIC_SPSADT               	,
 			IE_ASSINATURA_SOLIC            	,
 			IE_EMITE_OPM_ZERADO            	,
			IE_DIGITOS_DESP			,
			IE_ABORTO_NASC         		,
			IE_CONSISTE_INDICACAO  		,
			IE_REDUCAO_ACRESC		,
			IE_TOTAL_OPM           		,
			IE_CONTRATADO_CONSULTA 		,
			QT_GUIAS_PROTOCOLO     		,
			IE_DATA_ENTRADA_RI     		,
			QT_MAX_DESPESA         		,
			IE_CONSISTIR_PROC      		,
			IE_CONTRAT_EXEC_HI     		,
			IE_CONSISTIR_DECL_OBITO		,
			IE_DT_CONTRAT_RI       		,
			IE_PERIODO_DESP        		,
			IE_CONSISTE_TEC_UTIL   		,
			IE_PARTICIPANTE_RI     		,
			IE_CONSISTIR_GUIA_SENHA		,
			IE_RELAT_AUTOR         		,
			IE_REGRA_MASCARA       		,
			IE_SEPARAR_SPSADT_HONOR		,
			IE_VALOR_DESCONTO      		,
			IE_TIPO_ACOMOD         		,
			IE_EXEC_RI             		,
			IE_FORMATO_RED_ACRES   		,
			IE_EMITE_HONOR_SADT_PEP		,
			IE_ORDENACAO_XML       		,
			IE_DATA_TRANS_XML      		,
			IE_AGRUPAR_DESP_PAC    		,
			IE_MEDICO_REP          		,
			IE_HONOR_ZERADO        		,
			IE_NOME_ARQUIVO        		,
			IE_CONSISTE_TIPO_SAIDA 		,
			IE_CONSISTE_CID_AUTOR  		,
			IE_CID_SOLIC_EXTERNO   		,
			IE_ESPECIALIDADE_EXEC  		,
			IE_OBSERVACAO          		,
			IE_VALOR_UNITARIO		,
			IE_PROTOCOLO_RET 		,
			IE_ORDENACAO_SPSADT            	,
			IE_CARTEIRA_MED                	,
			IE_GUIA_DESP_MED               	,
			IE_DT_EMISSAO_GUIA             	,
			IE_TOTAL_GERAL_OPM             	,
			IE_VALOR_UNITARIO_OPM          	,
			IE_OBS_URGENTE                 	,
			IE_LADO_REP                    	,
			IE_QUEBRA_PROC_PEP             	,
			IE_CONVERSAO_QTDE_MAT          	,
			DS_DIR_PADRAO                  	,
			DS_DIR_PADRAO_RET              	,
			IE_AGRUP_RESP_CRED             	,
			IE_DATA_ENTRADA_ALTA           	,
			NR_SEQ_SAIDA_INT               	,
			IE_PACOTE                      	,
			IE_PROC_TUSS                   	,
			IE_PRESCR_UNICA                	,
			IE_DATA_ASS_PREST              	,
			IE_NOME_ABREV                  	,
			IE_SENHA_GUIA_PRINC            	,
			IE_DESC_PLANO                  	,
			IE_DESC_CONVENIO               	,
			IE_PROT_SOLIC_STATUS           	,
			IE_DATA_REF_TAB_MAT            	,
			IE_CONSISTIR_CPF               	,
			coalesce(IE_CONSISTIR_UF_CRM_SOLIC,'S'),
			DS_ARQUIVO_LOGO_COMP           	,
			IE_CONSISTIR_GUIA_DUP          	,
			IE_DT_PROC_TASYMED             	,
			IE_CONSISTIR_PROC_ZERADO	,
			IE_ATUAL_CONTA           	,
			IE_CONS_TEMPO_DOENCA      	,
			IE_AGRUP_EXAME             	,
			IE_DT_AUTOR_SADT            	,
			IE_FORCAR_AGRUP              	,
			IE_TIPO_FATUR_TISS            	,
			NR_SEQ_SAIDA_CONSULTA          	,
			IE_GERAR_TISS                  	,
			DS_FUNCTION_OBS_SPSADT         	,
			IE_CONSISTE_CBO                	,
			IE_SENHA_AUTOR                 	,
			DS_ADICIONAL_GUIA_PREST        	,
			CD_ADIC_CRM                    	,
			IE_CONSISTE_SENHA_AUTOR        	,
			IE_DT_AUTOR_RI                 	,
			IE_DT_VALIDADE_SENHA_RI        	,
			IE_MEMBRO_EXEC                 	,
			IE_DT_ASSIN_SOLIC              	,
			IE_ALT_TIPO_ATEND_CONTA        	,
			DS_FUNCTION_OBS_CONSULTA	,
			IE_GRAVAR_LOG_CONTA      	,
			IE_GESTACAO_NASC_VIVOS    	,
			IE_GESTACAO_DIF_ABORTO         	,
			IE_CONSISTE_QT_PROC     	,
			IE_ATUALIZA_SENHA_CONTA        	,
			IE_TRANSTORNO_ABORTO           	,
			NR_SEQ_TRANS_TISS              	,
			DS_MASCARA_CRM                 	,
			IE_CID_RI                      	,
			DS_NAMESPACE                   	,
			IE_CODIGO_INTERNO_DESP         	,
			IE_CD_AUTORIZACAO_RELAT        	,
			IE_DESC_EXAME_EXT              	,
			IE_PREST_SPSADT_TASYMED        	,
			IE_FONTE_PAGADORA              	,
			NR_LOTE_ATUAL                  	,
			IE_TOPO_REP                    	,
			IE_MASCARA_DNV                 	,
			IE_DATA_ATECACO                	,
			IE_GUIA_NUMERICA               	,
			IE_FORCAR_AGRUP_PARTIC         	,
			IE_MEDICO_CONVENIO             	,
			IE_TIPO_FATUR_PERIODO          	,
			IE_SPSADT_ATEND_RETORNO        	,
			IE_CONS_ATEND_RETORNO          	,
			IE_ORDENACAO_RI                	,
			IE_ATUALIZA_NR_GUIA            	,
			IE_COD_TISS_SIMPRO             	,
			IE_CRM_CONTRAT_SOLIC           	,
			IE_LADO_CONTA                  	,
			IE_CONSISTE_GRAU_PARTIC        	,
			IE_SOLIC_DEM_PAGTO             	,
			IE_NAO_HONORARIO_SADT          	,
			IE_GUIA_DESP_PROC_PRINC        	,
			IE_SADT_AUTOR_SEM_PROC 		,
			IE_MEDICO_SOLIC_EXAME          	,
			IE_DIAG_TIPO_ATEND             	,
			IE_EMITIR_HEMOCOMPONENTE	,
			IE_ASSINATURA_EXEC             	,
			IE_QUEBRA_GRUPO_EXAME		,
			IE_AGRUPAR_HONOR		,
			IE_GUIA_PRINC_AUTOR		,
			IE_ULTIMA_PRESCRICAO		,
			IE_GUIA_OPERADORA_AUTOR		,
			IE_CONVERSAO_SADT_SOLIC		,
			IE_ARQUIVOS_ZIP			,
			IE_CONSISTE_CNS			,
			IE_MATERIAL_EXEC		,
			IE_QTD_MATERIAL			,
			IE_SENHA_PROC_PRESCR		,
			IE_GUIA_SOLIC_INTE_PROC		,
			IE_CONSISTE_CODIGO_ANS		,
			IE_TIPO_SAIDA_PARCIAL		,
			IE_OBITO_PARCIAL		,
			DS_CARACTERES_XML		,
			IE_AGRUPAR_OPME			,
			IE_QUEBRA_HORARIOS_PRESCR	,
			IE_LOTE_XML_DESPESA		,
			IE_DESC_LAUDO_FATUR_MED		,
			IE_CONSISTE_VALOR_GUIA		,
			IE_DATA_ASSIN_AUTOR		,
			IE_QUEBRA_GUIA_PRESCR_ASSOC	,
			IE_GUIA_PEDIDO_EXAME		,
			IE_OBS_PRESCR_AUTOR		,
			IE_GUIA_REF_PRORROG		,
			IE_SENHA_MAT_GUIA_PROC		,
			IE_PREST_EXEC_PEDIDO_EXAME	,
			IE_DATA_LOTE_ANEXO		,
			IE_QT_DOSE_SOLIC_QUIMIO		,
			IE_REF_SOLIC_DEM_PAGTO		,
			IE_CBO_AUTOR_ESPEC		,
			IE_SETOR_EXEC_PROC		,
			IE_CONSISTE_TUSS_AUTOR		,
			IE_DOSE_QUIMIO			,
			IE_SENHA_TAXA_GUIA_PROC		,
			IE_CONSISTE_JUST_ESPEC_OPM	,
			IE_GUIA_REF_ANEXO		,
			IE_INDICACAO_PROC_PRESCR	,
			IE_PREST_SOLIC_ODONTO		,
			IE_CONTRAT_EXEC_ODONTO		,
			IE_PROF_EXEC_ODONTO		,
			NM_USUARIO_ASSINATURA_CONTRAT	,
			QT_DIAS_INT_TITULAR_CONV	,
			IE_QT_PROC_PRESCR_INTERV	,
			NR_GUIA_OPER_REC_GLOSA		,
			IE_ATUALIZA_VINCULO_TUSS	,
			IE_DESP_AGRUP_VALOR		,
			IE_IMPORT_ITENS_DEM_GRG		,
			IE_DATA_REC_GLOSA_TISS		,
			IE_IMP_VALIDADE_GUIA_SENHA
		from	TISS_PARAMETROS_CONVENIO
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;

elsif (nm_tabela_p		= 'TISS_REGRA_PRESTADOR') then

	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_prestador
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;


	insert into tiss_regra_prestador(
			NR_SEQUENCIA  			,
			CD_ESTABELECIMENTO      	,
			DT_ATUALIZACAO           	,
			NM_USUARIO              	,
			DT_ATUALIZACAO_NREC           	,
			NM_USUARIO_NREC               	,
			CD_CONVENIO                    	,
			IE_RESPONSAVEL_CREDITO        	,
			CD_CGC_PRESTADOR_TISS          	,
			IE_TIPO_ATENDIMENTO            	,
			IE_TIPO_REGRA                 	,
			CD_CGC_PRESTADOR               	,
			IE_GUIA_RI                     	,
			IE_SOLICITANTE			,
			IE_GUIA_HONORARIO		,
			DS_PRESTADOR_TISS      		,
			CD_CATEGORIA           		,
			CD_PROCEDIMENTO        		,
			IE_ORIGEM_PROCED      		,
			CD_AREA_PROCEDIMENTO		,
			CD_ESPECIALIDADE     		,
			CD_GRUPO_PROC         		,
			CD_MEDICO_ATEND        		,
			IE_PRESTADOR           		,
			CD_CGC_SOLIC_PRESCR    		,
			IE_MED_EXEC            		,
			IE_ESCALA              		,
			IE_FATUR_MEDICO        		,
			IE_PRIORIDADE          		,
			DT_INICIO_VIGENCIA     		,
			DT_FIM_VIGENCIA        		,
			CD_MEDICO_REFERIDO     		,
			CD_TIPO_ACOMODACAO     		,
			CD_PROCEDENCIA         		,
			CD_PLANO               		,
			NR_SEQ_CLASSIFICACAO   		,
			IE_VINCULO_MEDICO      			)
		SELECT	nextval('tiss_regra_prestador_seq'),
			cd_estab_dest_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			CD_CONVENIO                    	,
			IE_RESPONSAVEL_CREDITO        	,
			CD_CGC_PRESTADOR_TISS          	,
			IE_TIPO_ATENDIMENTO            	,
			IE_TIPO_REGRA                 	,
			CD_CGC_PRESTADOR               	,
			IE_GUIA_RI             		,
			IE_SOLICITANTE,
			coalesce(IE_GUIA_HONORARIO,'N')	,
			DS_PRESTADOR_TISS      		,
			CD_CATEGORIA           		,
			CD_PROCEDIMENTO        		,
			IE_ORIGEM_PROCED      		,
			CD_AREA_PROCEDIMENTO		,
			CD_ESPECIALIDADE     		,
			CD_GRUPO_PROC         		,
			CD_MEDICO_ATEND        		,
			IE_PRESTADOR           		,
			CD_CGC_SOLIC_PRESCR    		,
			IE_MED_EXEC            		,
			IE_ESCALA              		,
			IE_FATUR_MEDICO        		,
			IE_PRIORIDADE          		,
			DT_INICIO_VIGENCIA     		,
			DT_FIM_VIGENCIA        		,
			CD_MEDICO_REFERIDO     		,
			CD_TIPO_ACOMODACAO     		,
			CD_PROCEDENCIA         		,
			CD_PLANO               		,
			NR_SEQ_CLASSIFICACAO   		,
			IE_VINCULO_MEDICO
		from	tiss_regra_prestador
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;

elsif (nm_tabela_p	= 'TISS_REGRA_GUIA') then
	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_guia
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;

	open c022;

	loop
	fetch c022 into
		nr_seq_w;
	EXIT WHEN NOT FOUND; /* apply on c022 */

	select	nextval('tiss_regra_guia_seq')
	into STRICT	nr_sequencia_w
	;

	insert	into	tiss_regra_guia(
			NR_SEQUENCIA     ,
			DT_ATUALIZACAO   ,
			NM_USUARIO       ,
			DT_ATUALIZACAO_NREC,
			NM_USUARIO_NREC    ,
			CD_ESTABELECIMENTO ,
			CD_CONVENIO        ,
			IE_TISS_TIPO_GUIA  ,
			IE_FORMA           ,
			DS_ADICIONAL       ,
			IE_TIPO_ATENDIMENTO,
			NR_INICIAL         ,
			NR_FINAL           ,
			NR_ATUAL           ,
			DS_MASCARA         ,
			CD_PERFIL_COMUNIC  ,
			NR_DOC_CONV_COMUNIC,
			IE_GUIA_HONORARIO  ,
			QT_MAX_PROC        ,
			IE_GUIA_PRESTADOR  ,
			IE_RESPONSAVEL_CREDITO,
			IE_FUNCAO_MEDICO      ,
			IE_CBOS ,
			IE_GUIA_MEDICO         ,
			QT_ITENS_GUIA          ,
			IE_GUIA                ,
			IE_GUIA_PARTIC_DIF     ,
			IE_SENHA               ,
			IE_SETOR_ATENDIMENTO   ,
			IE_MEDICO_REQ          ,
			IE_PRESCRICAO          ,
			CD_SETOR_ATENDIMENTO   ,
			IE_MEDICO_SOLIC_PRESCR ,
			IE_TIPO_ATEND_CONTA    ,
			IE_FUNCIONARIO         ,
			CD_FUNCAO              ,
			IE_CONSIDERAR_SETOR    ,
			IE_TIPO_GUIA_ATEND     ,
			CD_PROCEDIMENTO        ,
			IE_ORIGEM_PROCED       ,
			CD_AREA_PROCEDIMENTO   ,
			CD_ESPECIALIDADE       ,
			CD_GRUPO_PROC          ,
			IE_CONSIDERAR_TIPO_GUIA,
			IE_TIPO_PROCEDIMENTO   ,
			IE_DATA_ITEM           ,
			IE_TIPO_ATEND_TISS_PROC,
			IE_RESTRINGIR_CONTA    ,
			IE_SETOR_PROC_PRESCR   ,
			IE_RESTRINGIR_HONOR    )
		SELECT	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			cd_estab_dest_p,
			CD_CONVENIO        ,
			IE_TISS_TIPO_GUIA  ,
			IE_FORMA           ,
			DS_ADICIONAL       ,
			IE_TIPO_ATENDIMENTO,
			NR_INICIAL         ,
			NR_FINAL           ,
			NR_ATUAL           ,
			DS_MASCARA         ,
			CD_PERFIL_COMUNIC  ,
			NR_DOC_CONV_COMUNIC,
			IE_GUIA_HONORARIO  ,
			QT_MAX_PROC        ,
			IE_GUIA_PRESTADOR  ,
			IE_RESPONSAVEL_CREDITO,
			IE_FUNCAO_MEDICO      ,
			IE_CBOS,
			IE_GUIA_MEDICO         ,
			QT_ITENS_GUIA          ,
			IE_GUIA                ,
			IE_GUIA_PARTIC_DIF     ,
			IE_SENHA               ,
			IE_SETOR_ATENDIMENTO   ,
			IE_MEDICO_REQ          ,
			IE_PRESCRICAO          ,
			CD_SETOR_ATENDIMENTO   ,
			IE_MEDICO_SOLIC_PRESCR ,
			IE_TIPO_ATEND_CONTA    ,
			IE_FUNCIONARIO         ,
			CD_FUNCAO              ,
			IE_CONSIDERAR_SETOR    ,
			IE_TIPO_GUIA_ATEND     ,
			CD_PROCEDIMENTO        ,
			IE_ORIGEM_PROCED       ,
			CD_AREA_PROCEDIMENTO   ,
			CD_ESPECIALIDADE       ,
			CD_GRUPO_PROC          ,
			IE_CONSIDERAR_TIPO_GUIA,
			IE_TIPO_PROCEDIMENTO   ,
			IE_DATA_ITEM           ,
			IE_TIPO_ATEND_TISS_PROC,
			IE_RESTRINGIR_CONTA    ,
			IE_SETOR_PROC_PRESCR   ,
			IE_RESTRINGIR_HONOR
		from	tiss_regra_guia
		where	nr_sequencia	= nr_seq_w;

	insert into	tiss_regra_guia_adic(
			NR_SEQUENCIA         ,
			DT_ATUALIZACAO       ,
			NM_USUARIO           ,
			DT_ATUALIZACAO_NREC  ,
			NM_USUARIO_NREC      ,
			NR_SEQ_REGRA         ,
			IE_RESP_CREDITO_FORA,
			CD_SETOR_PRESCR_FORA	)
		SELECT	nextval('tiss_regra_guia_adic_seq'),
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			nr_sequencia_w,
			IE_RESP_CREDITO_FORA,
			CD_SETOR_PRESCR_FORA
		from	tiss_regra_guia_adic
		where	nr_seq_regra	= nr_seq_w;

	END LOOP;
	CLOSE c022;

elsif (nm_tabela_p		= upper('tiss_regra_honor_spsadt')) then

	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_honor_spsadt
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;

	insert into tiss_regra_honor_spsadt(
			NR_SEQUENCIA      ,
 			CD_ESTABELECIMENTO ,
 			DT_ATUALIZACAO      ,
 			NM_USUARIO          ,
 			DT_ATUALIZACAO_NREC ,
 			NM_USUARIO_NREC     ,
 			CD_CONVENIO         ,
 			IE_RESPONSAVEL_CREDITO,
 			IE_TIPO_ATENDIMENTO,
 			IE_PRESTADOR       ,
 			IE_EXEC_COMPL,
			IE_MEDICO_EXEC	)
		SELECT	nextval('tiss_regra_honor_spsadt_seq'),
			cd_estab_dest_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			CD_CONVENIO         ,
 			IE_RESPONSAVEL_CREDITO,
 			IE_TIPO_ATENDIMENTO,
 			IE_PRESTADOR       ,
 			IE_EXEC_COMPL  ,
			IE_MEDICO_EXEC
		from	tiss_regra_honor_spsadt
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;

elsif (nm_tabela_p	= 'TISS_REGRA_VALOR_PROC') then

	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_valor_proc
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;


		insert into tiss_regra_valor_proc(
			NR_SEQUENCIA  ,
			CD_ESTABELECIMENTO,
			DT_ATUALIZACAO    ,
			NM_USUARIO        ,
			DT_ATUALIZACAO_NREC,
			NM_USUARIO_NREC    ,
			CD_CONVENIO        ,
			IE_TISS_TIPO_GUIA  ,
			CD_CGC_PRESTADOR   ,
			IE_RESPONSAVEL_CREDITO,
			IE_REGRA_VALOR,
			CD_PROCEDIMENTO,
			IE_ORIGEM_PROCED,
			CD_AREA_PROCEDIMENTO,
			CD_ESPECIALIDADE,
			CD_GRUPO_PROC,
			IE_FUNCAO_MEDICO,
			IE_HONORARIO,
			IE_PACOTE,
			CD_PLANO_CONVENIO			)
		SELECT	nextval('tiss_regra_valor_proc_seq'),
			cd_estab_dest_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			CD_CONVENIO        ,
			IE_TISS_TIPO_GUIA  ,
			CD_CGC_PRESTADOR   ,
			IE_RESPONSAVEL_CREDITO,
			IE_REGRA_VALOR,
			CD_PROCEDIMENTO,
			IE_ORIGEM_PROCED,
			CD_AREA_PROCEDIMENTO,
			CD_ESPECIALIDADE,
			CD_GRUPO_PROC,
			IE_FUNCAO_MEDICO,
			IE_HONORARIO,
			IE_PACOTE,
			CD_PLANO_CONVENIO
		from	tiss_regra_valor_proc
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;

elsif (nm_tabela_p		='TISS_REGRA_GUIA_PRINC') then
	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_guia_princ
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;
		insert into	tiss_regra_guia_princ(
			NR_SEQUENCIA  ,
			CD_ESTABELECIMENTO,
			DT_ATUALIZACAO    ,
			NM_USUARIO        ,
			DT_ATUALIZACAO_NREC,
			NM_USUARIO_NREC    ,
			CD_CONVENIO        ,
			IE_TISS_TIPO_GUIA  ,
			IE_REGRA           ,
			IE_TIPO_ATENDIMENTO,
			ie_mesma_guia)
		SELECT	nextval('tiss_regra_guia_princ_seq'),
			cd_estab_dest_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			CD_CONVENIO        ,
			IE_TISS_TIPO_GUIA  ,
			IE_REGRA           ,
			IE_TIPO_ATENDIMENTO,
			ie_mesma_guia
		from	tiss_regra_guia_princ
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;

elsif (nm_tabela_p		= 'TISS_REGRA_PRESTADOR_SOLIC') then
	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_prestador_solic
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;

	insert into tiss_regra_prestador_solic(
			NR_SEQUENCIA ,
			DT_ATUALIZACAO,
			NM_USUARIO     ,
			DT_ATUALIZACAO_NREC,
			NM_USUARIO_NREC    ,
			CD_ESTABELECIMENTO ,
			CD_CONVENIO        ,
			IE_TIPO_ATENDIMENTO,
			IE_CLINICA         ,
			CD_SETOR_ENTRADA   ,
			IE_SOLICITANTE     ,
			CD_CGC_PRESTADOR    	,
			IE_AUTORIZACAO         ,
			CD_MEDICO_ATENDIMENTO,
			CD_MEDICO_PREST       ,
			CD_PROCEDENCIA         ,
			CD_INTERNO             ,
			DS_PRESTADOR_TISS      ,
			CD_MEDICO_REFERIDO     ,
			CD_CATEGORIA           ,
			dt_inicio_vigencia,
			dt_fim_vigencia,
			ie_tipo_protocolo,
			ie_vinculo_medico,
			cd_medico_prescr,
			nr_seq_plano)
		SELECT	nextval('tiss_regra_prestador_solic_seq'),
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			cd_estab_dest_p,
			CD_CONVENIO        ,
			IE_TIPO_ATENDIMENTO,
			IE_CLINICA         ,
			CD_SETOR_ENTRADA   ,
			IE_SOLICITANTE     ,
			CD_CGC_PRESTADOR    	,
			IE_AUTORIZACAO         ,
			CD_MEDICO_ATENDIMENTO,
			CD_MEDICO_PREST       ,
			CD_PROCEDENCIA         ,
			CD_INTERNO             ,
			DS_PRESTADOR_TISS      ,
			CD_MEDICO_REFERIDO     ,
			CD_CATEGORIA,
			dt_inicio_vigencia,
			dt_fim_vigencia,
			ie_tipo_protocolo,
			ie_vinculo_medico,
			cd_medico_prescr,
			nr_seq_plano
		from	tiss_regra_prestador_solic
		where	cd_estabelecimento	= cd_estab_orig_p
		and	cd_convenio		= cd_convenio_orig_p;

elsif (nm_tabela_p = 'TISS_REGRA_MAT_OPM') then
	if (ie_excluir_p = 'S') then
		delete	from tiss_regra_mat_opm
		where	cd_convenio 		= cd_convenio_orig_p
		and	cd_estabelecimento	= cd_estab_dest_p;
	end if;
	insert into tiss_regra_mat_opm(
		cd_classe_material,
		cd_convenio,
		cd_estabelecimento,
		cd_grupo_material,
		cd_material,
		cd_subgrupo_material,
		dt_atualizacao,
		dt_atualizacao_nrec,
		ie_opm,
		ie_tipo_atendimento,
		nm_usuario,
		nm_usuario_nrec,
		nr_sequencia,
		vl_material_max,
		vl_material_min)
	SELECT	cd_classe_material,
		cd_convenio,
		cd_estab_dest_p,
		cd_grupo_material,
		cd_material,
		cd_subgrupo_material,
		clock_timestamp(),
		clock_timestamp(),
		ie_opm,
		ie_tipo_atendimento,
		nm_usuario_p,
		nm_usuario_p,
		nextval('tiss_regra_mat_opm_seq'),
		vl_material_max,
		vl_material_min
	from	tiss_regra_mat_opm
	where	cd_estabelecimento	= cd_estab_orig_p
	and	cd_convenio		= cd_convenio_orig_p;

end if;

COMMIT;


END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tiss_copia_param_conv_estab ( cd_convenio_orig_p bigint, cd_estab_orig_p bigint, cd_estab_dest_p bigint, nm_tabela_p text, nm_usuario_p text, ie_excluir_p text) FROM PUBLIC;

