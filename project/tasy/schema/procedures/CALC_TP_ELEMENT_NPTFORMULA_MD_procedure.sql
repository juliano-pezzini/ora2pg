-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE calc_tp_element_nptformula_md (ie_tipo_p text, ie_tipo_elemento_p text, ie_nao_adicional_p text default 'N', qt_diaria_p bigint DEFAULT NULL, qt_Glicose_p INOUT bigint DEFAULT NULL, qt_Add_Glicose_p INOUT bigint DEFAULT NULL, qt_Proteina_p INOUT bigint DEFAULT NULL, qt_Add_Proteina_p INOUT bigint DEFAULT NULL, qt_Lipidio_p INOUT bigint DEFAULT NULL, qt_Sodio_p INOUT bigint DEFAULT NULL, qt_Magnesio_p INOUT bigint DEFAULT NULL, qt_Potassio_p INOUT bigint DEFAULT NULL, qt_Calcio_p INOUT bigint DEFAULT NULL, qt_fosforo_p INOUT bigint DEFAULT NULL, qt_Eletrolito_p INOUT bigint  DEFAULT NULL) AS $body$
BEGIN
    if upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_Glicose_p := coalesce(qt_Glicose_p,0) + coalesce(qt_diaria_p,0);

        if (ie_nao_adicional_p = 'S') then
            qt_Add_Glicose_p := coalesce(qt_Add_Glicose_p,0) + coalesce(qt_diaria_p,0);
        end if;

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_Proteina_p := coalesce(qt_Proteina_p,0) + coalesce(qt_diaria_p,0);

        if (ie_nao_adicional_p = 'S') then
            qt_Add_Proteina_p := coalesce(qt_Add_Proteina_p,0) + coalesce(qt_diaria_p,0);
        end if;

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        if (ie_nao_adicional_p = 'S') then
            qt_Lipidio_p := coalesce(qt_Lipidio_p,0) + coalesce(qt_diaria_p,0);
        end if;

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_Sodio_p := coalesce(qt_Sodio_p,0) + coalesce(qt_diaria_p,0);

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_Magnesio_p := coalesce(qt_Magnesio_p,0) + coalesce(qt_diaria_p,0);

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_Potassio_p := coalesce(qt_Potassio_p,0) + coalesce(qt_diaria_p,0);

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_Calcio_p := coalesce(qt_Calcio_p,0) + coalesce(qt_diaria_p,0);

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_fosforo_p := coalesce(qt_fosforo_p,0) + coalesce(qt_diaria_p,0);

    elsif upper(ie_tipo_p) = upper(ie_tipo_elemento_p) then
        qt_Eletrolito_p := coalesce(qt_Eletrolito_p,0) + coalesce(qt_diaria_p,0);
    end if;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE calc_tp_element_nptformula_md (ie_tipo_p text, ie_tipo_elemento_p text, ie_nao_adicional_p text default 'N', qt_diaria_p bigint DEFAULT NULL, qt_Glicose_p INOUT bigint DEFAULT NULL, qt_Add_Glicose_p INOUT bigint DEFAULT NULL, qt_Proteina_p INOUT bigint DEFAULT NULL, qt_Add_Proteina_p INOUT bigint DEFAULT NULL, qt_Lipidio_p INOUT bigint DEFAULT NULL, qt_Sodio_p INOUT bigint DEFAULT NULL, qt_Magnesio_p INOUT bigint DEFAULT NULL, qt_Potassio_p INOUT bigint DEFAULT NULL, qt_Calcio_p INOUT bigint DEFAULT NULL, qt_fosforo_p INOUT bigint DEFAULT NULL, qt_Eletrolito_p INOUT bigint  DEFAULT NULL) FROM PUBLIC;

