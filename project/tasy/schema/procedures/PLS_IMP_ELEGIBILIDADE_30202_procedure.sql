-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_imp_elegibilidade_30202 ( nr_seq_transacao_tiss_p pls_elegibilidade.nr_seq_transacao_tiss%type, cd_prestador_interno_p pls_elegibilidade.cd_prestador_interno%type, cd_cgc_p pls_elegibilidade.cd_cgc%type, nr_cpf_p pls_elegibilidade.nr_cpf%type, cd_ans_p pls_elegibilidade.cd_ans%type, nr_versao_p pls_elegibilidade.nr_versao%type, nm_contratado_p pls_elegibilidade.nm_contratado%type, cd_usuario_plano_p pls_elegibilidade.cd_usuario_plano%type, nm_beneficiario_p pls_elegibilidade.nm_beneficiario%type, dt_validade_carteira_p pls_elegibilidade.dt_validade_carteira%type, nr_cartao_nac_sus_p pls_elegibilidade.nr_cartao_nac_sus%type, ds_hash_p pls_elegibilidade.ds_hash%type, cd_estabelecimento_p estabelecimento.cd_estabelecimento%type, nm_usuario_p usuario.nm_usuario%type, ie_tipo_ident_benef_p pls_elegibilidade.ie_tipo_ident_benef%type, cd_ident_biometria_benef_p pls_elegibilidade.cd_ident_biometria_benef%type, cd_template_biomet_benef_p pls_elegibilidade.cd_template_biomet_benef%type, cd_ausencia_val_benef_tiss_p pls_elegibilidade.cd_ausencia_val_benef_tiss%type, cd_validacao_benef_tiss_p pls_elegibilidade.cd_validacao_benef_tiss%type, nr_seq_elegibilidade_p INOUT pls_elegibilidade.nr_sequencia%type) AS $body$
BEGIN

insert into pls_elegibilidade(
	nr_sequencia, dt_atualizacao, cd_estabelecimento,
	nm_usuario, nr_seq_transacao_tiss, dt_transacao,
	cd_prestador_interno, cd_cgc, nr_cpf,
	cd_ans, nr_versao, nm_contratado,
	cd_usuario_plano, nm_beneficiario, dt_validade_carteira,
	nr_cartao_nac_sus, ds_hash, ie_tipo_ident_benef, cd_ident_biometria_benef,
	cd_template_biomet_benef, cd_ausencia_val_benef_tiss,cd_validacao_benef_tiss) 
values (nextval('pls_elegibilidade_seq'), clock_timestamp(), cd_estabelecimento_p,
	nm_usuario_p, nr_seq_transacao_tiss_p, clock_timestamp(),
	cd_prestador_interno_p, cd_cgc_p, nr_cpf_p,
	cd_ans_p, nr_versao_p, nm_contratado_p,
	cd_usuario_plano_p, nm_beneficiario_p, dt_validade_carteira_p, 
	nr_cartao_nac_sus_p, ds_hash_p, ie_tipo_ident_benef_p, cd_ident_biometria_benef_p,
	cd_template_biomet_benef_p, cd_ausencia_val_benef_tiss_p,cd_validacao_benef_tiss_p) returning nr_sequencia into nr_seq_elegibilidade_p;

CALL pls_verifica_eleg_solic(nr_seq_elegibilidade_p, cd_estabelecimento_p, nm_usuario_p);

--Commit é realizado na rotina pls_verifica_eleg_solic , caso for retirado de lá, precisa descomentar a linha abaixo

--commit;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_imp_elegibilidade_30202 ( nr_seq_transacao_tiss_p pls_elegibilidade.nr_seq_transacao_tiss%type, cd_prestador_interno_p pls_elegibilidade.cd_prestador_interno%type, cd_cgc_p pls_elegibilidade.cd_cgc%type, nr_cpf_p pls_elegibilidade.nr_cpf%type, cd_ans_p pls_elegibilidade.cd_ans%type, nr_versao_p pls_elegibilidade.nr_versao%type, nm_contratado_p pls_elegibilidade.nm_contratado%type, cd_usuario_plano_p pls_elegibilidade.cd_usuario_plano%type, nm_beneficiario_p pls_elegibilidade.nm_beneficiario%type, dt_validade_carteira_p pls_elegibilidade.dt_validade_carteira%type, nr_cartao_nac_sus_p pls_elegibilidade.nr_cartao_nac_sus%type, ds_hash_p pls_elegibilidade.ds_hash%type, cd_estabelecimento_p estabelecimento.cd_estabelecimento%type, nm_usuario_p usuario.nm_usuario%type, ie_tipo_ident_benef_p pls_elegibilidade.ie_tipo_ident_benef%type, cd_ident_biometria_benef_p pls_elegibilidade.cd_ident_biometria_benef%type, cd_template_biomet_benef_p pls_elegibilidade.cd_template_biomet_benef%type, cd_ausencia_val_benef_tiss_p pls_elegibilidade.cd_ausencia_val_benef_tiss%type, cd_validacao_benef_tiss_p pls_elegibilidade.cd_validacao_benef_tiss%type, nr_seq_elegibilidade_p INOUT pls_elegibilidade.nr_sequencia%type) FROM PUBLIC;

