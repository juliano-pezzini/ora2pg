-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE baca_conversao_meio_externo_pk () AS $body$
BEGIN

CALL Exec_Sql_Dinamico('TASY', 'alter table CONVERSAO_MEIO_EXTERNO drop constraint CONMEEX_PK');

CALL Exec_Sql_Dinamico('TASY', ' ALTER TABLE CONVERSAO_MEIO_EXTERNO ADD ' ||
			  ' (CONSTRAINT CONMEEX_UK Unique  ( ' ||
			  '               CD_CGC, ' ||
			  '               NM_TABELA, ' ||
			  '               NM_ATRIBUTO, ' ||
			  '               CD_INTERNO) ' ||
			  ' USING INDEX   Tablespace TASY_INDEX) ');

CALL Exec_Sql_Dinamico('TASY', ' CREATE sequence CONVERSAO_MEIO_EXTERNO_SEQ ' ||
			  ' Increment by 1 ' ||
			  ' Start With 1 ' ||
			  ' MaxValue 9999999999 ' ||
			  ' cycle  ' ||
			  ' NoCache ');

CALL Exec_Sql_Dinamico('TASY', ' update	CONVERSAO_MEIO_EXTERNO ' ||
			  ' set		nr_sequencia = CONVERSAO_MEIO_EXTERNO_seq.nextval ' ||
			  ' where	nr_sequencia is null ');


CALL Exec_Sql_Dinamico('TASY', ' ALTER TABLE CONVERSAO_MEIO_EXTERNO ADD ' ||
			  ' (CONSTRAINT CONMEEX_PK Primary Key  ( ' ||
			  '               NR_SEQUENCIA) ' ||
			  ' USING INDEX   Tablespace TASY_INDEX) ');

CALL Exec_Sql_Dinamico('TASY', ' ALTER TABLE CONVERSAO_MEIO_EXTERNO MODIFY (CD_CGC VARCHAR2 (0014) NULL)');

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE baca_conversao_meio_externo_pk () FROM PUBLIC;

