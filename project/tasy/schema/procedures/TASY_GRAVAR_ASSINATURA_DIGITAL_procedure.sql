-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_gravar_assinatura_digital ( ds_assinatura_p text, cd_pessoa_fisica_p text, ds_hash_assinatura_p text, nr_seq_proj_ass_p bigint, nr_seq_proj_xml_p bigint, nm_usuario_p text, cd_classif_relat_p text, cd_relatorio_p bigint, nr_sequencia_p INOUT bigint, ie_nova_assinat_p INOUT text) AS $body$
DECLARE



nr_sequencia_w	bigint := null;

ds_erro_w	varchar(255);

nr_atendimento_w	bigint;

cd_pessoa_fisica_w	varchar(10);

cd_relatorio_w		bigint;

cd_classif_relat_w	varchar(50);

nr_seq_relat_w		bigint;

nm_tabela_w			varchar(50);

nm_atributo_w		varchar(50);

ds_comando_w		varchar(2000);

ds_parametros_w		varchar(2000);

ds_separador_bv_w	varchar(2000)	:= obter_separador_bv;

nr_seq_cpoe_w		bigint;

nr_seq_dialise_w	hd_dialise.nr_sequencia%type;

nr_prescricao_w bigint;
nr_sequencia_prescricao_w bigint;


BEGIN

ie_nova_assinat_p := 'N';


if (nr_seq_proj_ass_p in (52928,52929,52948,52949)) then
	begin
		select pp.nr_prescricao, pp.nr_sequencia
		into STRICT nr_prescricao_w, nr_sequencia_prescricao_w
		from laudo_paciente lp
		join procedimento_paciente proc on (lp.nr_seq_proc = proc.nr_sequencia)
		join prescr_procedimento pp ON (proc.nr_prescricao = pp.nr_prescricao 
									and proc.nr_sequencia_prescricao = pp.nr_sequencia)
		where lp.nr_sequencia = nr_sequencia_p;


		if (nr_seq_proj_ass_p in (52928, 52948)) then
			CALL gravar_auditoria_mmed(nr_prescricao_w,nr_sequencia_prescricao_w,nm_usuario_p,26,null);
		else
			CALL gravar_auditoria_mmed(nr_prescricao_w,nr_sequencia_prescricao_w,nm_usuario_p,27,null);
		end if;
		
		if (nr_seq_proj_ass_p = 52928) then
		
			select	max(nr_seq_assinatura)

			into STRICT	nr_sequencia_w

			from	laudo_paciente

			where	nr_sequencia = nr_sequencia_p;
		
		elsif (nr_seq_proj_ass_p = 52948)then
		
			select	max(nr_seq_seg_assinatura)

			into STRICT	nr_sequencia_w	

			from	laudo_paciente

			where	nr_sequencia = nr_sequencia_p;
		
		elsif (nr_seq_proj_ass_p = 52929) then
		
			select	max(NR_SEQ_ASSINAT_INATIVACAO)

			into STRICT	nr_sequencia_w

			from	laudo_paciente

			where	nr_sequencia = nr_sequencia_p;
		
		elsif (nr_seq_proj_ass_p = 52949)then
		
			select	max(nr_seq_seg_assinat_inativacao)

			into STRICT	nr_sequencia_w	

			from	laudo_paciente

			where	nr_sequencia = nr_sequencia_p;
		
		end if;
		
  end;
elsif (nr_seq_proj_ass_p in (1,25272,50213,50215, 51729, 51730)) then

	begin

	if (nr_seq_proj_ass_p = 50213) then -- Liberacao da prescricao da farmacia
		select	max(nr_seq_assinatura_farm)

		into STRICT	nr_sequencia_w

		from	prescr_medica

		where	nr_prescricao = nr_sequencia_p;

	elsif	((nr_seq_proj_ass_p = 50215) OR (nr_seq_proj_ass_p = 51730))  then -- Liberacao da prescricao da enfermagem
		select	max(nr_seq_assinatura_enf)

		into STRICT	nr_sequencia_w

		from	prescr_medica

		where	nr_prescricao = nr_sequencia_p;

	else

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	prescr_medica

		where	nr_prescricao = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (51590,51608)) then

    begin

    if (nr_seq_proj_ass_p = 51590) then

    	select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_atend_anot

		where	nr_sequencia = nr_sequencia_p;

    elsif (nr_seq_proj_ass_p = 51608) then

        select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_atend_anot

		where	nr_sequencia = nr_sequencia_p;

    end if;

    end;

elsif (nr_seq_proj_ass_p in (51352,51353)) then

		
	begin

		
	if (nr_seq_proj_ass_p = 51352) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	gca_atendimento

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	gca_atendimento

		where	nr_sequencia = nr_sequencia_p;

	end if;


		
		
	end;	


elsif (nr_seq_proj_ass_p in (51630, 51631)) then

    begin

    if (nr_seq_proj_ass_p = 51630) then

    	select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_atend_interc

		where	nr_sequencia = nr_sequencia_p;

    elsif (nr_seq_proj_ass_p = 51631) then

        select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_atend_interc

		where	nr_sequencia = nr_sequencia_p;

    end if;

    end;

elsif (nr_seq_proj_ass_p = 51648) then

    begin

    select	max(nr_seq_assinatura)

	into STRICT	nr_sequencia_w

	from	paciente_atend_medic

	where	nr_seq_interno = nr_sequencia_p;

    end;

elsif (nr_seq_proj_ass_p in (36673,36671,52448,52449)) then

	begin



	if (nr_seq_proj_ass_p	in ( 36671,52449)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atendimento_perda_ganho

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atendimento_perda_ganho

		where	nr_sequencia = nr_sequencia_p;

	end if;





	end;

elsif (nr_seq_proj_ass_p in (183, 25230, 51888, 51889, 53486, 53488)) then

	begin

	if (nr_seq_proj_ass_p	in (183, 51889, 53486)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	evolucao_paciente

		where	cd_evolucao = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	evolucao_paciente

		where	cd_evolucao = nr_sequencia_p;

	end if;

	end;

	
elsif (nr_seq_proj_ass_p in (53495, 53496)) then

	begin

	if (nr_seq_proj_ass_p	in (53495)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cih_pac_fat_risco

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cih_pac_fat_risco

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;	

elsif (nr_seq_proj_ass_p in (44466, 44467,52388,52389)) then

	begin

	if (nr_seq_proj_ass_p IN ( 44466,52389)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_tec_anestesica

		where	nr_sequencia = nr_sequencia_p;

	elsif (nr_seq_proj_ass_p	in ( 44467,52388)) then

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_tec_anestesica

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (44469, 44470,52368,52369)) then

	begin

	if (nr_seq_proj_ass_p in ( 44469,52368)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	anestesia_descricao

		where	nr_sequencia = nr_sequencia_p;

	elsif (nr_seq_proj_ass_p	 in ( 44470,52369)) then

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	anestesia_descricao

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (184,25231,52428,52429)) then

	begin

	if (nr_seq_proj_ass_p	IN ( 184,52429)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atendimento_sinal_vital

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atendimento_sinal_vital

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25170,25242)) then

	begin



	if (nr_seq_proj_ass_p	= 25170) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atend_anal_bioq_port

		where	nr_sequencia = nr_sequencia_p;



	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atend_anal_bioq_port

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25172,25233)) then

	begin

	if (nr_seq_proj_ass_p	= 25172) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	anamnese_paciente

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	anamnese_paciente

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25173,25232,52688,52689)) then

	begin

	if (nr_seq_proj_ass_p	in (25173,52688)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	diagnostico_doenca

		where	nr_seq_interno = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	diagnostico_doenca

		where	nr_seq_interno = nr_sequencia_p;

	end if;
	
	end;

elsif (nr_seq_proj_ass_p in (25174,25246)) then

	begin

	if (nr_seq_proj_ass_p	= 25174) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_acessorio

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_acessorio

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25175,25235)) then

	begin

	if (nr_seq_proj_ass_p	= 25175) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_alergia

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_alergia

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25176,25238)) then

	begin

	if (nr_seq_proj_ass_p	= 25176) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	historico_saude_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	historico_saude_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25177,25234)) then

	begin

	if (nr_seq_proj_ass_p	= 25177) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_antec_clinico

		where	nr_sequencia = nr_sequencia_p

		and	coalesce(ie_paciente,'S') = 'S';

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_antec_clinico

		where	nr_sequencia = nr_sequencia_p

		and	coalesce(ie_paciente,'S') = 'S';

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25178,25236)) then

	begin

	if (nr_seq_proj_ass_p	= 25178) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_habito_vicio

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_habito_vicio

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25179,25247)) then

	begin

	if (nr_seq_proj_ass_p	= 25179) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_antec_clinico

		where	nr_sequencia = nr_sequencia_p

		and	coalesce(ie_paciente,'S') = 'N';

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_antec_clinico

		where	nr_sequencia = nr_sequencia_p

		and	coalesce(ie_paciente,'S') = 'N';

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25180,25237)) then

	begin

	if (nr_seq_proj_ass_p	= 25180) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_medic_uso

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_medic_uso

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25181,25244)) then

	begin

	if (nr_seq_proj_ass_p	= 25181) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_ocorrencia

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_ocorrencia

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25182,25245)) then

	begin

	if (nr_seq_proj_ass_p	= 25182) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_rep_prescricao

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_rep_prescricao

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25183,25241,51908,51909)) then

	begin

	if (nr_seq_proj_ass_p in (25183,51909)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atend_aval_analgesia

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atend_aval_analgesia

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25184,25240)) then

	begin

	if (nr_seq_proj_ass_p	= 25184) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atend_monit_hemod

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atend_monit_hemod

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25185,25239,52408,52409)) then

	begin

	if (nr_seq_proj_ass_p	IN ( 25185,52408)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atendimento_monit_resp

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atendimento_monit_resp

		where	nr_sequencia = nr_sequencia_p;

	end if;



	end;

elsif (nr_seq_proj_ass_p in (25186,25243,50733,50734)) then

	begin

	if (nr_seq_proj_ass_p	in (25186,50733)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atendimento_alta

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atendimento_alta

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25187,25248,52188,52189)) then

	begin

	if (nr_seq_proj_ass_p	in ( 25187,52189)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	ehr_registro

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	ehr_registro

		where	nr_sequencia = nr_sequencia_p;



	end if;

	end;

elsif (nr_seq_proj_ass_p in (25191,50413,51212,51214)) then

	begin

	if (nr_seq_proj_ass_p in (25191, 51212)) then

		begin

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	laudo_paciente

		where	nr_sequencia = nr_sequencia_p;

		end;

	else

		begin

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	laudo_paciente

		where	nr_sequencia = nr_sequencia_p;

		end;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (25290,25291,50726,50727,52703,52704)) then

	begin

	if (nr_seq_proj_ass_p in (25290,50726,52703)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	pe_prescricao

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	pe_prescricao

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p = 25396) then

	begin

	select	max(nr_seq_assinatura),
			max(nr_seq_dieta_cpoe)
	into STRICT	nr_sequencia_w,
			nr_seq_cpoe_w
	from	prescr_dieta
	where	nr_seq_interno = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p = 25397) then

	begin

	select	max(nr_seq_assinatura),
			max(nr_seq_dieta_cpoe)
	into STRICT	nr_sequencia_w,
			nr_seq_cpoe_w
	from	rep_jejum
	where	nr_sequencia = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p in (25398,25399,25406,25407,31324,31325)) then

	begin

	if (nr_seq_proj_ass_p = 31324) then

		select	max(nr_seq_assin_apraza) -- Alteracao de Aprazamento da enfermagem
		into STRICT	nr_sequencia_w

		from	prescr_material

		where	nr_seq_interno = nr_sequencia_p;

	elsif (nr_seq_proj_ass_p = 31325) then -- Alteracao de 1 horario da enfermagem
		select	max(nr_seq_assin_prim_hor)

		into STRICT	nr_sequencia_w

		from	prescr_material

		where	nr_seq_interno = nr_sequencia_p;

	elsif (nr_seq_proj_ass_p in (25398, 25399, 25406, 25407)) then -- suspensao suplemento/SNE/medicamento/material
		select	max(nr_seq_assinatura_susp),
				max(nr_seq_mat_cpoe)
		into STRICT	nr_sequencia_w,
				nr_seq_cpoe_w
		from	prescr_material
		where	nr_seq_interno = nr_sequencia_p;

	else

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	prescr_material

		where	nr_seq_interno = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p = 25401) then

	begin

	select	max(nr_seq_assinatura)

	into STRICT	nr_sequencia_w

	from	nut_paciente

	where	nr_sequencia = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p = 25403) then

	begin

	select	max(nr_seq_assinatura)

	into STRICT	nr_sequencia_w

	from	nut_pac

	where	nr_sequencia = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p = 25405) then

	begin

	select	max(nr_seq_assinatura)
	into STRICT	nr_sequencia_w
	from	prescr_solucao
	where	nr_seq_interno = nr_sequencia_p;

	
	select	max(a.nr_seq_mat_cpoe)
	into STRICT	nr_seq_cpoe_w
	from	prescr_material a,
			prescr_solucao b
	where	a.nr_sequencia_solucao 	= b.nr_seq_solucao
	and		a.nr_prescricao 		= b.nr_prescricao
	and		b.nr_seq_interno 		= nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p in (25408,25409,25410)) then

	begin

	select	max(nr_seq_assinatura),
			max(nr_seq_proc_cpoe)
	into STRICT	nr_sequencia_w,
			nr_seq_cpoe_w
	from	prescr_procedimento
	where	nr_seq_interno = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p = 25411) then

	begin

	select	max(nr_seq_assinatura)

	into STRICT	nr_sequencia_w

	from	prescr_gasoterapia

	where	nr_sequencia = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p = 25412) then

	begin

	select	max(nr_seq_assinatura)

	into STRICT	nr_sequencia_w

	from	prescr_solic_bco_sangue

	where	nr_sequencia = nr_sequencia_p;



	--if	(nr_sequencia_w is null) then
		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	prescr_procedimento

		where	nr_seq_interno = nr_sequencia_p;

	--end if;
	end;

elsif (nr_seq_proj_ass_p = 25413) then

	begin

	
	select	max(nr_seq_assinatura),
			max(nr_seq_rec_cpoe)
	into STRICT	nr_sequencia_w,
			nr_seq_cpoe_w
	from	prescr_recomendacao
	where	nr_seq_interno = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p in (25414,25415)) then

	begin

	select	max(nr_seq_assinatura),
			max(nr_seq_dialise_cpoe)
	into STRICT	nr_sequencia_w,
			nr_seq_cpoe_w
	from	hd_prescricao
	where	nr_sequencia = nr_sequencia_p;

	end;

elsif (nr_seq_proj_ass_p in (43058,43057,44280,44284)) then

	begin

	if (nr_seq_proj_ass_p	in (43057,44284)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_descricao

		where	nr_sequencia = nr_sequencia_p;

	elsif (nr_seq_proj_ass_p	in (43058,44280)) then

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_descricao

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (49782, 51688)) then

	begin

	
	if (nr_seq_proj_ass_p	= 51688) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	paciente_transfusao

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	paciente_transfusao

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50152,50153)) then

	begin

	if (nr_seq_proj_ass_p	= 50152) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cur_ferida

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cur_ferida

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50173,50172,50833,50834)) then

	begin

	if (nr_seq_proj_ass_p	in (50172,50833)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	med_receita

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	med_receita

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50193,50192)) then

	begin

	if (nr_seq_proj_ass_p	= 50192) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	PRESCR_PROCED_INF_ADIC

		where	nr_sequencia = nr_sequencia_p;



	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	PRESCR_PROCED_INF_ADIC

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50332,50333)) then

	begin

	if (nr_seq_proj_ass_p	= 50332) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	posicao_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	posicao_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50334,50335)) then

	begin

	if (nr_seq_proj_ass_p	= 50334) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	pepo_pele

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	pepo_pele

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50336,50337)) then

	begin

	if (nr_seq_proj_ass_p	= 50336) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	incisao_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	incisao_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50338,50339,52049,52048)) then

	begin

	if (nr_seq_proj_ass_p	in ( 50338,52049)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	pepo_curativo

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	pepo_curativo

		where	nr_sequencia = nr_sequencia_p;

	end if;

	end;

elsif (nr_seq_proj_ass_p in (50472,50473)) then

	if (nr_seq_proj_ass_p	= 50472) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cur_curativo

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cur_curativo

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50492,50493)) then

	if (nr_seq_proj_ass_p	= 50492) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	CUR_EVOLUCAO

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	CUR_EVOLUCAO

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50613,50615,52069,52071)) then

	if (nr_seq_proj_ass_p	in ( 50613,52071)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atend_aval_srpa

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atend_aval_srpa

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50633,50632)) then

	if (nr_seq_proj_ass_p	= 50632) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atendimento_boletim

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atendimento_boletim

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50658,50654,51849,51850)) then

	if (nr_seq_proj_ass_p	in (50658,51849)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_aldrete

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_aldrete

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (52168,52169)) then

	if (nr_seq_proj_ass_p	= 52169 ) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_chung

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_chung

		where	nr_sequencia = nr_sequencia_p;

	end if;

ELSIF (nr_seq_proj_ass_p IN (52129,52130)) THEN

	IF (nr_seq_proj_ass_p	= 52129) THEN

		SELECT	MAX(nr_seq_assinatura)

		INTO STRICT	nr_sequencia_w

		FROM	escala_possum

		WHERE	nr_sequencia = nr_sequencia_p;

	ELSE

		SELECT	MAX(nr_seq_assinat_inativacao)

		INTO STRICT	nr_sequencia_w

		FROM	escala_possum

		WHERE	nr_sequencia = nr_sequencia_p;

	END IF;	

elsif (nr_seq_proj_ass_p in (50653,50652)) then

	if (nr_seq_proj_ass_p	= 50653) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_stewart

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_stewart

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50672,50673,52149,52150)) then

	if (nr_seq_proj_ass_p	IN ( 50672,52149)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	med_avaliacao_paciente

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	med_avaliacao_paciente

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50692,50693)) then

	if (nr_seq_proj_ass_p	= 50692) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	pep_med_fatur

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	pep_med_fatur

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50713,50714)) then

	if (nr_seq_proj_ass_p	= 50713) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	can_loco_regional

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	can_loco_regional

		where	nr_sequencia = nr_sequencia_p;

	end if;
	
elsif (nr_seq_proj_ass_p in (53713,53714)) then

	if (nr_seq_proj_ass_p	= 53713) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_mews

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_mews

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50715,50716)) then

	if (nr_seq_proj_ass_p	= 50715) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	pe_prescricao

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	pe_prescricao

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50718,50719)) then

	if (nr_seq_proj_ass_p	= 50718) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	med_avaliacao_paciente

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	med_avaliacao_paciente

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50721,50722)) then

	if (nr_seq_proj_ass_p	= 50721) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	PARECER_MEDICO_REQ

		where	nr_parecer = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	PARECER_MEDICO_REQ

		where	nr_parecer = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50724,50723)) then

	if (nr_seq_proj_ass_p	= 50723) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	PARECER_MEDICO

		where	nr_seq_interno = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	PARECER_MEDICO

		where	nr_seq_interno = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50752,50753,51928,51929)) then

	if (nr_seq_proj_ass_p	in ( 50752,51928)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	qua_evento_paciente

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	qua_evento_paciente

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50772,50773)) then

	if (nr_seq_proj_ass_p	= 50772) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atendimento_gravidez

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atendimento_gravidez

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50792,50793,53399,53400)) then

	if (nr_seq_proj_ass_p	in (50792,53399)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_participante

		where	nr_seq_interno = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_participante

		where	nr_seq_interno = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (52008,52010)) then

	if (nr_seq_proj_ass_p	= 52010) then

		select	max(NR_SEQ_ASSINATURA)

		into STRICT	nr_sequencia_w

		from	pepo_participante

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(NR_SEQ_ASSINAT_INATIVACAO)

		into STRICT	nr_sequencia_w

		from	pepo_participante

		where	nr_sequencia = nr_sequencia_p;

	end if;	

elsif (nr_seq_proj_ass_p in (50814,50815)) then
	
	if (nr_seq_proj_ass_p	= 50814) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atestado_paciente

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atestado_paciente

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50852,50854,51950,51951)) then

	if (nr_seq_proj_ass_p	in ( 50852,51951)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	equipamento_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	equipamento_cirurgia

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50872,50873)) then

	if (nr_seq_proj_ass_p	= 50872) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_justi_cavidade

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_justi_cavidade

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50912,50913)) then

	if (nr_seq_proj_ass_p	= 50912) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_tempo_atraso

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_tempo_atraso

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50933,50934)) then

	if (nr_seq_proj_ass_p	= 50933) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	w_resumo_agente

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	w_resumo_agente

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50952,50953)) then

	if (nr_seq_proj_ass_p	= 50952) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cm_conjunto_cont

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cm_conjunto_cont

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50972,50973,52108,52109)) then

	if (nr_seq_proj_ass_p in ( 50972,52109)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	evento_cirurgia_paciente

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	evento_cirurgia_paciente

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (50992,50993)) then

	if (nr_seq_proj_ass_p	= 50992) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_item_controle

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_item_controle

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51032,51033)) then

	if (nr_seq_proj_ass_p	= 51032) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	pep_orientacao_geral

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	pep_orientacao_geral

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51053,51052)) then

	if (nr_seq_proj_ass_p	= 51053) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	atendimento_ambulatorial

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	atendimento_ambulatorial

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51072,51073)) then

	if (nr_seq_proj_ass_p	= 51072) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	PACIENTE_SETOR_LIB

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	PACIENTE_SETOR_LIB

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51092,51095,51097,51099,51101,51094,51096,51098,51100,51102,52208,52209,52228,52229,52288,52289,52308,52309,52348,52349)) then

	if (nr_seq_proj_ass_p	in (51092,51095,51097,51099,51101,52209,52228,52288,52309,52348)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_agente_anestesico

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_agente_anestesico

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51112,51114,51116,51118,51113,51115,51117,51119,52248,52250,52269,52270,52328,52329)) then

	if (nr_seq_proj_ass_p	in (51112,51114,51116,51118,52250,52269,52329)) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	cirurgia_agente_anest_ocor

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	cirurgia_agente_anest_ocor

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51132,51133)) then

	if (nr_seq_proj_ass_p	= 51132) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	ATEND_BIOIMPEDANCIA

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	ATEND_BIOIMPEDANCIA

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51153,51154)) then

	if (nr_seq_proj_ass_p	= 51153) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	ESCALA_NRS

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	ESCALA_NRS

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51172,51173)) then

	if (nr_seq_proj_ass_p	= 51172) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	AVAL_NUTRIC_SUBJETIVA

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	AVAL_NUTRIC_SUBJETIVA

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51193,51195)) then

	if (nr_seq_proj_ass_p	= 51193) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	ESCALA_TEV

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	ESCALA_TEV

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p in (51232,51233)) then

	if (nr_seq_proj_ass_p	= 51232) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	ESCALA_ASG_PPP

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	ESCALA_ASG_PPP

		where	nr_sequencia = nr_sequencia_p;

	end if;

elsif (nr_seq_proj_ass_p	= 51293) then

	select	max(nr_seq_assinatura)

	into STRICT	nr_sequencia_w

	from	PACIENTE_ATENDIMENTO

	where	nr_seq_atendimento = nr_sequencia_p;

elsif (nr_seq_proj_ass_p	= 51708) then

	select	max(nr_seq_assinat_inativacao)

	into STRICT	nr_sequencia_w

	from	PACIENTE_ATENDIMENTO

	where	nr_seq_atendimento = nr_sequencia_p;

	

elsif (nr_seq_proj_ass_p in (52510, 52511)) then

	if (nr_seq_proj_ass_p	=  52510) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	aval_pre_anestesica

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	aval_pre_anestesica

		where	nr_sequencia = nr_sequencia_p;

	end if;
elsif (nr_seq_proj_ass_p in (52789, 52790)) then

	if (nr_seq_proj_ass_p	=  52789) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	ehr_registro

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	ehr_registro

		where	nr_sequencia = nr_sequencia_p;

	end if;

	
elsif (nr_seq_proj_ass_p in (52512,  52513)) then

	if (nr_seq_proj_ass_p	=   52512) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_lee

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_lee

		where	nr_sequencia = nr_sequencia_p;

	end if;

	
elsif (nr_seq_proj_ass_p in (52514,  52515)) then

	if (nr_seq_proj_ass_p	=   52514) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_risco_pulmonar

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_risco_pulmonar

		where	nr_sequencia = nr_sequencia_p;

	end if;
elsif (nr_seq_proj_ass_p in (52516,  52517)) then

	if (nr_seq_proj_ass_p	=   52516) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_risco_insuf_renal

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_risco_insuf_renal

		where	nr_sequencia = nr_sequencia_p;

	end if;

	
elsif (nr_seq_proj_ass_p in (52518,  52519)) then

	if (nr_seq_proj_ass_p	=   52518) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	escala_child_pugh

		where	nr_sequencia = nr_sequencia_p;

	else

		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	escala_child_pugh

		where	nr_sequencia = nr_sequencia_p;

	end if;

	
elsif (nr_seq_proj_ass_p in (52828, 52988)) then

	if (nr_seq_proj_ass_p	=   52828) then

	
		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	hd_assinatura_digital

		where	nr_sequencia = nr_sequencia_p;
	else

	
		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	hd_assinatura_digital

		where	nr_sequencia = nr_sequencia_p;

	
	end if;

elsif (nr_seq_proj_ass_p = 53148) then

		select	max(nr_seq_assinatura)
		into STRICT	nr_sequencia_w
		from	sus_laudo_paciente
		where	nr_seq_interno = nr_sequencia_p;
		
elsif (nr_seq_proj_ass_p in (53693, 53694)) then -- Nascimento
	if (nr_seq_proj_ass_p = 53693) then

		select	max(nr_seq_assinatura)

		into STRICT	nr_sequencia_w

		from	nascimento

		where	nr_seq_interno = nr_sequencia_p;
	else

	
		select	max(nr_seq_assinat_inativacao)

		into STRICT	nr_sequencia_w

		from	nascimento

		where	nr_seq_interno = nr_sequencia_p;

	end if;
	
else



	begin



	select	nm_tabela,

		nm_atributo

	into STRICT	nm_tabela_w,

			nm_atributo_w

	from	TASY_PROJETO_ASSINATURA

	where	nr_sequencia	= nr_seq_proj_ass_p;





	if (nm_tabela_w IS NOT NULL AND nm_tabela_w::text <> '') and (nm_atributo_w IS NOT NULL AND nm_atributo_w::text <> '') then



		ds_comando_w	:= 'select	'||nm_atributo_w||

							' from	'||nm_tabela_w||

							' where nr_sequencia = :nr_sequencia ';



		ds_parametros_w	:= 'nr_sequencia='||nr_sequencia_p||ds_separador_bv_w;



		nr_sequencia_w := Obter_valor_Dinamico_bv(ds_comando_w, ds_parametros_w, nr_sequencia_w);

		if (nr_sequencia_w	= 0) then

			nr_sequencia_w	:= null;

		end if;





	end if;







	end;



end if;



if (coalesce(nr_sequencia_w::text, '') = '') then

	begin

	ie_nova_assinat_p := 'S';





	select	nextval('tasy_assinatura_digital_seq')

	into STRICT	nr_sequencia_w

	;





	select	max(nr_seq_relatorio)

	into STRICT	nr_seq_relat_w

	from	tasy_projeto_assinatura

	where	nr_sequencia	= nr_seq_proj_ass_p;



	if (nr_seq_relat_w IS NOT NULL AND nr_seq_relat_w::text <> '') then

		select	max(cd_relatorio),

				max(cd_classif_relat)

		into STRICT	cd_relatorio_w,

			cd_classif_relat_w

		from	relatorio

		where	nr_sequencia = nr_seq_relat_w;

	end if;





	insert into tasy_assinatura_digital(

		nr_sequencia,

		ds_assinatura,

		cd_pessoa_fisica,

		ds_hash_assinatura,

		nr_seq_proj_ass,

		nr_seq_proj_xml,

		dt_atualizacao,

		nm_usuario,

		dt_atualizacao_nrec,

		nm_usuario_nrec,

		dt_registro,

		cd_classif_relat,

		cd_relatorio)

	values (

		nr_sequencia_w,

		ds_assinatura_p,

		cd_pessoa_fisica_p,

		ds_hash_assinatura_p,

		nr_seq_proj_ass_p,

		nr_seq_proj_xml_p,

		clock_timestamp(),

		nm_usuario_p,

		clock_timestamp(),

		nm_usuario_p,

		clock_timestamp(),

		cd_classif_relat_w,

		cd_relatorio_w);

	if (nr_seq_proj_ass_p in (1,25272,50213,50215, 51729,51730)) then

		begin

		if (nr_seq_proj_ass_p = 50213) then

			update	prescr_medica

			set	nr_seq_assinatura_farm 	= nr_sequencia_w

			where	nr_prescricao 		= nr_sequencia_p;

		elsif	((nr_seq_proj_ass_p = 50215) OR (nr_seq_proj_ass_p = 51730)) then

			update	prescr_medica

			set	nr_seq_assinatura_enf 	= nr_sequencia_w

			where	nr_prescricao 		= nr_sequencia_p;

		else

			update	prescr_medica
			set	nr_seq_assinatura 	= nr_sequencia_w
			where	nr_prescricao 		= nr_sequencia_p;		


			
			
			/*update	cpoe_dieta
			set		nr_seq_assinatura	= nr_sequencia_w
			where	nr_prescricao		= nr_sequencia_p;

			
			update	cpoe_material
			set		nr_seq_assinatura	= nr_sequencia_w
			where	nr_prescricao		= nr_sequencia_p;

			
			update	cpoe_procedimento
			set		nr_seq_assinatura	= nr_sequencia_w
			where	nr_prescricao		= nr_sequencia_p;

			
			update	cpoe_recomendacao
			set		nr_seq_assinatura	= nr_sequencia_w
			where	nr_prescricao		= nr_sequencia_p;

			
			update	cpoe_gasoterapia
			set		nr_seq_assinatura	= nr_sequencia_w
			where	nr_prescricao		= nr_sequencia_p;

			
			update	cpoe_hemoterapia
			set		nr_seq_assinatura	= nr_sequencia_w
			where	nr_prescricao		= nr_sequencia_p;

			
			update	cpoe_dialise
			set		nr_seq_assinatura	= nr_sequencia_w
			where	nr_prescricao		= nr_sequencia_p;
			*/
			
		end if;

		end;

    elsif (nr_seq_proj_ass_p in (51590,51608)) then

        begin

        if (nr_seq_proj_ass_p = 51590) then

            update  paciente_atend_anot

            set     nr_seq_assinatura = nr_sequencia_w

            where	nr_sequencia = nr_sequencia_p;

        elsif (nr_seq_proj_ass_p = 51608) then

            update  paciente_atend_anot

            set     nr_seq_assinat_inativacao = nr_sequencia_w

            where	nr_sequencia = nr_sequencia_p;

        end if;

        end;

		
	elsif (nr_seq_proj_ass_p in (51352,51353)) then

		begin

		if (nr_seq_proj_ass_p = 51352) then

			update	gca_atendimento

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia		= nr_sequencia_p;

		else

			update	gca_atendimento

			set	NR_SEQ_ASSINAT_INATIVACAO = nr_sequencia_w

			where	nr_sequencia		  = nr_sequencia_p;

		end if;

		end;		

    elsif (nr_seq_proj_ass_p in (51630, 51631)) then

        begin

        if (nr_seq_proj_ass_p = 51630) then

            update  paciente_atend_interc

            set     nr_seq_assinatura = nr_sequencia_w

            where	nr_sequencia = nr_sequencia_p;

        elsif (nr_seq_proj_ass_p = 51631) then

            update  paciente_atend_interc

            set     nr_seq_assinat_inativacao = nr_sequencia_w

            where	nr_sequencia = nr_sequencia_p;

        end if;

        end;

    elsif (nr_seq_proj_ass_p = 51648) then

        begin

        update  paciente_atend_medic

        set     nr_seq_assinatura         = nr_sequencia_w

        where	nr_seq_interno        = nr_sequencia_p;

        end;

	elsif (nr_seq_proj_ass_p in (36673,36671,52448,52449)) then

		begin

		if (nr_seq_proj_ass_p	in ( 36671,52449)) then

			update	atendimento_perda_ganho

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia		= nr_sequencia_p;



		else

			update	atendimento_perda_ganho

			set	NR_SEQ_ASSINAT_INATIVACAO = nr_sequencia_w

			where	nr_sequencia		  = nr_sequencia_p;

		end if;



		select	max(nr_atendimento),

			max(obter_pessoa_atendimento(nr_atendimento,'C'))

		into STRICT	nr_atendimento_w,

			cd_pessoa_fisica_w

		from	ATENDIMENTO_PERDA_GANHO

		where	nr_sequencia	= nr_sequencia_W;



		--Gerar_registro_pendente_PEP('XGP', nr_sequencia_p ,cd_pessoa_fisica_w, nr_atendimento_w, nm_usuario_p,'A');
		end;

	elsif (nr_seq_proj_ass_p in (183, 25230, 51888, 51889, 53486, 53488)) then

		begin

		if (nr_seq_proj_ass_p in (183, 51889, 53486)) then

			update	evolucao_paciente

			set	nr_seq_assinatura = nr_sequencia_w

			where	cd_evolucao = nr_sequencia_p;

		else

			update	evolucao_paciente

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	cd_evolucao = nr_sequencia_p;



		end if;



		select	max(nr_atendimento),

			max(cd_pessoa_fisica)

		into STRICT	nr_atendimento_w,

			cd_pessoa_fisica_w

		from	evolucao_paciente

		where	cd_evolucao	= nr_sequencia_p;



		--Gerar_registro_pendente_PEP('XE', nr_sequencia_p ,cd_pessoa_fisica_w, nr_atendimento_w, nm_usuario_p,'A');
		end;


		
	
	elsif (nr_seq_proj_ass_p in (53495, 53496)) then

		begin

		if (nr_seq_proj_ass_p in (53495)) then

			update	cih_pac_fat_risco

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	cih_pac_fat_risco

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;


		select	max(nr_atendimento),

			max(cd_pessoa_fisica)

		into STRICT	nr_atendimento_w,

			cd_pessoa_fisica_w

		from	cih_pac_fat_risco

		where	nr_sequencia = nr_sequencia_p;



		end;	
	

	elsif (nr_seq_proj_ass_p in (184,25231,52428,52429)) then

		begin

		if (nr_seq_proj_ass_p	IN ( 184,52429)) then

			update	atendimento_sinal_vital

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	atendimento_sinal_vital

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		select	max(nr_atendimento),

			max(cd_paciente)

		into STRICT	nr_atendimento_w,

			cd_pessoa_fisica_w

		from	atendimento_sinal_vital

		where	nr_sequencia	= nr_sequencia_p;



		--Gerar_registro_pendente_PEP('XSV', nr_sequencia_p ,cd_pessoa_fisica_w, nr_atendimento_w, nm_usuario_p,'A');
		end;

	elsif (nr_seq_proj_ass_p in (25170,25242)) then

		begin

		if (nr_seq_proj_ass_p	= 25170) then

			update	atend_anal_bioq_port

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	atend_anal_bioq_port

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25172,25233)) then

		begin

		if (nr_seq_proj_ass_p	= 25172) then

			update	anamnese_paciente

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	anamnese_paciente

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;



		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25173,25232,52688,52689)) then

		begin

		if (nr_seq_proj_ass_p	in (25173,52688)) then

			update	diagnostico_doenca

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_seq_interno = nr_sequencia_p;

		else

			update	diagnostico_doenca

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_seq_interno = nr_sequencia_p;



		end if;
		
		end;

	elsif (nr_seq_proj_ass_p in (25174,25246)) then

		begin

		if (nr_seq_proj_ass_p	= 25174) then

			update	paciente_acessorio

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	paciente_acessorio

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25175,25235)) then

		begin

		if (nr_seq_proj_ass_p	= 25175) then

			update	paciente_alergia

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	paciente_alergia

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;



		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25176,25238)) then

		begin

		if (nr_seq_proj_ass_p	= 25176) then

			update	historico_saude_cirurgia

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	historico_saude_cirurgia

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25177,25234)) then

		begin

		if (nr_seq_proj_ass_p	= 25177) then

			update	paciente_antec_clinico

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p

			and	coalesce(ie_paciente,'S') = 'S';

		else

			update	paciente_antec_clinico

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p

			and	coalesce(ie_paciente,'S') = 'S';

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25178,25236)) then

		begin

		if (nr_seq_proj_ass_p	= 25178) then

			update	paciente_habito_vicio

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	paciente_habito_vicio

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25179,25247)) then

		begin

		if (nr_seq_proj_ass_p	= 25179) then

			update	paciente_antec_clinico

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p

			and	coalesce(ie_paciente,'S') = 'N';

		else

			update	paciente_antec_clinico

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p

			and	coalesce(ie_paciente,'S') = 'N';

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25180,25237)) then

		begin

		if (nr_seq_proj_ass_p	= 25180) then

			update	paciente_medic_uso

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	paciente_medic_uso

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25181,25244)) then

		begin

		if (nr_seq_proj_ass_p	= 25181)then

			update	paciente_ocorrencia

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	paciente_ocorrencia

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25182,25245)) then

		begin

		if (nr_seq_proj_ass_p	= 25182) then

			update	paciente_rep_prescricao

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	paciente_rep_prescricao

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;



		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25183,25241,51908,51909)) then

		begin

		if (nr_seq_proj_ass_p in (25183,51909)) then

			update	atend_aval_analgesia

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	atend_aval_analgesia

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;



		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25184,25240)) then

		begin

		if (nr_seq_proj_ass_p	= 25184) then

			update	atend_monit_hemod

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	atend_monit_hemod

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25185,25239,52408,52409)) then

		begin

		if (nr_seq_proj_ass_p	IN ( 25185,52408)) then

			update	atendimento_monit_resp

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	atendimento_monit_resp

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25186,25243,50733,50734)) then

		begin

		if (nr_seq_proj_ass_p	in (25186,50733)) then

			update	atendimento_alta

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	atendimento_alta

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25187,25248,52188,52189)) then

		begin

		if (nr_seq_proj_ass_p	in ( 25187,52189)) then

			update	ehr_registro

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	ehr_registro

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (25191,50413,51212,51214,52928,52929)) then

		begin

		if (nr_seq_proj_ass_p in (25191,51212,52928)) then

			begin

			update	laudo_paciente

			set	nr_seq_assinatura = nr_sequencia_w,
			
				nr_seq_assinat_inativacao  = NULL

			where	nr_sequencia = nr_sequencia_p;

			end;

		else

			begin

			update	laudo_paciente

			set	nr_seq_assinat_inativacao = nr_sequencia_w,
			
				nr_seq_assinatura  = NULL
		
			where	nr_sequencia = nr_sequencia_p;

			end;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (52948, 52949)) then
      if (nr_seq_proj_ass_p in (52948)) then
        update	laudo_paciente
        set	nr_seq_seg_assinatura = nr_sequencia_w,
		nr_seq_seg_assinat_inativacao  = NULL
        where	nr_sequencia = nr_sequencia_p;
      else
        update	laudo_paciente
        set	nr_seq_seg_assinat_inativacao = nr_sequencia_w,
		nr_seq_seg_assinatura  = NULL 
        where	nr_sequencia = nr_sequencia_p;
      end if;
  elsif (nr_seq_proj_ass_p in (25290,25291,50726,50727,52703,52704)) then

		begin

		if (nr_seq_proj_ass_p in (25290,50726,52703)) then

			update	pe_prescricao

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		else

			update	pe_prescricao

			set	nr_seq_assinat_inativacao = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		end if;

		select	max(nr_atendimento),

			max(cd_pessoa_fisica)

		into STRICT	nr_atendimento_w,

			cd_pessoa_fisica_w

		from	pe_prescricao

		where	nr_sequencia	= nr_sequencia_p;



		--Gerar_registro_pendente_PEP('XSAE', nr_sequencia_p ,cd_pessoa_fisica_w, nr_atendimento_w, nm_usuario_p,'A');
		end;

	elsif (nr_seq_proj_ass_p = 25396) then

		begin

		update	prescr_dieta
		set	nr_seq_assinatura = nr_sequencia_w
		where	nr_seq_interno = nr_sequencia_p;

		
		update	cpoe_dieta
		set		nr_seq_assinatura_susp	= nr_sequencia_w
		where	nr_sequencia 			= nr_seq_cpoe_w;

		end;

	elsif (nr_seq_proj_ass_p = 25397) then

		begin

		update	rep_jejum
		set	nr_seq_assinatura = nr_sequencia_w
		where	nr_sequencia = nr_sequencia_p;

		
		update	cpoe_dieta
		set		nr_seq_assinatura_susp	= nr_sequencia_w
		where	nr_sequencia 			= nr_seq_cpoe_w;

		end;

	elsif (nr_seq_proj_ass_p in (25398,25399,25406,25407,31324,31325)) then

		begin

		if (nr_seq_proj_ass_p = 31324) then

			update	prescr_material

			set	nr_seq_assin_apraza 	= nr_sequencia_w

			where	nr_seq_interno 		= nr_sequencia_p;

		elsif (nr_seq_proj_ass_p = 31325) then

			update	prescr_material

			set	nr_seq_assin_prim_hor 	= nr_sequencia_w

			where	nr_seq_interno 		= nr_sequencia_p;

			
		elsif (nr_seq_proj_ass_p in (25398, 25399)) then

			
			update	prescr_material
			set	nr_seq_assinatura_susp 	= nr_sequencia_w
			where	nr_seq_interno 		= nr_sequencia_p;

			
			update	cpoe_dieta
			set		nr_seq_assinatura_susp	= nr_sequencia_w
			where	nr_sequencia 			= nr_seq_cpoe_w;

		elsif (nr_seq_proj_ass_p in (25406, 25407)) then

			update	prescr_material
			set	nr_seq_assinatura_susp 	= nr_sequencia_w
			where	nr_seq_interno 		= nr_sequencia_p;

			
			update	cpoe_material
			set		nr_seq_assinatura_susp	= nr_sequencia_w
			where	nr_sequencia 			= nr_seq_cpoe_w;

		else

			update	prescr_material

			set	nr_seq_assinatura 	= nr_sequencia_w

			where	nr_seq_interno 		= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p = 25401) then

		begin

		update	nut_paciente

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_sequencia = nr_sequencia_p;

		end;

	elsif (nr_seq_proj_ass_p = 25403) then

		begin

		update	nut_pac

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_sequencia = nr_sequencia_p;

		end;

	elsif (nr_seq_proj_ass_p = 25405) then

		begin

		update	prescr_solucao

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_seq_interno = nr_sequencia_p;

		
		update	cpoe_material
		set		nr_seq_assinatura_susp	= nr_sequencia_w
		where	nr_sequencia 			= nr_seq_cpoe_w;		

		end;

	elsif (nr_seq_proj_ass_p in (25408,25409,25410)) then

		begin

		update	prescr_procedimento
		set	nr_seq_assinatura = nr_sequencia_w
		where	nr_seq_interno = nr_sequencia_p;

		
		update	cpoe_procedimento
		set		nr_seq_assinatura_susp	= nr_sequencia_w
		where	nr_sequencia 			= nr_seq_cpoe_w;

		end;

	elsif (nr_seq_proj_ass_p = 25411) then

		begin

		update	prescr_gasoterapia

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_sequencia = nr_sequencia_p;

		
		update	cpoe_gasoterapia
		set		nr_seq_assinatura_susp	= nr_sequencia_w
		where	nr_sequencia 			= nr_sequencia_p;

		end;

	elsif (nr_seq_proj_ass_p = 25412) then

		begin

		update	prescr_solic_bco_sangue

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_sequencia = nr_sequencia_p;



		update	prescr_procedimento

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_seq_solic_sangue = nr_sequencia_p;



		end;

	elsif (nr_seq_proj_ass_p = 25413) then

		begin

		update	prescr_recomendacao

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_seq_interno = nr_sequencia_p;

		
		update	cpoe_recomendacao
		set		nr_seq_assinatura_susp	= nr_sequencia_w
		where	nr_sequencia 			= nr_seq_cpoe_w;		

		end;

	elsif (nr_seq_proj_ass_p in (25414,25415)) then

		begin

		update	hd_prescricao

		set	nr_seq_assinatura = nr_sequencia_w

		where	nr_sequencia = nr_sequencia_p;

		
		update	cpoe_dialise
		set		nr_seq_assinatura_susp	= nr_sequencia_w
		where	nr_sequencia 			= nr_seq_cpoe_w;

		end;

	elsif (nr_seq_proj_ass_p in (43058,43057,44280,44284)) then

		begin

		if (nr_seq_proj_ass_p	in (43057,44284)) then

			update	cirurgia_descricao

			set	nr_seq_assinatura = nr_sequencia_w

			where	nr_sequencia = nr_sequencia_p;

		elsif (nr_seq_proj_ass_p	in (43058,44280)) then

			update	cirurgia_descricao

			set	nr_seq_assinat_inativacao 	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (44466,44467,52388,52389)) then

		begin

		if (nr_seq_proj_ass_p IN ( 44466,52389)) then

			update	cirurgia_tec_anestesica

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		elsif (nr_seq_proj_ass_p in ( 44467,52388)) then

			update	cirurgia_tec_anestesica

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (44469,44470,52368,52369)) then

		begin

		if (nr_seq_proj_ass_p in ( 44469,52368)) then

			update	anestesia_descricao

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		elsif (nr_seq_proj_ass_p in ( 44470,52369)) then

			update	anestesia_descricao

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (49782, 51688)) then

		begin

		
		if (nr_seq_proj_ass_p	= 51688)  then

			update	paciente_transfusao

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

		
			update	paciente_transfusao

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		end if;

		
		end;



	elsif (nr_seq_proj_ass_p in (50152,50153)) then

		begin

		if (nr_seq_proj_ass_p	= 50152)  then

			update	cur_ferida

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cur_ferida

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50173,50172,50833,50834)) then

		begin

		if (nr_seq_proj_ass_p	in (50172,50833)) then

			update	med_receita

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	med_receita

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50193,50192)) then

		begin

		if (nr_seq_proj_ass_p	= 50192) then



			update	PRESCR_PROCED_INF_ADIC

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else



			update	PRESCR_PROCED_INF_ADIC

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;



		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50332,50333)) then

		begin

		if (nr_seq_proj_ass_p	= 50332) then

			update	posicao_cirurgia

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	posicao_cirurgia

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50334,50335)) then

		begin

		if (nr_seq_proj_ass_p	= 50334) then

			update	pepo_pele

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	pepo_pele

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50336,50337)) then

		begin

		if (nr_seq_proj_ass_p	= 50336) then

			update	incisao_cirurgia

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	incisao_cirurgia

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50338,50339,52048,52049)) then

		begin

		if (nr_seq_proj_ass_p	in ( 50338,52049)) then

			update	pepo_curativo

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	pepo_curativo

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50472,50473)) then

		begin

		if (nr_seq_proj_ass_p	= 50472) then

			update	cur_curativo

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cur_curativo

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50492,50493)) then

		begin

		if (nr_seq_proj_ass_p	= 50492) then

			update	CUR_EVOLUCAO

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	CUR_EVOLUCAO

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		end;

	elsif (nr_seq_proj_ass_p in (50613,50615,52069,52071)) then

		if (nr_seq_proj_ass_p	in ( 50613,52071)) then

			update	atend_aval_srpa

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	atend_aval_srpa

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50633,50632)) then

		if (nr_seq_proj_ass_p	= 50632) then

			update	atendimento_boletim

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	atendimento_boletim

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50658,50654,51850,51849)) then

		if (nr_seq_proj_ass_p	in ( 50658,51849)) then

			update	escala_aldrete

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	escala_aldrete

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (52168,52169)) then

		if (nr_seq_proj_ass_p	= 52169 ) then

			update	escala_chung

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	escala_chung

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;	

	ELSIF (nr_seq_proj_ass_p IN (52129,52130)) THEN

		IF (nr_seq_proj_ass_p	= 52129) THEN

			UPDATE	escala_possum

			SET	nr_seq_assinatura	= nr_sequencia_w

			WHERE	nr_sequencia 		= nr_sequencia_p;

		ELSE

			UPDATE	escala_possum

			SET	nr_seq_assinat_inativacao	= nr_sequencia_w

			WHERE	nr_sequencia 			= nr_sequencia_p;

		END IF;	

	elsif (nr_seq_proj_ass_p in (50653,50652)) then

		if (nr_seq_proj_ass_p	= 50653) then

			update	escala_stewart

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	escala_stewart

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50672,50673,52149,52150)) then

		if (nr_seq_proj_ass_p	IN ( 50672,52149)) then

			update	med_avaliacao_paciente

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	med_avaliacao_paciente

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50692,50693,53450,53451)) then

		if (nr_seq_proj_ass_p	in (50692,53450)) then

			update	pep_med_fatur

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	pep_med_fatur

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50713,50714)) then

		if (nr_seq_proj_ass_p	= 50713) then

			update	can_loco_regional

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	can_loco_regional

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50715,50716)) then

		if (nr_seq_proj_ass_p	= 50715) then

			update	pe_prescricao

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	pe_prescricao

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50718,50719)) then

		if (nr_seq_proj_ass_p	= 50718) then

			update	med_avaliacao_paciente

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	med_avaliacao_paciente

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50721,50722)) then

		if (nr_seq_proj_ass_p	= 50721) then

			update	PARECER_MEDICO_REQ

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_parecer 		= nr_sequencia_p;

		else

			update	PARECER_MEDICO_REQ

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_parecer 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50723,50724)) then

		if (nr_seq_proj_ass_p	= 50723) then

			update	PARECER_MEDICO

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_seq_interno 	= nr_sequencia_p;

		else

			update	PARECER_MEDICO

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_seq_interno 	= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50752,50753,51928,51929)) then

		if (nr_seq_proj_ass_p	in ( 50752,51928)) then

			update	qua_evento_paciente

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	qua_evento_paciente

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50772,50773)) then

		if (nr_seq_proj_ass_p	= 50772) then

			update	atendimento_gravidez

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	atendimento_gravidez

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50792,50793,53399,53400)) then

		if (nr_seq_proj_ass_p in (50792,53399)) then

			update	cirurgia_participante

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_seq_interno 		= nr_sequencia_p;

		else

			update	cirurgia_participante

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_seq_interno 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (52008,52010)) then

		if (nr_seq_proj_ass_p	= 52010) then

			update	pepo_participante

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	pepo_participante

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;		

	elsif (nr_seq_proj_ass_p in (50814,50815)) then

		if (nr_seq_proj_ass_p	= 50814) then

			update	atestado_paciente

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	atestado_paciente

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50852,50854,51950,51951)) then

		if (nr_seq_proj_ass_p	in ( 50852,51951)) then

			update	equipamento_cirurgia

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	equipamento_cirurgia

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50872,50873)) then

		if (nr_seq_proj_ass_p	= 50872) then

			update	cirurgia_justi_cavidade

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cirurgia_justi_cavidade

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50912,50913)) then

		if (nr_seq_proj_ass_p	= 50912) then

			update	cirurgia_tempo_atraso

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cirurgia_tempo_atraso

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50933,50934)) then

		if (nr_seq_proj_ass_p	= 50933) then

			update	w_resumo_agente

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	w_resumo_agente

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50952,50953)) then

		if (nr_seq_proj_ass_p	= 50952) then

			update	cm_conjunto_cont

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cm_conjunto_cont

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50972,50973,52108,52109)) then

		if (nr_seq_proj_ass_p	in ( 50972,52109)) then

			update	evento_cirurgia_paciente

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	evento_cirurgia_paciente

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (50992,50993)) then

		if (nr_seq_proj_ass_p	= 50992) then

			update	cirurgia_item_controle

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cirurgia_item_controle

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51032,51033)) then

		if (nr_seq_proj_ass_p	= 51032) then

			update	PEP_ORIENTACAO_GERAL

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	PEP_ORIENTACAO_GERAL

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51053,51052)) then

		if (nr_seq_proj_ass_p	= 51053) then

			update	atendimento_ambulatorial

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	atendimento_ambulatorial

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51073,51072)) then

		if (nr_seq_proj_ass_p	= 51072) then

			update	PACIENTE_SETOR_LIB

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	PACIENTE_SETOR_LIB

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51092,51095,51097,51099,51101,51094,51096,51098,51100,51102,52208,52209,52228,52229,52288,52289,52308,52309,52348,52349)) then

		if (nr_seq_proj_ass_p	in (51092,51095,51097,51099,51101,52209,52228,52288,52309,52348)) then

			update	cirurgia_agente_anestesico

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cirurgia_agente_anestesico

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51112,51114,51116,51118,51113,51115,51117,51119,52248,52250,52269,52270,52328,52329)) then

		if (nr_seq_proj_ass_p	in (51112,51114,51116,51118,52250,52269,52329)) then

			update	cirurgia_agente_anest_ocor

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	cirurgia_agente_anest_ocor

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51132,51133)) then

		if (nr_seq_proj_ass_p	= 51132) then

			update	ATEND_BIOIMPEDANCIA

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	ATEND_BIOIMPEDANCIA

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51153,51154)) then

		if (nr_seq_proj_ass_p	= 51153) then

			update	ESCALA_NRS

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	ESCALA_NRS

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51172,51173)) then

		if (nr_seq_proj_ass_p	= 51172) then

			update	AVAL_NUTRIC_SUBJETIVA

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	AVAL_NUTRIC_SUBJETIVA

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51193,51195)) then

		if (nr_seq_proj_ass_p	= 51193) then

			update	ESCALA_TEV

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	ESCALA_TEV

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p in (51232,51233)) then

		if (nr_seq_proj_ass_p	= 51232) then

			update	ESCALA_ASG_PPP

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	ESCALA_ASG_PPP

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

	elsif (nr_seq_proj_ass_p	= 51293) then

		update	PACIENTE_ATENDIMENTO

		set	nr_seq_assinatura	= nr_sequencia_w

		where	nr_seq_atendimento 	= nr_sequencia_p;

	elsif (nr_seq_proj_ass_p	= 51708) then

		update	PACIENTE_ATENDIMENTO

		set		nr_seq_assinat_inativacao = nr_sequencia_w

		where	nr_seq_atendimento 	= nr_sequencia_p;

	elsif (nr_seq_proj_ass_p	= 51552) then

		update	FA_RECEITA_FARMACIA

		set	nr_seq_assinatura_parcial	= nr_sequencia_w

		where	nr_sequencia 	= nr_sequencia_p;

		
	elsif (nr_seq_proj_ass_p in (52510 ,52511)) then

		if (nr_seq_proj_ass_p	= 52510) then

			update	aval_pre_anestesica

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	aval_pre_anestesica

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		
		elsif (nr_seq_proj_ass_p in (52510 ,52511)) then

		if (nr_seq_proj_ass_p	= 52510) then

			update	aval_pre_anestesica

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	aval_pre_anestesica

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;	
	elsif (nr_seq_proj_ass_p in (52789 ,52790)) then

		if (nr_seq_proj_ass_p	= 52789) then

			update	ehr_registro

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	ehr_registro

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;
	elsif (nr_seq_proj_ass_p in (52514 ,52515)) then

		if (nr_seq_proj_ass_p	= 52514) then

			update	escala_risco_pulmonar

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	escala_risco_pulmonar

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;
	elsif (nr_seq_proj_ass_p in (52516 ,52517)) then

		if (nr_seq_proj_ass_p	= 52516) then

			update	escala_risco_insuf_renal

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	escala_risco_insuf_renal

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;
	elsif (nr_seq_proj_ass_p in (52518 ,52519)) then

		if (nr_seq_proj_ass_p	= 52518) then

			update	escala_child_pugh

			set	nr_seq_assinatura	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;

		else

			update	escala_child_pugh

			set	nr_seq_assinat_inativacao	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;

		end if;

		
	elsif (nr_seq_proj_ass_p in (52828, 52988)) then

		if (nr_seq_proj_ass_p	= 52828) then

			update	hd_assinatura_digital

			set	nr_seq_assinatura 	= nr_sequencia_w

			where	nr_sequencia 		= nr_sequencia_p;
			
			select	max(nr_seq_dialise)
				into STRICT 	nr_seq_dialise_w
			from 	hd_assinatura_digital
			where 	nr_sequencia = nr_sequencia_p;

			select	max(nr_atendimento)
				into STRICT	nr_atendimento_w
			from 	hd_dialise
			where 	nr_sequencia = nr_seq_dialise_w;
			
			if (nr_atendimento_w IS NOT NULL AND nr_atendimento_w::text <> '') then 
				delete 	FROM pep_item_pendente 
				where 	nr_atendimento = nr_atendimento_w
				and 	trunc(dt_registro) = trunc(clock_timestamp());
			end if;

		else

			update	hd_assinatura_digital

			set	nr_seq_assinat_inativacao 	= nr_sequencia_w

			where	nr_sequencia 			= nr_sequencia_p;
			
			select	max(nr_seq_dialise)
				into STRICT 	nr_seq_dialise_w
			from 	hd_assinatura_digital
			where 	nr_sequencia = nr_sequencia_p;

			select	max(nr_atendimento)
				into STRICT	nr_atendimento_w
			from 	hd_dialise
			where 	nr_sequencia = nr_seq_dialise_w;
			
			if (nr_atendimento_w IS NOT NULL AND nr_atendimento_w::text <> '') then 
				delete 	FROM pep_item_pendente 
				where 	nr_atendimento = nr_atendimento_w
				and 	trunc(dt_registro) = trunc(clock_timestamp());
			end if;

			
		end if;
   	elsif (nr_seq_proj_ass_p in (53252, 53253)) then

		if (nr_seq_proj_ass_p	= 53252) then

			update	oft_angio_retino
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_angio_retino
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

   elsif (nr_seq_proj_ass_p in (53256, 53257)) then

		if (nr_seq_proj_ass_p	= 53256) then

			update	oft_biometria
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_biometria
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

   elsif (nr_seq_proj_ass_p in (53258, 53259)) then

		if (nr_seq_proj_ass_p	= 53258) then

			update	oft_biomicroscopia
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_biomicroscopia
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

   elsif (nr_seq_proj_ass_p in (53260, 53261)) then

		if (nr_seq_proj_ass_p	= 53260) then

			update	oft_campimetria
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_campimetria
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

		
   elsif (nr_seq_proj_ass_p in (53263, 53264)) then

		if (nr_seq_proj_ass_p	= 53263) then

			update	oft_cerastocopia
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_cerastocopia
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

	elsif (nr_seq_proj_ass_p in (53349, 53350)) then

		if (nr_seq_proj_ass_p	= 53349) then

			update	oft_correcao_atual
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_correcao_atual
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

	elsif (nr_seq_proj_ass_p in (53271, 53272)) then

		if (nr_seq_proj_ass_p	= 53271) then

			update	oft_curva_tencional
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_curva_tencional
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

	elsif (nr_seq_proj_ass_p in (53273, 53274)) then

		if (nr_seq_proj_ass_p	= 53273) then

			update	oft_dnp
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_dnp
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

	elsif (nr_seq_proj_ass_p in (53275, 53276)) then

		if (nr_seq_proj_ass_p	= 53275) then

			update	oft_exame_externo
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_exame_externo
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

	elsif (nr_seq_proj_ass_p in (53277, 53278)) then

		if (nr_seq_proj_ass_p	= 53277) then

			update	oft_fundoscopia
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_fundoscopia
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;


	elsif (nr_seq_proj_ass_p in (53280, 53281)) then

		if (nr_seq_proj_ass_p	= 53280) then

			update	oft_gonioscopia
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_gonioscopia
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

	elsif (nr_seq_proj_ass_p in (53282, 53283)) then

		if (nr_seq_proj_ass_p	= 53282) then

			update	oft_microscopia_especular
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_microscopia_especular
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

	elsif (nr_seq_proj_ass_p in (53284, 53285)) then

		if (nr_seq_proj_ass_p	= 53284) then

			update	oft_motilidade_ocular
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_motilidade_ocular
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;


	elsif (nr_seq_proj_ass_p in (53288, 53289)) then

		if (nr_seq_proj_ass_p	= 53288) then

			update	oft_paquimetria
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_paquimetria
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;


		
		
	elsif (nr_seq_proj_ass_p in (53291, 53292)) then

		if (nr_seq_proj_ass_p	= 53291) then

			update	oft_potencial_acuidade
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_potencial_acuidade
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;		

	elsif (nr_seq_proj_ass_p in (53293, 53294)) then

		if (nr_seq_proj_ass_p	= 53293) then

			update	oft_pupilometria
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_pupilometria
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;		

		
	elsif (nr_seq_proj_ass_p in (53295, 53296)) then

		if (nr_seq_proj_ass_p	= 53295) then

			update	oft_oct
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_oct
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;		

	elsif (nr_seq_proj_ass_p in (53297, 53298)) then

		if (nr_seq_proj_ass_p	= 53297) then

			update	oft_tomografia_olho
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_tomografia_olho
			set	      nr_seq_assinat_inativacao 	= nr_sequencia_w
			where	nr_sequencia 			            = nr_sequencia_p;

			
		end if;

		
	elsif (nr_seq_proj_ass_p in (53299, 53300)) then

		if (nr_seq_proj_ass_p	= 53299) then

			update	oft_tonometria
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_tonometria
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;

		
	elsif (nr_seq_proj_ass_p in (53301, 53302)) then

		if (nr_seq_proj_ass_p	= 53301) then

			update	oft_ultrassonografia
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_ultrassonografia
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;		

	elsif (nr_seq_proj_ass_p in (53303, 53304)) then

		if (nr_seq_proj_ass_p	= 53303) then

			update	oft_iridectomia
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_iridectomia
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	

		
	elsif (nr_seq_proj_ass_p in (53305, 53306)) then

		if (nr_seq_proj_ass_p	= 53305) then

			update	oft_olho_seco
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_olho_seco
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;		

	elsif (nr_seq_proj_ass_p in (53307, 53308)) then

		if (nr_seq_proj_ass_p	= 53307) then

			update	oft_daltonismo
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_daltonismo
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	

	elsif (nr_seq_proj_ass_p in (53309, 53310)) then

		if (nr_seq_proj_ass_p	= 53309) then

			update	oft_capsulotomia
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_capsulotomia
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;			

	elsif (nr_seq_proj_ass_p in (53311, 53312)) then

		if (nr_seq_proj_ass_p	= 53311) then

			update	oft_refracao
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_refracao
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	

		
	elsif (nr_seq_proj_ass_p in (53313, 53314)) then

		if (nr_seq_proj_ass_p	= 53313) then

			update	oft_auto_refracao
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_auto_refracao
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;			

	elsif (nr_seq_proj_ass_p in (53315, 53316)) then

		if (nr_seq_proj_ass_p	= 53315) then

			update	oft_mapeamento_retina
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_mapeamento_retina
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	


	elsif (nr_seq_proj_ass_p in (53317, 53318)) then

		if (nr_seq_proj_ass_p	= 53317) then

			update	oft_sobrecarga_hidrica
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_sobrecarga_hidrica
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	

		
	elsif (nr_seq_proj_ass_p in (53319, 53320)) then

		if (nr_seq_proj_ass_p	= 53319) then

			update	oft_fotocoagulacao_laser
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_fotocoagulacao_laser
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;



















			
		end if;	

  elsif (nr_seq_proj_ass_p in (53580, 53584)) then

		if (nr_seq_proj_ass_p	= 53580) then

			update	oft_aberrometria
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

			update	oft_aberrometria
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

		end if;
		
		
	elsif (nr_seq_proj_ass_p in (53269, 53270)) then

		if (nr_seq_proj_ass_p	= 53269) then

			update	oft_acuidade_visual
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_acuidade_visual
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;			

		
	elsif (nr_seq_proj_ass_p in (53321, 53322)) then

		if (nr_seq_proj_ass_p	= 53321) then

			update	med_receita
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	med_receita
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;			

	elsif (nr_seq_proj_ass_p in (53323, 53324)) then

		if (nr_seq_proj_ass_p	= 53323) then

			update	oft_oculos
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	oft_oculos
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	

	
	elsif (nr_seq_proj_ass_p in (53433, 53436)) then

		if (nr_seq_proj_ass_p	= 53433) then

			update	OFT_TONOMETRIA
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	OFT_TONOMETRIA
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	

	elsif (nr_seq_proj_ass_p in (53437, 53438)) then

		if (nr_seq_proj_ass_p	= 53437) then

			update	OFT_CONSULTA_LENTE
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	OFT_CONSULTA_LENTE
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;	

		
	elsif (nr_seq_proj_ass_p in (53440, 53441)) then

		if (nr_seq_proj_ass_p	= 53440) then

			update	OFT_IMAGEM_EXAME
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

		
			update	OFT_IMAGEM_EXAME
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;

			
		end if;

	
	elsif (nr_seq_proj_ass_p in (53564, 53570)) then

	
		if (nr_seq_proj_ass_p = 53564) then


			update	patient_cp_indic_measure
			set		nr_seq_assinatura = nr_sequencia_w
			where	nr_sequencia = nr_sequencia_p;


		else


			update	pat_cp_ind_measure_eg
			set		nr_seq_assinatura = nr_sequencia_w
			where	nr_sequencia = nr_sequencia_p;


		end if;
	
	elsif (nr_seq_proj_ass_p in (53719, 53720)) then

		if (nr_seq_proj_ass_p	= 53719) then

			update	eventos_adversos_registro
			set	      nr_seq_assinatura 	= nr_sequencia_w
			where	nr_sequencia 	      = nr_sequencia_p;

		else

			update	eventos_adversos_registro
			set	      nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_sequencia 			    = nr_sequencia_p;
    end if;	
	
	elsif (nr_seq_proj_ass_p = 53148) then

			update	sus_laudo_paciente
			set		nr_seq_assinatura = nr_sequencia_w
			where	nr_seq_interno = nr_sequencia_p;
			
	elsif (nr_seq_proj_ass_p in (53693, 53694)) then

	
		if (nr_seq_proj_ass_p = 53693) then
		
			update	nascimento
			set		nr_seq_assinatura = nr_sequencia_w
			where	nr_seq_interno = nr_sequencia_p;


		else


			update	nascimento
			set		nr_seq_assinat_inativacao = nr_sequencia_w
			where	nr_seq_interno = nr_sequencia_p;


		end if;

	else



		select	nm_tabela,

				nm_atributo

		
		into STRICT	nm_tabela_w,

				nm_atributo_w

		from	TASY_PROJETO_ASSINATURA

		where	nr_sequencia	= nr_seq_proj_ass_p;



		if (nm_tabela_w IS NOT NULL AND nm_tabela_w::text <> '') and (nm_atributo_w IS NOT NULL AND nm_atributo_w::text <> '') then



			ds_comando_w	:= 'update	'||nm_tabela_w||

								' set '||nm_atributo_w ||' = :nr_seq_assinatura '||

								' where nr_sequencia = :nr_sequencia ';

	
			if ( nm_tabela_w = 'EVOLUCAO_PACIENTE')then
			
			
			ds_comando_w	:= 'update	'||nm_tabela_w||

								' set '||nm_atributo_w ||' = :nr_seq_assinatura '||

								' where cd_evolucao = :nr_sequencia ';
			
			
			end if;


			ds_parametros_w	:= 'nr_sequencia='||nr_sequencia_p||ds_separador_bv_w||

								'nr_seq_assinatura='||nr_sequencia_w||ds_separador_bv_w;



			CALL Exec_sql_Dinamico_bv('Ass Dig',ds_comando_w,ds_parametros_w);





		end if;





	end if;

	exception

		when others then

			


			ds_erro_w	:= sqlerrm(SQLSTATE);

			insert into log_tasy( dt_atualizacao, nm_usuario, cd_log, ds_log ) values (clock_timestamp(), nm_usuario_p, '-11111', 'tg tasy_gravar_assin1=' || ds_erro_w);

	
			commit;

      null;

	end;

end if;

nr_sequencia_p := nr_sequencia_w;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_gravar_assinatura_digital ( ds_assinatura_p text, cd_pessoa_fisica_p text, ds_hash_assinatura_p text, nr_seq_proj_ass_p bigint, nr_seq_proj_xml_p bigint, nm_usuario_p text, cd_classif_relat_p text, cd_relatorio_p bigint, nr_sequencia_p INOUT bigint, ie_nova_assinat_p INOUT text) FROM PUBLIC;

