-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE atualizar_indices () AS $body$
DECLARE

/*
ds_retorno_w		varchar2(40);
nm_indice_w			varchar2(40);
qt_blocos_w			Number(10,0);
CURSOR C010 IS
 SELECT nm_segmento, qt_blocos
 FROM extents_oracle_v
 where ie_tipo = 'INDEX'
   and nm_segmento not like '%_PK'
   and qt_extents > 1
   and qt_blocos < 1000
union
 SELECT nm_segmento, qt_blocos
 FROM extents_oracle_v
 where ie_tipo = 'INDEX'
   and nm_segmento not like '%_PK'
   and qt_extents > 5
   and qt_blocos > 1000
order by 2;*/
BEGIN

/*obter_valor_dinamico(	'Alter index PESFISI_I1 Rebuild Tablespace Tasy_index', 				ds_retorno_w);
obter_valor_dinamico(	'Alter index MATERIA_I1 Rebuild Tablespace Tasy_index', 				ds_retorno_w);
obter_valor_dinamico(	'Alter index PROCEDI_I1 Rebuild Tablespace Tasy_index', 				ds_retorno_w);
begin
OPEN C010;
	LOOP
		FETCH C010 INTO nm_indice_w, qt_blocos_w;
		EXIT WHEN C010%NOTFOUND;
		begin
		obter_valor_dinamico('Alter index ' ||
           	nm_indice_w || ' Rebuild Tablespace Tasy_index', ds_retorno_w);
		end;
	END LOOP;
	CLOSE C010;
end;
valida_objetos_sistema;*/
null;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualizar_indices () FROM PUBLIC;

