-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE salvar_layout_tela_dis (nm_componente_p conf_splitter_dis.nm_componente%type, nr_posicao_p conf_splitter_dis.nr_posicao%type, nm_usuario_p conf_splitter_dis.nm_usuario%type, cd_tab_p conf_splitter_dis.cd_tab%type) AS $body$
DECLARE

				
nm_componente_w componente_java.ds_componente%type;


BEGIN

	select count(nr_sequencia)
	  into STRICT nm_componente_w
	  from CONF_SPLITTER_DIS 
     where nm_componente = nm_componente_p
	   and cd_tab = cd_tab_p
	   and nm_usuario = nm_usuario_p;

	if (nm_componente_w = 0) then
		insert into CONF_SPLITTER_DIS(nr_sequencia, nm_componente, nr_posicao, nm_usuario, dt_atualizacao, cd_tab)
		     values (nextval('conf_splitter_dis_seq'), nm_componente_p, nr_posicao_p, nm_usuario_p, clock_timestamp(), cd_tab_p);
	else
		update CONF_SPLITTER_DIS
		   set nr_posicao = nr_posicao_p 
		 where nm_componente = nm_componente_p
		   and cd_tab = cd_tab_p
		   and nm_usuario = nm_usuario_p;
	end if;

	commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE salvar_layout_tela_dis (nm_componente_p conf_splitter_dis.nm_componente%type, nr_posicao_p conf_splitter_dis.nr_posicao%type, nm_usuario_p conf_splitter_dis.nm_usuario%type, cd_tab_p conf_splitter_dis.cd_tab%type) FROM PUBLIC;

