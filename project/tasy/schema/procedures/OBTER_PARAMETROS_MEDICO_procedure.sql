-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_parametros_medico ( cd_estabelecimento_p bigint, qt_horas_passado_sv_p INOUT bigint, ie_lib_orientacao_alta_p INOUT text, ie_lib_evento_p INOUT text, ie_libera_anestesia_p INOUT text, ie_regra_atend_nasc_p INOUT text, ie_lib_atestado_p INOUT text, ie_lib_receita_p INOUT text, ie_lib_fatur_med_p INOUT text, ie_libera_partic_p INOUT text, ie_libera_atraso_cirur_p INOUT text, ie_liberar_consolidacao_pepo_p INOUT text, ie_libera_evento_pepo_p INOUT text, ie_libera_cavidade_p INOUT text, ds_mascara_dnv_p INOUT text, ds_mascara_dfm_p INOUT text, ie_libera_demarcacao_p INOUT text, ie_libera_hemoderivado_p INOUT text, ie_libera_agente_p INOUT text, ie_libera_medicamento_p INOUT text, ie_libera_material_p INOUT text, ie_libera_curativo_p INOUT text, ie_libera_terapia_p INOUT text, ds_diretorio_pacs_p INOUT text, ie_libera_anexos_oft_p INOUT text ) AS $body$
DECLARE

			
qt_horas_passado_sv_w	double precision := 0;
ie_lib_orientacao_alta_w	varchar(1) := 'N';
ie_lib_evento_w		varchar(1) := 'N';
ie_libera_anestesia_w	varchar(1) := 'N';
ie_regra_atend_nasc_w	varchar(15);
ie_lib_atestado_w		varchar(1) := 'N';
ie_lib_receita_w		varchar(1) := 'N';
ie_lib_fatur_med_w		varchar(1) := 'N';
ie_libera_partic_w		varchar(1) := 'N';
ie_libera_atraso_cirur_w	varchar(1) := 'N';
ie_liberar_consolidacao_pepo_w	varchar(1) := 'N';
ie_libera_evento_pepo_w		varchar(1) := 'N';
ie_libera_cavidade_w		varchar(1) := 'N';
ds_mascara_dnv_w		varchar(30);
ds_mascara_dfm_w		varchar(30);
ie_libera_demarcacao_w		varchar(1) := 'N';	
ie_libera_hemoderivado_w	varchar(1) := 'N';
ie_libera_agente_w			varchar(1) := 'N';
ie_libera_medicamento_w		varchar(1) := 'N';
ie_libera_material_w		varchar(1) := 'N';
ie_libera_curativo_w      	varchar(1) := 'N';
ie_libera_terapia_w			varchar(1) := 'N';
ie_libera_anexos_oft_w		varchar(1) := 'N';
ds_diretorio_pacs_w			parametro_medico.ds_diretorio_pacs%type;


BEGIN
if (cd_estabelecimento_p IS NOT NULL AND cd_estabelecimento_p::text <> '') then
	begin
	select	coalesce(qt_horas_passado_sv,12),
		coalesce(ie_lib_orientacao_alta, 'N'),
		coalesce(ie_lib_evento, 'N'),
		coalesce(ie_libera_anestesia, 'N'),
		coalesce(ie_regra_atend_nasc, 'N'),
		coalesce(ie_lib_atestado, 'N'),
		coalesce(ie_lib_receita,'N'),		
		coalesce(ie_lib_fatur_med,'N') ,
		coalesce(ie_libera_partic,'N') ,
		coalesce(ie_libera_atraso_cirur,'N'),		
		coalesce(ie_liberar_consolidacao_pepo,'N'),
		coalesce(ie_libera_evento_pepo,'N'),
		coalesce(ie_libera_cavidade,'N'),		
		ds_mascara_dnv,
		ds_mascara_dfm,
		ie_libera_demarcacao,
		coalesce(ie_libera_hemoder_pepo,'N'),
		coalesce(ie_libera_agente_pepo,'N'),
		coalesce(ie_libera_medic_pepo,'N'),
		coalesce(ie_libera_material_pepo,'N'),
		coalesce(ie_libera_curativo,'N'),
		coalesce(ie_libera_terapia_pepo,'N'),
		ds_diretorio_pacs,
		coalesce(ie_libera_anexos_oft,'N')
	into STRICT	qt_horas_passado_sv_w,
		ie_lib_orientacao_alta_w,
		ie_lib_evento_w,
		ie_libera_anestesia_w,
		ie_regra_atend_nasc_w,
		ie_lib_atestado_w,
		ie_lib_receita_w,
		ie_lib_fatur_med_w,
		ie_libera_partic_w,
		ie_libera_atraso_cirur_w,
		ie_liberar_consolidacao_pepo_w,
		ie_libera_evento_pepo_w,
		ie_libera_cavidade_w,
		ds_mascara_dnv_w,
		ds_mascara_dfm_w,
		ie_libera_demarcacao_w,
		ie_libera_hemoderivado_w,
		ie_libera_agente_w,
		ie_libera_medicamento_w,
		ie_libera_material_w,
		ie_libera_curativo_w,
		ie_libera_terapia_w,
		ds_diretorio_pacs_w,
		ie_libera_anexos_oft_w
	from	parametro_medico
	where	cd_estabelecimento = cd_estabelecimento_p;
	end;
end if;

qt_horas_passado_sv_p		:= qt_horas_passado_sv_w;
ie_lib_orientacao_alta_p	:= ie_lib_orientacao_alta_w;
ie_lib_evento_p			:= ie_lib_evento_w;
ie_libera_anestesia_p		:= ie_libera_anestesia_w;
ie_regra_atend_nasc_p		:= ie_regra_atend_nasc_w;
ie_lib_atestado_p		:= ie_lib_atestado_w;
ie_lib_receita_p		:= ie_lib_receita_w;
ie_lib_fatur_med_p		:= ie_lib_fatur_med_w;
ie_libera_partic_p		:= ie_libera_partic_w;
ie_libera_atraso_cirur_p	:= ie_libera_atraso_cirur_w;
ie_liberar_consolidacao_pepo_p	:= ie_liberar_consolidacao_pepo_w;
ie_libera_evento_pepo_p		:= ie_libera_evento_pepo_w;
ie_libera_cavidade_p		:= ie_libera_cavidade_w;
ds_mascara_dnv_p		:= ds_mascara_dnv_w;
ds_mascara_dfm_p		:= ds_mascara_dfm_w;
ie_libera_demarcacao_p		:= ie_libera_demarcacao_w;
ie_libera_hemoderivado_p   	:= ie_libera_hemoderivado_w;
ie_libera_agente_p   :=  ie_libera_agente_w;
ie_libera_medicamento_p := ie_libera_medicamento_w;
ie_libera_material_p := ie_libera_material_w;
ie_libera_curativo_p := ie_libera_curativo_w;
ie_libera_terapia_p  :=	ie_libera_terapia_w;
ds_diretorio_pacs_p := ds_diretorio_pacs_w;
ie_libera_anexos_oft_p := ie_libera_anexos_oft_w;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_parametros_medico ( cd_estabelecimento_p bigint, qt_horas_passado_sv_p INOUT bigint, ie_lib_orientacao_alta_p INOUT text, ie_lib_evento_p INOUT text, ie_libera_anestesia_p INOUT text, ie_regra_atend_nasc_p INOUT text, ie_lib_atestado_p INOUT text, ie_lib_receita_p INOUT text, ie_lib_fatur_med_p INOUT text, ie_libera_partic_p INOUT text, ie_libera_atraso_cirur_p INOUT text, ie_liberar_consolidacao_pepo_p INOUT text, ie_libera_evento_pepo_p INOUT text, ie_libera_cavidade_p INOUT text, ds_mascara_dnv_p INOUT text, ds_mascara_dfm_p INOUT text, ie_libera_demarcacao_p INOUT text, ie_libera_hemoderivado_p INOUT text, ie_libera_agente_p INOUT text, ie_libera_medicamento_p INOUT text, ie_libera_material_p INOUT text, ie_libera_curativo_p INOUT text, ie_libera_terapia_p INOUT text, ds_diretorio_pacs_p INOUT text, ie_libera_anexos_oft_p INOUT text ) FROM PUBLIC;

