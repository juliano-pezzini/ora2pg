-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE inserir2_procedimento_paciente ( dt_procedimento_p timestamp, cd_procedimento_p bigint, nr_seq_exame_p bigint, nr_seq_proc_interno_p bigint, ie_via_acesso_p text, nr_prescricao_p bigint, nr_sequencia_prescricao_p bigint, nr_seq_cor_exec_p bigint, cd_medico_executor_p text, ie_funcao_medico_p text, ie_proc_princ_atend_p text, nr_sequencia_p bigint, ie_video_p text, qt_procedimento_p bigint, tx_medico_p bigint, tx_anestesia_p bigint, tx_procedimento_p bigint, ie_valor_informado_p text, ie_guia_informada_p text, cd_situacao_glosa_p bigint, nm_usuario_original_p text, cd_setor_atendimento_p bigint, dt_entrada_unidade_p timestamp, nr_seq_atepacu_p bigint, nr_atendimento_p bigint, cd_convenio_p bigint, cd_categoria_p text, nr_doc_convenio_p text, ie_auditoria_p text, ie_emite_conta_p text, cd_cgc_prestador_p text, ie_origem_proced_p bigint, ds_erro_p INOUT text, nm_usuario_p text) AS $body$
BEGIN
	if (cd_procedimento_p IS NOT NULL AND cd_procedimento_p::text <> '') and (cd_setor_atendimento_p IS NOT NULL AND cd_setor_atendimento_p::text <> '') and (dt_entrada_unidade_p IS NOT NULL AND dt_entrada_unidade_p::text <> '') and (dt_procedimento_p IS NOT NULL AND dt_procedimento_p::text <> '') and (ie_origem_proced_p IS NOT NULL AND ie_origem_proced_p::text <> '') and (nm_usuario_p IS NOT NULL AND nm_usuario_p::text <> '') and (nr_atendimento_p IS NOT NULL AND nr_atendimento_p::text <> '') and (nr_seq_atepacu_p IS NOT NULL AND nr_seq_atepacu_p::text <> '') and (nr_sequencia_p IS NOT NULL AND nr_sequencia_p::text <> '') and (qt_procedimento_p IS NOT NULL AND qt_procedimento_p::text <> '') then
		begin
		insert into procedimento_paciente(
		dt_procedimento,	
		cd_procedimento,	
		nr_seq_exame,	
		nr_seq_proc_interno,
		ie_via_acesso,		
		nr_prescricao,		
		nr_sequencia_prescricao,
		nr_seq_cor_exec,	
		cd_medico_executor,	
		ie_funcao_medico,	
		ie_proc_princ_atend,	
		nr_sequencia,	
		ie_video,		
		qt_procedimento,	
		tx_medico,		
		tx_anestesia,		
		tx_procedimento,	
		ie_valor_informado,	
		ie_guia_informada,	
		cd_situacao_glosa,	
		nm_usuario_original,	
		cd_setor_atendimento,	
		dt_entrada_unidade,	
		nr_seq_atepacu,	
		nr_atendimento,	
		cd_convenio,	
		cd_categoria,		
		nr_doc_convenio,	
		ie_auditoria,	
		ie_emite_conta,	
		cd_cgc_prestador,	
		ie_origem_proced,
		dt_atualizacao,
		nm_usuario)
	values (dt_procedimento_p, 	
		cd_procedimento_p,	
		nr_seq_exame_p,		
		nr_seq_proc_interno_p,	
		ie_via_acesso_p,		
		nr_prescricao_p,		
		nr_sequencia_prescricao_p,
		nr_seq_cor_exec_p,	
		cd_medico_executor_p,	
		ie_funcao_medico_p,	
		ie_proc_princ_atend_p,	
		nr_sequencia_p,		
		ie_video_p,		
		qt_procedimento_p,	
		tx_medico_p,		
		tx_anestesia_p,		
		tx_procedimento_p,	
		ie_valor_informado_p,	
		ie_guia_informada_p,	
		cd_situacao_glosa_p,	
		nm_usuario_original_p,	
		cd_setor_atendimento_p,	
		dt_entrada_unidade_p,	
		nr_seq_atepacu_p,	
		nr_atendimento_p,	
		cd_convenio_p,		
		cd_categoria_p,		
		nr_doc_convenio_p,	
		ie_auditoria_p,		
		ie_emite_conta_p,	
		cd_cgc_prestador_p,	
		ie_origem_proced_p,
		clock_timestamp(),
		nm_usuario_p);
		end;
		CALL ATUALIZA_PRECO_PROCEDIMENTO(nr_sequencia_p, cd_convenio_p, nm_usuario_p);
	end if;
commit;
exception
		when others then
			begin
			ds_erro_p := WHEB_MENSAGEM_PCK.get_texto(279331);
			end;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE inserir2_procedimento_paciente ( dt_procedimento_p timestamp, cd_procedimento_p bigint, nr_seq_exame_p bigint, nr_seq_proc_interno_p bigint, ie_via_acesso_p text, nr_prescricao_p bigint, nr_sequencia_prescricao_p bigint, nr_seq_cor_exec_p bigint, cd_medico_executor_p text, ie_funcao_medico_p text, ie_proc_princ_atend_p text, nr_sequencia_p bigint, ie_video_p text, qt_procedimento_p bigint, tx_medico_p bigint, tx_anestesia_p bigint, tx_procedimento_p bigint, ie_valor_informado_p text, ie_guia_informada_p text, cd_situacao_glosa_p bigint, nm_usuario_original_p text, cd_setor_atendimento_p bigint, dt_entrada_unidade_p timestamp, nr_seq_atepacu_p bigint, nr_atendimento_p bigint, cd_convenio_p bigint, cd_categoria_p text, nr_doc_convenio_p text, ie_auditoria_p text, ie_emite_conta_p text, cd_cgc_prestador_p text, ie_origem_proced_p bigint, ds_erro_p INOUT text, nm_usuario_p text) FROM PUBLIC;

