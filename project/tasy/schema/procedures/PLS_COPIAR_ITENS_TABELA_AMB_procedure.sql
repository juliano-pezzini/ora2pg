-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_copiar_itens_tabela_amb ( ie_tipo_copia_p bigint, cd_edicao_amb_p edicao_amb.cd_edicao_amb%type, dt_inicio_vigencia_p timestamp, nr_seq_preco_amb_p preco_amb.nr_sequencia%type, nm_usuario_p text ) AS $body$
DECLARE

 
cd_procedimento_w	preco_amb.cd_procedimento%type;
vl_procedimento_w	preco_amb.vl_procedimento%type;
cd_moeda_w		preco_amb.cd_moeda%type;
dt_atualizacao_w	preco_amb.dt_atualizacao%type;
vl_custo_operacional_w	preco_amb.vl_custo_operacional%type;
vl_anestesista_w	preco_amb.vl_anestesista%type;
vl_medico_w		preco_amb.vl_medico%type;
vl_filme_w		preco_amb.vl_filme%type;
qt_filme_w		preco_amb.qt_filme%type;
nr_auxiliares_w		preco_amb.nr_auxiliares%type;
nr_incidencia_w		preco_amb.nr_incidencia%type;
qt_porte_anestesico_w	preco_amb.qt_porte_anestesico%type;
ie_origem_proced_w	preco_amb.ie_origem_proced%type;
vl_auxiliares_w		preco_amb.vl_auxiliares%type;
ds_observacao_w		preco_amb.ds_observacao%type;


BEGIN 
 
if (ie_tipo_copia_p = 1) then 
	 
	select	cd_procedimento,	vl_procedimento,	cd_moeda, 
		clock_timestamp(),		vl_custo_operacional,	vl_anestesista, 
		vl_medico,		vl_filme,		qt_filme, 
		nr_auxiliares,		nr_incidencia,		qt_porte_anestesico, 
		ie_origem_proced,	vl_auxiliares,		ds_observacao 
	into STRICT	cd_procedimento_w,	vl_procedimento_w,	cd_moeda_w, 
		dt_atualizacao_w,	vl_custo_operacional_w,	vl_anestesista_w, 
		vl_medico_w,		vl_filme_w,		qt_filme_w, 
		nr_auxiliares_w,	nr_incidencia_w,	qt_porte_anestesico_w, 
		ie_origem_proced_w,	vl_auxiliares_w,	ds_observacao_w 
	from	preco_amb 
	where	nr_sequencia		= nr_seq_preco_amb_p;
	 
	begin 
	insert into preco_amb(	cd_edicao_amb, 
				cd_procedimento, 
				vl_procedimento, 
				cd_moeda, 
				dt_atualizacao, 
				nm_usuario, 
				vl_custo_operacional, 
				vl_anestesista, 
				vl_medico, 
				vl_filme, 
				qt_filme, 
				nr_auxiliares, 
				nr_incidencia, 
				qt_porte_anestesico, 
				ie_origem_proced, 
				vl_auxiliares, 
				dt_inicio_vigencia, 
				nr_sequencia, 
				ds_observacao ) 
			values (	cd_edicao_amb_p, 
				cd_procedimento_w, 
				vl_procedimento_w, 
				cd_moeda_w, 
				dt_atualizacao_w, 
				nm_usuario_p, 
				vl_custo_operacional_w, 
				vl_anestesista_w, 
				vl_medico_w, 
				vl_filme_w, 
				qt_filme_w, 
				nr_auxiliares_w, 
				nr_incidencia_w, 
				qt_porte_anestesico_w, 
				ie_origem_proced_w, 
				vl_auxiliares_w, 
				dt_inicio_vigencia_p, 
				nextval('preco_amb_seq'), 
				ds_observacao_w );
	exception 
	when others then 
		CALL Wheb_mensagem_pck.exibir_mensagem_abort(333087);
	end;
end if;
 
commit;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_copiar_itens_tabela_amb ( ie_tipo_copia_p bigint, cd_edicao_amb_p edicao_amb.cd_edicao_amb%type, dt_inicio_vigencia_p timestamp, nr_seq_preco_amb_p preco_amb.nr_sequencia%type, nm_usuario_p text ) FROM PUBLIC;

