-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_copiar_precos_contrato_ops ( nr_seq_operadora_p bigint, nr_seq_contrato_p bigint, ie_excluir_p text, nm_tabela_p text, nm_usuario_p text) AS $body$
BEGIN

/* PLS_REGRA_PRECO_PROC */

if (nm_tabela_p	= 'PLS_REGRA_PRECO_PROC') then
	if (ie_excluir_p = 'S') then
		delete	from pls_regra_preco_proc
		where 	nr_seq_contrato = nr_seq_contrato_p;
	end if;
	insert into pls_regra_preco_proc(nr_sequencia, dt_atualizacao, nm_usuario,
		dt_atualizacao_nrec, nm_usuario_nrec, nr_seq_prestador,
		nr_seq_plano, nr_seq_categoria, nr_seq_clinica, 
		nr_seq_tipo_acomodacao, nr_seq_tipo_atendimento, cd_edicao_amb,
		cd_procedimento, ie_origem_proced, cd_area_procedimento, 
		cd_especialidade, cd_grupo_proc, tx_ajuste_geral,
		vl_ch_honorarios, vl_ch_custo_oper, vl_filme, 
		tx_ajuste_custo_oper, tx_ajuste_partic, vl_proc_negociado,
		ie_situacao, dt_inicio_vigencia, cd_estabelecimento, 
		dt_fim_vigencia, tx_ajuste_filme, tx_ajuste_ch_honor,
		ie_tipo_tabela, vl_medico, vl_auxiliares,
		vl_anestesista, vl_custo_operacional, vl_materiais,
		ie_preco_informado, nr_seq_contrato, nr_seq_ops_congenere,
		ie_tipo_contrato, ie_tipo_consulta, nr_seq_grupo_med_exec, ie_gerar_remido, 
		ie_regime_atendimento, ie_regime_atendimento_princ, ie_saude_ocupacional)
	SELECT	nextval('pls_regra_preco_proc_seq'), clock_timestamp(), nm_usuario_p, 
		clock_timestamp(), nm_usuario_p, nr_seq_prestador,
		nr_seq_plano, nr_seq_categoria, nr_seq_clinica, 
		nr_seq_tipo_acomodacao, nr_seq_tipo_atendimento, cd_edicao_amb,
		cd_procedimento, ie_origem_proced, cd_area_procedimento, 
		cd_especialidade, cd_grupo_proc, tx_ajuste_geral,
		vl_ch_honorarios, vl_ch_custo_oper, vl_filme, 
		tx_ajuste_custo_oper, tx_ajuste_partic, vl_proc_negociado,
		ie_situacao, dt_inicio_vigencia, cd_estabelecimento, 
		dt_fim_vigencia, tx_ajuste_filme, tx_ajuste_ch_honor,
		ie_tipo_tabela, vl_medico, vl_auxiliares,
		vl_anestesista, vl_custo_operacional, vl_materiais,
		ie_preco_informado, nr_seq_contrato_p, nr_seq_ops_congenere,
		ie_tipo_contrato, ie_tipo_consulta, nr_seq_grupo_med_exec, ie_gerar_remido,
		ie_regime_atendimento, ie_regime_atendimento_princ, ie_saude_ocupacional
	from	pls_regra_preco_proc
	where	nr_seq_outorgante	= nr_seq_operadora_p;
end if;

/* PLS_REGRA_PRECO_MAT */

if (nm_tabela_p	= 'PLS_REGRA_PRECO_MAT') then
	if (ie_excluir_p = 'S') then
		delete	from pls_regra_preco_mat
		where 	nr_seq_contrato = nr_seq_contrato_p;
	end if;
	insert into pls_regra_preco_mat(nr_sequencia, cd_estabelecimento, dt_atualizacao,
		nm_usuario, dt_atualizacao_nrec, nm_usuario_nrec,
		nr_seq_prestador, dt_inicio_vigencia, dt_fim_vigencia, 
		tx_ajuste, ie_situacao, vl_negociado, 
		tx_ajuste_pfb, tx_ajuste_pmc_neut, tx_ajuste_pmc_pos, 
		tx_ajuste_pmc_neg, tx_ajuste_simpro_pfb, tx_ajuste_simpro_pmc, 
		ie_origem_preco, ie_tipo_despesa, nr_seq_material_preco, 
		tx_ajuste_tab_propria, ie_tipo_tabela, nr_seq_contrato,
		qt_idade_inicial, qt_idade_final, ie_gerar_remido,
		ie_regime_atendimento, ie_regime_atendimento_princ, ie_saude_ocupacional)
	SELECT	nextval('pls_regra_preco_mat_seq'), cd_estabelecimento, clock_timestamp(), 
		nm_usuario_p, clock_timestamp(), nm_usuario_p, 
		nr_seq_prestador, dt_inicio_vigencia, dt_fim_vigencia, 
		tx_ajuste, ie_situacao, vl_negociado,
		tx_ajuste_pfb, tx_ajuste_pmc_neut, tx_ajuste_pmc_pos, 
		tx_ajuste_pmc_neg, tx_ajuste_simpro_pfb, tx_ajuste_simpro_pmc, 
		ie_origem_preco, ie_tipo_despesa, nr_seq_material_preco, 
		tx_ajuste_tab_propria, ie_tipo_tabela, nr_seq_contrato_p,
		qt_idade_inicial, qt_idade_final, ie_gerar_remido,
		ie_regime_atendimento, ie_regime_atendimento_princ, ie_saude_ocupacional
	from	pls_regra_preco_mat
	where	nr_seq_outorgante	= nr_seq_operadora_p;
end if;

/* PLS_REGRA_PRECO_SERVICO */

if (nm_tabela_p	= 'PLS_REGRA_PRECO_SERVICO') then
	if (ie_excluir_p = 'S') then
		delete	from pls_regra_preco_servico
		where 	nr_seq_contrato = nr_seq_contrato_p;
	end if;
	insert into pls_regra_preco_servico(nr_sequencia, cd_estabelecimento, dt_atualizacao,
		nm_usuario, dt_atualizacao_nrec, nm_usuario_nrec,
		nr_seq_prestador, dt_inicio_vigencia, dt_fim_vigencia, 
		cd_tabela_servico, tx_ajuste, cd_procedimento,
		ie_origem_proced, ie_situacao, cd_area_procedimento, 
		cd_especialidade, cd_grupo_proc, vl_negociado,
		ie_tipo_tabela, nr_seq_contrato, qt_idade_inicial, 
		qt_idade_final, ie_gerar_remido,
		ie_regime_atendimento, ie_regime_atendimento_princ, ie_saude_ocupacional)
	SELECT	nextval('pls_regra_preco_servico_seq'), cd_estabelecimento, clock_timestamp(), 
		nm_usuario_p, clock_timestamp(), nm_usuario_p, 
		nr_seq_prestador, dt_inicio_vigencia, dt_fim_vigencia, 
		cd_tabela_servico, tx_ajuste, cd_procedimento,
		ie_origem_proced, ie_situacao, cd_area_procedimento, 
		cd_especialidade, cd_grupo_proc, vl_negociado,
		ie_tipo_tabela, nr_seq_contrato_p, qt_idade_inicial, 
		qt_idade_final, ie_gerar_remido,
		ie_regime_atendimento, ie_regime_atendimento_princ, ie_saude_ocupacional
	from	pls_regra_preco_servico
	where	nr_seq_outorgante	= nr_seq_operadora_p;
end if;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_copiar_precos_contrato_ops ( nr_seq_operadora_p bigint, nr_seq_contrato_p bigint, ie_excluir_p text, nm_tabela_p text, nm_usuario_p text) FROM PUBLIC;

