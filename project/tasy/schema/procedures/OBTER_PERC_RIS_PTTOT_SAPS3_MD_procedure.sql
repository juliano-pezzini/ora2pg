-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_perc_ris_pttot_saps3_md (ie_tipo_SAPS3_p text, qt_idade_p bigint, qt_dias_internacao_prev_p bigint, ie_aids_p text, ie_cirrose_p text, ie_malig_hematologica_p text, ie_icc_nyha_p text, ie_quimioterapia_p text, ie_metastase_p text, ie_famacos_vasoativos_p text, ie_origem_paciente_p bigint, ie_tipo_admissao_p bigint, ie_urgencia_p bigint, ie_tipo_operacao_p bigint, ie_neurologica_p bigint, ie_cardiologica_p bigint, ie_abdomem_p bigint, ie_hepatico_p bigint, ie_infec_nosocomial_p text, ie_infec_resp_p text, qt_glasgow_p bigint, qt_freq_cardiaca_p bigint, qt_pa_sistolica_p bigint, qt_temp_p bigint, qt_globulos_brancos_p bigint, qt_bilirrubina_p bigint, qt_creatinina_p bigint, qt_ph_p bigint, qt_plaquetas_p bigint, ie_oxigenacao_p bigint, qt_bmi_p bigint, ie_infec_extensao_p text, ie_infec_agente_p text, ie_disfuncao_renal_p text, ie_disfuncao_coagulacao_p text, ie_falencia_renal_p text, ie_falencia_coagulacao_p text, ie_falencia_cardiaca_p text, ie_falencia_respiratoria_p text, ie_falencia_snc_p text, pr_risco_america_sul_p bigint, pr_risco_america_sul_out_p INOUT bigint, qt_pontuacao_p INOUT bigint, qt_logit_p INOUT bigint ) AS $body$
DECLARE


	qt_pontuacao_w		    bigint := 0;
	qt_logit_w		        double precision;
	qt_logit_america_sul_w	double precision;

BEGIN
	--- Inicio MD1
	/* Idade */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_idade_p < 40) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_idade_p < 60) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (qt_idade_p < 70) then
			qt_pontuacao_w	:= qt_pontuacao_w + 9;
		elsif (qt_idade_p < 75) then
			qt_pontuacao_w	:= qt_pontuacao_w + 13;
		elsif (qt_idade_p < 80) then
			qt_pontuacao_w	:= qt_pontuacao_w + 15;
		elsif (qt_idade_p >= 80) then
			qt_pontuacao_w	:= qt_pontuacao_w + 18;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_idade_p < 40) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_idade_p < 60) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (qt_idade_p < 70) then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		elsif (qt_idade_p < 75) then
			qt_pontuacao_w	:= qt_pontuacao_w + 11;
		elsif (qt_idade_p < 80) then
			qt_pontuacao_w	:= qt_pontuacao_w + 14;
		elsif (qt_idade_p >= 80) then
			qt_pontuacao_w	:= qt_pontuacao_w + 17;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = 'PIR') then
		if (qt_idade_p < 40) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_idade_p < 60) then
			qt_pontuacao_w	:= qt_pontuacao_w + 4;
		elsif (qt_idade_p < 70) then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		elsif (qt_idade_p < 75) then
			qt_pontuacao_w	:= qt_pontuacao_w + 11;
		elsif (qt_idade_p < 80) then
			qt_pontuacao_w	:= qt_pontuacao_w + 14;
		elsif (qt_idade_p >= 80) then
			qt_pontuacao_w	:= qt_pontuacao_w + 16;
		end if;
	end if;

	/* Dias de internacao previos (LOS)*/

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_dias_internacao_prev_p < 14) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_dias_internacao_prev_p < 28) then
			qt_pontuacao_w	:= qt_pontuacao_w + 6;
		elsif (qt_dias_internacao_prev_p >= 28) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_dias_internacao_prev_p < 14) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_dias_internacao_prev_p >= 14) then
			qt_pontuacao_w	:= qt_pontuacao_w + 4;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = 'PIR') then
		if (qt_dias_internacao_prev_p < 14) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_dias_internacao_prev_p < 28) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (qt_dias_internacao_prev_p >= 28) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	end if;

	/* Comorbidades */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (ie_aids_p = 'S') then
			if (coalesce(pkg_i18n.get_user_locale, 'pt_BR') = 'de_AT' and  ie_cirrose_p = 'S') then
				qt_pontuacao_w	:= qt_pontuacao_w + 16;
			else
				qt_pontuacao_w	:= qt_pontuacao_w + 8;
			end if;
		end if;
		if (ie_malig_hematologica_p = 'S') then
			if (coalesce(pkg_i18n.get_user_locale, 'pt_BR') = 'de_AT' and  ie_icc_nyha_p = 'S') then
				qt_pontuacao_w	:= qt_pontuacao_w + 12;
			else
				qt_pontuacao_w	:= qt_pontuacao_w + 6;
			end if;
		end if;
		if (ie_quimioterapia_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 3;
		end if;
		if (ie_cirrose_p = 'S') then
			if (coalesce(pkg_i18n.get_user_locale, 'pt_BR') = 'de_AT' and  ie_aids_p = 'S') then
				qt_pontuacao_w	:= qt_pontuacao_w + 16;
			else
				qt_pontuacao_w	:= qt_pontuacao_w + 8;
			end if;
		end if;
		if (ie_metastase_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 11;
		end if;
		if (ie_icc_nyha_p = 'S') then
			if (coalesce(pkg_i18n.get_user_locale, 'pt_BR') = 'de_AT' and  ie_malig_hematologica_p = 'S') then
				qt_pontuacao_w	:= qt_pontuacao_w + 12;
			else
				qt_pontuacao_w	:= qt_pontuacao_w + 6;
			end if;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (ie_aids_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		end if;
		if (ie_quimioterapia_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 3;
		end if;
		if (ie_cirrose_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		end if;
		if (ie_metastase_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 11;
		end if;
		if (ie_icc_nyha_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = 'PIR') then
		if (ie_aids_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 9;
		end if;
		if (ie_cirrose_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		end if;
		if (ie_metastase_p = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 6;
		end if;
	end if;

	/* Farmacos vasoativos */

	if	((coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') or (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D')) and (ie_famacos_vasoativos_p = 'S') then
		qt_pontuacao_w	:= qt_pontuacao_w + 3;
	end if;

	/* Procedencia */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') in ('ADM','PIR')) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_origem_paciente_p,0);
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (coalesce(ie_origem_paciente_p,0) = 2) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (coalesce(ie_origem_paciente_p,0) in (3,4)) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	end if;

	/* Admissao paciente */

	if	((coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') or (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D')) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_tipo_admissao_p,0);
	end if;

	/* Urgencia */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_urgencia_p,0);
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (coalesce(ie_urgencia_p,0) in (1,3)) then
			qt_pontuacao_w	:= qt_pontuacao_w + 6;
		end if;
	end if;

	/* Tipo de operacao */

	if	((coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') or (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D')) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_tipo_operacao_p,0);
	end if;

	/* Neurologicas */

	if	((coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') or (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D')) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_neurologica_p,0);
	end if;

	/* Cardiologicas */

	if (ie_cardiologica_p = 500) then
		qt_pontuacao_w	:= qt_pontuacao_w + 5;
	elsif (coalesce(pkg_i18n.get_user_locale, 'pt_BR') = 'de_AT' and ie_cardiologica_p = -5 and ie_neurologica_p = -4) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_cardiologica_p + 1,0);
	elsif (coalesce(pkg_i18n.get_user_locale, 'pt_BR') = 'de_AT' and ie_cardiologica_p = 3 and ie_abdomem_p = 3) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_cardiologica_p + 6,0);
	else
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_cardiologica_p,0);
	end if;

	/* Abdomen */

	if	((coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') or (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D')) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_abdomem_p,0);
	end if;

	/* Sistema hepatico */

	if	((coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') or (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D')) then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_hepatico_p,0);
	end if;

	/* Infeccao nosocomial */

	if (coalesce(ie_infec_nosocomial_p,'N') = 'S') then
		qt_pontuacao_w	:= qt_pontuacao_w + 4;
	end if;

	/* Infeccao  respiratoria */

	if (ie_infec_resp_p = 'S') then
		if (coalesce(ie_tipo_SAPS3_p,'ADM') in ('ADM','PIR')) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
			qt_pontuacao_w	:= qt_pontuacao_w + 3;
		end if;
	end if;

	/* Escala de Glasgow */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_glasgow_p <= 4) then
			qt_pontuacao_w	:= qt_pontuacao_w + 15;
		elsif (qt_glasgow_p <= 5) then
			qt_pontuacao_w	:= qt_pontuacao_w + 10;
		elsif (qt_glasgow_p <= 6) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		elsif (qt_glasgow_p <= 12) then
			qt_pontuacao_w	:= qt_pontuacao_w + 2;
		else
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_glasgow_p <= 4) then
			qt_pontuacao_w	:= qt_pontuacao_w + 14;
		elsif (qt_glasgow_p <= 5) then
			qt_pontuacao_w	:= qt_pontuacao_w + 10;
		elsif (qt_glasgow_p <= 6) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		else
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	end if;

	/* Freq cardiaca (bpm) */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_freq_cardiaca_p < 120) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_freq_cardiaca_p < 160) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (qt_freq_cardiaca_p >= 160) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_freq_cardiaca_p < 120) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_freq_cardiaca_p < 160) then
			qt_pontuacao_w	:= qt_pontuacao_w + 4;
		elsif (qt_freq_cardiaca_p >= 160) then
			qt_pontuacao_w	:= qt_pontuacao_w + 6;
		end if;
	end if;

	/* PA max (mmHg) */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_pa_sistolica_p < 40) then
			qt_pontuacao_w	:= qt_pontuacao_w + 11;
		elsif (qt_pa_sistolica_p < 70) then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		elsif (qt_pa_sistolica_p < 120) then
			qt_pontuacao_w	:= qt_pontuacao_w + 3;
		elsif (qt_pa_sistolica_p >= 120) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_pa_sistolica_p < 40) then
			qt_pontuacao_w	:= qt_pontuacao_w + 10;
		elsif (qt_pa_sistolica_p < 70) then
			qt_pontuacao_w	:= qt_pontuacao_w + 9;
		elsif (qt_pa_sistolica_p < 120) then
			qt_pontuacao_w	:= qt_pontuacao_w + 3;
		elsif (qt_pa_sistolica_p >= 120) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	end if;

	/* Temp (oC) */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_temp_p < 35) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_temp_p < 35) then
			qt_pontuacao_w	:= qt_pontuacao_w + 6;
		end if;
	end if;

	/* Leococitos */

	if	((coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') or (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D')) then
		if (qt_globulos_brancos_p >= 15000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 2;
		end if;
	end if;

	/* Bilirrubina (mg%) */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_bilirrubina_p >= 2) and (qt_bilirrubina_p < 6) then
			qt_pontuacao_w	:= qt_pontuacao_w + 4;
		elsif (qt_bilirrubina_p >= 6) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_bilirrubina_p >= 2) then
			qt_pontuacao_w	:= qt_pontuacao_w + 3;
		end if;
	end if;

	/* Creatinina (mg%) */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_creatinina_p < 1.2) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_creatinina_p < 2) then
			qt_pontuacao_w	:= qt_pontuacao_w + 2;
		elsif (qt_creatinina_p < 3.5) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		elsif (qt_creatinina_p >= 3.5) then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_creatinina_p < 1.2) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		elsif (qt_creatinina_p < 2) then
			qt_pontuacao_w	:= qt_pontuacao_w + 2;
		elsif (qt_creatinina_p >= 2) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	end if;

	/* pH */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_ph_p <= 7.25) then
			qt_pontuacao_w	:= qt_pontuacao_w + 3;
		else
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_ph_p <= 7.3) then
			qt_pontuacao_w	:= qt_pontuacao_w + 2;
		else
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	end if;

	/* Plaquetas */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		if (qt_plaquetas_p < 20000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 13;
		elsif (qt_plaquetas_p < 50000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 8;
		elsif (qt_plaquetas_p < 100000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (qt_plaquetas_p >= 100000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_plaquetas_p < 20000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 14;
		elsif (qt_plaquetas_p < 50000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		elsif (qt_plaquetas_p < 100000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		elsif (qt_plaquetas_p >= 100000) then
			qt_pontuacao_w	:= qt_pontuacao_w + 0;
		end if;
	end if;

	/* Oxigenacao */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		qt_pontuacao_w	:= qt_pontuacao_w + coalesce(ie_oxigenacao_p,0);
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (coalesce(ie_oxigenacao_p,0) = 11) then
			qt_pontuacao_w	:= qt_pontuacao_w + 10;
		elsif (coalesce(ie_oxigenacao_p,0) = 7) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		elsif (coalesce(ie_oxigenacao_p,0) = 5) then
			qt_pontuacao_w	:= qt_pontuacao_w + 7;
		end if;
	end if;

	/* BMI */

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		if (qt_bmi_p IS NOT NULL AND qt_bmi_p::text <> '') and (qt_bmi_p < 18.5) then
			qt_pontuacao_w	:= qt_pontuacao_w + 4;
		end if;
	end if;

	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'PIR') then
	/* Infection Extension */

		if (coalesce(ie_infec_extensao_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 4;
		end if;

	/* Infection Agent */

		if (coalesce(ie_infec_agente_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 10;
		end if;

	/* Organ dysfunction */

		if (coalesce(ie_disfuncao_renal_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 4;
		end if;
		if (coalesce(ie_disfuncao_coagulacao_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		end if;

	/* Organ failure */

		if (coalesce(ie_falencia_renal_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 9;
		end if;
		if (coalesce(ie_falencia_coagulacao_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 9;
		end if;
		if (coalesce(ie_falencia_cardiaca_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		end if;
		if (coalesce(ie_falencia_respiratoria_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 5;
		end if;
		if (coalesce(ie_falencia_snc_p,'N') = 'S') then
			qt_pontuacao_w	:= qt_pontuacao_w + 9;
		end if;
	end if;

	pr_risco_america_sul_out_p := pr_risco_america_sul_p;
	
	if (coalesce(ie_tipo_SAPS3_p,'ADM') = 'ADM') then
		qt_pontuacao_w			:= qt_pontuacao_w + 16;
		qt_logit_w			:= ((-32.6659) + LN(qt_pontuacao_w + 20.5958) * 7.3068);
		qt_logit_america_sul_w		:= ((-64.5990) + LN(qt_pontuacao_w + 71.0599) * 13.2322);
		pr_risco_america_sul_out_p	:= dividir_sem_round_md(exp(qt_logit_america_sul_w),( 1 + exp(qt_logit_america_sul_w))) * 100;
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = '28D') then
		qt_pontuacao_w		:= qt_pontuacao_w + 20;
		qt_logit_w		:= ((-26.2477) + LN(qt_pontuacao_w + 4.5973) * 6.0521);
	elsif (coalesce(ie_tipo_SAPS3_p,'ADM') = 'PIR') then
		qt_logit_w		:= ((-46.67579) + LN(qt_pontuacao_w + 76.7688) * 9.8797);
	end if;

	pr_risco_america_sul_out_p  := pr_risco_america_sul_out_p;
	qt_pontuacao_p	            := qt_pontuacao_w;
	qt_logit_p                  := qt_logit_w;
	--- Fim MD1
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_perc_ris_pttot_saps3_md (ie_tipo_SAPS3_p text, qt_idade_p bigint, qt_dias_internacao_prev_p bigint, ie_aids_p text, ie_cirrose_p text, ie_malig_hematologica_p text, ie_icc_nyha_p text, ie_quimioterapia_p text, ie_metastase_p text, ie_famacos_vasoativos_p text, ie_origem_paciente_p bigint, ie_tipo_admissao_p bigint, ie_urgencia_p bigint, ie_tipo_operacao_p bigint, ie_neurologica_p bigint, ie_cardiologica_p bigint, ie_abdomem_p bigint, ie_hepatico_p bigint, ie_infec_nosocomial_p text, ie_infec_resp_p text, qt_glasgow_p bigint, qt_freq_cardiaca_p bigint, qt_pa_sistolica_p bigint, qt_temp_p bigint, qt_globulos_brancos_p bigint, qt_bilirrubina_p bigint, qt_creatinina_p bigint, qt_ph_p bigint, qt_plaquetas_p bigint, ie_oxigenacao_p bigint, qt_bmi_p bigint, ie_infec_extensao_p text, ie_infec_agente_p text, ie_disfuncao_renal_p text, ie_disfuncao_coagulacao_p text, ie_falencia_renal_p text, ie_falencia_coagulacao_p text, ie_falencia_cardiaca_p text, ie_falencia_respiratoria_p text, ie_falencia_snc_p text, pr_risco_america_sul_p bigint, pr_risco_america_sul_out_p INOUT bigint, qt_pontuacao_p INOUT bigint, qt_logit_p INOUT bigint ) FROM PUBLIC;

