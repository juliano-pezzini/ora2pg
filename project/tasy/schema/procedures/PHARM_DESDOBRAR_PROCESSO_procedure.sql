-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pharm_desdobrar_processo ( nr_processo_p bigint, nr_seq_pmh_p bigint, nr_seq_area_prep_p bigint, nr_processo_desdobrado_p INOUT bigint, nm_usuario_p text) AS $body$
DECLARE


nr_processo_desdobrado_w	bigint;


BEGIN

IF (nr_processo_p IS NOT NULL AND nr_processo_p::text <> '') THEN

	nr_processo_desdobrado_w := Desdobrar_Processo_PHARM(nr_processo_p, nr_seq_pmh_p, nr_seq_area_prep_p, nm_usuario_p, nr_processo_desdobrado_w);

	/*IF 	(NVL(nr_processo_desdobrado_w,0)  > 0) THEN

		Atualiza_Status_Processo_Adep(nr_processo_desdobrado_w, nr_seq_area_prep_p, 'G', 'P', SYSDATE, nm_usuario_p);

		UPDATE  adep_processo_area a
		SET     a.dt_preparo    = SYSDATE,
                a.nm_usuario_preparo 	= nm_usuario_p
                WHERE   a.nr_seq_processo    = nr_processo_desdobrado_w
                AND     NOT EXISTS (
					SELECT   1
                                        FROM     adep_processo_area x
                                        WHERE    x.nr_seq_processo    = nr_processo_desdobrado_w
                                        AND      x.nr_seq_area_prep   <> a.nr_seq_area_prep);

	END IF;*/
END IF;

COMMIT;

nr_processo_desdobrado_p := nr_processo_desdobrado_w;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pharm_desdobrar_processo ( nr_processo_p bigint, nr_seq_pmh_p bigint, nr_seq_area_prep_p bigint, nr_processo_desdobrado_p INOUT bigint, nm_usuario_p text) FROM PUBLIC;

