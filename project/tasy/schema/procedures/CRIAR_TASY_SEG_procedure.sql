-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE criar_tasy_seg () AS $body$
DECLARE


qt_registro_w			bigint;
ds_comando_w			varchar(2000);
nm_user_w			varchar(10)	:= chr(39) || 'Tasy' || chr(39);
ds_senha_w			varchar(10)	:= chr(39) || 'aloisk' || chr(39);
nm_usuario_w			varchar(10)	:= chr(39) || 'Tasy' || chr(39);
ds_licenca_w			varchar(10)	:= chr(39) || 'Total' || chr(39);


BEGIN


ds_comando_w	:=	'select count(*) from tasy_versao.tasy_seg';
qt_registro_w := Obter_Valor_dinamico(ds_comando_w, qt_registro_w);

if (qt_registro_w = 0) then
	ds_comando_w	:=	'create table tasy_versao.tasy_seg( '  ||
			' nm_user Varchar2(15), ds_senha varchar2(15), dt_atualizacao date, ' ||
			' nm_usuario Varchar2(15), ds_licenca varchar2(2000)) ';
	qt_registro_w := Obter_Valor_dinamico(ds_comando_w, qt_registro_w);

	ds_comando_w	:=	'insert into tasy_versao.tasy_seg values (' ||
			nm_user_w || ',' || ds_senha_w || ',sysdate,' ||
			nm_usuario_w || ',' || ds_licenca_w || ')';
	qt_registro_w := Obter_Valor_dinamico(ds_comando_w, qt_registro_w);
end if;


END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE criar_tasy_seg () FROM PUBLIC;

