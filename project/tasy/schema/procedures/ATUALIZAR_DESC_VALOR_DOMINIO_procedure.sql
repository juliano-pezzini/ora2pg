-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE atualizar_desc_valor_dominio () AS $body$
DECLARE


cd_dominio_w		integer;
ie_situacao_w		varchar(1);
vl_dominio_w		varchar(15);
ds_valor_dominio_w	varchar(255);

retorno_w	integer;
c01	  	integer;
ds_comando_w	varchar(2000);
i		integer	:= 0;


BEGIN

ds_comando_w :=	' select	cd_dominio,	' ||
		'		vl_dominio,	' ||
		'		ds_valor_dominio, ' ||
		'		ie_situacao ' ||
		' from		tasy_versao.valor_dominio ';

C01 := DBMS_SQL.OPEN_CURSOR;

DBMS_SQL.PARSE(C01, ds_comando_w, dbms_sql.Native);

DBMS_SQL.DEFINE_COLUMN(C01, 1, cd_dominio_w);
DBMS_SQL.DEFINE_COLUMN(C01, 2, vl_dominio_w,15);
DBMS_SQL.DEFINE_COLUMN(C01, 3, ds_valor_dominio_w,255);
DBMS_SQL.DEFINE_COLUMN(C01, 4, ie_situacao_w,1);

retorno_w := DBMS_SQL.execute(C01);

while( DBMS_SQL.FETCH_ROWS(C01) > 0 ) loop
	DBMS_SQL.COLUMN_VALUE(C01, 1, cd_dominio_w);
	DBMS_SQL.COLUMN_VALUE(C01, 2, vl_dominio_w);
	DBMS_SQL.COLUMN_VALUE(C01, 3, ds_valor_dominio_w);
	DBMS_SQL.COLUMN_VALUE(C01, 4, ie_situacao_w);

	update	valor_dominio
	set	ds_valor_dominio	= ds_valor_dominio_w,
		ie_situacao		= ie_situacao_w
	where	cd_dominio	= cd_dominio_w
	and	vl_dominio	= vl_dominio_w;

	if (i > 1000) then
		COMMIT;
		i	:= 0;
	else
		i	:= i + 1;
	end	if;
END LOOP;

DBMS_SQL.CLOSE_CURSOR(C01);

COMMIT;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualizar_desc_valor_dominio () FROM PUBLIC;

