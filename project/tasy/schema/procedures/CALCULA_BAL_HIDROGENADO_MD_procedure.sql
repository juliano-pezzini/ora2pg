-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE calcula_bal_hidrogenado_md (QT_PROT_INGERIDAS_P bigint, QT_PROT_INFUNDIDAS_P bigint, QT_UREIA_24H_P bigint, QT_NITROGENIO_URINARIO_24H_P bigint, QT_NITRO_FECAL_P bigint, QT_NITRO_PELE_P bigint, QT_NITRO_SONDA_P bigint, QT_NITRO_FISTULA_P bigint, QT_NITRO_INGERIDO_P INOUT bigint, QT_NITRO_URI_URE_P INOUT bigint, QT_NITRO_URI_NAO_URE_P INOUT bigint, QT_NITRO_EXCRETADO_P INOUT bigint, QT_SCORE_P INOUT bigint ) AS $body$
BEGIN
	--INICIO MD
	QT_NITRO_INGERIDO_P    := dividir_sem_round_md((coalesce(QT_PROT_INGERIDAS_P,0) + coalesce(QT_PROT_INFUNDIDAS_P,0)),6.25);

	QT_NITRO_URI_URE_P     :=	(QT_UREIA_24H_P * 0.47);

	QT_NITRO_URI_NAO_URE_P := 	(QT_NITRO_URI_URE_P * 0.2);

	QT_NITRO_EXCRETADO_P   :=  coalesce(QT_NITROGENIO_URINARIO_24H_P,0) +
                             coalesce(QT_NITRO_URI_NAO_URE_P,0)       + 
                             coalesce(QT_NITRO_FECAL_P,0)             + 
                             coalesce(QT_NITRO_PELE_P,0)              + 
                             coalesce(QT_NITRO_SONDA_P,0)             + 
                             coalesce(QT_NITRO_FISTULA_P,0);

	QT_SCORE_P			:= 	coalesce(QT_NITRO_INGERIDO_P,0) - coalesce(QT_NITRO_EXCRETADO_P,0);
	--FIM MD   
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE calcula_bal_hidrogenado_md (QT_PROT_INGERIDAS_P bigint, QT_PROT_INFUNDIDAS_P bigint, QT_UREIA_24H_P bigint, QT_NITROGENIO_URINARIO_24H_P bigint, QT_NITRO_FECAL_P bigint, QT_NITRO_PELE_P bigint, QT_NITRO_SONDA_P bigint, QT_NITRO_FISTULA_P bigint, QT_NITRO_INGERIDO_P INOUT bigint, QT_NITRO_URI_URE_P INOUT bigint, QT_NITRO_URI_NAO_URE_P INOUT bigint, QT_NITRO_EXCRETADO_P INOUT bigint, QT_SCORE_P INOUT bigint ) FROM PUBLIC;

