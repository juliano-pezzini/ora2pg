-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE insert_cpoe_inf_adic_copy ( nr_seq_cpoe_p bigint, nr_atendimento_p bigint, ie_item_type_p text, nr_seq_origin_cpoe_p bigint) AS $body$
DECLARE


nr_seq_inf_adic_w	cpoe_inf_adic.nr_sequencia%type;


BEGIN

select	nextval('cpoe_inf_adic_seq')
into STRICT	nr_seq_inf_adic_w
;

insert into cpoe_inf_adic(
	nr_sequencia,
	nr_atendimento,
	nm_usuario_nrec,
	nm_usuario,
	dt_atualizacao_nrec,
	dt_atualizacao,
	nr_seq_mat_cpoe,
	nr_seq_diet_cpoe,
	nr_seq_rec_cpoe,
	nr_seq_gaso_cpoe,
	nr_seq_exam_cpoe,
	nr_seq_dial_cpoe,
	nr_seq_hemo_cpoe,
	nr_seq_anat_cpoe,
	nr_cpoe_seq_copy)
values (nr_seq_inf_adic_w,
	nr_atendimento_p,
	obter_usuario_ativo,
	obter_usuario_ativo,
	clock_timestamp(),
	clock_timestamp(),
	CASE WHEN ie_item_type_p='M' THEN  nr_seq_cpoe_p  ELSE null END ,
	CASE WHEN ie_item_type_p='N' THEN  nr_seq_cpoe_p  ELSE null END ,
	CASE WHEN ie_item_type_p='R' THEN  nr_seq_cpoe_p  ELSE null END ,
	CASE WHEN ie_item_type_p='G' THEN  nr_seq_cpoe_p  ELSE null END ,
	CASE WHEN ie_item_type_p='P' THEN  nr_seq_cpoe_p  ELSE null END ,
	CASE WHEN ie_item_type_p='D' THEN  nr_seq_cpoe_p  ELSE null END ,
	CASE WHEN ie_item_type_p='H' THEN  nr_seq_cpoe_p  ELSE null END ,
	CASE WHEN ie_item_type_p='A' THEN  nr_seq_cpoe_p  ELSE null END ,
	nr_seq_origin_cpoe_p);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE insert_cpoe_inf_adic_copy ( nr_seq_cpoe_p bigint, nr_atendimento_p bigint, ie_item_type_p text, nr_seq_origin_cpoe_p bigint) FROM PUBLIC;

