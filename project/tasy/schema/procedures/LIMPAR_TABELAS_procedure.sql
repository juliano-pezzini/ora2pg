-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE limpar_tabelas () AS $body$
DECLARE

ds_erro_w varchar(512);

BEGIN

begin
	CALL gravar_processo_longo('LIMPAR_TABELAS','LIMPAR_TABELAS_REGRA_NEGOCIO',1);
	CALL limpar_tabelas_regra_negocio();
exception
when others then
	ds_erro_w := substr(SQLERRM(SQLSTATE),1,512);
	CALL tratar_erro_banco(ds_erro_w);
	CALL GRAVAR_LOG_TASY(88936,'LIMPAR_TABELAS_REGRA_NEGOCIO','TASY');
end;

begin
	CALL gravar_processo_longo('LIMPAR_TABELAS','LIMPAR_TABELAS_TEMPORARIAS',-1);
	CALL limpar_tabelas_temporarias();
exception
when others then
	ds_erro_w := substr(SQLERRM(SQLSTATE),1,512);
	CALL tratar_erro_banco(ds_erro_w);
	CALL GRAVAR_LOG_TASY(88936,'LIMPAR_TABELAS_TEMPORARIAS','TASY');
end;
begin
	CALL gravar_processo_longo('LIMPAR_TABELAS','LIMPAR_TABELA_LOG_TASY',-1);
	CALL limpar_tabela_log_tasy();
exception
when others then
	ds_erro_w := substr(SQLERRM(SQLSTATE),1,512);
	CALL tratar_erro_banco(ds_erro_w);
	CALL GRAVAR_LOG_TASY(88936,'LIMPAR_TABELA_LOG_TASY','TASY');
end;

begin
	CALL gravar_processo_longo('LIMPAR_TABELAS','LIMPAR_TABELA_LOG_TASY_TIPO',-1);
	CALL limpar_tabela_log_tasy_tipo();
exception
when others then
	ds_erro_w := substr(SQLERRM(SQLSTATE),1,512);
	CALL tratar_erro_banco(ds_erro_w);
	CALL GRAVAR_LOG_TASY(88936,'LIMPAR_TABELA_LOG_TASY_TIPO','TASY');
end;

begin
	CALL gravar_processo_longo('LIMPAR_TABELAS','LIMPAR_TABELA_LOG_LAB',-1);
	CALL limpar_tabela_log_lab();
exception
when others then
	ds_erro_w := substr(SQLERRM(SQLSTATE),1,512);
	CALL tratar_erro_banco(ds_erro_w);
	CALL GRAVAR_LOG_TASY(88936,'LIMPAR_TABELA_LOG_LAB','TASY');
end;

begin
	CALL gravar_processo_longo('LIMPAR_TABELAS','LIMPAR_TABELA_LAB_TIPO_LOG',-1);
	CALL limpar_tabela_lab_tipo_log();
exception
when others then
	ds_erro_w := substr(SQLERRM(SQLSTATE),1,512);
	CALL tratar_erro_banco(ds_erro_w);
	CALL GRAVAR_LOG_TASY(88936,'LIMPAR_TABELA_LAB_TIPO_LOG','TASY');
end;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE limpar_tabelas () FROM PUBLIC;

