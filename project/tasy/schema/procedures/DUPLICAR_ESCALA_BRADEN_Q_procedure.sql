-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_escala_braden_q ( nr_sequencia_p bigint, nm_usuario_p text, cd_pessoa_fisica_p text, nr_atendimento_p bigint) AS $body$
DECLARE


nr_sequencia_w	bigint;


BEGIN
if (nr_sequencia_p IS NOT NULL AND nr_sequencia_p::text <> '') then

	select	nextval('atend_escala_braden_q_seq')
	into STRICT	nr_sequencia_w
	;	

	insert into atend_escala_braden_q(			nr_sequencia,
								dt_atualizacao,
								nm_usuario,
								dt_avaliacao,
								qt_ponto,
								cd_pessoa_fisica,
								nr_atendimento,
								ie_perfusao,
								ie_percepcao_sensorial,
								ie_umidade,
								ie_atividade_fisica,
								ie_mobilidade,
								ie_nutricao,
								ie_friccao_cisalhamento,
								ie_situacao,
								cd_setor_atendimento)
						SELECT	nr_sequencia_w,
								clock_timestamp(),
								nm_usuario_p,
								clock_timestamp(),
								qt_ponto,
								cd_pessoa_fisica_p,
								nr_atendimento_p,
								ie_perfusao,
								ie_percepcao_sensorial,
								ie_umidade,
								ie_atividade_fisica,
								ie_mobilidade,
								ie_nutricao,
								ie_friccao_cisalhamento,
								'A',
								cd_setor_atendimento
						from	atend_escala_braden_q
						where	nr_sequencia = nr_sequencia_p;

	commit;
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_escala_braden_q ( nr_sequencia_p bigint, nm_usuario_p text, cd_pessoa_fisica_p text, nr_atendimento_p bigint) FROM PUBLIC;

