-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE inserir_regra_indicador ( nm_usuario_p text, cd_perfil_p text, ds_indicador_p text, nr_dimensao_p bigint, nr_informacao_p bigint, ie_periodo_p text, nr_seq_indicador_p bigint, nr_tipo_data_p bigint, ds_titulo_p text, ds_filtro_grafico_p text, ds_down_drill_p text default null) AS $body$
DECLARE


nr_sequencia_w	bigint;


BEGIN

if (coalesce(ds_filtro_grafico_p::text, '') = '') then
	begin
	insert into regra_indicador_visual(	nr_sequencia,
				dt_atualizacao,
				nm_usuario,
				dt_atualizacao_nrec,
				nm_usuario_nrec,
				cd_perfil,
				ds_indicador,
				nr_dimensao,
				nr_informacao,
				ie_periodo,
				nm_usuario_regra,
				nr_seq_indicador,
				nr_tipo_data,
				ds_titulo,
				ds_filtro_grafico)
		values (	nextval('regra_indicador_visual_seq'),
				clock_timestamp(),
				'Tasy',
				clock_timestamp(),
				'Tasy',
				cd_perfil_p,
				ds_indicador_p,
				nr_dimensao_p,
				nr_informacao_p,
				substr(ie_periodo_p,1,1),
				nm_usuario_p,
				nr_seq_indicador_p,
				nr_tipo_data_p,
				ds_titulo_p,
				ds_down_drill_p);
	end;
else
	begin
	insert into regra_indicador_visual(	nr_sequencia,
					dt_atualizacao,
					nm_usuario,
					dt_atualizacao_nrec,
					nm_usuario_nrec,
					cd_perfil,
					ds_indicador,
					nr_dimensao,
					nr_informacao,
					ie_periodo,
					nm_usuario_regra,
					nr_seq_indicador,
					nr_tipo_data,
					ds_titulo,
					ds_filtro_grafico)
			values (	nextval('regra_indicador_visual_seq'),
					clock_timestamp(),
					'Tasy',
					clock_timestamp(),
					'Tasy',
					cd_perfil_p,
					ds_indicador_p,
					nr_dimensao_p,
					nr_informacao_p,
					substr(ie_periodo_p,1,1),
					nm_usuario_p,
					nr_seq_indicador_p,
					nr_tipo_data_p,
					ds_titulo_p,
					ds_filtro_grafico_p);
	end;
end if;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE inserir_regra_indicador ( nm_usuario_p text, cd_perfil_p text, ds_indicador_p text, nr_dimensao_p bigint, nr_informacao_p bigint, ie_periodo_p text, nr_seq_indicador_p bigint, nr_tipo_data_p bigint, ds_titulo_p text, ds_filtro_grafico_p text, ds_down_drill_p text default null) FROM PUBLIC;

