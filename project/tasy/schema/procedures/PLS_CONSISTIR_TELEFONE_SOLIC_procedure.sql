-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_consistir_telefone_solic ( nr_telefone_p text, nr_ddi_p text, nm_usuario_p text, cd_estabelecimento_p bigint, ds_erro_p INOUT text) AS $body$
DECLARE


ie_consiste_telefone_w		varchar(1);
ds_erro_w			varchar(4000) := '';



BEGIN
/*aaschlote 10/01/2011 - OS 277993*/

ie_consiste_telefone_w	:= coalesce(obter_valor_param_usuario(1237, 25, obter_perfil_ativo, nm_usuario_p, cd_estabelecimento_p),'N');
-- Função 1237: OPS - Gestão Comercial
-- Parâmetro 25: Consistir a quantidade de dígitos do telefone, conforme o DDI informado
if (ie_consiste_telefone_w	= 'S') then
	if	((nr_ddi_p	= '055') or (nr_ddi_p	= '55')) then
		if (length(somente_numero(nr_telefone_p)) <> '8') then
			ds_erro_w := wheb_mensagem_pck.get_texto(280193);
			-- Mensagem: O número do telefone deve possuir 8 digitos. Favor verifique!
		end if;
	else
		if (length(somente_numero(nr_telefone_p)) <> '9') then
			ds_erro_w := wheb_mensagem_pck.get_texto(280196);
			-- Mensagem: O número do telefone deve possuir 9 digitos. Favor verifique!
		end if;
	end if;
end if;

ds_erro_p := ds_erro_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_consistir_telefone_solic ( nr_telefone_p text, nr_ddi_p text, nm_usuario_p text, cd_estabelecimento_p bigint, ds_erro_p INOUT text) FROM PUBLIC;

