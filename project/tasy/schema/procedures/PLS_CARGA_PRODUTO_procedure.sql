-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_carga_produto ( ds_plano_p text, cd_codigo_ant_p text, ie_segmentacao_p text, ie_situacao_p text, ie_tipo_contratacao_p text, ie_regulamentacao_p text, ie_abrangencia_p text, ie_franquia_p text, ie_acomodacao_p text, ie_coparticipacao_p text, ie_preco_p text, nm_fantasia_p text, ie_vinculo_ativo_p text, ie_vinculo_inativo_p text, ie_sem_vinculo_p text, ie_participacao_p text, ie_livre_escolha_p text, cd_plano_p text, ie_simulacao_preco_p text, ie_proposta_adesao_p text, ie_tipo_operacao_p text, nm_usuario_p text, cd_estabelecimento_p bigint) AS $body$
DECLARE


nr_seq_outorgante_w		bigint;


BEGIN

select	max(nr_sequencia)
into STRICT	nr_seq_outorgante_w
from	pls_outorgante
where	cd_estabelecimento	= cd_estabelecimento_p;

insert into w_pls_carga_produto(nr_sequencia, cd_estabelecimento, dt_atualizacao,
	nm_usuario, ds_plano, cd_codigo_ant,
	ie_segmentacao, ie_situacao, ie_tipo_contratacao,
	ie_regulamentacao, ie_abrangencia, ie_franquia,
	ie_acomodacao, ie_coparticipacao, ie_preco,
	nm_fantasia, ie_vinculo_ativo, ie_vinculo_inativo,
	ie_sem_vinculo, ie_participacao, ie_livre_escolha,
	cd_plano, ie_simulacao_preco, ie_proposta_adesao,
	ie_tipo_operacao, nr_seq_outorgante)
values (	nextval('w_pls_carga_produto_seq'), cd_estabelecimento_p, clock_timestamp(),
	nm_usuario_p, ds_plano_p, cd_codigo_ant_p,
	ie_segmentacao_p, ie_situacao_p, ie_tipo_contratacao_p,
	ie_regulamentacao_p, ie_abrangencia_p, ie_franquia_p,
	ie_acomodacao_p, ie_coparticipacao_p, ie_preco_p,
	nm_fantasia_p, ie_vinculo_ativo_p, ie_vinculo_inativo_p,
	ie_sem_vinculo_p, ie_participacao_p, ie_livre_escolha_p,
	cd_plano_p, ie_simulacao_preco_p, ie_proposta_adesao_p,
	ie_tipo_operacao_p, nr_seq_outorgante_w);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_carga_produto ( ds_plano_p text, cd_codigo_ant_p text, ie_segmentacao_p text, ie_situacao_p text, ie_tipo_contratacao_p text, ie_regulamentacao_p text, ie_abrangencia_p text, ie_franquia_p text, ie_acomodacao_p text, ie_coparticipacao_p text, ie_preco_p text, nm_fantasia_p text, ie_vinculo_ativo_p text, ie_vinculo_inativo_p text, ie_sem_vinculo_p text, ie_participacao_p text, ie_livre_escolha_p text, cd_plano_p text, ie_simulacao_preco_p text, ie_proposta_adesao_p text, ie_tipo_operacao_p text, nm_usuario_p text, cd_estabelecimento_p bigint) FROM PUBLIC;

