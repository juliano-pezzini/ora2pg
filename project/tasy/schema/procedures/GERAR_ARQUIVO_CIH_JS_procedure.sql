-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_arquivo_cih_js ( cd_interface_p bigint, nr_seq_lote_p bigint, ie_consiste_municipio_ibge_p text, ie_gerar_atend_sem_alta_uti_p text, ie_restringer_estab_atend_p text, ie_gerar_pac_cronico_p text, ds_motivo_alta_p text, ie_gera_atend_lote_p text, ds_tipo_atend_gera_p text, cd_convenio_gera_p bigint, cd_categoria_gera_p bigint, ds_plano_gera_p text, cd_estabelecimento_p bigint, nm_usuario_p text ) AS $body$
DECLARE


ds_versao_w	varchar(10) := '4.0.0.0';


BEGIN

if (cd_interface_p <> 1530)and (cd_interface_p <> 2066)then
	begin

	if (cd_interface_p = 1466) then
		begin

		ds_versao_w := '4.0.1.0';

		end;
	end if;

	CALL gerar_cih_versao4(nr_seq_lote_p, ie_consiste_municipio_ibge_p, ie_gerar_atend_sem_alta_uti_p, ie_restringer_estab_atend_p,
						ie_gerar_pac_cronico_p,ds_motivo_alta_p, ie_gera_atend_lote_p, ds_versao_w, cd_estabelecimento_p,nm_usuario_p);

	end;
end if;

if (cd_interface_p = 1530)then
	begin

	CALL gerar_cih_versao4_2(nr_seq_lote_p, ie_consiste_municipio_ibge_p, ie_gerar_atend_sem_alta_uti_p, ie_restringer_estab_atend_p,
						ie_gerar_pac_cronico_p,ds_motivo_alta_p, ie_gera_atend_lote_p, '4.0.2.0' , cd_estabelecimento_p, nm_usuario_p);

	end;
end if;

if (cd_interface_p = 2066)then
	begin

	CALL gerar_ciha_versao1_0(nr_seq_lote_p, ie_consiste_municipio_ibge_p, ie_gerar_atend_sem_alta_uti_p, ie_restringer_estab_atend_p,
				ie_gerar_pac_cronico_p, ds_motivo_alta_p, ie_gera_atend_lote_p, '1.0.0.0', ds_tipo_atend_gera_p, cd_convenio_gera_p,
				cd_categoria_gera_p, ds_plano_gera_p, cd_estabelecimento_p, nm_usuario_p, null);

	end;
end if;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_arquivo_cih_js ( cd_interface_p bigint, nr_seq_lote_p bigint, ie_consiste_municipio_ibge_p text, ie_gerar_atend_sem_alta_uti_p text, ie_restringer_estab_atend_p text, ie_gerar_pac_cronico_p text, ds_motivo_alta_p text, ie_gera_atend_lote_p text, ds_tipo_atend_gera_p text, cd_convenio_gera_p bigint, cd_categoria_gera_p bigint, ds_plano_gera_p text, cd_estabelecimento_p bigint, nm_usuario_p text ) FROM PUBLIC;

