-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE incluir_tit_pag_classif_html ( nr_titulo_p titulo_pagar_classif.nr_titulo%type, vl_titulo_p titulo_pagar_classif.vl_titulo%type, nm_usuario_p titulo_pagar_classif.nm_usuario%type, cd_conta_contabil_p titulo_pagar_classif.cd_conta_contabil%type, cd_centro_custo_p titulo_pagar_classif.cd_centro_custo%type, nr_seq_conta_financ_p titulo_pagar_classif.nr_seq_conta_financ%type, nr_seq_trans_fin_p titulo_pagar_classif.nr_seq_trans_fin%type, nr_contrato_p titulo_pagar_classif.nr_contrato%type, nr_seq_produto_p titulo_pagar_classif.nr_seq_produto%type, ds_observacao_p titulo_pagar_classif.ds_observacao%type) AS $body$
DECLARE


nr_seq_classif_w  titulo_pagar_classif.nr_sequencia%type;


BEGIN

select	coalesce(max(nr_sequencia),0) + 1
into STRICT	nr_seq_classif_w
from	titulo_pagar_classif
where	nr_titulo = nr_titulo_p;	

insert into titulo_pagar_classif(
        nr_sequencia,
        nr_titulo,
        vl_titulo,
        dt_atualizacao,
        nm_usuario,
        cd_conta_contabil,
        cd_centro_custo,
        nr_seq_conta_financ,
        nr_seq_trans_fin,
        nr_contrato,
        nr_seq_produto,
        ds_observacao)
      values (
        nr_seq_classif_w,
        nr_titulo_p,
        vl_titulo_p,
        clock_timestamp(),
        nm_usuario_p,
        cd_conta_contabil_p,
        cd_centro_custo_p,
        nr_seq_conta_financ_p,
        nr_seq_trans_fin_p,
        nr_contrato_p,
        nr_seq_produto_p,
        ds_observacao_p);

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE incluir_tit_pag_classif_html ( nr_titulo_p titulo_pagar_classif.nr_titulo%type, vl_titulo_p titulo_pagar_classif.vl_titulo%type, nm_usuario_p titulo_pagar_classif.nm_usuario%type, cd_conta_contabil_p titulo_pagar_classif.cd_conta_contabil%type, cd_centro_custo_p titulo_pagar_classif.cd_centro_custo%type, nr_seq_conta_financ_p titulo_pagar_classif.nr_seq_conta_financ%type, nr_seq_trans_fin_p titulo_pagar_classif.nr_seq_trans_fin%type, nr_contrato_p titulo_pagar_classif.nr_contrato%type, nr_seq_produto_p titulo_pagar_classif.nr_seq_produto%type, ds_observacao_p titulo_pagar_classif.ds_observacao%type) FROM PUBLIC;

