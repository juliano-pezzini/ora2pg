-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE update_cpoe_date_proc ( ds_seq_proc_check_list_p text, ds_seq_proc_uncheck_list_p text, ie_option text) AS $body$
BEGIN

/* ie_option 
D - Interval differentiated by dates
W - Differentiated interval
*/
if (ie_option = 'D') then
	if (coalesce(length(ds_seq_proc_check_list_p),0) > 0) then 
	EXECUTE
		'update 	cpoe_proc_diff_order_unit 
		set 	ie_selected = ''S'' 
		where 	nr_sequencia in ('||ds_seq_proc_check_list_p||')';
	end if;
	
	if (coalesce(length(ds_seq_proc_uncheck_list_p),0) > 0) then
    EXECUTE
		'update 	cpoe_proc_diff_order_unit 
		set 	ie_selected =''N'' 
		where 	nr_sequencia in ('||ds_seq_proc_uncheck_list_p||')';
	end if;
elsif (ie_option = 'W') then
	if (coalesce(length(ds_seq_proc_check_list_p),0) > 0) then 
    EXECUTE
		'update 	cpoe_weekday_proc_item 
		set 	ie_selected = ''S''
		where 	nr_sequencia in ('||ds_seq_proc_check_list_p||')';
	end if;
	
	if (coalesce(length(ds_seq_proc_uncheck_list_p),0) > 0) then
     EXECUTE
			'update 	cpoe_weekday_proc_item 
		set 	ie_selected = ''N''
		where 	nr_sequencia in ('||ds_seq_proc_uncheck_list_p||')';
	end if;
end if;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE update_cpoe_date_proc ( ds_seq_proc_check_list_p text, ds_seq_proc_uncheck_list_p text, ie_option text) FROM PUBLIC;

