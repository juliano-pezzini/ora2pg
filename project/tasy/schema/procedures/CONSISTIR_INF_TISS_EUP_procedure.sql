-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE consistir_inf_tiss_eup (ie_tipo_doenca_p text default null, qt_tempo_p bigint default 0, ie_unidade_tempo_p text default null, ds_mensagem_p INOUT text DEFAULT NULL) AS $body$
DECLARE


ie_param_consistir_w	varchar(1);
ie_consistir_w		varchar(1) := 'N';
ds_mensagem_w		varchar(4000) := '';


BEGIN
ie_param_consistir_w := Obter_Param_Usuario(916, 975, obter_perfil_ativo, obter_usuario_ativo, obter_estabelecimento_ativo, ie_param_consistir_w);


if (ie_param_consistir_w in ('S','A')) then
	begin

	if	((ie_tipo_doenca_p IS NOT NULL AND ie_tipo_doenca_p::text <> '') and
		((qt_tempo_p = 0) or (coalesce(ie_unidade_tempo_p::text, '') = '')))then
		ie_consistir_w :=  'S';
	end if;

	if	((qt_tempo_p > 0 ) and
		((coalesce(ie_tipo_doenca_p::text, '') = '') or (coalesce(ie_unidade_tempo_p::text, '') = ''))) then
		ie_consistir_w :=  'S';
	end if;

	if	((ie_unidade_tempo_p IS NOT NULL AND ie_unidade_tempo_p::text <> '') and
		((qt_tempo_p = 0) or (coalesce(ie_tipo_doenca_p::text, '') = ''))) then
		ie_consistir_w :=  'S';
	end if;

	if	((coalesce(ie_unidade_tempo_p::text, '') = '') and (qt_tempo_p = 0) and (coalesce(ie_tipo_doenca_p::text, '') = '')) then
		ie_consistir_w :=  'N';
	end if;

	if (ie_consistir_w = 'S') then
		select 	substr(obter_texto_tasy(207537,0),1,4000)
		into STRICT	ds_mensagem_w
		;
	end if;

	ds_mensagem_p := ds_mensagem_w;
	end;
end if;


end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE consistir_inf_tiss_eup (ie_tipo_doenca_p text default null, qt_tempo_p bigint default 0, ie_unidade_tempo_p text default null, ds_mensagem_p INOUT text DEFAULT NULL) FROM PUBLIC;

