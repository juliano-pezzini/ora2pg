-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_duplicar_item_conta (nr_seq_conta_proc_p pls_conta_proc.nr_sequencia%type, nr_seq_conta_mat_p pls_conta_mat.nr_sequencia%type, nm_usuario_p text, nr_seq_novo_item_p INOUT bigint ) AS $body$
DECLARE
 		
nr_seq_conta_proc_nv_w	pls_conta_proc.nr_sequencia%type;
nr_seq_conta_mat_nv_w	pls_conta_mat.nr_sequencia%type;


BEGIN
	if (nr_seq_conta_proc_p IS NOT NULL AND nr_seq_conta_proc_p::text <> '') then
	
		select	nextval('pls_conta_proc_seq')
		into STRICT	nr_seq_conta_proc_nv_w
		;
		
		insert into pls_conta_proc(
								nr_sequencia, dt_atualizacao, nm_usuario, dt_atualizacao_nrec, nm_usuario_nrec,
								dt_procedimento, cd_procedimento, ie_origem_proced, qt_procedimento, vl_unitario,
								vl_procedimento, ie_via_acesso, nr_seq_conta, dt_procedimento_imp, cd_procedimento_imp,
								qt_procedimento_imp, vl_unitario_imp, vl_procedimento_imp, ie_via_acesso_imp, dt_inicio_proc,
								dt_fim_proc, dt_inicio_proc_imp, dt_fim_proc_imp, tx_participacao, vl_participacao,
								ds_procedimento_imp, cd_tipo_tabela_imp, tx_reducao_acrescimo_imp, ie_tipo_despesa_imp,
								ie_tecnica_utilizada, vl_liberado, vl_glosa, vl_saldo, nr_seq_regra, ie_tipo_despesa,
								ie_situacao, ie_status, dt_liberacao, nm_usuario_liberacao, tx_item, nr_seq_tiss_tabela,
								nr_seq_regra_horario, vl_custo_operacional, vl_anestesista, vl_materiais, vl_medico,
								vl_auxiliares, nr_seq_regra_liberacao, ds_log, cd_conta_cred, cd_conta_deb,
								cd_historico, cd_conta_glosa_cred, cd_conta_glosa_deb, cd_historico_glosa,
								nr_seq_regra_ctb_deb, nr_seq_regra_ctb_cred, nr_seq_grupo_ans, nr_seq_honorario_crit,          
								nr_seq_dados_proc, nr_seq_pacote, vl_beneficiario, nr_seq_regra_pos_estab, ie_cobranca_prevista,           
								ds_justificativa, nr_seq_grupo_ans_sup, nr_lote_provisao, nr_lote_contabil, vl_coparticipacao,
								vl_liquido, cd_conta_copartic_cred,  cd_conta_copartic_deb, cd_historico_copartic,
								ie_valor_informado, ie_sca, nr_seq_mensalidade_item, nr_seq_tabela_sca,  nr_seq_cobertura, 
								nr_seq_item_sip, nr_seq_regra_vinculo, ie_tipo_cobertura, nr_seq_sca_cobertura,         
								nr_seq_tipo_limitacao, nr_seq_conta_medica, vl_proc_copartic, nr_seq_regra_copartic,          
								ie_tipo_contratacao, ie_segmentacao_sip, sg_uf_sip, cd_item_sip, cd_classificacao_sip,           
								cd_porte_anestesico, nr_seq_setor_atend, ie_autogerado, dt_item_sip, ie_ato_cooperado,        
								nr_seq_regra_cooperado, cd_medico_solicitante, tx_intercambio, vl_intercambio, tx_pcmso,                      
								vl_pcmso, cd_classif_cred, cd_classif_deb, nr_seq_regra_valor, ie_estagio_complemento,         
								nr_seq_proc_princ, nr_seq_exame_coleta, vl_exame_coleta, nr_seq_prest_pgto_coleta,       
								vl_liberado_regra, vl_pag_medico_conta, nr_seq_prest_pgto_medico, nr_seq_hon_crit_medico,       
								nr_seq_prestador_pgto, nr_seq_regra_qtde_exec, nr_seq_autogerado, vl_adic_procedimento,
								vl_adic_co, vl_adic_materiais, nr_auxiliares, vl_procedimento_ptu, vl_co_ptu,
								vl_material_ptu, nr_seq_regra_int, vl_proc_unitario, vl_prestador, nr_seq_conversao_pacote,
								nr_seq_regra_via_acesso, vl_total_procedimento, ie_vl_apresentado_sistema, ie_glosa,
								nr_seq_conta_int, ie_faturamento, qt_autorizado, nr_seq_pgto_aut, nr_seq_proc_ref,
								nr_seq_preco_autogerado, nr_seq_regra_lanc_aut, nr_seq_atend_item, ie_coparticipacao,
								ie_co_preco_operadora, nr_seq_evento, nr_seq_evento_prod, vl_lib_original, ie_repassa_medico,
								vl_total_partic, nr_seq_preco_pacote, nr_seq_esquema, ie_alterado_prestador, ie_criterio_horario,
								nr_seq_regra_glosa, tx_intercambio_imp, cd_conta_provisao_cred, vl_provisao,
								cd_conta_provisao_deb, cd_classif_prov_deb, cd_classif_prov_cred, nr_seq_esquema_prov,
								ie_cobranca_previa_servico, cd_classif_glosa_cred, cd_classif_glosa_deb, nr_seq_esquema_glosa,
								cd_historico_prov, nr_lote_contabil_prov, ie_origem_provisao, cd_historico_rev_prov,
								nr_lote_contab_pag, vl_taxa_servico, vl_taxa_servico_imp, vl_taxa_co, vl_taxa_co_imp,
								vl_taxa_material, vl_taxa_material_imp, nr_seq_evento_fat, nr_seq_regra_evento_fat,
								vl_material_ptu_imp, vl_co_ptu_imp, vl_procedimento_ptu_imp, cd_porte_anestesico_imp,
								nr_seq_regra_tx_proc, ie_tipo_liberacao, ie_lanc_manual_pos, vl_medico_original,
								vl_apresentado_xml, vl_liberado_hi, vl_liberado_co, vl_liberado_material, ie_valor_base,
								vl_taxa_ptu, ie_exige_autorizacao, nr_seq_participante_hi, nr_seq_grupo_serv, vl_glosa_hi,
								vl_glosa_co, vl_glosa_material, nr_seq_regra_recalculo, nr_seq_regra_preco_recalc,
								vl_calc_co_util, vl_calc_hi_util, vl_calc_mat_util, ie_regra_qtde_execucao,
								ie_via_obrigatoria, tx_medico, tx_custo_operacional, tx_material, vl_lib_taxa_co,
								vl_lib_taxa_material, vl_lib_taxa_servico, vl_glosa_taxa_co, vl_glosa_taxa_material,
								vl_glosa_taxa_servico, ie_gerar_sip, cd_sistema_ant, vl_calculado_ant, tx_auxiliares,
								tx_anestesista, ie_status_pagamento, nr_seq_agrup_analise, nr_seq_regra_canc_item_orig,
								nr_id_analise, ie_apenas_pagamento, nr_seq_regra_lib, tx_prestador_item, cd_conta_cred_tx_inter,         
								cd_conta_deb_tx_inter, cd_historico_tx_inter, cd_classif_tx_inter_cred, cd_classif_tx_inter_deb,       
								nr_seq_esquema_tx_inter, cd_conta_cred_tx_inter_glosa, cd_conta_deb_tx_inter_glosa,  
								cd_historico_tx_inter_glosa, nr_seq_esquema_tx_inter_glosa, cd_classif_tx_glosa_cred,       
								cd_classif_tx_glosa_deb, ie_pacote_ptu, ie_tx_manual, qt_ptu_item, cd_grau_partic_imp,             
								ds_especif_material, ie_forma_glosa_interc, ie_via_acesso_manual, nr_seq_rp_combinada,            
								qt_procedimento_original, cd_moeda_autogerado, nr_seq_regra_tx_inter, nr_seq_mvto_pag_cred,           
								nr_seq_mvto_pag_deb, nr_seq_mvto_prov_cred, nr_seq_mvto_prov_deb, nr_seq_mvto_rev_cred,           
								nr_seq_mvto_rev_deb, nr_lote_contabil_rev, hr_inicio_proc, hr_inicio_proc_imp,
								hr_fim_proc, hr_fim_proc_imp, dt_procedimento_imp_trunc, dt_dia_semana_imp,
								dt_inicio_proc_imp_referencia, dt_fim_proc_imp_referencia, dt_procedimento_referencia,
								dt_procedimento_trunc, dt_dia_semana, dt_inicio_proc_referencia, dt_fim_proc_referencia,
								ds_redundancia, nr_seq_regra_tipo_exec, vl_ch_honorario, vl_ch_custo_oper, vl_ch_custo_filme,             
								vl_ch_anestesista, nr_seq_tiss_regiao_boca, nr_seq_tiss_dente, nr_seq_tiss_face_dente,
								cd_dente_imp, cd_regiao_boca_imp, cd_dente, cd_regiao_boca, cd_face_dente,
								cd_face_dente_imp, qt_unidade_serv_imp, qt_unidade_serv, vl_proc_copartic_imp,
								ie_autorizado_imp, vl_medico_tab, vl_custo_operacional_tab, qt_filme_tab,
								ie_cobranca_prevista_inf, nr_seq_regra_acao_reemb, ie_tecnica_utilizada_imp,
								ie_acao_analise, cd_tipo_tabela, vl_porte, ie_alto_custo, vl_unitario_calc, 
								dt_procedimento_referencia_sh, nr_seq_imp, nr_seq_regra_conv, nr_seq_regra_pct_fat,           
								cd_historico_ajuste, nr_seq_nota_fiscal, nr_seq_guia, qt_excedido, nr_seq_proc_pct,              
								nr_seq_guia_proc,  nr_seq_regra_cobr_prev)
		(SELECT 					nr_seq_conta_proc_nv_w, clock_timestamp(), nm_usuario_p, clock_timestamp(), nm_usuario_p,            
								dt_procedimento, cd_procedimento, ie_origem_proced, qt_procedimento, vl_unitario,
								vl_procedimento, ie_via_acesso, nr_seq_conta, dt_procedimento_imp, cd_procedimento_imp,
								qt_procedimento_imp, vl_unitario_imp, vl_procedimento_imp, ie_via_acesso_imp, dt_inicio_proc,
								dt_fim_proc, dt_inicio_proc_imp, dt_fim_proc_imp, tx_participacao, vl_participacao,
								ds_procedimento_imp, cd_tipo_tabela_imp, tx_reducao_acrescimo_imp, ie_tipo_despesa_imp,
								ie_tecnica_utilizada, vl_liberado, vl_glosa, vl_saldo, nr_seq_regra, ie_tipo_despesa,
								ie_situacao, ie_status, dt_liberacao, nm_usuario_liberacao, tx_item, nr_seq_tiss_tabela,
								nr_seq_regra_horario, vl_custo_operacional, vl_anestesista, vl_materiais, vl_medico,
								vl_auxiliares, nr_seq_regra_liberacao, ds_log, cd_conta_cred, cd_conta_deb,
								cd_historico, cd_conta_glosa_cred, cd_conta_glosa_deb, cd_historico_glosa,
								nr_seq_regra_ctb_deb, nr_seq_regra_ctb_cred, nr_seq_grupo_ans, nr_seq_honorario_crit,          
								nr_seq_dados_proc, nr_seq_pacote, vl_beneficiario, nr_seq_regra_pos_estab, ie_cobranca_prevista,           
								ds_justificativa, nr_seq_grupo_ans_sup, nr_lote_provisao, nr_lote_contabil, vl_coparticipacao,
								vl_liquido, cd_conta_copartic_cred,  cd_conta_copartic_deb, cd_historico_copartic,
								ie_valor_informado, ie_sca, nr_seq_mensalidade_item, nr_seq_tabela_sca,  nr_seq_cobertura, 
								nr_seq_item_sip, nr_seq_regra_vinculo, ie_tipo_cobertura, nr_seq_sca_cobertura,         
								nr_seq_tipo_limitacao, nr_seq_conta_medica, vl_proc_copartic, nr_seq_regra_copartic,          
								ie_tipo_contratacao, ie_segmentacao_sip, sg_uf_sip, cd_item_sip, cd_classificacao_sip,           
								cd_porte_anestesico, nr_seq_setor_atend, ie_autogerado, dt_item_sip, ie_ato_cooperado,        
								nr_seq_regra_cooperado, cd_medico_solicitante, tx_intercambio, vl_intercambio, tx_pcmso,                      
								vl_pcmso, cd_classif_cred, cd_classif_deb, nr_seq_regra_valor, ie_estagio_complemento,         
								nr_seq_proc_princ, nr_seq_exame_coleta, vl_exame_coleta, nr_seq_prest_pgto_coleta,       
								vl_liberado_regra, vl_pag_medico_conta, nr_seq_prest_pgto_medico, nr_seq_hon_crit_medico,       
								nr_seq_prestador_pgto, nr_seq_regra_qtde_exec, nr_seq_autogerado, vl_adic_procedimento,
								vl_adic_co, vl_adic_materiais, nr_auxiliares, vl_procedimento_ptu, vl_co_ptu,
								vl_material_ptu, nr_seq_regra_int, vl_proc_unitario, vl_prestador, nr_seq_conversao_pacote,
								nr_seq_regra_via_acesso, vl_total_procedimento, ie_vl_apresentado_sistema, ie_glosa,
								nr_seq_conta_int, ie_faturamento, qt_autorizado, nr_seq_pgto_aut, nr_seq_proc_ref,
								nr_seq_preco_autogerado, nr_seq_regra_lanc_aut, nr_seq_atend_item, ie_coparticipacao,
								ie_co_preco_operadora, nr_seq_evento, nr_seq_evento_prod, vl_lib_original, ie_repassa_medico,
								vl_total_partic, nr_seq_preco_pacote, nr_seq_esquema, ie_alterado_prestador, ie_criterio_horario,
								nr_seq_regra_glosa, tx_intercambio_imp, cd_conta_provisao_cred, vl_provisao,
								cd_conta_provisao_deb, cd_classif_prov_deb, cd_classif_prov_cred, nr_seq_esquema_prov,
								ie_cobranca_previa_servico, cd_classif_glosa_cred, cd_classif_glosa_deb, nr_seq_esquema_glosa,
								cd_historico_prov, nr_lote_contabil_prov, ie_origem_provisao, cd_historico_rev_prov,
								nr_lote_contab_pag, vl_taxa_servico, vl_taxa_servico_imp, vl_taxa_co, vl_taxa_co_imp,
								vl_taxa_material, vl_taxa_material_imp, nr_seq_evento_fat, nr_seq_regra_evento_fat,
								vl_material_ptu_imp, vl_co_ptu_imp, vl_procedimento_ptu_imp, cd_porte_anestesico_imp,
								nr_seq_regra_tx_proc, ie_tipo_liberacao, ie_lanc_manual_pos, vl_medico_original,
								vl_apresentado_xml, vl_liberado_hi, vl_liberado_co, vl_liberado_material, ie_valor_base,
								vl_taxa_ptu, ie_exige_autorizacao, nr_seq_participante_hi, nr_seq_grupo_serv, vl_glosa_hi,
								vl_glosa_co, vl_glosa_material, nr_seq_regra_recalculo, nr_seq_regra_preco_recalc,
								vl_calc_co_util, vl_calc_hi_util, vl_calc_mat_util, ie_regra_qtde_execucao,
								ie_via_obrigatoria, tx_medico, tx_custo_operacional, tx_material, vl_lib_taxa_co,
								vl_lib_taxa_material, vl_lib_taxa_servico, vl_glosa_taxa_co, vl_glosa_taxa_material,
								vl_glosa_taxa_servico, ie_gerar_sip, cd_sistema_ant, vl_calculado_ant, tx_auxiliares,
								tx_anestesista, ie_status_pagamento, nr_seq_agrup_analise, nr_seq_regra_canc_item_orig,
								null, ie_apenas_pagamento, nr_seq_regra_lib, tx_prestador_item, cd_conta_cred_tx_inter,         
								cd_conta_deb_tx_inter, cd_historico_tx_inter, cd_classif_tx_inter_cred, cd_classif_tx_inter_deb,       
								nr_seq_esquema_tx_inter, cd_conta_cred_tx_inter_glosa, cd_conta_deb_tx_inter_glosa,  
								cd_historico_tx_inter_glosa, nr_seq_esquema_tx_inter_glosa, cd_classif_tx_glosa_cred,       
								cd_classif_tx_glosa_deb, ie_pacote_ptu, ie_tx_manual, qt_ptu_item, cd_grau_partic_imp,             
								ds_especif_material, ie_forma_glosa_interc, ie_via_acesso_manual, nr_seq_rp_combinada,            
								qt_procedimento_original, cd_moeda_autogerado, nr_seq_regra_tx_inter, nr_seq_mvto_pag_cred,           
								nr_seq_mvto_pag_deb, nr_seq_mvto_prov_cred, nr_seq_mvto_prov_deb, nr_seq_mvto_rev_cred,           
								nr_seq_mvto_rev_deb, nr_lote_contabil_rev, hr_inicio_proc, hr_inicio_proc_imp,
								hr_fim_proc, hr_fim_proc_imp, dt_procedimento_imp_trunc, dt_dia_semana_imp,
								dt_inicio_proc_imp_referencia, dt_fim_proc_imp_referencia, dt_procedimento_referencia,
								dt_procedimento_trunc, dt_dia_semana, dt_inicio_proc_referencia, dt_fim_proc_referencia,
								ds_redundancia, nr_seq_regra_tipo_exec, vl_ch_honorario, vl_ch_custo_oper, vl_ch_custo_filme,             
								vl_ch_anestesista, nr_seq_tiss_regiao_boca, nr_seq_tiss_dente, nr_seq_tiss_face_dente,
								cd_dente_imp, cd_regiao_boca_imp, cd_dente, cd_regiao_boca, cd_face_dente,
								cd_face_dente_imp, qt_unidade_serv_imp, qt_unidade_serv, vl_proc_copartic_imp,
								ie_autorizado_imp, vl_medico_tab, vl_custo_operacional_tab, qt_filme_tab,
								ie_cobranca_prevista_inf, nr_seq_regra_acao_reemb, ie_tecnica_utilizada_imp,
								ie_acao_analise, cd_tipo_tabela, vl_porte, ie_alto_custo, vl_unitario_calc, 
								dt_procedimento_referencia_sh, nr_seq_imp, nr_seq_regra_conv, nr_seq_regra_pct_fat,           
								cd_historico_ajuste, nr_seq_nota_fiscal, nr_seq_guia, qt_excedido, nr_seq_proc_pct,              
								nr_seq_guia_proc, nr_seq_regra_cobr_prev
		from	pls_conta_proc
		where nr_sequencia = nr_seq_conta_proc_p);
		commit;
		
		CALL pls_cta_proc_mat_regra_pck.cria_copia_regra_proc_tiss(nr_seq_conta_proc_p, nr_seq_conta_proc_nv_w, 'S', nm_usuario_p);
		
		select 	max(nr_sequencia)
		into STRICT 	nr_seq_novo_item_p 
		from pls_conta_proc;
		
		insert into pls_proc_participante(
								   nr_sequencia,dt_atualizacao,nm_usuario, dt_atualizacao_nrec, nm_usuario_nrec, nr_seq_conta_proc
								 , cd_medico, nr_cpf_imp, nm_medico_executor_imp, sg_conselho_imp, nr_crm_imp, uf_crm_imp
								 , ie_funcao_medico_imp, cd_cgc_imp, cd_medico_imp, nr_seq_grau_partic, nr_seq_cbo_saude
								 , cd_cbo_saude_imp, vl_participante, vl_honorario_medico, nr_seq_honorario_crit
								 , ie_conselho_profissional, nr_seq_prestador_pgto, cd_guia, nr_seq_conselho, cd_prestador_imp
								 , nr_seq_prestador, uf_conselho, vl_apresentado, ie_atualizado, ie_insercao_manual, vl_calculado
								 , ie_glosa, vl_glosa, nr_seq_regra, ie_status, vl_digitado_complemento, qt_liberada
								 , ie_gerada_cta_honorario, cd_sistema_ant, vl_calculado_ant, ie_status_pagamento, nr_id_analise
								 , cd_grau_partic_imp, vl_pos_estab, nr_seq_prest_inter, nr_seq_cp_comb_filtro, nr_seq_cp_comb_entao
								 , nr_seq_cp_comb_filtro_cop, nr_seq_cp_comb_cop_entao, nr_seq_imp, vl_negociado, vl_medico
								 , vl_anestesista, vl_auxiliares, vl_medico_base, vl_anestesista_base, vl_auxiliares_base
								 , ie_glosa_pos_estab, ie_incluido_pos_estab)
		SELECT  				   nextval('pls_proc_participante_seq'), clock_timestamp(), nm_usuario_p, clock_timestamp(), nm_usuario_p,
								   nr_seq_novo_item_p, cd_medico, nr_cpf_imp, nm_medico_executor_imp, sg_conselho_imp, nr_crm_imp                
								 , uf_crm_imp, ie_funcao_medico_imp, cd_cgc_imp, cd_medico_imp, nr_seq_grau_partic, nr_seq_cbo_saude
								 , cd_cbo_saude_imp, vl_participante, vl_honorario_medico, nr_seq_honorario_crit, ie_conselho_profissional
								 , nr_seq_prestador_pgto, cd_guia, nr_seq_conselho, cd_prestador_imp, nr_seq_prestador, uf_conselho
								 , vl_apresentado, ie_atualizado, ie_insercao_manual, vl_calculado, ie_glosa, vl_glosa, nr_seq_regra
								 , ie_status, vl_digitado_complemento, qt_liberada, ie_gerada_cta_honorario, cd_sistema_ant, vl_calculado_ant
								 , ie_status_pagamento, nr_id_analise, cd_grau_partic_imp, vl_pos_estab, nr_seq_prest_inter, nr_seq_cp_comb_filtro
								 , nr_seq_cp_comb_entao, nr_seq_cp_comb_filtro_cop, nr_seq_cp_comb_cop_entao, nr_seq_imp, vl_negociado, vl_medico
								 , vl_anestesista, vl_auxiliares, vl_medico_base, vl_anestesista_base, vl_auxiliares_base, ie_glosa_pos_estab
								 , ie_incluido_pos_estab 
		 from pls_proc_participante
		where nr_seq_conta_proc = nr_seq_conta_proc_p;
		commit;

		
	elsif (nr_seq_conta_mat_p IS NOT NULL AND nr_seq_conta_mat_p::text <> '') then
	
		select	nextval('pls_conta_mat_seq')
		into STRICT	nr_seq_conta_mat_nv_w
		;
		
		insert into pls_conta_mat(
					nr_sequencia, dt_atualizacao, nm_usuario, dt_atualizacao_nrec,
					nm_usuario_nrec, qt_material, vl_unitario, vl_material,
					ie_origem_preco, nr_seq_conta, cd_material_imp, qt_material_imp, 
					vl_unitario_imp, vl_material_imp, ie_origem_preco_imp, dt_atendimento,
					dt_inicio_atend, dt_fim_atend, dt_atendimento_imp, dt_inicio_atend_imp, 
					dt_fim_atend_imp ,tx_participacao, vl_participacao, ds_material_imp, 
					tx_reducao_acrescimo, tx_reducao_acrescimo_imp, ie_tipo_despesa_imp, 
					dt_item_imp, cd_barras_imp, ie_tipo_despesa, vl_glosa, vl_liberado, 
					vl_saldo, nr_seq_regra, ie_situacao, ie_status, dt_liberacao,
					nm_usuario_liberacao, nr_seq_tiss_tabela, nr_seq_material,
					cd_conta_deb, cd_historico, cd_conta_glosa_cred, cd_conta_glosa_deb,
					cd_historico_glosa, cd_conta_cred, nr_seq_regra_ctb_deb,
					nr_seq_regra_ctb_cred, nr_seq_grupo_ans, vl_gerado, vl_beneficiario,
					nr_seq_regra_pos_estab, nr_seq_grupo_ans_sup, nr_lote_provisao,   
					nr_lote_contabil, nr_seq_item_sip, nr_seq_cobertura, 
					ie_tipo_cobertura, nr_seq_sca_cobertura, nr_seq_tipo_limitacao,
					nr_seq_conta_medica, vl_mat_copartic, nr_seq_regra_copartic,
					nr_seq_setor_atend, nr_seq_prest_fornec, ie_ato_cooperado,   
					ie_tipo_contratacao, ie_segmentacao_sip , sg_uf_sip, cd_item_sip,
					cd_classificacao_sip, dt_item_sip, ie_valor_informado,
					nr_seq_regra_cooperado, tx_intercambio, vl_intercambio, tx_pcmso,  
					vl_pcmso, cd_classif_cred, cd_classif_deb, nr_seq_regra_valor,
					ie_estagio_complemento, nr_seq_pacote, nr_seq_mat_princ, vl_liberado_regra,  
					ie_autorizado, vl_adic_material, dt_emissao_nf, vl_material_ptu, 
					nr_seq_regra_int, dt_recebimento_nf, ie_glosa, nr_seq_regra_qtde_exec,
					qt_autorizado, ds_log, nr_seq_pgto_aut, nr_seq_regra_lanc_aut,
					nr_seq_atend_item, ie_coparticipacao, ie_co_preco_operadora, nr_seq_evento,  
					nr_seq_evento_prod, vl_lib_original, nr_seq_preco_pacote, nr_seq_esquema,
					ie_alterado_prestador, ie_vl_apresentado_sistema, nr_seq_regra_glosa,
					ie_cobranca_previa_servico, cd_classif_glosa_cred, cd_classif_glosa_deb,
					nr_seq_esquema_glosa, cd_conta_provisao_cred, cd_conta_provisao_deb,
					vl_provisao, cd_classif_prov_deb, cd_classif_prov_cred, nr_seq_esquema_prov,
					cd_historico_prov, nr_lote_contabil_prov, ie_origem_provisao, cd_historico_rev_prov,
					nr_lote_contab_pag, nr_seq_evento_fat, nr_seq_regra_evento_fat, vl_taxa_material,  
					tx_intercambio_imp, vl_taxa_material_imp, ie_lanc_manual_pos, ie_valor_base,  
					ie_exige_autorizacao, nr_seq_regra_recalculo, nr_seq_regra_preco_recalc,  
					nr_nota_fiscal, vl_lib_taxa_material, vl_glosa_taxa_material,
					cd_sistema_ant, vl_calculado_ant, ie_status_pagamento, nr_id_analise,
					ds_justificativa, ie_apenas_pagamento, nr_seq_regra_lib, cd_conta_cred_tx_inter, 
					cd_conta_deb_tx_inter, cd_classif_tx_inter_cred, cd_classif_tx_inter_deb,
					cd_historico_tx_inter, nr_seq_esquema_tx_inter, cd_conta_cred_tx_inter_glosa,   
					cd_conta_deb_tx_inter_glosa, cd_classif_tx_glosa_cred, cd_classif_tx_glosa_deb,
					cd_historico_tx_inter_glosa, nr_seq_esquema_tx_inter_glosa, ie_pacote_ptu, 
					cd_sequencial_prestador, nr_seq_solic_lib_mat_med, cd_unidade_medida,  
					cd_unidade_medida_imp, nr_registro_anvisa, nr_registro_anvisa_imp,
					cd_ref_fabricante_imp, ds_aut_funcionamento_imp, cd_material_tuss, 
					cd_tipo_tabela_imp, ds_especif_material, nr_seq_tuss_mat_item, nr_seq_regra_tx_inter, 
					nr_seq_mvto_pag_cred, nr_seq_mvto_pag_deb, nr_seq_mvto_prov_cred,  
					nr_seq_mvto_prov_deb, nr_seq_mvto_rev_cred, nr_seq_mvto_rev_deb,
					nr_lote_contabil_rev, hr_inicio_mat, hr_inicio_mat_imp, hr_fim_mat,
					hr_fim_mat_imp, dt_atendimento_imp_referencia, dt_atendimento_imp_trunc,   
					dt_dia_semana_imp, dt_inicio_atend_mat_imp, dt_fim_atend_mat_imp, 
					dt_atendimento_referencia, dt_atendimento_trunc, dt_inicio_atend_mat,
					dt_fim_atend_mat, dt_dia_semana, ds_redundancia, cd_material,
					ie_cobranca_prevista_inf, nr_seq_regra_acao_reemb, cd_ref_fabricante, 
					ds_aut_funcionamento, ie_acao_analise, ie_alto_custo, nr_seq_nota_fiscal,
					vl_material_imp_xml, ie_cobranca_prevista, nr_seq_imp, nr_seq_regra_pct_fat,  
					cd_historico_ajuste, nr_seq_regra_conv, vl_unitario_val, ie_tipo_liberacao,
					nr_seq_proc_pct, tx_prestador_item, nr_seq_guia, nr_seq_guia_mat,
					det_reg_anvisa, nr_seq_mat_ref, nr_seq_regra_canc_item_orig, 
					nr_seq_regra_cobr_prev, vl_mat_cobranca_prev)
			(SELECT 	nr_seq_conta_mat_nv_w, clock_timestamp(), nm_usuario_p, clock_timestamp(),
					nm_usuario_p, qt_material, vl_unitario, vl_material, 
					ie_origem_preco, nr_seq_conta, cd_material_imp, qt_material_imp, 
					vl_unitario_imp, vl_material_imp, ie_origem_preco_imp, dt_atendimento,
					dt_inicio_atend, dt_fim_atend, dt_atendimento_imp, dt_inicio_atend_imp, 
					dt_fim_atend_imp ,tx_participacao, vl_participacao, ds_material_imp, 
					tx_reducao_acrescimo, tx_reducao_acrescimo_imp, ie_tipo_despesa_imp, 
					dt_item_imp, cd_barras_imp, ie_tipo_despesa, vl_glosa, vl_liberado, 
					vl_saldo, nr_seq_regra, ie_situacao, ie_status, dt_liberacao,
					nm_usuario_liberacao, nr_seq_tiss_tabela, nr_seq_material,
					cd_conta_deb, cd_historico, cd_conta_glosa_cred, cd_conta_glosa_deb,
					cd_historico_glosa, cd_conta_cred, nr_seq_regra_ctb_deb,
					nr_seq_regra_ctb_cred, nr_seq_grupo_ans, vl_gerado, vl_beneficiario,
					nr_seq_regra_pos_estab, nr_seq_grupo_ans_sup, nr_lote_provisao,   
					nr_lote_contabil, nr_seq_item_sip, nr_seq_cobertura, 
					ie_tipo_cobertura, nr_seq_sca_cobertura, nr_seq_tipo_limitacao,
					nr_seq_conta_medica, vl_mat_copartic, nr_seq_regra_copartic,
					nr_seq_setor_atend, nr_seq_prest_fornec, ie_ato_cooperado,   
					ie_tipo_contratacao, ie_segmentacao_sip , sg_uf_sip, cd_item_sip,
					cd_classificacao_sip, dt_item_sip, ie_valor_informado,
					nr_seq_regra_cooperado, tx_intercambio, vl_intercambio, tx_pcmso,  
					vl_pcmso, cd_classif_cred, cd_classif_deb, nr_seq_regra_valor,
					ie_estagio_complemento, nr_seq_pacote, nr_seq_mat_princ, vl_liberado_regra,  
					ie_autorizado, vl_adic_material, dt_emissao_nf, vl_material_ptu, 
					nr_seq_regra_int, dt_recebimento_nf, ie_glosa, nr_seq_regra_qtde_exec,
					qt_autorizado, ds_log, nr_seq_pgto_aut, nr_seq_regra_lanc_aut,
					nr_seq_atend_item, ie_coparticipacao, ie_co_preco_operadora, nr_seq_evento,  
					nr_seq_evento_prod, vl_lib_original, nr_seq_preco_pacote, nr_seq_esquema,
					ie_alterado_prestador, ie_vl_apresentado_sistema, nr_seq_regra_glosa,
					ie_cobranca_previa_servico, cd_classif_glosa_cred, cd_classif_glosa_deb,
					nr_seq_esquema_glosa, cd_conta_provisao_cred, cd_conta_provisao_deb,
					vl_provisao, cd_classif_prov_deb, cd_classif_prov_cred, nr_seq_esquema_prov,
					cd_historico_prov, nr_lote_contabil_prov, ie_origem_provisao, cd_historico_rev_prov,
					nr_lote_contab_pag, nr_seq_evento_fat, nr_seq_regra_evento_fat, vl_taxa_material,  
					tx_intercambio_imp, vl_taxa_material_imp, ie_lanc_manual_pos, ie_valor_base,  
					ie_exige_autorizacao, nr_seq_regra_recalculo, nr_seq_regra_preco_recalc,  
					nr_nota_fiscal, vl_lib_taxa_material, vl_glosa_taxa_material,
					cd_sistema_ant, vl_calculado_ant, ie_status_pagamento, null,
					ds_justificativa, ie_apenas_pagamento, nr_seq_regra_lib, cd_conta_cred_tx_inter, 
					cd_conta_deb_tx_inter, cd_classif_tx_inter_cred, cd_classif_tx_inter_deb,
					cd_historico_tx_inter, nr_seq_esquema_tx_inter, cd_conta_cred_tx_inter_glosa,   
					cd_conta_deb_tx_inter_glosa, cd_classif_tx_glosa_cred, cd_classif_tx_glosa_deb,
					cd_historico_tx_inter_glosa, nr_seq_esquema_tx_inter_glosa, ie_pacote_ptu, 
					cd_sequencial_prestador, nr_seq_solic_lib_mat_med, cd_unidade_medida,  
					cd_unidade_medida_imp, nr_registro_anvisa, nr_registro_anvisa_imp,
					cd_ref_fabricante_imp, ds_aut_funcionamento_imp, cd_material_tuss, 
					cd_tipo_tabela_imp, ds_especif_material, nr_seq_tuss_mat_item, nr_seq_regra_tx_inter, 
					nr_seq_mvto_pag_cred, nr_seq_mvto_pag_deb, nr_seq_mvto_prov_cred,  
					nr_seq_mvto_prov_deb, nr_seq_mvto_rev_cred, nr_seq_mvto_rev_deb,
					nr_lote_contabil_rev, hr_inicio_mat, hr_inicio_mat_imp, hr_fim_mat,
					hr_fim_mat_imp, dt_atendimento_imp_referencia, dt_atendimento_imp_trunc,   
					dt_dia_semana_imp, dt_inicio_atend_mat_imp, dt_fim_atend_mat_imp, 
					dt_atendimento_referencia, dt_atendimento_trunc, dt_inicio_atend_mat,
					dt_fim_atend_mat, dt_dia_semana, ds_redundancia, cd_material,
					ie_cobranca_prevista_inf, nr_seq_regra_acao_reemb, cd_ref_fabricante, 
					ds_aut_funcionamento, ie_acao_analise, ie_alto_custo, nr_seq_nota_fiscal,
					vl_material_imp_xml, ie_cobranca_prevista, nr_seq_imp, nr_seq_regra_pct_fat,  
					cd_historico_ajuste, nr_seq_regra_conv, vl_unitario_val, ie_tipo_liberacao,
					nr_seq_proc_pct, tx_prestador_item, nr_seq_guia, nr_seq_guia_mat,
					det_reg_anvisa, nr_seq_mat_ref, nr_seq_regra_canc_item_orig, 
					nr_seq_regra_cobr_prev, vl_mat_cobranca_prev
			from pls_conta_mat
			where nr_sequencia = nr_seq_conta_mat_p);
			commit;
			
			CALL pls_cta_proc_mat_regra_pck.cria_copia_regra_mat_tiss(nr_seq_conta_mat_p, nr_seq_conta_mat_nv_w, 'S', nm_usuario_p);
			
			select 	max(nr_sequencia)
			into STRICT 	nr_seq_novo_item_p 
			from pls_conta_mat;
	end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_duplicar_item_conta (nr_seq_conta_proc_p pls_conta_proc.nr_sequencia%type, nr_seq_conta_mat_p pls_conta_mat.nr_sequencia%type, nm_usuario_p text, nr_seq_novo_item_p INOUT bigint ) FROM PUBLIC;

