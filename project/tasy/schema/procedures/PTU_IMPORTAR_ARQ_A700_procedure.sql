-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ptu_importar_arq_a700 ( ds_conteudo_p text, nm_arquivo_p text, cd_estabelecimento_p bigint, nm_usuario_p text, ie_versao_p INOUT text) AS $body$
DECLARE


/*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:		IMPORTAcAO DO ARQUIVO A700 - UTILIZADO NO DELPHI
-------------------------------------------------------------------------------------------------------------------

Locais de chamada direta: 
[  ]  Objetos do dicionario [X] Tasy (Delphi/Java) [  ] Portal [  ]  Relatorios [ ] Outros:
 ------------------------------------------------------------------------------------------------------------------

Pontos de atencao:	Transacao - Versao PTU

F16 - 5.0	F17 - 6.0	F18 - 6.1	F19 - 8.0	F20 - 9.0	F21 - 10.0	F22 - 10.0a	F23 - 11.0	F24 - 11.3
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/ 


BEGIN
-- OBTER A VERSAO DE TRANSACAO
if (coalesce(ie_versao_p::text, '') = '') then
	select	substr(ds_conteudo_p,48,2)
	into STRICT	ie_versao_p
	;
end if;

-- VERSOES ANTERIORES AO PTU 5.0
if (somente_numero(ie_versao_p) < 16) then
	CALL ptu_importar_servico(ds_conteudo_p, cd_estabelecimento_p, nm_usuario_p, nm_arquivo_p);

-- VERSAO PTU 5.0
elsif (ie_versao_p = '16') then
	ptu_importar_arq_a700_v50(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);

-- VERSAO PTU 6.0
elsif (ie_versao_p = '17') then
	ptu_importar_arq_a700_v60(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);

-- VERSAO PTU 6.1
elsif (ie_versao_p = '18') then
	ptu_importar_arq_a700_v61(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);
	
-- VERSAO PTU 8.0
elsif (ie_versao_p = '19') then
	ptu_importar_arq_a700_v80(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);
	
-- VERSAO PTU 9.0
elsif (ie_versao_p = '20') then
	ptu_importar_arq_a700_v90(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);

-- VERSAO PTU 10.0
elsif (ie_versao_p = '21') then
	ptu_importar_arq_a700_v100(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);

-- VERSAO PTU 10.0a
elsif (ie_versao_p = '22') then
	ptu_importar_arq_a700_v100a(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);

-- VERSAO PTU 11.0
elsif (ie_versao_p = '23') then
	ie_versao_p := ptu_importar_arq_a700_v110(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);

-- VERSAO PTU 11a
elsif (ie_versao_p = '24') then
	ie_versao_p := ptu_importar_arq_a700_v110a(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);
-- VERSAO PTU 12.0
elsif (ie_versao_p = '25') then
	ie_versao_p := ptu_importar_arq_a700_v120(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);
	
-- VERSAO PTU 13.0
elsif (ie_versao_p = '26') then
	ie_versao_p := ptu_importar_arq_a700_v130(ds_conteudo_p, nm_arquivo_p, cd_estabelecimento_p, nm_usuario_p, ie_versao_p);
end if;

--commit;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ptu_importar_arq_a700 ( ds_conteudo_p text, nm_arquivo_p text, cd_estabelecimento_p bigint, nm_usuario_p text, ie_versao_p INOUT text) FROM PUBLIC;

