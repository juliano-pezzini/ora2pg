-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ctb_duplicar_linear_detalhado ( cd_estabelecimento_p bigint, nr_seq_cenario_origem_p bigint, nr_seq_cenario_destino_p bigint, nm_usuario_p text) AS $body$
DECLARE




c01 CURSOR FOR
SELECT	a.nr_seq_cenario,
	a.cd_centro_custo,
	a.cd_conta_contabil,
	a.ds_detalhe,
	a.cd_pessoa_fisica,
	a.cd_cnpj,
	a.vl_orcado_1,
	a.vl_orcado_2,
	a.vl_orcado_3,
	a.vl_orcado_4,
	a.vl_orcado_5,
	a.vl_orcado_6,
	a.vl_orcado_7,
	a.vl_orcado_8,
	a.vl_orcado_9,
	a.vl_orcado_10,
	a.vl_orcado_11,
	a.vl_orcado_12,
	a.cd_estabelecimento,
	a.ds_observacao
from	ctb_orc_cen_valor_linear a
where	a.nr_seq_cenario	= nr_seq_cenario_origem_p;

vet01	c01%rowtype;


BEGIN


open C01;
loop
fetch C01 into
	vet01;
EXIT WHEN NOT FOUND; /* apply on C01 */
	begin

	insert into ctb_orc_cen_valor_linear(
		nr_sequencia,
		dt_atualizacao,
		nm_usuario,
		dt_atualizacao_nrec,
		nm_usuario_nrec,
		nr_seq_cenario,
		cd_centro_custo,
		cd_conta_contabil,
		ds_detalhe,
		cd_pessoa_fisica,
		cd_cnpj,
		vl_orcado_1,
		vl_orcado_2,
		vl_orcado_3,
		vl_orcado_4,
		vl_orcado_5,
		vl_orcado_6,
		vl_orcado_7,
		vl_orcado_8,
		vl_orcado_9,
		vl_orcado_10,
		vl_orcado_11,
		vl_orcado_12,
		cd_estabelecimento,
		ds_observacao)
	values (	nextval('ctb_orc_cen_valor_linear_seq'),
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		nm_usuario_p,
		nr_seq_cenario_destino_p,
		vet01.cd_centro_custo,
		vet01.cd_conta_contabil,
		vet01.ds_detalhe,
		vet01.cd_pessoa_fisica,
		vet01.cd_cnpj,
		vet01.vl_orcado_1,
		vet01.vl_orcado_2,
		vet01.vl_orcado_3,
		vet01.vl_orcado_4,
		vet01.vl_orcado_5,
		vet01.vl_orcado_6,
		vet01.vl_orcado_7,
		vet01.vl_orcado_8,
		vet01.vl_orcado_9,
		vet01.vl_orcado_10,
		vet01.vl_orcado_11,
		vet01.vl_orcado_12,
		vet01.cd_estabelecimento,
		vet01.ds_observacao);


	end;
end loop;
close C01;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ctb_duplicar_linear_detalhado ( cd_estabelecimento_p bigint, nr_seq_cenario_origem_p bigint, nr_seq_cenario_destino_p bigint, nm_usuario_p text) FROM PUBLIC;

