-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ptu_gerar_envio_fatura (cd_interface_p interface.cd_interface%type, nr_seq_fatura_p ptu_fatura.nr_sequencia%type, cd_estabelecimento_p estabelecimento.cd_estabelecimento%type, nm_usuario_p usuario.nm_usuario%type, ds_local_windows_utl_p INOUT text ) AS $body$
DECLARE


ie_atualizar_reg_nf_a500_w	pls_parametros.ie_atualizar_reg_nf_a500%type;


BEGIN
select	coalesce(max(ie_atualizar_reg_nf_a500),'N')
into STRICT	ie_atualizar_reg_nf_a500_w
from	pls_parametros
where	cd_estabelecimento	= cd_estabelecimento_p;

if (ie_atualizar_reg_nf_a500_w in ('S','D')) then
	CALL pls_atualizar_infor_nf_ptu( nr_seq_fatura_p, nm_usuario_p, 'S', ie_atualizar_reg_nf_a500_w);
end if;

ds_local_windows_utl_p := null;
if (cd_interface_p = 2153) then -- PTU 4.0
	CALL ptu_gerar_envio_fatura_v40(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2350) then -- PTU 4.1
	CALL ptu_gerar_envio_fatura_v41(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2472) then -- PTU 5.0
	CALL ptu_gerar_envio_fatura_v50(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2574) then -- PTU 5.0a
	CALL ptu_gerar_envio_fatura_v50a(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2585) then -- PTU 6.0
	CALL ptu_gerar_envio_fatura_v60(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2637) then -- PTU 6.1
	CALL ptu_gerar_envio_fatura_v61(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2698) then -- PTU 6.3
	CALL ptu_gerar_envio_fatura_v63(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2745) then -- PTU 7.0
	CALL ptu_gerar_envio_fatura_v70(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2767) then -- PTU 7.0 - UTL_FILE
	ds_local_windows_utl_p := ptu_gerar_envio_fatura_v70_utl(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p, ds_local_windows_utl_p);
	
elsif (cd_interface_p = 2789) then -- PTU 8.0
	CALL ptu_gerar_envio_fatura_v80(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2791) then -- PTU 8.0 - UTL_FILE
	ds_local_windows_utl_p := ptu_gerar_envio_fatura_v80_utl(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p, ds_local_windows_utl_p);
	
elsif (cd_interface_p = 2833) then -- PTU 9.0
	CALL ptu_gerar_envio_fatura_v90(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2836) then -- PTU 9.0 - UTL_FILE
	ds_local_windows_utl_p := ptu_gerar_envio_fatura_v90_utl(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p, ds_local_windows_utl_p);
	
elsif (cd_interface_p = 2906) then -- PTU 9.1
	CALL ptu_gerar_envio_fatura_v91(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2907) then -- PTU 9.1 - UTL_FILE
	ds_local_windows_utl_p := ptu_gerar_envio_fatura_v91_utl(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p, ds_local_windows_utl_p);
	
elsif (cd_interface_p = 2924) then -- PTU 10.0
	CALL ptu_gerar_envio_fat_v100(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 2925) then -- PTU 10.0 - UTL_FILE
	ds_local_windows_utl_p := ptu_gerar_envio_fat_v100_utl(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p, ds_local_windows_utl_p);
	
elsif (cd_interface_p = 2940) then -- PTU 10.0a
	CALL ptu_gerar_envio_fat_v100a(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);

elsif (cd_interface_p = 2976) then -- PTU 11.0
	CALL ptu_gerar_envio_fat_v110(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 3066) then -- PTU 11.0a
	CALL ptu_gerar_envio_fat_v110a(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
	
elsif (cd_interface_p = 3091) then -- PTU 11.3
	CALL ptu_gerar_envio_fat_v113(nr_seq_fatura_p, cd_estabelecimento_p, nm_usuario_p);
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ptu_gerar_envio_fatura (cd_interface_p interface.cd_interface%type, nr_seq_fatura_p ptu_fatura.nr_sequencia%type, cd_estabelecimento_p estabelecimento.cd_estabelecimento%type, nm_usuario_p usuario.nm_usuario%type, ds_local_windows_utl_p INOUT text ) FROM PUBLIC;

