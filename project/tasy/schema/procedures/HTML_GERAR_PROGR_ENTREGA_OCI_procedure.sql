-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE html_gerar_progr_entrega_oci ( nr_ordem_compra_p bigint, nr_item_oci_p bigint, dt_primeira_entrega_p timestamp, qt_entregas_p bigint, ie_periodo_entrega_p bigint, nm_usuario_p text, ie_todos_p text) AS $body$
DECLARE


/* Procedure criada para evita rlinhas de programação no HTML, podendo ser feita  totalmente pelo schematic.*/

nr_item_oci_w	ordem_compra_item.nr_item_oci%type;


BEGIN

if (trunc(dt_primeira_entrega_p) < trunc(clock_timestamp())) then
	CALL wheb_mensagem_pck.exibir_mensagem_abort(163919);
	--A Data da primeira entrega não pode ser menor que a data atual.
end if;

if (ie_todos_p = 'N') then
	nr_item_oci_w := nr_item_oci_p;
else
	nr_item_oci_w := 0;
end if;

CALL GERAR_PROGRAMACAO_ENTREGA_OCI(nr_ordem_compra_p, nr_item_oci_w, dt_primeira_entrega_p, qt_entregas_p, ie_periodo_entrega_p, nm_usuario_p);

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE html_gerar_progr_entrega_oci ( nr_ordem_compra_p bigint, nr_item_oci_p bigint, dt_primeira_entrega_p timestamp, qt_entregas_p bigint, ie_periodo_entrega_p bigint, nm_usuario_p text, ie_todos_p text) FROM PUBLIC;

