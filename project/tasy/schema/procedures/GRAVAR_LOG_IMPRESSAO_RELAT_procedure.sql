-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gravar_log_impressao_relat ( cd_relatorio_p bigint, cd_classif_relat_p text, ds_parametros_p text, qt_impressao_p bigint, nm_usuario_p text, dt_fase1_p text, dt_fase2_p text, dt_fase3_p text, dt_fase4_p text) AS $body$
DECLARE

nr_sequencia_p	bigint;


BEGIN

select	nextval('log_impressao_relat_seq')
into STRICT	nr_sequencia_p
;

insert into log_impressao_relat(
	nr_sequencia,
	cd_classif_relat,
	cd_relatorio,
	nm_usuario,
	ds_parametros,
	dt_fase1,
	dt_fase2,
	dt_fase3,
	dt_fase4,
	qt_impressao)
values (nr_sequencia_p,
	cd_classif_relat_p,
	cd_relatorio_p,
	nm_usuario_p,
	substr(ds_parametros_p,1,2000),
	to_date(dt_fase1_p,'dd/mm/yyyy hh24:mi:ss'),
	to_date(dt_fase2_p,'dd/mm/yyyy hh24:mi:ss'),
	to_date(dt_fase3_p,'dd/mm/yyyy hh24:mi:ss'),
	to_date(dt_fase4_p,'dd/mm/yyyy hh24:mi:ss'),
	qt_impressao_p);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gravar_log_impressao_relat ( cd_relatorio_p bigint, cd_classif_relat_p text, ds_parametros_p text, qt_impressao_p bigint, nm_usuario_p text, dt_fase1_p text, dt_fase2_p text, dt_fase3_p text, dt_fase4_p text) FROM PUBLIC;

