-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_excluir_cad_regras_estab ( cd_estabelecimento_p bigint) AS $body$
DECLARE


nr_seq_tipo_cobertura_w		bigint;
nr_seq_tipo_limitacao_w		bigint;
nr_seq_tipo_carencia_w		bigint;
nr_seq_tipo_coparticipacao_w	bigint;
nr_seq_preco_regra_w		bigint;
nr_seq_regra_segurado_cart_w	bigint;
nr_seq_carteira_contr_iden_w	bigint;
nr_seq_mensalidade_mensagem_w	bigint;
nr_seq_mensalidade_amortiz_w	bigint;
nr_seq_tx_boleto_emissao_w	bigint;
nr_seq_exigencia_declaracao_w	bigint;
nr_seq_plano_item_w		bigint;
nr_seq_bonificacao_rest_w	bigint;
nr_seq_bonificacao_cobert_w	bigint;
nr_seq_regiao_w			bigint;
nr_seq_liberacao_w		bigint;
nr_seq_grupo_auditor_w		bigint;
nr_seq_regra_autorizacao_w	bigint;
nr_seq_acao_regra_conta_w	bigint;
nr_seq_vinculo_direto_w		bigint;
nr_seq_regra_via_acesso_w	bigint;
nr_seq_emissor_carteira_w	bigint;
nr_seq_conversao_proc_w		bigint;
nr_seq_regra_qtde_proc_w	bigint;
nr_seq_regra_lanc_w		bigint;
nr_seq_grupo_despesa_w		bigint;
nr_seq_regra_relat_grupo_w	bigint;

C01 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_tipo_cobertura
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_tipo_cobert_ant::text, '') = '';

C02 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_tipo_limitacao
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_limitacao_ant::text, '') = '';

C03 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_tipo_carencia
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_carencia_ant::text, '') = '';

C04 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_tipo_coparticipacao
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	 coalesce(nr_seq_copartic_ant::text, '') = '';

C05 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_desconto
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_desconto_ant::text, '') = '';

C06 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_segurado_cart
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C07 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_carteira_controle_iden
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_controle_ant::text, '') = '';

C08 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_mensagem_mensalidade
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_mensagem_ant::text, '') = '';

C09 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_amortizacao
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_amortizacao_ant::text, '') = '';

C10 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_emissao_boleto
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_regra_emissao_ant::text, '') = '';

C11 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_declaracao_prop
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_regra_declaracao_ant::text, '') = '';

C12 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_plano_item
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_item_ant::text, '') = '';

C13 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_bonific_tipo_restricao
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_retricao_ant::text, '') = '';

C14 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_tipo_cobert_bonific
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_cobertura_ant::text, '') = '';

C15 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regiao
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_regiao_ant::text, '') = '';

C16 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_liberacao
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C17 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_grupo_auditor
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C18 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_autorizacao
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C19 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_acao_regra_conta
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C20 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_vinculo_direto
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C21 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_via_acesso
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C22 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_emissor_carteira
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_emissor_ant::text, '') = '';

C23 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_conversao_proc
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C24 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_qtde_proc
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C25 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_lanc
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C26 CURSOR FOR
	SELECT	nr_sequencia
	from	ans_grupo_despesa
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';

C27 CURSOR FOR
	SELECT	nr_sequencia
	from	pls_regra_relat_grupo
	where	cd_estabelecimento	= cd_estabelecimento_p
	and	coalesce(nr_seq_anterior::text, '') = '';


BEGIN

open C01;
loop
fetch C01 into
	nr_seq_tipo_cobertura_w;
EXIT WHEN NOT FOUND; /* apply on C01 */
	begin

	delete	FROM pls_cobertura_proc
	where	nr_seq_tipo_cobertura	= nr_seq_tipo_cobertura_w;

	delete	FROM pls_cobertura_mat
	where	nr_seq_tipo_cobertura	= nr_seq_tipo_cobertura_w;

	delete	FROM pls_tipo_cobertura
	where	nr_sequencia		= nr_seq_tipo_cobertura_w;

	end;
end loop;
close C01;

open C02;
loop
fetch C02 into
	nr_seq_tipo_limitacao_w;
EXIT WHEN NOT FOUND; /* apply on C02 */
	begin

	delete	FROM pls_limitacao_proc
	where	nr_seq_tipo_limitacao	= nr_seq_tipo_limitacao_w;

	delete	FROM pls_limitacao_mat
	where	nr_seq_tipo_limitacao	= nr_seq_tipo_limitacao_w;

	delete	FROM pls_tipo_limitacao
	where	nr_sequencia		= nr_seq_tipo_limitacao_w;

	end;
end loop;
close C02;

open C03;
loop
fetch C03 into
	nr_seq_tipo_carencia_w;
EXIT WHEN NOT FOUND; /* apply on C03 */
	begin

	delete	FROM pls_carencia_proc
	where	nr_seq_tipo_carencia   	= nr_seq_tipo_carencia_w;

	delete	FROM pls_carencia_mat
	where	nr_seq_tipo_carencia   	= nr_seq_tipo_carencia_w;

	delete	FROM pls_carencia
	where	nr_seq_tipo_carencia   	= nr_seq_tipo_carencia_w;

	delete	FROM pls_tipo_carencia
	where	nr_sequencia		= nr_seq_tipo_carencia_w;

	end;
end loop;
close C03;

open C04;
loop
fetch C04 into
	nr_seq_tipo_coparticipacao_w;
EXIT WHEN NOT FOUND; /* apply on C04 */
	begin

	delete	FROM pls_coparticipacao_proc
	where	nr_seq_tipo_coparticipacao   	= nr_seq_tipo_coparticipacao_w;

	delete	FROM pls_coparticipacao_mat
	where	nr_seq_tipo_coparticipacao   	= nr_seq_tipo_coparticipacao_w;

	delete	FROM pls_tipo_coparticipacao
	where	nr_sequencia		   	= nr_seq_tipo_coparticipacao_w;

	end;
end loop;
close C04;

open C05;
loop
fetch C05 into
	nr_seq_preco_regra_w;
EXIT WHEN NOT FOUND; /* apply on C05 */
	begin

	delete	FROM pls_preco_regra
	where	nr_seq_regra	= nr_seq_preco_regra_w;

	delete	FROM pls_preco_regra_autom
	where	nr_seq_regra	= nr_seq_preco_regra_w;

	delete	FROM pls_regra_simul_preco_desc
	where	nr_seq_regra	= nr_seq_preco_regra_w;

	delete	FROM pls_regra_desconto
	where	nr_sequencia	= nr_seq_preco_regra_w;

	end;
end loop;
close C05;

open C06;
loop
fetch C06 into
	nr_seq_regra_segurado_cart_w;
EXIT WHEN NOT FOUND; /* apply on C06 */
	begin

	delete	FROM pls_regra_segurado_cart
	where	nr_sequencia	= nr_seq_regra_segurado_cart_w;

	end;
end loop;
close C06;

open C07;
loop
fetch C07 into
	nr_seq_carteira_contr_iden_w;
EXIT WHEN NOT FOUND; /* apply on C07 */
	begin

	delete	FROM pls_carteira_controle_iden
	where	nr_sequencia	= nr_seq_carteira_contr_iden_w;

	end;
end loop;
close C07;

open C08;
loop
fetch C08 into
	nr_seq_mensalidade_mensagem_w;
EXIT WHEN NOT FOUND; /* apply on C08 */
	begin

	delete	FROM pls_mensagem_mensalidade
	where	nr_sequencia	= nr_seq_mensalidade_mensagem_w;

	end;
end loop;
close C08;

open C09;
loop
fetch C09 into
	nr_seq_mensalidade_amortiz_w;
EXIT WHEN NOT FOUND; /* apply on C09 */
	begin

	delete	FROM pls_regra_amortizacao
	where	nr_sequencia	= nr_seq_mensalidade_amortiz_w;

	end;
end loop;
close C09;

open C10;
loop
fetch C10 into
	nr_seq_tx_boleto_emissao_w;
EXIT WHEN NOT FOUND; /* apply on C10 */
	begin

	delete	FROM pls_regra_emissao_boleto
	where	nr_sequencia	= nr_seq_tx_boleto_emissao_w;

	end;
end loop;
close C10;

open C11;
loop
fetch C11 into
	nr_seq_exigencia_declaracao_w;
EXIT WHEN NOT FOUND; /* apply on C11 */
	begin

	delete	FROM pls_regra_declaracao_prop
	where	nr_sequencia	= nr_seq_exigencia_declaracao_w;

	end;
end loop;
close C11;

open C12;
loop
fetch C12 into
	nr_seq_plano_item_w;
EXIT WHEN NOT FOUND; /* apply on C12 */
	begin

	delete	FROM pls_plano_item_operacao
	where	nr_seq_plano_item = nr_seq_plano_item_w;

	delete	FROM pls_plano_item
	where	nr_sequencia = nr_seq_plano_item_w;

	end;
end loop;
close C12;

open C13;
loop
fetch C13 into
	nr_seq_bonificacao_rest_w;
EXIT WHEN NOT FOUND; /* apply on C13 */
	begin

	delete	FROM pls_bonific_restr_regra
	where	nr_seq_tipo_restricao  = nr_seq_bonificacao_rest_w;

	delete	FROM pls_bonific_tipo_restricao
	where	nr_sequencia  = nr_seq_bonificacao_rest_w;

	end;
end loop;
close C13;

open C14;
loop
fetch C14 into
	nr_seq_bonificacao_cobert_w;
EXIT WHEN NOT FOUND; /* apply on C14 */
	begin

	delete	FROM pls_cobertura_bonificacao
	where	nr_seq_tipo_cobertura	= nr_seq_bonificacao_cobert_w;

	delete	FROM pls_tipo_cobert_bonific
	where	nr_sequencia		= nr_seq_bonificacao_cobert_w;

	end;
end loop;
close C14;

open C15;
loop
fetch C15 into
	nr_seq_regiao_w;
EXIT WHEN NOT FOUND; /* apply on C15 */
	begin

	delete	FROM pls_regiao_local
	where	nr_seq_regiao	= nr_seq_regiao_w;

	delete	FROM pls_regiao
	where	nr_sequencia	= nr_seq_regiao_w;

	end;
end loop;
close C15;

open C16;
loop
fetch C16 into
	nr_seq_liberacao_w;
EXIT WHEN NOT FOUND; /* apply on C16 */
	begin

	delete	FROM pls_lib_grupo_auditor
	where	nr_seq_regra_lib	= nr_seq_liberacao_w;

	delete	FROM pls_regra_liberacao
	where	nr_sequencia	= nr_seq_liberacao_w;

	end;
end loop;
close C16;

open C17;
loop
fetch C17 into
	nr_seq_grupo_auditor_w;
EXIT WHEN NOT FOUND; /* apply on C17 */
	begin

	delete	FROM pls_membro_grupo_aud
	where	nr_seq_grupo	= nr_seq_grupo_auditor_w;

	delete	FROM pls_grupo_auditor
	where	nr_sequencia	= nr_seq_grupo_auditor_w;

	end;
end loop;
close C17;

open C18;
loop
fetch C18 into
	nr_seq_regra_autorizacao_w;
EXIT WHEN NOT FOUND; /* apply on C18 */
	begin

	delete	FROM pls_regra_autorizacao
	where	nr_sequencia	= nr_seq_regra_autorizacao_w;

	end;
end loop;
close C18;

open C19;
loop
fetch C19 into
	nr_seq_acao_regra_conta_w;
EXIT WHEN NOT FOUND; /* apply on C19 */
	begin

	delete	FROM pls_filtro_regra_conta
	where	nr_seq_acao_regra	= nr_seq_acao_regra_conta_w;

	delete	FROM pls_acao_regra_conta
	where	nr_sequencia	= nr_seq_acao_regra_conta_w;

	end;
end loop;
close C19;

open C20;
loop
fetch C20 into
	nr_seq_vinculo_direto_w;
EXIT WHEN NOT FOUND; /* apply on C20 */
	begin

	delete	FROM pls_vinculo_direto_regra
	where	nr_seq_vinculo	= nr_seq_vinculo_direto_w;

	delete	FROM pls_vinculo_direto
	where	nr_sequencia	= nr_seq_vinculo_direto_w;

	end;
end loop;
close C20;

open C21;
loop
fetch C21 into
	nr_seq_regra_via_acesso_w;
EXIT WHEN NOT FOUND; /* apply on C21 */
	begin

	delete	FROM pls_regra_via_acesso
	where	nr_sequencia	= nr_seq_regra_via_acesso_w;

	end;
end loop;
close C21;

open C22;
loop
fetch C22 into
	nr_seq_emissor_carteira_w;
EXIT WHEN NOT FOUND; /* apply on C22 */
	begin

	delete	FROM pls_emissor_cart_numero
	where	nr_seq_emissor	= nr_seq_emissor_carteira_w;

	delete	FROM pls_regra_carteira
	where	nr_seq_emissor	= nr_seq_emissor_carteira_w;

	delete	FROM pls_regra_carteira_campo
	where	nr_seq_emissor	= nr_seq_emissor_carteira_w;

	delete	FROM pls_emissor_carteira
	where	nr_sequencia	= nr_seq_emissor_carteira_w;

	end;
end loop;
close C22;

open C23;
loop
fetch C23 into
	nr_seq_conversao_proc_w;
EXIT WHEN NOT FOUND; /* apply on C23 */
	begin

	delete	FROM pls_conversao_proc
	where	nr_sequencia	= nr_seq_conversao_proc_w;

	end;
end loop;
close C23;

open C24;
loop
fetch C24 into
	nr_seq_regra_qtde_proc_w;
EXIT WHEN NOT FOUND; /* apply on C24 */
	begin

	delete	FROM pls_regra_qtde_proc
	where	nr_sequencia	= nr_seq_regra_qtde_proc_w;

	end;
end loop;
close C24;

open C25;
loop
fetch C25 into
	nr_seq_regra_lanc_w;
EXIT WHEN NOT FOUND; /* apply on C25 */
	begin

	delete	FROM pls_regra_lanc_item
	where	nr_seq_regra	= nr_seq_regra_lanc_w;

	delete	FROM pls_regra_lanc
	where	nr_sequencia	= nr_seq_regra_lanc_w;

	end;
end loop;
close C25;

open C26;
loop
fetch C26 into
	nr_seq_grupo_despesa_w;
EXIT WHEN NOT FOUND; /* apply on C26 */
	begin

	delete	FROM ans_grupo_desp_copartic
	where	nr_seq_grupo_desp	= nr_seq_grupo_despesa_w;

	delete	FROM ans_grupo_desp_regra
	where	nr_seq_grupo_ans	= nr_seq_grupo_despesa_w;

	delete	FROM ans_grupo_desp_proc
	where	nr_seq_grupo_ans	= nr_seq_grupo_despesa_w;

	delete	FROM ans_grupo_desp_mat
	where	nr_seq_grupo_desp	= nr_seq_grupo_despesa_w;

	delete	FROM ans_grupo_despesa
	where	nr_sequencia		= nr_seq_grupo_despesa_w;

	end;
end loop;
close C26;

open C27;
loop
fetch C27 into
	nr_seq_regra_relat_grupo_w;
EXIT WHEN NOT FOUND; /* apply on C27 */
	begin

	delete	FROM pls_regra_relatorio
	where	nr_seq_grupo	= nr_seq_regra_relat_grupo_w;

	delete	FROM pls_regra_relat_grupo
	where	nr_sequencia	= nr_seq_regra_relat_grupo_w;

	end;
end loop;
close C27;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_excluir_cad_regras_estab ( cd_estabelecimento_p bigint) FROM PUBLIC;

