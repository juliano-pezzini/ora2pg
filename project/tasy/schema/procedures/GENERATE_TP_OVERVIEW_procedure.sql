-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE generate_tp_overview ( nr_atendimento_p bigint, cd_pessoa_fisica_p text, dt_start_p timestamp, dt_end_p timestamp, nm_usuario_p text, ie_medicamento_p text default null, ie_solucao_p text default null, ie_recomendacao_p text default null, ie_hemoterapia_p text default null, ie_procedimento_p text default null, ie_gasoterapia_p text default null, ie_dialise_p text default null, ie_dieta_p text default null, cd_material_p bigint default null, ie_administracao_p text default null, ie_view_mode_p text default null, ie_show_dates_p text default null, ie_ignore_dates_p text default null, ie_consider_encounter_p text default null, ie_medical_depart_p text default null, nr_tipo_pedido_filter_p text default null, ie_view_type_p text default null, ie_encounter_type_p text default null, ds_material_list_p text default null, ie_suspensao_p text default null, ie_material_p text default null, ie_anatomia_p text default null, ie_my_department_p text default 'N') AS $body$
BEGIN


if (nr_atendimento_p IS NOT NULL AND nr_atendimento_p::text <> '') and (nm_usuario_p IS NOT NULL AND nm_usuario_p::text <> '') and (dt_start_p IS NOT NULL AND dt_start_p::text <> '') and (dt_end_p IS NOT NULL AND dt_end_p::text <> '') then
	begin

	CALL cpoe_overview_pck.generate_view(	nr_atendimento_p,
						cd_pessoa_fisica_p,
						dt_start_p, 
						dt_end_p, 
						nm_usuario_p,
						coalesce(ie_medicamento_p,'S'),
						coalesce(ie_solucao_p,'S'),
						coalesce(ie_recomendacao_p,'S'),
						coalesce(ie_hemoterapia_p,'S'),
						coalesce(ie_procedimento_p,'S'),
						coalesce(ie_gasoterapia_p,'S'),
						coalesce(ie_dialise_p,'S'),
						coalesce(ie_dieta_p,'S'),
						cd_material_p,
						ie_administracao_p,
						coalesce(ie_view_mode_p, 'DA'),
						coalesce(ie_show_dates_p, 'N'),
						coalesce(ie_ignore_dates_p, 'N'),
						coalesce(ie_consider_encounter_p, 'A'),
						ie_medical_depart_p,
						nr_tipo_pedido_filter_p,
						coalesce(ie_view_type_p, 'O'),
						ie_encounter_type_p,
						ds_material_list_p,
						coalesce(ie_suspensao_p, 'S'),
						coalesce(ie_material_p,'S'),
						coalesce(ie_anatomia_p,'S'),
						coalesce(ie_my_department_p, 'N'));
	end;
end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE generate_tp_overview ( nr_atendimento_p bigint, cd_pessoa_fisica_p text, dt_start_p timestamp, dt_end_p timestamp, nm_usuario_p text, ie_medicamento_p text default null, ie_solucao_p text default null, ie_recomendacao_p text default null, ie_hemoterapia_p text default null, ie_procedimento_p text default null, ie_gasoterapia_p text default null, ie_dialise_p text default null, ie_dieta_p text default null, cd_material_p bigint default null, ie_administracao_p text default null, ie_view_mode_p text default null, ie_show_dates_p text default null, ie_ignore_dates_p text default null, ie_consider_encounter_p text default null, ie_medical_depart_p text default null, nr_tipo_pedido_filter_p text default null, ie_view_type_p text default null, ie_encounter_type_p text default null, ds_material_list_p text default null, ie_suspensao_p text default null, ie_material_p text default null, ie_anatomia_p text default null, ie_my_department_p text default 'N') FROM PUBLIC;

