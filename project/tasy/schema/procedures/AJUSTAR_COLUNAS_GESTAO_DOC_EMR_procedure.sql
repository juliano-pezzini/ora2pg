-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ajustar_colunas_gestao_doc_emr ( NR_SEQ_CONTENT_MACRO_P bigint, NM_USUARIO_P text, DS_COLUMN_NAME_P text, IE_OPCAO_AJUST_P text, ie_only_date_p text default null) AS $body$
BEGIN	
/**
ie_opcao_ajust_p 
D = Delete
I = Insert
**/
	if (nr_seq_content_macro_p IS NOT NULL AND nr_seq_content_macro_p::text <> '') then	
		if (ie_opcao_ajust_p = 'D') then	
		
			delete
			from	db_content_macro_column	
			WHERE	nr_seq_content_macro = nr_seq_content_macro_p;
		
		elsif (ie_opcao_ajust_p = 'I' ) then	

			insert
			into	db_content_macro_column(
				nr_sequencia,	
				nr_seq_content_macro,	
				dt_atualizacao,	
				nm_usuario,	
				dt_atualizacao_nrec,	
				nm_usuario_nrec,	
				ds_column_name,
				ie_only_date)	
			values (
				nextval('db_content_macro_column_seq'),	
				nr_seq_content_macro_p,	
				clock_timestamp(),	
				nm_usuario_p,	
				clock_timestamp(),	
				nm_usuario_p,	
				ds_column_name_p,
				ie_only_date_p);	
		end if;	
	end if;	
end;	
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ajustar_colunas_gestao_doc_emr ( NR_SEQ_CONTENT_MACRO_P bigint, NM_USUARIO_P text, DS_COLUMN_NAME_P text, IE_OPCAO_AJUST_P text, ie_only_date_p text default null) FROM PUBLIC;

