-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE prescr_proc_ditado_driver ( DS_NOME_DRIVER_P text, DS_DESCRICAO_DRIVER_P text, NM_USUARIO_P text ) AS $body$
DECLARE

  nr_tem_config_w bigint;
  nr_seq_config_w bigint;

BEGIN
  SELECT COUNT(1)
  INTO STRICT nr_tem_config_w
  FROM prescr_proc_ditado_conf
  WHERE NM_USUARIO = NM_USUARIO_P;
  SELECT nextval('prescr_proc_ditado_conf_seq') INTO STRICT nr_seq_config_w;
  IF (nr_tem_config_w = 0) THEN
    BEGIN
      INSERT
      INTO prescr_proc_ditado_conf(
          NR_SEQUENCIA,
          DS_NOME_DRIVER,
          DS_DESCRICAO_DRIVER,
          DT_ATUALIZACAO,
          NM_USUARIO
        )
        VALUES (
          nr_seq_config_w,
          DS_NOME_DRIVER_P,
          DS_DESCRICAO_DRIVER_p,
          clock_timestamp(),
          NM_USUARIO_P
        );
    END;
  END IF;
  IF (nr_tem_config_w > 0) THEN
    BEGIN
      UPDATE prescr_proc_ditado_conf
      SET DS_NOME_DRIVER    = DS_NOME_DRIVER_P,
        DS_DESCRICAO_DRIVER = DS_DESCRICAO_DRIVER_p
      WHERE NM_USUARIO      = NM_USUARIO_P;
    END;
  END IF;
  COMMIT;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE prescr_proc_ditado_driver ( DS_NOME_DRIVER_P text, DS_DESCRICAO_DRIVER_P text, NM_USUARIO_P text ) FROM PUBLIC;

