-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE apagar_delphi_java_rel ( nm_usuario_p text, cd_funcao_p bigint, ie_pasta_p text, ie_pop_up_comp_p text, ie_wcpanel_p text, ie_wdb_coluna_p text, ie_wselecao_p text, ie_wdlg_p text default 'N') AS $body$
BEGIN

if (cd_funcao_p IS NOT NULL AND cd_funcao_p::text <> '') then

	if (ie_pasta_p = 'S') then

		delete from W_DELPHI_JAVA
		where	cd_funcao = cd_funcao_p
		and		((upper(ie_objeto) = upper('TTabSheet')) or (upper(ie_objeto) = upper('TPageControl'))
					or (upper(ie_objeto) = upper('TS')));

		commit;

	end if;

	if (ie_pop_up_comp_p = 'S') then

		delete from W_DELPHI_JAVA
		where	cd_funcao = cd_funcao_p
		and		((upper(ie_objeto) = upper('TMenuItem')) or (upper(ie_objeto) = upper('TPopUpMenu'))
				or (upper(ie_objeto) = upper('PM')) or (upper(ie_objeto) = upper('MI')));

		commit;

	end if;

	if (ie_wcpanel_p = 'S') then

		delete from W_DELPHI_JAVA
		where	cd_funcao = cd_funcao_p
		and		((upper(ie_objeto) = upper('TWCPanel')) or (upper(ie_tipo) = upper('P')));

		commit;

	end if;

	if (ie_wdb_coluna_p = 'S') then

		delete from W_DELPHI_JAVA
		where	cd_funcao = cd_funcao_p
		and		((upper(ie_objeto) = upper('TDBPanel')) or (upper(ie_tipo) = upper('B')));

		commit;

	end if;

	if (ie_wselecao_p = 'S') then

		delete from W_DELPHI_JAVA
		where	cd_funcao = cd_funcao_p
		and (upper(ie_objeto) = upper('TWSelecaoCB'));

		commit;

	end if;

	if (ie_wdlg_p = 'S') then
		delete from W_DELPHI_JAVA
		where	cd_funcao = cd_funcao_p
		and (upper(ie_objeto) = upper('TWDLGPanel'));
	end if;
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE apagar_delphi_java_rel ( nm_usuario_p text, cd_funcao_p bigint, ie_pasta_p text, ie_pop_up_comp_p text, ie_wcpanel_p text, ie_wdb_coluna_p text, ie_wselecao_p text, ie_wdlg_p text default 'N') FROM PUBLIC;

