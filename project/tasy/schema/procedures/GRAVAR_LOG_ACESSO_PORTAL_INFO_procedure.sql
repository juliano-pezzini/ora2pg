-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gravar_log_acesso_portal_info ( ds_versao_java_p text, ds_sistema_operacional_p text, ds_browser_p text, ie_biometria_p text, ie_mac_address_p text, ds_info_adicional_p text, nm_usuario_p text) AS $body$
DECLARE



qt_reg_w	bigint := 0;


BEGIN

select	count(*)
into STRICT	qt_reg_w
from	log_acesso_portal_info
where	nm_usuario = nm_usuario_p;

if (qt_reg_w > 0) then

	update	log_acesso_portal_info
	set		ds_versao_java 			= ds_versao_java_p,
			ds_sistema_operacional 	= ds_sistema_operacional_p,
			ds_browser				= ds_browser_p,
			ie_biometria			= ie_biometria_p,
			ie_mac_address			= ie_mac_address_p,
			ds_info_adicional		= ds_info_adicional_p,
			dt_atualizacao			= clock_timestamp()
	where	nm_usuario				= nm_usuario_p;

else

	insert into log_acesso_portal_info(
			nr_sequencia,
			ds_versao_java,
			ds_sistema_operacional,
			ds_browser,
			ie_biometria,
			ie_mac_address,
			ds_info_adicional,
			dt_atualizacao,
			nm_usuario)
	values (	nextval('log_acesso_portal_info_seq'),
			ds_versao_java_p,
			ds_sistema_operacional_p,
			ds_browser_p,
			ie_biometria_p,
			ie_mac_address_p,
			ds_info_adicional_p,
			clock_timestamp(),
			nm_usuario_p);
end if;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gravar_log_acesso_portal_info ( ds_versao_java_p text, ds_sistema_operacional_p text, ds_browser_p text, ie_biometria_p text, ie_mac_address_p text, ds_info_adicional_p text, nm_usuario_p text) FROM PUBLIC;

