-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE hd_consistir_status_dialisador ( nr_sequencia_p bigint, ie_status_atual_p text, ie_status_chamada_p text, ie_status_p INOUT text, ds_erro_p INOUT text) AS $body$
DECLARE

ie_status_w	varchar(15);


BEGIN

select	max(ie_status)
into STRICT	ie_status_w
from 	hd_dializador
where 	nr_sequencia = nr_sequencia_p;

ie_status_p := ie_status_w;

if (ie_status_chamada_p = 'O') and (ie_status_atual_p <> 'A') then
	ds_erro_p := wheb_mensagem_pck.get_texto(281246,null);

elsif (ie_status_chamada_p = 'R') and (ie_status_atual_p <> 'P') and (ie_status_atual_p <> 'A') and (ie_status_atual_p <> 'N') and (ie_status_atual_p <> 'O') then
	ds_erro_p := wheb_mensagem_pck.get_texto(281247,null);

elsif (ie_status_chamada_p = 'A') and (ie_status_atual_p <> 'R') then
	ds_erro_p := wheb_mensagem_pck.get_texto(281249,null);

elsif (ie_status_chamada_p = 'D') and
	((ie_status_atual_p = 'S') or (ie_status_atual_p = 'U') or (ie_status_atual_p = 'E')) then
	ds_erro_p := wheb_mensagem_pck.get_texto(281250,null);

elsif (ie_status_chamada_p = 'AR') and (ie_status_atual_p <> 'O') then
	ds_erro_p := wheb_mensagem_pck.get_texto(281251,null);

elsif (ie_status_chamada_p = 'ED') and (ie_status_atual_p <> 'D') then
	ds_erro_p := wheb_mensagem_pck.get_texto(281253,null);

elsif (ie_status_chamada_p = 'RE') and (ie_status_atual_p <> 'T') then
	ds_erro_p := wheb_mensagem_pck.get_texto(281254,null);
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE hd_consistir_status_dialisador ( nr_sequencia_p bigint, ie_status_atual_p text, ie_status_chamada_p text, ie_status_p INOUT text, ds_erro_p INOUT text) FROM PUBLIC;

