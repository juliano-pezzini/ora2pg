-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_valores_par_antrop_md (ie_tipo_p text, peso_p bigint, qt_imc_p bigint, altura_p bigint, ie_valor_inicio_p INOUT bigint, ie_valor_final_p INOUT bigint, ie_valor_igual_p INOUT bigint, qt_97_p bigint, qt_99_p bigint, qt_95_p bigint, qt_85_p bigint, qt_75_p bigint, qt_50_p bigint, qt_25_p bigint, qt_15_p bigint, qt_5_p bigint, qt_3_p bigint, qt_1_p bigint, ds_retorno_p INOUT text, anos_p bigint) AS $body$
BEGIN
  if (ie_tipo_p = 'PI') or (ie_tipo_p = 'PA') then

    if (peso_p >= qt_99_p) then
      ie_valor_final_p := '99';

      if (peso_p = qt_99_p) then
        ie_valor_igual_p := '99';
      end if;

    elsif (peso_p >= qt_97_p) then
      ie_valor_inicio_p := '97';
      ie_valor_final_p  := '99';

      if (peso_p = qt_97_p) then
        ie_valor_igual_p := '97';
      end if;

    elsif (peso_p >= qt_95_p) then
      ie_valor_inicio_p := '95';
      ie_valor_final_p  := '97';

      if (peso_p = qt_95_p) then
        ie_valor_igual_p := '95';
      end if;

    elsif (peso_p >= qt_85_p) then
      ie_valor_inicio_p := '85';
      ie_valor_final_p  := '95';

      if (peso_p = qt_85_p) then
        ie_valor_igual_p := '85';
      end if;

    elsif (peso_p >= qt_75_p) then
      ie_valor_inicio_p := '75';
      ie_valor_final_p  := '85';

      if (peso_p = qt_75_p) then
        ie_valor_igual_p := '75';
      end if;

    elsif (peso_p >= qt_50_p) then
      ie_valor_inicio_p := '50';
      ie_valor_final_p  := '75';

      if (peso_p = qt_50_p) then
        ie_valor_igual_p := '50';
      end if;

    elsif (peso_p >= qt_25_p) then
      ie_valor_inicio_p := '25';
      ie_valor_final_p  := '50';

      if (peso_p = qt_25_p) then
        ie_valor_igual_p := '25';
      end if;

    elsif (peso_p >= qt_15_p) then
      ie_valor_inicio_p := '15';
      ie_valor_final_p  := '25';

      if (peso_p = qt_15_p) then
        ie_valor_igual_p := '15';
      end if;

    elsif (peso_p >= qt_5_p) then
      ie_valor_inicio_p := '5';
      ie_valor_final_p  := '15';

      if (peso_p = qt_5_p) then
        ie_valor_igual_p := '5';
      end if;

    elsif (peso_p >= qt_3_p) then
      ie_valor_inicio_p := '3';
      ie_valor_final_p  := '5';

      if (peso_p = qt_3_p) then
        ie_valor_igual_p := '3';
      end if;

    elsif (peso_p >= qt_1_p) then
      ie_valor_inicio_p := '1';
      ie_valor_final_p  := '3';

      if (peso_p = qt_1_p) then
        ie_valor_igual_p := '1';
      end if;

    else
      ie_valor_inicio_p := '1';
    end if;

  elsif (ie_tipo_p = 'IMC') then
  
    if (qt_imc_p < qt_3_p) then
      ds_retorno_p := obter_desc_expressao(783088, 'Magreza');
    elsif (qt_imc_p >= qt_3_p) and (qt_imc_p <= qt_85_p) then
      ds_retorno_p := obter_desc_expressao(347463, 'Eutrofia');
    elsif (qt_imc_p > qt_85_p) and (qt_imc_p <= qt_97_p) then
      if (anos_p <= 5) then
        ds_retorno_p := obter_desc_expressao(783090, 'Risco de sobrepeso');
      elsif (anos_p > 5) and (anos_p <= 17) then
        ds_retorno_p := obter_desc_expressao(488188, 'Sobrepeso');
      end if;
    elsif (anos_p <= 5) and (qt_imc_p > qt_97_p) and (qt_imc_p <= qt_99_p) then
      ds_retorno_p := obter_desc_expressao(488188, 'Sobrepeso');
    elsif (anos_p <= 5 AND qt_imc_p > qt_99_p) or
          ((anos_p > 5) and (anos_p <= 17) and (qt_imc_p > qt_97_p) and (qt_imc_p <= qt_99_p)) then
      ds_retorno_p := obter_desc_expressao(294557, 'Obesidade');
    elsif (anos_p > 5) and (anos_p <= 17) and (qt_imc_p > qt_99_p) then
      ds_retorno_p := obter_desc_expressao(783092, 'Obesidade grave');
    end if;

  elsif (ie_tipo_p = 'IMCI') then
  
    if (qt_imc_p >= qt_99_p) then
      ie_valor_final_p := '99';

      if (peso_p = qt_99_p) then
        ie_valor_igual_p := '99';
      end if;

    elsif (qt_imc_p >= qt_97_p) then
      ie_valor_inicio_p := '97';
      ie_valor_final_p  := '99';

      if (peso_p = qt_97_p) then
        ie_valor_igual_p := '97';
      end if;

    elsif (qt_imc_p >= qt_95_p) then
      ie_valor_inicio_p := '95';
      ie_valor_final_p  := '97';

      if (peso_p = qt_95_p) then
        ie_valor_igual_p := '95';
      end if;

    elsif (qt_imc_p >= qt_85_p) then
      ie_valor_inicio_p := '85';
      ie_valor_final_p  := '95';

      if (peso_p = qt_85_p) then
        ie_valor_igual_p := '85';
      end if;

    elsif (qt_imc_p >= qt_75_p) then
      ie_valor_inicio_p := '75';
      ie_valor_final_p  := '85';

      if (peso_p = qt_75_p) then
        ie_valor_igual_p := '75';
      end if;

    elsif (qt_imc_p >= qt_50_p) then
      ie_valor_inicio_p := '50';
      ie_valor_final_p  := '75';

      if (peso_p = qt_50_p) then
        ie_valor_igual_p := '50';
      end if;

    elsif (qt_imc_p >= qt_25_p) then
      ie_valor_inicio_p := '25';
      ie_valor_final_p  := '50';

      if (peso_p = qt_25_p) then
        ie_valor_igual_p := '25';
      end if;

    elsif (qt_imc_p >= qt_15_p) then
      ie_valor_inicio_p := '15';
      ie_valor_final_p  := '25';

      if (peso_p = qt_15_p) then
        ie_valor_igual_p := '15';
      end if;

    elsif (qt_imc_p >= qt_5_p) then
      ie_valor_inicio_p := '5';
      ie_valor_final_p  := '15';

      if (peso_p = qt_5_p) then
        ie_valor_igual_p := '5';
      end if;

    elsif (qt_imc_p >= qt_3_p) then
      ie_valor_inicio_p := '3';
      ie_valor_final_p  := '5';

      if (peso_p = qt_3_p) then
        ie_valor_igual_p := '3';
      end if;

    elsif (qt_imc_p >= qt_1_p) then
      ie_valor_inicio_p := '1';
      ie_valor_final_p  := '3';

      if (peso_p = qt_1_p) then
        ie_valor_igual_p := '1';
      end if;

    else
      ie_valor_inicio_p := '1';
    end if;

  else
  
    if (altura_p >= qt_99_p) then
      ie_valor_final_p := '99';

      if (peso_p = qt_99_p) then
        ie_valor_igual_p := '99';
      end if;

    elsif (altura_p >= qt_97_p) then
      ie_valor_inicio_p := '97';
      ie_valor_final_p  := '99';

      if (peso_p = qt_97_p) then
        ie_valor_igual_p := '97';
      end if;

    elsif (altura_p >= qt_95_p) then
      ie_valor_inicio_p := '95';
      ie_valor_final_p  := '97';

      if (peso_p = qt_95_p) then
        ie_valor_igual_p := '95';
      end if;

    elsif (altura_p >= qt_85_p) then
      ie_valor_inicio_p := '85';
      ie_valor_final_p  := '95';

      if (peso_p = qt_85_p) then
        ie_valor_igual_p := '85';
      end if;

    elsif (altura_p >= qt_75_p) then
      ie_valor_inicio_p := '75';
      ie_valor_final_p  := '85';

      if (peso_p = qt_75_p) then
        ie_valor_igual_p := '75';
      end if;

    elsif (altura_p >= qt_50_p) then
      ie_valor_inicio_p := '50';
      ie_valor_final_p  := '75';

      if (peso_p = qt_50_p) then
        ie_valor_igual_p := '50';
      end if;

    elsif (altura_p >= qt_25_p) then
      ie_valor_inicio_p := '25';
      ie_valor_final_p  := '50';

      if (peso_p = qt_25_p) then
        ie_valor_igual_p := '25';
      end if;

    elsif (altura_p >= qt_15_p) then
      ie_valor_inicio_p := '15';
      ie_valor_final_p  := '25';

      if (peso_p = qt_15_p) then
        ie_valor_igual_p := '15';
      end if;

    elsif (altura_p >= qt_5_p) then
      ie_valor_inicio_p := '5';
      ie_valor_final_p  := '15';

      if (peso_p = qt_5_p) then
        ie_valor_igual_p := '5';
      end if;

    elsif (altura_p >= qt_3_p) then
      ie_valor_inicio_p := '3';
      ie_valor_final_p  := '5';

      if (peso_p = qt_3_p) then
        ie_valor_igual_p := '3';
      end if;

    elsif (altura_p >= qt_1_p) then
      ie_valor_inicio_p := '1';
      ie_valor_final_p  := '3';

      if (peso_p = qt_1_p) then
        ie_valor_igual_p := '1';
      end if;

    else
      ie_valor_inicio_p := '1';
    end if;

  end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_valores_par_antrop_md (ie_tipo_p text, peso_p bigint, qt_imc_p bigint, altura_p bigint, ie_valor_inicio_p INOUT bigint, ie_valor_final_p INOUT bigint, ie_valor_igual_p INOUT bigint, qt_97_p bigint, qt_99_p bigint, qt_95_p bigint, qt_85_p bigint, qt_75_p bigint, qt_50_p bigint, qt_25_p bigint, qt_15_p bigint, qt_5_p bigint, qt_3_p bigint, qt_1_p bigint, ds_retorno_p INOUT text, anos_p bigint) FROM PUBLIC;

