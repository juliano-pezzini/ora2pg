-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE update_latam_req_release_date ( nr_seq_requirement_p bigint, dt_session_p timestamp, ds_history_p text, ie_situacao_p text ) AS $body$
DECLARE

    nm_usuario_w            constant  latam_requisito_historico.nm_usuario%type     := wheb_usuario_pck.get_nm_usuario;
    dt_atual_w              constant  latam_requisito_historico.dt_atualizacao%type := clock_timestamp();

BEGIN
    insert into latam_requisito_historico(
        nr_sequencia,
        dt_atualizacao,
        nm_usuario,
        dt_atualizacao_nrec,
        nm_usuario_nrec,
        dt_liberacao,
        ds_historico,
        ie_tipo_hist,
        nr_seq_requisito,
        ie_situacao)
    values (nextval('latam_requisito_historico_seq'),
           dt_atual_w,
           nm_usuario_w,
           dt_atual_w,
           nm_usuario_w,
           dt_atual_w,
           ds_history_p,
           '7',
           nr_seq_requirement_p,
           ie_situacao_p);

    update latam_requisito
    set    dt_release_tests = dt_session_p,
           nm_usuario        = nm_usuario_w,
           dt_atualizacao    = dt_atual_w
    where  nr_sequencia      = nr_seq_requirement_p;

    commit;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE update_latam_req_release_date ( nr_seq_requirement_p bigint, dt_session_p timestamp, ds_history_p text, ie_situacao_p text ) FROM PUBLIC;

