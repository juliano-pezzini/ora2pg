-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_registro_pendente_pep ( cd_tipo_registro_p text, nr_sequencia_registro_p bigint, cd_pessoa_fisica_p text, nr_atendimento_p bigint default null, nm_usuario_p text DEFAULT NULL, ie_tipo_pendencia_p text default 'L', nr_seq_horario_p bigint default null, ie_tipo_item_adep_p text default null, nr_seq_material_p bigint default null, nr_seq_procedimento_p bigint default null, nr_seq_dieta_p bigint default null, ie_escala_p text default null, nr_seq_nut_pac_p bigint default null, nr_seq_nut_pac_prot_p bigint default null, nr_seq_solucao_p bigint default null, nr_seq_gasoterapia_p bigint default null, nr_seq_recomendacao_p bigint default null, nr_seq_item_adep_p bigint default null, nr_etapa_adep_p bigint default null, cd_funcao_pend_p bigint default null, nr_seq_reg_elemento_p bigint default null, nr_parecer_p bigint default null, nr_seq_evento_adep_p bigint default null, nr_seq_item_pront_p bigint default null, nr_atend_cons_pepa_p bigint default null) AS $body$
DECLARE


qt_registros_w			bigint := 0;
qt_cirurgia_w			bigint := 0;
nr_seq_agenda_w			bigint;
ie_pendente_assinat_usuario_w	varchar(10)	:= 'N'	;
nr_item_pep_w			bigint := null;
nr_item_pep_fixo_w      bigint := null;
nr_escala_fixo_w        bigint := null;
nr_seq_item_pepo_w		bigint;
ie_gerado_funcao_ehr_w		varchar(1);
ie_gerado_funcao_pepo_w		varchar(1)	:= 'N';
ie_remover_pendencia_w      boolean;
ds_erro_w				varchar(4000);
cd_pessoa_fisica_w		varchar(10);
nr_atendimento_w		bigint;
-- Pendencias da Conta do Paciente
ds_texto_aux_w			varchar(255) := wheb_mensagem_pck.get_texto(446361);
nr_sequencia_w			pep_item_pendente.nr_sequencia%type;
nr_sequencia_comp_w			 pep_item_pendente_comp.nr_sequencia%type;
cd_certificado_w		usuario.cd_certificado%type;
nr_seq_interno_parecer_w	parecer_medico.nr_seq_interno%type;
nr_seq_template_w bigint;
ie_gera_assinatura_w varchar(1) := 'S';


	procedure gravar_registro_pend_assina(
								nr_seq_item_pend_p			bigint,
								nr_atendimento_p			bigint,
								cd_pessoa_fisica_p			text,
								nm_usuario_p				text,
								dt_registro_p				timestamp,
								nr_projeto_p				bigint,
								ds_tipo_fk_p				text,
								dt_atualizacao_p			timestamp,
								nr_seq_pendencia_p			text,
								nr_seq_item_orig_pron_p		bigint) as
	
	nr_sequencia_w	bigint;
	
	
BEGIN
	
	select	nextval('pep_item_pend_assina_seq')
	into STRICT	nr_sequencia_w
	;
	
	if (nr_projeto_p > 0) then
	
		insert into pep_item_pend_assina(
							nr_sequencia,
							nr_seq_item_pend,
							nr_atendimento,
							cd_pessoa_fisica,
							nm_usuario,
							dt_registro, 
							nr_projeto, 
							ds_tipo_fk, 
							dt_atualizacao,	
							nr_seq_pendencia, 
							nr_seq_item_orig_pront
							)
					values ( 
							nr_sequencia_w, 
							nr_seq_item_pend_p,
							nr_atendimento_p, 
							cd_pessoa_fisica_p, 
							nm_usuario_p, 
							dt_registro_p, 
							nr_projeto_p, 
							ds_tipo_fk_p, 
							clock_timestamp(), 
							nr_seq_pendencia_p, 
							nr_seq_item_orig_pron_p);
	end if;
	
	commit;
	
	end;

begin

select	max(a.cd_certificado)
into STRICT	cd_certificado_w
from	usuario	a
where	a.nm_usuario	= nm_usuario_p;

if (ie_tipo_pendencia_p	= 'A') and (coalesce(cd_certificado_w::text, '') = '') and (wheb_assist_pck.GET_GERAR_SEM_CERTIFICADO = 'S') then
	ie_pendente_assinat_usuario_w	:= 'S';
end if;

begin

if (Obter_Funcao_Ativa = 281) and (coalesce(nr_seq_item_pront_p, wheb_assist_pck.get_seq_item_pep) > 0) then
	nr_item_pep_w := coalesce(nr_seq_item_pront_p, wheb_assist_pck.get_seq_item_pep);
elsif (Obter_Funcao_Ativa = 7047) then
	ie_gerado_funcao_ehr_w := 'S';
elsif (Obter_Funcao_Ativa = 872) then
	ie_gerado_funcao_pepo_w := 'S';
elsif (Obter_Funcao_Ativa = 10026) then
	ie_gerado_funcao_pepo_w := 'F';
elsif (Obter_Funcao_Ativa = -9) then
	ie_gerado_funcao_pepo_w := 'G'; /*grafico*/
elsif (Obter_Funcao_Ativa = 3010) then
	ie_gerado_funcao_pepo_w := 'O'; /*Oftalmologia*/
elsif (cd_funcao_pend_p = 924) then
	nr_item_pep_w := 4;
elsif (cd_funcao_pend_p = 950) then
	nr_item_pep_w := 943;
elsif (cd_funcao_pend_p = 1113) then
	nr_item_pep_w := 1283;
end if;

ie_remover_pendencia_w := substr(cd_tipo_registro_p, 1, 1) = 'X';
if (cd_tipo_registro_p = 'E') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	cd_evolucao = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	
	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			cd_evolucao,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,5),
			17,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			5,
			10);
			
			if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
				gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
				clock_timestamp(), 183, 'CD_EVOLUCAO', clock_timestamp(), nr_sequencia_w, 5);
			end if;
	end if;

elsif (cd_tipo_registro_p = 'XE') then

	delete	from pep_item_pendente
	where	cd_evolucao = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif ((cd_tipo_registro_p = 'SAE') or (cd_tipo_registro_p = 'SAPS')) then

	select 	nextval('pep_item_pendente_seq')
	into STRICT 	nr_sequencia_w
	;

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_sae = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_sae,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,CASE WHEN cd_tipo_registro_p='SAE' THEN 383 WHEN cd_tipo_registro_p='SAPS' THEN 993 END ),
			57,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			CASE WHEN cd_tipo_registro_p='SAE' THEN 383 WHEN cd_tipo_registro_p='SAPS' THEN 993 END );
			
			if (cd_tipo_registro_p = 'SAE') and (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
				gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
				clock_timestamp(), 25290, 'NR_PRESCRICAO', clock_timestamp(), nr_sequencia_w, 383);
			elsif (cd_tipo_registro_p <> 'SAE') and (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
				gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
				clock_timestamp(), 50715, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 993);	
			
			end if;
			
	end if;

elsif (cd_tipo_registro_p = 'REP') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_prescricao = nr_sequencia_registro_p
	and		((nr_seq_material_rep = nr_seq_material_p) or (coalesce(nr_seq_material_p::text, '') = ''))
	and		((nr_seq_proced_rep = nr_seq_procedimento_p) or (coalesce(nr_seq_procedimento_p::text, '') = ''))
	and		((nr_seq_dieta_rep = nr_seq_dieta_p) or (coalesce(nr_seq_dieta_p::text, '') = ''))
	and		((nr_seq_nut_prot = nr_seq_nut_pac_prot_p) or (coalesce(nr_seq_nut_pac_prot_p::text, '') = ''))
	and		((nr_seq_nut_pac = nr_seq_nut_pac_p) or (coalesce(nr_seq_nut_pac_p::text, '') = ''))
	and		((nr_seq_solucao = nr_seq_solucao_p) or (coalesce(nr_seq_solucao_p::text, '') = ''))
	and		((nr_seq_gasoterapia = nr_seq_gasoterapia_p) or (coalesce(nr_seq_gasoterapia_p::text, '') = ''))
	and		((nr_seq_recomendacao = nr_seq_recomendacao_p) or (coalesce(nr_seq_recomendacao_p::text, '') = ''));

	select	coalesce(max(1),0)
	into STRICT		qt_cirurgia_w
	from		cirurgia w
	where	w.nr_prescricao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) and (qt_cirurgia_w	= 0) then

    select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_prescricao,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			nr_seq_material_rep,
			nr_seq_proced_rep,
			nr_seq_dieta_rep,
			nr_seq_nut_pac,
			nr_seq_nut_prot,
			nr_seq_solucao,
			nr_seq_recomendacao,
			nr_seq_gasoterapia,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,4),
			20,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			nr_seq_material_p,
			nr_seq_procedimento_p,
			nr_seq_dieta_p,
			nr_seq_nut_pac_p,
			nr_seq_nut_pac_prot_p,
			nr_seq_solucao_p,
			nr_seq_recomendacao_p,
			nr_seq_gasoterapia_p,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			4);
	end if;
elsif (cd_tipo_registro_p = 'XREP') then
	delete from pep_item_pendente
	where 	nr_prescricao = nr_sequencia_registro_p
	and	nm_usuario  = nm_usuario_p;
elsif (cd_tipo_registro_p = 'ADEP') then

	select	coalesce(max(nr_sequencia_w),0)
	into STRICT	nr_sequencia_w
	from	pep_item_pendente
	where	nr_prescricao = nr_sequencia_registro_p
	and		((nr_seq_horario	= nr_seq_horario_p) or
			 (nr_seq_item_adep = nr_seq_item_adep_p AND nr_etapa_adep = nr_etapa_adep_p))
	and		ie_tipo_item_adep = ie_tipo_item_adep_p;

	select	coalesce(max(1),0)
	into STRICT	qt_cirurgia_w
	from	cirurgia w
	where	w.nr_prescricao = nr_sequencia_registro_p;

	if (nr_sequencia_w = 0) and (qt_cirurgia_w	= 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_prescricao,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			nr_seq_horario,
			ie_tipo_item_adep,
			nr_seq_item_adep,
			nr_etapa_adep,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,1283),
			20,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			nr_seq_horario_p,
			ie_tipo_item_adep_p,
			nr_seq_item_adep_p,
			nr_etapa_adep_p,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			1283);

	end if;

	--inserir_item_pend_adep(nr_sequencia_w, ie_tipo_item_adep_p, nr_seq_evento_adep_p, nm_usuario_p);
elsif (cd_tipo_registro_p = 'XADEP') then
	delete from pep_item_pendente
	where	nr_prescricao = nr_sequencia_registro_p
	and		((nr_seq_horario	= nr_seq_horario_p) or
			 (nr_seq_item_adep = nr_seq_item_adep_p AND nr_etapa_adep = nr_etapa_adep_p))
	and		ie_tipo_item_adep = ie_tipo_item_adep_p;
elsif ((cd_tipo_registro_p = 'XSAE') or (cd_tipo_registro_p = 'XSAPS')) then

	delete from pep_item_pendente
	where nr_seq_sae = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'LR') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_loco_reg = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

    select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_loco_reg,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,390),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			CASE WHEN nr_item_pep_w=411 THEN nr_item_pep_w  ELSE 390 END );
	end if;

elsif (cd_tipo_registro_p = 'XLR') then

	delete from pep_item_pendente
	where nr_seq_loco_reg = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'APAE') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'APAE'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,7),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XAPAE') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'APAE'
	and	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AEL') then --essa vem da APAE
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and	IE_TIPO_REGISTRO = 'AEL'
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,7),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XAEL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'AEL'
	and	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PM') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_parecer = nr_sequencia_registro_p
	and	IE_TIPO_REGISTRO = 'PM'
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	select 	nextval('pep_item_pendente_seq')
	into STRICT 	nr_sequencia_w
	;

	insert into pep_item_pendente(
		nr_sequencia,
		dt_atualizacao,
		nm_usuario,
		dt_atualizacao_nrec,
		nm_usuario_nrec,
		dt_registro,
		cd_pessoa_fisica,
		nr_atendimento,
		nr_parecer,
		IE_TIPO_REGISTRO,
		nr_seq_item_pront,
		IE_TIPO_PENDENCIA,
		ie_pendente_assinat_usuario,
		ie_gerado_funcao_ehr,
		ie_gerado_funcao_pepo,
		nr_seq_item_orig_pront)
	values (	nr_sequencia_w,
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		cd_pessoa_fisica_p,
		nr_atendimento_p,
		nr_sequencia_registro_p,
		cd_tipo_registro_p,
		coalesce(nr_item_pep_w,51),
		coalesce(ie_tipo_pendencia_p,'L'),
		ie_pendente_assinat_usuario_w,
		ie_gerado_funcao_ehr_w,
		ie_gerado_funcao_pepo_w,
		51);
		
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 50721, 'NR_PARECER', clock_timestamp(), nr_sequencia_w, 51);
		end if;


elsif (cd_tipo_registro_p = 'XPM') then

	delete 	from pep_item_pendente
	where 	nr_parecer = nr_sequencia_registro_p
	and 	ie_tipo_registro = 'PM'
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PCP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_cta_pendencia = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_cta_pendencia,
			ds_item,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			ds_texto_aux_w,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XPCP') then

	delete from pep_item_pendente
	where nr_seq_cta_pendencia = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'QLAN') then --eh do PEP, mas n tem projeto de assinatura
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_anotacao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_anotacao,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
			
	end if;

elsif (cd_tipo_registro_p = 'XQLAN') then

	delete from pep_item_pendente
	where 	nr_seq_anotacao = nr_sequencia_registro_p
	and	coalesce(ie_tipo_pendencia,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'QLM') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_pac_medic = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_pac_medic,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XQLM') then

	delete from pep_item_pendente
	where 	nr_seq_pac_medic = nr_sequencia_registro_p
	and	coalesce(ie_tipo_pendencia,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'QLI') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_intercorrencia = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_intercorrencia,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XQLI') then

	delete from pep_item_pendente
	where 	nr_seq_intercorrencia = nr_sequencia_registro_p
	and	coalesce(ie_tipo_pendencia,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'GP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_perda_ganho = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_perda_ganho,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,14),
			14,

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			14,
			18);
			
			if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
				gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
				clock_timestamp(), 36671, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 14);
			end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XGP') then

	delete from pep_item_pendente
	where nr_seq_perda_ganho = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AD') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_aldrete = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_aldrete,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_escala,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,374),

			21,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_escala_p,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			374,
			2);
			
			if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
				gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
				clock_timestamp(), 51438, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 374);
			end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XAD') then

	delete from pep_item_pendente
	where nr_seq_aldrete = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PO') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_posicao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_posicao,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			15,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XPO') then

	delete from pep_item_pendente
	where nr_seq_posicao = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_pele = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
  	into STRICT 	nr_sequencia_w
  	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_pele,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			15,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XPL') then

	delete from pep_item_pendente
	where nr_seq_pele = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'IC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_incisao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
  	into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_incisao,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			15,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XIC') then

	delete from pep_item_pendente
	where nr_seq_incisao = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CR') then

	if (obter_funcao_ativa = 281) then
		begin
		select	count(*)
		into STRICT	qt_registros_w
		from	pep_item_pendente
		where	NR_SEQ_REGISTRO = nr_sequencia_registro_p
		and 	nr_seq_item_pront = 53;


		if (qt_registros_w = 0) then

    	select 	nextval('pep_item_pendente_seq')
	    into STRICT 	nr_sequencia_w
	;

			insert into pep_item_pendente(
				nr_sequencia,
				dt_atualizacao,
				nm_usuario,
				dt_atualizacao_nrec,
				nm_usuario_nrec,
				dt_registro,
				cd_pessoa_fisica,
				nr_atendimento,
				NR_SEQ_REGISTRO,
				nr_seq_item_pront,
				ie_tipo_pendencia,
				ie_pendente_assinat_usuario,
				ie_gerado_funcao_ehr,
				ie_gerado_funcao_pepo,
				nr_seq_item_orig_pront)
			values (	nr_sequencia_w,
				clock_timestamp(),
				nm_usuario_p,
				clock_timestamp(),
				nm_usuario_p,
				clock_timestamp(),
				cd_pessoa_fisica_p,
				nr_atendimento_p,
				nr_sequencia_registro_p,
				53,
				coalesce(ie_tipo_pendencia_p,'L'),
				ie_pendente_assinat_usuario_w,
				ie_gerado_funcao_ehr_w,
				ie_gerado_funcao_pepo_w,
				53);
			end if;
		end;
	end if;

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_curativo = nr_sequencia_registro_p;


	if (qt_registros_w = 0) and (obter_funcao_ativa <> 281) then

    select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_curativo,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			15,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCR') then
	if (cd_funcao_pend_p = 281) then

		delete from pep_item_pendente
		where nr_seq_registro = nr_sequencia_registro_p
		and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
		and 	nr_seq_item_pront = 53;

	else

		delete from pep_item_pendente
		where nr_seq_curativo = nr_sequencia_registro_p
		and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	end if;

elsif (cd_tipo_registro_p = 'CJ') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_conjunto = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
    into STRICT 	nr_sequencia_w
  	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_conjunto,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,793),
			59,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			793);
	end if;

elsif (cd_tipo_registro_p = 'XCJ') then

	delete from pep_item_pendente
	where nr_seq_conjunto = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AV') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_avaliacao = nr_sequencia_registro_p;

	if	(qt_registros_w = 0 and ((Obter_Funcao_Ativa <> 10055) or (Obter_Funcao_Ativa = 10055 and coalesce(ie_tipo_pendencia_p, 'L') <> 'A'))) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_avaliacao,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,7),

			58,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			coalesce(nr_item_pep_w,7),
			16);
			
			if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
				gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
				clock_timestamp(), 50718, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, coalesce(nr_item_pep_w,7));
			end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XAV') then

	delete from pep_item_pendente
	where nr_seq_avaliacao = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'LAVAL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_ATEND_SRPA = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			NR_SEQ_ATEND_SRPA,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			16,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			nr_sequencia_registro_p,
			2);
	end if;

elsif (cd_tipo_registro_p = 'XLAVAL') then

	delete from pep_item_pendente
	where NR_SEQ_ATEND_SRPA = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');



elsif (cd_tipo_registro_p = 'CTA') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_tecnica_anest = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_tecnica_anest,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			16,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			8);
	end if;

elsif (cd_tipo_registro_p = 'XCTA') then

	delete from pep_item_pendente
	where nr_seq_tecnica_anest = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CDA') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_desc_anest = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_desc_anest,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			16,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			8);
	end if;

elsif (cd_tipo_registro_p = 'XCDA') then

	delete from pep_item_pendente
	where nr_seq_desc_anest = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'SV') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_sinal_vital = nr_sequencia_registro_p;

	if (coalesce(nr_seq_reg_elemento_p,0) > 0) then
		ie_gerado_funcao_ehr_w := 'S';
		nr_item_pep_w := 13;
	end if;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_sinal_vital,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,13),

			11,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			13,
			3);
			
			if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
				gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
				clock_timestamp(), 184, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 13);
			end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XSV') then

	delete from pep_item_pendente
	where nr_seq_sinal_vital = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_anamnese = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_anamnese,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,83),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			83);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 25172, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 83);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XAP') then

	delete from pep_item_pendente
	where nr_seq_anamnese = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AT') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_atestado = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_atestado,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,74),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			74);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51454, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 74);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XAT') then

	delete from pep_item_pendente
	where 	nr_seq_atestado = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif ( cd_tipo_registro_p  = 'AVN') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'AVN';

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,41),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			41,
			cd_tipo_registro_p);
	end if;
	
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 53452, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 41);
		end if;
elsif ( cd_tipo_registro_p  = 'AVF') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'AVF';

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,1496),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			1496,
			cd_tipo_registro_p);
	end if;
	
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 53666, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 1496);
		end if;


elsif ( cd_tipo_registro_p  = 'PPD') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'PPD';

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,1073),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			1073,
			cd_tipo_registro_p);
	end if;
	
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 53681, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 1073);
		end if;

elsif (cd_tipo_registro_p = 'XPPD') then

	delete from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and	IE_TIPO_REGISTRO = 'PPD';

elsif ( cd_tipo_registro_p  = 'ALA') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,394),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			394,
			cd_tipo_registro_p);
	end if;

		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 53662, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 394);
		end if;
		
elsif ( cd_tipo_registro_p  = 'ALP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,394),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			394,
			cd_tipo_registro_p);
	end if;
	
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 53658, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 394);
		end if;

elsif ( cd_tipo_registro_p  = 'EVAD') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,1550),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			1550,
			cd_tipo_registro_p);
	end if;
	
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 53719, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 1550);
		end if;

elsif (cd_tipo_registro_p = 'XAVN') then

	delete from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and	IE_TIPO_REGISTRO = 'AVN';

elsif (cd_tipo_registro_p = 'XAVF') then

	delete from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and	IE_TIPO_REGISTRO = 'AVF';

elsif (cd_tipo_registro_p = 'XALA') then

	delete from pep_item_pendente
	where nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and	IE_TIPO_REGISTRO = 'ALA';

elsif (cd_tipo_registro_p = 'XALP') then

	delete from pep_item_pendente
	where nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and	IE_TIPO_REGISTRO = 'ALP';
	
elsif (cd_tipo_registro_p = 'XEVAD') then

	delete from pep_item_pendente
	where nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and	IE_TIPO_REGISTRO = 'EVAD';

elsif (cd_tipo_registro_p = 'HSI') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_internacao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_internacao,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51488, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;

	end if;

elsif (cd_tipo_registro_p = 'XHSI') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_internacao = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HRP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_internacao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
         ie_tipo_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
         cd_tipo_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
	end if;

elsif (cd_tipo_registro_p = 'XHRP') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'HRP'
	and	   nr_seq_registro      = nr_sequencia_registro_p
	and	   coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HST') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_tratamento = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_tratamento,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51490, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHST') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_tratamento = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSS') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_social = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_social,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51492, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSS') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_social = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSV') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_vacina = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_vacina,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51494, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSV') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_vacina = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSD') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_deficiencia = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_deficiencia,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51496, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSD') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_deficiencia = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSTR') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_transfusao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_transfusao,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 49782, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSTR') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_transfusao = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSM') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_mulher = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_mulher,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51501, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSM') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_mulher = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_exame = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_exame,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 51508, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSP') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_exame = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSDS') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_declaracao = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_declaracao,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
	end if;

elsif (cd_tipo_registro_p = 'XHSDS') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_declaracao = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSAL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_alergia = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_alergia,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 25175, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;			
			
	end if;

elsif (cd_tipo_registro_p = 'XHSAL') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_alergia = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p		= 'HSFR') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and	IE_TIPO_REGISTRO = 'HSFR'
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,93),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p		= 'XHSFR') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'HSFR'
	and	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSAC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_clinico = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_clinico,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 25177, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;

			
	end if;

elsif (cd_tipo_registro_p = 'XHSAC') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_clinico = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSMU') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_medic_uso = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_medic_uso,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 25180, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSMU') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_medic_uso = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_pepo_partic = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_pepo_partic,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
	end if;

elsif (cd_tipo_registro_p = 'XPP') then

	delete from pep_item_pendente
	where 	nr_seq_pepo_partic = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ESCCC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_escala_chung = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_pepo_partic,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			nr_seq_escala_chung,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			null,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93,
			nr_sequencia_registro_p,
			3);
	end if;

elsif (cd_tipo_registro_p = 'XESCCC') then
	delete from pep_item_pendente
	where 	nr_seq_escala_chung = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ESP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_escala_possum = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_pepo_partic,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			nr_seq_escala_possum,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			null,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93,
			nr_sequencia_registro_p,
			2);
	end if;

elsif (cd_tipo_registro_p = 'XESP') then
	delete from pep_item_pendente
	where 	nr_seq_escala_possum = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'HSHV') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_vicio = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_vicio,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p,
			clock_timestamp(), 25178, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSHV') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_vicio = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSCI') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_cirurgia = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_cirurgia,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25176, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSCI') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_cirurgia = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSO') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_ocorrencia = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_ocorrencia,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25181, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSO') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_ocorrencia = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSAS') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_acessorio = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_acessorio,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25174, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSAS') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_acessorio = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'HSAM') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_hist_saude_atend_medic = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_hist_saude_atend_medic,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25179, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XHSAM') then

	delete from pep_item_pendente
	where 	nr_seq_hist_saude_atend_medic = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'D') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_diag_doenca = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_diag_doenca,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,1),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			1);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25173, 'NR_SEQ_INTERNO', clock_timestamp(), nr_sequencia_w, 93);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XD') then

	delete from pep_item_pendente
	where nr_seq_diag_doenca = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CAAM') or 	--Medicamentos
	(cd_tipo_registro_p = 'CAAA') or 	--Agentes anestesicos
	(cd_tipo_registro_p = 'CAAT') or 	--Terapia hidroeletrolitica
	(cd_tipo_registro_p = 'CAAMAT') or 	--Materiais
	(cd_tipo_registro_p = 'CAAH') then 	--Hemocomponente
	if (cd_tipo_registro_p = 'CAAM') then
		nr_seq_item_pepo_w 	:= 13;
	elsif (cd_tipo_registro_p = 'CAAA') then
		nr_seq_item_pepo_w 	:= 9;
	elsif (cd_tipo_registro_p = 'CAAT') then
		nr_seq_item_pepo_w	:= 10;
	elsif (cd_tipo_registro_p = 'CAAMAT') then
		nr_seq_item_pepo_w	:= 37;
	elsif (cd_tipo_registro_p = 'CAAH') then
		nr_seq_item_pepo_w	:= 43;
	end if;

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_cirur_agente = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_cirur_agente,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			nr_seq_item_pepo_w,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCAAM') or 	--Medicamentos
	(cd_tipo_registro_p = 'XCAAA') or 	--Agentes anestesicos
	(cd_tipo_registro_p = 'XCAAT') or 	--Terapia hidroeletrolitica
	(cd_tipo_registro_p = 'XCAAMAT') or 	--Materiais
	(cd_tipo_registro_p = 'XCAAH') then 	--Hemocomponente
	delete 	from pep_item_pendente
	where 	nr_seq_cirur_agente = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'EHR') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_EHR_REG = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_EHR_REG,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,884),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			coalesce(nr_item_pep_w,884));
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25187, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w,410);--410 = templates, 884 = Atendimento ambulatorial
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XEHR') then

	delete from pep_item_pendente
	where NR_SEQ_EHR_REG = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'SVMA') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_ATEND_AVAL_ANALGESIA     = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_ATEND_AVAL_ANALGESIA ,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront
			)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,13),

			11,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			13);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25183, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 13);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XSVMA') then

	delete from pep_item_pendente
	where NR_SEQ_ATEND_AVAL_ANALGESIA     = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'SVMH') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_ATEND_MONIT_HEMO     = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_ATEND_MONIT_HEMO ,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,13),

			11,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			13);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25184, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 13);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XSVMH') then

	delete from pep_item_pendente
	where NR_SEQ_ATEND_MONIT_HEMO     = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'SVMR') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_ATEND_MONIT_RESP     = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_ATEND_MONIT_RESP ,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			NR_SEQ_ITEM_FANEP)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,13),

			11,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			13,
			3);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25185, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 13);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XSVMR') then

	delete from pep_item_pendente
	where NR_SEQ_ATEND_MONIT_RESP     = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'REC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_RECEITA = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_RECEITA,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,73),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			73);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 50172, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 73);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XREC') then

	delete from pep_item_pendente
	where 	NR_SEQ_RECEITA = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'RECAMB') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_RECEITA_AMB = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
	  into STRICT 	nr_sequencia_w
	;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_RECEITA_AMB,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,73),

			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			73);
	end if;

elsif (cd_tipo_registro_p = 'XRECAMB') then

	delete from pep_item_pendente
	where 	NR_SEQ_RECEITA_AMB = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'ESC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_escala = nr_sequencia_registro_p
	and		ie_escala = ie_escala_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_escala,
			ie_escala,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			ie_escala_p,
			coalesce(nr_item_pep_w,374),
			21,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			374);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), obter_dados_proj_assinatura('XESC',ie_tipo_pendencia_p, ie_escala_p, 'A'), 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 374);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XESC') then

	delete	from pep_item_pendente
	where 	nr_seq_escala = nr_sequencia_registro_p
	and		ie_escala = ie_escala_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'EVT') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_EVENTO = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_EVENTO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,273),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			273);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 53169, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 273);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XEVT') then

	delete from pep_item_pendente
	where 	NR_SEQ_EVENTO = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'OA') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_ORIENT_ALTA = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_ORIENT_ALTA,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,153),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			153);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25186, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 153);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XOA') then

	delete from pep_item_pendente
	where 	NR_SEQ_ORIENT_ALTA = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CIH') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_PRECAUCAO = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_PRECAUCAO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,853),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			853);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 51335, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 853);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XCIH') then

	delete from pep_item_pendente
	where 	NR_SEQ_PRECAUCAO = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'OAE') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_ORIENT_ALTA_ENF = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_ORIENT_ALTA_ENF,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,153),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			153);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 51373, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 153);
		end if;
			
	end if;

elsif (cd_tipo_registro_p = 'XOAE') then

	delete from pep_item_pendente
	where 	NR_SEQ_ORIENT_ALTA_ENF = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'ONC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	NR_SEQ_ATEND_CICLO = nr_sequencia_registro_p;

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			NR_SEQ_ATEND_CICLO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,223),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			223);
	end if;

elsif (cd_tipo_registro_p = 'XONC') then

	delete from pep_item_pendente
	where 	NR_SEQ_ATEND_CICLO = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');



elsif (cd_tipo_registro_p		= 'OFT') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'OFT'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p		= 'XOFT') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'OFT'
	and	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p		= 'JS') then

     select	count(*)
	into STRICT	     qt_registros_w
	from	     pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'JS'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
               nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,393),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
               393);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 52848, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 393);
		end if;
			
	end if;

elsif (cd_tipo_registro_p		= 'XJS') then

     delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'JS'
	and	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p		= 'DOB') then

     select	count(*)
	into STRICT	     qt_registros_w
	from	     pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'DOB'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
               nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,763),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
               763);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 52889, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 763);
		end if;
			
	end if;

elsif (cd_tipo_registro_p		= 'XDOB') then

     delete    from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'DOB'
	and	     nr_seq_registro = nr_sequencia_registro_p
	and	     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p		= 'SUM') then

     select	count(*)
	into STRICT	     qt_registros_w
	from	     pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'SUM'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
               nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,1173),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
               1173);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 52908, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 1173);
		end if;

	end if;

elsif (cd_tipo_registro_p		= 'XSUM') then

     delete    from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'SUM'
	and	     nr_seq_registro = nr_sequencia_registro_p
	and	     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p		= 'PEE') then

     select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'PEE'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,385),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			385);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 53210, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 385);
		end if;
			
	end if;

elsif (cd_tipo_registro_p		= 'XPEE') then

     delete    from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'PEE'
	and	     nr_seq_registro = nr_sequencia_registro_p
	and	     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p		= 'RP') then

     select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and	IE_TIPO_REGISTRO = 'RP'
	and	nr_parecer = nr_parecer_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_parecer,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			nr_parecer_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,51),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			51);
			
		select 	max(nr_seq_interno)
		into STRICT	nr_seq_interno_parecer_w
		from 	parecer_medico
		where	nr_parecer = nr_parecer_p
		and		nr_sequencia = nr_sequencia_registro_p;
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_seq_interno_parecer_w, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 50723, 'NR_SEQ_INTERNO', clock_timestamp(), nr_sequencia_w, 51);
		end if;
			
	end if;

elsif (cd_tipo_registro_p		= 'XRP') then

	delete	from pep_item_pendente
	where 	ie_tipo_registro = 'RP'
	and     nr_seq_registro = nr_sequencia_registro_p
	and	nr_parecer = nr_parecer_p
	and     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'EFAN') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'EFAN'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_equip_cirurgia, --nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,46),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			CASE WHEN Obter_Funcao_Ativa=900 THEN  'S'  ELSE ie_gerado_funcao_pepo_w END );

	end if;

elsif (cd_tipo_registro_p = 'XEFAN') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'EFAN'
	and	nr_seq_equip_cirurgia = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'TMOV') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'TMOV'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_parecer,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			nr_parecer_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,62),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XTMOV') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'TMOV'
	and     nr_seq_registro = nr_sequencia_registro_p
	and     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'ADTH') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ADTH'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_parecer,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			nr_parecer_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,10),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XADTH') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ADTH'
	and     nr_seq_registro = nr_sequencia_registro_p
	and     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ADHE') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ADHE'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_parecer,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			nr_parecer_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,43),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XADHE') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ADHE'
	and     nr_seq_registro = nr_sequencia_registro_p
	and     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ADMD') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ADMD'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_parecer,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			nr_parecer_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,13),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XADMD') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ADMD'
	and     nr_seq_registro = nr_sequencia_registro_p
	and     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ADAA') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ADAA'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_parecer,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			nr_parecer_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,9),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XADAA') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ADAA'
	and     nr_seq_registro = nr_sequencia_registro_p
	and     coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'EVL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'EVL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XEVL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'EVL'
	and	nr_seq_registro = nr_sequencia_registro_p
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AGRL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'AGRL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XAGRL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'AGRL'
	and      	nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'ARTL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ARTL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XARTL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ARTL'
	and      	nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'BIOL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'BIOL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XBIOL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'BIOL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'BICL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'BICL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XBICL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'BICL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CAPL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CAPL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then
  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCAPL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CAPL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CERL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CERL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCERL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CERL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AVNL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'AVNL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XAVNL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'AVNL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CTL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CTL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCTL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CTL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'DNPL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'DNPL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XDNPL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'DNPL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'EOEL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'EOEL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XEOEL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'EOEL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'FNCL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'FNCL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XFNCL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'FNCL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'GNOL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'GNOL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XGNOL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'GNOL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'MIEL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'MIEL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XMIEL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'MIEL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'MOOL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'MOOL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XMOOL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'MOOL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PAQL' or cd_tipo_registro_p = 'PQUL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XPAQL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'PAQL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'XPQUL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'PQUL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PAVL') then


	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'PAVL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XPAVL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'PAVL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'PUPL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'PUPL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XPUPL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'PUPL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'TOCL') then


	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'TOCL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XTOCL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'TOCL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'TOGL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'TOGL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XTOGL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'TOGL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'TAPL' or cd_tipo_registro_p = 'TPNL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,

			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,

			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XTAPL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'TAPL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'XTPNL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'TPNL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ULTL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ULTL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XULTL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ULTL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'IRIL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'IRIL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XIRIL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'IRIL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AVAL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'AVAL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,

			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,

			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XAVAL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'AVAL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'DATL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'DATL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XDATL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'DATL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CASL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CASL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCASL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CASL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'REFL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'REFL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XREFL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'REFL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'AURL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'AURL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XAURL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'AURL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'MARL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'MARL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XMARL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'MARL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');




elsif (cd_tipo_registro_p = 'SOHL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'SOHL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,

			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,

			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XSOHL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'SOHL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');



elsif (cd_tipo_registro_p = 'FOTL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'FOTL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XFOTL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'FOTL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ACUL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ACUL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XACUL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ACUL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'RECL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'RECL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,

			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)

		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,

			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);

	end if;

elsif (cd_tipo_registro_p = 'XRECL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'RECL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'CDC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CDC'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			18,
			coalesce(nr_item_pep_w,6),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCDC') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CDC'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'CP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CP'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			18,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

	elsif (cd_tipo_registro_p = 'CE') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		ie_tipo_registro = 'CE'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

		if (qt_registros_w = 0) then
		
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			NR_SEQ_ITEM_FANEP,
			ie_tipo_registro)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,5),
			17,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			53,
			10,
			cd_tipo_registro_p);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 50492, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 53);
		end if;
			
	end if;
elsif (cd_tipo_registro_p = 'XCE') then

	delete	from pep_item_pendente
	where	ie_tipo_registro = 'CE'
	and		nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'XCP') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CP'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'GRAV') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'GRAV'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			64,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XGRAV') then

	delete	from pep_item_pendente
	where	IE_TIPO_REGISTRO = 'GRAV'
	and		nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA, coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'SVCE') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'SVCE'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pepo,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			11,
			coalesce(nr_item_pep_w,13),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			13);
	end if;

elsif (cd_tipo_registro_p = 'XSVCE') then

	delete	from pep_item_pendente
	where	IE_TIPO_REGISTRO = 'SVCE'
	and		nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA, coalesce(ie_tipo_pendencia_p,'L')) = coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'REOL') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'REOL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,401),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XREOL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'REOL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'OCL') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'OCL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p = 'XOCL') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'OCL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'OAL') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'OAL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p = 'XOAL') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'OAL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'ONL') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ONL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p = 'XONL') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ONL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'CNL') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CNL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,398),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 51333, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 398);
		end if;
			
	end if;
elsif (cd_tipo_registro_p = 'XCNL') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CNL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'OGL') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'OGL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			416,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 51032, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 416);
		end if;
			
	end if;
elsif (cd_tipo_registro_p = 'XOGL') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'OGL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	
elsif (cd_tipo_registro_p = 'OIL') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'OIL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p = 'XOIL') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'OIL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'ODL') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ODL'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p = 'XODL') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ODL'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'LCC') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'LCC'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p = 'XLCC') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'LCC'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'ODF') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ODF'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;
elsif (cd_tipo_registro_p = 'XODF') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ODF'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'LFM') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'LFM'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			NR_SEQ_ITEM_PEPO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,397),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			51);
	end if;
elsif (cd_tipo_registro_p = 'XLFM') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'LFM'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
elsif (cd_tipo_registro_p = 'ABP') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ABP'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
	
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			NR_SEQ_ITEM_PEPO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,13),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			11);
			
		if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
			gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 25170, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 13);
		end if;
			
	end if;
elsif (cd_tipo_registro_p = 'XABP') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ABP'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif (cd_tipo_registro_p = 'ABRO') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'ABRO'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XABRO') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'ABRO'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');


elsif (cd_tipo_registro_p = 'LBI') then
	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'LBI'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			NR_SEQ_ITEM_PEPO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			coalesce(nr_item_pep_w,21),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			78);
	end if;
elsif (cd_tipo_registro_p = 'XLBI') then
	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'LBI'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
/*
Pode ou nao comecar com 1 X em seguida vem o tipo do registro
*/
elsif (
       REGEXP_LIKE(cd_tipo_registro_p, '^X?AON') or
       REGEXP_LIKE(cd_tipo_registro_p, '^X?ETX')
      ) then

    if (REGEXP_LIKE(cd_tipo_registro_p, '^X?AON')) then
        nr_item_pep_fixo_w := 389;
    elsif (REGEXP_LIKE(cd_tipo_registro_p, '^X?ETX')) then
        nr_item_pep_fixo_w := 700;
        nr_escala_fixo_w   := 105; --Toxidade
    end if;

    if (nr_item_pep_fixo_w IS NOT NULL AND nr_item_pep_fixo_w::text <> '') then

        if (ie_remover_pendencia_w) then

            delete  from pep_item_pendente
            where   nr_seq_registro    = nr_sequencia_registro_p
            and     ie_tipo_registro = SUBSTR(cd_tipo_registro_p, 2, length(cd_tipo_registro_p))
            and     coalesce(ie_tipo_pendencia, coalesce(ie_tipo_pendencia_p, 'L')) = coalesce(ie_tipo_pendencia_p, 'L')
            and     coalesce(ie_escala, 0) = coalesce(nr_escala_fixo_w,0);

        else

            select	count(*)
            into STRICT	qt_registros_w
            from	pep_item_pendente
            where	nr_seq_registro = nr_sequencia_registro_p
            and     ie_tipo_registro = cd_tipo_registro_p
            and     coalesce(ie_escala, 0) = coalesce(nr_escala_fixo_w,0);
            
            if (qt_registros_w = 0) then

            	  select 	nextval('pep_item_pendente_seq')
		            into STRICT 	nr_sequencia_w
		;

                insert into pep_item_pendente(
                    nr_sequencia,
                    dt_atualizacao,
                    nm_usuario,
                    dt_atualizacao_nrec,
                    nm_usuario_nrec,
                    dt_registro,
                    cd_pessoa_fisica,
                    nr_atendimento,
                    nr_seq_registro,
                    ie_tipo_registro,
                    nr_seq_item_pront,
                    ie_escala,
                    ie_tipo_pendencia,
                    ie_pendente_assinat_usuario,
                    ie_gerado_funcao_ehr,
                    ie_gerado_funcao_pepo,
                    nr_seq_item_orig_pront)
                values (	nr_sequencia_w,
                    clock_timestamp(),
                    nm_usuario_p,
                    clock_timestamp(),
                    nm_usuario_p,
                    clock_timestamp(),
                    cd_pessoa_fisica_p,
                    nr_atendimento_p,
                    nr_sequencia_registro_p,
                    cd_tipo_registro_p,
                    coalesce(nr_item_pep_w, nr_item_pep_fixo_w),
                    nr_escala_fixo_w,
                    coalesce(ie_tipo_pendencia_p,'L'),
                    ie_pendente_assinat_usuario_w,
                    ie_gerado_funcao_ehr_w,
                    ie_gerado_funcao_pepo_w,
                    nr_item_pep_fixo_w);
            end if;

        end if;

    end if;

    elsif (cd_tipo_registro_p = 'CMA') then

	select	count(*)
	into STRICT	qt_registros_w    
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
    and     ie_tipo_registro = 'CMA';

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			NR_SEQ_ITEM_FANEP,
            IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			16,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			8,
            cd_tipo_registro_p);
	end if;

elsif (cd_tipo_registro_p = 'XCMA') then

	delete from pep_item_pendente
	where nr_seq_registro = nr_sequencia_registro_p    
    and IE_TIPO_REGISTRO = 'CMA'
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	
elsif (cd_tipo_registro_p = 'APN') then

	select	count(*)
	into STRICT	qt_registros_w    
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and     ie_tipo_registro = 'APN';
	
	if (qt_registros_w = 0)then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pepo,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			null,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,7),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			cd_tipo_registro_p);

	end if;
	
elsif (cd_tipo_registro_p = 'XAPN') then
	delete from pep_item_pendente
	where nr_seq_registro = nr_sequencia_registro_p
	and IE_TIPO_REGISTRO = 'APN'
	and	coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');
	
elsif (cd_tipo_registro_p = 'CLEN') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = 'CLEN'
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

	if (qt_registros_w = 0) then

  	select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			IE_TIPO_REGISTRO,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p,
			null,
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w);
	end if;

elsif (cd_tipo_registro_p = 'XCLEN') then

	delete from pep_item_pendente
	where 	IE_TIPO_REGISTRO = 'CLEN'
	and	      nr_seq_registro      = nr_sequencia_registro_p
	and	      coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L');

elsif ( cd_tipo_registro_p  = 'HSAP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93,
			cd_tipo_registro_p);
		end if;

	if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
		gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 53675, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
	end if;
		
elsif (cd_tipo_registro_p = 'XHSAP') then

	delete 	from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and		IE_TIPO_REGISTRO = 'HSAP';
		
elsif ( cd_tipo_registro_p  = 'HSAT') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,93),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			93,
			cd_tipo_registro_p);
	end if;

	if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
		gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 53673, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 93);
	end if;
		
elsif (cd_tipo_registro_p = 'XHSAT') then

	delete 	from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and		IE_TIPO_REGISTRO = 'HSAT';		
	
--Partograma
elsif ( cd_tipo_registro_p  = 'PART') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,364),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			364,
			cd_tipo_registro_p);
		end if;

	if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
		gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 53688, 'NR_SEQUENCIA', clock_timestamp(), nr_sequencia_w, 364);
	end if;
		
elsif (cd_tipo_registro_p = 'XPART') then

	delete 	from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and		IE_TIPO_REGISTRO = 'PART';	
	
--Nascimento
elsif ( cd_tipo_registro_p  = 'NASC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,364),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			364,
			cd_tipo_registro_p);
		end if;

	if (coalesce(ie_tipo_pendencia_p,'L') = 'A') then
		gravar_registro_pend_assina(nr_sequencia_registro_p, nr_atendimento_p, cd_pessoa_fisica_p, nm_usuario_p, clock_timestamp(), 53693, 'NR_SEQ_INTERNO', clock_timestamp(), nr_sequencia_w, 364);
	end if;
		
elsif (cd_tipo_registro_p = 'XNASC') then

	delete 	from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and		IE_TIPO_REGISTRO = 'NASC';	

elsif (cd_tipo_registro_p = 'SUS') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
        and	ie_tipo_registro = cd_tipo_registro_p;

	if (qt_registros_w = 0) then
	
		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;

		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_item_pront,
			ie_tipo_pendencia,
			ie_pendente_assinat_usuario,
			nr_seq_item_orig_pront,
                        nr_seq_registro,
                        ie_tipo_registro)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
                        nr_seq_item_pront_p,
                        ie_tipo_pendencia_p,
                        ie_pendente_assinat_usuario_w,
                        nr_seq_item_pront_p,
			nr_sequencia_registro_p,
			cd_tipo_registro_p);
			
			gravar_registro_pend_assina(    nr_seq_item_pend_p => nr_sequencia_registro_p,
                                                        nr_atendimento_p => nr_atendimento_p,
                                                        cd_pessoa_fisica_p => cd_pessoa_fisica_p,
                                                        nm_usuario_p => nm_usuario_p,
                                                        dt_registro_p => clock_timestamp(),
                                                        nr_projeto_p => 53148,
                                                        ds_tipo_fk_p => 'NR_SEQUENCIA',
                                                        dt_atualizacao_p => clock_timestamp(),
                                                        nr_seq_pendencia_p => nr_sequencia_w,
                                                        nr_seq_item_orig_pron_p => 365);
			
	end if;

elsif (cd_tipo_registro_p = 'XSUS') then

	delete from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and	ie_tipo_registro = 'SUS';
	
elsif ( cd_tipo_registro_p  = 'ENC') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,1511),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			1511,
			cd_tipo_registro_p);
		end if;		
		
		
elsif (cd_tipo_registro_p = 'XENC') then

	delete 	from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and		IE_TIPO_REGISTRO = 'ENCAM';	
	
elsif ( cd_tipo_registro_p  = 'CIAP') then

	select	count(*)
	into STRICT	qt_registros_w
	from	pep_item_pendente
	where	nr_seq_registro = nr_sequencia_registro_p
	and		IE_TIPO_REGISTRO = cd_tipo_registro_p;

	if (qt_registros_w = 0) then

		select 	nextval('pep_item_pendente_seq')
		into STRICT 	nr_sequencia_w
		;
		
		insert into pep_item_pendente(
			nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			dt_registro,
			cd_pessoa_fisica,
			nr_atendimento,
			nr_seq_registro,
			nr_seq_item_pront,
			IE_TIPO_PENDENCIA,
			ie_pendente_assinat_usuario,
			ie_gerado_funcao_ehr,
			ie_gerado_funcao_pepo,
			nr_seq_item_orig_pront,
			IE_TIPO_REGISTRO)
		values (	nr_sequencia_w,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			nm_usuario_p,
			clock_timestamp(),
			cd_pessoa_fisica_p,
			nr_atendimento_p,
			nr_sequencia_registro_p,
			coalesce(nr_item_pep_w,1513),
			coalesce(ie_tipo_pendencia_p,'L'),
			ie_pendente_assinat_usuario_w,
			ie_gerado_funcao_ehr_w,
			ie_gerado_funcao_pepo_w,
			1513,
			cd_tipo_registro_p);
		end if;	
		
		
elsif (cd_tipo_registro_p = 'XCIAP') then

	delete 	from pep_item_pendente
	where 	nr_seq_registro = nr_sequencia_registro_p
	and		coalesce(IE_TIPO_PENDENCIA,coalesce(ie_tipo_pendencia_p,'L'))	= coalesce(ie_tipo_pendencia_p,'L')
	and		IE_TIPO_REGISTRO = 'CIAP';	
	
end if;

if (obter_funcao_ativa=381 and (nr_sequencia_w IS NOT NULL AND nr_sequencia_w::text <> '')) then
      select	count(*)
	    into STRICT	qt_registros_w
	    from	pep_item_pendente_comp
	    where	NR_SEQ_ITEM_PEND = nr_sequencia_w;

	    if (qt_registros_w = 0) then
		    select 	nextval('pep_item_pendente_comp_seq')
		    into STRICT 	nr_sequencia_comp_w
		;

        insert into pep_item_pendente_comp(
			  nr_sequencia,
			  dt_atualizacao,
			  nm_usuario,
			  dt_atualizacao_nrec,
			  nm_usuario_nrec,
			  nr_seq_item_pend,
        ie_pendencia_pepa,
        nr_seq_atend_cons_pepa
        )
		    values (	nr_sequencia_comp_w,
			  clock_timestamp(),
			  nm_usuario_p,
			  clock_timestamp(),
		  	nm_usuario_p,
        nr_sequencia_w,
        'S',
         nr_atend_cons_pepa_p);
      end if;

    end if;
if (substr(cd_tipo_registro_p,1,1)	= 'X') and (obter_dados_proj_assinatura(cd_tipo_registro_p,'A',ie_escala_p) <> 'N') and (coalesce(ie_tipo_pendencia_p,'L')	= 'L')then

	If (ie_escala_p IS NOT NULL AND ie_escala_p::text <> '') then


		CALL Gerar_registro_pendente_PEP(	substr(cd_tipo_registro_p,2,20),
					nr_sequencia_registro_p,
					cd_pessoa_fisica_p,
					nr_atendimento_p,
					nm_usuario_p,
					'A',
					null,
					null,
					null,
					null,
					null,
					ie_escala_p,
					null,
					null,
					null,
					null,
					null,
					null,
					null,
					cd_funcao_pend_p,
					nr_seq_reg_elemento_p);
	else
		if (cd_tipo_registro_p = 'XEHR' and obter_funcao_ativa = 281) then
			select max(nr_seq_template)
			into STRICT nr_seq_template_w
			from ehr_reg_template
			where NR_SEQ_REG = nr_sequencia_registro_p;

			ie_gera_assinatura_w := consiste_se_gera_assinatura(nr_seq_template_w);
		end if;
		
		if (ie_gera_assinatura_w = 'S') then

			if (cd_tipo_registro_p = 'XRP') then
				--Tratamento necessario pois nao esta passando PF e Atend quando liberado registro de resposta parecer.
				select  coalesce(max(cd_pessoa_fisica), 0),
					coalesce(max(nr_atendimento), 0)
				into STRICT    cd_pessoa_fisica_w,
					nr_atendimento_w
				from    parecer_medico_req
				where   nr_parecer = nr_parecer_p;

				CALL Gerar_registro_pendente_PEP('RP',
							nr_sequencia_registro_p,
							cd_pessoa_fisica_w,
							nr_atendimento_w,
							nm_usuario_p,
							'A',
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							cd_funcao_pend_p,
							nr_seq_reg_elemento_p,
							nr_parecer_p,
							null,
							nr_seq_item_pront_p);
			else
				CALL Gerar_registro_pendente_PEP(	substr(cd_tipo_registro_p,2,20),
							nr_sequencia_registro_p,
							cd_pessoa_fisica_p,
							nr_atendimento_p,
							nm_usuario_p,
							'A',
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							null,
							cd_funcao_pend_p,
							nr_seq_reg_elemento_p,
							null,
							null,
							nr_seq_item_pront_p);
			end if;
		end if;
	end if;


end if;

exception
when others then
	null;
end;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_registro_pendente_pep ( cd_tipo_registro_p text, nr_sequencia_registro_p bigint, cd_pessoa_fisica_p text, nr_atendimento_p bigint default null, nm_usuario_p text DEFAULT NULL, ie_tipo_pendencia_p text default 'L', nr_seq_horario_p bigint default null, ie_tipo_item_adep_p text default null, nr_seq_material_p bigint default null, nr_seq_procedimento_p bigint default null, nr_seq_dieta_p bigint default null, ie_escala_p text default null, nr_seq_nut_pac_p bigint default null, nr_seq_nut_pac_prot_p bigint default null, nr_seq_solucao_p bigint default null, nr_seq_gasoterapia_p bigint default null, nr_seq_recomendacao_p bigint default null, nr_seq_item_adep_p bigint default null, nr_etapa_adep_p bigint default null, cd_funcao_pend_p bigint default null, nr_seq_reg_elemento_p bigint default null, nr_parecer_p bigint default null, nr_seq_evento_adep_p bigint default null, nr_seq_item_pront_p bigint default null, nr_atend_cons_pepa_p bigint default null) FROM PUBLIC;

