-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE cpoe_copiar_favoritos ( itens_liberar_p text, nm_usuario_p text) AS $body$
DECLARE


  ie_tipo_item_w  varchar(3);			
  usu RECORD;
  obj RECORD;

BEGIN
for usu in (WITH RECURSIVE cte AS (

  SELECT
    trim(both regexp_substr(usu_v, '[^;]+', 1, 1)) usu_v
  from (SELECT nm_usuario_p usu_v )(regexp_substr(usu_v , '[^;]+', 1, level) IS NOT NULL AND (regexp_substr(usu_v , '[^;]+', 1, level))::text <> '')  UNION ALL

  SELECT 
    trim(both regexp_substr(usu_v, '[^;]+', 1, (c.level+1))) usu_v
  from (SELECT nm_usuario_p usu_v ) JOIN cte c ON ()

) SELECT * FROM cte;
)
loop
	for obj in (
	  select 
		trim(both regexp_substr(str, '[^,]+', 1)) tp, trim(both regexp_substr(str, '[^,]+', 3)) cd
	  from (WITH RECURSIVE cte AS (
(
		select trim(both regexp_substr(str, '[^;]+', 1, 1)) str
		from (select itens_liberar_p str )
		(regexp_substr(str , '[^;]+', 1, level) IS NOT NULL AND (regexp_substr(str , '[^;]+', 1, level))::text <> ''))  UNION ALL
(
		select trim(both regexp_substr(str, '[^;]+', 1, (c.level+1))) str
		from (select itens_liberar_p str ) JOIN cte c ON ()

) SELECT * FROM cte;
))
	loop	  
	  if (obj.tp IS NOT NULL AND obj.tp::text <> '') then
			ie_tipo_item_w := obj.tp;
			if (ie_tipo_item_w = 'MA') then
				ie_tipo_item_w := 'M';
			end if;
			
		case ie_tipo_item_w
		  when 'M' then --Material			
			insert into cpoe_fav_material(
						nr_sequencia,
						nm_usuario,
						dt_atualizacao,
						nm_usuario_nrec,
						dt_atualizacao_nrec,
						cd_amostra_cih,
						cd_intervalo,
						cd_mat_comp1,
						cd_mat_comp2,
						cd_mat_comp3,
						cd_mat_comp4,
						cd_mat_comp5,
						cd_mat_comp6,
						cd_mat_dil,
						cd_material,
						cd_mat_recons,
						cd_mat_red,
						cd_mat_soluc1,
						cd_mat_soluc2,
						cd_mat_soluc3,
						cd_mat_soluc4,
						cd_mat_soluc5,
						cd_microorganismo_cih,
						cd_topografia_cih,
						cd_unidade_medida,
						cd_unid_med_dose_comp1,
						cd_unid_med_dose_comp2,
						cd_unid_med_dose_comp3,
						cd_unid_med_dose_comp4,
						cd_unid_med_dose_comp5,
						cd_unid_med_dose_comp6,
						cd_unid_med_dose_dil,
						cd_unid_med_dose_recons,
						cd_unid_med_dose_red,
						cd_unid_med_dose_sol1,
						cd_unid_med_dose_sol2,
						cd_unid_med_dose_sol3,
						cd_unid_med_dose_sol4,
						cd_unid_med_dose_sol5,
						ds_observacao,
						ds_orientacao_preparo,
						ds_solucao,
						hr_min_aplicacao,
						ie_acm,
						ie_administracao,
						ie_antibiotico,
						ie_aplic_bolus,
						ie_aplic_lenta,
						ie_bomba_infusao,
						ie_controle_tempo,
						ie_duracao,
						ie_evento_unico,
						ie_fator_correcao,
						ie_indicacao,
						ie_lado,
						ie_medicacao_paciente,
						ie_objetivo,
						ie_origem_infeccao,
						ie_pca_modo_prog,
						ie_ref_calculo,
						ie_se_necessario,
						ie_solucao,
						ie_tipo_analgesia,
						ie_tipo_dosagem,
						ie_tipo_registro,
						ie_tipo_solucao,
						ie_um_bolus_pca,
						ie_um_dose_inicio_pca,
						ie_um_fluxo_pca,
						ie_um_limite_hora_pca,
						ie_um_limite_pca,
						ie_urgencia,
						ie_uso_antimicrobiano,
						ie_via_aplicacao,
						nr_dia_util,
						nr_etapas,
						nr_ocorrencia,
						nr_seq_mat_diluicao,
						nr_seq_mat_reconst,
						nr_seq_mat_rediluicao,
						qt_bolus_pca,
						qt_dias_liberado,
						qt_dias_solicitado,
						qt_dosagem,
						qt_dose,
						qt_dose_ataque,
						qt_dose_comp1,
						qt_dose_comp2,
						qt_dose_comp3,
						qt_dose_comp4,
						qt_dose_comp5,
						qt_dose_comp6,
						qt_dose_correcao1,
						qt_dose_correcao2,
						qt_dose_correcao3,
						qt_dose_correcao4,
						qt_dose_correcao5,
						qt_dose_dil,
						qt_dose_inicial_pca,
						qt_dose_recons,
						qt_dose_red,
						qt_dose_soluc1,
						qt_dose_soluc2,
						qt_dose_soluc3,
						qt_dose_soluc4,
						qt_dose_soluc5,
						qt_hora_aplicacao,
						qt_hora_fase,
						qt_intervalo_bloqueio,
						qt_limite_quatro_hora,
						qt_limite_uma_hora,
						qt_min_aplicacao,
						qt_min_aplic_dose_ataque,
						qt_solucao,
						qt_solucao_dil,
						qt_solucao_red,
						qt_solucao_total,
						qt_tempo_aplicacao,
						qt_total_dias_lib,
						qt_vol_adic_reconst,
						qt_vol_infusao_pca,
						qt_volume,
						ds_ref_calculo,
						qt_dose_ataque_comp1,
						qt_dose_ataque_comp2,
						qt_dose_ataque_comp3,
						qt_dose_ataque_dil,
						ie_dose_ataque,
						hr_min_aplic_ataque,
						ds_dose_diferenciada,
						ds_dose_diferenciada_comp1,
						ds_dose_diferenciada_comp2,
						ds_dose_diferenciada_comp3,
						ds_dose_diferenciada_comp4,
						ds_dose_diferenciada_comp5,
						ds_dose_diferenciada_comp6,
						ds_dose_diferenciada_dil,
						ds_dose_diferenciada_rec,
						ds_dose_diferenciada_red,
						qt_hora_fase_diferenciada,
						qt_dosagem_diferenciada,
						ie_paciente_comp1,
						ie_paciente_comp2,
						ie_paciente_comp3,
						ie_paciente_comp4,
						ie_paciente_comp5,
						ie_paciente_comp6,
						ie_pendente,
						ie_material,
						qt_dose_correcao6, 
						qt_dose_correcao7, 
						qt_dose_correcao8, 
						qt_vol_dil_corrigido, 
						qt_vol_red_corrigido, 
						qt_vol_rec_corrigido)
					SELECT
						nextval('cpoe_fav_material_seq'),
						usu.usu_v,
						clock_timestamp(),
						usu.usu_v,
						clock_timestamp(),
						cd_amostra_cih,               
						cd_intervalo,
						cd_mat_comp1,
						cd_mat_comp2,
						cd_mat_comp3,
						cd_mat_comp4,
						cd_mat_comp5,
						cd_mat_comp6,
						cd_mat_dil,
						cd_material,
						cd_mat_recons,
						cd_mat_red,
						cd_mat_soluc1,
						cd_mat_soluc2,
						cd_mat_soluc3,
						cd_mat_soluc4,
						cd_mat_soluc5,
						cd_microorganismo_cih,
						cd_topografia_cih,
						cd_unidade_medida,
						cd_unid_med_dose_comp1,
						cd_unid_med_dose_comp2,
						cd_unid_med_dose_comp3,
						cd_unid_med_dose_comp4,
						cd_unid_med_dose_comp5,
						cd_unid_med_dose_comp6,
						cd_unid_med_dose_dil,
						cd_unid_med_dose_recons,
						cd_unid_med_dose_red,
						cd_unid_med_dose_sol1,
						cd_unid_med_dose_sol2,
						cd_unid_med_dose_sol3,
						cd_unid_med_dose_sol4,
						cd_unid_med_dose_sol5,
						ds_observacao,
						ds_orientacao_preparo,
						ds_solucao,
						hr_min_aplicacao,
						ie_acm,
						ie_administracao,
						ie_antibiotico,
						ie_aplic_bolus,
						ie_aplic_lenta,
						ie_bomba_infusao,
						ie_controle_tempo,
						ie_duracao,
						ie_evento_unico,
						ie_fator_correcao,
						ie_indicacao,
						ie_lado,
						ie_medicacao_paciente,
						ie_objetivo,
						ie_origem_infeccao,
						ie_pca_modo_prog,
						ie_ref_calculo,
						ie_se_necessario,
						ie_solucao,
						ie_tipo_analgesia,
						ie_tipo_dosagem,
						ie_tipo_registro,
						ie_tipo_solucao,
						ie_um_bolus_pca,
						ie_um_dose_inicio_pca,
						ie_um_fluxo_pca,
						ie_um_limite_hora_pca,
						ie_um_limite_pca,
						ie_urgencia,
						ie_uso_antimicrobiano,
						ie_via_aplicacao,
						nr_dia_util,
						nr_etapas,
						nr_ocorrencia,
						nr_seq_mat_diluicao,
						nr_seq_mat_reconst,
						nr_seq_mat_rediluicao,
						qt_bolus_pca,
						qt_dias_liberado,
						qt_dias_solicitado,
						qt_dosagem,
						qt_dose,
						qt_dose_ataque,
						qt_dose_comp1,
						qt_dose_comp2,
						qt_dose_comp3,
						qt_dose_comp4,
						qt_dose_comp5,
						qt_dose_comp6,
						qt_dose_correcao1,
						qt_dose_correcao2,
						qt_dose_correcao3,
						qt_dose_correcao4,
						qt_dose_correcao5,
						qt_dose_dil,
						qt_dose_inicial_pca,
						qt_dose_recons,
						qt_dose_red,
						qt_dose_soluc1,
						qt_dose_soluc2,
						qt_dose_soluc3,
						qt_dose_soluc4,
						qt_dose_soluc5,
						qt_hora_aplicacao,
						qt_hora_fase,
						qt_intervalo_bloqueio,
						qt_limite_quatro_hora,
						qt_limite_uma_hora,
						qt_min_aplicacao,
						qt_min_aplic_dose_ataque,
						qt_solucao,
						qt_solucao_dil,
						qt_solucao_red,
						qt_solucao_total,
						qt_tempo_aplicacao,
						qt_total_dias_lib,
						qt_vol_adic_reconst,
						qt_vol_infusao_pca,
						qt_volume,
						ds_ref_calculo,
						qt_dose_ataque_comp1,
						qt_dose_ataque_comp2,
						qt_dose_ataque_comp3,
						qt_dose_ataque_dil,
						ie_dose_ataque,
						hr_min_aplic_ataque,
						ds_dose_diferenciada,
						ds_dose_diferenciada_comp1,
						ds_dose_diferenciada_comp2,
						ds_dose_diferenciada_comp3,
						ds_dose_diferenciada_comp4,
						ds_dose_diferenciada_comp5,
						ds_dose_diferenciada_comp6,
						ds_dose_diferenciada_dil,
						ds_dose_diferenciada_rec,
						ds_dose_diferenciada_red,
						qt_hora_fase_diferenciada,
						qt_dosagem_diferenciada,
						ie_paciente_comp1,
						ie_paciente_comp2,
						ie_paciente_comp3,
						ie_paciente_comp4,
						ie_paciente_comp5,
						ie_paciente_comp6,
						'S',
						ie_material,
						qt_dose_correcao6, 
						qt_dose_correcao7, 
						qt_dose_correcao8, 
						qt_vol_dil_corrigido, 
						qt_vol_red_corrigido, 
						qt_vol_rec_corrigido
			from cpoe_fav_material
			where nr_sequencia = obj.cd;
		  when 'N' then --Nutricao
			insert into cpoe_fav_dieta(
			  nr_sequencia,
			  nm_usuario,
			  dt_atualizacao,
			  nm_usuario_nrec,
			  dt_atualizacao_nrec,
			  cd_dieta,
			  cd_intervalo,
			  cd_material,
			  cd_mat_prod1,
			  cd_mat_prod2,
			  cd_mat_prod3,
			  cd_mat_prod4,
			  cd_mat_prod5,
			  cd_mat_prod_adic1,
			  cd_mat_prod_adic2,
			  cd_mat_prod_adic3,
			  cd_mat_prod_adic4,
			  cd_mat_prod_adic5,
			  cd_mat_prod_adic6,
			  cd_mat_dil,
			  cd_unidade_medida_dose,
			  cd_unid_med_prod1,
			  cd_unid_med_prod2,
			  cd_unid_med_prod3,
			  cd_unid_med_prod4,
			  cd_unid_med_prod5,
			  cd_unid_med_prod_adic1,
			  cd_unid_med_prod_adic2,
			  cd_unid_med_prod_adic3,
			  cd_unid_med_prod_adic4,
			  cd_unid_med_prod_adic5,
			  cd_unid_med_prod_adic6,
			  cd_unid_med_dose_dil,
			  ds_dose_diferenciada,
			  ds_evento,
			  ie_acm,
			  ie_administracao,
			  ie_aplic_bolus,
			  ie_bomba_infusao,
			  ie_continuo,
			  ie_dose_unica,
			  ie_duracao,
			  ie_evento_unico,
			  ie_inicio,
			  ie_jejum,
			  ie_jejum_antes,
			  ie_jejum_depois,
			  ie_leite_materno,
			  ie_opcao_antes,
			  ie_opcao_depois,
			  ie_referencia,
			  ie_se_necessario,
			  ie_tipo_dieta,
			  ie_tipo_dosagem,
			  ie_urgencia,
			  ie_via_aplicacao,
			  ie_via_leite1,
			  ie_via_leite2,
			  ie_via_leite3,
			  ie_via_leite4,
			  ie_via_leite5,
			  nr_etapas,
			  nr_ocorrencia,
			  nr_seq_disp_succao,
			  nr_seq_objetivo,
			  nr_seq_tipo,
			  nr_seq_via_acesso,
			  qt_dose,
			  qt_dose_prod1,
			  qt_dose_prod2,
			  qt_dose_prod3,
			  qt_dose_prod4,
			  qt_dose_prod5,
			  qt_dose_prod_adic1,
			  qt_dose_prod_adic2,
			  qt_dose_prod_adic3,
			  qt_dose_prod_adic4,
			  qt_dose_prod_adic5,
			  qt_dose_prod_adic6,
			  qt_porcentagem_adic1,
			  qt_porcentagem_adic2,
			  qt_porcentagem_adic3,
			  qt_porcentagem_adic4,
			  qt_porcentagem_adic5,
			  qt_porcentagem_adic6,	
			  qt_dose_dil,
			  qt_hora_ant,
			  qt_hora_aplicacao,
			  qt_hora_depois,
			  qt_min_ant,
			  qt_min_depois,
			  qt_parametro,
			  qt_tempo_aplic,
			  qt_tempo_pausa,
			  qt_tempo_ref,
			  qt_vel_infusao,
			  qt_volume,
			  qt_volume_total,
			  ds_orientacao,
			  qt_hora_fase,
			  ds_observacao,
			  dt_inicio_pausa,
			  nr_seq_solubilidade,
			  nr_seq_temperatura,
			  ie_pendente)
			SELECT
			  nextval('cpoe_fav_dieta_seq'),
			  usu.usu_v,
			  clock_timestamp(),
			  usu.usu_v,
			  clock_timestamp(),
			  cd_dieta,
			  cd_intervalo,
			  cd_material,
			  cd_mat_prod1,
			  cd_mat_prod2,
			  cd_mat_prod3,
			  cd_mat_prod4,
			  cd_mat_prod5,
			  cd_mat_prod_adic1,
			  cd_mat_prod_adic2,
			  cd_mat_prod_adic3,
			  cd_mat_prod_adic4,
			  cd_mat_prod_adic5,
			  cd_mat_prod_adic6,
			  cd_mat_dil,
			  cd_unidade_medida_dose,
			  cd_unid_med_prod1,
			  cd_unid_med_prod2,
			  cd_unid_med_prod3,
			  cd_unid_med_prod4,
			  cd_unid_med_prod5,
			  cd_unid_med_prod_adic1,
			  cd_unid_med_prod_adic2,
			  cd_unid_med_prod_adic3,
			  cd_unid_med_prod_adic4,
			  cd_unid_med_prod_adic5,
			  cd_unid_med_prod_adic6,
			  cd_unid_med_dose_dil,
			  ds_dose_diferenciada,
			  ds_evento,
			  ie_acm,
			  ie_administracao,
			  ie_aplic_bolus,
			  ie_bomba_infusao,
			  ie_continuo,
			  ie_dose_unica,
			  ie_duracao,
			  ie_evento_unico,
			  ie_inicio,
			  ie_jejum,
			  ie_jejum_antes,
			  ie_jejum_depois,
			  ie_leite_materno,
			  ie_opcao_antes,
			  ie_opcao_depois,
			  ie_referencia,
			  ie_se_necessario,
			  ie_tipo_dieta,
			  ie_tipo_dosagem,
			  ie_urgencia,
			  ie_via_aplicacao,
			  ie_via_leite1,
			  ie_via_leite2,
			  ie_via_leite3,
			  ie_via_leite4,
			  ie_via_leite5,
			  nr_etapas,
			  nr_ocorrencia,
			  nr_seq_disp_succao,
			  nr_seq_objetivo,
			  nr_seq_tipo,
			  nr_seq_via_acesso,
			  qt_dose,
			  qt_dose_prod1,
			  qt_dose_prod2,
			  qt_dose_prod3,
			  qt_dose_prod4,
			  qt_dose_prod5,
			  qt_dose_prod_adic1,
			  qt_dose_prod_adic2,
			  qt_dose_prod_adic3,
			  qt_dose_prod_adic4,
			  qt_dose_prod_adic5,
			  qt_dose_prod_adic6,
			  qt_porcentagem_adic1,
			  qt_porcentagem_adic2,
			  qt_porcentagem_adic3,
			  qt_porcentagem_adic4,
			  qt_porcentagem_adic5,
			  qt_porcentagem_adic6,	
			  qt_dose_dil,
			  qt_hora_ant,
			  qt_hora_aplicacao,
			  qt_hora_depois,
			  qt_min_ant,
			  qt_min_depois,
			  qt_parametro,
			  qt_tempo_aplic,
			  qt_tempo_pausa,
			  qt_tempo_ref,
			  qt_vel_infusao,
			  qt_volume,
			  qt_volume_total,
			  ds_orientacao,
			  qt_hora_fase,
			  ds_observacao,
			  dt_inicio_pausa,
			  nr_seq_solubilidade,
			  nr_seq_temperatura,
			  'S'
			from
			  cpoe_fav_dieta
			where
			  nr_sequencia = obj.cd;
		  when 'P' then --Procedimentos
			insert into cpoe_fav_procedimento(
							nr_sequencia,
							dt_atualizacao,
							nm_usuario,
							dt_atualizacao_nrec,
							nm_usuario_nrec,
							nr_seq_proc_interno,
							qt_procedimento,
							nr_seq_topografia,
							ds_observacao,
							cd_intervalo,
							ie_urgencia,
							ie_urgencia_mat1,
							ie_urgencia_mat2,
							ie_urgencia_mat3,
							ie_urgencia_mat4,
							ie_urgencia_mat5,
							cd_material_exame,
							ds_material_especial,
							ie_se_necessario,
							ie_acm,
							ie_lado,
							ie_duracao,
							ie_periodo,
							cd_mat_proc1,
							cd_mat_proc2,
							cd_mat_proc3,
							cd_mat_proc4,
							cd_mat_proc5,
							ie_administracao,
							ie_via_mat_proc1,
							ie_via_mat_proc2,
							ie_via_mat_proc3,
							ie_via_mat_proc4,
							ie_via_mat_proc5,
							ie_adm_mat1,
							ie_adm_mat2,
							ie_adm_mat3,
							ie_adm_mat4,
							ie_adm_mat5,
							ie_evento_unico,
							qt_dose_mat1,
							qt_dose_mat2,
							qt_dose_mat3,
							qt_dose_mat4,
							qt_dose_mat5,
							cd_unid_medida_dose_mat1,
							cd_unid_medida_dose_mat2,
							cd_unid_medida_dose_mat3,
							cd_unid_medida_dose_mat4,
							cd_unid_medida_dose_mat5,
							nr_seq_prot_glic,
							cd_interv_proc1,
							cd_interv_proc2,
							cd_interv_proc3,
							cd_interv_proc4,
							cd_interv_proc5,
							ie_dur_proc1,
							ie_dur_proc2,
							ie_dur_proc3,
							ie_dur_proc4,
							ie_dur_proc5,
							ds_obser_proc1,
							ds_obser_proc2,
							ds_obser_proc3,
							ds_obser_proc4,
							ds_obser_proc5,
							ie_assoc_adep1,
							ie_assoc_adep2,
							ie_assoc_adep3,
							ie_assoc_adep4,
							ie_assoc_adep5,
							nr_seq_condicao,
							ds_dado_clinico,
							ie_pendente)
						SELECT
							nextval('cpoe_fav_procedimento_seq'),
							clock_timestamp(),
							usu.usu_v,
							clock_timestamp(),
							usu.usu_v,
							nr_seq_proc_interno,
							qt_procedimento,
							nr_seq_topografia,
							ds_observacao,
							cd_intervalo,
							ie_urgencia,
							ie_urgencia_mat1,
							ie_urgencia_mat2,
							ie_urgencia_mat3,
							ie_urgencia_mat4,
							ie_urgencia_mat5,
							cd_material_exame,
							ds_material_especial,
							ie_se_necessario,
							ie_acm,
							ie_lado,
							ie_duracao,
							ie_periodo,
							cd_mat_proc1,
							cd_mat_proc2,
							cd_mat_proc3,
							cd_mat_proc4,
							cd_mat_proc5,
							ie_administracao,
							ie_via_mat_proc1,
							ie_via_mat_proc2,
							ie_via_mat_proc3,
							ie_via_mat_proc4,
							ie_via_mat_proc5,
							ie_adm_mat1,
							ie_adm_mat2,
							ie_adm_mat3,
							ie_adm_mat4,
							ie_adm_mat5,
							ie_evento_unico,
							qt_dose_mat1,
							qt_dose_mat2,
							qt_dose_mat3,
							qt_dose_mat4,
							qt_dose_mat5,
							cd_unid_medida_dose_mat1,
							cd_unid_medida_dose_mat2,
							cd_unid_medida_dose_mat3,
							cd_unid_medida_dose_mat4,
							cd_unid_medida_dose_mat5,
							nr_seq_prot_glic,
							cd_interv_proc1,
							cd_interv_proc2,
							cd_interv_proc3,
							cd_interv_proc4,
							cd_interv_proc5,
							ie_dur_proc1,
							ie_dur_proc2,
							ie_dur_proc3,
							ie_dur_proc4,
							ie_dur_proc5,
							ds_obser_proc1,
							ds_obser_proc2,
							ds_obser_proc3,
							ds_obser_proc4,
							ds_obser_proc5,
							ie_assoc_adep1,
							ie_assoc_adep2,
							ie_assoc_adep3,
							ie_assoc_adep4,
							ie_assoc_adep5,
							nr_seq_condicao,
							ds_dado_clinico,
							'S'
			  from
				cpoe_fav_procedimento
			  where
				nr_sequencia = obj.cd;
		  when 'G' then --Gasoterapia
			insert into cpoe_fav_gasoterapia(
						nr_sequencia,
						nm_usuario,
						dt_atualizacao,
						nm_usuario_nrec,
						dt_atualizacao_nrec,
						cd_intervalo,
						cd_intervalo_mat1,
						cd_intervalo_mat2,
						cd_intervalo_mat3,
						cd_mat_equip1,
						cd_mat_equip2,
						cd_mat_equip3,
						cd_modalidade_vent,
						cd_unid_med_dose1,
						cd_unid_med_dose2,
						cd_unid_med_dose3,
						ds_observacao,
						dt_tempo_duracao,
						ie_acm,
						ie_administracao,
						ie_disp_resp_esp,
						ie_duracao,
						ie_evento_unico,
						ie_inicio,
						ie_modo_adm,
						ie_periodo,
						ie_respiracao,
						ie_se_necessario,
						ie_tipo_onda,
						ie_unidade_medida,
						ie_urgencia,
						ie_via_aplic1,
						ie_via_aplic2,
						ie_via_aplic3,
						nr_seq_gas,
						qt_acima_peep,
						qt_be,
						qt_bic,
						qt_dose_mat1,
						qt_dose_mat2,
						qt_dose_mat3,
						qt_fluxo_insp,
						qt_freq_vent,
						qt_gasoterapia,
						qt_min_intervalo,
						qt_pco2,
						qt_peep,
						qt_ph,
						qt_pip,
						qt_ps,
						qt_referencia,
						qt_sato2,
						qt_sensib_resp,
						qt_tempo_insp,
						qt_ti_te,
						qt_vc_prog,
						QT_HORA_FASE,
						ie_pendente)
					SELECT
						nextval('cpoe_fav_gasoterapia_seq'),
						usu.usu_v,
						clock_timestamp(),
						usu.usu_v,
						clock_timestamp(),
						cd_intervalo,
						cd_intervalo_mat1,
						cd_intervalo_mat2,
						cd_intervalo_mat3,
						cd_mat_equip1,
						cd_mat_equip2,
						cd_mat_equip3,
						cd_modalidade_vent,
						cd_unid_med_dose1,
						cd_unid_med_dose2,
						cd_unid_med_dose3,
						ds_observacao,
						dt_tempo_duracao,
						ie_acm,
						ie_administracao,
						ie_disp_resp_esp,
						ie_duracao,
						ie_evento_unico,
						ie_inicio,
						ie_modo_adm,
						ie_periodo,
						ie_respiracao,
						ie_se_necessario,
						ie_tipo_onda,
						ie_unidade_medida,
						ie_urgencia,
						ie_via_aplic1,
						ie_via_aplic2,
						ie_via_aplic3,
						nr_seq_gas,
						qt_acima_peep,
						qt_be,
						qt_bic,
						qt_dose_mat1,
						qt_dose_mat2,
						qt_dose_mat3,
						qt_fluxo_insp,
						qt_freq_vent,
						qt_gasoterapia,
						qt_min_intervalo,
						qt_pco2,
						qt_peep,
						qt_ph,
						qt_pip,
						qt_ps,
						qt_referencia,
						qt_sato2,
						qt_sensib_resp,
						qt_tempo_insp,
						qt_ti_te,
						qt_vc_prog,
						QT_HORA_FASE,
						'S'
			from
			  cpoe_fav_gasoterapia
			where
			  nr_sequencia = obj.cd;
		  when 'R' then --Recomendação	
			insert into cpoe_fav_recomendacao(
							nr_sequencia,
							dt_atualizacao,
							nm_usuario,
							dt_atualizacao_nrec,
							nm_usuario_nrec,
							nr_ocorrencia,
							ds_recomendacao,
							cd_intervalo,
							cd_recomendacao,
							ie_acm,
							ie_urgencia,
							ie_se_necessario,
							ie_duracao,
							nr_seq_topografia,
							ie_administracao,
							ie_evento_unico,
							ie_pendente)
						SELECT
							nextval('cpoe_fav_recomendacao_seq'),
							clock_timestamp(),
							usu.usu_v,
							clock_timestamp(),
							usu.usu_v,
							nr_ocorrencia,
							ds_recomendacao,
							cd_intervalo,
							cd_recomendacao,
							ie_acm,
							ie_urgencia,
							ie_se_necessario,
							ie_duracao,
							nr_seq_topografia,
							ie_administracao,
							ie_evento_unico,
							'S'
			  from
				cpoe_fav_recomendacao
			  where
				nr_sequencia = obj.cd;
		end case;
	  end if;
	end loop;
end loop;
commit;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cpoe_copiar_favoritos ( itens_liberar_p text, nm_usuario_p text) FROM PUBLIC;

