-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE excluir_ajuste_inconsistencia ( nm_usuario_p text, ie_base_wheb_p text) AS $body$
BEGIN

if (coalesce(ie_base_wheb_p, 'S') = 'N' and
		'TASY_AJUSTE_BASE' = nm_usuario_p) then
	begin
	
	delete	from tasy_ajuste_base;
	
	CALL gravar_log_exclusao(
		'TASY_AJUSTE_BASE',
		'TASY',
		substr('TASY_AJUSTE_BASE; USUARIO=' || nm_usuario_p || ',DT_EXCLUSAO=' || to_char(clock_timestamp(), 'dd/mm/yyyy hh24:mi:ss'),1,255), 'N');
		
		
	delete	from tasy_config_inconsistencia;
	
	CALL gravar_log_exclusao(
		'TASY_CONFIG_INCONSISTENCIA',
		'TASY',
		substr('TASY_CONFIG_INCONSISTENCIA; USUARIO=' || nm_usuario_p || ',DT_EXCLUSAO=' || to_char(clock_timestamp(), 'dd/mm/yyyy hh24:mi:ss'),1,255), 'N');
	
	commit;
	end;
end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE excluir_ajuste_inconsistencia ( nm_usuario_p text, ie_base_wheb_p text) FROM PUBLIC;

