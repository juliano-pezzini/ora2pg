-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE alterar_saldo_diario_estrang (vl_saldo_inicial_p bigint, vl_cheque_pre_inicial_p bigint, vl_cheque_vista_inicial_p bigint, vl_especie_inicial_p bigint, nr_sequencia_p bigint, ie_posteriores_p text) AS $body$
DECLARE


nr_seq_caixa_saldo_w	caixa_saldo_diario.nr_sequencia%type;


BEGIN
	if (nr_sequencia_p IS NOT NULL AND nr_sequencia_p::text <> '') then
		begin
			select	nr_seq_caixa_saldo
			into STRICT	nr_seq_caixa_saldo_w
			from	caixa_saldo_estrang
			where	nr_sequencia = nr_sequencia_p;

			update	caixa_saldo_estrang
			set 	vl_saldo_inicial	= vl_saldo_inicial_p,
				vl_cheque_pre_inicial	= vl_cheque_pre_inicial_p,
				vl_cheque_vista_inicial	= vl_cheque_vista_inicial_p,
				vl_especie_inicial	= vl_especie_inicial_p
			where   nr_sequencia		= nr_sequencia_p;

			CALL recalcular_caixa_saldo_diario(nr_seq_caixa_saldo_w, ie_posteriores_p);

			commit;
		end;
	end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE alterar_saldo_diario_estrang (vl_saldo_inicial_p bigint, vl_cheque_pre_inicial_p bigint, vl_cheque_vista_inicial_p bigint, vl_especie_inicial_p bigint, nr_sequencia_p bigint, ie_posteriores_p text) FROM PUBLIC;

