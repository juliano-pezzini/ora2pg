-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE esus_carregar_fichas_lote ( ie_tipo_lote_esus_p text, nr_seq_lote_p esus_lote_envio.nr_sequencia%type, dt_inicio_p timestamp, dt_fim_p timestamp ) AS $body$
BEGIN
  if (ie_tipo_lote_esus_p = '1') then
    update 	ESUS_CAD_INDIVIDUAL set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '2') then
    update 	ESUS_CAD_DOMICILIAR set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '3') then
    update 	ESUS_ATEND_INDIVIDUAL set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '4') then
    update 	ESUS_ATIVIDADE_COLETIVA set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and dt_atividade between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '5') then
    update 	ESUS_FICHA_PROC_PROFIS set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '6') then
    update 	ESUS_VISITA_DOMICILIAR set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '7') then
    update 	ESUS_AVAL_ELEGIBILIDADE set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '8') then
    update 	ESUS_ATEND_DOMICILIAR set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '9') then
    update 	ESUS_ATEND_ODONTOLOG set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '10') then
    update 	ESUS_MARC_CONS_ALIMENT set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '11') then
    update 	ESUS_ZICA_MICROCEFALIA set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = '12') then
    update 	ESUS_VACINACAO set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  elsif (ie_tipo_lote_esus_p = 'T') then
    update 	ESUS_CAD_INDIVIDUAL set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_CAD_DOMICILIAR set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_ATEND_INDIVIDUAL set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_ATIVIDADE_COLETIVA set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and dt_atividade between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_FICHA_PROC_PROFIS set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_VISITA_DOMICILIAR set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_AVAL_ELEGIBILIDADE set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_ATEND_DOMICILIAR set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_ATEND_ODONTOLOG set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_MARC_CONS_ALIMENT set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
    update 	ESUS_ZICA_MICROCEFALIA set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
	update 	ESUS_VACINACAO set nr_seq_lote_envio = nr_seq_lote_p where	coalesce(nr_seq_lote_envio::text, '') = '' and (dt_liberacao IS NOT NULL AND dt_liberacao::text <> '') and trunc(dt_atendimento) between trunc(dt_inicio_p) and trunc(coalesce(dt_fim_p,clock_timestamp()));
  end if;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE esus_carregar_fichas_lote ( ie_tipo_lote_esus_p text, nr_seq_lote_p esus_lote_envio.nr_sequencia%type, dt_inicio_p timestamp, dt_fim_p timestamp ) FROM PUBLIC;

