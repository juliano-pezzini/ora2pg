-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_genero_alimenticio (nr_seq_genero_p bigint, nm_usuario_p text, nr_seq_novo_p INOUT bigint) AS $body$
DECLARE



nr_sequencia_w		bigint;
nr_seq_nut_w		bigint;


BEGIN

select	nextval('nut_genero_alim_seq')
into STRICT	nr_sequencia_w
;

insert	into nut_genero_alim(nr_sequencia      ,
	ds_genero          ,
	dt_atualizacao     ,
	nm_usuario         ,
	cd_material        ,
	ie_situacao        ,
	qt_conversao       ,
	cd_estabelecimento ,
	nr_seq_tabela      ,
	qt_fator_correcao  ,
	qt_fator_coccao    ,
	ie_arred_req       )
(SELECT	nr_sequencia_w,
	substr(wheb_mensagem_pck.get_texto(801961) || ' ' || ds_genero,1,90),
	clock_timestamp()     ,
	nm_usuario_p         ,
	cd_material        ,
	ie_situacao        ,
	qt_conversao       ,
	cd_estabelecimento ,
	nr_seq_tabela      ,
	qt_fator_correcao  ,
	qt_fator_coccao    ,
	ie_arred_req
from	nut_genero_alim
where	nr_sequencia	= nr_seq_genero_p);

insert	into nut_comp_nutricional(nr_sequencia          ,
	nr_seq_nutriente,
	nr_seq_gen_alim ,
	dt_atualizacao  ,
	nm_usuario      ,
	qt_composicao   ,
	ie_informacao   )
(SELECT	nextval('nut_comp_nutricional_seq'),
	nr_seq_nutriente,
	nr_sequencia_w ,
	clock_timestamp(),
	nm_usuario_p,
	qt_composicao   ,
	ie_informacao
from	nut_comp_nutricional
where	nr_seq_gen_alim	= nr_seq_genero_p);

nr_seq_novo_p	:= nr_sequencia_w;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_genero_alimenticio (nr_seq_genero_p bigint, nm_usuario_p text, nr_seq_novo_p INOUT bigint) FROM PUBLIC;

