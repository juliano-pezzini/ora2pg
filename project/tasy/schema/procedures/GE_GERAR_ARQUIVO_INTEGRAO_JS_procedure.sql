-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ge_gerar_arquivo_integrao_js ( nr_prescricao_p bigint, ds_pasta_exp_xml_p INOUT text, ds_arquivo_p INOUT text ) AS $body$
DECLARE


ds_pasta_exp_xml_w	varchar(255);
ds_arquivo_w		varchar(255);


BEGIN


select	ds_caminho_saida
into STRICT	ds_pasta_exp_xml_w
from    empresa_integr_dados a,
	empresa_integracao b,
	sistema_integracao c
where	a.nr_seq_empresa_integr = b.nr_sequencia
and	b.nr_sequencia = c.nr_seq_empresa
and      b.nr_sequencia = 31;


select	distinct 'E' || nr_prescricao ||'.xml'
into STRICT	ds_arquivo_w
from	prescr_procedimento
where	nr_prescricao = nr_prescricao_p;

ds_pasta_exp_xml_p	:= ds_pasta_exp_xml_w;
ds_arquivo_p		:= ds_arquivo_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ge_gerar_arquivo_integrao_js ( nr_prescricao_p bigint, ds_pasta_exp_xml_p INOUT text, ds_arquivo_p INOUT text ) FROM PUBLIC;

