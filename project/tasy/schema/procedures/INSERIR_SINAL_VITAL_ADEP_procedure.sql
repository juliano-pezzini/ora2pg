-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE inserir_sinal_vital_adep ( nr_atendimento_p bigint, nm_usuario_p text, qt_pa_sistolica_p bigint, qt_pa_diastolica_p bigint, qt_temp_p bigint, cd_pessoa_fisica_p text, ie_exige_liberacao_p text, qt_freq_cardiaca_p bigint) AS $body$
DECLARE

dt_liberacao_w	timestamp := null;
nr_sequencia_w	atendimento_sinal_vital.nr_sequencia%type;


BEGIN

if (ie_exige_liberacao_p = 'S') then
	dt_liberacao_w	:= clock_timestamp();
end if;

select 	nextval('atendimento_sinal_vital_seq')
into STRICT	nr_sequencia_w
;

insert into atendimento_sinal_vital(
	nr_sequencia,
	nr_atendimento,
	dt_sinal_vital,
	dt_atualizacao,
	nm_usuario,
	qt_pa_sistolica,
	qt_pa_diastolica,
	qt_temp,
	cd_pessoa_fisica,
	dt_liberacao,
	ie_situacao,
	qt_freq_cardiaca)
values (
	nr_sequencia_w,
	nr_atendimento_p,
	clock_timestamp(),
	clock_timestamp(),
	nm_usuario_p,
	qt_pa_sistolica_p,
	qt_pa_diastolica_p,
	qt_temp_p,
	cd_pessoa_fisica_p,
	dt_liberacao_w,
	'A',
	qt_freq_cardiaca_p);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE inserir_sinal_vital_adep ( nr_atendimento_p bigint, nm_usuario_p text, qt_pa_sistolica_p bigint, qt_pa_diastolica_p bigint, qt_temp_p bigint, cd_pessoa_fisica_p text, ie_exige_liberacao_p text, qt_freq_cardiaca_p bigint) FROM PUBLIC;

