-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE sus_atualiza_nraih ( nr_aih_nova_p bigint, nr_seq_aih_nova_p bigint, nr_aih_antiga_p bigint, nr_seq_aih_antiga_p bigint) AS $body$
DECLARE



nr_aih_w		bigint;



BEGIN

nr_aih_w	:= nr_aih_w;
/*
begin
update	sus_laudo_paciente
set	nr_aih		= nr_aih_nova_p,
        nr_seq_aih	= nr_seq_aih_nova_p
where   nr_aih		= nr_aih_antiga_p
and	nr_seq_aih	= nr_seq_aih_antiga_p;
exception
when no_data_found then
	nr_aih_w	:= nr_aih_w;
when others then
	raise_application_error(-20011,'Ocorreu um erro ao atualizar os laudos desta AIH');
end;

begin
update	sus_aih_reg_civil
set	nr_aih		= nr_aih_nova_p,
	nr_seq_aih	= nr_seq_aih_nova_p
where	nr_aih		= nr_aih_antiga_p
and	nr_seq_aih	= nr_seq_aih_antiga_p;
exception
when no_data_found then
	nr_aih_w	:= nr_aih_w;
when others then
	raise_application_error(-20011,'Ocorreu um erro ao atualizar os reg civil desta AIH');
end;

begin
update	procedimento_paciente
set	nr_aih		= nr_aih_nova_p,
	nr_seq_aih	= nr_seq_aih_nova_p
where	nr_aih		= nr_aih_antiga_p
and	nr_seq_aih	= nr_seq_aih_antiga_p;
exception
when no_data_found then
	nr_aih_w	:= nr_aih_w;
when others then
	raise_application_error(-20011,'Ocorreu um erro ao atualizar os procedimentos desta AIH');
end;

begin
update	material_atend_paciente
set	nr_aih		= nr_aih_nova_p,
	nr_seq_aih	= nr_seq_aih_nova_p
where	nr_aih		= nr_aih_antiga_p
and	nr_seq_aih	= nr_seq_aih_antiga_p;
exception
when no_data_found then
	nr_aih_w	:= nr_aih_w;
when others then
	raise_application_error(-20011,'Ocorreu um erro ao atualizar os materiais desta AIH');
end;

begin
update	sus_leito_movto
set	nr_aih		= nr_aih_nova_p,
	nr_seq_aih	= nr_seq_aih_nova_p
where   nr_aih		= nr_aih_antiga_p
and	nr_seq_aih	= nr_seq_aih_antiga_p;
exception
when no_data_found then
	nr_aih_w	:= nr_aih_w;
when others then
	raise_application_error(-20011,'Ocorreu um erro ao atualizar os movto dos leitos desta AIH');
end;

commit;
*/
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE sus_atualiza_nraih ( nr_aih_nova_p bigint, nr_seq_aih_nova_p bigint, nr_aih_antiga_p bigint, nr_seq_aih_antiga_p bigint) FROM PUBLIC;

