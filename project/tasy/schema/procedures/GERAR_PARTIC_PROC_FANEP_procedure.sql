-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gerar_partic_proc_fanep ( nr_seq_pepo_p bigint, cd_medico_anestesista_p text, ie_commit_p text default 'S', nm_usuario_p text DEFAULT NULL) AS $body$
DECLARE


cd_medico_anestesista_w	varchar(10);
cd_medico_cirurgiao_w	varchar(10);
cd_funcao_w		smallint;


BEGIN

if (cd_medico_anestesista_p IS NOT NULL AND cd_medico_anestesista_p::text <> '') then
	select	min(cd_funcao)
	into STRICT	cd_funcao_w
	from	funcao_medico
	where	ie_anestesista	=	'S';

	if (cd_funcao_w > 0) then
		CALL gerar_participante_fanep(cd_medico_anestesista_p, cd_funcao_w,'A',nr_seq_pepo_p,ie_commit_p,nm_usuario_p);
	end if;
end if;

if (ie_commit_p = 'S') then
	commit;
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gerar_partic_proc_fanep ( nr_seq_pepo_p bigint, cd_medico_anestesista_p text, ie_commit_p text default 'S', nm_usuario_p text DEFAULT NULL) FROM PUBLIC;

