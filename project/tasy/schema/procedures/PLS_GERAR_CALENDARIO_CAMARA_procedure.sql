-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_gerar_calendario_camara ( nr_seq_calendario_p bigint ) AS $body$
DECLARE


/* ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade: Gerar o calendario da câmara de compensação
-------------------------------------------------------------------------------------------------------------------
Locais de chamada direta:
[ ]  Objetos do dicionário [ ] Tasy (Delphi/Java) [  ] Portal [  ]  Relatórios [ ] Outros: SQL
 ------------------------------------------------------------------------------------------------------------------
Pontos de atenção:	As informações geradas são apenas para testes!
		Não tem baseamento em nenhuma norma ou informativo do intercâmbio das Unimeds
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
nr_ano_w		integer;
nr_mes_w		integer;
nr_semana_w		integer;
nr_dia_w		integer;


BEGIN
nr_ano_w := 2014;

nr_mes_w := 1;
while(nr_mes_w < 13) loop
	nr_semana_w := 1;
	while(nr_semana_w < 4) loop
		if (nr_semana_w = 1) then
			nr_dia_w := 3;
		elsif (nr_semana_w = 2) then
			nr_dia_w := 15;
		else
			nr_dia_w := 28;
		end if;

		insert into pls_camara_calend_periodo(nr_sequencia,
			dt_atualizacao,
			nm_usuario,
			dt_atualizacao_nrec,
			nm_usuario_nrec,
			nr_seq_calendario,
			nr_mes,
			nr_camara,
			dt_limite_a600,
			dt_limite_a500,
			dt_previa,
			dt_limite_rec_doc,
			dt_limite_exclusao,
			dt_definitivo,
			dt_saldo_devedor,
			dt_saldo_credor)
		values (nextval('pls_camara_calend_periodo_seq'),
			clock_timestamp(),
			'Tasy',
			clock_timestamp(),
			'Tasy',
			nr_seq_calendario_p,
			nr_mes_w,
			nr_semana_w,
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w),
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w),
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w),
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w),
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w),
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w),
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w),
			to_date(nr_dia_w||'/'||nr_mes_w||'/'||nr_ano_w));

		nr_semana_w := nr_semana_w + 1;
	end loop;

	nr_mes_w := nr_mes_w + 1;
end loop;

update	pls_camara_calendario
set	ds_observacao	= 'Calendário gerado pela rotina PLS_GERAR_CALENDARIO_CAMARA'
where	nr_sequencia	= nr_seq_calendario_p;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_gerar_calendario_camara ( nr_seq_calendario_p bigint ) FROM PUBLIC;

