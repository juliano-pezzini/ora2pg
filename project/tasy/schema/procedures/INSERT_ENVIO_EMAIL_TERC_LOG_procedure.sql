-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE insert_envio_email_terc_log ( nr_seq_terceiro_p bigint, ds_email_dest_p text, ds_observacao_p text, ds_relatorio_p text) AS $body$
BEGIN

    -- Insere o log do e-mail enviado
	insert into ENVIO_EMAIL_TERCEIRO_LOG( nr_sequencia,
											dt_atualizacao,
											nm_usuario,
											nr_seq_terceiro,
											dt_envio,
											ds_email_dest,
											nm_usuario_envio,
											ds_observacao,
											ds_relatorio)
	values ( nextval('envio_email_terceiro_log_seq'),
			clock_timestamp(),
			obter_usuario_ativo,
			nr_seq_terceiro_p,
			clock_timestamp(),
			substr(ds_email_dest_p, 1, 255),
			obter_usuario_ativo,
			substr(ds_observacao_p, 1, 4000),
			substr(ds_relatorio_p, 1, 255)
	);

    commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE insert_envio_email_terc_log ( nr_seq_terceiro_p bigint, ds_email_dest_p text, ds_observacao_p text, ds_relatorio_p text) FROM PUBLIC;

