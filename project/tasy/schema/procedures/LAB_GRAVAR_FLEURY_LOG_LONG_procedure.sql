-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE lab_gravar_fleury_log_long ( ds_mensagem_p text, ds_erro_p text, ie_processado_p text, nm_usuario_p text, nr_prescricao_p bigint, ie_servico_p text, nr_seq_log_p INOUT bigint, ds_mensagem1_p text default null, ds_mensagem2_p text default null, ds_mensagem3_p text default null, ds_mensagem4_p text default null) AS $body$
DECLARE


c001			integer;
retorno_w		integer;


BEGIN

select	nextval('lab_fleury_log_seq')
into STRICT	nr_seq_log_p
;

C001 := DBMS_SQL.OPEN_CURSOR;
DBMS_SQL.PARSE(C001, 	' INSERT INTO LAB_FLEURY_LOG (NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DS_COMANDO, DS_RETORNO, DS_ERRO, IE_PROCESSADO, NR_PRESCRICAO, IE_SERVICO)
						  VALUES (:NR_SEQ_LOG_P, SYSDATE, :NM_USUARIO_P, :DS_MENSAGEM_P, :DS_RETORNO_P, :DS_ERRO_P, :IE_PROCESSADO_P, :NR_PRESCRICAO_P, :IE_SERVICO_P) ', DBMS_SQL.NATIVE);
DBMS_SQL.BIND_VARIABLE(C001, 'NR_SEQ_LOG_P', NR_SEQ_LOG_P);
DBMS_SQL.BIND_VARIABLE(C001, 'NM_USUARIO_P', NM_USUARIO_P);
DBMS_SQL.BIND_VARIABLE(C001, 'DS_MENSAGEM_P', DS_MENSAGEM_P);
DBMS_SQL.BIND_VARIABLE(C001, 'DS_RETORNO_P', (DS_MENSAGEM1_P||DS_MENSAGEM2_P||DS_MENSAGEM3_P||DS_MENSAGEM4_P));
DBMS_SQL.BIND_VARIABLE(C001, 'DS_ERRO_P', DS_ERRO_P);
DBMS_SQL.BIND_VARIABLE(C001, 'IE_PROCESSADO_P', IE_PROCESSADO_P);
DBMS_SQL.BIND_VARIABLE(C001, 'NR_PRESCRICAO_P', NR_PRESCRICAO_P);
DBMS_SQL.BIND_VARIABLE(C001, 'IE_SERVICO_P', IE_SERVICO_P);

RETORNO_W := DBMS_SQL.EXECUTE(C001);
DBMS_SQL.CLOSE_CURSOR(C001);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE lab_gravar_fleury_log_long ( ds_mensagem_p text, ds_erro_p text, ie_processado_p text, nm_usuario_p text, nr_prescricao_p bigint, ie_servico_p text, nr_seq_log_p INOUT bigint, ds_mensagem1_p text default null, ds_mensagem2_p text default null, ds_mensagem3_p text default null, ds_mensagem4_p text default null) FROM PUBLIC;

