-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_escala_tiss ( nr_sequencia_p bigint, nm_usuario_p text, cd_pessoa_fisica_p text, nr_atendimento_p bigint) AS $body$
BEGIN
if (nr_sequencia_p IS NOT NULL AND nr_sequencia_p::text <> '') then

	insert into tiss_interv_terapeutica(	nr_sequencia,
						dt_atualizacao,
						nm_usuario,
						dt_atualizacao_nrec,
						nm_usuario_nrec,
						nr_atendimento,
						dt_avaliacao,
						cd_pessoa_fisica,
						ie_ab_monit_padrao,
						ie_ab_laboratorio,
						ie_ab_medic_unica,
						ie_ab_medic_endovenosa,
						ie_ab_curativo_rotina,
						ie_ab_curativo_frequente,
						ie_ab_dreno,
						ie_sv_vent_mecanica,
						ie_sv_sup_vent_supl,
						ie_sv_vias_aerias,
						ie_sv_trat_funcao_pulmonar,
						ie_sc_medic_vasoativa_unica,
						ie_sc_medic_vasoativa_mult,
						ie_sc_rep_volemica,
						ie_sc_cateter_art_perif,
						ie_sc_monit_atrio_esq,
						ie_sc_via_venosa_central,
						ie_sc_ressuscit_cardio,
						ie_sr_tec_hemofiltracao,
						ie_sr_med_debito_urina,
						ie_sr_diurese_ativa,
						ie_sn_pressao_intracraniana,
						ie_sm_acidose_alcalose,
						ie_sm_nut_parent,
						ie_sm_nut_enteral,
						ie_ie_inter_unica_uti,
						ie_ie_inter_mult_uti,
						ie_ie_inter_fora_uti,
						qt_pontuacao,
						dt_liberacao,
						cd_perfil_ativo)
	SELECT	nextval('tiss_interv_terapeutica_seq'),
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		nm_usuario_p,
		nr_atendimento_p,
		clock_timestamp(),
		cd_pessoa_fisica_p,
		ie_ab_monit_padrao,
		ie_ab_laboratorio,
		ie_ab_medic_unica,
		ie_ab_medic_endovenosa,
		ie_ab_curativo_rotina,
		ie_ab_curativo_frequente,
		ie_ab_dreno,
		ie_sv_vent_mecanica,
		ie_sv_sup_vent_supl,
		ie_sv_vias_aerias,
		ie_sv_trat_funcao_pulmonar,
		ie_sc_medic_vasoativa_unica,
		ie_sc_medic_vasoativa_mult,
		ie_sc_rep_volemica,
		ie_sc_cateter_art_perif,
		ie_sc_monit_atrio_esq,
		ie_sc_via_venosa_central,
		ie_sc_ressuscit_cardio,
		ie_sr_tec_hemofiltracao,
		ie_sr_med_debito_urina,
		ie_sr_diurese_ativa,
		ie_sn_pressao_intracraniana,
		ie_sm_acidose_alcalose,
		ie_sm_nut_parent,
		ie_sm_nut_enteral,
		ie_ie_inter_unica_uti,
		ie_ie_inter_mult_uti,
		ie_ie_inter_fora_uti,
		qt_pontuacao,
		null,
		coalesce(obter_perfil_ativo,cd_perfil_ativo)
	from	tiss_interv_terapeutica
	where	nr_sequencia = nr_sequencia_p;

	commit;
end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_escala_tiss ( nr_sequencia_p bigint, nm_usuario_p text, cd_pessoa_fisica_p text, nr_atendimento_p bigint) FROM PUBLIC;

