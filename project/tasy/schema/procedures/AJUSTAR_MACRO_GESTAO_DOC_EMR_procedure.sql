-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ajustar_macro_gestao_doc_emr (NR_SEQ_CONTENT_MACRO_P bigint, NM_USUARIO_P text, DS_PARAM_P text, IE_OPCAO_AJUST_P text) AS $body$
BEGIN	
/**
ie_opcao_ajust_p 
D = Delete
I = Insert
**/
	if (	nr_seq_content_macro_p	is	not	null	)	then	
		if (	ie_opcao_ajust_p	=	'D'	)	then	
			delete from db_content_macro_param	
			WHERE  nr_seq_content_macro = nr_seq_content_macro_p;
		elsif (	ie_opcao_ajust_p	=	'I'	)	then	
			insert into db_content_macro_param(nr_sequencia,	
						nr_seq_content_macro,	
						dt_atualizacao,	
						nm_usuario,	
						dt_atualizacao_nrec,	
						nm_usuario_nrec,	
						ds_parameter)	
			values (nextval('db_content_macro_param_seq'),	
					nr_seq_content_macro_p,	
					clock_timestamp(),	
					nm_usuario_p,	
					clock_timestamp(),	
					nm_usuario_p,	
					ds_param_p);	
		end	if;	
	end	if;	
end	;	
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ajustar_macro_gestao_doc_emr (NR_SEQ_CONTENT_MACRO_P bigint, NM_USUARIO_P text, DS_PARAM_P text, IE_OPCAO_AJUST_P text) FROM PUBLIC;

