-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE calc_dt_resul_sem_dt_lib_md ( ds_hora_fixa_p text, qt_dia_entrega_p bigint, qt_min_entrega_p bigint, dt_resultado_p INOUT timestamp) AS $body$
BEGIN
    if (ds_hora_fixa_p IS NOT NULL AND ds_hora_fixa_p::text <> '') then
        select  trunc(dt_resultado_p +(dividir_md(ds_hora_fixa_p, 24))) + qt_dia_entrega_p + ( CASE WHEN qt_min_entrega_p=0 THEN  0  ELSE dividir_md(qt_min_entrega_p, 1440) END )
        into STRICT	dt_resultado_p
;
    else
        select  dt_resultado_p + qt_dia_entrega_p + (CASE WHEN qt_min_entrega_p=0 THEN  0  ELSE dividir_md(qt_min_entrega_p, 1440) END )
        into STRICT	dt_resultado_p
;
    end if;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE calc_dt_resul_sem_dt_lib_md ( ds_hora_fixa_p text, qt_dia_entrega_p bigint, qt_min_entrega_p bigint, dt_resultado_p INOUT timestamp) FROM PUBLIC;

