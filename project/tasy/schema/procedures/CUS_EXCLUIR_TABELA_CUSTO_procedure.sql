-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE cus_excluir_tabela_custo ( nr_seq_tabela_custo_p bigint, cd_estabelecimento_p bigint, nm_usuario_p text) AS $body$
BEGIN
	  begin
	    delete  FROM capac_centro_controle
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM criterio_distr_orc
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM cus_amort_mensal
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM cus_regra_ajuste_orc
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM cus_result_terc
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM cus_terc_movto
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM custo_material
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM custo_padrao
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM custo_procedimento
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM orcamento_custo
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    update  orcamento_paciente
	    set  nr_seq_tabela_custo  = NULL
	    where  nr_seq_tabela_custo = nr_seq_tabela_custo_p;

	    delete  FROM preco_padrao_mat
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM preco_padrao_proc
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM resultado_centro_controle
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM resultado_ind_cen_cont
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM resultado_ind_criterio
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM taxa_custo
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM taxa_custo_nat
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM taxa_custo_ocio
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM w_result_ind_orc_real
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM tabela_parametro
	    where  nr_seq_tabela_param = nr_seq_tabela_custo_p;

	    delete  FROM tabela_parametro
	    where  nr_seq_tabela = nr_seq_tabela_custo_p;

	    delete  FROM tabela_parametro
	    where  coalesce(nr_seq_tabela::text, '') = '';
	
	    delete  FROM tabela_custo
	    where  nr_sequencia = nr_seq_tabela_custo_p;
	    commit;
	    exception
		    when others then
		      rollback;
		      CALL wheb_mensagem_pck.exibir_mensagem_abort(1089584);
	  end;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cus_excluir_tabela_custo ( nr_seq_tabela_custo_p bigint, cd_estabelecimento_p bigint, nm_usuario_p text) FROM PUBLIC;

