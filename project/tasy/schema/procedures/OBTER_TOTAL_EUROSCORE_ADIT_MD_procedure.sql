-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_total_euroscore_adit_md (qt_score_ano_p bigint, ie_calculo_p text, ie_sexo_p text, ie_doenca_pulm_cronica_p text, ie_arteriopatia_extracardi_p text, ie_disfuncao_neurologica_p text, ie_cirurgia_cardiaca_previa_p text, ie_creatinina_200_p text, ie_endocartite_ativa_p text, ie_preoperativo_critico_p text, ie_angina_instavel_p text, ie_funcao_ve_p text, ie_infarto_miocardio_p text, ie_hipertensao_pulmonar_p text, ie_emergencia_p text, ie_outro_proc_revasc_p text, ie_cirurgia_aorta_p text, ie_ruptura_septal_p text, qt_sexo_p INOUT bigint, qt_doenca_pulm_cronica_p INOUT bigint, qt_arteriopatia_extracardi_p INOUT bigint, qt_disfuncao_neurologica_p INOUT bigint, qt_cirurgia_cardiaca_previa_p INOUT bigint, qt_creatinina_200_p INOUT bigint, qt_endocartite_ativa_p INOUT bigint, qt_preoperativo_critico_p INOUT bigint, qt_angina_instavel_p INOUT bigint, qt_funcao_ve_p INOUT bigint, qt_infarto_miocardio_p INOUT bigint, qt_hipertensao_pulmonar_p INOUT bigint, qt_emergencia_p INOUT bigint, qt_outro_proc_revasc_p INOUT bigint, qt_cirurgia_aorta_p INOUT bigint, qt_ruptura_septal_p INOUT bigint, qt_pontuacao_p INOUT bigint) AS $body$
BEGIN
  qt_pontuacao_p := 0;

  if (ie_calculo_p in ('P', 'A')) then
    if (ie_sexo_p = 'F') then
      qt_sexo_p := 1;
    end if;
    if (ie_doenca_pulm_cronica_p = 'S') then
      qt_doenca_pulm_cronica_p := 1;
    end if;
    if (ie_arteriopatia_extracardi_p = 'S') then
      qt_arteriopatia_extracardi_p := 2;
    end if;
    if (ie_disfuncao_neurologica_p = 'S') then
      qt_disfuncao_neurologica_p := 2;
    end if;
    if (ie_cirurgia_cardiaca_previa_p = 'S') then
      qt_cirurgia_cardiaca_previa_p := 3;
    end if;
    if (ie_creatinina_200_p = 'S') then
      qt_creatinina_200_p := 2;
    end if;
    if (ie_endocartite_ativa_p = 'S') then
      qt_endocartite_ativa_p := 3;
    end if;
    if (ie_preoperativo_critico_p = 'S') then
      qt_preoperativo_critico_p := 3;
    end if;
    if (ie_angina_instavel_p = 'S') then
      qt_angina_instavel_p := 2;
    end if;
    if (ie_funcao_ve_p = 'I') then
      qt_funcao_ve_p := 3;
    elsif (ie_funcao_ve_p = 'M') then
      qt_funcao_ve_p := 1;
    end if;
    if (ie_infarto_miocardio_p = 'S') then
      qt_infarto_miocardio_p := 2;
    end if;
    if (ie_hipertensao_pulmonar_p = 'S') then
      qt_hipertensao_pulmonar_p := 2;
    end if;
    if (ie_emergencia_p = 'S') then
      qt_emergencia_p := 2;
    end if;
    if (ie_outro_proc_revasc_p = 'S') then
      qt_outro_proc_revasc_p := 2;
    end if;
    if (ie_cirurgia_aorta_p = 'S') then
      qt_cirurgia_aorta_p := 3;
    end if;
    if (ie_ruptura_septal_p = 'S') then
      qt_ruptura_septal_p := 4;
    end if;

    qt_pontuacao_p := coalesce(qt_score_ano_p, 0) + coalesce(qt_sexo_p, 0) + coalesce(qt_doenca_pulm_cronica_p, 0) +
                      coalesce(qt_arteriopatia_extracardi_p, 0) +
                      coalesce(qt_disfuncao_neurologica_p, 0) +
                      coalesce(qt_cirurgia_cardiaca_previa_p, 0) + coalesce(qt_creatinina_200_p, 0) +
                      coalesce(qt_endocartite_ativa_p, 0) + coalesce(qt_preoperativo_critico_p, 0) +
                      coalesce(qt_angina_instavel_p, 0) + coalesce(qt_funcao_ve_p, 0) +
                      coalesce(qt_infarto_miocardio_p, 0) + coalesce(qt_hipertensao_pulmonar_p, 0) +
                      coalesce(qt_emergencia_p, 0) + coalesce(qt_outro_proc_revasc_p, 0) +
                      coalesce(qt_cirurgia_aorta_p, 0) + coalesce(qt_ruptura_septal_p, 0);
  end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_total_euroscore_adit_md (qt_score_ano_p bigint, ie_calculo_p text, ie_sexo_p text, ie_doenca_pulm_cronica_p text, ie_arteriopatia_extracardi_p text, ie_disfuncao_neurologica_p text, ie_cirurgia_cardiaca_previa_p text, ie_creatinina_200_p text, ie_endocartite_ativa_p text, ie_preoperativo_critico_p text, ie_angina_instavel_p text, ie_funcao_ve_p text, ie_infarto_miocardio_p text, ie_hipertensao_pulmonar_p text, ie_emergencia_p text, ie_outro_proc_revasc_p text, ie_cirurgia_aorta_p text, ie_ruptura_septal_p text, qt_sexo_p INOUT bigint, qt_doenca_pulm_cronica_p INOUT bigint, qt_arteriopatia_extracardi_p INOUT bigint, qt_disfuncao_neurologica_p INOUT bigint, qt_cirurgia_cardiaca_previa_p INOUT bigint, qt_creatinina_200_p INOUT bigint, qt_endocartite_ativa_p INOUT bigint, qt_preoperativo_critico_p INOUT bigint, qt_angina_instavel_p INOUT bigint, qt_funcao_ve_p INOUT bigint, qt_infarto_miocardio_p INOUT bigint, qt_hipertensao_pulmonar_p INOUT bigint, qt_emergencia_p INOUT bigint, qt_outro_proc_revasc_p INOUT bigint, qt_cirurgia_aorta_p INOUT bigint, qt_ruptura_septal_p INOUT bigint, qt_pontuacao_p INOUT bigint) FROM PUBLIC;

