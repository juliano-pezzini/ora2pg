-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE med_inserir_classif_agenda (cd_medico_p text, cd_classif_p text, ds_classif_p text, nr_min_duracao_p bigint, nm_usuario_p text) AS $body$
DECLARE


ie_classif_tasy_w	varchar(03);
nr_seq_classif_w	bigint;


BEGIN

if (cd_classif_p	= 'CONS') or (cd_classif_p	= 'CONS.QT') then

	ie_classif_tasy_w	:= 'C';
elsif (cd_classif_p	= 'RET') or (cd_classif_p	= 'RET PRO') or (cd_classif_p	= 'RET. DE QT') or (cd_classif_p	= 'RET CIRUR') or (cd_classif_p	= 'RET COLO') or (cd_classif_p	= 'RET EDA') or (cd_classif_p	= 'RET PONTOS') or (cd_classif_p	= 'RECONSULTA') or (cd_classif_p	= 'RET T.E') or (cd_classif_p	= 'RECON') then
	ie_classif_tasy_w	:= 'R';
else
	ie_classif_tasy_w	:= 'X';
end if;

select 	nextval('med_classif_agenda_seq')
into STRICT	nr_seq_classif_w
;


insert	into med_classif_agenda(nr_sequencia,
	cd_medico,
	ie_classif_agenda,
	ds_classif_agenda,
	dt_atualizacao,
	nm_usuario,
	ds_cor_fonte,
	ds_cor_fundo,
	nr_minuto_duracao,
	ie_ficha_paciente,
	ie_tipo)
values (nr_seq_classif_w,
	cd_medico_p,
	ie_classif_tasy_w,
	ds_classif_p,
	clock_timestamp(),
	nm_usuario_p,
	'clNavy',
	'clWhite',
	nr_min_duracao_p,
	'N', ie_classif_tasy_w);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE med_inserir_classif_agenda (cd_medico_p text, cd_classif_p text, ds_classif_p text, nr_min_duracao_p bigint, nm_usuario_p text) FROM PUBLIC;

