-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gravar_inconsistencia_base ( nm_tabela_p text, nm_objeto_p text, nm_usuario_p text, dt_atualizacao_p timestamp, ds_motivo_p text, nr_seq_motivo_p bigint, nr_seq_versao_p bigint) AS $body$
BEGIN
if (nr_seq_versao_p <> 0) then
	begin
	insert into LOG_ATUALIZACAO_INCONSIST(
				NR_SEQUENCIA,
				NR_SEQ_ATUALIZACAO,
				NM_TABELA,
				NM_OBJETO,
				NM_USUARIO,
				DT_ATUALIZACAO,
				NR_SEQ_MOTIVO)
	values (
				nextval('log_atualizacao_inconsist_seq'),
				nr_seq_versao_p,
				nm_tabela_p,
				nm_objeto_p,
				nm_usuario_p,
				dt_atualizacao_p,
				nr_seq_motivo_p);
	end;
else
	begin
	insert into w_inconsistencia_base(
				NM_TABELA,
				NM_OBJETO,
				NM_USUARIO,
				DT_ATUALIZACAO,
				DS_MOTIVO,
				NR_SEQ_MOTIVO)
	values (	
				nm_tabela_p,
				nm_objeto_p,
				nm_usuario_p,
				dt_atualizacao_p,
				ds_motivo_p,
				nr_seq_motivo_p);
	end;
end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gravar_inconsistencia_base ( nm_tabela_p text, nm_objeto_p text, nm_usuario_p text, dt_atualizacao_p timestamp, ds_motivo_p text, nr_seq_motivo_p bigint, nr_seq_versao_p bigint) FROM PUBLIC;

