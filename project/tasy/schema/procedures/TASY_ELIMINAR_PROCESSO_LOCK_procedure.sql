-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_eliminar_processo_lock (sid_p text,serial_p text,bd_p bigint) AS $body$
DECLARE


bd_atual_w bigint;


BEGIN
-- Coelho
SELECT	MAX(b.inst_id)
INTO STRICT	bd_atual_w
FROM	v$session a,
	gv$session b
WHERE	a.sid = b.sid
AND	a.serial# = b.serial#
AND	a.audsid = b.audsid
AND	b.audsid = USERENV('sessionid');

IF (bd_atual_w = bd_p) THEN
	CALL exec_sql_dinamico_bv('','begin TASY_KILL_SESSION('||sid_p||','||serial_p||', ''S'', 35); end;','');
ELSE
	CALL exec_sql_dinamico_bv('','begin TASY_KILL_SESSION@rac_'||bd_p||'('||sid_p||','||serial_p||', ''S'', 35); end;','');
END IF;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_eliminar_processo_lock (sid_p text,serial_p text,bd_p bigint) FROM PUBLIC;

