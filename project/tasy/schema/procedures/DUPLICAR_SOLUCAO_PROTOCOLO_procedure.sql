-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_solucao_protocolo ( nr_seq_interno_p bigint, nm_usuario_p text) AS $body$
DECLARE


nr_seq_solucao_w	bigint;
nr_seq_interno_w	bigint;


BEGIN
if (nr_seq_interno_p > 0) then
	select	max(nr_seq_solucao+1)
	into STRICT	nr_seq_solucao_w
	from	protocolo_medic_solucao;
	
	select	nextval('protocolo_medic_solucao_seq')
	into STRICT	nr_seq_interno_w
	;

	insert into 	protocolo_medic_solucao(	
				cd_protocolo,
				nr_sequencia,
				nr_seq_solucao,
				nr_agrupamento,
				dt_atualizacao,
				nm_usuario,
				ie_bomba_infusao,
				ie_esquema_alternado,
				ie_calc_aut,
				ie_acm,
				nr_etapas,
				qt_hora_fase,
				qt_tempo_aplicacao,
				ie_se_necessario,
				ie_urgencia,
				qt_solucao_total,
				qt_dosagem,
				ie_tipo_dosagem,
				ds_rotina,
				ie_solucao_pca,
				ie_solucao_npt,
				ds_solucao,
				ds_orientacao,
				ie_tipo_sol,
				ie_via_aplicacao,
				cd_intervalo,
				ie_tipo_analgesia,
				ie_pca_modo_prog,
				qt_vol_infusao_pca,
				ie_um_fluxo_pca,
				qt_bolus_pca,
				ie_um_bolus_pca,
				qt_intervalo_bloqueio,
				qt_dose_inicial_pca,
				ie_um_dose_inicio_pca,
				qt_limite_quatro_hora,
				ie_um_limite_pca,
				qt_limite_uma_hora,
				ie_um_limite_hora_pca,
				qt_dose_ataque,
				nr_seq_grupo,
				ds_dias_aplicacao,
				ds_ciclos_aplicacao,
				cd_setor_atendimento,
				ie_pre_medicacao,
				ie_selecionar_intervalo,
				nr_seq_apresentacao,
				ds_cor,
				ie_sol_especial,
				ie_questionar_vel_inf,
				nr_seq_interno,
				ie_situacao,
				ie_hemodialise,
                ie_solucao_rotina)
		SELECT		cd_protocolo,
				nr_sequencia,
				nr_seq_solucao_w,
				nr_agrupamento,
				clock_timestamp(),
				nm_usuario_p,
				ie_bomba_infusao,
				ie_esquema_alternado,
				ie_calc_aut,
				ie_acm,
				nr_etapas,
				qt_hora_fase,
				qt_tempo_aplicacao,
				ie_se_necessario,
				ie_urgencia,
				qt_solucao_total,
				qt_dosagem,
				ie_tipo_dosagem,
				ds_rotina,
				ie_solucao_pca,
				ie_solucao_npt,
				ds_solucao,
				ds_orientacao,
				ie_tipo_sol,
				ie_via_aplicacao,
				cd_intervalo,
				ie_tipo_analgesia,
				ie_pca_modo_prog,
				qt_vol_infusao_pca,
				ie_um_fluxo_pca,
				qt_bolus_pca,
				ie_um_bolus_pca,
				qt_intervalo_bloqueio,
				qt_dose_inicial_pca,
				ie_um_dose_inicio_pca,
				qt_limite_quatro_hora,
				ie_um_limite_pca,
				qt_limite_uma_hora,
				ie_um_limite_hora_pca,
				qt_dose_ataque,
				nr_seq_grupo,
				ds_dias_aplicacao,
				ds_ciclos_aplicacao,
				cd_setor_atendimento,
				ie_pre_medicacao,
				ie_selecionar_intervalo,
				nr_seq_apresentacao,
				ds_cor,
				ie_sol_especial,
				ie_questionar_vel_inf,
				nr_seq_interno_w,
				'A',
				ie_hemodialise,
                coalesce(ie_solucao_rotina,'S')
		from		protocolo_medic_solucao
		where		nr_seq_interno = nr_seq_interno_p;
end if;
commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_solucao_protocolo ( nr_seq_interno_p bigint, nm_usuario_p text) FROM PUBLIC;

