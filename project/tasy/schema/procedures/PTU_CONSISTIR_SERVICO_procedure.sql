-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ptu_consistir_servico ( nr_seq_nota_cobr_p bigint, nr_seq_fatura_p bigint, nm_usuario_p text) AS $body$
DECLARE


nr_lote_w			integer;
nr_nota_w			ptu_nota_servico.nr_nota%type;
cd_unimed_prestador_w		varchar(10);
cd_prestador_w			integer;
nm_prestador_w			varchar(40);
ie_tipo_participacao_w		varchar(1);
dt_procedimento_w		timestamp;
ie_tipo_tabela_w		smallint;
cd_procedimento_w		bigint;
qt_procedimento_w		integer;
cd_especialidade_w		smallint;
ie_tipo_prestador_w		varchar(2);
ie_rede_propria_w		varchar(1);
ie_tipo_pessoa_prestador_w	varchar(1);
nr_cgc_cpf_w			varchar(14);
ie_pacote_w			varchar(1);
cd_ato_w			varchar(1);
tx_procedimento_w		double precision;
nm_prestador_requisitante_w	varchar(40);
sg_cons_prof_req_w		varchar(12);
nr_cons_prof_req_w		varchar(15);
sg_uf_cons_req_w		valor_dominio.vl_dominio%type;
nr_sequencia_w			bigint;

C01 CURSOR FOR
	SELECT	nr_sequencia,
		nr_lote,
		nr_nota,
		cd_unimed_prestador,
		cd_prestador,
		nm_prestador,
		ie_tipo_participacao,
		dt_procedimento,
		ie_tipo_tabela,
		cd_procedimento,
		qt_procedimento,
		cd_especialidade,
		ie_tipo_prestador,
		ie_rede_propria,
		ie_tipo_pessoa_prestador,
		nr_cgc_cpf,
		ie_pacote,
		cd_ato,
		tx_procedimento,
		nm_prestador_requisitante,
		sg_cons_prof_req,
		nr_cons_prof_req,
		sg_uf_cons_req
	from	ptu_nota_servico
	where	nr_seq_nota_cobr	= nr_seq_nota_cobr_p;

BEGIN
/*
open C01;
loop
fetch C01 into
	nr_sequencia_w,
	nr_lote_w,
	nr_nota_w,
	cd_unimed_prestador_w,
	cd_prestador_w,
	nm_prestador_w,
	ie_tipo_participacao_w,
	dt_procedimento_w,
	ie_tipo_tabela_w,
	cd_procedimento_w,
	qt_procedimento_w,
	cd_especialidade_w,
	ie_tipo_prestador_w,
	ie_rede_propria_w,
	ie_tipo_pessoa_prestador_w,
	nr_cgc_cpf_w,
	ie_pacote_w,
	cd_ato_w,
	tx_procedimento_w,
	nm_prestador_requisitante_w,
	sg_cons_prof_req_w,
	nr_cons_prof_req_w,
	sg_uf_cons_req_w;
exit when C01%notfound;
	begin
	if	(nr_lote_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'NR_LOTE', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(nr_nota_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'NR_NOTA', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(cd_unimed_prestador_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'CD_UNI_PRE', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(cd_prestador_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'CD_PREST', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(nm_prestador_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'NM_PREST', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(ie_tipo_participacao_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'TP_PARTICIP', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(dt_procedimento_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'DT_SERVICO', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(ie_tipo_tabela_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'TP_TABELA', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(cd_procedimento_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'CD_SERVIÃ‡O', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(qt_procedimento_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'QT_COBRADA', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(cd_especialidade_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'CD_ESPEC', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(ie_tipo_prestador_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'TP_PREST_EXEC', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(ie_rede_propria_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'ID_REC_PROPRIO', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(ie_tipo_pessoa_prestador_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'TP_PESSOA', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(nr_cgc_cpf_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'NR_CNPJ_CPF', null, null, nr_sequencia_w,nm_usuario_p);
	end if;

	if	(ie_pacote_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'ID_PACOTE', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	if	(cd_ato_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'CD_ATO', null, null, nr_sequencia_w,nm_usuario_p);
	end if;

	if	(tx_procedimento_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'FAT_MULT_SERV', null, null, nr_sequencia_w,nm_usuario_p);
	end if;

	if	(nm_prestador_requisitante_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'NM_PREST_REQ', null, null, nr_sequencia_w,nm_usuario_p);
	end if;

	if	(sg_cons_prof_req_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'SG_CONS_PROF_REQ', null, null, nr_sequencia_w,nm_usuario_p);
	end if;

	if	(nr_cons_prof_req_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'NR_CONS_PROF_REQ', null, null, nr_sequencia_w,nm_usuario_p);
	end if;

	if	(sg_uf_cons_req_w is null) then
		ptu_inserir_consist_fatura(nr_seq_fatura_p, 1, '504', 'SG_UF_CONS_REQ', null, null, nr_sequencia_w,nm_usuario_p);
	end if;
	end;
end loop;
close C01;*/
cd_unimed_prestador_w	:= 'A';
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ptu_consistir_servico ( nr_seq_nota_cobr_p bigint, nr_seq_fatura_p bigint, nm_usuario_p text) FROM PUBLIC;

