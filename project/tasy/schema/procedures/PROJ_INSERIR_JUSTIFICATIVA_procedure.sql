-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE proj_inserir_justificativa ( NR_SEQ_CLIENTE_P bigint, nm_usuario_p text, NR_SEQ_PROJETO_P bigint, NR_SEQ_CRON_ETAPA_P bigint, DS_JUSTIFICATIVA_P text ) AS $body$
BEGIN

  insert into com_cliente_hist(nr_sequencia,
                       nr_seq_tipo, 
                       nr_seq_cliente,  
                       nm_usuario,  
                       dt_historico, 
                       dt_atualizacao, 
                       dt_atualizacao_nrec,
                       nm_usuario_nrec,
                       nr_seq_projeto,
                       ds_titulo,
                       dt_liberacao,
                       ds_historico)
                    values (nextval('com_cliente_hist_seq'),	
                      8,
                      nr_seq_cliente_p,
                      nm_usuario_p,
                      clock_timestamp(), 
                      clock_timestamp(), 
                      clock_timestamp(), 
                      nm_usuario_p,
                      nr_seq_projeto_p,
                      obter_texto_dic_objeto(1080898, wheb_usuario_pck.get_nr_seq_idioma, null),
                      clock_timestamp(),
					            obter_texto_dic_objeto(1080897, wheb_usuario_pck.get_nr_seq_idioma, 'NR_SEQ_CRON_ETAPA='||NR_SEQ_CRON_ETAPA_P||';DT_ATUAL='||Trunc(clock_timestamp())||';NM_USUARIO='||nm_usuario_p||';DS_JUSTIFICATIVA='|| ds_justificativa_p)
                    );

  commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE proj_inserir_justificativa ( NR_SEQ_CLIENTE_P bigint, nm_usuario_p text, NR_SEQ_PROJETO_P bigint, NR_SEQ_CRON_ETAPA_P bigint, DS_JUSTIFICATIVA_P text ) FROM PUBLIC;

