-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE job_execute_bft_integration ( cd_integration_p bigint, ds_event_p text, ds_java_class_p text, ds_parameters_p text, nm_user_p text, cd_estab_p bigint, ie_tasy_backend_p char default null, ie_si_or_sic_p text default 'SI') AS $body$
DECLARE

  return_w text;
  ds_erro_w varchar(4000);

BEGIN

	if (ie_si_or_sic_p = 'SI') then
		  CALL wheb_usuario_pck.set_cd_estabelecimento(cd_estab_p);
		  return_w := bifrost.send_integration( ds_event_p, ds_java_class_p, ds_parameters_p, nm_user_p, ie_tasy_backend_p );
	end if;

	if (ie_si_or_sic_p = 'SIC') then
	  CALL wheb_usuario_pck.set_nm_usuario(nm_user_p);
	  CALL wheb_usuario_pck.set_cd_estabelecimento(cd_estab_p);
	  return_w := bifrost.send_integration_content(ds_event_p, ds_parameters_p, wheb_usuario_pck.get_nm_usuario);
	end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE job_execute_bft_integration ( cd_integration_p bigint, ds_event_p text, ds_java_class_p text, ds_parameters_p text, nm_user_p text, cd_estab_p bigint, ie_tasy_backend_p char default null, ie_si_or_sic_p text default 'SI') FROM PUBLIC;

