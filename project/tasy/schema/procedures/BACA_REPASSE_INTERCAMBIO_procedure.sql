-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE baca_repasse_intercambio () AS $body$
DECLARE


C01 CURSOR FOR
	SELECT	nr_sequencia,
		ie_unimed_repasse
	from	pls_regra_intercambio_aut;

BEGIN
for r_C01 in C01 loop
	if (r_C01.ie_unimed_repasse IS NOT NULL AND r_C01.ie_unimed_repasse::text <> '') and (r_C01.ie_unimed_repasse = 'S') then
		update	pls_regra_intercambio_aut
		set	ie_atend_operadora_repasse	= 'S',
			ie_solic_autor_origem		= 'N'
		where	nr_sequencia = r_C01.nr_sequencia;
	elsif (r_C01.ie_unimed_repasse IS NOT NULL AND r_C01.ie_unimed_repasse::text <> '') and (r_C01.ie_unimed_repasse = 'O') then
		update	pls_regra_intercambio_aut
		set	ie_atend_operadora_repasse	= 'N',
			ie_solic_autor_origem		= 'S'
		where	nr_sequencia = r_C01.nr_sequencia;
	end if;

	commit;

end loop;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE baca_repasse_intercambio () FROM PUBLIC;

