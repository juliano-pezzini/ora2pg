-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_pont_tot_escala_crib_md ( qt_temperatura_p bigint, qt_base_in_P bigint, IE_SEXO_P text, ie_idade_gest_P bigint, qt_peso_rn_P bigint, qt_temp_P INOUT bigint, qt_resultado_pp INOUT bigint, qt_resultado_P INOUT bigint, qt_base_out_p INOUT bigint, qt_score_p INOUT bigint ) AS $body$
BEGIN
if (qt_temperatura_p < 29.7) then
	qt_temp_p := 5;
elsif (qt_temperatura_p < 31.3) then
	qt_temp_p := 4;
elsif (qt_temperatura_p < 32.9) then
	qt_temp_p := 3;
elsif (qt_temperatura_p < 34.5) then
	qt_temp_p := 2;
elsif (qt_temperatura_p < 36.1) then
	qt_temp_p := 1;
elsif (qt_temperatura_p < 37.6) then
	qt_temp_p := 0;
elsif (qt_temperatura_p < 39.2) then
	qt_temp_p := 1;
elsif (qt_temperatura_p < 40.8) then
	qt_temp_p := 2;
elsif (qt_temperatura_p >= 40.8) then
	qt_temp_p := 3;
end if;

if (qt_base_in_P >= 3) then
	qt_base_out_p := 0;
elsif (qt_base_in_P >=-2) then
	qt_base_out_p := 1;
elsif (qt_base_in_P >= -7) then
	qt_base_out_p := 2;
elsif (qt_base_in_P >= -12) then
	qt_base_out_p := 3;
elsif (qt_base_in_P >= -17) then
	qt_base_out_p := 4;
elsif (qt_base_in_P >= -22) then
	qt_base_out_p := 5;
elsif (qt_base_in_P >= -26) then
	qt_base_out_p := 6;
elsif (qt_base_in_P < -26) then
	qt_base_out_p := 7;
end if;

if (IE_SEXO_P = 'M') then
	if (ie_idade_gest_p = 32) then
		if (qt_peso_rn_P>=1501  ) then
			qt_resultado_P := 0;
		end if;
		if (qt_peso_rn_P >=1251 and qt_peso_rn_P<=1500  ) then
			qt_resultado_P := 1;
		end if;
		if (qt_peso_rn_P >=1001 and qt_peso_rn_P<=1250  ) then
			qt_resultado_P := 3;
		end if;
		if (qt_peso_rn_P >=751 and qt_peso_rn_P<=1000  ) then
			qt_resultado_P := 6;
		end if;
	elsif (ie_idade_gest_p = 31) then
		if (qt_peso_rn_P>=2501  ) then
			qt_resultado_P := 1;
		end if;
		if (qt_peso_rn_P>=1751 and qt_peso_rn_P<=2500  ) then
			qt_resultado_P := 0;
		end if;
		if (qt_peso_rn_P>=1501 and qt_peso_rn_P<=1750  ) then
			qt_resultado_P := 1;
		end if;
		if (qt_peso_rn_P>=1251 and qt_peso_rn_P<=1500  ) then
			qt_resultado_P := 2;
		end if;
		if (qt_peso_rn_P>=1001 and qt_peso_rn_P<=1250  ) then
			qt_resultado_P := 3;
		end if;
		if (qt_peso_rn_P>=751 and qt_peso_rn_P<=1000  ) then
			qt_resultado_P := 6;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 8;
		end if;
	elsif (ie_idade_gest_p = 30) then
		if (qt_peso_rn_P>=2251  ) then
			qt_resultado_P := 3;
		end if;
		if (qt_peso_rn_P>=2001 and qt_peso_rn_P<=2250  ) then
			qt_resultado_P := 2;
		end if;
		if (qt_peso_rn_P>=1751 and qt_peso_rn_P<=2000  ) then
			qt_resultado_P := 1;
		end if;
		if (qt_peso_rn_P>=1501 and qt_peso_rn_P<=1750  ) then
			qt_resultado_P := 2;
		end if;
		if (qt_peso_rn_P>=1251 and qt_peso_rn_P<=1500  ) then
			qt_resultado_P := 3;
		end if;
		if (qt_peso_rn_P>=1001 and qt_peso_rn_P<=1250  ) then
			qt_resultado_P := 4;
		end if;
		if (qt_peso_rn_P>=751 and qt_peso_rn_P<=1000  ) then
			qt_resultado_P := 6;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 8;
		end if;
	elsif (ie_idade_gest_p = 29) then
		if (qt_peso_rn_P>=1251  ) then
			qt_resultado_P := 3;
		end if;
		if (qt_peso_rn_P>=1001 and qt_peso_rn_P<=1250  ) then
			qt_resultado_P := 5;
		end if;
		if (qt_peso_rn_P>=751 and qt_peso_rn_P<=1000  ) then
			qt_resultado_P := 6;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 8;
		end if;
	elsif (ie_idade_gest_p = 28) then
		if (qt_peso_rn_P>=1251  ) then
			qt_resultado_P := 5;
		end if;
		if (qt_peso_rn_P>=1001 and qt_peso_rn_P<=1250  ) then
			qt_resultado_P := 6;
		end if;
		if (qt_peso_rn_P>=751 and qt_peso_rn_P<=1000  ) then
			qt_resultado_P := 7;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 8;
		end if;
		if (qt_peso_rn_P>=251 and qt_peso_rn_P<=500  ) then
			qt_resultado_P := 10;
		end if;
	elsif (ie_idade_gest_p = 27) then
		if (qt_peso_rn_P>=1251  ) then
			qt_resultado_P := 6;
		end if;
		if (qt_peso_rn_P>=751 and qt_peso_rn_P<=1250  ) then
			qt_resultado_P := 7;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 9;
		end if;
		if (qt_peso_rn_P>=251 and qt_peso_rn_P<=500  ) then
			qt_resultado_P := 10;
		end if;
	elsif (ie_idade_gest_p = 26) then
		if (qt_peso_rn_P>=751  ) then
			qt_resultado_P := 8;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 10;
		end if;
		if (qt_peso_rn_P>=251 and qt_peso_rn_P<=500  ) then
			qt_resultado_P := 11;
		end if;
	elsif (ie_idade_gest_p = 25) then
		if (qt_peso_rn_P>=1001   ) then
			qt_resultado_P := 9;
		end if;
		if (qt_peso_rn_P>=751 and qt_peso_rn_P<=1000  ) then
			qt_resultado_P := 10;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 11;
		end if;
		if (qt_peso_rn_P>=251 and qt_peso_rn_P<=500  ) then
			qt_resultado_P := 12;
		end if;
	elsif (ie_idade_gest_p = 24) then
		if (qt_peso_rn_P>=1001   ) then
			qt_resultado_P := 10;
		end if;
		if (qt_peso_rn_P>=751 and qt_peso_rn_P<=1000  ) then
			qt_resultado_P := 11;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 12;
		end if;
		if (qt_peso_rn_P>=251 and qt_peso_rn_P<=500  ) then
			qt_resultado_P := 13;
		end if;
	elsif (ie_idade_gest_p = 23) then
		if (qt_peso_rn_P>=751   ) then
			qt_resultado_P := 12;
		end if;
		if (qt_peso_rn_P>=501 and qt_peso_rn_P<=750  ) then
			qt_resultado_P := 13;
		end if;
		if (qt_peso_rn_P>=251 and qt_peso_rn_P<=500  ) then
			qt_resultado_P := 14;
		end if;
	elsif (ie_idade_gest_p = 22) then
		if (qt_peso_rn_P>=501 ) then
			qt_resultado_P := 14;
		end if;
		if (qt_peso_rn_P>=251 and qt_peso_rn_P<=500 ) then
			qt_resultado_P := 15;
		end if;
	end if;
else
	if (ie_idade_gest_p = 32) then	
		if (qt_peso_rn_P>=1501) then
			qt_resultado_pp :=0;
		end if;
		if (qt_peso_rn_P>=1251) and (qt_peso_rn_P<=1500) then
			qt_resultado_pp :=1;
		end if;
		if (qt_peso_rn_P>=1001) and (qt_peso_rn_P<=1250) then
			qt_resultado_pp :=3;
		end if;
		if (qt_peso_rn_P>=751 ) and (qt_peso_rn_P<=1000 ) then
			qt_resultado_pp :=5;
		end if;
	elsif (ie_idade_gest_p = 31) then
		if (qt_peso_rn_P>=2501 )then
			qt_resultado_pp :=1;
		end if;
		if (qt_peso_rn_P>=1501 ) and ( qt_peso_rn_P<=2500 )then
			qt_resultado_pp :=0;
		end if;
		if (qt_peso_rn_P>=1251 ) and ( qt_peso_rn_P<=1500 )then
			qt_resultado_pp :=1;
		end if;
		if (qt_peso_rn_P>=1001 ) and ( qt_peso_rn_P<=1250 )then
			qt_resultado_pp :=3;
		end if;
		if (qt_peso_rn_P>=751 ) and ( qt_peso_rn_P<=1000 )then 	
			qt_resultado_pp :=5;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=7;
		end if;
	elsif (ie_idade_gest_p = 30) then
		if (qt_peso_rn_P>=2251 )then
			qt_resultado_pp :=2;
		end if;
		if (qt_peso_rn_P>=1501 ) and ( qt_peso_rn_P<=2250 )then
			qt_resultado_pp :=1;
		end if;
		if (qt_peso_rn_P>=1251 ) and ( qt_peso_rn_P<=1500 )then
			qt_resultado_pp :=2;
		end if;
		if (qt_peso_rn_P>=1001 ) and ( qt_peso_rn_P<=1250 )then
			qt_resultado_pp :=3;
		end if;
		if (qt_peso_rn_P>=751 ) and ( qt_peso_rn_P<=1000 )then
			qt_resultado_pp :=5;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=7;
		end if;
	elsif (ie_idade_gest_p = 29) then
		if (qt_peso_rn_P>=1251 ) then
			qt_resultado_P :=3;
		end if;
		if (qt_peso_rn_P>=1001 ) and ( qt_peso_rn_P<=1250 )then
			qt_resultado_pp :=4;
		end if;
		if (qt_peso_rn_P>=751 ) and ( qt_peso_rn_P<=1000 )then
			qt_resultado_pp :=5;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=7;
		end if;
	elsif (ie_idade_gest_p = 28) then
		if (qt_peso_rn_P>=1251 )then
			qt_resultado_pp :=4;
		end if;
		if (qt_peso_rn_P>=1001 ) and ( qt_peso_rn_P<=1250 )then
			qt_resultado_pp :=5;
		end if;
		if (qt_peso_rn_P>=751 ) and ( qt_peso_rn_P<=1000 )then
			qt_resultado_pp :=6;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=8;
		end if;
		if (qt_peso_rn_P>=251 ) and ( qt_peso_rn_P<=500 )then
			qt_resultado_pp :=10;
		end if;
	elsif (ie_idade_gest_p = 27) then
		if (qt_peso_rn_P>=1501 )then
			qt_resultado_pp :=6;
		end if;
		if (qt_peso_rn_P>=1251 ) and ( qt_peso_rn_P<=1500 )then
			qt_resultado_pp :=5;
		end if;
		if (qt_peso_rn_P>=1001 ) and ( qt_peso_rn_P<=1250 )then
			qt_resultado_pp :=6;
		end if;
		if (qt_peso_rn_P>=751 ) and ( qt_peso_rn_P<=1000 )then
			qt_resultado_pp :=7;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=8;
		end if;
		if (qt_peso_rn_P>=251 ) and ( qt_peso_rn_P<=500 )then
			qt_resultado_pp :=10;
		end if;
	elsif (ie_idade_gest_p = 26) then
		if (qt_peso_rn_P>=1001 )then
			qt_resultado_pp :=7;
		end if;
		if (qt_peso_rn_P>=751 ) and ( qt_peso_rn_P<=1000 )then
			qt_resultado_pp :=8;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=9;
		end if;
		if (qt_peso_rn_P>=251 ) and ( qt_peso_rn_P<=500 )then
			qt_resultado_pp :=11;
		end if;
	elsif (ie_idade_gest_p = 25) then
		if (qt_peso_rn_P>=1001  )then
			qt_resultado_pp :=8;
		end if;
		if (qt_peso_rn_P>=751 ) and ( qt_peso_rn_P<=1000 )then
			qt_resultado_pp :=9;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=10;
		end if;
		if (qt_peso_rn_P>=251 ) and ( qt_peso_rn_P<=500 )then
			qt_resultado_pp :=11;
		end if;
	elsif (ie_idade_gest_p = 24) then
		if (qt_peso_rn_P>=751  )then
			qt_resultado_pp :=10;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=11;
		end if;
		if (qt_peso_rn_P>=251 ) and ( qt_peso_rn_P<=500 )then
			qt_resultado_pp :=12;
		end if;
	elsif (ie_idade_gest_p = 23) then
		if (qt_peso_rn_P>=751  )then
			qt_resultado_pp :=11;
		end if;
		if (qt_peso_rn_P>=501 ) and ( qt_peso_rn_P<=750 )then
			qt_resultado_pp :=12;
		end if;
		if (qt_peso_rn_P>=251 ) and ( qt_peso_rn_P<=500 )then
			qt_resultado_pp :=13;
		end if;
	elsif (ie_idade_gest_p = 22) then
		if (qt_peso_rn_P>=501)then
			qt_resultado_pp :=13;
		end if;
		if (qt_peso_rn_P>=251 ) and (qt_peso_rn_P<=500) then
			qt_resultado_pp :=14;
		end if;
	end if;
end if;

qt_score_p 	:= coalesce(qt_temp_p,0)  + coalesce(qt_base_out_p,0) + coalesce(qt_resultado_pp,0) + coalesce(qt_resultado_P,0);

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_pont_tot_escala_crib_md ( qt_temperatura_p bigint, qt_base_in_P bigint, IE_SEXO_P text, ie_idade_gest_P bigint, qt_peso_rn_P bigint, qt_temp_P INOUT bigint, qt_resultado_pp INOUT bigint, qt_resultado_P INOUT bigint, qt_base_out_p INOUT bigint, qt_score_p INOUT bigint ) FROM PUBLIC;

