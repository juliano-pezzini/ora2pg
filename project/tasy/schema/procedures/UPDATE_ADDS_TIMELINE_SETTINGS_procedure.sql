-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE update_adds_timeline_settings ( nr_split_p bigint, cd_split_options_p text, nm_usuario_p text) AS $body$
DECLARE
ora2pg_rowcount int;
BEGIN
  if (nr_split_p IS NOT NULL AND nr_split_p::text <> '' AND cd_split_options_p IS NOT NULL AND cd_split_options_p::text <> '') then
    update adds_timeline_settings
    set nr_split       = nr_split_p,
      cd_split_options = cd_split_options_p,
      dt_atualizacao   = clock_timestamp(),
      nm_usuario       = nm_usuario_p
    where nm_usuario   = nm_usuario_p;
    GET DIAGNOSTICS ora2pg_rowcount = ROW_COUNT;

    if ( ora2pg_rowcount   = 0) then
      insert
      into adds_timeline_settings(
          nr_sequencia,
          dt_atualizacao,
          nm_usuario ,
          dt_atualizacao_nrec ,
          nm_usuario_nrec ,
          nr_split,
          cd_split_options
        )
        values (
          nextval('adds_timeline_settings_seq'),
          clock_timestamp(),
          nm_usuario_p,
          clock_timestamp(),
          nm_usuario_p,
          nr_split_p,
          cd_split_options_p
        );
    end if;
  end if;
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE update_adds_timeline_settings ( nr_split_p bigint, cd_split_options_p text, nm_usuario_p text) FROM PUBLIC;

