-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE ajustar_dados_ref_fatur_nf ( nr_sequencia_p bigint, dt_mes_referencia_p timestamp, dt_mes_recebimento_p timestamp, cd_banco_p text, nr_agencia_p text, nr_dig_agencia_p text, nr_conta_p text, nr_dig_conta_p text, nr_seq_trans_financ_p text, vl_recebido_p text, nm_usuario_p text) AS $body$
BEGIN

update	nota_fiscal
set	dt_mes_ref_fatur		= dt_mes_referencia_p,
	dt_mes_recebimento	= dt_mes_recebimento_p,
	cd_banco		= CASE WHEN cd_banco_p=0 THEN null  ELSE cd_banco_p END ,
	nr_seq_trans_financ	= CASE WHEN nr_seq_trans_financ_p=0 THEN null  ELSE nr_seq_trans_financ_p END ,
	cd_agencia_bancaria	= nr_agencia_p,
	ie_digito_agencia		= nr_dig_agencia_p,
	nr_conta			= nr_conta_p,
	nr_digito_conta		= nr_dig_conta_p,
	vl_recebido		= coalesce(vl_recebido_p,0)
where	nr_sequencia		= nr_sequencia_p;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE ajustar_dados_ref_fatur_nf ( nr_sequencia_p bigint, dt_mes_referencia_p timestamp, dt_mes_recebimento_p timestamp, cd_banco_p text, nr_agencia_p text, nr_dig_agencia_p text, nr_conta_p text, nr_dig_conta_p text, nr_seq_trans_financ_p text, vl_recebido_p text, nm_usuario_p text) FROM PUBLIC;

