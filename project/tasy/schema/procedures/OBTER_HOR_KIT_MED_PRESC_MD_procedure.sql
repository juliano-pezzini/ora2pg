-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_hor_kit_med_presc_md ( ie_urgencia_p text, ie_chamada_cpoe_p text, ds_horarios_p text, hr_prim_horario_p text, ie_sn_check_p text, ie_acm_check_p text, ds_horarios_kit_p INOUT text, hr_prim_horario_kit_p INOUT text ) AS $body$
BEGIN
    IF ( ie_urgencia_p = 'S' ) THEN
        ds_horarios_kit_p := to_char(dividir_sem_round_md((clock_timestamp() + interval '1 days')::numeric , 1440), 'hh24:mi');

        hr_prim_horario_kit_p := to_char(dividir_sem_round_md((clock_timestamp() + interval '1 days')::numeric , 1440), 'hh24:mi');

        IF ( ie_chamada_cpoe_p = 'S' ) THEN
            ds_horarios_kit_p := ds_horarios_p;
            hr_prim_horario_kit_p := hr_prim_horario_p;
        END IF;

    ELSIF ( coalesce(ie_sn_check_p, 'N') = 'S' ) THEN
        ds_horarios_kit_p := 'SN';
    ELSIF ( coalesce(ie_acm_check_p, 'N') = 'S' ) THEN
        ds_horarios_kit_p := 'ACM';
    END IF;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_hor_kit_med_presc_md ( ie_urgencia_p text, ie_chamada_cpoe_p text, ds_horarios_p text, hr_prim_horario_p text, ie_sn_check_p text, ie_acm_check_p text, ds_horarios_kit_p INOUT text, hr_prim_horario_kit_p INOUT text ) FROM PUBLIC;

