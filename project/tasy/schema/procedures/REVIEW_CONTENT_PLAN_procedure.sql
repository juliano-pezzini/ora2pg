-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE review_content_plan ( nr_sequencia_p bigint ) AS $body$
DECLARE

    variable_list   cur_plano_conteudo%rowtype;
    nm_user_w       varchar(100);
    nr_sequence_w   bigint;

BEGIN
    nm_user_w := wheb_usuario_pck.get_nm_usuario;
    SELECT
        nextval('cur_plano_conteudo_seq')
    INTO STRICT nr_sequence_w
;

    UPDATE cur_plano_conteudo
    SET
        dt_inativacao = clock_timestamp(),
        nm_usuario_inativacao = nm_user_w,
        ds_justificativa = obter_expressao_idioma(776344)
    WHERE
        nr_sequencia = nr_sequencia_p;

    COMMIT;
    SELECT
        *
    INTO STRICT variable_list
    FROM
        cur_plano_conteudo
    WHERE
        nr_sequencia = nr_sequencia_p  LIMIT 1;

    INSERT INTO cur_plano_conteudo(
        nr_sequencia,
        dt_atualizacao,
        nm_usuario,
        dt_atualizacao_nrec,
        nm_usuario_nrec,
        nr_atendimento,
        dt_liberacao,
        ds_outro,
        dt_aprovacao,
        nm_usuario_aprovacao,
        dt_aprovacao_nrec,
        nm_usuario_aprovacao_nrec,
        ie_limpeza,
        cd_pessoa_fisica,
        ie_exclusao_pressao_cama,
        ie_selecao_pressao,
        ie_mudanca_postura,
        ie_menos_gaze,
        ds_outros_cama,
        ie_exclusao_cisalhamento,
        ie_cabeca,
        ds_outros_cisalhamento,
        ie_exclusao_pressao_cadeira,
        ie_manter_postura,
        ie_uso_almofada,
        ds_outros_cadeira,
        ie_cuidado_pele,
        ie_limpeza_corpo,
        ie_banho,
        ie_lencol,
        ie_aplicar_med,
        ds_outros_pele,
        ie_alimentacao_oral,
        ie_alimentacao_tubo,
        ie_ivh,
        ie_nutricionista,
        ie_posicao_funcional,
        ie_prevencao_pe,
        ie_prevencao_mov,
        ie_consulta,
        cd_mattress,
        ds_mattress_others,
        ie_change_posture_int,
        nr_interval_hours,
        cd_cushion,
        ds_cushion_others,
        ds_notes,
        nr_times_day,
        ds_alimentacao_oral,
        ds_alimentacao_tubo,
        ds_iv,
        ds_ivh,
        ds_nutricionista,
        dt_inativacao,
        nm_usuario_inativacao,
        ds_justificativa
    ) VALUES (
        nr_sequence_w,
        clock_timestamp(),
        nm_user_w,
        clock_timestamp(),
        nm_user_w,
        variable_list.nr_atendimento,
        NULL,
        variable_list.ds_outro,
        variable_list.dt_aprovacao,
        variable_list.nm_usuario_aprovacao,
        variable_list.dt_aprovacao_nrec,
        variable_list.nm_usuario_aprovacao_nrec,
        variable_list.ie_limpeza,
        variable_list.cd_pessoa_fisica,
        variable_list.ie_exclusao_pressao_cama,
        variable_list.ie_selecao_pressao,
        variable_list.ie_mudanca_postura,
        variable_list.ie_menos_gaze,
        variable_list.ds_outros_cama,
        variable_list.ie_exclusao_cisalhamento,
        variable_list.ie_cabeca,
        variable_list.ds_outros_cisalhamento,
        variable_list.ie_exclusao_pressao_cadeira,
        variable_list.ie_manter_postura,
        variable_list.ie_uso_almofada,
        variable_list.ds_outros_cadeira,
        variable_list.ie_cuidado_pele,
        variable_list.ie_limpeza_corpo,
        variable_list.ie_banho,
        variable_list.ie_lencol,
        variable_list.ie_aplicar_med,
        variable_list.ds_outros_pele,
        variable_list.ie_alimentacao_oral,
        variable_list.ie_alimentacao_tubo,
        variable_list.ie_ivh,
        variable_list.ie_nutricionista,
        variable_list.ie_posicao_funcional,
        variable_list.ie_prevencao_pe,
        variable_list.ie_prevencao_mov,
        variable_list.ie_consulta,
        variable_list.cd_mattress,
        variable_list.ds_mattress_others,
        variable_list.ie_change_posture_int,
        variable_list.nr_interval_hours,
        variable_list.cd_cushion,
        variable_list.ds_cushion_others,
        variable_list.ds_notes,
        variable_list.nr_times_day,
        variable_list.ds_alimentacao_oral,
        variable_list.ds_alimentacao_tubo,
        variable_list.ds_iv,
        variable_list.ds_ivh,
        variable_list.ds_nutricionista,
        NULL,
        NULL,
        NULL
    );

    COMMIT;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE review_content_plan ( nr_sequencia_p bigint ) FROM PUBLIC;

