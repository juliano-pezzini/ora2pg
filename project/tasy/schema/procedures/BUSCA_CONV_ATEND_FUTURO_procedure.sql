-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE busca_conv_atend_futuro ( NR_SEQUENCIA_P bigint, CD_CONVENIO_P INOUT bigint, CD_CATEGORIA_P INOUT text, CD_USUARIO_CONVENIO_P INOUT text, QT_DIA_INTERNACAO_P INOUT bigint, NR_DOC_CONVENIO_P INOUT text, CD_SENHA_P INOUT text, CD_PLANO_CONVENIO_P INOUT text, DT_VALIDADE_CARTEIRA_P INOUT timestamp, DT_VALIDADE_CART_GLOSA_P INOUT timestamp) AS $body$
DECLARE


CD_CONVENIO_W			AF_ATEND_CONVENIO.CD_CONVENIO%type;
CD_CATEGORIA_W			AF_ATEND_CONVENIO.CD_CATEGORIA%type;
CD_USUARIO_CONVENIO_W	AF_ATEND_CONVENIO.CD_USUARIO_CONVENIO%type;
QT_DIA_INTERNACAO_W		AF_ATEND_CONVENIO.QT_DIA_INTERNACAO%type;
NR_DOC_CONVENIO_W		AF_ATEND_CONVENIO.NR_DOC_CONVENIO%type;
CD_SENHA_W				AF_ATEND_CONVENIO.CD_SENHA%type;
CD_PLANO_CONVENIO_W		AF_ATEND_CONVENIO.CD_PLANO_CONVENIO%type;
DT_VALIDADE_CARTEIRA_W	AF_ATEND_CONVENIO.DT_VALIDADE_CARTEIRA%type;
DT_VALIDADE_CART_GLOSA_W	AF_ATEND_CONVENIO.DT_VALIDADE_CART_GLOSA%type;
					

BEGIN


if (coalesce(NR_SEQUENCIA_P,0) > 0) then
		SELECT CD_CONVENIO,
			CD_CATEGORIA,
			CD_USUARIO_CONVENIO,
			QT_DIA_INTERNACAO,
			NR_DOC_CONVENIO,
			CD_SENHA,
			CD_PLANO_CONVENIO,
			DT_VALIDADE_CARTEIRA,
			DT_VALIDADE_CART_GLOSA
		INTO STRICT	CD_CONVENIO_W,
			CD_CATEGORIA_W,
			CD_USUARIO_CONVENIO_W,
			QT_DIA_INTERNACAO_W,
			NR_DOC_CONVENIO_W,
			CD_SENHA_W,
			CD_PLANO_CONVENIO_W,
			DT_VALIDADE_CARTEIRA_W,
			DT_VALIDADE_CART_GLOSA_W
		FROM 	AF_ATEND_CONVENIO A,
			ATEND_PAC_FUTURO B
		WHERE 	A.NR_SEQ_ATEND_FUTURO =  B.NR_SEQUENCIA
		AND	B.NR_SEQUENCIA = NR_SEQUENCIA_P;
	end if;
	


CD_CONVENIO_P := CD_CONVENIO_W;
CD_CATEGORIA_P := CD_CATEGORIA_W;
CD_USUARIO_CONVENIO_P := CD_USUARIO_CONVENIO_W;
QT_DIA_INTERNACAO_P := QT_DIA_INTERNACAO_W;
NR_DOC_CONVENIO_P := NR_DOC_CONVENIO_W;
CD_SENHA_P := CD_SENHA_W;
CD_PLANO_CONVENIO_P := CD_PLANO_CONVENIO_W;
DT_VALIDADE_CARTEIRA_P := DT_VALIDADE_CARTEIRA_W;
DT_VALIDADE_CART_GLOSA_P := DT_VALIDADE_CART_GLOSA_W;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE busca_conv_atend_futuro ( NR_SEQUENCIA_P bigint, CD_CONVENIO_P INOUT bigint, CD_CATEGORIA_P INOUT text, CD_USUARIO_CONVENIO_P INOUT text, QT_DIA_INTERNACAO_P INOUT bigint, NR_DOC_CONVENIO_P INOUT text, CD_SENHA_P INOUT text, CD_PLANO_CONVENIO_P INOUT text, DT_VALIDADE_CARTEIRA_P INOUT timestamp, DT_VALIDADE_CART_GLOSA_P INOUT timestamp) FROM PUBLIC;

