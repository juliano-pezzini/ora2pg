-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE hd_transfere_reproc ( nr_seq_reproc_p bigint, nr_seq_unid_origem_p bigint, nr_seq_unid_destino_p bigint, dt_transferencia_p timestamp, nm_usuario_p text, ds_erro_p INOUT text) AS $body$
BEGIN
 
if (nr_seq_unid_origem_p = nr_seq_unid_destino_p) then 
	ds_erro_p	:= wheb_mensagem_pck.get_texto(279796);
else 
	begin 
	 
		insert into hd_reproc_transf( 
			nr_sequencia, 
			dt_transferencia, 
			nr_seq_reproc, 
			nr_seq_unid_destino, 
			nr_seq_unid_origem, 
			cd_pf_transf, 
			dt_atualizacao, 
			nm_usuario, 
			dt_atualizacao_nrec, 
			nm_usuario_nrec 
		) values ( 
			nextval('hd_reproc_transf_seq'), 
			dt_transferencia_p, 
			nr_seq_reproc_p, 
			nr_seq_unid_destino_p, 
			nr_seq_unid_origem_p, 
			substr(obter_pessoa_fisica_usuario(nm_usuario_p,'C'),1,10), 
			clock_timestamp(), 
			nm_usuario_p, 
			clock_timestamp(), 
			nm_usuario_p 
		);
		 
		commit;
	end;
end if;		
	 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE hd_transfere_reproc ( nr_seq_reproc_p bigint, nr_seq_unid_origem_p bigint, nr_seq_unid_destino_p bigint, dt_transferencia_p timestamp, nm_usuario_p text, ds_erro_p INOUT text) FROM PUBLIC;

