-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_salvar_dados_nasc_web ( nr_seq_conta_p bigint, nr_decl_nasc_vivo_p text, nm_usuario_p text, nr_seq_nasc_vivo_p INOUT bigint) AS $body$
DECLARE



/* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Finalidade:
Receber os valores para  inseri-los na tabela respesctiva.
A Nr_Sequencia deve ser null para se adequar a forma ao contexto no qual é usado a procedure.
-------------------------------------------------------------------------------------------------------------------
Locais de chamada direta:
[  ]  Objetos do dicionário [ ] Tasy (Delphi/Java) [  x ] Portal [  ]  Relatórios [ ] Outros:
 ------------------------------------------------------------------------------------------------------------------
Pontos de atenção:
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */
nr_seq_nasc_vivo_w	bigint := null;


BEGIN

	if (coalesce(nr_seq_nasc_vivo_p::text, '') = '' and (nr_decl_nasc_vivo_p IS NOT NULL AND nr_decl_nasc_vivo_p::text <> '')) then

		select	nextval('pls_diagnostico_nasc_vivo_seq')
		into STRICT	nr_seq_nasc_vivo_w
		;

		insert into	pls_diagnostico_nasc_vivo(
				nr_sequencia,nr_seq_conta,dt_atualizacao,
				nm_usuario,nm_usuario_nrec,nr_decl_nasc_vivo,
				dt_atualizacao_nrec)
				values (
				nr_seq_nasc_vivo_w, nr_seq_conta_p, clock_timestamp(),
				nm_usuario_p,nm_usuario_p,nr_decl_nasc_vivo_p,
				clock_timestamp());
	else
		delete from	pls_diagnostico_nasc_vivo
		where		nr_sequencia = nr_seq_nasc_vivo_p;
	end if;

nr_seq_nasc_vivo_p := nr_seq_nasc_vivo_w;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_salvar_dados_nasc_web ( nr_seq_conta_p bigint, nr_decl_nasc_vivo_p text, nm_usuario_p text, nr_seq_nasc_vivo_p INOUT bigint) FROM PUBLIC;

