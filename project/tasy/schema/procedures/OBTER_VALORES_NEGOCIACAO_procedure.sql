-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_valores_negociacao ( nr_sequencia_p bigint, vl_especie_p INOUT text, vl_cheque_p INOUT text, vl_transacao_p INOUT text) AS $body$
DECLARE


vl_especie_w	double precision;
vl_cheque_w	double precision;
vl_transacao_w	double precision;

BEGIN
if (nr_sequencia_p IS NOT NULL AND nr_sequencia_p::text <> '') then
	begin
	select 	coalesce(sum(vl_especie),0)
	into STRICT 	vl_especie_w
	from 	negociacao_cr_especie
	where 	nr_seq_negociacao = nr_sequencia_p;

	select 	coalesce(sum(vl_cheque),0)
	into STRICT 	vl_cheque_w
	from 	negociacao_cr_cheque
	where 	nr_seq_negociacao = nr_sequencia_p;

	select 	coalesce(sum(vl_transacao),0)
	into STRICT	vl_transacao_w
	from 	negociacao_cr_cartao
	where 	nr_seq_negociacao = nr_sequencia_p;
	end;
end if;
vl_especie_p	:= campo_mascara_virgula(vl_especie_w);
vl_cheque_p	:= campo_mascara_virgula(vl_cheque_w);
vl_transacao_p	:= campo_mascara_virgula(vl_transacao_w);
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_valores_negociacao ( nr_sequencia_p bigint, vl_especie_p INOUT text, vl_cheque_p INOUT text, vl_transacao_p INOUT text) FROM PUBLIC;

