-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE obter_tempo_inf_med_terap_md (ie_unidade_p text, qt_vel_infusao_p bigint, ie_tempo_p text, ie_unidade_vel_p text, qt_tempo_p INOUT bigint, qt_tempo_infusao_p INOUT bigint ) AS $body$
DECLARE


	qt_tempo_infusao_w     double precision;
	qt_tempo_infusao_ww    double precision;
	qt_tempo_ww            double precision;

BEGIN
  qt_tempo_infusao_w  := qt_tempo_infusao_p;

  if (ie_unidade_p = 'MEQ') then
     qt_tempo_infusao_ww := qt_vel_infusao_p * qt_tempo_infusao_p;
  else
     qt_tempo_infusao_ww := round((qt_vel_infusao_p * qt_tempo_infusao_p)::numeric, 2);
  end if;

  if (ie_tempo_p ='M') or (ie_tempo_p ='H') then
    begin
      if (upper(ie_unidade_vel_p) = 'MLH') then
        if (ie_tempo_p ='M') then
          qt_tempo_infusao_w	:= qt_tempo_infusao_w * 60;
        end if;
      end if;

      if (upper(ie_unidade_vel_p) = 'GTM') and (ie_tempo_p <> 'H') then
        qt_tempo_infusao_w	:= (qt_tempo_infusao_w * 60);	
      end if;

      if (upper(ie_unidade_vel_p) = 'MGM') then
        qt_tempo_infusao_w	:= qt_tempo_infusao_w * 60;
        if (ie_tempo_p ='H') then
          qt_tempo_infusao_w	:= dividir_md(qt_tempo_infusao_w,60);
        end if;
      end if;
      qt_tempo_ww	:= qt_tempo_infusao_w;
    end;
  else
    qt_tempo_ww	:= qt_tempo_infusao_w;
  end if;

  qt_tempo_p         := qt_tempo_ww;
  qt_tempo_infusao_p := qt_tempo_infusao_ww;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE obter_tempo_inf_med_terap_md (ie_unidade_p text, qt_vel_infusao_p bigint, ie_tempo_p text, ie_unidade_vel_p text, qt_tempo_p INOUT bigint, qt_tempo_infusao_p INOUT bigint ) FROM PUBLIC;

