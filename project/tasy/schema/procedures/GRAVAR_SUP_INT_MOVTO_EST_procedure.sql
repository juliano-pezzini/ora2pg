-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE gravar_sup_int_movto_est ( nr_movimento_estoque_p bigint, cd_estab_p bigint, dt_mesano_referencia_p timestamp, cd_local_estoque_p bigint, cd_material_p bigint, qt_movimento_p bigint, qt_estoque_p bigint, dt_movimento_estoque_p timestamp, cd_local_estoque_destino_p bigint, cd_operacao_estoque_p bigint, dt_processo_p timestamp, ie_origem_documento_p text, cd_unidade_med_mov_p text, qt_inventario_p bigint, cd_conta_contabil_p text, cd_acao_p text, cd_centro_custo_p bigint, cd_material_estoque_p bigint, cd_unidade_medida_estoque_p text, cd_fornecedor_p text, cd_lote_fabricacao_p text, dt_validade_p timestamp, ds_observacao_p text, cd_cgc_emitente_p text, cd_serie_nf_p text, nr_documento_p bigint, nr_sequencia_item_docto_p bigint, nr_sequencia_documento_p bigint, dt_contabil_p timestamp, ie_movto_consignado_p text, cd_setor_atendimento_p bigint, nr_atendimento_p bigint, nr_prescricao_p bigint, nr_ordem_compra_p bigint, nr_item_oci_p bigint, nr_lote_ap_p bigint, cd_funcao_p bigint, cd_perfil_p bigint, nr_receita_p bigint, nr_seq_lote_fornec_p bigint, nr_seq_tab_orig_p bigint, nr_lote_contabil_p bigint, nm_usuario_p text) AS $body$
DECLARE


nr_sequencia_w			bigint;
cd_tipo_valor_w			integer;
ds_tipo_valor_w			varchar(80);
vl_movimento_w			double precision;


BEGIN

select	nextval('sup_int_movto_estoque_seq')
into STRICT	nr_Sequencia_w
;

insert into sup_int_movto_estoque(
	nr_sequencia,
	ie_forma_integracao,
	dt_atualizacao,
	nm_usuario,
	cd_empresa,
	nr_movimento_estoque,
	cd_estabelecimento,
	dt_mesano_referencia,
	cd_local_estoque,
	cd_material,
	qt_movimento,
	qt_estoque,
	dt_movimento_estoque,
	cd_local_estoque_destino,
	cd_operacao_estoque,
	dt_processo,
	ie_origem_documento,
	cd_unidade_med_mov,
	ie_entrada_saida,
	qt_inventario,
	cd_conta_contabil,
	cd_acao,
	cd_centro_custo,
	cd_material_estoque,
	cd_unidade_medida_estoque,
	cd_fornecedor,
	cd_lote_fabricacao,
	dt_validade,
	ds_observacao,
	cd_cgc_emitente,
	cd_serie_nf,
	nr_documento,
	nr_sequencia_item_docto,
	nr_sequencia_documento,
	dt_contabil,
	ie_movto_consignado,
	cd_setor_atendimento,
	nr_atendimento,
	nr_prescricao,
	nr_ordem_compra,
	nr_item_oci,
	nr_lote_ap,
	cd_funcao,
	cd_perfil,
	nr_receita,
	nr_seq_lote_fornec,
	nr_seq_tab_orig,
	nr_lote_contabil)
values (	nr_Sequencia_w,
	'E',
	clock_timestamp(),
	nm_usuario_p,
	obter_empresa_estab(cd_estab_p),
	nr_movimento_estoque_p,
	cd_estab_p,
	dt_mesano_referencia_p,
	cd_local_estoque_p,
	cd_material_p,
	qt_movimento_p,
	qt_estoque_p,
	dt_movimento_estoque_p,
	cd_local_estoque_destino_p,
	cd_operacao_estoque_p,
	dt_processo_p,
	ie_origem_documento_p,
	cd_unidade_med_mov_p,
	substr(obter_dados_operacao_estoque(cd_operacao_estoque_p,'E'),1,1),
	qt_inventario_p,
	cd_conta_contabil_p,
	cd_acao_p,
	cd_centro_custo_p,
	cd_material_estoque_p,
	cd_unidade_medida_estoque_p,
	cd_fornecedor_p,
	cd_lote_fabricacao_p,
	dt_validade_p,
	ds_observacao_p,
	cd_cgc_emitente_p,
	cd_serie_nf_p,
	nr_documento_p,
	nr_sequencia_item_docto_p,
	nr_sequencia_documento_p,
	dt_contabil_p,
	ie_movto_consignado_p,
	cd_setor_atendimento_p,
	nr_atendimento_p,
	nr_prescricao_p,
	nr_ordem_compra_p,
	nr_item_oci_p,
	nr_lote_ap_p,
	cd_funcao_p,
	cd_perfil_p,
	nr_receita_p,
	nr_seq_lote_fornec_p,
	nr_seq_tab_orig_p,
	nr_lote_contabil_p);

update	sup_int_movto_estoque
set	dt_liberacao = clock_timestamp()
where	nr_sequencia = nr_sequencia_w;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE gravar_sup_int_movto_est ( nr_movimento_estoque_p bigint, cd_estab_p bigint, dt_mesano_referencia_p timestamp, cd_local_estoque_p bigint, cd_material_p bigint, qt_movimento_p bigint, qt_estoque_p bigint, dt_movimento_estoque_p timestamp, cd_local_estoque_destino_p bigint, cd_operacao_estoque_p bigint, dt_processo_p timestamp, ie_origem_documento_p text, cd_unidade_med_mov_p text, qt_inventario_p bigint, cd_conta_contabil_p text, cd_acao_p text, cd_centro_custo_p bigint, cd_material_estoque_p bigint, cd_unidade_medida_estoque_p text, cd_fornecedor_p text, cd_lote_fabricacao_p text, dt_validade_p timestamp, ds_observacao_p text, cd_cgc_emitente_p text, cd_serie_nf_p text, nr_documento_p bigint, nr_sequencia_item_docto_p bigint, nr_sequencia_documento_p bigint, dt_contabil_p timestamp, ie_movto_consignado_p text, cd_setor_atendimento_p bigint, nr_atendimento_p bigint, nr_prescricao_p bigint, nr_ordem_compra_p bigint, nr_item_oci_p bigint, nr_lote_ap_p bigint, cd_funcao_p bigint, cd_perfil_p bigint, nr_receita_p bigint, nr_seq_lote_fornec_p bigint, nr_seq_tab_orig_p bigint, nr_lote_contabil_p bigint, nm_usuario_p text) FROM PUBLIC;

