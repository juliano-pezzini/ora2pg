-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE calc_dose_padr_terap_presc_md ( ie_unid_med_padrao_p text, ie_mostra_orient_p text , qt_dose_terapeutica_p bigint, qt_dose_terap_limite_p bigint, nr_seq_dose_terap_p bigint, ds_observacao_aux_P text, qt_dose_terapeutica_out_p INOUT bigint, qt_dose_terap_limite_out_p INOUT bigint, nr_seq_dose_terap_out_p INOUT bigint, ds_observacao_out_p INOUT text, cd_unidade_medida_out_p INOUT text, qt_dose_terap_min_p INOUT bigint, ds_observacao_p INOUT text, qt_min_aplicacao_out_p INOUT bigint ) AS $body$
BEGIN
    IF ( ie_unid_med_padrao_p <> 'N' ) THEN
        cd_unidade_medida_out_p := NULL;
    END IF;
    IF ( coalesce(ie_mostra_orient_p, 'S') = 'S' ) THEN
        IF (ds_observacao_p IS NOT NULL AND ds_observacao_p::text <> '') THEN
            ds_observacao_p := substr(ds_observacao_p
                                      || chr(13)
                                      || ds_observacao_aux_p, 1, 2000);

        ELSE
            ds_observacao_p := substr(ds_observacao_aux_p, 1, 2000);
        END IF;

    END IF;

    ds_observacao_out_p := ds_observacao_p;
    qt_dose_terapeutica_out_p := qt_dose_terapeutica_p;
    qt_dose_terap_limite_out_p := qt_dose_terap_limite_p;
    nr_seq_dose_terap_out_p := nr_seq_dose_terap_p;
    qt_dose_terap_min_p := qt_dose_terap_min_p;
    IF ( qt_min_aplicacao_out_p = 0 ) THEN
        qt_min_aplicacao_out_p := NULL;
    END IF;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE calc_dose_padr_terap_presc_md ( ie_unid_med_padrao_p text, ie_mostra_orient_p text , qt_dose_terapeutica_p bigint, qt_dose_terap_limite_p bigint, nr_seq_dose_terap_p bigint, ds_observacao_aux_P text, qt_dose_terapeutica_out_p INOUT bigint, qt_dose_terap_limite_out_p INOUT bigint, nr_seq_dose_terap_out_p INOUT bigint, ds_observacao_out_p INOUT text, cd_unidade_medida_out_p INOUT text, qt_dose_terap_min_p INOUT bigint, ds_observacao_p INOUT text, qt_min_aplicacao_out_p INOUT bigint ) FROM PUBLIC;

