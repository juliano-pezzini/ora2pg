-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE copiar_regra_alocacao ( nr_seq_origem_p bigint, nr_seq_destino_p bigint, nm_usuario_p text) AS $body$
DECLARE


ie_calculo_custo_w				varchar(1);
pr_aplicar_w					double precision;
vl_custo_w					double precision;
cd_area_procedimento_w				bigint;
cd_especialidade_w				bigint;
cd_grupo_proc_w					bigint;
cd_procedimento_w				bigint;
ie_origem_proced_w				bigint;
cd_convenio_w					integer;
cd_proc_custo_w					bigint;
ie_origem_proc_custo_w				bigint;
cd_grupo_material_w				smallint;
cd_subgrupo_material_w				smallint;
cd_classe_material_w				integer;
cd_material_w					integer;
pr_custo_oper_w					double precision;
pr_medico_w					double precision;
pr_material_w					double precision;
ds_criterio_aloc_mat_w				varchar(3);
ie_custo_hm_w					varchar(1);
nr_seq_exame_w					bigint;
pr_imposto_w					double precision;
nr_seq_grupo_w					bigint;
nr_seq_subgrupo_w				bigint;
nr_seq_forma_org_w				bigint;
cd_edicao_amb_w					integer;
ie_tipo_atendimento_w				smallint;
dt_inicio_vigencia_w				timestamp;
dt_fim_vigencia_w				timestamp;
ds_observacao_w					varchar(10);
nr_seq_proc_interno_w				bigint;
ie_responsavel_credito_w			regra_aloc_custo_setor.ie_responsavel_credito%type;
cd_material_custo_w				regra_aloc_custo_setor.cd_material_custo%type;


BEGIN

select	ie_calculo_custo,
	pr_aplicar,
	vl_custo,
	cd_area_procedimento,
	cd_especialidade,
	cd_grupo_proc,
	cd_procedimento,
	ie_origem_proced,
	cd_convenio,
	cd_proc_custo,
	ie_origem_proc_custo,
	cd_grupo_material,
	cd_subgrupo_material,
	cd_classe_material,
	cd_material,
	pr_custo_oper,
	pr_medico,
	pr_material,
	ds_criterio_aloc_mat,
	ie_custo_hm,
	nr_seq_exame,
	pr_imposto,
	nr_seq_grupo,
	nr_seq_subgrupo,
	nr_seq_forma_org,
	cd_edicao_amb,
	ie_tipo_atendimento,
	dt_inicio_vigencia,
	dt_fim_vigencia,
	ds_observacao,
	nr_seq_proc_interno,
	ie_responsavel_credito,
	cd_material_custo
into STRICT	ie_calculo_custo_w,
	pr_aplicar_w,
	vl_custo_w,
	cd_area_procedimento_w,
	cd_especialidade_w,
	cd_grupo_proc_w,
	cd_procedimento_w,
	ie_origem_proced_w,
	cd_convenio_w,
	cd_proc_custo_w,
	ie_origem_proc_custo_w,
	cd_grupo_material_w,
	cd_subgrupo_material_w,
	cd_classe_material_w,
	cd_material_w,
	pr_custo_oper_w,
	pr_medico_w,
	pr_material_w,
	ds_criterio_aloc_mat_w,
	ie_custo_hm_w,
	nr_seq_exame_w,
	pr_imposto_w,
	nr_seq_grupo_w,
	nr_seq_subgrupo_w,
	nr_seq_forma_org_w,
	cd_edicao_amb_w,
	ie_tipo_atendimento_w,
	dt_inicio_vigencia_w,
	dt_fim_vigencia_w,
	ds_observacao_w,
	nr_seq_proc_interno_w,
	ie_responsavel_credito_w,
	cd_material_custo_w
from	regra_aloc_custo_setor
where	nr_sequencia = nr_seq_origem_p;

update	regra_aloc_custo_setor
set	ie_calculo_custo		= ie_calculo_custo_w,
	pr_aplicar			= pr_aplicar_w,
	vl_custo			= vl_custo_w,
	cd_area_procedimento		= cd_area_procedimento_w,
	cd_especialidade		= cd_especialidade_w,
	cd_grupo_proc			= cd_grupo_proc_w,
	cd_procedimento			= cd_procedimento_w,
	ie_origem_proced		= ie_origem_proced_w,
	cd_convenio			= cd_convenio_w,
	cd_proc_custo			= cd_proc_custo_w,
	ie_origem_proc_custo		= ie_origem_proc_custo_w,
	cd_grupo_material		= cd_grupo_material_w,
	cd_subgrupo_material		= cd_subgrupo_material_w,
	cd_classe_material		= cd_classe_material_w,
	cd_material			= cd_material_w,
	pr_custo_oper			= pr_custo_oper_w,
	pr_medico			= pr_medico_w,
	pr_material			= pr_material_w,
	ds_criterio_aloc_mat		= ds_criterio_aloc_mat_w,
	ie_custo_hm			= ie_custo_hm_w,
	nr_seq_exame			= nr_seq_exame_w,
	pr_imposto			= pr_imposto_w,
	nr_seq_grupo			= nr_seq_grupo_w,
	nr_seq_subgrupo			= nr_seq_subgrupo_w,
	nr_seq_forma_org		= nr_seq_forma_org_w,
	cd_edicao_amb			= cd_edicao_amb_w,
	ie_tipo_atendimento		= ie_tipo_atendimento_w,
	dt_atualizacao			= clock_timestamp(),
	nm_usuario			= nm_usuario_p,
	dt_inicio_vigencia		= dt_inicio_vigencia_w,
	dt_fim_vigencia			= dt_fim_vigencia_w,
	ds_observacao			= ds_observacao_w,
	nr_seq_proc_interno		= nr_seq_proc_interno_w,
	ie_responsavel_credito		= ie_responsavel_credito_w,
	cd_material_custo		= cd_material_custo_w
where	nr_sequencia			= nr_seq_destino_p;

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE copiar_regra_alocacao ( nr_seq_origem_p bigint, nr_seq_destino_p bigint, nm_usuario_p text) FROM PUBLIC;

