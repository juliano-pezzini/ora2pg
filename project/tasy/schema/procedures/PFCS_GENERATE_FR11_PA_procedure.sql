-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pfcs_generate_fr11_pa (nr_seq_indicator_p bigint) AS $body$
DECLARE


pfcs_panel_seq_w			pfcs_panel.nr_sequencia%type;
cd_estabelecimento_w			bigint;
nm_usuario_p 				varchar(20);


BEGIN
nm_usuario_p := 'asimovbr';
cd_estabelecimento_w	:= pfcs_get_structure_level(cd_establishment_p => 1, ie_level_p => 'O', ie_info_p => 'C');

DELETE FROM pfcs_detail_patient WHERE NR_SEQ_DETAIL in (10000,10001,10002,10003,10004,10005,10006,10007,10008,10009,10010);
DELETE FROM pfcs_panel_detail WHERE NR_SEQ_INDICATOR = 15;
DELETE FROM pfcs_panel WHERE NR_SEQ_INDICATOR = 15;

/* INSERT QUERY NO: 1 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10000, nm_usuario_p, (clock_timestamp() - (64/24/60)), nm_usuario_p, (clock_timestamp() - (64/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 2 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10001, nm_usuario_p, (clock_timestamp() - (80/24/60)), nm_usuario_p, (clock_timestamp() - (80/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 3 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10002, nm_usuario_p, (clock_timestamp() - (120/24/60)), nm_usuario_p, (clock_timestamp() - (120/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 4 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10003, nm_usuario_p, (clock_timestamp() - (126/24/60)), nm_usuario_p, (clock_timestamp() - (126/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 5 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10004, nm_usuario_p, (clock_timestamp() - (128/24/60)), nm_usuario_p, (clock_timestamp() - (128/24/60)), 'T', 15, cd_estabelecimento_w
);

-------------------------------------------------- pfcs_detail_patient --------------------------------------------------		
/* INSERT QUERY NO: 1 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (64/24/60)), nm_usuario_p, (clock_timestamp() - (64/24/60)), nm_usuario_p, 3423979, (clock_timestamp() - (64/24/60)), 1454003, 'MENGARDA, Elizabeth', 'Female', 'VIP', to_date('09/12/1972 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10000
);

/* INSERT QUERY NO: 2 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (80/24/60)), nm_usuario_p, (clock_timestamp() - (80/24/60)), nm_usuario_p, 3423770, (clock_timestamp() - (80/24/60)), 2490468, 'MESSIAS, Kaique', 'Male', 'VIP', to_date('21/11/1995 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10001
);

/* INSERT QUERY NO: 3 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (120/24/60)), nm_usuario_p, (clock_timestamp() - (120/24/60)), nm_usuario_p, 3423995, (clock_timestamp() - (120/24/60)), 64624, 'LUZ, Astrogildo', 'Male', 'VIP', to_date('03/11/1978 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10002
);

/* INSERT QUERY NO: 4 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (126/24/60)), nm_usuario_p, (clock_timestamp() - (126/24/60)), nm_usuario_p, 3423996, (clock_timestamp() - (126/24/60)), 187809, 'MIRANDA, Eunice', 'Female', 'VIP', to_date('21/04/1966 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10003
);

/* INSERT QUERY NO: 5 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (128/24/60)), nm_usuario_p, (clock_timestamp() - (128/24/60)), nm_usuario_p, 3423998, (clock_timestamp() - (128/24/60)), 180936, 'PHILIPS, Rosa', 'Female', 'VIP', to_date('05/12/1998 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10004
);

 := pfcs_pck.pfcs_generate_results(
	vl_indicator_p => 5,  --total admitidos = 5
	vl_indicator_aux_p => 28,  --total pacientes estab 1 = 25
	nr_seq_indicator_p => nr_seq_indicator_p, nr_seq_operational_level_p => cd_estabelecimento_w, nm_usuario_p => nm_usuario_p, nr_seq_panel_p => pfcs_panel_seq_w);

CALL pfcs_pck.pfcs_update_detail(
	nr_seq_indicator_p => nr_seq_indicator_p,
	nr_seq_panel_p => pfcs_panel_seq_w,
	nr_seq_operational_level_p => cd_estabelecimento_w,
	nm_usuario_p => nm_usuario_p);

CALL pfcs_pck.pfcs_activate_records(
	nr_seq_indicator_p => nr_seq_indicator_p,
	nr_seq_operational_level_p => cd_estabelecimento_w,
	nm_usuario_p => nm_usuario_p);

cd_estabelecimento_w	:= pfcs_get_structure_level(cd_establishment_p => 39, ie_level_p => 'O', ie_info_p => 'C');

/* INSERT QUERY NO: 6 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10005, nm_usuario_p, (clock_timestamp() - (79/24/60)), nm_usuario_p, (clock_timestamp() - (79/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 7 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10006, nm_usuario_p, (clock_timestamp() - (107/24/60)), nm_usuario_p, (clock_timestamp() - (107/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 8 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10007, nm_usuario_p, (clock_timestamp() - (109/24/60)), nm_usuario_p, (clock_timestamp() - (109/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 9 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10008, nm_usuario_p, (clock_timestamp() - (178/24/60)), nm_usuario_p, (clock_timestamp() - (178/24/60)), 'T', 15, cd_estabelecimento_w
);

/* INSERT QUERY NO: 10 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10009, nm_usuario_p, (clock_timestamp() - (163/24/60)), nm_usuario_p, (clock_timestamp() - (163/24/60)), 'T', 15, cd_estabelecimento_w
);

-------------------------------------------------- pfcs_detail_patient --------------------------------------------------		
/* INSERT QUERY NO: 6 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (79/24/60)), nm_usuario_p, (clock_timestamp() - (79/24/60)), nm_usuario_p, 3423999, (clock_timestamp() - (79/24/60)), 539682, 'MIRANDA, Helio', 'Male', 'VIP', to_date('19/02/1978 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10005
);

/* INSERT QUERY NO: 7 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (107/24/60)), nm_usuario_p, (clock_timestamp() - (107/24/60)), nm_usuario_p, 3424001, (clock_timestamp() - (107/24/60)), 186883, 'BISSOLI, Janaina', 'Female', 'VIP', to_date('01/01/1975 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10006
);

/* INSERT QUERY NO: 8 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (109/24/60)), nm_usuario_p, (clock_timestamp() - (109/24/60)), nm_usuario_p, 3424002, (clock_timestamp() - (109/24/60)), 726434, 'GONCALVES, Igor', 'Male', 'VIP', to_date('02/03/1999 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10007
);

/* INSERT QUERY NO: 9 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (178/24/60)), nm_usuario_p, (clock_timestamp() - (178/24/60)), nm_usuario_p, 3424004, (clock_timestamp() - (178/24/60)), 2830800, 'LOPES, JONAS', 'Male', 'VIP', to_date('04/08/1986 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10008
);

/* INSERT QUERY NO: 10 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (163/24/60)), nm_usuario_p, (clock_timestamp() - (163/24/60)), nm_usuario_p, 3424005, (clock_timestamp() - (163/24/60)), 2488416, 'NUMAO, Willian', 'Male', 'VIP', to_date('07/11/1984 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10009
);

 := pfcs_pck.pfcs_generate_results(
	vl_indicator_p => 5,  --total admitidos = 5
	vl_indicator_aux_p => 40,  --total pacientes estab 1 = 25
	nr_seq_indicator_p => nr_seq_indicator_p, nr_seq_operational_level_p => cd_estabelecimento_w, nm_usuario_p => nm_usuario_p, nr_seq_panel_p => pfcs_panel_seq_w);

CALL pfcs_pck.pfcs_update_detail(
	nr_seq_indicator_p => nr_seq_indicator_p,
	nr_seq_panel_p => pfcs_panel_seq_w,
	nr_seq_operational_level_p => cd_estabelecimento_w,
	nm_usuario_p => nm_usuario_p);

CALL pfcs_pck.pfcs_activate_records(
	nr_seq_indicator_p => nr_seq_indicator_p,
	nr_seq_operational_level_p => cd_estabelecimento_w,
	nm_usuario_p => nm_usuario_p);
	
cd_estabelecimento_w	:= pfcs_get_structure_level(cd_establishment_p => 11, ie_level_p => 'O', ie_info_p => 'C');

/* INSERT QUERY NO: 11 */

INSERT INTO pfcs_panel_detail(NR_SEQUENCIA, NM_USUARIO, DT_ATUALIZACAO, NM_USUARIO_NREC, DT_ATUALIZACAO_NREC, IE_SITUATION, NR_SEQ_INDICATOR, NR_SEQ_OPERATIONAL_LEVEL)
VALUES
(
10010, nm_usuario_p, (clock_timestamp() - (159/24/60)), nm_usuario_p, (clock_timestamp() - (159/24/60)), 'T', 15, cd_estabelecimento_w
);

-------------------------------------------------- pfcs_detail_patient --------------------------------------------------		
/* INSERT QUERY NO: 11 */

INSERT INTO pfcs_detail_patient(NR_SEQUENCIA, DT_ATUALIZACAO, NM_USUARIO, DT_ATUALIZACAO_NREC, NM_USUARIO_NREC, NR_ENCOUNTER, DT_ENTRANCE, ID_PATIENT, NM_PATIENT, DS_GENDER, DS_CLASSIFICATION, DT_BIRTHDATE, NR_SEQ_DETAIL)
VALUES
(
nextval('pfcs_detail_patient_seq'), (clock_timestamp() - (159/24/60)), nm_usuario_p, (clock_timestamp() - (159/24/60)), nm_usuario_p, 3424061, (clock_timestamp() - (159/24/60)), 189174, 'KOHLER, Gilmar', 'Male', 'VIP', to_date('14/06/1960 00:00:00', 'DD/MM/YYYY HH24:MI:SS'), 10010
);

 := pfcs_pck.pfcs_generate_results(
	vl_indicator_p => 1,  --total admitidos = 1
	vl_indicator_aux_p => 5,  --total pacientes estab 1 = 5
	nr_seq_indicator_p => nr_seq_indicator_p, nr_seq_operational_level_p => cd_estabelecimento_w, nm_usuario_p => nm_usuario_p, nr_seq_panel_p => pfcs_panel_seq_w);

CALL pfcs_pck.pfcs_update_detail(
	nr_seq_indicator_p => nr_seq_indicator_p,
	nr_seq_panel_p => pfcs_panel_seq_w,
	nr_seq_operational_level_p => cd_estabelecimento_w,
	nm_usuario_p => nm_usuario_p);

CALL pfcs_pck.pfcs_activate_records(
	nr_seq_indicator_p => nr_seq_indicator_p,
	nr_seq_operational_level_p => cd_estabelecimento_w,
	nm_usuario_p => nm_usuario_p);

commit;	
	
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pfcs_generate_fr11_pa (nr_seq_indicator_p bigint) FROM PUBLIC;

