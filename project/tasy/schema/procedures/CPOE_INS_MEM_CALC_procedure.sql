-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE cpoe_ins_mem_calc ( NR_SEQ_MAT_CPOE_P cpoe_calc_memoria_usada.NR_SEQ_MAT_CPOE%type, IE_PESO_P cpoe_calc_memoria_usada.IE_PESO%type, QT_PESO_P cpoe_calc_memoria_usada.QT_PESO%type, QT_ALTURA_P cpoe_calc_memoria_usada.QT_ALTURA%type, QT_SC_P cpoe_calc_memoria_usada.QT_SC%type, QT_IMC_P cpoe_calc_memoria_usada.QT_IMC%type, CD_MATERIAL_P cpoe_calc_memoria_usada.CD_MATERIAL%type, QT_DOSE_P cpoe_calc_memoria_usada.QT_DOSE%type, CD_UNIDADE_MEDIDA_P cpoe_calc_memoria_usada.CD_UNIDADE_MEDIDA%type, CD_MAT_DIL_P cpoe_calc_memoria_usada.CD_MAT_DIL%type, QT_DOSE_DIL_P cpoe_calc_memoria_usada.QT_DOSE_DIL%type, CD_UNID_MED_DOSE_DIL_P cpoe_calc_memoria_usada.CD_UNID_MED_DOSE_DIL%type, QT_CONCENTRACAO_FINAL_P cpoe_calc_memoria_usada.QT_CONCENTRACAO_FINAL%type, QT_FATOR_P cpoe_calc_memoria_usada.QT_FATOR%type, QT_DOSE_TOTAL_FIXO_P cpoe_calc_memoria_usada.QT_DOSE_TOTAL_FIXO%type, IE_VOLUME_FIXO_P cpoe_calc_memoria_usada.IE_VOLUME_FIXO%type, QT_DOSE_TERAPEUTICA_P cpoe_calc_memoria_usada.QT_DOSE_TERAPEUTICA%type, CD_UNID_MED_DOSE_TERAPEUTICA_P cpoe_calc_memoria_usada.CD_UNID_MED_DOSE_TERAPEUTICA%type, QT_DOSAGEM_P cpoe_calc_memoria_usada.QT_DOSAGEM%type, IE_TIPO_DOSAGEM_P cpoe_calc_memoria_usada.IE_TIPO_DOSAGEM%type, QT_DOSE_TERAP_MIN_P cpoe_calc_memoria_usada.QT_DOSE_TERAP_MIN%type, CD_UNID_MED_TERAP_MIN_P cpoe_calc_memoria_usada.CD_UNID_MED_TERAP_MIN%type, QT_VEL_INF_TERAP_MIN_P cpoe_calc_memoria_usada.QT_VEL_INF_TERAP_MIN%type, IE_TIPO_DOSAGEM_MIN_P cpoe_calc_memoria_usada.IE_TIPO_DOSAGEM_MIN%type, QT_DOSE_TERAP_MAX_P cpoe_calc_memoria_usada.QT_DOSE_TERAP_MAX%type, CD_UNID_MED_TERAP_MAX_P cpoe_calc_memoria_usada.CD_UNID_MED_TERAP_MAX%type, QT_VEL_INF_TERAP_MAX_P cpoe_calc_memoria_usada.QT_VEL_INF_TERAP_MAX%type, IE_TIPO_DOSAGEM_MAX_P cpoe_calc_memoria_usada.IE_TIPO_DOSAGEM_MAX%type, IE_BOMBA_INFUSAO_P cpoe_calc_memoria_usada.IE_BOMBA_INFUSAO%type, QT_VOL_DISPOSITIVO_P cpoe_calc_memoria_usada.QT_VOL_DISPOSITIVO%type, IE_FATOR_CORRECAO_P cpoe_calc_memoria_usada.IE_FATOR_CORRECAO%type, QT_PERIODO_P cpoe_calc_memoria_usada.QT_PERIODO%type, QT_DOSE_MEDICAMENTO_P cpoe_calc_memoria_usada.QT_DOSE_MEDICAMENTO%type, QT_DOSE_SOL_P cpoe_calc_memoria_usada.QT_DOSE_SOL%type, QT_VOLUME_TOTAL_P cpoe_calc_memoria_usada.QT_VOLUME_TOTAL%type, QT_CORRIGIDO_MEDIC_P cpoe_calc_memoria_usada.QT_CORRIGIDO_MEDIC%type, QT_CORRIGIDO_DIL_P cpoe_calc_memoria_usada.QT_CORRIGIDO_DIL%type, QT_TOTAL_CORRIGIDO_P cpoe_calc_memoria_usada.QT_TOTAL_CORRIGIDO%type, QT_DOSE_CONVERT_P cpoe_calc_memoria_usada.QT_DOSE_CONVERT%type, QT_DOSE_DIL_CONVERT_P cpoe_calc_memoria_usada.QT_DOSE_DIL_CONVERT%type ) AS $body$
BEGIN
    if (nr_seq_mat_cpoe_p > 0) then
        CALL cpoe_del_mem_calc(nr_seq_mat_cpoe_p);
    end if;

    insert into CPOE_CALC_MEMORIA_USADA(
        NR_SEQUENCIA, NR_SEQ_MAT_CPOE, IE_PESO, QT_PESO, QT_ALTURA, QT_SC,
        QT_IMC, CD_MATERIAL, QT_DOSE, CD_UNIDADE_MEDIDA, CD_MAT_DIL, QT_DOSE_DIL,
        CD_UNID_MED_DOSE_DIL, QT_CONCENTRACAO_FINAL, QT_FATOR, QT_DOSE_TOTAL_FIXO,
        IE_VOLUME_FIXO, QT_DOSE_TERAPEUTICA, CD_UNID_MED_DOSE_TERAPEUTICA,
        QT_DOSAGEM, IE_TIPO_DOSAGEM, QT_DOSE_TERAP_MIN, CD_UNID_MED_TERAP_MIN,
        QT_VEL_INF_TERAP_MIN, IE_TIPO_DOSAGEM_MIN, QT_DOSE_TERAP_MAX,
        CD_UNID_MED_TERAP_MAX, QT_VEL_INF_TERAP_MAX, IE_TIPO_DOSAGEM_MAX,
        IE_BOMBA_INFUSAO, QT_VOL_DISPOSITIVO, IE_FATOR_CORRECAO, QT_PERIODO,
        QT_DOSE_MEDICAMENTO, QT_DOSE_SOL, QT_VOLUME_TOTAL, QT_CORRIGIDO_MEDIC,
        QT_CORRIGIDO_DIL, QT_TOTAL_CORRIGIDO, QT_DOSE_CONVERT,
        QT_DOSE_DIL_CONVERT
    )
    values (
        nextval('cpoe_calc_memoria_usada_seq'), NR_SEQ_MAT_CPOE_P, IE_PESO_P,
        trunc(QT_PESO_P,3), trunc(QT_ALTURA_P,2) , trunc(QT_SC_P,3), trunc(QT_IMC_P,3), CD_MATERIAL_P, trunc(QT_DOSE_P,6),
        CD_UNIDADE_MEDIDA_P, CD_MAT_DIL_P, trunc(QT_DOSE_DIL_P,6), CD_UNID_MED_DOSE_DIL_P,
        trunc(QT_CONCENTRACAO_FINAL_P,6), trunc(QT_FATOR_P,6), trunc(QT_DOSE_TOTAL_FIXO_P,6),
        IE_VOLUME_FIXO_P, trunc(QT_DOSE_TERAPEUTICA_P,6), CD_UNID_MED_DOSE_TERAPEUTICA_P,
        trunc(QT_DOSAGEM_P,6), IE_TIPO_DOSAGEM_P, trunc(QT_DOSE_TERAP_MIN_P,6),
        CD_UNID_MED_TERAP_MIN_P, trunc(QT_VEL_INF_TERAP_MIN_P,6), IE_TIPO_DOSAGEM_MIN_P,
        trunc(QT_DOSE_TERAP_MAX_P,6), CD_UNID_MED_TERAP_MAX_P, trunc(QT_VEL_INF_TERAP_MAX_P,6),
        IE_TIPO_DOSAGEM_MAX_P, IE_BOMBA_INFUSAO_P, trunc(QT_VOL_DISPOSITIVO_P,6),
        IE_FATOR_CORRECAO_P, trunc(QT_PERIODO_P,15), trunc(QT_DOSE_MEDICAMENTO_P,6), trunc(QT_DOSE_SOL_P,6),
        trunc(QT_VOLUME_TOTAL_P,6), trunc(QT_CORRIGIDO_MEDIC_P,6), trunc(QT_CORRIGIDO_DIL_P,6),
        trunc(QT_TOTAL_CORRIGIDO_P,6), trunc(QT_DOSE_CONVERT_P,6), trunc(QT_DOSE_DIL_CONVERT_P,6)
    );

    commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cpoe_ins_mem_calc ( NR_SEQ_MAT_CPOE_P cpoe_calc_memoria_usada.NR_SEQ_MAT_CPOE%type, IE_PESO_P cpoe_calc_memoria_usada.IE_PESO%type, QT_PESO_P cpoe_calc_memoria_usada.QT_PESO%type, QT_ALTURA_P cpoe_calc_memoria_usada.QT_ALTURA%type, QT_SC_P cpoe_calc_memoria_usada.QT_SC%type, QT_IMC_P cpoe_calc_memoria_usada.QT_IMC%type, CD_MATERIAL_P cpoe_calc_memoria_usada.CD_MATERIAL%type, QT_DOSE_P cpoe_calc_memoria_usada.QT_DOSE%type, CD_UNIDADE_MEDIDA_P cpoe_calc_memoria_usada.CD_UNIDADE_MEDIDA%type, CD_MAT_DIL_P cpoe_calc_memoria_usada.CD_MAT_DIL%type, QT_DOSE_DIL_P cpoe_calc_memoria_usada.QT_DOSE_DIL%type, CD_UNID_MED_DOSE_DIL_P cpoe_calc_memoria_usada.CD_UNID_MED_DOSE_DIL%type, QT_CONCENTRACAO_FINAL_P cpoe_calc_memoria_usada.QT_CONCENTRACAO_FINAL%type, QT_FATOR_P cpoe_calc_memoria_usada.QT_FATOR%type, QT_DOSE_TOTAL_FIXO_P cpoe_calc_memoria_usada.QT_DOSE_TOTAL_FIXO%type, IE_VOLUME_FIXO_P cpoe_calc_memoria_usada.IE_VOLUME_FIXO%type, QT_DOSE_TERAPEUTICA_P cpoe_calc_memoria_usada.QT_DOSE_TERAPEUTICA%type, CD_UNID_MED_DOSE_TERAPEUTICA_P cpoe_calc_memoria_usada.CD_UNID_MED_DOSE_TERAPEUTICA%type, QT_DOSAGEM_P cpoe_calc_memoria_usada.QT_DOSAGEM%type, IE_TIPO_DOSAGEM_P cpoe_calc_memoria_usada.IE_TIPO_DOSAGEM%type, QT_DOSE_TERAP_MIN_P cpoe_calc_memoria_usada.QT_DOSE_TERAP_MIN%type, CD_UNID_MED_TERAP_MIN_P cpoe_calc_memoria_usada.CD_UNID_MED_TERAP_MIN%type, QT_VEL_INF_TERAP_MIN_P cpoe_calc_memoria_usada.QT_VEL_INF_TERAP_MIN%type, IE_TIPO_DOSAGEM_MIN_P cpoe_calc_memoria_usada.IE_TIPO_DOSAGEM_MIN%type, QT_DOSE_TERAP_MAX_P cpoe_calc_memoria_usada.QT_DOSE_TERAP_MAX%type, CD_UNID_MED_TERAP_MAX_P cpoe_calc_memoria_usada.CD_UNID_MED_TERAP_MAX%type, QT_VEL_INF_TERAP_MAX_P cpoe_calc_memoria_usada.QT_VEL_INF_TERAP_MAX%type, IE_TIPO_DOSAGEM_MAX_P cpoe_calc_memoria_usada.IE_TIPO_DOSAGEM_MAX%type, IE_BOMBA_INFUSAO_P cpoe_calc_memoria_usada.IE_BOMBA_INFUSAO%type, QT_VOL_DISPOSITIVO_P cpoe_calc_memoria_usada.QT_VOL_DISPOSITIVO%type, IE_FATOR_CORRECAO_P cpoe_calc_memoria_usada.IE_FATOR_CORRECAO%type, QT_PERIODO_P cpoe_calc_memoria_usada.QT_PERIODO%type, QT_DOSE_MEDICAMENTO_P cpoe_calc_memoria_usada.QT_DOSE_MEDICAMENTO%type, QT_DOSE_SOL_P cpoe_calc_memoria_usada.QT_DOSE_SOL%type, QT_VOLUME_TOTAL_P cpoe_calc_memoria_usada.QT_VOLUME_TOTAL%type, QT_CORRIGIDO_MEDIC_P cpoe_calc_memoria_usada.QT_CORRIGIDO_MEDIC%type, QT_CORRIGIDO_DIL_P cpoe_calc_memoria_usada.QT_CORRIGIDO_DIL%type, QT_TOTAL_CORRIGIDO_P cpoe_calc_memoria_usada.QT_TOTAL_CORRIGIDO%type, QT_DOSE_CONVERT_P cpoe_calc_memoria_usada.QT_DOSE_CONVERT%type, QT_DOSE_DIL_CONVERT_P cpoe_calc_memoria_usada.QT_DOSE_DIL_CONVERT%type ) FROM PUBLIC;

