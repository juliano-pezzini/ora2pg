-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE call_interface_file ( nr_seq_event_p bigint, ds_json_function_p text, nm_usuario_p text) AS $body$
DECLARE

  ds_comando_w varchar(4000);
  ds_guampa_w  varchar(10) := chr(39);
  jobno        bigint;


BEGIN

  if (wheb_usuario_pck.is_evento_ativo(nr_seq_event_p) = 'S') then
    begin
        ds_comando_w := ' declare '|| 
                    '   begin '|| 
                    '   wheb_usuario_pck.set_cd_estabelecimento('||obter_estabelecimento_ativo||');' || 
                    '   wheb_usuario_pck.set_nm_usuario('||ds_guampa_w||nm_usuario_p||ds_guampa_w||');' ||ds_json_function_p|| 
                    '   end; ';
    dbms_job.submit(jobno,ds_comando_w);
    exception
    when others then
    	null;
    end;


  end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE call_interface_file ( nr_seq_event_p bigint, ds_json_function_p text, nm_usuario_p text) FROM PUBLIC;

