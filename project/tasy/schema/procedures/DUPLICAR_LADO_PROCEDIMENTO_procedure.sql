-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_lado_procedimento (nr_prescricao_p bigint) AS $body$
DECLARE

					
nr_prescricao_w		bigint;
nr_seq_w		bigint;
nr_seq_proced_w		integer;					
nr_seq_proc_cpoe_w prescr_procedimento.nr_seq_proc_cpoe%type;
nr_seq_ant_cpoe_w prescr_procedimento.nr_seq_proc_cpoe%type;		
nr_seq_nova_cpoe_w prescr_procedimento.nr_seq_proc_cpoe%type;	

C01 CURSOR FOR
	SELECT	nr_prescricao,
			nr_sequencia,
			coalesce(nr_seq_proc_cpoe,0)
	from	prescr_procedimento
	where	ie_lado = 'A'
	and	nr_prescricao = nr_prescricao_p;


BEGIN
nr_seq_proc_cpoe_w := 0;
nr_seq_ant_cpoe_w  := 0;

open C01;
loop
fetch C01 into	
	nr_prescricao_w,
	nr_seq_proced_w,
	nr_seq_proc_cpoe_w;
EXIT WHEN NOT FOUND; /* apply on C01 */
	begin
	update	prescr_procedimento
	set	ie_lado	= 'E'
	where	nr_prescricao = nr_prescricao_p
	and	nr_sequencia  = nr_seq_proced_w;

	select	max(nr_sequencia)+1
	into STRICT	nr_seq_w
	from	prescr_procedimento
	where	nr_prescricao = nr_prescricao_w;

	
	if (nr_seq_proc_cpoe_w > 0) and (nr_seq_proc_cpoe_w <> nr_seq_ant_cpoe_w) then	
	
	   	
		update cpoe_procedimento
		set	ie_lado	= 'E'
		where ie_lado = 'A'
		and nr_sequencia = nr_seq_proc_cpoe_w;
		   
			
		select nextval('cpoe_procedimento_seq')
		into STRICT	nr_seq_nova_cpoe_w
		;
			
		insert into cpoe_procedimento(
			NR_SEQUENCIA,
			CD_DEPARTAMENTO                                                                                                                 ,
			CD_FARMAC_LIB                                                                                                                   ,
			CD_FORNEC_CONSIGNADO1                                                                                                           ,
			CD_FORNEC_CONSIGNADO2                                                                                                           ,
			CD_FORNEC_CONSIGNADO3                                                                                                           ,
			CD_FORNEC_CONSIGNADO4                                                                                                           ,
			CD_FORNEC_CONSIGNADO5                                                                                                           ,
			CD_FUNCAO_ORIGEM                                                                                                                ,
			CD_INTERVALO                                                                                                                    ,
			CD_INTERV_PROC1                                                                                                                 ,
			CD_INTERV_PROC2                                                                                                                 ,
			CD_INTERV_PROC3                                                                                                                 ,
			CD_INTERV_PROC4                                                                                                                 ,
			CD_INTERV_PROC5                                                                                                                 ,
			CD_INTERV_PROC6                                                                                                                 ,
			CD_INTERV_PROC7                                                                                                                 ,
			CD_MEDICO                                                                                                                       ,
			CD_PERFIL_ATIVO                                                                                                                 ,
			CD_PESSOA_FISICA                                                                                                                ,
			CD_PROTOCOLO                                                                                                                    ,
			CD_SETOR_ATENDIMENTO                                                                                                            ,
			DS_DADO_CLINICO                                                                                                                 ,
			DS_HORARIOS                                                                                                                     ,
			DS_HORA_00                                                                                                                      ,
			DS_HORA_01                                                                                                                      ,
			DS_HORA_02                                                                                                                      ,
			DS_HORA_03                                                                                                                      ,
			DS_HORA_04                                                                                                                      ,
			DS_HORA_05                                                                                                                      ,
			DS_HORA_06                                                                                                                      ,
			DS_HORA_07                                                                                                                      ,
			DS_HORA_08                                                                                                                      ,
			DS_HORA_09                                                                                                                      ,
			DS_HORA_10                                                                                                                      ,
			DS_HORA_11                                                                                                                      ,
			DS_HORA_12                                                                                                                      ,
			DS_HORA_13                                                                                                                      ,
			DS_HORA_14                                                                                                                      ,
			DS_HORA_15                                                                                                                      ,
			DS_HORA_16                                                                                                                      ,
			DS_HORA_17                                                                                                                      ,
			DS_HORA_18                                                                                                                      ,
			DS_HORA_19                                                                                                                      ,
			DS_HORA_20                                                                                                                      ,
			DS_HORA_21                                                                                                                      ,
			DS_HORA_22                                                                                                                      ,
			DS_HORA_23                                                                                                                      ,
			DS_HOR_PROC1                                                                                                                    ,
			DS_HOR_PROC2                                                                                                                    ,
			DS_HOR_PROC3                                                                                                                    ,
			DS_HOR_PROC4                                                                                                                    ,
			DS_HOR_PROC5                                                                                                                    ,
			DS_HOR_PROC6                                                                                                                    ,
			DS_HOR_PROC7                                                                                                                    ,
			DS_JUSTIFICATIVA                                                                                                                ,
			DS_MATERIAL_ESPECIAL                                                                                                            ,
			DS_MOTIVO_SUSP                                                                                                                  ,
			DS_OBSER_PROC1                                                                                                                  ,
			DS_OBSER_PROC2                                                                                                                  ,
			DS_OBSER_PROC3                                                                                                                  ,
			DS_OBSER_PROC4                                                                                                                  ,
			DS_OBSER_PROC5                                                                                                                  ,
			DS_OBSER_PROC6                                                                                                                  ,
			DS_OBSER_PROC7                                                                                                                  ,
			DS_OBSERVACAO                                                                                                                   ,
			DS_OBSERVACAO_ENF                                                                                                               ,
			DS_STACK                                                                                                                        ,
			DT_ATUALIZACAO                                                                                                                  ,
			DT_ATUALIZACAO_NREC                                                                                                             ,
			DT_CIENCIA_MEDICO                                                                                                               ,
			DT_FIM                                                                                                                          ,
			DT_FIM_PROC1                                                                                                                    ,
			DT_FIM_PROC2                                                                                                                    ,
			DT_FIM_PROC3                                                                                                                    ,
			DT_FIM_PROC4                                                                                                                    ,
			DT_FIM_PROC5                                                                                                                    ,
			DT_FIM_PROC6                                                                                                                    ,
			DT_FIM_PROC7                                                                                                                    ,
			DT_INICIO                                                                                                                       ,
			DT_INICIO_PROC1                                                                                                                 ,
			DT_INICIO_PROC2                                                                                                                 ,
			DT_INICIO_PROC3                                                                                                                 ,
			DT_INICIO_PROC4                                                                                                                 ,
			DT_INICIO_PROC5                                                                                                                 ,
			DT_INICIO_PROC6                                                                                                                 ,
			DT_INICIO_PROC7                                                                                                                 ,
			DT_LIBERACAO                                                                                                                    ,
			DT_LIBERACAO_AUX                                                                                                                ,
			DT_LIBERACAO_ENF                                                                                                                ,
			DT_LIBERACAO_FARM                                                                                                               ,
			DT_LIBERACAO_FUT                                                                                                                ,
			DT_LIB_SUSPENSAO                                                                                                                ,
			DT_PREV_EXECUCAO                                                                                                                ,
			DT_PRIM_HORARIO                                                                                                                 ,
			DT_PRIM_HOR_PROC1                                                                                                               ,
			DT_PRIM_HOR_PROC2                                                                                                               ,
			DT_PRIM_HOR_PROC3                                                                                                               ,
			DT_PRIM_HOR_PROC4                                                                                                               ,
			DT_PRIM_HOR_PROC5                                                                                                               ,
			DT_PRIM_HOR_PROC6                                                                                                               ,
			DT_PRIM_HOR_PROC7                                                                                                               ,
			DT_PROX_GERACAO                                                                                                                 ,
			DT_SUSPENSAO                                                                                                                    ,
			HR_PRIM_HORARIO                                                                                                                ,
			HR_PRIM_HOR_PROC1                                                                                                              ,
			HR_PRIM_HOR_PROC2                                                                                                              ,
			HR_PRIM_HOR_PROC3                                                                                                              ,
			HR_PRIM_HOR_PROC4                                                                                                              ,
			HR_PRIM_HOR_PROC5                                                                                                              ,
			HR_PRIM_HOR_PROC6                                                                                                              ,
			HR_PRIM_HOR_PROC7                                                                                                              ,
			IE_ACM                                                                                                                         ,
			IE_ADEP                                                                                                                        ,
			IE_ADMINISTRACAO                                                                                                               ,
			IE_ANESTESIA                                                                                                                   ,
			IE_BAIXADO_POR_ALTA                                                                                                            ,
			IE_COBRA_PACIENTE                                                                                                              ,
			IE_CPOE_FARM                                                                                                                   ,
			IE_DURACAO                                                                                                                     ,
			IE_DUR_PROC1                                                                                                                   ,
			IE_DUR_PROC2                                                                                                                   ,
			IE_DUR_PROC3                                                                                                                   ,
			IE_DUR_PROC4                                                                                                                   ,
			IE_DUR_PROC5                                                                                                                   ,
			IE_DUR_PROC6                                                                                                                   ,
			IE_DUR_PROC7                                                                                                                   ,
			IE_EVENTO_UNICO                                                                                                                ,
			IE_EXAME_ASSOC                                                                                                                 ,
			IE_EXECUTAR_LEITO                                                                                                              ,
			IE_EXIGE_CIENCIA                                                                                                               ,
			IE_FORMA_GERACAO                                                                                                               ,
			IE_FORMA_SUSPENSAO                                                                                                             ,
			IE_FUTURO                                                                                                                      ,
			IE_INTERVENCAO_FARM                                                                                                            ,
			IE_ITEM_ALTA                                                                                                                   ,
			IE_ITEM_VALIDO                                                                                                                 ,
			IE_LADO                                                                                                                        ,
			IE_MOTIVO_PRESCRICAO                                                                                                           ,
			IE_NIVEL_ATENCAO                                                                                                               ,
			IE_ONCOLOGIA                                                                                                                   ,
			IE_PERIODO                                                                                                                     ,
			IE_PRESCRITOR_AUX                                                                                                              ,
			IE_RETROGRADO                                                                                                                  ,
			IE_SE_NECESSARIO                                                                                                               ,
			IE_TIPO_PRESCR_CIRUR                                                                                                            ,
			IE_URGENCIA                                                                                                                    ,
			NM_USUARIO                                                                                                                      ,
			NM_USUARIO_LIB_ENF                                                                                                              ,
			NM_USUARIO_LIB_FARM                                                                                                             ,
			NM_USUARIO_LIB_FUT                                                                                                              ,
			NM_USUARIO_NREC                                                                                                                 ,
			NM_USUARIO_SUSP                                                                                                                 ,
			NR_ATENDIMENTO                                                                                                                  ,
			NR_CIRURGIA                                                                                                                     ,
			NR_CIRURGIA_PATOLOGIA                                                                                                           ,
			NR_CPOE_INTERF_FARM                                                                                                             ,
			NR_OCORRENCIA                                                                                                                   ,
			NR_SEQ_AGENDA                                                                                                                   ,
			NR_SEQ_ASSINATURA                                                                                                               ,
			NR_SEQ_ASSINATURA_ENF                                                                                                           ,
			NR_SEQ_ASSINATURA_FARM                                                                                                          ,
			NR_SEQ_ASSINATURA_SUSP                                                                                                          ,
			NR_SEQ_AVALIACAO                                                                                                               ,
			NR_SEQ_CONCLUSAO_APAE                                                                                                           ,
			NR_SEQ_CONDICAO                                                                                                                 ,
			NR_SEQ_CONTRASTE                                                                                                                ,
			NR_SEQ_CPOE_ANTERIOR                                                                                                            ,
			NR_SEQ_LISTA_ESPERA                                                                                                             ,
			NR_SEQ_MOTIVO_SUSP                                                                                                              ,
			NR_SEQ_PEND_PAC_ACAO                                                                                                            ,
			NR_SEQ_PEPO                                                                                                                     ,
			NR_SEQ_PROC_INTERNO                                                                                                             ,
			NR_SEQ_PROC_PRINC                                                                                                               ,
			NR_SEQ_PROT_GLIC                                                                                                                ,
			NR_SEQ_PROTOCOLO                                                                                                                ,
			NR_SEQ_ROTINA                                                                                                                   ,
			NR_SEQ_ROTINA_ESPECIAL                                                                                                         ,
			NR_SEQ_SOAP                                                                                                                     ,
			NR_SEQ_TOPOGRAFIA                                                                                                               ,
			NR_SEQ_TRANSCRICAO                                                                                                              ,
			QT_PROCEDIMENTO                                                                                                                 ,
			IE_SEGUNDA																														,
			IE_TERCA																														,
			IE_QUARTA																														,
			IE_QUINTA																														,
			IE_SEXTA																														,
			IE_SABADO																														,
			IE_DOMINGO 																														)
			SELECT nr_seq_nova_cpoe_w,
			CD_DEPARTAMENTO                                                                                                                 ,
			CD_FARMAC_LIB                                                                                                                   ,
			CD_FORNEC_CONSIGNADO1                                                                                                           ,
			CD_FORNEC_CONSIGNADO2                                                                                                           ,
			CD_FORNEC_CONSIGNADO3                                                                                                           ,
			CD_FORNEC_CONSIGNADO4                                                                                                           ,
			CD_FORNEC_CONSIGNADO5                                                                                                           ,
			CD_FUNCAO_ORIGEM                                                                                                                ,
			CD_INTERVALO                                                                                                                    ,
			CD_INTERV_PROC1                                                                                                                 ,
			CD_INTERV_PROC2                                                                                                                 ,
			CD_INTERV_PROC3                                                                                                                 ,
			CD_INTERV_PROC4                                                                                                                 ,
			CD_INTERV_PROC5                                                                                                                 ,
			CD_INTERV_PROC6                                                                                                                 ,
			CD_INTERV_PROC7                                                                                                                 ,
			CD_MEDICO                                                                                                                       ,
			CD_PERFIL_ATIVO                                                                                                                 ,
			CD_PESSOA_FISICA                                                                                                                ,
			CD_PROTOCOLO                                                                                                                    ,
			CD_SETOR_ATENDIMENTO                                                                                                            ,
			DS_DADO_CLINICO                                                                                                                 ,
			DS_HORARIOS                                                                                                                     ,
			DS_HORA_00                                                                                                                      ,
			DS_HORA_01                                                                                                                      ,
			DS_HORA_02                                                                                                                      ,
			DS_HORA_03                                                                                                                      ,
			DS_HORA_04                                                                                                                      ,
			DS_HORA_05                                                                                                                      ,
			DS_HORA_06                                                                                                                      ,
			DS_HORA_07                                                                                                                      ,
			DS_HORA_08                                                                                                                      ,
			DS_HORA_09                                                                                                                      ,
			DS_HORA_10                                                                                                                      ,
			DS_HORA_11                                                                                                                      ,
			DS_HORA_12                                                                                                                      ,
			DS_HORA_13                                                                                                                      ,
			DS_HORA_14                                                                                                                      ,
			DS_HORA_15                                                                                                                      ,
			DS_HORA_16                                                                                                                      ,
			DS_HORA_17                                                                                                                      ,
			DS_HORA_18                                                                                                                      ,
			DS_HORA_19                                                                                                                      ,
			DS_HORA_20                                                                                                                      ,
			DS_HORA_21                                                                                                                      ,
			DS_HORA_22                                                                                                                      ,
			DS_HORA_23                                                                                                                      ,
			DS_HOR_PROC1                                                                                                                    ,
			DS_HOR_PROC2                                                                                                                    ,
			DS_HOR_PROC3                                                                                                                    ,
			DS_HOR_PROC4                                                                                                                    ,
			DS_HOR_PROC5                                                                                                                    ,
			DS_HOR_PROC6                                                                                                                    ,
			DS_HOR_PROC7                                                                                                                    ,
			DS_JUSTIFICATIVA                                                                                                                ,
			DS_MATERIAL_ESPECIAL                                                                                                            ,
			DS_MOTIVO_SUSP                                                                                                                  ,
			DS_OBSER_PROC1                                                                                                                  ,
			DS_OBSER_PROC2                                                                                                                  ,
			DS_OBSER_PROC3                                                                                                                  ,
			DS_OBSER_PROC4                                                                                                                  ,
			DS_OBSER_PROC5                                                                                                                  ,
			DS_OBSER_PROC6                                                                                                                  ,
			DS_OBSER_PROC7                                                                                                                  ,
			DS_OBSERVACAO                                                                                                                   ,
			DS_OBSERVACAO_ENF                                                                                                               ,
			DS_STACK                                                                                                                        ,
			DT_ATUALIZACAO                                                                                                                  ,
			DT_ATUALIZACAO_NREC                                                                                                             ,
			DT_CIENCIA_MEDICO                                                                                                               ,
			DT_FIM                                                                                                                          ,
			DT_FIM_PROC1                                                                                                                    ,
			DT_FIM_PROC2                                                                                                                    ,
			DT_FIM_PROC3                                                                                                                    ,
			DT_FIM_PROC4                                                                                                                    ,
			DT_FIM_PROC5                                                                                                                    ,
			DT_FIM_PROC6                                                                                                                    ,
			DT_FIM_PROC7                                                                                                                    ,
			DT_INICIO                                                                                                                       ,
			DT_INICIO_PROC1                                                                                                                 ,
			DT_INICIO_PROC2                                                                                                                 ,
			DT_INICIO_PROC3                                                                                                                 ,
			DT_INICIO_PROC4                                                                                                                 ,
			DT_INICIO_PROC5                                                                                                                 ,
			DT_INICIO_PROC6                                                                                                                 ,
			DT_INICIO_PROC7                                                                                                                 ,
			DT_LIBERACAO                                                                                                                    ,
			DT_LIBERACAO_AUX                                                                                                                ,
			DT_LIBERACAO_ENF                                                                                                                ,
			DT_LIBERACAO_FARM                                                                                                               ,
			DT_LIBERACAO_FUT                                                                                                                ,
			DT_LIB_SUSPENSAO                                                                                                                ,
			DT_PREV_EXECUCAO                                                                                                                ,
			DT_PRIM_HORARIO                                                                                                                 ,
			DT_PRIM_HOR_PROC1                                                                                                               ,
			DT_PRIM_HOR_PROC2                                                                                                               ,
			DT_PRIM_HOR_PROC3                                                                                                               ,
			DT_PRIM_HOR_PROC4                                                                                                               ,
			DT_PRIM_HOR_PROC5                                                                                                               ,
			DT_PRIM_HOR_PROC6                                                                                                               ,
			DT_PRIM_HOR_PROC7                                                                                                               ,
			DT_PROX_GERACAO                                                                                                                 ,
			DT_SUSPENSAO                                                                                                                    ,
			HR_PRIM_HORARIO                                                                                                                ,
			HR_PRIM_HOR_PROC1                                                                                                              ,
			HR_PRIM_HOR_PROC2                                                                                                              ,
			HR_PRIM_HOR_PROC3                                                                                                              ,
			HR_PRIM_HOR_PROC4                                                                                                              ,
			HR_PRIM_HOR_PROC5                                                                                                              ,
			HR_PRIM_HOR_PROC6                                                                                                              ,
			HR_PRIM_HOR_PROC7                                                                                                              ,
			IE_ACM                                                                                                                         ,
			IE_ADEP                                                                                                                        ,
			IE_ADMINISTRACAO                                                                                                               ,
			IE_ANESTESIA                                                                                                                   ,
			IE_BAIXADO_POR_ALTA                                                                                                            ,
			IE_COBRA_PACIENTE                                                                                                              ,
			IE_CPOE_FARM                                                                                                                   ,
			IE_DURACAO                                                                                                                     ,
			IE_DUR_PROC1                                                                                                                   ,
			IE_DUR_PROC2                                                                                                                   ,
			IE_DUR_PROC3                                                                                                                   ,
			IE_DUR_PROC4                                                                                                                   ,
			IE_DUR_PROC5                                                                                                                   ,
			IE_DUR_PROC6                                                                                                                   ,
			IE_DUR_PROC7                                                                                                                   ,
			IE_EVENTO_UNICO                                                                                                                ,
			IE_EXAME_ASSOC                                                                                                                 ,
			IE_EXECUTAR_LEITO                                                                                                              ,
			IE_EXIGE_CIENCIA                                                                                                               ,
			IE_FORMA_GERACAO                                                                                                               ,
			IE_FORMA_SUSPENSAO                                                                                                             ,
			IE_FUTURO                                                                                                                      ,
			IE_INTERVENCAO_FARM                                                                                                            ,
			IE_ITEM_ALTA                                                                                                                   ,
			IE_ITEM_VALIDO                                                                                                                 ,
			'D'                                                                                                                            , 
			IE_MOTIVO_PRESCRICAO                                                                                                           ,
			IE_NIVEL_ATENCAO                                                                                                               ,
			IE_ONCOLOGIA                                                                                                                   ,
			IE_PERIODO                                                                                                                     ,
			IE_PRESCRITOR_AUX                                                                                                              ,
			IE_RETROGRADO                                                                                                                  ,
			IE_SE_NECESSARIO                                                                                                               ,
			IE_TIPO_PRESCR_CIRUR                                                                                                           ,
			IE_URGENCIA                                                                                                                    ,
			NM_USUARIO                                                                                                                      ,
			NM_USUARIO_LIB_ENF                                                                                                              ,
			NM_USUARIO_LIB_FARM                                                                                                             ,
			NM_USUARIO_LIB_FUT                                                                                                              ,
			NM_USUARIO_NREC                                                                                                                 ,
			NM_USUARIO_SUSP                                                                                                                 ,
			NR_ATENDIMENTO                                                                                                                  ,
			NR_CIRURGIA                                                                                                                     ,
			NR_CIRURGIA_PATOLOGIA                                                                                                           ,
			NR_CPOE_INTERF_FARM                                                                                                             ,
			NR_OCORRENCIA                                                                                                                   ,
			NR_SEQ_AGENDA                                                                                                                   ,
			NR_SEQ_ASSINATURA                                                                                                               ,
			NR_SEQ_ASSINATURA_ENF                                                                                                           ,
			NR_SEQ_ASSINATURA_FARM                                                                                                          ,
			NR_SEQ_ASSINATURA_SUSP                                                                                                          ,
			NR_SEQ_AVALIACAO                                                                                                                ,
			NR_SEQ_CONCLUSAO_APAE                                                                                                           ,
			NR_SEQ_CONDICAO                                                                                                                 ,
			NR_SEQ_CONTRASTE                                                                                                                ,
			NR_SEQ_CPOE_ANTERIOR                                                                                                            ,
			NR_SEQ_LISTA_ESPERA                                                                                                             ,
			NR_SEQ_MOTIVO_SUSP                                                                                                              ,
			NR_SEQ_PEND_PAC_ACAO                                                                                                            ,
			NR_SEQ_PEPO                                                                                                                     ,
			NR_SEQ_PROC_INTERNO                                                                                                             ,
			nr_seq_proc_cpoe_w                                                                                                              ,
			NR_SEQ_PROT_GLIC                                                                                                                ,
			NR_SEQ_PROTOCOLO                                                                                                                ,
			NR_SEQ_ROTINA                                                                                                                   ,
			NR_SEQ_ROTINA_ESPECIAL                                                                                                          ,
			NR_SEQ_SOAP                                                                                                                     ,
			NR_SEQ_TOPOGRAFIA                                                                                                               ,
			NR_SEQ_TRANSCRICAO                                                                                                              ,
			QT_PROCEDIMENTO																													,
			IE_SEGUNDA																														,
			IE_TERCA																														,
			IE_QUARTA																														,
			IE_QUINTA																														,
			IE_SEXTA																														,
			IE_SABADO																														,
			IE_DOMINGO			
			from cpoe_procedimento
			where nr_sequencia = nr_seq_proc_cpoe_w;

		end if;
	
	insert into prescr_procedimento(
		nr_prescricao,
		nr_sequencia, 
		cd_procedimento, 
		qt_procedimento, 
		dt_atualizacao, 
		nm_usuario, 
		ds_horarios, 
		ds_observacao, 
		cd_motivo_baixa, 
		dt_baixa, 
		cd_procedimento_aih, 
		ie_origem_proced, 
		cd_intervalo, 
		ie_urgencia, 
		cd_setor_atendimento, 
		dt_emissao_setor_atend, 
		ds_dado_clinico, 
		dt_prev_execucao, 
		ie_suspenso, 
		cd_material_exame, 
		nr_seq_exame, 
		ds_material_especial, 
		ie_amostra, 
		ie_status_atend, 
		ie_origem_inf, 
		cd_setor_coleta, 
		cd_setor_entrega, 
		ie_emite_mapa, 
		dt_integracao, 
		dt_resultado, 
		ds_integracao, 
		ie_executar_leito, 
		cd_medico_exec, 
		nr_agrupamento, 
		ie_se_necessario, 
		ie_acm, 
		nr_ocorrencia, 
		ie_externo, 
		nr_seq_lote_externo, 
		ds_rotina, 
		ie_autorizacao, 
		ie_status_execucao, 
		nr_seq_interno, 
		dt_lib_imagem, 
		nr_seq_lab, 
		nm_usuario_baixa_esp, 
		nr_controle, 
		dt_coleta, 
		nr_seq_proc_interno, 
		nr_seq_derivado, 
		nr_seq_exame_sangue, 
		nr_seq_solic_sangue, 
		cd_unid_med_sangue, 
		qt_peca_ap, 
		ds_qualidade_peca_ap, 
		ds_diag_provavel_ap, 
		ds_exame_anterior_ap, 
		cd_pessoa_coleta, 
		dt_suspensao, 
		nm_usuario_susp, 
		ie_lado, 
		ie_erro, 
		nr_acesso_dicom, 
		ie_avisar_result, 
		cd_atividade_prof_bpa, 
		ie_grupo_atend_bpa, 
		ie_tipo_atend_bpa, 
		nr_seq_contraste, 
		cd_protocolo, 
		nr_seq_protocolo, 
		nr_seq_proc_protocolo, 
		ds_resumo_clinico, 
		ds_exame_fis_achado_cirur, 
		dt_result_integracao, 
		nr_seq_pq_proc, 
		dt_inicio_exame, 
		nr_seq_recoleta, 
		nr_doc_convenio, 
		cd_senha, 
		dt_antecipa_result, 
		cd_convenio, 
		cd_categoria, 
		qt_vol_hemocomp, 
		cd_motivo_suspensao, 
		qt_veloc_inf_hemo, 
		qt_volume_adep, 
		ie_status, 
		dt_status, 
		ie_cobra_paciente, 
		nr_seq_topografia, 
		ie_forma_infusao, 
		nr_seq_prot_glic, 
		ie_porte, 
		cd_tipo_cirurgia, 
		cd_setor_exec_inic, 
		cd_setor_exec_fim, 
		qt_volume_suspenso, 
		nr_etapas_suspensa, 
		ie_objetivo_onco, 
		ie_respiracao, 
		cd_mod_vent, 
		ie_disp_resp_esp, 
		qt_fluxo_oxigenio, 
		nr_seq_origem, 
		ds_observacao_enf, 
		qt_hora_intervalo, 
		qt_min_intervalo, 
		ie_util_hemocomponente, 
		dt_emissao_resultado, 
		ds_cor_erro, 
		nr_seq_motivo_antecipacao, 
		nm_usuario_antecipacao, 
		ds_observacao_antecipacao, 
		ds_obs_recoleta, 
		nr_seq_lab_ext, 
		ds_motivo_susp, 
		nr_controle_exame, 
		ie_exame_bloqueado, 
		qt_min_oxigenio, 
		cd_medico_solicitante, 
		qt_fio2, qt_freq_vent, 
		ie_unid_med_hemo, 
		ie_funcao_medico, 
		qt_etapa, 
		dt_status_previsto, 
		nr_seq_superior, 
		cd_motivo_baixa_exame, 
		ds_observacao_coleta, 
		cd_profissional, 
		ds_observacao_canc_exame, 
		nr_seq_repeticao, 
		ie_aliquotado, 
		ie_filtrado, 
		ie_irradiado, 
		ie_lavado, 
		ie_via_acesso, 
		ie_tipo_proced, 
		cd_perfil_ativo, 
		dt_chamada_exame, 
		nr_seq_regra_plano,
		nr_seq_proc_princ, 
		cd_cgc_laboratorio, 
		nr_seq_frasco, 
		dt_baixa_job, 
		ds_localizacao_lesao, 
		ds_tempo_doenca, 
		ie_controle_envelope, 
		nr_seq_status_pato, 
		ie_prioridade, 
		nr_seq_prioridade, 
		ie_proced_bloqueado, 
		ds_observacao_bloqueio, 
		ds_cor_selecao, 
		nr_seq_cor_erro, 
		nr_seq_assinatura, 
		ie_exige_liberacao, 
		cd_tipo_recomendacao, 
		ie_imagem_pacs, 
		dt_ult_dose_medic, 
		dt_reprovacao, 
		ds_justificativa_reprov, 
		ie_lavado_justificativa, 
		ie_via_aplicacao, 
		dt_integracao_suspenso, 
		dt_integracao_coleta, 
		qt_frasco_env, 
		qt_frasco_rec, 
		nr_seq_proced, 
		nr_seq_motivo_subst, 
		ds_justificativa_subst, 
		nm_usuario_substituicao, 
		nr_seq_exame_anterior, 
		ds_motivo_revisao, 
		nr_seq_condicao, 
		dt_substituicao, 
		ie_laudo_pato_cancer, 
		nr_seq_interf_farm, 
		nr_seq_agenda, 
		nr_seq_agenda_cons, 
		dt_geracao_arquivo, 
		dt_ciencia_laboratorio, 
		nr_seq_motivo_alt_status, 
		ds_justificativa, 
		ds_justificativa_alt, 
		nr_prescricao_original, 
		dt_cancelamento, 
		ie_descricao_cirurgica, 
		dt_suspensao_progr, 
		nr_seq_motivo_bloqueio, 
		ie_modificado, 
		ie_mostrar_web, 
		dt_chegada_paciente, 
		dt_inicio_preparo, 
		nr_seq_anterior, 
		ie_estendido,
		dt_extensao,
		nr_seq_proc_cpoe
	)
	SELECT  nr_prescricao, 
		nr_seq_w, 
		cd_procedimento, 
		qt_procedimento, 
		dt_atualizacao, 
		nm_usuario, 
		ds_horarios, 
		ds_observacao, 
		cd_motivo_baixa, 
		dt_baixa, 
		cd_procedimento_aih, 
		ie_origem_proced, 
		cd_intervalo, 
		ie_urgencia, 
		cd_setor_atendimento, 
		dt_emissao_setor_atend, 
		ds_dado_clinico, 
		dt_prev_execucao, 
		ie_suspenso, 
		cd_material_exame, 
		nr_seq_exame, 
		ds_material_especial, 
		ie_amostra, 
		ie_status_atend, 
		ie_origem_inf, 
		cd_setor_coleta, 
		cd_setor_entrega, 
		ie_emite_mapa, 
		null, 
		dt_resultado, 
		ds_integracao, 
		ie_executar_leito, 
		cd_medico_exec, 
		nr_agrupamento, 
		ie_se_necessario, 
		ie_acm, 
		nr_ocorrencia, 
		ie_externo, 
		nr_seq_lote_externo, 
		ds_rotina, 
		ie_autorizacao, 
		ie_status_execucao, 
		nextval('prescr_procedimento_seq'), 
		dt_lib_imagem, 
		nr_seq_lab, 
		nm_usuario_baixa_esp, 
		nr_controle, 
		dt_coleta, 
		nr_seq_proc_interno, 
		nr_seq_derivado, 
		nr_seq_exame_sangue, 
		nr_seq_solic_sangue, 
		cd_unid_med_sangue, 
		qt_peca_ap, 
		ds_qualidade_peca_ap, 
		ds_diag_provavel_ap, 
		ds_exame_anterior_ap, 
		cd_pessoa_coleta, 
		dt_suspensao, 
		nm_usuario_susp, 
		'D', 
		null, 
		null, 
		ie_avisar_result, 
		cd_atividade_prof_bpa, 
		ie_grupo_atend_bpa, 
		ie_tipo_atend_bpa, 
		nr_seq_contraste, 
		cd_protocolo, 
		nr_seq_protocolo, 
		nr_seq_proc_protocolo, 
		ds_resumo_clinico, 
		ds_exame_fis_achado_cirur, 
		dt_result_integracao, 
		nr_seq_pq_proc, 
		dt_inicio_exame, 
		nr_seq_recoleta, 
		nr_doc_convenio, 
		cd_senha, 
		dt_antecipa_result, 
		cd_convenio, 
		cd_categoria, 
		qt_vol_hemocomp, 
		cd_motivo_suspensao, 
		qt_veloc_inf_hemo, 
		qt_volume_adep, 
		ie_status, 
		dt_status, 
		ie_cobra_paciente, 
		nr_seq_topografia, 
		ie_forma_infusao, 
		nr_seq_prot_glic, 
		ie_porte, 
		cd_tipo_cirurgia, 
		cd_setor_exec_inic, 
		cd_setor_exec_fim, 
		qt_volume_suspenso, 
		nr_etapas_suspensa, 
		ie_objetivo_onco, 
		ie_respiracao, 
		cd_mod_vent, 
		ie_disp_resp_esp, 
		qt_fluxo_oxigenio, 
		nr_seq_origem, 
		ds_observacao_enf,
		qt_hora_intervalo, 
		qt_min_intervalo, 
		ie_util_hemocomponente, 
		dt_emissao_resultado, 
		ds_cor_erro, 
		nr_seq_motivo_antecipacao, 
		nm_usuario_antecipacao, 
		ds_observacao_antecipacao, 
		ds_obs_recoleta, 
		nr_seq_lab_ext, 
		ds_motivo_susp, 
		nr_controle_exame, 
		ie_exame_bloqueado, 
		qt_min_oxigenio, 
		cd_medico_solicitante, 
		qt_fio2, qt_freq_vent, 
		ie_unid_med_hemo, 
		ie_funcao_medico, 
		qt_etapa, 
		dt_status_previsto, 
		nr_seq_superior, 
		cd_motivo_baixa_exame, 
		ds_observacao_coleta, 
		cd_profissional, 
		ds_observacao_canc_exame, 
		nr_seq_repeticao, 
		ie_aliquotado, 
		ie_filtrado, 
		ie_irradiado, 
		ie_lavado, 
		ie_via_acesso, 
		ie_tipo_proced, 
		cd_perfil_ativo, 
		dt_chamada_exame, 
		nr_seq_regra_plano, 
		nr_seq_proc_princ, 
		cd_cgc_laboratorio, 
		nr_seq_frasco, 
		dt_baixa_job, 
		ds_localizacao_lesao, 
		ds_tempo_doenca, 
		ie_controle_envelope, 
		nr_seq_status_pato, 
		ie_prioridade, 
		nr_seq_prioridade, 
		ie_proced_bloqueado, 
		ds_observacao_bloqueio, 
		ds_cor_selecao, 
		nr_seq_cor_erro, 
		nr_seq_assinatura, 
		ie_exige_liberacao, 
		cd_tipo_recomendacao, 
		ie_imagem_pacs, 
		dt_ult_dose_medic, 
		dt_reprovacao, 
		ds_justificativa_reprov, 
		ie_lavado_justificativa, 
		ie_via_aplicacao, 
		dt_integracao_suspenso, 
		dt_integracao_coleta, 
		qt_frasco_env, 
		qt_frasco_rec, 
		nr_seq_proced, 
		nr_seq_motivo_subst, 
		ds_justificativa_subst, 
		nm_usuario_substituicao, 
		nr_seq_exame_anterior, 
		ds_motivo_revisao, 
		nr_seq_condicao, 
		dt_substituicao, 
		ie_laudo_pato_cancer, 
		nr_seq_interf_farm, 
		nr_seq_agenda, 
		nr_seq_agenda_cons, 
		dt_geracao_arquivo, 
		dt_ciencia_laboratorio, 
		nr_seq_motivo_alt_status, 
		ds_justificativa, 
		ds_justificativa_alt, 
		nr_prescricao_original, 
		dt_cancelamento, 
		ie_descricao_cirurgica, 
		dt_suspensao_progr, 
		nr_seq_motivo_bloqueio, 
		ie_modificado, 
		ie_mostrar_web, 
		dt_chegada_paciente, 
		dt_inicio_preparo, 
		nr_seq_anterior, 
		ie_estendido,
		dt_extensao,
		CASE WHEN nr_seq_nova_cpoe_w=0 THEN null  ELSE nr_seq_nova_cpoe_w END 
	from 	prescr_procedimento
	where 	nr_prescricao = nr_prescricao_w
	and	nr_sequencia = nr_seq_proced_w;
	
	nr_seq_ant_cpoe_w := nr_seq_proc_cpoe_w;
	
	if (coalesce(wheb_usuario_pck.get_ie_commit, 'S') = 'S') then commit; end if;
	end;
end loop;
close C01;

if (coalesce(wheb_usuario_pck.get_ie_commit, 'S') = 'S') then commit; end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_lado_procedimento (nr_prescricao_p bigint) FROM PUBLIC;

