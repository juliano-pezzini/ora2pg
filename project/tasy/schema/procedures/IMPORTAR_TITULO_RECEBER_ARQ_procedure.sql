-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE importar_titulo_receber_arq ( cd_estabelecimento_p bigint, nm_usuario_p text, dt_emissao_p timestamp, dt_vencimento_p timestamp, dt_contabil_p timestamp, vl_documento_p bigint, cd_moeda_p bigint, tx_juros_p bigint, tx_multa_p bigint, cd_tipo_taxa_juro_p bigint, cd_tipo_taxa_multa_p bigint, tx_desc_antecipacao_p bigint, cd_cgc_p text, nr_documento_p bigint, nm_pessoa_fisica_p text, nr_seq_classe_p bigint, cd_tipo_recebimento_p bigint) AS $body$
DECLARE


nr_seq_doc_w	integer;


BEGIN

select	max(nr_sequencia_doc)
into STRICT	nr_seq_doc_w
from	titulo_receber
where	cd_cgc		= cd_cgc_p
and	nr_documento	= nr_documento_p;


insert into titulo_receber(	nr_titulo,
				cd_estabelecimento,
				dt_atualizacao,
				nm_usuario,
				dt_emissao,
				dt_vencimento,
				dt_contabil,
				dt_pagamento_previsto,
				vl_titulo,
				vl_saldo_titulo,
				vl_saldo_juros,
				vl_saldo_multa,
				cd_moeda,
				cd_portador,
				cd_tipo_portador,
				tx_juros,
				tx_multa,
				cd_tipo_taxa_juro,
				cd_tipo_taxa_multa,
				tx_desc_antecipacao,
				ie_situacao,
				ie_tipo_emissao_titulo,
				ie_origem_titulo,
				ie_tipo_titulo,
				ie_tipo_inclusao,
				cd_cgc,
				nr_documento,
				cd_serie,
				nr_sequencia_doc,
				ds_observacao_titulo,
				nr_seq_classe,
				cd_tipo_recebimento)
values (	nextval('titulo_seq'),
				cd_estabelecimento_p,
				clock_timestamp(),
				nm_usuario_p,
				dt_emissao_p,
				dt_vencimento_p,
				dt_contabil_p,
				dt_vencimento_p,
				vl_documento_p,
				vl_documento_p,
				0,
				0,
				cd_moeda_p,
				0,
				0,
				tx_juros_p,
				tx_multa_p,
				cd_tipo_taxa_juro_p,
				cd_tipo_taxa_multa_p,
				tx_desc_antecipacao_p,
				'1',
				1,
				9,
				5,
				2,
				cd_cgc_p,
				nr_documento_p,
				'GUIA',
				nr_seq_doc_w,
				nm_pessoa_fisica_p,
				nr_seq_classe_p,
				cd_tipo_recebimento_p);

commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE importar_titulo_receber_arq ( cd_estabelecimento_p bigint, nm_usuario_p text, dt_emissao_p timestamp, dt_vencimento_p timestamp, dt_contabil_p timestamp, vl_documento_p bigint, cd_moeda_p bigint, tx_juros_p bigint, tx_multa_p bigint, cd_tipo_taxa_juro_p bigint, cd_tipo_taxa_multa_p bigint, tx_desc_antecipacao_p bigint, cd_cgc_p text, nr_documento_p bigint, nm_pessoa_fisica_p text, nr_seq_classe_p bigint, cd_tipo_recebimento_p bigint) FROM PUBLIC;

