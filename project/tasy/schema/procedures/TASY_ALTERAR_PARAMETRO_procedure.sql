-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_alterar_parametro () AS $body$
DECLARE


cd_funcao_w				integer;
nr_sequencia_w			integer;
ds_parametro_w			varchar(255);
cd_dominio_w			integer;
vl_parametro_padrao_w 	varchar(255);
ds_observacao_w			varchar(255);
nr_seq_apresentacao_w	integer;
ie_nivel_liberacao_w	varchar(3);
ds_dependencia_w		varchar(255);
nr_seq_agrup_w			bigint;
ds_sql_w				varchar(2000);
nr_seq_localizador_w	bigint;

ds_comando_w			varchar(2000);
c001					integer;
retorno_w				integer;

BEGIN

ds_comando_w := ''||
		' select	a.cd_funcao,'||
		'			a.nr_sequencia,'||
		'			a.ds_parametro,'||
		'			a.cd_dominio,'||
		'			a.vl_parametro_padrao,'||
		'			a.ds_observacao,'||
		'			a.nr_seq_apresentacao,'||
		'			a.ie_nivel_liberacao,'||
		'			a.ds_dependencia,'||
		'			a.nr_seq_agrup,'||
		'			a.ds_sql,'||
		'			a.nr_seq_localizador'||
		' from		tasy_versao.funcao_parametro a'||
		' where		a.dt_atualizacao >= (select 	obter_data_geracao_versao'||
		'								from	dual) ';


C001 := DBMS_SQL.OPEN_CURSOR;
DBMS_SQL.PARSE(C001, ds_comando_w, dbms_sql.Native);
DBMS_SQL.DEFINE_COLUMN(c001,1,cd_funcao_w);
DBMS_SQL.DEFINE_COLUMN(c001,2,nr_sequencia_w);
DBMS_SQL.DEFINE_COLUMN(c001,3,ds_parametro_w,255);
DBMS_SQL.DEFINE_COLUMN(c001,4,cd_dominio_w);
DBMS_SQL.DEFINE_COLUMN(c001,5,vl_parametro_padrao_w,255);
DBMS_SQL.DEFINE_COLUMN(c001,6,ds_observacao_w,255);
DBMS_SQL.DEFINE_COLUMN(c001,7,nr_seq_apresentacao_w);
DBMS_SQL.DEFINE_COLUMN(c001,8,ie_nivel_liberacao_w,3);
DBMS_SQL.DEFINE_COLUMN(c001,9,ds_dependencia_w,255);
DBMS_SQL.DEFINE_COLUMN(c001,10,nr_seq_agrup_w);
DBMS_SQL.DEFINE_COLUMN(c001,11,ds_sql_w,2000);
DBMS_SQL.DEFINE_COLUMN(c001,12,nr_seq_localizador_w);
retorno_w := DBMS_SQL.execute(c001);

while( DBMS_SQL.FETCH_ROWS(C001) > 0 ) loop
	DBMS_SQL.COLUMN_VALUE(c001,1,cd_funcao_w);
	DBMS_SQL.COLUMN_VALUE(c001,2,nr_sequencia_w);
	DBMS_SQL.COLUMN_VALUE(c001,3,ds_parametro_w);
	DBMS_SQL.COLUMN_VALUE(c001,4,cd_dominio_w);
	DBMS_SQL.COLUMN_VALUE(c001,5,vl_parametro_padrao_w);
	DBMS_SQL.COLUMN_VALUE(c001,6,ds_observacao_w);
	DBMS_SQL.COLUMN_VALUE(c001,7,nr_seq_apresentacao_w);
	DBMS_SQL.COLUMN_VALUE(c001,8,ie_nivel_liberacao_w);
	DBMS_SQL.COLUMN_VALUE(c001,9,ds_dependencia_w);
	DBMS_SQL.COLUMN_VALUE(c001,10,nr_seq_agrup_w);
	DBMS_SQL.COLUMN_VALUE(c001,11,ds_sql_w);
	DBMS_SQL.COLUMN_VALUE(c001,12,nr_seq_localizador_w);

	update	funcao_parametro
	set		ds_parametro		= ds_parametro_w,
			cd_dominio			= cd_dominio_w,
			vl_parametro_padrao	= vl_parametro_padrao_w,
			ds_observacao		= ds_observacao_w,
			nr_seq_apresentacao = nr_seq_apresentacao_w,
			ie_nivel_liberacao	= ie_nivel_liberacao_w,
			ds_dependencia		= ds_dependencia_w,
			nr_seq_agrup		= nr_seq_agrup_w,
			ds_sql				= ds_sql_w,
			nr_seq_localizador	= nr_seq_localizador_w
	where	cd_funcao 			= cd_funcao_w
	and		nr_sequencia 		= nr_sequencia_w;

	commit;

END LOOP;
DBMS_SQL.CLOSE_CURSOR(C001);

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_alterar_parametro () FROM PUBLIC;

