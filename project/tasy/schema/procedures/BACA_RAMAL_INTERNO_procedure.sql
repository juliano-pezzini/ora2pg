-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE baca_ramal_interno () AS $body$
DECLARE


Retorno_w		varchar(255);


BEGIN

retorno_w := Obter_Valor_Dinamico('CREATE sequence RAMAL_INTERNO_SEQ Increment by 1 Start With 1 ' ||
	'MaxValue 9999999999 cycle Cache 10', retorno_w);

retorno_w := Obter_Valor_Dinamico('alter table RAMAL_INTERNO add nr_sequencia Number(10,0)', retorno_w);

retorno_w := Obter_Valor_Dinamico('update	RAMAL_INTERNO
	set	nr_sequencia = RAMAL_INTERNO_seq.nextval', retorno_w);

commit;

retorno_w := Obter_Valor_Dinamico('ALTER TABLE RAMAL_INTERNO drop constraint RAMINTE_PK', retorno_w);

retorno_w := Obter_Valor_Dinamico('ALTER TABLE RAMAL_INTERNO ADD
	(
	      CONSTRAINT RAMINTE_PK Primary Key  (
	               NR_SEQUENCIA)
	USING INDEX   Tablespace TASY_INDEX)', retorno_w);


RETORNO_W := Obter_Valor_Dinamico('CREATE TABLE W_RAMAL_INTERNO AS (SELECT * FROM RAMAL_INTERNO)', RETORNO_W);

RETORNO_W := Obter_Valor_Dinamico('TRUNCATE TABLE RAMAL_INTERNO', RETORNO_W);

retorno_w := Obter_Valor_Dinamico('ALTER TABLE RAMAL_INTERNO modify (cd_ramal	varchar2(20)) ', retorno_w);

retorno_w := Obter_Valor_Dinamico('insert into RAMAL_INTERNO select * from W_RAMAL_INTERNO', retorno_w);

commit;

retorno_w := Obter_Valor_Dinamico('drop table W_RAMAL_INTERNO', retorno_w);

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE baca_ramal_interno () FROM PUBLIC;

