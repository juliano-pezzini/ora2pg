-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE modificar_valor_glicemia (nr_seq_registro_p bigint, qt_valor_p bigint, ie_valor_p text, ds_observacao_p text, nm_usuario_p text, qt_valor_int_p bigint default null) AS $body$
BEGIN
if (nr_seq_registro_p IS NOT NULL AND nr_seq_registro_p::text <> '') and (qt_valor_p IS NOT NULL AND qt_valor_p::text <> '') and (ie_valor_p IS NOT NULL AND ie_valor_p::text <> '') and (nm_usuario_p IS NOT NULL AND nm_usuario_p::text <> '') then 
	if (ie_valor_p = 'B') then 
		CALL registrar_bolus_glicemia(nr_seq_registro_p, qt_valor_p, ds_observacao_p, nm_usuario_p);
	elsif (ie_valor_p = 'V') then 
		CALL registrar_velocidade_glicemia(nr_seq_registro_p, qt_valor_p, ds_observacao_p, nm_usuario_p);
	elsif (ie_valor_p = 'G') then 
		CALL registrar_glicose_glicemia(nr_seq_registro_p, qt_valor_p, ds_observacao_p, nm_usuario_p);
	elsif (ie_valor_p = 'I') then 
		CALL modificar_interv_medicao_cig(nr_seq_registro_p, qt_valor_p, ds_observacao_p, nm_usuario_p);
	elsif (ie_valor_p = 'P') then 
		CALL modificar_insulina_prot_glic(nr_seq_registro_p, qt_valor_p, qt_valor_int_p, ds_observacao_p, nm_usuario_p);
	elsif (ie_valor_p = 'GG') then 
		CALL modificar_glicose_prot_glic(nr_seq_registro_p, qt_valor_p, ds_observacao_p, nm_usuario_p);
	end if;
end if;
 
commit;
 
end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE modificar_valor_glicemia (nr_seq_registro_p bigint, qt_valor_p bigint, ie_valor_p text, ds_observacao_p text, nm_usuario_p text, qt_valor_int_p bigint default null) FROM PUBLIC;

