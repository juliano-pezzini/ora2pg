-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE enviar_pdf_hl7 ( nr_atendimento_p bigint, cd_pessoa_fisica_p text, cd_setor_atendimento_p bigint, ds_endereco_pdf_p text) AS $body$
DECLARE



ds_sep_bv_w					varchar(100) := obter_separador_bv;
ds_param_integ_hl7_w		varchar(4000);
sqlerm_w					varchar(4000);


BEGIN

if (nr_atendimento_p > 0 ) and (ds_endereco_pdf_p IS NOT NULL AND ds_endereco_pdf_p::text <> '') then
	begin
	ds_param_integ_hl7_w := 'cd_pessoa_fisica=' || cd_pessoa_fisica_p || ds_sep_bv_w ||
							'nr_atendimento='   || nr_atendimento_p || ds_sep_bv_w ||
							'ds_endereco_pdf='  || ds_endereco_pdf_p || ds_sep_bv_w;
	CALL gravar_agend_integracao(510, ds_param_integ_hl7_w, cd_setor_atendimento_p);
	exception
		when others then
		null;
	end;

end if;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE enviar_pdf_hl7 ( nr_atendimento_p bigint, cd_pessoa_fisica_p text, cd_setor_atendimento_p bigint, ds_endereco_pdf_p text) FROM PUBLIC;

