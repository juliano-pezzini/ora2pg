-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE duplicar_rxt_planejamento ( NR_SEQ_PLANEJ_FIS_P bigint, NM_USUARIO_P text, NR_SEQ_PLANEJ_P INOUT bigint) AS $body$
DECLARE



nr_seq_planejamento_w	bigint;


BEGIN
if (nr_seq_planej_fis_p IS NOT NULL AND nr_seq_planej_fis_p::text <> '') then

	select 	nextval('rxt_planejamento_fisico_seq')
	into STRICT nr_seq_planejamento_w
	;

	insert into rxt_planejamento_fisico(
		nr_sequencia,
		cd_estabelecimento,
		dt_atualizacao,
		nm_usuario,
		dt_atualizacao_nrec,
		nm_usuario_nrec,
		nr_seq_fase,
		qt_x1,
		qt_x2,
		qt_y1,
		qt_y2,
		qt_angulo_gantry,
		qt_angulo_colimador,
		qt_angulo_mesa_x,
		qt_angulo_mesa_y,
		qt_angulo_mesa_z,
		ds_tamanho_campo,
		qt_campo_equivalente,
		qt_distancia_isocentro,
		qt_dose_tumor_real,
		qt_dose_tumor_diaria,
		qt_numero_aplicacoes,
		qt_profundidade,
		qt_percent_dose_profunda,
		qt_tmr,
		qt_rendimento_final,
		qt_abertura_colimador,
		qt_fator_retroespalhamento,
		qt_fator_filtro,
		qt_fator_distancia,
		qt_diametro_antero_post,
		qt_latero_lateral,
		qt_distancia_mesa_centro,
		qt_unidade_monitor,
		nr_seq_campo,
		qt_fator_bandeja,
		qt_tam_x,
		qt_tam_y,
		ie_tipo_x,
		ie_tipo_y
	)
	SELECT	nr_seq_planejamento_w,
		cd_estabelecimento,
		clock_timestamp(),
		nm_usuario_p,
		clock_timestamp(),
		nm_usuario_p,
		nr_seq_fase,
		qt_x1,
		qt_x2,
		qt_y1,
		qt_y2,
		qt_angulo_gantry,
		qt_angulo_colimador,
		qt_angulo_mesa_x,
		qt_angulo_mesa_y,
		qt_angulo_mesa_z,
		ds_tamanho_campo,
		qt_campo_equivalente,
		qt_distancia_isocentro,
		qt_dose_tumor_real,
		qt_dose_tumor_diaria,
		qt_numero_aplicacoes,
		qt_profundidade,
		qt_percent_dose_profunda,
		qt_tmr,
		qt_rendimento_final,
		qt_abertura_colimador,
		qt_fator_retroespalhamento,
		qt_fator_filtro,
		qt_fator_distancia,
		qt_diametro_antero_post,
		qt_latero_lateral,
		qt_distancia_mesa_centro,
		qt_unidade_monitor,
		nr_seq_campo,
		qt_fator_bandeja,
		qt_tam_x,
		qt_tam_y,
		ie_tipo_x,
		ie_tipo_y
	from	rxt_planejamento_fisico
	where	nr_sequencia = nr_seq_planej_fis_p;
end if;
nr_seq_planej_p := nr_seq_planejamento_w;
commit;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE duplicar_rxt_planejamento ( NR_SEQ_PLANEJ_FIS_P bigint, NM_USUARIO_P text, NR_SEQ_PLANEJ_P INOUT bigint) FROM PUBLIC;

