-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE incluir_solic_laudo_externo ( nr_prescricao_p bigint, nr_seq_prescr_p bigint, nm_usuario_p text, cd_medico_solic_p text, cd_medico_laudo_p text, ds_observacao_p text, dt_registro_p timestamp, nr_telefone_p text) AS $body$
DECLARE


nr_sequencia_w	bigint;


BEGIN

select	nextval('laudo_paciente_reg_result_seq')
into STRICT	nr_sequencia_w
;

insert into laudo_paciente_reg_result(
									nr_sequencia,
									nr_prescricao,
									nr_seq_prescr,
									dt_atualizacao,
									dt_atualizacao_nrec,
									nm_usuario,
									nm_usuario_nrec,
									cd_medico_solic,
									cd_medico,
									ds_observacao,
									dt_registro,
									nr_telefone,
									ie_situacao)
		values (
									nr_sequencia_w,
									substr(nr_prescricao_p,1,14),
									substr(nr_seq_prescr_p,1,6),
									clock_timestamp(),
									clock_timestamp(),
									substr(nm_usuario_p,1,15),
									substr(nm_usuario_p,1,15),
									substr(cd_medico_solic_p,1,10),
									substr(cd_medico_laudo_p,1,10),
									substr(ds_observacao_p,1,255),
									dt_registro_p,
									substr(nr_telefone_p,1,30),
									'S');



commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE incluir_solic_laudo_externo ( nr_prescricao_p bigint, nr_seq_prescr_p bigint, nm_usuario_p text, cd_medico_solic_p text, cd_medico_laudo_p text, ds_observacao_p text, dt_registro_p timestamp, nr_telefone_p text) FROM PUBLIC;

