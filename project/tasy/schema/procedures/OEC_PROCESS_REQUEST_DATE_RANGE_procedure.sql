-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE oec_process_request_date_range () AS $body$
DECLARE


request_sts 		varchar(2000);
return_w    		text;
start_date_w 		timestamp :=(clock_timestamp() - interval '1 days');
start_date_text_w	varchar(50);
end_date_text_w 	varchar(50);
end_date_w 		timestamp :=(clock_timestamp());


BEGIN

select (replace(TO_CHAR(start_date_w, 'yyyy-mm-dd HH24:MI:SS'),' ','T' ) || '.000+10:00'),
        (replace(TO_CHAR(end_date_w, 'yyyy-mm-dd HH24:MI:SS'),' ','T' ) || '.000+10:00')
into STRICT  start_date_text_w,end_date_text_w
;

request_sts :=  '{' || chr(10) ||'"receivedFromDateTime":"' || start_date_text_w || '"' || chr(10)
                ||', "receivedToDateTime":"'|| end_date_text_w ||
                '"'|| chr(10) || ', "userName":"system"'|| chr(10) || '}';

return_w := BIFROST.SEND_INTEGRATION_CONTENT('eclipse.oec.sts.event', request_sts, 'system');

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE oec_process_request_date_range () FROM PUBLIC;

