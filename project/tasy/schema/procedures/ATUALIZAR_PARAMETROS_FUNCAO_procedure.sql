-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE atualizar_parametros_funcao () AS $body$
DECLARE


ds_parametro_w	varchar(255);
cd_funcao_w	integer;
nr_sequencia_w	integer;
retorno_w	integer;
c01	  	integer;
ds_comando_w	varchar(2000);
i		integer	:= 0;


BEGIN

ds_comando_w :=	' select	ds_parametro,	' ||
		'		cd_funcao,	' ||
		'		nr_sequencia	' ||
		' from		tasy_versao.funcao_parametro ';

C01 := DBMS_SQL.OPEN_CURSOR;
DBMS_SQL.PARSE(C01, ds_comando_w, dbms_sql.Native);
DBMS_SQL.DEFINE_COLUMN(C01, 1, ds_parametro_w, 255);
DBMS_SQL.DEFINE_COLUMN(C01, 2, cd_funcao_w);
DBMS_SQL.DEFINE_COLUMN(C01, 3, nr_sequencia_w);

retorno_w := DBMS_SQL.execute(C01);

while( DBMS_SQL.FETCH_ROWS(C01) > 0 ) loop
	DBMS_SQL.COLUMN_VALUE(C01, 1, ds_parametro_w);
	DBMS_SQL.COLUMN_VALUE(C01, 2, cd_funcao_w);
	DBMS_SQL.COLUMN_VALUE(C01, 3, nr_sequencia_w);

	update	funcao_parametro
	set	ds_parametro	= ds_parametro_w
	where	cd_funcao	= cd_funcao_w
	and	nr_sequencia	= nr_sequencia_w;

	if (i > 1000) then
		COMMIT;
		i	:= 0;
	else
		i	:= i + 1;
	end	if;
END LOOP;

DBMS_SQL.CLOSE_CURSOR(C01);

COMMIT;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE atualizar_parametros_funcao () FROM PUBLIC;

