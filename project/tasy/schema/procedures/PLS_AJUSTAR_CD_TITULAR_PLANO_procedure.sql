-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE pls_ajustar_cd_titular_plano () AS $body$
BEGIN

CALL exec_sql_dinamico('tasy', ' alter table ptu_mov_produto_benef add (CD_TITULAR_PLANO2 varchar2(30)) ');

CALL exec_sql_dinamico('tasy', ' update ptu_mov_produto_benef set CD_TITULAR_PLANO2 = CD_TITULAR_PLANO where CD_TITULAR_PLANO is not null ');

CALL exec_sql_dinamico('tasy', ' update ptu_mov_produto_benef set CD_TITULAR_PLANO = null where CD_TITULAR_PLANO is not null ');

commit;

CALL exec_sql_dinamico('tasy', ' alter table ptu_mov_produto_benef modify (CD_TITULAR_PLANO varchar2(30)) ');

CALL exec_sql_dinamico('tasy', ' update ptu_mov_produto_benef set CD_TITULAR_PLANO = CD_TITULAR_PLANO2 where CD_TITULAR_PLANO2 is not null ');

commit;

CALL exec_sql_dinamico('tasy', ' alter table ptu_mov_produto_benef drop column CD_TITULAR_PLANO2; ');

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE pls_ajustar_cd_titular_plano () FROM PUBLIC;

