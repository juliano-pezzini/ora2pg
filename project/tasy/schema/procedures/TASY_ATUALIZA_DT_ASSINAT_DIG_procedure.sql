-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE tasy_atualiza_dt_assinat_dig ( nr_sequencia_p bigint, dt_assinatura_p timestamp, ie_atualizou_p INOUT text) AS $body$
BEGIN
	ie_atualizou_p := 'N';

	BEGIN
		UPDATE tasy_assinatura_digital
		SET dt_assinatura = CASE WHEN dt_assinatura_p = NULL THEN  clock_timestamp()  ELSE dt_assinatura_p END
		WHERE nr_sequencia = nr_sequencia_p;

		ie_atualizou_p := 'S';

		COMMIT;

	EXCEPTION
		WHEN OTHERS THEN
			NULL;
	END;

END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE tasy_atualiza_dt_assinat_dig ( nr_sequencia_p bigint, dt_assinatura_p timestamp, ie_atualizou_p INOUT text) FROM PUBLIC;

