-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';





CREATE OR REPLACE PROCEDURE cpoe_integracao_update ( nr_sequence_p bigint, ie_item_type_cpoe_p text, nm_usuario_p text) AS $body$
BEGIN

	if (ie_item_type_cpoe_p = 'N') then /*Nutrition*/
		update  cpoe_integracao
		set     dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_diet_cpoe = 	nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'M') then /*Medicine*/
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_mat_cpoe =   nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'DI') then /*Dialysis*/
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where   nr_seq_dial_cpoe =  nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'P') then /*Procedure*/
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_proc_cpoe =  nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'G') then /*Gas therapy*/
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_gaso_cpoe =  nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'R') then /*Recomendation*/
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_rec_cpoe =   nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'H') then /*Hemotherapy*/
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_hemo_cpoe =  nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'MA') then /*Material*/
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_mat_cpoe =   nr_sequence_p;
	elsif (ie_item_type_cpoe_p = 'AP') then
		update	cpoe_integracao
		set		  dt_ack_interface =  clock_timestamp(),
				    nm_ack_interface =  nm_usuario_p
		where 	nr_seq_mat_cpoe =   nr_sequence_p;
	end if;

  commit;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE cpoe_integracao_update ( nr_sequence_p bigint, ie_item_type_cpoe_p text, nm_usuario_p text) FROM PUBLIC;

