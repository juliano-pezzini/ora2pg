-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS repasse_terc_venc_trib_update ON repasse_terc_venc_trib CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_repasse_terc_venc_trib_update() RETURNS trigger AS $BODY$
declare

BEGIN

if (NEW.VL_IMPOSTO <> OLD.VL_IMPOSTO) or (NEW.VL_BASE_CALCULO <> OLD.VL_BASE_CALCULO) or (NEW.PR_TRIBUTO <> OLD.PR_TRIBUTO) or (NEW.VL_DESC_BASE <> OLD.VL_DESC_BASE) or (NEW.VL_NAO_RETIDO <> OLD.VL_NAO_RETIDO) or (NEW.VL_BASE_NAO_RETIDO <> OLD.VL_BASE_NAO_RETIDO) or (NEW.VL_TRIB_ADIC <> OLD.VL_TRIB_ADIC) or (NEW.VL_BASE_ADIC <> OLD.VL_BASE_ADIC) or (NEW.VL_REDUCAO <> OLD.VL_REDUCAO) then
	null;
	/*insert into logxxxx_tasy
			(DT_ATUALIZACAO,
			NM_USUARIO,
			CD_LOG,
			DS_LOG)
	values		(sysdate,
			 'SQLPLUS',
			 55712,
			'Seq. trib: ' || :new.nr_sequencia || chr(13) ||
			'Tributo: ' || :new.CD_TRIBUTO || chr(13) ||
			':new.VL_IMPOSTO = ' || 	:new.VL_IMPOSTO 	|| ' :old.VL_IMPOSTO = ' 	|| :old.VL_IMPOSTO || chr(13) ||
			':new.VL_BASE_CALCULO = ' || 	:new.VL_BASE_CALCULO 	|| ' :old.VL_BASE_CALCULO = ' 	|| :old.VL_BASE_CALCULO || chr(13) ||
			':new.PR_TRIBUTO = ' || 	:new.PR_TRIBUTO		|| ' :old.PR_TRIBUTO = ' 	|| :old.PR_TRIBUTO || chr(13) ||
			':new.VL_DESC_BASE = ' || 	:new.VL_DESC_BASE 	|| ' :old.VL_DESC_BASE = ' 	|| :old.VL_DESC_BASE || chr(13) ||
			':new.VL_NAO_RETIDO = ' || :new.VL_NAO_RETIDO	|| ' :old.VL_NAO_RETIDO = '|| :old.VL_NAO_RETIDO || chr(13) ||
			':new.VL_BASE_NAO_RETIDO = ' || :new.VL_BASE_NAO_RETIDO	|| ' :old.VL_BASE_NAO_RETIDO = '|| :old.VL_BASE_NAO_RETIDO || chr(13) ||
			':new.VL_TRIB_ADIC = ' || 	:new.VL_TRIB_ADIC	|| ' :old.VL_TRIB_ADIC = ' 	|| :old.VL_TRIB_ADIC || chr(13) ||
			':new.VL_BASE_ADIC = ' ||	:new.VL_BASE_ADIC	|| ' :old.VL_BASE_ADIC = ' 	|| :old.VL_BASE_ADIC || chr(13) ||
			':new.VL_REDUCAO = ' ||		:new.VL_REDUCAO		|| ' :old.VL_REDUCAO = ' 	|| :old.VL_REDUCAO);*/
end if;

RETURN NEW;
end
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_repasse_terc_venc_trib_update() FROM PUBLIC;

CREATE TRIGGER repasse_terc_venc_trib_update
	AFTER UPDATE ON repasse_terc_venc_trib FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_repasse_terc_venc_trib_update();

