-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS escala_asia_atual ON escala_asia CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_escala_asia_atual() RETURNS trigger AS $BODY$
declare
  EXEC_w                  varchar(4000);
  qt_reg_w	              smallint;
  QT_PONT_MOTOR_SUP_R_W   integer;
  QT_PONT_MOTOR_SUP_L_W   integer;
  QT_PONT_MOTOR_SUP_W     integer;
  QT_PONT_MOTOR_INF_R_W   integer;
  QT_PONT_MOTOR_INF_L_W   integer;
  QT_PONT_MOTOR_INF_W     integer;
  QT_PONT_AGU_TOQ_R_W     integer;
  QT_PONT_AGU_TOQ_L_W     integer;
  QT_PONT_AGU_TOQ_W       integer;
  QT_PONT_SENS_TOQ_R_W    integer;
  QT_PONT_SENS_TOQ_L_W    integer;
  QT_PONT_SENS_TOQ_W      integer;
BEGIN
  BEGIN
  if (wheb_usuario_pck.get_ie_executar_trigger	= 'N')  then
    goto Final;
  end if;

  BEGIN
    EXEC_w := 'BEGIN CALCULA_ASIA_MD(:1, :2, :3, :4, :5, :6, :7, :8, :9, :10, 
                    :11, :12, :13, :14, :15, :16, :17, :18, :19, :20,
                    :21, :22, :23, :24, :25, :26, :27, :28, :29, :30,
                    :31, :32, :33, :34, :35, :36, :37, :38, :39, :40,
                    :41, :42, :43, :44, :45, :46, :47, :48, :49, :50,
                    :51, :52, :53, :54, :55, :56, :57, :58, :59, :60,
                    :61, :62, :63, :64, :65, :66, :67, :68, :69, :70,
                    :71, :72, :73, :74, :75, :76, :77, :78, :79, :80,
                    :81, :82, :83, :84, :85, :86, :87, :88, :89, :90,
                    :91, :92, :93, :94, :95, :96, :97, :98, :99, :100,
                    :101, :102, :103, :104, :105, :106, :107, :108, :109, :110,
                    :111, :112, :113, :114, :115, :116, :117, :118, :119, :120,
                    :121, :122, :123, :124, :125, :126, :127, :128, :129, :130,
                    :131, :132, :133, :134, :135, :136, :137, :138, :139, :140,
                    :141, :142, :143, :144); END;';

    EXECUTE EXEC_w USING  IN somente_numero(NEW.IE_MOTOR_C5_R),
                                    IN somente_numero(NEW.IE_MOTOR_C6_R),
                                    IN somente_numero(NEW.IE_MOTOR_C7_R),
                                    IN somente_numero(NEW.IE_MOTOR_C8_R),
                                    IN somente_numero(NEW.IE_MOTOR_T1_R),
                                    
                                    IN somente_numero(NEW.IE_MOTOR_C5_L),
                                    IN somente_numero(NEW.IE_MOTOR_C6_L),
                                    IN somente_numero(NEW.IE_MOTOR_C7_L),
                                    IN somente_numero(NEW.IE_MOTOR_C8_L),
                                    IN somente_numero(NEW.IE_MOTOR_T1_L),

                                    IN somente_numero(NEW.IE_MOTOR_L2_R),
                                    IN somente_numero(NEW.IE_MOTOR_L3_R),
                                    IN somente_numero(NEW.IE_MOTOR_L4_R),
                                    IN somente_numero(NEW.IE_MOTOR_L5_R),
                                    IN somente_numero(NEW.IE_MOTOR_S1_R),

                                    IN somente_numero(NEW.IE_MOTOR_L2_L),
                                    IN somente_numero(NEW.IE_MOTOR_L3_L),
                                    IN somente_numero(NEW.IE_MOTOR_L4_L),
                                    IN somente_numero(NEW.IE_MOTOR_L5_L),
                                    IN somente_numero(NEW.IE_MOTOR_S1_L),

                                    IN somente_numero(NEW.IE_SENS_AGU_C2_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_C3_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_C4_R), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C5_R), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C6_R), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C7_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_C8_R), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T1_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T2_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T3_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T4_R), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T5_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T6_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T7_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T8_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T9_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T10_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T11_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_T12_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_L1_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_L2_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_L3_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_L4_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_L5_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_S1_R), 
                                    IN somente_numero(NEW.IE_SENS_AGU_S2_R), 
                                    IN somente_numero(NEW.IE_SENS_AGU_S3_R),
                                    IN somente_numero(NEW.IE_SENS_AGU_S4_5_R), 

                                    IN somente_numero(NEW.IE_SENS_AGU_C2_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C3_L),   
                                    IN somente_numero(NEW.IE_SENS_AGU_C4_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C5_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C6_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C7_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_C8_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T1_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T2_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T3_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T4_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T5_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T6_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T7_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T8_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T9_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T10_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T11_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_T12_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_L1_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_L2_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_L3_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_L4_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_L5_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_S1_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_S2_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_S3_L), 
                                    IN somente_numero(NEW.IE_SENS_AGU_S4_5_L), 

                                    IN somente_numero(NEW.IE_SENS_TOQ_C2_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C3_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C4_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C5_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C6_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C7_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C8_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T1_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T2_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T3_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T4_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T5_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T6_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T7_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T8_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T9_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T10_R),
                                    IN somente_numero(NEW.IE_SENS_TOQ_T11_R),
                                    IN somente_numero(NEW.IE_SENS_TOQ_T12_R),
                                    IN somente_numero(NEW.IE_SENS_TOQ_L1_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L2_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L3_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L4_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L5_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S1_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S2_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S3_R), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S4_5_R), 

                                    IN somente_numero(NEW.IE_SENS_TOQ_C2_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C3_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C4_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C5_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C6_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C7_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_C8_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T1_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T2_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T3_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T4_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T5_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T6_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T7_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T8_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T9_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_T10_L),
                                    IN somente_numero(NEW.IE_SENS_TOQ_T11_L),
                                    IN somente_numero(NEW.IE_SENS_TOQ_T12_L),
                                    IN somente_numero(NEW.IE_SENS_TOQ_L1_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L2_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L3_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L4_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_L5_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S1_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S2_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S3_L), 
                                    IN somente_numero(NEW.IE_SENS_TOQ_S4_5_L), 
                                    
                                    OUT QT_PONT_MOTOR_SUP_R_W,
                                    OUT QT_PONT_MOTOR_SUP_L_W,
                                    OUT QT_PONT_MOTOR_SUP_W,
                                    OUT QT_PONT_MOTOR_INF_R_W,
                                    OUT QT_PONT_MOTOR_INF_L_W,
                                    OUT QT_PONT_MOTOR_INF_W,
                                    OUT QT_PONT_AGU_TOQ_R_W,
                                    OUT QT_PONT_AGU_TOQ_L_W,
                                    OUT QT_PONT_AGU_TOQ_W,
                                    OUT QT_PONT_SENS_TOQ_R_W,
                                    OUT QT_PONT_SENS_TOQ_L_W,
                                    OUT QT_PONT_SENS_TOQ_W;
  exception
    when others then
      QT_PONT_MOTOR_SUP_R_W   := null;
      QT_PONT_MOTOR_SUP_L_W   := null;
      QT_PONT_MOTOR_SUP_W     := null;
      QT_PONT_MOTOR_INF_R_W   := null;
      QT_PONT_MOTOR_INF_L_W   := null;
      QT_PONT_MOTOR_INF_W     := null;
      QT_PONT_AGU_TOQ_R_W     := null;
      QT_PONT_AGU_TOQ_L_W     := null;
      QT_PONT_AGU_TOQ_W       := null;
      QT_PONT_SENS_TOQ_R_W    := null;
      QT_PONT_SENS_TOQ_L_W    := null;
      QT_PONT_SENS_TOQ_W      := null;
  end;

  NEW.QT_PONT_MOTOR_SUP_R	:=	QT_PONT_MOTOR_SUP_R_W;
  NEW.QT_PONT_MOTOR_SUP_L	:=	QT_PONT_MOTOR_SUP_L_W;
  NEW.QT_PONT_MOTOR_SUP		:=	QT_PONT_MOTOR_SUP_W;

  NEW.QT_PONT_MOTOR_INF_R	:=	QT_PONT_MOTOR_INF_R_W;
  NEW.QT_PONT_MOTOR_INF_L	:=	QT_PONT_MOTOR_INF_L_W;
  NEW.QT_PONT_MOTOR_INF		:=	QT_PONT_MOTOR_INF_W;

  NEW.QT_PONT_AGU_TOQ_R		:=	QT_PONT_AGU_TOQ_R_W;
  NEW.QT_PONT_AGU_TOQ_L		:=	QT_PONT_AGU_TOQ_L_W;
  NEW.QT_PONT_AGU_TOQ		  :=	QT_PONT_AGU_TOQ_W;

  NEW.QT_PONT_SENS_TOQ_R		:=	QT_PONT_SENS_TOQ_R_W;
  NEW.QT_PONT_SENS_TOQ_L		:=	QT_PONT_SENS_TOQ_L_W;
  NEW.QT_PONT_SENS_TOQ		  :=	QT_PONT_SENS_TOQ_W;
  <<Final>>
  qt_reg_w	:= 0;
  END;
RETURN NEW;
end
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_escala_asia_atual() FROM PUBLIC;

CREATE TRIGGER escala_asia_atual
	BEFORE INSERT OR UPDATE ON escala_asia FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_escala_asia_atual();

