-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS material_tp ON material CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_material_tp() RETURNS trigger AS $BODY$
DECLARE nr_seq_w bigint;ds_s_w   varchar(1);ds_c_w   varchar(1);ds_w	   varchar(1);ie_log_w varchar(1);BEGIN BEGIN ds_s_w := to_char(OLD.CD_MATERIAL);  ds_c_w:=null;SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DOSE_PRESCRICAO,1,4000), substr(NEW.QT_DOSE_PRESCRICAO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DOSE_PRESCRICAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CLASSIF_MEDIC,1,4000), substr(NEW.IE_CLASSIF_MEDIC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CLASSIF_MEDIC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNID_TERAPEUTICA,1,4000), substr(NEW.CD_UNID_TERAPEUTICA,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNID_TERAPEUTICA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_OBRIGA_JUSTIFICATIVA,1,4000), substr(NEW.IE_OBRIGA_JUSTIFICATIVA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_OBRIGA_JUSTIFICATIVA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_INTERVALO_PADRAO,1,4000), substr(NEW.CD_INTERVALO_PADRAO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_INTERVALO_PADRAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(to_char(OLD.DT_ATUALIZACAO_NREC,'dd/mm/yyyy hh24:mi:ss'), to_char(NEW.DT_ATUALIZACAO_NREC,'dd/mm/yyyy hh24:mi:ss'), NEW.nm_usuario, nr_seq_w, 'DT_ATUALIZACAO_NREC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNIDADE_MEDIDA_PRESCR,1,4000), substr(NEW.CD_UNIDADE_MEDIDA_PRESCR,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNIDADE_MEDIDA_PRESCR', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_ANCORA_SOLUCAO,1,4000), substr(NEW.IE_ANCORA_SOLUCAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_ANCORA_SOLUCAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MAX_DIA_APLIC,1,4000), substr(NEW.QT_MAX_DIA_APLIC,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MAX_DIA_APLIC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_LIMITE_PESSOA,1,4000), substr(NEW.QT_LIMITE_PESSOA,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_LIMITE_PESSOA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_ORIENTACAO_USUARIO,1,4000), substr(NEW.DS_ORIENTACAO_USUARIO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_ORIENTACAO_USUARIO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TIPO_MATERIAL,1,4000), substr(NEW.IE_TIPO_MATERIAL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TIPO_MATERIAL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_MATERIAL_GENERICO,1,4000), substr(NEW.CD_MATERIAL_GENERICO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_MATERIAL_GENERICO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_CONV_ESTOQUE_CONSUMO,1,4000), substr(NEW.QT_CONV_ESTOQUE_CONSUMO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_CONV_ESTOQUE_CONSUMO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PRECO_COMPRA,1,4000), substr(NEW.IE_PRECO_COMPRA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PRECO_COMPRA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_MATERIAL,1,4000), substr(NEW.DS_MATERIAL,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_MATERIAL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_REDUZIDA,1,4000), substr(NEW.DS_REDUZIDA,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_REDUZIDA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNIDADE_MEDIDA_ESTOQUE,1,4000), substr(NEW.CD_UNIDADE_MEDIDA_ESTOQUE,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNIDADE_MEDIDA_ESTOQUE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MATERIAL_ESTOQUE,1,4000), substr(NEW.IE_MATERIAL_ESTOQUE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MATERIAL_ESTOQUE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_COBRA_PACIENTE,1,4000), substr(NEW.IE_COBRA_PACIENTE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_COBRA_PACIENTE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_SITUACAO,1,4000), substr(NEW.IE_SITUACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_SITUACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DIAS_VALIDADE,1,4000), substr(NEW.QT_DIAS_VALIDADE,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DIAS_VALIDADE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(to_char(OLD.DT_CADASTRAMENTO,'dd/mm/yyyy hh24:mi:ss'), to_char(NEW.DT_CADASTRAMENTO,'dd/mm/yyyy hh24:mi:ss'), NEW.nm_usuario, nr_seq_w, 'DT_CADASTRAMENTO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CONSIGNADO,1,4000), substr(NEW.IE_CONSIGNADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CONSIGNADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNIDADE_MEDIDA_SOLIC,1,4000), substr(NEW.CD_UNIDADE_MEDIDA_SOLIC,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNIDADE_MEDIDA_SOLIC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PRESCRICAO,1,4000), substr(NEW.IE_PRESCRICAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PRESCRICAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_CONVERSAO_MG,1,4000), substr(NEW.QT_CONVERSAO_MG,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_CONVERSAO_MG', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CUSTO_BENEF,1,4000), substr(NEW.IE_CUSTO_BENEF,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CUSTO_BENEF', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_MEDICAMENTO,1,4000), substr(NEW.CD_MEDICAMENTO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_MEDICAMENTO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_MATERIAL_CONTA,1,4000), substr(NEW.CD_MATERIAL_CONTA,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_MATERIAL_CONTA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_VIA_APLICACAO,1,4000), substr(NEW.IE_VIA_APLICACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_VIA_APLICACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_OBRIG_VIA_APLICACAO,1,4000), substr(NEW.IE_OBRIG_VIA_APLICACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_OBRIG_VIA_APLICACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_DISPONIVEL_MERCADO,1,4000), substr(NEW.IE_DISPONIVEL_MERCADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_DISPONIVEL_MERCADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_CONV_COMPRA_ESTOQUE,1,4000), substr(NEW.QT_CONV_COMPRA_ESTOQUE,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_CONV_COMPRA_ESTOQUE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PADRONIZADO,1,4000), substr(NEW.IE_PADRONIZADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PADRONIZADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_MATERIAL_ESTOQUE,1,4000), substr(NEW.CD_MATERIAL_ESTOQUE,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_MATERIAL_ESTOQUE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_GRUPO_REC,1,4000), substr(NEW.NR_SEQ_GRUPO_REC,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_GRUPO_REC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_BAIXA_INTEIRA,1,4000), substr(NEW.IE_BAIXA_INTEIRA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_BAIXA_INTEIRA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_FABRIC,1,4000), substr(NEW.NR_SEQ_FABRIC,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_FABRIC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_BAIXA_ESTOQ_PAC,1,4000), substr(NEW.IE_BAIXA_ESTOQ_PAC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_BAIXA_ESTOQ_PAC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_DIAS_UTIL_MEDIC,1,4000), substr(NEW.IE_DIAS_UTIL_MEDIC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_DIAS_UTIL_MEDIC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CURVA_ABC,1,4000), substr(NEW.IE_CURVA_ABC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CURVA_ABC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_RECEITA,1,4000), substr(NEW.IE_RECEITA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_RECEITA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_FABRICANTE,1,4000), substr(NEW.CD_FABRICANTE,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_FABRICANTE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_PRIORIDADE_COML,1,4000), substr(NEW.QT_PRIORIDADE_COML,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_PRIORIDADE_COML', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNID_MED_LIMITE,1,4000), substr(NEW.CD_UNID_MED_LIMITE,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNID_MED_LIMITE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TIPO_FONTE_PRESCR,1,4000), substr(NEW.IE_TIPO_FONTE_PRESCR,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TIPO_FONTE_PRESCR', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MAX_PRESCRICAO,1,4000), substr(NEW.QT_MAX_PRESCRICAO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MAX_PRESCRICAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CONTROLE_MEDICO,1,4000), substr(NEW.IE_CONTROLE_MEDICO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CONTROLE_MEDICO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNIDADE_MEDIDA_COMPRA,1,4000), substr(NEW.CD_UNIDADE_MEDIDA_COMPRA,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNIDADE_MEDIDA_COMPRA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_HORAS_UTIL_PAC,1,4000), substr(NEW.QT_HORAS_UTIL_PAC,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_HORAS_UTIL_PAC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MINIMO_MULTIPLO_SOLIC,1,4000), substr(NEW.QT_MINIMO_MULTIPLO_SOLIC,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MINIMO_MULTIPLO_SOLIC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_SISTEMA_ANT,1,4000), substr(NEW.CD_SISTEMA_ANT,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_SISTEMA_ANT', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNIDADE_MEDIDA_CONSUMO,1,4000), substr(NEW.CD_UNIDADE_MEDIDA_CONSUMO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNIDADE_MEDIDA_CONSUMO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_SOLUCAO,1,4000), substr(NEW.IE_SOLUCAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_SOLUCAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_CLASSE_MATERIAL,1,4000), substr(NEW.CD_CLASSE_MATERIAL,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_CLASSE_MATERIAL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MISTURA,1,4000), substr(NEW.IE_MISTURA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MISTURA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NM_USUARIO,1,4000), substr(NEW.NM_USUARIO,1,4000), NEW.nm_usuario, nr_seq_w, 'NM_USUARIO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_BOMBA_INFUSAO,1,4000), substr(NEW.IE_BOMBA_INFUSAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_BOMBA_INFUSAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_DILUICAO,1,4000), substr(NEW.IE_DILUICAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_DILUICAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_FICHA_TECNICA,1,4000), substr(NEW.NR_SEQ_FICHA_TECNICA,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_FICHA_TECNICA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_GRAVAR_OBS_PRESCR,1,4000), substr(NEW.IE_GRAVAR_OBS_PRESCR,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_GRAVAR_OBS_PRESCR', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_FAMILIA,1,4000), substr(NEW.NR_SEQ_FAMILIA,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_FAMILIA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_LOCALIZACAO,1,4000), substr(NEW.NR_SEQ_LOCALIZACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_LOCALIZACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNID_MED_BASE_CONC,1,4000), substr(NEW.CD_UNID_MED_BASE_CONC,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNID_MED_BASE_CONC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_PRECAUCAO_ORDEM,1,4000), substr(NEW.DS_PRECAUCAO_ORDEM,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_PRECAUCAO_ORDEM', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNID_MED_CONCETRACAO,1,4000), substr(NEW.CD_UNID_MED_CONCETRACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNID_MED_CONCETRACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MIN_APLICACAO,1,4000), substr(NEW.QT_MIN_APLICACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MIN_APLICACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DIA_PROFILATICO,1,4000), substr(NEW.QT_DIA_PROFILATICO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DIA_PROFILATICO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_FORMA_FARM,1,4000), substr(NEW.NR_SEQ_FORMA_FARM,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_FORMA_FARM', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_CLASSIF_FISCAL,1,4000), substr(NEW.CD_CLASSIF_FISCAL,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_CLASSIF_FISCAL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_INF_ULTIMA_COMPRA,1,4000), substr(NEW.IE_INF_ULTIMA_COMPRA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_INF_ULTIMA_COMPRA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_CERTIFICADO_APROVACAO,1,4000), substr(NEW.NR_CERTIFICADO_APROVACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_CERTIFICADO_APROVACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_DOSE_LIMITE,1,4000), substr(NEW.IE_DOSE_LIMITE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_DOSE_LIMITE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_FOTOSENSIVEL,1,4000), substr(NEW.IE_FOTOSENSIVEL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_FOTOSENSIVEL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DIA_TERAPEUTICO,1,4000), substr(NEW.QT_DIA_TERAPEUTICO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DIA_TERAPEUTICO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_HIGROSCOPICO,1,4000), substr(NEW.IE_HIGROSCOPICO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_HIGROSCOPICO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIGE_LADO,1,4000), substr(NEW.IE_EXIGE_LADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIGE_LADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_OBRIGA_JUST_DOSE,1,4000), substr(NEW.IE_OBRIGA_JUST_DOSE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_OBRIGA_JUST_DOSE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(to_char(OLD.DT_VALIDADE_CERTIFICADO_APROV,'dd/mm/yyyy hh24:mi:ss'), to_char(NEW.DT_VALIDADE_CERTIFICADO_APROV,'dd/mm/yyyy hh24:mi:ss'), NEW.nm_usuario, nr_seq_w, 'DT_VALIDADE_CERTIFICADO_APROV', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_SEXO,1,4000), substr(NEW.IE_SEXO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_SEXO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MOSTRAR_ORIENTACAO,1,4000), substr(NEW.IE_MOSTRAR_ORIENTACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MOSTRAR_ORIENTACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_GERAR_LOTE,1,4000), substr(NEW.IE_GERAR_LOTE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_GERAR_LOTE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_JUSTIFICATIVA_PADRAO,1,4000), substr(NEW.IE_JUSTIFICATIVA_PADRAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_JUSTIFICATIVA_PADRAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TERMOLABIL,1,4000), substr(NEW.IE_TERMOLABIL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TERMOLABIL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MONOFASICO,1,4000), substr(NEW.IE_MONOFASICO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MONOFASICO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_JUSTIFICA_DIAS_UTIL,1,4000), substr(NEW.IE_JUSTIFICA_DIAS_UTIL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_JUSTIFICA_DIAS_UTIL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_ALTO_RISCO,1,4000), substr(NEW.IE_ALTO_RISCO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_ALTO_RISCO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_MODELO_DIALISADOR,1,4000), substr(NEW.NR_SEQ_MODELO_DIALISADOR,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_MODELO_DIALISADOR', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_FABRICANTE_DIST,1,4000), substr(NEW.IE_FABRICANTE_DIST,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_FABRICANTE_DIST', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EDITAR_DOSE,1,4000), substr(NEW.IE_EDITAR_DOSE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EDITAR_DOSE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MENSAGEM_SONDA,1,4000), substr(NEW.IE_MENSAGEM_SONDA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MENSAGEM_SONDA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_HINT,1,4000), substr(NEW.DS_HINT,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_HINT', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNID_MED_CONC_TOTAL,1,4000), substr(NEW.CD_UNID_MED_CONC_TOTAL,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNID_MED_CONC_TOTAL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_APLICAR,1,4000), substr(NEW.IE_APLICAR,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_APLICAR', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CONSISTE_DUPL,1,4000), substr(NEW.IE_CONSISTE_DUPL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CONSISTE_DUPL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXTRAVAZAMENTO,1,4000), substr(NEW.IE_EXTRAVAZAMENTO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXTRAVAZAMENTO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_CONV_COMPRA_EST,1,4000), substr(NEW.QT_CONV_COMPRA_EST,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_CONV_COMPRA_EST', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_UNID_MEDIDA,1,4000), substr(NEW.CD_UNID_MEDIDA,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_UNID_MEDIDA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_COMPRA_MELHOR,1,4000), substr(NEW.QT_COMPRA_MELHOR,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_COMPRA_MELHOR', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_GERA_LOTE_SEPARADO,1,4000), substr(NEW.IE_GERA_LOTE_SEPARADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_GERA_LOTE_SEPARADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_MENSAGEM,1,4000), substr(NEW.DS_MENSAGEM,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_MENSAGEM', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_TIPO_RECOMENDACAO,1,4000), substr(NEW.CD_TIPO_RECOMENDACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_TIPO_RECOMENDACAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_REGISTRO_ANVISA,1,4000), substr(NEW.NR_REGISTRO_ANVISA,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_REGISTRO_ANVISA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(to_char(OLD.DT_VALIDADE_REG_ANVISA,'dd/mm/yyyy hh24:mi:ss'), to_char(NEW.DT_VALIDADE_REG_ANVISA,'dd/mm/yyyy hh24:mi:ss'), NEW.nm_usuario, nr_seq_w, 'DT_VALIDADE_REG_ANVISA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CONSISTE_DIAS,1,4000), substr(NEW.IE_CONSISTE_DIAS,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CONSISTE_DIAS', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_STATUS_ENVIO,1,4000), substr(NEW.IE_STATUS_ENVIO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_STATUS_ENVIO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_IAT,1,4000), substr(NEW.IE_IAT,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_IAT', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(to_char(OLD.DT_REVISAO_FISPQ,'dd/mm/yyyy hh24:mi:ss'), to_char(NEW.DT_REVISAO_FISPQ,'dd/mm/yyyy hh24:mi:ss'), NEW.nm_usuario, nr_seq_w, 'DT_REVISAO_FISPQ', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_FABRIC_PROPRIA,1,4000), substr(NEW.IE_FABRIC_PROPRIA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_FABRIC_PROPRIA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_DIAS_JUSTIF,1,4000), substr(NEW.NR_DIAS_JUSTIF,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_DIAS_JUSTIF', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CLEARANCE,1,4000), substr(NEW.IE_CLEARANCE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CLEARANCE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_OBJETIVO,1,4000), substr(NEW.IE_OBJETIVO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_OBJETIVO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_OVERFILL,1,4000), substr(NEW.QT_OVERFILL,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_OVERFILL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_DUPLA_CHECAGEM,1,4000), substr(NEW.IE_DUPLA_CHECAGEM,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_DUPLA_CHECAGEM', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_DOSE_TERAP,1,4000), substr(NEW.NR_SEQ_DOSE_TERAP,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_DOSE_TERAP', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DOSE_TERAPEUTICA,1,4000), substr(NEW.QT_DOSE_TERAPEUTICA,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DOSE_TERAPEUTICA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_DCB,1,4000), substr(NEW.CD_DCB,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_DCB', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_DIVISAO,1,4000), substr(NEW.NR_SEQ_DIVISAO,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_DIVISAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MANIPULADO,1,4000), substr(NEW.IE_MANIPULADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MANIPULADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_REGISTRO_MS,1,4000), substr(NEW.NR_REGISTRO_MS,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_REGISTRO_MS', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_ESTERILIZAVEL,1,4000), substr(NEW.IE_ESTERILIZAVEL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_ESTERILIZAVEL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_ABREV_SOLUCAO,1,4000), substr(NEW.DS_ABREV_SOLUCAO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_ABREV_SOLUCAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_PRIORIDADE_APRES,1,4000), substr(NEW.QT_PRIORIDADE_APRES,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_PRIORIDADE_APRES', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CONSISTE_ESTOQUE,1,4000), substr(NEW.IE_CONSISTE_ESTOQUE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CONSISTE_ESTOQUE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_LATEX,1,4000), substr(NEW.IE_LATEX,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_LATEX', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MEIA_VIDA,1,4000), substr(NEW.QT_MEIA_VIDA,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MEIA_VIDA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PERMITE_FRACIONADO,1,4000), substr(NEW.IE_PERMITE_FRACIONADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PERMITE_FRACIONADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_MATERIAL_SUBS,1,4000), substr(NEW.CD_MATERIAL_SUBS,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_MATERIAL_SUBS', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_ALTA_VIGILANCIA,1,4000), substr(NEW.IE_ALTA_VIGILANCIA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_ALTA_VIGILANCIA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_AVALIACAO_REP,1,4000), substr(NEW.IE_AVALIACAO_REP,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_AVALIACAO_REP', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MINIMA_PLANEJ,1,4000), substr(NEW.QT_MINIMA_PLANEJ,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MINIMA_PLANEJ', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MAXIMA_PLANEJ,1,4000), substr(NEW.QT_MAXIMA_PLANEJ,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MAXIMA_PLANEJ', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_NOVA_MOLECULA,1,4000), substr(NEW.IE_NOVA_MOLECULA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_NOVA_MOLECULA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MEDIC_PACIENTE,1,4000), substr(NEW.IE_MEDIC_PACIENTE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MEDIC_PACIENTE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TIPO_SOLUCAO,1,4000), substr(NEW.IE_TIPO_SOLUCAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TIPO_SOLUCAO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_RESTRITO,1,4000), substr(NEW.IE_RESTRITO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_RESTRITO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_VOLUMOSO,1,4000), substr(NEW.IE_VOLUMOSO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_VOLUMOSO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PROTOCOLO_TEV,1,4000), substr(NEW.IE_PROTOCOLO_TEV,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PROTOCOLO_TEV', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_VANCOMICINA,1,4000), substr(NEW.IE_VANCOMICINA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_VANCOMICINA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_ALTURA_CM,1,4000), substr(NEW.QT_ALTURA_CM,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_ALTURA_CM', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_LARGURA_CM,1,4000), substr(NEW.QT_LARGURA_CM,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_LARGURA_CM', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_COMPRIMENTO_CM,1,4000), substr(NEW.QT_COMPRIMENTO_CM,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_COMPRIMENTO_CM', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_PESO_KG,1,4000), substr(NEW.QT_PESO_KG,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_PESO_KG', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PACTUADO,1,4000), substr(NEW.IE_PACTUADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PACTUADO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EMBALAGEM_MULTIPLA,1,4000), substr(NEW.IE_EMBALAGEM_MULTIPLA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EMBALAGEM_MULTIPLA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_MULTIDOSE,1,4000), substr(NEW.IE_MULTIDOSE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_MULTIDOSE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CATALOGO,1,4000), substr(NEW.IE_CATALOGO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CATALOGO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_OBRIGA_TEMPO_APLIC,1,4000), substr(NEW.IE_OBRIGA_TEMPO_APLIC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_OBRIGA_TEMPO_APLIC', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PERECIVEL,1,4000), substr(NEW.IE_PERECIVEL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PERECIVEL', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DIA_INTERV_PROFILAXIA,1,4000), substr(NEW.QT_DIA_INTERV_PROFILAXIA,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DIA_INTERV_PROFILAXIA', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PADRAO_CPOE,1,4000), substr(NEW.IE_PADRAO_CPOE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PADRAO_CPOE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_CNPJ_CADASTRO,1,4000), substr(NEW.CD_CNPJ_CADASTRO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_CNPJ_CADASTRO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_CLASSIF_RISCO,1,4000), substr(NEW.NR_SEQ_CLASSIF_RISCO,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_CLASSIF_RISCO', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PERMITE_LACTANTE,1,4000), substr(NEW.IE_PERMITE_LACTANTE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PERMITE_LACTANTE', ie_log_w, ds_w, 'MATERIAL', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w;   exception when others then ds_w:= '1'; end;   END;
RETURN NEW;
end
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_material_tp() FROM PUBLIC;

CREATE TRIGGER material_tp
	AFTER UPDATE ON material FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_material_tp();

