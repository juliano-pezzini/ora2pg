-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS fin_fatur_gv_classif_titulo ON fin_faturamento_gv CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_fin_fatur_gv_classif_titulo() RETURNS trigger AS $BODY$
declare
pragma autonomous_transaction;
BEGIN
  BEGIN
if (OLD.nr_titulo is null) and (NEW.nr_titulo is not null) then
    BEGIN
    CALL fin_gerar_classif_tit_rec_gv(NEW.nr_titulo,NEW.nr_sequencia,NEW.nm_usuario,'S');
    exception when others then
            null;
    end;
end if;

  END;
RETURN NEW;
END
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_fin_fatur_gv_classif_titulo() FROM PUBLIC;

CREATE TRIGGER fin_fatur_gv_classif_titulo
	AFTER UPDATE OF nr_titulo ON fin_faturamento_gv FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_fin_fatur_gv_classif_titulo();

