-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS hd_assinatura_item_befup_sign ON hd_assinatura_item CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_hd_assinatura_item_befup_sign() RETURNS trigger AS $BODY$
BEGIN

if (OLD.nr_sequencia		<> NEW.nr_sequencia
	or OLD.dt_atualizacao		<> NEW.dt_atualizacao
	or OLD.nm_usuario		<> NEW.nm_usuario
	or OLD.dt_atualizacao_nrec	<> NEW.dt_atualizacao_nrec
	or OLD.nm_usuario_nrec		<> NEW.nm_usuario_nrec
	or OLD.nr_seq_assinatura	<> NEW.nr_seq_assinatura
	or OLD.nr_seq_evento		<> NEW.nr_seq_evento
	or OLD.nr_seq_concentrado	<> NEW.nr_seq_concentrado
	or OLD.nr_seq_concentrado_ret	<> NEW.nr_seq_concentrado_ret
	or (OLD.nr_sequencia		is null and	NEW.nr_sequencia          	is not null)
	or (OLD.dt_atualizacao		is null and	NEW.dt_atualizacao        	is not null)
	or (OLD.nm_usuario		is null and	NEW.nm_usuario            	is not null)
	or (OLD.dt_atualizacao_nrec	is null and	NEW.dt_atualizacao_nrec   	is not null)
	or (OLD.nm_usuario_nrec	is null and	NEW.nm_usuario_nrec       	is not null)
	or (OLD.nr_seq_assinatura	is null and	NEW.nr_seq_assinatura     	is not null)
	or (OLD.nr_seq_evento		is null and	NEW.nr_seq_evento         	is not null)
	or (OLD.nr_seq_concentrado	is null and	NEW.nr_seq_concentrado    	is not null)
	or (OLD.nr_seq_concentrado_ret	is null and	NEW.nr_seq_concentrado_ret	is not null)
	or (OLD.nr_sequencia		is not null and		NEW.nr_sequencia          	is null)
	or (OLD.dt_atualizacao		is not null and		NEW.dt_atualizacao        	is null)
	or (OLD.nm_usuario		is not null and		NEW.nm_usuario            	is null)
	or (OLD.dt_atualizacao_nrec	is not null and		NEW.dt_atualizacao_nrec   	is null)
	or (OLD.nm_usuario_nrec	is not null and		NEW.nm_usuario_nrec       	is null)
	or (OLD.nr_seq_assinatura	is not null and		NEW.nr_seq_assinatura     	is null)
	or (OLD.nr_seq_evento		is not null and		NEW.nr_seq_evento         	is null)
	or (OLD.nr_seq_concentrado	is not null and		NEW.nr_seq_concentrado    	is null)
	or (OLD.nr_seq_concentrado_ret	is not null and		NEW.nr_seq_concentrado_ret	is null)) then
	CALL wheb_mensagem_pck.exibir_mensagem_abort(364485);
end if;

RETURN NEW;
end
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_hd_assinatura_item_befup_sign() FROM PUBLIC;

CREATE TRIGGER hd_assinatura_item_befup_sign
	BEFORE UPDATE ON hd_assinatura_item FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_hd_assinatura_item_befup_sign();

