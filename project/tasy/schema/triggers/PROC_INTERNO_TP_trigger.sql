-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS proc_interno_tp ON proc_interno CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_proc_interno_tp() RETURNS trigger AS $BODY$
DECLARE nr_seq_w bigint;ds_s_w   varchar(1);ds_c_w   varchar(1);ds_w	   varchar(1);ie_log_w varchar(1);BEGIN BEGIN ds_s_w := to_char(OLD.NR_SEQUENCIA);  ds_c_w:=null;SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIGE_LADO,1,4000), substr(NEW.IE_EXIGE_LADO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIGE_LADO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_SITUACAO,1,4000), substr(NEW.IE_SITUACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_SITUACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CLASSIF_HEM,1,4000), substr(NEW.IE_CLASSIF_HEM,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CLASSIF_HEM', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_KIT_MATERIAL,1,4000), substr(NEW.CD_KIT_MATERIAL,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_KIT_MATERIAL', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MIN_CIRURGIA,1,4000), substr(NEW.QT_MIN_CIRURGIA,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MIN_CIRURGIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_TIPO_ANESTESIA,1,4000), substr(NEW.CD_TIPO_ANESTESIA,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_TIPO_ANESTESIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_RESERVA_LEITO,1,4000), substr(NEW.IE_RESERVA_LEITO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_RESERVA_LEITO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_CLASSIF,1,4000), substr(NEW.NR_SEQ_CLASSIF,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_CLASSIF', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_PROTOCOLO,1,4000), substr(NEW.NR_SEQ_PROTOCOLO,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_PROTOCOLO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TIPO_UTIL,1,4000), substr(NEW.IE_TIPO_UTIL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TIPO_UTIL', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MIN_HIGIENIZACAO,1,4000), substr(NEW.QT_MIN_HIGIENIZACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MIN_HIGIENIZACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_OBSERVACAO,1,4000), substr(NEW.DS_OBSERVACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_OBSERVACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_ORIENTACAO_PAC,1,4000), substr(NEW.DS_ORIENTACAO_PAC,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_ORIENTACAO_PAC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_EXAME_LAB,1,4000), substr(NEW.NR_SEQ_EXAME_LAB,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_EXAME_LAB', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NM_USUARIO,1,4000), substr(NEW.NM_USUARIO,1,4000), NEW.nm_usuario, nr_seq_w, 'NM_USUARIO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_PROC_EXAME,1,4000), substr(NEW.DS_PROC_EXAME,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_PROC_EXAME', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_LAUDO,1,4000), substr(NEW.DS_LAUDO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_LAUDO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_PROCEDIMENTO,1,4000), substr(NEW.CD_PROCEDIMENTO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_PROCEDIMENTO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_ORIGEM_PROCED,1,4000), substr(NEW.IE_ORIGEM_PROCED,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_ORIGEM_PROCED', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_CAMPO_DIGIT,1,4000), substr(NEW.CD_CAMPO_DIGIT,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_CAMPO_DIGIT', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_PROC_EXAME_LOC,1,4000), substr(NEW.DS_PROC_EXAME_LOC,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_PROC_EXAME_LOC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_ORIENTACAO_USUARIO,1,4000), substr(NEW.DS_ORIENTACAO_USUARIO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_ORIENTACAO_USUARIO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TIPO,1,4000), substr(NEW.IE_TIPO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TIPO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_ORIENTACAO,1,4000), substr(NEW.IE_ORIENTACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_ORIENTACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_TIPO_CIRURGIA,1,4000), substr(NEW.CD_TIPO_CIRURGIA,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_TIPO_CIRURGIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CTRL_GLIC,1,4000), substr(NEW.IE_CTRL_GLIC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CTRL_GLIC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PORTE_CIRURGIA,1,4000), substr(NEW.IE_PORTE_CIRURGIA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PORTE_CIRURGIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_DIF_FATURAMENTO,1,4000), substr(NEW.DS_DIF_FATURAMENTO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_DIF_FATURAMENTO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_PROCED_NISS,1,4000), substr(NEW.NR_SEQ_PROCED_NISS,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_PROCED_NISS', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DIAS_PREV_INTER,1,4000), substr(NEW.QT_DIAS_PREV_INTER,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DIAS_PREV_INTER', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CLASSIF_ADEP,1,4000), substr(NEW.IE_CLASSIF_ADEP,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CLASSIF_ADEP', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_INTEGRACAO,1,4000), substr(NEW.CD_INTEGRACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_INTEGRACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_LOCALIZADOR,1,4000), substr(NEW.IE_LOCALIZADOR,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_LOCALIZADOR', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_SEXO,1,4000), substr(NEW.IE_SEXO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_SEXO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TIPAGEM_SANGUINEA,1,4000), substr(NEW.IE_TIPAGEM_SANGUINEA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TIPAGEM_SANGUINEA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_BOLSAS_SANGUE,1,4000), substr(NEW.QT_BOLSAS_SANGUE,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_BOLSAS_SANGUE', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_TOPOGRAFIA,1,4000), substr(NEW.IE_TOPOGRAFIA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_TOPOGRAFIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_COPIA,1,4000), substr(NEW.IE_COPIA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_COPIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_IVC,1,4000), substr(NEW.IE_IVC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_IVC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_PROCEDIMENTO_TUSS,1,4000), substr(NEW.CD_PROCEDIMENTO_TUSS,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_PROCEDIMENTO_TUSS', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_ORIGEM_PROC_TUSS,1,4000), substr(NEW.IE_ORIGEM_PROC_TUSS,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_ORIGEM_PROC_TUSS', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_DIAS_PREV_UTI,1,4000), substr(NEW.QT_DIAS_PREV_UTI,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_DIAS_PREV_UTI', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_MIN_PREPARO,1,4000), substr(NEW.QT_MIN_PREPARO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_MIN_PREPARO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_ORIENTACAO_SMS,1,4000), substr(NEW.DS_ORIENTACAO_SMS,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_ORIENTACAO_SMS', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_HONORARIO_MEDICO,1,4000), substr(NEW.IE_HONORARIO_MEDICO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_HONORARIO_MEDICO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_PROC_CIH,1,4000), substr(NEW.CD_PROC_CIH,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_PROC_CIH', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_VIDEO,1,4000), substr(NEW.IE_VIDEO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_VIDEO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_GRUPO_DIF_FAT,1,4000), substr(NEW.NR_SEQ_GRUPO_DIF_FAT,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_GRUPO_DIF_FAT', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_LAUDO_SUS,1,4000), substr(NEW.IE_LAUDO_SUS,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_LAUDO_SUS', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_IDADE_MIN_MESES,1,4000), substr(NEW.QT_IDADE_MIN_MESES,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_IDADE_MIN_MESES', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_IDADE_MAX_MESES,1,4000), substr(NEW.QT_IDADE_MAX_MESES,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_IDADE_MAX_MESES', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_EXAME_CURTO,1,4000), substr(NEW.DS_EXAME_CURTO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_EXAME_CURTO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_PADRAO_PATOLOGIA,1,4000), substr(NEW.IE_PADRAO_PATOLOGIA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_PADRAO_PATOLOGIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_COPIAR_REP,1,4000), substr(NEW.IE_COPIAR_REP,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_COPIAR_REP', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_SETOR_PACIENTE,1,4000), substr(NEW.IE_SETOR_PACIENTE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_SETOR_PACIENTE', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIGE_RESPONSAVEL,1,4000), substr(NEW.IE_EXIGE_RESPONSAVEL,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIGE_RESPONSAVEL', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_IODO,1,4000), substr(NEW.IE_IODO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_IODO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_CONTROLA_CAVIDADE,1,4000), substr(NEW.IE_CONTROLA_CAVIDADE,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_CONTROLA_CAVIDADE', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_COBRAR_HORARIO,1,4000), substr(NEW.IE_COBRAR_HORARIO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_COBRAR_HORARIO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXAME_GESTAO_ENTREGA,1,4000), substr(NEW.IE_EXAME_GESTAO_ENTREGA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXAME_GESTAO_ENTREGA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_SISMAMA_REP,1,4000), substr(NEW.IE_SISMAMA_REP,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_SISMAMA_REP', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXCLUIR_PROC_PRINC,1,4000), substr(NEW.IE_EXCLUIR_PROC_PRINC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXCLUIR_PROC_PRINC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_NECESSITA_ANEST,1,4000), substr(NEW.IE_NECESSITA_ANEST,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_NECESSITA_ANEST', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_APRESENTAR_ASSOC,1,4000), substr(NEW.IE_APRESENTAR_ASSOC,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_APRESENTAR_ASSOC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIGE_REGIAO_AGEINT,1,4000), substr(NEW.IE_EXIGE_REGIAO_AGEINT,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIGE_REGIAO_AGEINT', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_IMP_ORIENTACAO,1,4000), substr(NEW.IE_IMP_ORIENTACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_IMP_ORIENTACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_SIGLA_EXAME,1,4000), substr(NEW.DS_SIGLA_EXAME,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_SIGLA_EXAME', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIBE_REP,1,4000), substr(NEW.IE_EXIBE_REP,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIBE_REP', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_PROT_GLIC,1,4000), substr(NEW.NR_SEQ_PROT_GLIC,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_PROT_GLIC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIGE_CONDICAO,1,4000), substr(NEW.IE_EXIGE_CONDICAO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIGE_CONDICAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_MENSAGEM_REP,1,4000), substr(NEW.DS_MENSAGEM_REP,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_MENSAGEM_REP', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIGE_CLASSIF_ITEM_AGEINT,1,4000), substr(NEW.IE_EXIGE_CLASSIF_ITEM_AGEINT,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIGE_CLASSIF_ITEM_AGEINT', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_EXIGE_ANESTESIA,1,4000), substr(NEW.IE_EXIGE_ANESTESIA,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_EXIGE_ANESTESIA', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.DS_ORIENTACAO_EXTERNO,1,4000), substr(NEW.DS_ORIENTACAO_EXTERNO,1,4000), NEW.nm_usuario, nr_seq_w, 'DS_ORIENTACAO_EXTERNO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.CD_MEDICO_EXEC,1,4000), substr(NEW.CD_MEDICO_EXEC,1,4000), NEW.nm_usuario, nr_seq_w, 'CD_MEDICO_EXEC', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.IE_NAO_CONSISTE_FIM_TURNO,1,4000), substr(NEW.IE_NAO_CONSISTE_FIM_TURNO,1,4000), NEW.nm_usuario, nr_seq_w, 'IE_NAO_CONSISTE_FIM_TURNO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.NR_SEQ_AVALIACAO,1,4000), substr(NEW.NR_SEQ_AVALIACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'NR_SEQ_AVALIACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w; SELECT * FROM gravar_log_alteracao(substr(OLD.QT_RADIACAO,1,4000), substr(NEW.QT_RADIACAO,1,4000), NEW.nm_usuario, nr_seq_w, 'QT_RADIACAO', ie_log_w, ds_w, 'PROC_INTERNO', ds_s_w, ds_c_w) INTO STRICT nr_seq_w, ie_log_w;   exception when others then ds_w:= '1'; end;   END;
RETURN NEW;
end
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_proc_interno_tp() FROM PUBLIC;

CREATE TRIGGER proc_interno_tp
	AFTER UPDATE ON proc_interno FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_proc_interno_tp();

