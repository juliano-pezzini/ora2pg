-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS sip_item_assist_regra_nv_bi ON sip_item_assist_regra_nv CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_sip_item_assist_regra_nv_bi() RETURNS trigger AS $BODY$
declare
CD_AREA_PROCEDIMENTO_w	numeric(22);
CD_CATEGORIA_CID_w	varchar(10);
CD_CATEGORIA_CID_FIM_w	varchar(10);
CD_CATEGORIA_CID_INI_w	varchar(10);
CD_CBO_w	varchar(15);
CD_DOENCA_CID_w	varchar(10);
CD_ESPECIALIDADE_w	numeric(22);
CD_ESTABELECIMENTO_w	numeric(22);
CD_GRUPO_PROC_w	numeric(22);
CD_PROCEDIMENTO_w	numeric(22);
IE_CONSIDERAR_ATEND_w	varchar(5);
IE_CONSIDERAR_CONTA_w	varchar(1);
IE_CONSIDERAR_GUIA_REF_w	varchar(1);
IE_MATERIAIS_w	varchar(1);
IE_NASCIDO_VIVO_w	varchar(1);
IE_ORIGEM_PROCED_w	numeric(22);
IE_PARTO_NORMAL_w	varchar(1);
IE_REGIME_INTERNACAO_w	varchar(1);
IE_SEXO_w	varchar(1);
IE_TIPO_GUIA_w	varchar(2);
IE_UNID_TEMPO_ATEND_w	varchar(1);
IE_UNID_TEMPO_IDADE_w	varchar(1);
NR_ORDEM_APLIC_REGRA_w	numeric(22);
NR_SEQ_CBO_SAUDE_w	numeric(22);
NR_SEQ_CLINICA_w	numeric(22);
NR_SEQ_GRUPO_DOENCA_w	numeric(22);
NR_SEQ_GRUPO_SERVICO_w	numeric(22);
NR_SEQ_PRESTADOR_EXEC_w	numeric(22);
NR_SEQ_TIPO_ATENDIMENTO_w	numeric(22);
QT_IDADE_FINAL_w	numeric(22);
QT_IDADE_INICIAL_w	numeric(22);
QT_TEMPO_ATEND_FINAL_w	numeric(22);
QT_TEMPO_ATEND_INICIAL_w	numeric(22);

 BEGIN

	select	NEW.CD_AREA_PROCEDIMENTO, 
NEW.CD_CATEGORIA_CID, 
NEW.CD_CATEGORIA_CID_FIM, 
NEW.CD_CATEGORIA_CID_INI, 
NEW.CD_CBO, 
NEW.CD_DOENCA_CID, 
NEW.CD_ESPECIALIDADE, 
NEW.CD_ESTABELECIMENTO, 
NEW.CD_GRUPO_PROC, 
NEW.CD_PROCEDIMENTO, 
NEW.IE_CONSIDERAR_ATEND, 
NEW.IE_CONSIDERAR_CONTA, 
NEW.IE_CONSIDERAR_GUIA_REF, 
NEW.IE_MATERIAIS, 
NEW.IE_NASCIDO_VIVO, 
NEW.IE_ORIGEM_PROCED, 
NEW.IE_PARTO_NORMAL, 
NEW.IE_REGIME_INTERNACAO, 
NEW.IE_SEXO, 
NEW.IE_TIPO_GUIA, 
NEW.IE_UNID_TEMPO_ATEND, 
NEW.IE_UNID_TEMPO_IDADE, 
NEW.NR_ORDEM_APLIC_REGRA, 
NEW.NR_SEQ_CBO_SAUDE, 
NEW.NR_SEQ_CLINICA, 
NEW.NR_SEQ_GRUPO_DOENCA, 
NEW.NR_SEQ_GRUPO_SERVICO, 
NEW.NR_SEQ_PRESTADOR_EXEC, 
NEW.NR_SEQ_TIPO_ATENDIMENTO, 
NEW.QT_IDADE_FINAL, 
NEW.QT_IDADE_INICIAL, 
NEW.QT_TEMPO_ATEND_FINAL, 
NEW.QT_TEMPO_ATEND_INICIAL
	into STRICT	CD_AREA_PROCEDIMENTO_w, 
CD_CATEGORIA_CID_w, 
CD_CATEGORIA_CID_FIM_w, 
CD_CATEGORIA_CID_INI_w, 
CD_CBO_w, 
CD_DOENCA_CID_w, 
CD_ESPECIALIDADE_w, 
CD_ESTABELECIMENTO_w, 
CD_GRUPO_PROC_w, 
CD_PROCEDIMENTO_w, 
IE_CONSIDERAR_ATEND_w, 
IE_CONSIDERAR_CONTA_w, 
IE_CONSIDERAR_GUIA_REF_w, 
IE_MATERIAIS_w, 
IE_NASCIDO_VIVO_w, 
IE_ORIGEM_PROCED_w, 
IE_PARTO_NORMAL_w, 
IE_REGIME_INTERNACAO_w, 
IE_SEXO_w, 
IE_TIPO_GUIA_w, 
IE_UNID_TEMPO_ATEND_w, 
IE_UNID_TEMPO_IDADE_w, 
NR_ORDEM_APLIC_REGRA_w, 
NR_SEQ_CBO_SAUDE_w, 
NR_SEQ_CLINICA_w, 
NR_SEQ_GRUPO_DOENCA_w, 
NR_SEQ_GRUPO_SERVICO_w, 
NR_SEQ_PRESTADOR_EXEC_w, 
NR_SEQ_TIPO_ATENDIMENTO_w, 
QT_IDADE_FINAL_w, 
QT_IDADE_INICIAL_w, 
QT_TEMPO_ATEND_FINAL_w, 
QT_TEMPO_ATEND_INICIAL_w
	;

 NEW.ds_controle_regra_duplic :=
'CD_AREA_PROCEDIMENTO='||CD_AREA_PROCEDIMENTO_w||';'
||'CD_CATEGORIA_CID='||CD_CATEGORIA_CID_w||';'
||'CD_CATEGORIA_CID_FIM='||CD_CATEGORIA_CID_FIM_w||';'
||'CD_CATEGORIA_CID_INI='||CD_CATEGORIA_CID_INI_w||';'
||'CD_CBO='||CD_CBO_w||';'
||'CD_DOENCA_CID='||CD_DOENCA_CID_w||';'
||'CD_ESPECIALIDADE='||CD_ESPECIALIDADE_w||';'
||'CD_ESTABELECIMENTO='||CD_ESTABELECIMENTO_w||';'
||'CD_GRUPO_PROC='||CD_GRUPO_PROC_w||';'
||'CD_PROCEDIMENTO='||CD_PROCEDIMENTO_w||';'
||'IE_CONSIDERAR_ATEND='||IE_CONSIDERAR_ATEND_w||';'
||'IE_CONSIDERAR_CONTA='||IE_CONSIDERAR_CONTA_w||';'
||'IE_CONSIDERAR_GUIA_REF='||IE_CONSIDERAR_GUIA_REF_w||';'
||'IE_MATERIAIS='||IE_MATERIAIS_w||';'
||'IE_NASCIDO_VIVO='||IE_NASCIDO_VIVO_w||';'
||'IE_ORIGEM_PROCED='||IE_ORIGEM_PROCED_w||';'
||'IE_PARTO_NORMAL='||IE_PARTO_NORMAL_w||';'
||'IE_REGIME_INTERNACAO='||IE_REGIME_INTERNACAO_w||';'
||'IE_SEXO='||IE_SEXO_w||';'
||'IE_TIPO_GUIA='||IE_TIPO_GUIA_w||';'
||'IE_UNID_TEMPO_ATEND='||IE_UNID_TEMPO_ATEND_w||';'
||'IE_UNID_TEMPO_IDADE='||IE_UNID_TEMPO_IDADE_w||';'
||'NR_ORDEM_APLIC_REGRA='||NR_ORDEM_APLIC_REGRA_w||';'
||'NR_SEQ_CBO_SAUDE='||NR_SEQ_CBO_SAUDE_w||';'
||'NR_SEQ_CLINICA='||NR_SEQ_CLINICA_w||';'
||'NR_SEQ_GRUPO_DOENCA='||NR_SEQ_GRUPO_DOENCA_w||';'
||'NR_SEQ_GRUPO_SERVICO='||NR_SEQ_GRUPO_SERVICO_w||';'
||'NR_SEQ_PRESTADOR_EXEC='||NR_SEQ_PRESTADOR_EXEC_w||';'
||'NR_SEQ_TIPO_ATENDIMENTO='||NR_SEQ_TIPO_ATENDIMENTO_w||';'
||'QT_IDADE_FINAL='||QT_IDADE_FINAL_w||';'
||'QT_IDADE_INICIAL='||QT_IDADE_INICIAL_w||';'
||'QT_TEMPO_ATEND_FINAL='||QT_TEMPO_ATEND_FINAL_w||';'
||'QT_TEMPO_ATEND_INICIAL='||QT_TEMPO_ATEND_INICIAL_w||';';

 RETURN NEW;
end;
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_sip_item_assist_regra_nv_bi() FROM PUBLIC;

CREATE TRIGGER sip_item_assist_regra_nv_bi
	BEFORE INSERT OR UPDATE ON sip_item_assist_regra_nv FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_sip_item_assist_regra_nv_bi();

