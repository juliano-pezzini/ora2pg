-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

DROP TRIGGER IF EXISTS prescr_proc_captura_img_delete ON prescr_proc_captura_img CASCADE;
CREATE OR REPLACE FUNCTION trigger_fct_prescr_proc_captura_img_delete() RETURNS trigger AS $BODY$
DECLARE

BEGIN
  CALL gravar_log_exclusao('PRESCR_PROC_CAPTURA_IMG', obter_usuario_ativo,
                      'NR_SEQUENCIA=' || OLD.nr_sequencia ||', NR_PRESCRICAO=' || OLD.nr_prescricao ||', NR_SEQUENCIA_PRESCRICAO=' || OLD.nr_sequencia_prescricao || ', NR_SEQ_CAPTURA=' || OLD.nr_seq_captura,
                      'N');
RETURN OLD;
END
$BODY$
 LANGUAGE 'plpgsql' SECURITY DEFINER;
-- REVOKE ALL ON FUNCTION trigger_fct_prescr_proc_captura_img_delete() FROM PUBLIC;

CREATE TRIGGER prescr_proc_captura_img_delete
	BEFORE DELETE ON prescr_proc_captura_img FOR EACH ROW
	EXECUTE PROCEDURE trigger_fct_prescr_proc_captura_img_delete();

