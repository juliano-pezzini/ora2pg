-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW tit_rec_fluxo_caixa_v (nr_titulo, dt_recebimento, cd_convenio, vl_titulo, vl_rec_maior, vl_glosa, vl_recebido, vl_descontos, vl_juros, vl_multa) AS select 	a.nr_titulo,
	trunc(LOCALTIMESTAMP,'dd') dt_recebimento,
       	c.cd_convenio,
	a.vl_titulo,
	0 vl_rec_maior,
	0 vl_glosa,
	0 vl_recebido,
	0 vl_descontos,
	0 vl_juros,
	0 vl_multa
FROM titulo_receber a
LEFT OUTER JOIN convenio c ON (a.cd_cgc = c.cd_cgc)
union

select	a.nr_titulo,
	trunc(b.dt_recebimento,'dd'),
       	c.cd_convenio,
	0,
	b.vl_rec_maior,
        b.vl_glosa,
	b.vl_recebido,
	b.vl_descontos,
	b.vl_juros,
	b.vl_multa
FROM titulo_receber_liq b, titulo_receber a
LEFT OUTER JOIN convenio c ON (a.cd_cgc = c.cd_cgc)
WHERE a.nr_titulo 	= b.nr_titulo and coalesce(ie_lib_caixa, 'S') = 'S';

