-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW cm_conjunto_cont_v (nr_sequencia, cd_estabelecimento, nr_seq_conjunto, dt_atualizacao, nm_usuario, ie_status_conjunto, dt_origem, nm_usuario_origem, nr_seq_embalagem, dt_receb_ester, nm_usuario_ester, nr_seq_ciclo, dt_validade, nr_seq_conj_fisico, dt_saida, nm_usuario_saida, nr_seq_agenda, cd_pessoa_fisica, cd_cgc, cd_local_estoque, cd_setor_atend_orig, cd_setor_atend_dest, dt_aloc_agenda, nm_usuario_agenda, dt_baixa_cirurgia, nr_cirurgia, qt_ponto, vl_esterilizacao, cd_setor_atendimento, nr_seq_cliente, nr_seq_controle, nr_seq_lote, ds_observacao, cd_pessoa_resp, ie_tipo_esterilizacao, nr_atendimento, dt_lancamento_automatico, cd_perfil_ativo, nr_seq_pepo, nm_usuario_vinc, dt_vinculo_conj, ie_situacao, dt_inativacao, dt_liberacao, nm_usuario_inativacao, ds_justificativa, nm_usuario_inicio, nm_usuario_fim, nm_usuario_repasse, nr_seq_conj_origem, cd_medico, nr_seq_assinatura, nm_pessoa_receb, cd_pessoa_receb, nr_seq_assinat_inativacao, cd_controle_conj, nr_seq_posicao_conj, nm_conjunto, nr_seq_classif, ds_classificacao, ds_local_estoque, nm_pessoa_fisica, ds_razao_social, ds_status) AS SELECT A.NR_SEQUENCIA,A.CD_ESTABELECIMENTO,A.NR_SEQ_CONJUNTO,A.DT_ATUALIZACAO,A.NM_USUARIO,A.IE_STATUS_CONJUNTO,A.DT_ORIGEM,A.NM_USUARIO_ORIGEM,A.NR_SEQ_EMBALAGEM,A.DT_RECEB_ESTER,A.NM_USUARIO_ESTER,A.NR_SEQ_CICLO,A.DT_VALIDADE,A.NR_SEQ_CONJ_FISICO,A.DT_SAIDA,A.NM_USUARIO_SAIDA,A.NR_SEQ_AGENDA,A.CD_PESSOA_FISICA,A.CD_CGC,A.CD_LOCAL_ESTOQUE,A.CD_SETOR_ATEND_ORIG,A.CD_SETOR_ATEND_DEST,A.DT_ALOC_AGENDA,A.NM_USUARIO_AGENDA,A.DT_BAIXA_CIRURGIA,A.NR_CIRURGIA,A.QT_PONTO,A.VL_ESTERILIZACAO,A.CD_SETOR_ATENDIMENTO,A.NR_SEQ_CLIENTE,A.NR_SEQ_CONTROLE,A.NR_SEQ_LOTE,A.DS_OBSERVACAO,A.CD_PESSOA_RESP,A.IE_TIPO_ESTERILIZACAO,A.NR_ATENDIMENTO,A.DT_LANCAMENTO_AUTOMATICO,A.CD_PERFIL_ATIVO,A.NR_SEQ_PEPO,A.NM_USUARIO_VINC,A.DT_VINCULO_CONJ,A.IE_SITUACAO,A.DT_INATIVACAO,A.DT_LIBERACAO,A.NM_USUARIO_INATIVACAO,A.DS_JUSTIFICATIVA,A.NM_USUARIO_INICIO,A.NM_USUARIO_FIM,A.NM_USUARIO_REPASSE,A.NR_SEQ_CONJ_ORIGEM,A.CD_MEDICO,A.NR_SEQ_ASSINATURA,A.NM_PESSOA_RECEB,A.CD_PESSOA_RECEB,A.NR_SEQ_ASSINAT_INATIVACAO,A.CD_CONTROLE_CONJ,A.NR_SEQ_POSICAO_CONJ,
       B.NM_CONJUNTO,
	 B.NR_SEQ_CLASSIF,
       C.DS_CLASSIFICACAO,
       D.DS_LOCAL_ESTOQUE,
       E.NM_PESSOA_FISICA,
       F.DS_RAZAO_SOCIAL,
	 V.DS_VALOR_DOMINIO DS_STATUS
FROM valor_dominio v, cm_classif_conjunto c, cm_conjunto b, cm_conjunto_cont a
LEFT OUTER JOIN local_estoque d ON (A.CD_LOCAL_ESTOQUE = D.CD_LOCAL_ESTOQUE)
LEFT OUTER JOIN pessoa_fisica e ON (A.CD_PESSOA_FISICA = E.CD_PESSOA_FISICA)
LEFT OUTER JOIN pessoa_juridica f ON (A.CD_CGC = F.CD_CGC)
WHERE A.NR_SEQ_CONJUNTO      = B.NR_SEQUENCIA AND B.NR_SEQ_CLASSIF       = C.NR_SEQUENCIA    AND A.IE_STATUS_CONJUNTO   = V.VL_DOMINIO AND coalesce(A.IE_SITUACAO,'A') = 'A' AND V.CD_DOMINIO           = 403;

