-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW fa_atend_material_medicacao_v (nr_sequencia, ie_tipo_material, ds_tipo_material, cd_medico, cd_medico_receita, nm_medico_receita, cd_local_estoque, ds_local_estoque, cd_grupo_material, ds_grupo_material, cd_subgrupo_material, ds_subgrupo_material, cd_classe_material, ds_classe_material, cd_material, ds_material, ie_status_medicacao, ds_status_medicacao, nr_seq_receita_amb, ie_material_estoque, cd_material_estoque, dt_receita, nr_seq_rec_item, dt_periodo_inicial, ds_atend_separacao, ds_atend_conferencia, ds_atend_entrega, ie_st_sm_hr00, ie_st_sm_hr01, ie_st_sm_hr02, ie_st_sm_hr03, ie_st_sm_hr04, ie_st_sm_hr05, ie_st_sm_hr06, ie_st_sm_hr07, ie_st_sm_hr08, ie_st_sm_hr09, ie_st_sm_hr10, ie_st_sm_hr11, ie_st_sm_hr12, ie_st_sm_hr13, ie_st_sm_hr14, ie_st_sm_hr15, ie_st_sm_hr16, ie_st_sm_hr17, ie_st_sm_hr18, ie_st_sm_hr19, ie_st_sm_hr20, ie_st_sm_hr21, ie_st_sm_hr22, ie_st_sm_hr23, qt_material) AS select	e.nr_sequencia,
	a.ie_tipo_material, 
	substr(obter_valor_dominio(29, a.ie_tipo_material),1,150) ds_tipo_material, 
	g.cd_medico, 
	e.nr_seq_rec_item cd_medico_receita, 
	substr(obter_nome_medico(g.cd_medico, 'N'),1,100) nm_medico_receita, 
	substr(fa_obter_cd_local_estoque(e.nr_sequencia),1,10) cd_local_estoque, 
	substr(obter_desc_local_estoque(fa_obter_cd_local_estoque(e.nr_sequencia)),1,100) ds_local_estoque, 
	d.cd_grupo_material, 
	d.ds_grupo_material, 
	c.cd_subgrupo_material, 
	c.ds_subgrupo_material, 
	b.cd_classe_material, 
	b.ds_classe_material, 
	a.cd_material, 
	a.ds_material, 
	e.ie_status_medicacao, 
	substr(obter_valor_dominio(3461, e.ie_status_medicacao),1,100) ds_status_medicacao, 
	f.nr_seq_receita_amb, 
	a.ie_material_estoque,		 
	a.cd_material_estoque, 
	g.dt_receita, 
	e.nr_seq_rec_item, 
	f.dt_periodo_inicial, 
	substr(fa_obter_usuario_itens_status(e.nr_sequencia, 'SM'),1,50) ds_atend_separacao, 
	substr(fa_obter_usuario_itens_status(e.nr_sequencia, 'CM'),1,50) ds_atend_conferencia, 
	substr(fa_obter_usuario_itens_status(e.nr_sequencia, 'EM'),1,50) ds_atend_entrega, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '00'),1,10) ie_st_sm_hr00, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '01'),1,10) ie_st_sm_hr01, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '02'),1,10) ie_st_sm_hr02, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '03'),1,10) ie_st_sm_hr03, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '04'),1,10) ie_st_sm_hr04, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '05'),1,10) ie_st_sm_hr05, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '06'),1,10) ie_st_sm_hr06, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '07'),1,10) ie_st_sm_hr07, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '08'),1,10) ie_st_sm_hr08, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '09'),1,10) ie_st_sm_hr09, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '10'),1,10) ie_st_sm_hr10, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '11'),1,10) ie_st_sm_hr11, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '12'),1,10) ie_st_sm_hr12, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '13'),1,10) ie_st_sm_hr13, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '14'),1,10) ie_st_sm_hr14, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '15'),1,10) ie_st_sm_hr15, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '16'),1,10) ie_st_sm_hr16, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '17'),1,10) ie_st_sm_hr17, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '18'),1,10) ie_st_sm_hr18, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '19'),1,10) ie_st_sm_hr19, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '20'),1,10) ie_st_sm_hr20, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '21'),1,10) ie_st_sm_hr21, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '22'),1,10) ie_st_sm_hr22, 
	substr(fa_obter_hora_itens_status(e.nr_sequencia, e.ie_status_medicacao, '23'),1,10) ie_st_sm_hr23,	 
	1 qt_material 
FROM	fa_receita_farmacia g, 
	fa_entrega_medicacao f, 
	fa_entrega_medicacao_item e, 
	grupo_material d, 
	subgrupo_material c, 
	classe_material b, 
	material a 
where	f.nr_seq_receita_amb	 	= g.nr_sequencia 
and	e.nr_seq_fa_entrega		= f.nr_sequencia 
and	e.cd_material 	 		= a.cd_material 
and	a.cd_classe_material		= b.cd_classe_material 
and	b.cd_subgrupo_material		= c.cd_subgrupo_material 
and 	c.cd_grupo_material		= d.cd_grupo_material;

