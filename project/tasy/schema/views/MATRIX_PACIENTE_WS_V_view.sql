-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW matrix_paciente_ws_v (identificacao_paciente, nome, sexo, data_nascimento, endereco, numero_endereco, complemento, bairro, cidade, uf, cep, telefone, celular, telefone_comercial, fax, email, rg, rg_orgao, rg_expedicao, cpf, nome_mae, cartao_nacional_sus, cor, ie_metodo) AS SELECT	a.cd_pessoa_fisica identificacao_paciente,
	a.nm_pessoa_fisica nome,
	a.ie_sexo sexo,
	to_char(a.dt_nascimento,'dd/mm/yyyy hh24:mi:ss') data_nascimento,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'EN'),1,50) endereco,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'NR'),1,6) numero_endereco,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'CO'),1,25) complemento,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'B'),1,45) bairro,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'CI'),1,45) cidade,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'UF'),1,2) uf,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'CEP'),1,8) cep,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'T'),1,20) telefone,
	SUBSTR(a.nr_telefone_celular,1,20) celular,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 2, 'T'),1,20) telefone_comercial,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 2, 'FAX'),1,20) fax,
	SUBSTR(obter_compl_pf(a.cd_pessoa_fisica, 1, 'M'),1,20) email,
	SUBSTR(a.nr_identidade,1,20) rg,
	SUBSTR(a.ds_orgao_emissor_ci,1,10) rg_orgao,
	to_char(a.dt_emissao_ci,'dd/mm/yyyy hh24:mi:ss') rg_expedicao,
	a.nr_cpf cpf,
	SUBSTR(obter_nome_mae_pf(a.cd_pessoa_fisica),1,30) nome_mae,
	SUBSTR(a.nr_cartao_nac_sus,1,15) cartao_nacional_sus,
	substr(Matrix_Obter_Cor_Pele(a.nr_seq_cor_pele),1,1) cor,
	'RecebePaciente' ie_metodo
FROM	pessoa_fisica a;

