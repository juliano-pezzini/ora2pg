-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW atendimento_precaucao_v (nr_sequencia, dt_atualizacao, nm_usuario, dt_atualizacao_nrec, nm_usuario_nrec, nr_seq_precaucao, dt_inicio, dt_termino, nr_atendimento, nr_seq_motivo_isol, ie_situacao, dt_liberacao, dt_inativacao, nm_usuario_inativacao, ds_justificativa, dt_registro, cd_microorganismo, cd_topografia, dt_final_precaucao, cd_medico_solic, nr_seq_movto_termino, nm_usuario_fim, nm_usuario_lib_iso, ds_just_fim_prec, ds_observacao, ds_obs_lib_isolamento, dt_fim_acompanhamento, nr_seq_assinatura, nr_seq_assinat_inativacao, cd_responsavel, dt_analise, ie_analise, nm_usuario_analise, nr_seq_origem, ds_justificativa_analise, nr_seq_triagem, ds_motivo, ds_precaucao, ds_setor_atendimento) AS select	a.NR_SEQUENCIA,a.DT_ATUALIZACAO,a.NM_USUARIO,a.DT_ATUALIZACAO_NREC,a.NM_USUARIO_NREC,a.NR_SEQ_PRECAUCAO,a.DT_INICIO,a.DT_TERMINO,a.NR_ATENDIMENTO,a.NR_SEQ_MOTIVO_ISOL,a.IE_SITUACAO,a.DT_LIBERACAO,a.DT_INATIVACAO,a.NM_USUARIO_INATIVACAO,a.DS_JUSTIFICATIVA,a.DT_REGISTRO,a.CD_MICROORGANISMO,a.CD_TOPOGRAFIA,a.DT_FINAL_PRECAUCAO,a.CD_MEDICO_SOLIC,a.NR_SEQ_MOVTO_TERMINO,a.NM_USUARIO_FIM,a.NM_USUARIO_LIB_ISO,a.DS_JUST_FIM_PREC,a.DS_OBSERVACAO,a.DS_OBS_LIB_ISOLAMENTO,a.DT_FIM_ACOMPANHAMENTO,a.NR_SEQ_ASSINATURA,a.NR_SEQ_ASSINAT_INATIVACAO,a.CD_RESPONSAVEL,a.DT_ANALISE,a.IE_ANALISE,a.NM_USUARIO_ANALISE,a.NR_SEQ_ORIGEM,a.DS_JUSTIFICATIVA_ANALISE,a.NR_SEQ_TRIAGEM,
	substr(obter_descricao_padrao('MOTIVO_ISOLAMENTO','DS_MOTIVO',NR_SEQ_MOTIVO_ISOL),1,255) ds_motivo, 
	substr(obter_descricao_padrao('CIH_PRECAUCAO','DS_PRECAUCAO',NR_SEQ_PRECAUCAO),1,255) DS_PRECAUCAO, 
	substr(obter_descricao_padrao('SETOR_ATENDIMENTO','DS_SETOR_ATENDIMENTO',OBTER_SETOR_ATENDIMENTO(a.NR_ATENDIMENTO)),1,255) DS_SETOR_ATENDIMENTO 
FROM	ATENDIMENTO_PRECAUCAO a 
where	dt_inativacao is null;

