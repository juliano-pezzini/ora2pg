-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW processo_lock_v (ds_status, bd, sid, "serial#", programa, machine, acao, modulo, nm_objeto, locked_mode, status, audsid) AS SELECT SUBSTR(CASE WHEN L.request=0 THEN  'Lock'  ELSE 'Wait' END ,1,4) ds_status,
	   S.inst_id BD,
	   S.sid,
	   S.serial#,
	   SUBSTR(S.program,1,15) programa,
	   SUBSTR(S.machine,1,16) machine,
	   SUBSTR(S.action,1,15) acao,
	   SUBSTR(S.MODULE,1,15) modulo,
	   SUBSTR(u.object_name,1,25) nm_objeto,
	   SUBSTR(CASE WHEN L.lmode=0 THEN  'None' WHEN L.lmode=1 THEN  'Null (NULL)' WHEN L.lmode=2 THEN  'Row-S (SS)' WHEN L.lmode=3 THEN  'Row-X (SX)' WHEN L.lmode=4 THEN  'Share (S)' WHEN L.lmode=5 THEN  'S/Row-X (SSX)' WHEN L.lmode=6 THEN  'Exclusive (X)'  ELSE L.lmode END ,1,13) locked_mode,
	S.status,
	S.audsid
FROM 	GV$LOCK L,
	GV$SESSION S,
	user_objects u
WHERE	S.sid = L.sid
AND		u.object_id = L.ID1
ORDER BY 1;

