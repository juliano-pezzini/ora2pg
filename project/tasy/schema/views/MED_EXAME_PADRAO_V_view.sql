-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW med_exame_padrao_v (nr_sequencia, ie_pedido, nr_seq_grupo, ie_resultado, cd_medico, ie_formato_resultado, dt_atualizacao, nm_usuario, cd_procedimento, ie_origem_proced, ds_exame, ds_grupo, qt_decimais, ie_padrao, cd_exame_sist_orig, nr_seq_apresent, vl_padrao_minimo, vl_padrao_maximo, ds_unidade, ds_calculo, ds_rest_calculo, dt_atualizacao_nrec, nm_usuario_nrec, cd_estabelecimento, ie_lado, nr_seq_exame, nr_proc_interno, qt_exame, ds_justificativa, ie_situacao, ds_reduzida_exame, ie_quest_quantidade, ds_observacao, ie_quest_justif, ie_questiona_data, cd_doenca, cd_material_exame, ds_exame_padrao, ds_formato_resultado) AS SELECT A.NR_SEQUENCIA,A.IE_PEDIDO,A.NR_SEQ_GRUPO,A.IE_RESULTADO,A.CD_MEDICO,A.IE_FORMATO_RESULTADO,A.DT_ATUALIZACAO,A.NM_USUARIO,A.CD_PROCEDIMENTO,A.IE_ORIGEM_PROCED,A.DS_EXAME,A.DS_GRUPO,A.QT_DECIMAIS,A.IE_PADRAO,A.CD_EXAME_SIST_ORIG,A.NR_SEQ_APRESENT,A.VL_PADRAO_MINIMO,A.VL_PADRAO_MAXIMO,A.DS_UNIDADE,A.DS_CALCULO,A.DS_REST_CALCULO,A.DT_ATUALIZACAO_NREC,A.NM_USUARIO_NREC,A.CD_ESTABELECIMENTO,A.IE_LADO,A.NR_SEQ_EXAME,A.NR_PROC_INTERNO,A.QT_EXAME,A.DS_JUSTIFICATIVA,A.IE_SITUACAO,A.DS_REDUZIDA_EXAME,A.IE_QUEST_QUANTIDADE,A.DS_OBSERVACAO,A.IE_QUEST_JUSTIF,A.IE_QUESTIONA_DATA,A.CD_DOENCA,A.CD_MATERIAL_EXAME,
               coalesce(B.DS_PROCEDIMENTO,A.DS_EXAME) DS_EXAME_PADRAO,
               C.DS_VALOR_DOMINIO DS_FORMATO_RESULTADO
FROM valor_dominio c, med_exame_padrao a
LEFT OUTER JOIN procedimento b ON (A.CD_PROCEDIMENTO = B.CD_PROCEDIMENTO AND A.IE_ORIGEM_PROCED = B.IE_ORIGEM_PROCED)
WHERE A.IE_FORMATO_RESULTADO = C.VL_DOMINIO AND C.CD_DOMINIO = 1041;

