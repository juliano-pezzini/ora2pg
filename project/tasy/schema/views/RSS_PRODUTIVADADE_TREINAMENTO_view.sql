-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW rss_produtivadade_treinamento ("data inicio atividade", "data fim atividade", "tempo total em minutos", "tempo total minutos calculado", "tempo total em horas", "login executor", "nome executor", "sequencia funcao", "descrição função", "sequencia grupo funcao", "descrição grupo função", setor, sequencia, "ordem de serviço") AS SELECT  a.DT_ATIVIDADE Data Inicio Atividade,
        a.DT_FIM_ATIVIDADE Data Fim Atividade,
        a.QT_MINUTO Tempo Total em Minutos,
        trunc((86401*(a.DT_FIM_ATIVIDADE-a.DT_ATIVIDADE))/60) Tempo Total Minutos Calculado,
        (a.QT_MINUTO/60) Tempo Total em Horas,
        a.NM_USUARIO_EXEC Login Executor,
        substr(obter_nome_usuario(a.nm_usuario_exec),1,100) Nome Executor,
        a.NR_SEQ_FUNCAO Sequencia Funcao,
        substr(obter_desc_tipo_funcao(a.NR_SEQ_FUNCAO),1,100) Descrição Função,
        b.NR_SEQ_GRUPO_FUNCAO Sequencia Grupo Funcao,
        substr(obter_descricao_padrao('MAN_GRUPO_FUNCAO','DS_GRUPO',b.NR_SEQ_GRUPO_FUNCAO),1,255) Descrição Grupo Função,
        substr(obter_nome_setor(substr(obter_dados_usuario_opcao(a.nm_usuario_exec,'S'),1,255)),1,255) Setor,
        a.NR_SEQUENCIA Sequencia,
        a.NR_SEQ_ORDEM_SERV Ordem de Serviço
FROM    MAN_ORDEM_SERV_ATIV a,
        MAN_TIPO_FUNCAO b
WHERE   a.NR_SEQ_FUNCAO=b.NR_SEQUENCIA;

