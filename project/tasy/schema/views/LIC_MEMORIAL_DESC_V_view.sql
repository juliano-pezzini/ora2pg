-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW lic_memorial_desc_v (nr_seq_item, nr_sequencia, dt_emissao, dt_abertura_prev, qt_item, ds_item, ie_modalidade, ds_declaracao, ds_complemento, ds_unidade_medida) AS SELECT  b.nr_seq_item,
	a.nr_sequencia,
	a.dt_emissao,
	a.dt_abertura_prev,
	b.qt_item,
	coalesce(lic_obter_material_lic(m.nr_sequencia), obter_desc_material((obter_dados_lic_item('CD', b.nr_sequencia))::numeric )) || chr(13) || b.ds_adicional ds_item,
	(substr(obter_valor_dominio(1137, a.ie_modalidade),1,40) || ' NÂº ' || a.cd_processo) ie_modalidade,
	a.ds_declaracao,
	substr(obter_dados_lic_item('COMPL', b.nr_sequencia),1,100) ds_complemento,
	u.ds_unidade_medida
FROM unidade_medida u, lic_licitacao a, lic_item b
LEFT OUTER JOIN material_lic m ON (b.cd_material = m.cd_material)
WHERE b.nr_seq_licitacao 	= a.nr_sequencia  and u.cd_unidade_medida = b.cd_unid_medida;

