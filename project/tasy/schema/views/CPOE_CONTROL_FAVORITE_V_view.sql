-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW cpoe_control_favorite_v (ie_item, cd_item, ds_item, ds_tooltip, tp, ie_tipo_visao, cd, ie_pendente, nm_usuario) AS select	ie_item,
	cd_item,
	ds_item,
	ds_tooltip,
	'F' tp,
	ie_tipo_visao,
	cd,
  ie_pendente,
  nm_usuario
FROM (
select	'N' ie_item,
	nr_sequencia cd_item,
	'N_'||nr_sequencia cd,
	'<div class="wchecklist-label-column-desc">'|| cpoe_obter_ds_dieta(ie_tipo_dieta, cd_dieta, cd_material, cd_mat_prod1, nr_seq_tipo, NULL) || '</div>'
		|| '<div class="wchecklist-label-column-dosage">'|| to_char(qt_dose) || ' '  || cd_unidade_medida_dose || '</div>'
		|| '<div class="wchecklist-label-column-interval">'|| obter_desc_intervalo_prescr(cd_intervalo) || '</div>'  ds_item,
	cpoe_obter_ds_dieta(ie_tipo_dieta, cd_dieta, cd_material, cd_mat_prod1, nr_seq_tipo, NULL) || ' - '
		|| to_char(qt_dose) || ' ' || cd_unidade_medida_dose || ' ' || obter_desc_intervalo_prescr(cd_intervalo) ds_tooltip,
	ie_tipo_dieta ie_tipo_visao,
  ie_pendente,
  nm_usuario
from	cpoe_fav_dieta

union all

select	'M' ie_item,
	nr_sequencia cd_item,
	'M_'||nr_sequencia cd,
		'<div class="wchecklist-label-column-desc">'||  coalesce(ds_solucao, obter_desc_material_reduzido(cd_material))  || '</div>'
	|| 	'<div class="wchecklist-label-column-dosage">'|| CASE WHEN coalesce(qt_dose,0)=0 THEN  ds_dose_diferenciada  ELSE qt_dose END  || ' '  || cd_unidade_medida || '</div>'
	|| 	'<div class="wchecklist-label-column-interval">'|| obter_desc_intervalo_prescr(cd_intervalo)  || '</div>' ds_item,
	obter_desc_material_reduzido(cd_material) || ' - ' ||
	CASE WHEN coalesce(qt_dose, 0)=0 THEN  ds_dose_diferenciada  ELSE qt_dose END  || ' ' || cd_unidade_medida ||
	CASE WHEN coalesce(cd_mat_comp1, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_comp1) || ' - ' || CASE WHEN coalesce(qt_dose_comp1, 0)=0 THEN  ds_dose_diferenciada_comp7  ELSE qt_dose_comp1 END  || ' ' || CD_UNID_MED_DOSE_COMP1 END  || ' ' ||
	CASE WHEN coalesce(cd_mat_comp2, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_comp2) || ' - ' || CASE WHEN coalesce(qt_dose_comp2, 0)=0 THEN  ds_dose_diferenciada_comp7  ELSE qt_dose_comp2 END  || ' ' || CD_UNID_MED_DOSE_COMP2 END  || ' ' ||
	CASE WHEN coalesce(cd_mat_comp3, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_comp3) || ' - ' || CASE WHEN coalesce(qt_dose_comp3, 0)=0 THEN  ds_dose_diferenciada_comp7  ELSE qt_dose_comp3 END  || ' ' || CD_UNID_MED_DOSE_COMP3 END  || ' ' ||
	CASE WHEN coalesce(cd_mat_comp4, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_comp4) || ' - ' || CASE WHEN coalesce(qt_dose_comp4, 0)=0 THEN  ds_dose_diferenciada_comp7  ELSE qt_dose_comp4 END  || ' ' || CD_UNID_MED_DOSE_COMP4 END  || ' ' ||
	CASE WHEN coalesce(cd_mat_comp5, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_comp5) || ' - ' || CASE WHEN coalesce(qt_dose_comp5, 0)=0 THEN  ds_dose_diferenciada_comp7  ELSE qt_dose_comp5 END  || ' ' || CD_UNID_MED_DOSE_COMP5 END  || ' ' ||
	CASE WHEN coalesce(cd_mat_comp6, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_comp6) || ' - ' || CASE WHEN coalesce(qt_dose_comp6, 0)=0 THEN  ds_dose_diferenciada_comp7  ELSE qt_dose_comp6 END  || ' ' || CD_UNID_MED_DOSE_COMP6 END  || ' ' ||
	CASE WHEN coalesce(cd_mat_comp7, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_comp7) || ' - ' || CASE WHEN coalesce(qt_dose_comp7, 0)=0 THEN  ds_dose_diferenciada_comp7  ELSE qt_dose_comp7 END  || ' ' || CD_UNID_MED_DOSE_COMP7 END  || ' ' ||
	CASE WHEN coalesce(cd_mat_dil, '')='' THEN  ''  ELSE ' + ' || obter_desc_material_reduzido(cd_mat_dil) || ' - ' || CASE WHEN coalesce(qt_dose_dil, 0)=0 THEN  ds_dose_diferenciada_dil  ELSE qt_dose_dil END  || ' ' || cd_unidade_medida || ' ' || obter_desc_intervalo_prescr(cd_intervalo) END
	ds_tooltip,
	coalesce(ie_controle_tempo,'N') ie_tipo_visao,
  ie_pendente,
  nm_usuario
from	cpoe_fav_material
where	coalesce(ie_material, 'N') = 'N'

union all

select	'P' ie_item,
	nr_sequencia cd_item,
	'P_'||nr_sequencia cd,
	'<div class="wchecklist-label-column-desc">'|| obter_desc_proc_interno(nr_seq_proc_interno) || '</div>'
		|| '<div class="wchecklist-label-column-dosage">'|| to_char( qt_procedimento)   || '</div>'
		|| '<div class="wchecklist-label-column-interval">'|| obter_desc_intervalo_prescr(cd_intervalo)  || '</div>' ds_item,
	obter_desc_proc_interno(nr_seq_proc_interno) || ' ' || obter_desc_intervalo_prescr(cd_intervalo) ds_tooltip,
	NULL ie_tipo_visao,
  ie_pendente,
  nm_usuario
from	cpoe_fav_procedimento

union all

select	'G' ie_item,
	nr_sequencia cd_item,
	'G_'||nr_sequencia cd,
	'<div class="wchecklist-label-column-desc">'|| cpoe_obter_desc_gas(nr_seq_gas) || ' - ' || obter_valor_dominio(1299, ie_respiracao) || ' - ' || obter_valor_dominio(1612, ie_disp_resp_esp) || '</div>'
		|| '<div class="wchecklist-label-column-dosage">'|| to_char(qt_gasoterapia) || ' ' || ie_unidade_medida || '</div>'
		|| '<div class="wchecklist-label-column-interval">'|| obter_desc_intervalo_prescr(cd_intervalo)  || '</div>' ds_item,
	cpoe_obter_desc_gas(nr_seq_gas) || ' - ' || obter_valor_dominio(1299, ie_respiracao) || ' - ' || obter_valor_dominio(1612, ie_disp_resp_esp)
		|| ' - ' || to_char(qt_gasoterapia) || ' ' || ie_unidade_medida || ' ' || obter_desc_intervalo_prescr(cd_intervalo) ds_tooltip,
	NULL ie_tipo_visao,
  ie_pendente,
  nm_usuario
from	cpoe_fav_gasoterapia

union all

select	'R' ie_item,
	nr_sequencia cd_item,
	'R_'||nr_sequencia cd,
	'<div class="wchecklist-label-column-desc">'|| obter_desc_recomendacao(cd_recomendacao) || '</div>'
		|| '<div class="wchecklist-label-column-dosage">'|| '</div>'
		|| '<div class="wchecklist-label-column-interval">'|| obter_desc_intervalo_prescr(cd_intervalo)  || '</div>' ds_item,
	obter_desc_recomendacao(cd_recomendacao) || ' ' || obter_desc_intervalo_prescr(cd_intervalo) ds_tooltip,
	NULL ie_tipo_visao,
  ie_pendente,
  nm_usuario
from	cpoe_fav_recomendacao

union all

select	'MA' ie_item,
	nr_sequencia cd_item,
	'MA_'||nr_sequencia cd,
	'<div class="wchecklist-label-column-desc">'|| obter_desc_material_reduzido(cd_material) || '</div>'
		|| '<div class="wchecklist-label-column-dosage">'|| CASE WHEN coalesce(qt_dose,0)=0 THEN  ds_dose_diferenciada  ELSE qt_dose END  || ' '  || cd_unidade_medida || '</div>'
		|| '<div class="wchecklist-label-column-interval">'|| obter_desc_intervalo_prescr(cd_intervalo)  || '</div>' ds_item,
	obter_desc_material_reduzido(cd_material) || ' - ' || CASE WHEN coalesce(qt_dose,0)=0 THEN  ds_dose_diferenciada  ELSE qt_dose END 
		|| ' '  || cd_unidade_medida || ' ' || obter_desc_intervalo_prescr(cd_intervalo) ds_tooltip,
	null ie_tipo_visao,
  ie_pendente,
  nm_usuario
from	cpoe_fav_material
where	coalesce(ie_material, 'N') = 'S'
order by 1, ds_item) alias65;

