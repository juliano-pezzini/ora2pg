-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW objeto_schem_param_regra_v (nr_seq_obj_schem_param, cd_estabelecimento, cd_perfil, nm_usuario_param, vl_parametro, ds_cliente, cd_pais, ie_tipo) AS select 	a.nr_seq_obj_schem_param,
	a.cd_estabelecimento,
	null cd_perfil,
	null nm_usuario_param,
	a.vl_parametro,
	a.ds_cliente,
	null cd_pais,
	'E' ie_tipo
FROM 	OBJ_SCHEM_ESTAB a

union all

select	a.nr_seq_obj_schem_param, 
	a.cd_estabelecimento,
	a.cd_perfil,
	null nm_usuario_param,
	a.vl_parametro,
	a.ds_cliente,
	null cd_pais,
	'P' ie_tipo
from	OBJ_SCHEM_PERFIL a

union all
	
select	a.nr_seq_obj_schem_param, 
	a.cd_estabelecimento,
	null cd_perfil,
	a.nm_usuario_param,
	a.vl_parametro,
	a.ds_cliente,
	null cd_pais,
	'U' ie_tipo
from 	OBJ_SCHEM_USUARIO a

union all

select 	b.nr_sequencia nr_seq_obj_schem_param,
	null cd_estabelecimento, 
	null cd_perfil,
	null nm_usuario_param,
	a.ie_visualiza vl_parametro,
	null,
	a.cd_pais CD_PAIS,
	'C' ie_tipo
from tab_pais a
join objeto_schematic_param b on b.nr_seq_obj_sch = a.nr_seq_tab_ref

union all

select 	a.nr_sequencia nr_seq_obj_schem_param,
	null cd_estabelecimento, 
	null cd_perfil,
	null nm_usuario_param,
	coalesce(a.vl_parametro, a.VL_PARAMETRO_PADRAO) vl_parametro,
	null,
	null cd_pais,
	'G' ie_tipo
from OBJETO_SCHEMATIC_PARAM a;

