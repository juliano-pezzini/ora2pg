-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW hepic_lab_exame_laboratorio_v (cd_exame, nm_exame, ie_situacao) AS select  m.cd_exame,
			m.nm_exame,
			m.ie_situacao
	FROM    exame_laboratorio m,
			lab_exame_equip i,
			equipamento_lab e
	where   i.nr_seq_exame          = m.nr_seq_exame
	and     i.cd_equipamento        = e.cd_equipamento
	and     m.ie_formato_resultado  = 'SM'
	and     e.ds_sigla              = 'HEPIC'
	and     i.nr_seq_exame in (
									select  mx.nr_seq_exame
									from    exame_lab_metodo mx,
											metodo_exame_lab mm,
											metodo_exame_lab_int mi,
											equipamento_lab me
									where   mx.nr_seq_exame   = m.nr_seq_exame
									and     mm.nr_sequencia   = mx.nr_seq_metodo
									and     me.cd_equipamento = mi.cd_equipamento
									and     me.ds_sigla       = 'HEPIC'
									)
	and     i.nr_seq_exame in (
									select  mx.nr_seq_exame
									from    exame_lab_material mx,
											material_exame_lab mm,
											material_exame_lab_int mi,
											equipamento_lab me
									where   mx.nr_seq_exame   = m.nr_seq_exame
									and     mm.nr_sequencia   = mx.nr_seq_material
									and     me.cd_equipamento = mi.cd_equipamento
									and     me.ds_sigla       = 'HEPIC'
									)
	order by m.cd_exame;

