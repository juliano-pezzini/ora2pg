-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW os_recebida_gerencia_desenv_v (nr_sequencia, nr_seq_gerencia, dt_ordem_servico, nr_seq_grupo_des, nr_seq_localizacao, cd_funcao, ie_area_gerencia, ie_classificacao) AS select  a.nr_sequencia,
  b.nr_Seq_gerencia,
  a.dt_ordem_servico,
  a.nr_seq_grupo_des,
  a.nr_seq_localizacao,
  a.cd_funcao,
  g.ie_area_gerencia,
  a.ie_classificacao
FROM gerencia_wheb g, man_ordem_servico a
LEFT OUTER JOIN grupo_desenvolvimento b ON (a.nr_seq_grupo_des = b.nr_sequencia)
WHERE b.nr_seq_gerencia = g.nr_sequencia and exists ( select 1
    from  man_estagio_processo c,
      man_ordem_serv_estagio d
    where c.nr_sequencia = d.nr_seq_estagio
    and d.nr_seq_ordem = a.nr_sequencia
    and c.ie_desenv = 'S')

union

select  distinct
  a.nr_sequencia,
  2 nr_seq_gerencia,
  a.dt_ordem_servico,
  f.nr_seq_grupo,
  a.nr_seq_localizacao,
  a.cd_funcao,
  g.ie_area_gerencia,
  a.ie_classificacao
from  gerencia_wheb g,
  man_ordem_servico a,
  grupo_desenvolvimento b,
  man_ordem_serv_ativ d,
  grupo_desenvolvimento e,
  usuario_grupo_des f
where b.nr_sequencia    = a.nr_seq_grupo_des
and g.nr_sequencia      = b.nr_seq_gerencia
and b.nr_seq_gerencia   != 2
and d.nr_seq_ordem_serv = a.nr_sequencia
and e.nr_seq_gerencia   = 2
and f.nr_seq_grupo      = e.nr_sequencia
and d.nm_usuario_exec   = f.nm_usuario_grupo;

