-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW prescr_medica_cpoe_v (field_1, field_2, dt_ciencia_medico, nr_prescricao, ie_exige_ciencia, ie_checar_adep, nm_tabela, ie_agrupador, ie_ordered_on_behalf) AS select	a.nr_seq_mat_cpoe field_1,
		a.nr_seq_dieta_cpoe field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		b.ie_exige_ciencia,
		a.ie_checar_adep,
		'PRESCR_MATERIAL' nm_tabela,
		a.ie_agrupador ie_agrupador,
		b.ie_ordered_on_behalf  ie_ordered_on_behalf
FROM	prescr_material a,
		 cpoe_material b
where (a.nr_seq_mat_cpoe = b.nr_sequencia or a.nr_seq_dieta_cpoe = b.nr_sequencia) 

union
	
select	null field_1,
		a.nr_seq_dieta_cpoe field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		'N' ie_exige_ciencia,
		null ie_checar_adep,
		'PRESCR_DIETA' nm_tabela,
		null ie_agrupador,
		null  ie_ordered_on_behalf
from	prescr_dieta a,
		cpoe_dieta b
where	a.nr_seq_dieta_cpoe = b.nr_sequencia

union

select	a.nr_seq_proc_cpoe field_1,
		null field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		b.ie_exige_ciencia,
		'S' ie_checar_adep,
		'PRESCR_PROCEDIMENTO' nm_tabela,
		null ie_agrupador  , 
		b.ie_ordered_on_behalf  ie_ordered_on_behalf
from	prescr_procedimento a,
		cpoe_procedimento b
where	a.nr_seq_proc_cpoe = b.nr_sequencia

union

select	a.nr_seq_gas_cpoe field_1,
		null field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		'N' ie_exige_ciencia,
		null ie_checar_adep,
		'PRESCR_GASOTERAPIA' nm_tabela,
		null ie_agrupador  , 
		null  ie_ordered_on_behalf
from	prescr_gasoterapia a,
		cpoe_gasoterapia b
where	a.nr_seq_gas_cpoe = b.nr_sequencia

union

select	a.nr_seq_rec_cpoe field_1,
		null field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		'N' ie_exige_ciencia,
		null ie_checar_adep,
		'PRESCR_RECOMENDACAO' nm_tabela, 
		null ie_agrupador  , 
		null  ie_ordered_on_behalf
from	prescr_recomendacao a,
		cpoe_recomendacao b
where	a.nr_seq_rec_cpoe = b.nr_sequencia

union

select	a.nr_seq_hemo_cpoe field_1,
		null field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		'N' ie_exige_ciencia,
		null ie_checar_adep,
		'PRESCR_SOLIC_BCO_SANGUE' nm_tabela,  
		null ie_agrupador  , 
		null  ie_ordered_on_behalf
from	prescr_solic_bco_sangue a,
		cpoe_hemoterapia b
where	a.nr_seq_hemo_cpoe = b.nr_sequencia

union

select	a.nr_seq_dialise_cpoe field_1,
		null field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		'N' ie_exige_ciencia,
		null ie_checar_adep,
		'HD_PRESCRICAO' nm_tabela,
    	null ie_agrupador , 
		null  ie_ordered_on_behalf 
from	hd_prescricao a,
		cpoe_dialise b
where	a.nr_seq_dialise_cpoe = b.nr_sequencia

union

select	a.nr_seq_mat_cpoe field_1, 
		null field_2,
		b.dt_ciencia_medico,
		a.nr_prescricao,
		'N' ie_exige_ciencia,
		a.ie_checar_adep,
		'CPOE_ANATOMIA_PATOLOGICA' nm_tabela,
   		null ie_agrupador , 
		null  ie_ordered_on_behalf 
from	prescr_material a,
		cpoe_anatomia_patologica b
where	a.nr_seq_mat_cpoe = b.nr_sequencia;

