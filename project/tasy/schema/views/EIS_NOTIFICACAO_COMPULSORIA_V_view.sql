-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW eis_notificacao_compulsoria_v (dt_notificacao, nr_seq_doenca_compulsoria, cd_municipio_ibge, ds_municipio_ibge, cd_paciente, nm_paciente, cd_cep, ds_doenca_compulsoria, cd_doenca_cid, ds_doenca_cid, ie_tipo_notificacao, ds_tipo_notificacao, cd_setor_atendimento, ds_setor_atendimento) AS select	dt_notificacao,
		nr_seq_doenca_compulsoria,
		cd_municipio_ibge,
		substr(OBTER_DESC_MUNICIPIO_IBGE(cd_municipio_ibge),1,255) ds_municipio_ibge,
		cd_paciente,
		substr(obter_nome_pf(cd_paciente),1,255) nm_paciente,
		cd_cep,
		substr(coalesce(obter_desc_doenca_compulsoria(nr_seq_doenca_compulsoria),obter_desc_expressao(327119)),1,255) ds_doenca_compulsoria,
		CD_DOENCA_CID,
		substr(OBTER_DESCRICAO_DIAGNOSTICO(NR_ATENDIMENTO),1,90) ds_doenca_cid,
		IE_TIPO_NOTIFICACAO,
		substr(obter_valor_dominio(2607,IE_TIPO_NOTIFICACAO),1,90) ds_TIPO_NOTIFICACAO,
                                CD_SETOR_ATENDIMENTO,
    substr(coalesce(obter_nome_setor(CD_SETOR_ATENDIMENTO),obter_desc_expressao(327119)),1,90) ds_setor_atendimento
FROM	notificacao_sinan;

