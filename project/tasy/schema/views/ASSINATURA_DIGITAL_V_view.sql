-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW assinatura_digital_v (ds_item, ie_item, dt_registro, dt_liberacao, cd_pessoa_fisica, nr_atendimento, cd_profissional, ie_item_prontuario, cd_perfil_ativo, nr_seq_registro, dt_atualizacao, nm_usuario, dt_inativacao, nm_usuario_inativacao, nr_seq_assinatura, nr_seq_assinat_inativacao) AS select	'Prescrição' ds_item,-- 
	1 ie_item,
	dt_prescricao dt_registro, 
	coalesce(dt_liberacao_medico,dt_liberacao) dt_liberacao, 
	cd_pessoa_fisica, 
	nr_atendimento, 
	cd_prescritor cd_profissional, 
	4 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_prescricao nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_suspensao dt_inativacao, 
	nm_usuario_susp nm_usuario_inativacao, 
	nr_seq_assinatura, 
	null nr_seq_assinat_inativacao 
FROM	PRESCR_MEDICA 

union all
 
select	'Evolução' ds_item,-- 
	2 ie_item, 
	b.dt_evolucao dt_registro, 
	b.dt_liberacao, 
	b.cd_pessoa_fisica, 
	b.nr_atendimento, 
	b.cd_medico cd_profissional, 
	5 ie_item_prontuario, 
	b.cd_perfil_ativo, 
	b.cd_evolucao nr_seq_registro, 
	b.dt_atualizacao, 
	b.nm_usuario, 
	b.dt_inativacao, 
	nm_usuario_inativacao, 
	b.nr_seq_assinatura, 
	b.nr_seq_assinat_inativacao 
from	funcao_parametro a, 
	EVOLUCAO_PACIENTE b 
where	((b.dt_liberacao is not null) or (coalesce(a.vl_parametro, a.vl_parametro_padrao) = 'N')) 
and	a.cd_funcao	= 0 
and	a.nr_sequencia	= 37 

union all
 
select	'Monitorização respiratória' ds_item,-- 
	3 ie_item, 
	DT_MONITORIZACAO dt_registro, 
	dt_liberacao, 
	cd_pessoa_fisica, 
	nr_atendimento, 
	cd_pessoa_fisica cd_profissional, 
	13 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	ATENDIMENTO_MONIT_RESP 

union all
 
select	'Monitorização hemodinâmica' ds_item,-- 
	3 ie_item, 
	DT_MONITORACAO dt_registro, 
	dt_liberacao, 
	null, 
	nr_atendimento, 
	CD_PESSOA_FISICA cd_profissional, 
	13 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	ATEND_MONIT_HEMOD 

union all
 
select	'Monitorização de analgesia' ds_item,-- 
	3 ie_item, 
	dt_avaliacao dt_registro, 
	dt_liberacao, 
	null, 
	nr_atendimento, 
	CD_PROFISSIONAL cd_profissional, 
	13 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	ATEND_AVAL_ANALGESIA 

union all
 
select	'Sinais vitais e monitorização geral' ds_item,-- 
	3 ie_item, 
	dt_sinal_vital dt_registro, 
	dt_liberacao, 
	cd_paciente, 
	nr_atendimento, 
	cd_pessoa_fisica cd_profissional, 
	13 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	atendimento_sinal_vital 

union all
 
select	'Analisador bioquímico portátil' ds_item,-- 
	3 ie_item, 
	DT_ANALISE dt_registro, 
	dt_liberacao, 
	null, 
	nr_atendimento, 
	cd_pessoa_fisica cd_profissional, 
	13 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	ATEND_ANAL_BIOQ_PORT 

union all
 
select	'Anamnese',-- 
	4, 
	dt_ananmese, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_medico, 
	83 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	anamnese_paciente 

union all
 
select	'Curativos',-- 
	11, 
	dt_liberacao, 
	dt_liberacao, 
	cd_pessoa_fisica, 
	0, 
	cd_medico, 
	53 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	cur_ferida 

union all
 
select	'Diagnóstico',-- 
	12, 
	dt_diagnostico, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	substr(Obter_medico_diagnostico(nr_atendimento,dt_diagnostico,'C'),1,10), 
	1 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_seq_interno nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	diagnostico_doenca 

union all
 
select	'Receitas', -- 
	46, 
	dt_receita, 
	dt_liberacao, 
	cd_pessoa_fisica, 
	nr_atendimento, 
	cd_medico, 
	73 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	med_receita 

union all
 
select	'SAE', -- 
	47, 
	dt_prescricao, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_prescritor, 
	383 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	pe_prescricao 

union all
 
select	'Check-up',-- 
	48, 
	dt_evolucao, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_medico, 
	233 ie_item_prontuario, 
	cd_perfil_ativo, 
	cd_evolucao nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	evolucao_paciente 
where	ie_evolucao_clinica in ('AE', 'CO') 

union all
 
select	'Histórico de Saúde - Doenças prévias e atuais',-- 
	49, 
	dt_registro, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	obter_dados_usuario_opcao(nm_usuario,'C'), 
	93 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	paciente_antec_clinico 

union all
	 
select	'Orientações Alta',-- 
	53, 
	dt_liberacao, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	obter_dados_usuario_opcao(nm_usuario,'C'), 
	153 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	atendimento_alta 

union all
	 
select	'Ganhos e Perdas',-- 
	66, 
	dt_medida, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_profissional, 
	733 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	atendimento_perda_ganho 

union all
	 
select	'Histórico de Saúde - Alergias',-- 
	68, 
	dt_registro, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	paciente_alergia 

union all
	 
select	'Histórico de Saúde - Medicamentos em uso',-- 
	69, 
	dt_registro, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	PACIENTE_MEDIC_USO 

union all
	 
select	'Histórico de Saúde - Hábitos',-- 
	70, 
	dt_registro, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	PACIENTE_HABITO_VICIO 

union all
	 
select	'Histórico de Saúde - Cirurgias',-- 
	71, 
	DT_ATUALIZACAO_NREC dt_registro, 
	dt_liberacao, 
	'', 
	null, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	HISTORICO_SAUDE_CIRURGIA 

union all
	 
select	'Histórico de Saúde - Ocorrências',-- 
	72, 
	dt_registro, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	PACIENTE_OCORRENCIA 

union all
	 
select	'Histórico de Saúde - Restrições',-- 
	73, 
	DT_ATUALIZACAO_NREC dt_registro, 
	dt_liberacao, 
	'', 
	null, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	PACIENTE_REP_PRESCRICAO 

union all
	 
select	'Histórico de Saúde - Acessórios',-- 
	74, 
	dt_registro, 
	dt_liberacao, 
	'', 
	null, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	PACIENTE_ACESSORIO 

union all
	 
select	'Histórico de Saúde - Exames',-- 
	75, 
	dt_registro, 
	dt_liberacao, 
	'', 
	null, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	PACIENTE_EXAME 

union all
	 
select	'Histórico de Saúde - Transfusão',-- 
	76, 
	dt_registro, 
	dt_liberacao, 
	'', 
	null, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	null, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura, 
	nr_seq_assinat_inativacao 
from	PACIENTE_TRANSFUSAO;

