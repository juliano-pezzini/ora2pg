-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW localizador_grupo_agenda_int (nr_sequencia, ds_area, ds_grupo, nm_curto, ds_proc_exame, nr_seq_proc_interno, cd_pessoa_fisica, ds_especialidade, nr_seq_area, nr_seq_1, nr_seq_2, nr_apres_1, nr_apres_2, nr_apres_3, cd_estabelecimento, ds_pseudo) AS select	c.nr_sequencia,
	a.ds_area,
	b.ds_grupo,
	c.nm_curto,
	d.ds_proc_exame,
	c.nr_seq_proc_interno,
	e.cd_pessoa_fisica,
	f.ds_especialidade,
	b.nr_sequencia nr_seq_area,
	a.nr_sequencia nr_seq_1,
	c.nr_sequencia nr_seq_2,
	a.nr_seq_apres nr_apres_1,
	b.nr_seq_apres nr_apres_2,
	c.nr_seq_apres nr_apres_3,
	a.cd_estabelecimento,
	g.ds_pseudo
FROM agenda_int_grupo b, agenda_int_area a, agenda_int_grupo_item c
LEFT OUTER JOIN proc_interno d ON (c.nr_seq_proc_interno = d.nr_sequencia)
LEFT OUTER JOIN especialidade_medica f ON (c.cd_especialidade = f.cd_especialidade)
LEFT OUTER JOIN pessoa_fisica e ON (c.cd_medico = e.cd_pessoa_fisica)
LEFT OUTER JOIN proc_interno_pseudo g ON (d.nr_sequencia = g.nr_seq_proc_interno)
WHERE a.nr_sequencia = b.nr_seq_area and b.nr_sequencia = c.nr_seq_grupo     and coalesce(a.ie_exame_adicional,'N') = 'N' and coalesce(a.ie_situacao,'A') = 'A';

