-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW eis_os_erro_gerencia_v (nr_sequencia, dt_ordem_servico, nr_seq_gerencia, cd_pessoa_fisica, nr_seq_grupo, ds_dano_breve, ie_forma_origem, ie_origem_erro, ie_ident_erro, ie_gravidade, nr_seq_tipo, ds_grupo, dt_liberacao, qt_cliente, ie_classificacao, nr_seq_erro, ds_acao_imediata, ds_solucao, ds_gerencia, nr_seq_ordem_origem, nr_seq_localizacao, cd_funcao, nr_seq_severidade_wheb, nr_seq_grupo_des, nr_seq_severidade, nr_seq_equipamento, cd_pessoa_resp, ie_origem_os, nm_usuario_liberou_erro, nr_seq_lp, dt_ocorrencia_erro, ie_prioridade_cliente, ie_grau_satisfacao, ie_base_cliente, ie_libera_correcao, nr_seq_grupo_des_erro, nr_seq_subtipo, ie_plataforma, ds_grupo_desenvolvimento, ds_prior_cliente, ds_severidade_cliente, ds_severidade_philips, ds_localizacao, ds_grau_satisfacao, ds_funcao, ds_tipo, ds_subtipo, ds_linguagem, ds_detectado, ds_base_cliente, ds_forma_liberacao, ds_origem_defeito, ds_tempo_os, ds_item, nm_pessoa_defeito, qt_min_total_os, nm_pessoa_resp_teste) AS select	nr_sequencia,
		dt_ordem_servico, 
		nr_seq_gerencia, 
		cd_pessoa_fisica, 
		nr_sequencia nr_seq_grupo, 
		ds_dano_breve, 
		ie_forma_origem, 
		ie_origem_erro, 
		ie_ident_erro, 
		ie_gravidade, 
		nr_seq_tipo, 
		ds_grupo, 
		dt_liberacao, 
		qt_cliente, 
		ie_classificacao, 
		nr_sequencia nr_seq_erro, 
		ds_acao_imediata ds_acao_imediata, 
		ds_solucao ds_solucao, 
		ds_gerencia ds_gerencia, 
		nr_seq_ordem_origem, 
		nr_seq_localizacao, 
		cd_funcao, 
		nr_seq_severidade_wheb, 
		nr_seq_grupo_des, 
		nr_seq_severidade, 
		nr_seq_equipamento, 
		cd_pessoa_resp, 
		ie_origem_os, 
		nm_usuario_liberou_erro, 
		nr_seq_lp, 
		dt_ocorrencia_erro, 
		ie_prioridade_cliente, 
		ie_grau_satisfacao, 
		ie_base_cliente, 
		ie_libera_correcao, 
		nr_seq_grupo_des_erro, 
		nr_seq_subtipo, 
		ie_plataforma, 
		substr(obter_desc_grupo_desenv(nr_seq_grupo_des_erro),1,255) ds_grupo_desenvolvimento, 
		obter_valor_dominio(1046,ie_prioridade_cliente) ds_prior_cliente, 
		man_obter_desc_severidade(nr_seq_severidade) ds_severidade_cliente, 
		man_obter_desc_severidade(nr_seq_severidade_wheb) ds_severidade_philips, 
		substr(obter_desc_man_localizacao(nr_seq_localizacao),1,255) ds_localizacao, 
		obter_valor_dominio(1197,ie_grau_satisfacao) ds_grau_satisfacao, 
		substr(obter_desc_funcao(cd_funcao),1,255) ds_funcao, 
		substr(obter_descricao_padrao('MAN_TIPO_ERRO_OS', 'DS_TIPO', nr_seq_tipo), 1, 200) ds_tipo, 
		substr(obter_descricao_padrao('MAN_SUBTIPO_ERRO_OS', 'DS_SUBTIPO', nr_seq_subtipo), 1, 200) ds_subtipo, 
		substr(man_obter_nome_lp(nr_seq_lp),1,255) ds_linguagem, 
		obter_valor_dominio(2682,ie_ident_erro) ds_detectado, 
		obter_valor_dominio(4319,ie_base_cliente) ds_base_cliente, 
		obter_valor_dominio(3378,ie_libera_correcao) ds_forma_liberacao, 
		obter_valor_dominio(2852,ie_forma_origem) ds_origem_defeito, 
		LPAD(obter_idade(dt_ocorrencia_erro,dt_ordem_servico,'M'),3,'0') ds_tempo_os, 
		substr(obter_descricao_padrao('FUNCAO_ITEM', 'DS_ITEM', nr_seq_func_item), 1, 200) ds_item, 
		substr(obter_nome_pf(cd_pessoa_fisica),1,100) nm_pessoa_defeito, 
		man_obter_min_ordem_real(nr_sequencia) qt_min_total_os, 
		substr(obter_nome_pf(cd_pessoa_resp),1,100) nm_pessoa_resp_teste 
FROM	os_erro_gerencia_v 
where	dt_liberacao is not null;

