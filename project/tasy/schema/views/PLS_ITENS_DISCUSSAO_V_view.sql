-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW pls_itens_discussao_v (ie_ordem, ie_tipo, ds_tipo, cd_item, ds_item, ds_mat_a900, ds_item_imp, nr_sequencia, qt_contestada, vl_contestado, qt_reconh_orig, vl_reconh_orig, qt_recurso, vl_recurso, qt_aceita, vl_aceito, qt_negada, vl_negado, qt_ndc, vl_ndc, ds_tipo_acordo, ie_status_acao, cd_item_imp, vl_prestador, vl_assumido, nr_seq_discussao) AS select	distinct
	1 ie_ordem, 
	'R' ie_tipo, 
	'Procedimentos' ds_tipo, 
	'' cd_item, 
	'' ds_item, 
	'' ds_mat_a900, 
	'' ds_item_imp, 
	null nr_sequencia, 
	null qt_contestada, 
	null vl_contestado, 
	null qt_reconh_orig, 
	null vl_reconh_orig, 
	null qt_recurso, 
	null vl_recurso, 
	null qt_aceita, 
	null vl_aceito, 
	null qt_negada, 
	null vl_negado, 
	null qt_ndc, 
	null vl_ndc, 
	'' ds_tipo_acordo, 
	'' ie_status_acao, 
	'' cd_item_imp, 
	null vl_prestador, 
	null vl_assumido, 
	a.nr_seq_discussao 
FROM	pls_discussao_proc a 

union all
 
select	2 ie_ordem, 
	'P' ie_tipo, 
	'   ' ds_tipo, 
	substr(pls_obter_cod_proced_conta(nr_seq_conta_proc,null),1,20) cd_item, 
	substr(pls_obter_dados_conta_proc(nr_seq_conta_proc,'D'),1,50) ds_item, 
	null ds_mat_a900, 
	substr(pls_obter_dados_conta_proc(nr_seq_conta_proc,'DI'),1,50) ds_item_imp, 
	a.nr_sequencia, 
	a.qt_contestada, 
	a.vl_contestado, 
	a.qt_reconh_orig, 
	a.vl_reconh_orig, 
	a.qt_recurso, 
	a.vl_recurso, 
	a.qt_aceita, 
	a.vl_aceito, 
	a.qt_negada, 
	a.vl_negado, 
	a.qt_ndc, 
	a.vl_ndc, 
	substr(obter_valor_dominio(3677,a.ie_tipo_acordo),1,50) ds_tipo_acordo, 
	substr(pls_status_valor_disc(null, a.nr_sequencia, null, null), 1, 50) ie_status_acao, 
	substr(pls_obter_dados_conta_proc(nr_seq_conta_proc,'CIMP'),1,50) cd_item_imp, 
	a.vl_prestador, 
	a.vl_assumido, 
	a.nr_seq_discussao 
from	pls_discussao_proc a 

union all
 
select	distinct 
	3 ie_ordem, 
	'R' ie_tipo, 
	'Materiais' ds_tipo, 
	'' cd_item, 
	'' ds_item, 
	'' ds_mat_a900, 
	'' ds_item_imp, 
	null nr_sequencia, 
	null qt_contestada, 
	null vl_contestado, 
	null qt_reconh_orig, 
	null vl_reconh_orig, 
	null qt_recurso, 
	null vl_recurso, 
	null qt_aceita, 
	null vl_aceito, 
	null qt_negada, 
	null vl_negado, 
	null qt_ndc, 
	null vl_ndc, 
	'' ds_tipo_acordo, 
	'' ie_status_acao, 
	'' cd_item_imp, 
	null vl_prestador, 
	null vl_assumido, 
	a.nr_seq_discussao 
from	pls_discussao_mat a 

union all
 
select	4 ie_ordem, 
	'M' ie_tipo, 
	'   ' ds_tipo, 
	substr(pls_obter_dados_conta_mat(nr_seq_conta_mat,'O'),1,20) cd_item, 
	substr(pls_obter_dados_conta_mat(nr_seq_conta_mat,'D'),1,50) ds_item, 
	substr(pls_obter_dados_conta_mat(nr_seq_conta_mat,'DA'),1,50) ds_mat_a900, 
	substr(pls_obter_dados_conta_mat(nr_seq_conta_mat,'DI'),1,50) ds_item_imp, 
	a.nr_sequencia, 
	a.qt_contestada, 
	a.vl_contestado, 
	a.qt_reconh_orig, 
	a.vl_reconh_orig, 
	a.qt_recurso, 
	a.vl_recurso, 
	a.qt_aceita, 
	a.vl_aceito, 
	a.qt_negada, 
	a.vl_negado, 
	a.qt_ndc, 
	a.vl_ndc, 
	substr(obter_valor_dominio(3677,a.ie_tipo_acordo),1,50) ds_tipo_acordo, 
	substr(pls_status_valor_disc(null, null, a.nr_sequencia, null), 1, 50) ie_status_acao, 
	substr(pls_obter_dados_conta_mat(nr_seq_conta_mat,'CMI'),1,50) cd_item_imp, 
	a.vl_prestador, 
	a.vl_assumido, 
	a.nr_seq_discussao 
from	pls_discussao_mat a;

