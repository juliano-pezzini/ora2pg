-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW integridade_v (nm_integridade, ds_tipo, nm_tabela, ie_status) AS select  substr(nm_objeto,1,30) nm_integridade,
         (select max(CASE WHEN b.constraint_type='P' THEN 'Primary Key' WHEN b.constraint_type='R' THEN 'Foreing Key' WHEN b.constraint_type='U' THEN 'Unique Key' END ) FROM	user_constraints b where b.constraint_name = w_inconsistencia_base.nm_objeto) ds_tipo,
         substr(nm_tabela,1,30) nm_tabela,
         'DISABLED' ie_status
    from w_inconsistencia_base
    where  ds_motivo = obter_desc_expressao(308367);

