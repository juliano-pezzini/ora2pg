-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW material_farm_ambulatorial_v (cd_material, cd_unidade_medida_prescr, cd_unidade_medida_consumo, cd_intervalo_padrao, qt_dose_prescricao, qt_minimo_multiplo_solic, cd_unidade_medida, ie_via_aplicacao, cd_estabelecimento) AS SELECT  b.cd_material cd_material,
	b.cd_unidade_medida_prescr cd_unidade_medida_prescr,
	b.cd_unidade_medida_consumo cd_unidade_medida_consumo,
	b.cd_intervalo_padrao cd_intervalo_padrao,
	b.qt_dose_prescricao qt_dose_prescricao,
	b.qt_minimo_multiplo_solic qt_minimo_multiplo_solic,
	'' cd_unidade_medida,
	ie_via_aplicacao ie_via_aplicacao,
	c.cd_estabelecimento cd_estabelecimento
FROM    material b,
	material_estab c
where   b.cd_material = c.cd_material
and	coalesce(b.ie_situacao,'A') = 'A'

union all

SELECT  a.cd_material cd_material,
	'' cd_unidade_medida_prescr,
	'' cd_unidade_medida_consumo,
	'' cd_intervalo_padrao,
	null qt_dose_prescricao,
	null qt_minimo_multiplo_solic,
	a.cd_unidade_medida cd_unidade_medida,
	a.ie_via_aplicacao ie_via_aplicacao,
	a.cd_estabelecimento cd_estabelecimento
FROM    fa_medic_farmacia_amb a
WHERE   coalesce(a.ie_situacao,'A') = 'A';

