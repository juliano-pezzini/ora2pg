-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW bft_problem_list_v (encounter_id, icd_code, icd_description, problem_description, release_date, diagnosis_type_code, diagnosis_type_desc, problem_start_date, problem_status_code, problem_status_desc) AS select	a.nr_atendimento encounter_id,
	a.cd_doenca icd_code,
	b.ds_doenca_cid icd_description,
	a.ds_problema problem_description,
	a.dt_liberacao release_date,
	a.ie_tipo_diagnostico  diagnosis_type_code,
	substr(obter_valor_dominio_idioma(13,a.ie_tipo_diagnostico,wheb_usuario_pck.get_nr_seq_idioma),1,255)  diagnosis_type_desc,
	a.dt_inicio problem_start_date,
	a.ie_status problem_status_code,
	substr(obter_valor_dominio_idioma(8221,a.ie_status,wheb_usuario_pck.get_nr_seq_idioma),1,255)  problem_status_desc
FROM	lista_problema_pac a,
	cid_doenca b
where	a.cd_doenca  = b.cd_doenca_cid
and	a.dt_liberacao is not null
and	a.dt_inativacao is null;

