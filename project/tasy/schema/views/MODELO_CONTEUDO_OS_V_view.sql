-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW modelo_conteudo_os_v (nr_sequencia, nr_seq_modelo, nr_seq_perg_visual, nr_seq_pergunta, ie_readonly, ie_obrigatorio, ie_tabstop, ie_italico, ie_negrito, dt_atualizacao, nm_usuario, ie_sublinhado, dt_atualizacao_nrec, nm_usuario_nrec, ds_formula, qt_pos_esquerda, nr_seq_apres, qt_tamanho, ds_label, qt_tam_grid, qt_altura, ds_label_grid, qt_tam_label, ds_mascara, ds_sql, qt_desloc_dir, ie_alterar_label, qt_fonte, vl_padrao, ds_cor, qt_altura_perg_visual, ie_apres_cad_pre, qt_topo_campo, qt_intervalo_campo, ie_componente, ds_item, ie_tipo_atributo, cd_dominio, qt_max_caracter, nr_seq_grupo, ds_grupo, nr_seq_apres_grupo) AS select	a.NR_SEQUENCIA,
	a.NR_SEQ_MODELO,
	a.NR_SEQ_PERG_VISUAL,
	a.NR_SEQ_PERGUNTA,
	a.IE_READONLY,
	a.IE_OBRIGATORIO,
	a.IE_TABSTOP,
	a.IE_ITALICO,
	a.IE_NEGRITO,
	a.DT_ATUALIZACAO,
	a.NM_USUARIO,
	a.IE_SUBLINHADO,
	a.DT_ATUALIZACAO_NREC,
	a.NM_USUARIO_NREC,
	a.DS_FORMULA,
	a.QT_POS_ESQUERDA,
	a.NR_SEQ_APRES,
	a.QT_TAMANHO,
	a.DS_LABEL,
	a.QT_TAM_GRID,
	a.QT_ALTURA,
	a.DS_LABEL_GRID,
	a.QT_TAM_LABEL,
	a.DS_MASCARA,
	a.DS_SQL,
	a.QT_DESLOC_DIR,
	a.IE_ALTERAR_LABEL,
	a.QT_FONTE,
	a.VL_PADRAO,
	a.DS_COR,
	a.QT_ALTURA_PERG_VISUAL,
	a.IE_APRES_CAD_PRE,
	b.qt_topo_campo,
	b.qt_intervalo_campo,
	c.ie_componente,
	coalesce(ds_label,substr(obter_desc_pergunta_os(nr_seq_pergunta),1,255)) ds_item,
	c.ie_tipo_atributo,
	c.cd_dominio,
	0 QT_MAX_CARACTER,
	null nr_seq_grupo,
	null ds_grupo,
	null nr_seq_apres_grupo
FROM	pergunta_os        c,
	modelo_os          b,
	modelo_conteudo_os a
where	a.nr_seq_modelo         = b.nr_sequencia
and	a.nr_seq_pergunta       = c.nr_sequencia

union

select	a.NR_SEQUENCIA,
	a.NR_SEQ_MODELO,
	a.NR_SEQ_PERG_VISUAL,
	a.NR_SEQ_PERGUNTA,
	a.IE_READONLY,
	a.IE_OBRIGATORIO,
	a.IE_TABSTOP,
	a.IE_ITALICO,
	a.IE_NEGRITO,
	a.DT_ATUALIZACAO,
	a.NM_USUARIO,
	a.IE_SUBLINHADO,
	a.DT_ATUALIZACAO_NREC,
	a.NM_USUARIO_NREC,
	a.DS_FORMULA,
	a.QT_POS_ESQUERDA,
	a.NR_SEQ_APRES,
	a.QT_TAMANHO,
	a.DS_LABEL,
	a.QT_TAM_GRID,
	a.QT_ALTURA,
	a.DS_LABEL_GRID,
	a.QT_TAM_LABEL,
	a.DS_MASCARA,
	a.DS_SQL,
	a.QT_DESLOC_DIR,
	a.IE_ALTERAR_LABEL,
	a.QT_FONTE,
	a.VL_PADRAO,
	a.DS_COR,
	a.QT_ALTURA_PERG_VISUAL,
	a.IE_APRES_CAD_PRE,
	b.qt_topo_campo,
	b.qt_intervalo_campo,
	'Visual' ie_componente,
	coalesce(ds_label,ds_pergunta) ds_item,
	null ie_tipo_atributo,
	null cd_dominio,
	0 QT_MAX_CARACTER,
	null nr_seq_grupo,
	null ds_grupo,
	null nr_seq_apres_grupo
from	pergunta_visual_os c,
	modelo_os          b,
	modelo_conteudo_os a
where	a.nr_seq_modelo         = b.nr_sequencia
and	a.nr_seq_perg_visual    = c.nr_sequencia;

