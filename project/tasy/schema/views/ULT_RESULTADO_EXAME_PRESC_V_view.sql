-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW ult_resultado_exame_presc_v (nr_seq_resultado, cd_pessoa_fisica, nr_seq_exame, ie_formato_resultado, qt_resultado, pr_resultado, ds_resultado) AS select 	a.nr_seq_resultado, b.cd_pessoa_fisica, c.nr_seq_exame, d.ie_formato_resultado, c.qt_resultado, c.pr_resultado, c.ds_resultado
FROM	exame_laboratorio d,
		exame_lab_result_item c,
		exame_lab_resultado a,
		prescr_medica b
where	a.nr_seq_resultado 	= c.nr_seq_resultado
and		d.nr_seq_exame 		= c.nr_seq_exame
and		b.nr_prescricao		= a.nr_prescricao
and 	a.dt_resultado between LOCALTIMESTAMP - interval '120 days' and LOCALTIMESTAMP
and 	b.dt_suspensao is null
and 	b.DT_PRESCRICAO BETWEEN LOCALTIMESTAMP - interval '180 days' AND LOCALTIMESTAMP;

