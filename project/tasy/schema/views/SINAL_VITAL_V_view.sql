-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW sinal_vital_v (nr_atendimento, cd_pessoa_fisica, qt_peso, qt_fc, qt_fr, qt_sat, qt_pa_min, qt_pa_max, qt_pam, qt_sc, qt_imc, qt_altura, qt_temperatura, qt_glicemia_capilar, ie_aparelho_pa, ie_membro, qt_peso_loco, qt_autura_loco, qt_redsc_loco, qt_sc_loco, qt_auc_loco, ds_creatinina_loco, qt_clearence_loco, qt_carboplatina_loco) AS select	a.nr_atendimento,
	b.cd_pessoa_fisica,
	obter_sinal_vital(a.nr_atendimento, 'Peso') qt_peso,
	obter_sinal_vital(a.nr_atendimento, 'FC') qt_fc,
	obter_sinal_vital(a.nr_atendimento, 'FR') qt_fr, 
	obter_sinal_vital(a.nr_atendimento, 'SAT') qt_sat, 
	obter_sinal_vital(a.nr_atendimento, 'PAMIN') qt_pa_min, 
	obter_sinal_vital(a.nr_atendimento, 'PAMAX') qt_pa_max, 
	obter_sinal_vital(a.nr_atendimento, 'PAM') qt_pam, 	
	obter_sinal_vital(a.nr_atendimento, 'SC') qt_sc,
	obter_sinal_vital(a.nr_atendimento, 'IMC') qt_imc,
	obter_sinal_vital(a.nr_atendimento, 'Altura') qt_altura,
	obter_sinal_vital(a.nr_atendimento, 'Temp') qt_temperatura,
	obter_sinal_vital(a.nr_atendimento, 'GC') qt_glicemia_capilar,
	obter_sinal_vital_char(a.nr_atendimento, 'IA') ie_aparelho_pa,
	obter_sinal_vital_char(a.nr_atendimento, 'IM') ie_membro,
	(obter_loco_regional(a.cd_pessoa_fisica,'PESO'))::numeric  qt_peso_loco,
	(obter_loco_regional(a.cd_pessoa_fisica,'ALTURA'))::numeric  qt_autura_loco,
	(obter_loco_regional(a.cd_pessoa_fisica,'REDSC'))::numeric  qt_redsc_loco,
	(obter_loco_regional(a.cd_pessoa_fisica,'SC'))::numeric  qt_sc_loco,
	(obter_loco_regional(a.cd_pessoa_fisica,'AUC'))::numeric  qt_auc_loco,
	substr(obter_loco_regional(a.cd_pessoa_fisica,'CREATININA'),1,30) ds_creatinina_loco,
	(obter_loco_regional(a.cd_pessoa_fisica,'CLEARENCE'))::numeric  qt_clearence_loco,
	(obter_loco_regional(a.cd_pessoa_fisica,'CARBOPLATINA'))::numeric  qt_carboplatina_loco
FROM	Pessoa_fisica b, 
	atendimento_paciente a
where	a.cd_pessoa_fisica = b.cd_pessoa_fisica;

