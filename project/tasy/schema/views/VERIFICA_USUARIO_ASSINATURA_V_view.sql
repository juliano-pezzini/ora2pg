-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW verifica_usuario_assinatura_v (ds_item, ds_funcao, ie_item, dt_registro, dt_liberacao, cd_pessoa_fisica, nr_atendimento, cd_profissional, ie_item_prontuario, cd_perfil_ativo, nr_seq_registro, dt_atualizacao, nm_usuario, dt_inativacao, nm_usuario_inativacao, nr_seq_assinatura) AS select	'Prescrição' ds_item,-- 
	'REP' ds_funcao,
	1 ie_item, 
	dt_prescricao dt_registro, 
	coalesce(dt_liberacao_medico,dt_liberacao) dt_liberacao, 
	cd_pessoa_fisica, 
	nr_atendimento, 
	cd_prescritor cd_profissional, 
	4 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_prescricao nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_suspensao dt_inativacao, 
	nm_usuario_susp nm_usuario_inativacao, 
	nr_seq_assinatura 
FROM	prescr_medica 

union all
 
select	'Evolução' ds_item,-- 
	'PEP', 
	2 ie_item, 
	b.dt_evolucao dt_registro, 
	b.dt_liberacao, 
	b.cd_pessoa_fisica, 
	b.nr_atendimento, 
	b.cd_medico cd_profissional, 
	5 ie_item_prontuario, 
	b.cd_perfil_ativo, 
	b.cd_evolucao nr_seq_registro, 
	b.dt_atualizacao, 
	b.nm_usuario, 
	b.dt_inativacao, 
	nm_usuario_inativacao, 
	b.nr_seq_assinatura 
from	funcao_parametro a, 
	evolucao_paciente b 
where	((b.dt_liberacao is not null) or (coalesce(a.vl_parametro, a.vl_parametro_padrao) = 'N')) 
and	a.cd_funcao	= 0 
and	a.nr_sequencia	= 37 

union all
 
select	'Sinais vitais' ds_item,-- 
	'PEP', 
	3 ie_item, 
	dt_sinal_vital dt_registro, 
	null dt_liberacao, 
	'' cd_pessoa_fisica, 
	nr_atendimento, 
	cd_pessoa_fisica cd_profissional, 
	13 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	atendimento_sinal_vital 

union all
 
select	'Anamnese',-- 
	'PEP', 
	4, 
	dt_ananmese, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_medico, 
	83 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	anamnese_paciente 

union all
 
select	'Diagnóstico',-- 
	'PEP', 
	5, 
	dt_diagnostico, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	substr(Obter_medico_diagnostico(nr_atendimento,dt_diagnostico,'C'),1,10), 
	1 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_seq_interno nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	diagnostico_doenca 

union all
 
select	'Ganhos e perdas', -- 
	'PEP', 
	6, 
	dt_medida, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_profissional, 
	733 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	atendimento_perda_ganho 

union all
 
select	'SAE', -- 
	'PEP', 
	7, 
	dt_prescricao, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_prescritor, 
	383 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	pe_prescricao 

union all
 
select	'Check-up',-- 
	'Check-Up', 
	8, 
	dt_evolucao, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_medico, 
	233 ie_item_prontuario, 
	cd_perfil_ativo, 
	cd_evolucao nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	evolucao_paciente 
where	ie_evolucao_clinica in ('AE', 'CO') 

union all
 
select	'Histórico de Saúde - Cirurgias',-- 
	'PEP', 
	9, 
	dt_registro, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	obter_dados_usuario_opcao(nm_usuario,'C'), 
	93 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	paciente_antec_clinico 

union all
 
select	'Orientações Alta',-- 
	'PEP', 
	10, 
	dt_liberacao, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	obter_dados_usuario_opcao(nm_usuario,'C'), 
	153 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	atendimento_alta 

union all
	 
select	'Ganhos e Perdas',-- 
	'PEP', 
	11, 
	dt_medida, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_profissional, 
	733 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	atendimento_perda_ganho 

union all
	 
select	'Histórico de Chamados',-- 
	'PEP', 
	12, 
	dt_medida, 
	null, 
	'', 
	nr_atendimento, 
	cd_profissional, 
	386 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	atendimento_perda_ganho 

union all
	 
select	'Histórico de Saúde - Alergias',-- 
	'PEP', 
	13, 
	dt_registro, 
	dt_liberacao, 
	'', 
	nr_atendimento, 
	cd_pessoa_fisica, 
	93 ie_item_prontuario, 
	cd_perfil_ativo, 
	nr_sequencia nr_seq_registro, 
	dt_atualizacao, 
	nm_usuario, 
	dt_inativacao, 
	nm_usuario_inativacao, 
	nr_seq_assinatura 
from	paciente_alergia 

union all
 
select 'Anestesia - técnica e descrição', 
	'PEPO', 
	14, 
	a.dt_inicio dt_registro, 
	a.dt_liberacao, 
	b.cd_pessoa_fisica, 
	b.nr_atendimento, 
	a.cd_profissional, 
	16 ie_item_prontuario, 
	obter_perfil_ativo cd_perfil_ativo, 
	a.nr_sequencia, 
	a.dt_atualizacao, 
	a.nm_usuario, 
	a.dt_inativacao, 
	a.nm_usuario_inativacao, 
	a.nr_seq_assinatura	  
from  cirurgia_tec_anestesica a, 
	cirurgia b 
where  a.nr_cirurgia = b.nr_cirurgia 

union all
 
select 'Anestesia - técnica e descrição', 
	'PEPO', 
	15, 
	a.dt_atualizacao dt_registro, 
	a.dt_liberacao, 
	b.cd_pessoa_fisica, 
	b.nr_atendimento, 
	b.cd_medico_req, 
	16 ie_item_prontuario, 
	obter_perfil_ativo cd_perfil_ativo, 
	a.nr_sequencia, 
	a.dt_atualizacao, 
	a.nm_usuario, 
	a.dt_inativacao, 
	a.nm_usuario_inativacao, 
	a.nr_seq_assinatura	  
from  anestesia_descricao a, 
	  cirurgia b 
where a.nr_cirurgia = b.nr_cirurgia 

union all
 
select 'Sinais Vitais - Monit Analgesia', 
	'PEP', 
	18, 
	a.dt_avaliacao dt_registro, 
	a.dt_liberacao, 
	b.cd_pessoa_fisica, 
	a.nr_atendimento, 
	a.cd_profissional, 
	16 ie_item_prontuario, 
	a.cd_perfil_ativo, 
	a.nr_sequencia, 
	a.dt_atualizacao, 
	a.nm_usuario, 
	a.dt_inativacao, 
	a.nm_usuario_inativacao, 
	a.nr_seq_assinatura	  
from  atend_aval_analgesia a, 
	atendimento_paciente b 
where  a.nr_atendimento = b.nr_atendimento	  

union all
 
select 'Sinais Vitais - Monitorização Respiratória', 
	'PEP', 
	19, 
	a.dt_monitorizacao dt_registro, 
	a.dt_liberacao, 
	a.cd_pessoa_fisica, 
	a.nr_atendimento, 
	'', 
	11 ie_item_prontuario, 
	a.cd_perfil_ativo, 
	a.nr_sequencia, 
	a.dt_atualizacao, 
	a.nm_usuario, 
	a.dt_inativacao, 
	a.nm_usuario_inativacao, 
	a.nr_seq_assinatura	  
from  atendimento_monit_resp a 

union all
	  
select 'Sinais Vitais - Monitorização Hemodinâmica', 
	'PEP', 
	20, 
	a.dt_monitoracao dt_registro, 
	a.dt_liberacao, 
	a.cd_pessoa_fisica, 
	a.nr_atendimento, 
	'', 
	11 ie_item_prontuario, 
	a.cd_perfil_ativo, 
	a.nr_sequencia, 
	a.dt_atualizacao, 
	a.nm_usuario, 
	a.dt_inativacao, 
	a.nm_usuario_inativacao, 
	a.nr_seq_assinatura	  
from  atend_monit_hemod a 

union all
 
select 'Cirurgia - resumo e descrição', 
	'PEPO', 
	 21, 
	 a.dt_registro dt_registro, 
	 a.dt_liberacao, 
	 b.cd_pessoa_fisica, 
	 b.nr_atendimento, 
	 cd_medico_req, 
	 18 ie_item_prontuario, 
	 a.cd_perfil_ativo, 
	 a.nr_sequencia, 
	 a.dt_atualizacao, 
	 a.nm_usuario, 
	 a.dt_inativacao, 
	 a.nm_usuario_inativacao, 
	 a.nr_seq_assinatura	  
from   cirurgia_descricao a, 
	 cirurgia b 
where a.nr_cirurgia = b.nr_cirurgia 

union all
 
select 'Cirurgia - resumo e descrição', 
	'PEPO', 
	22, 
	a.dt_inicio dt_registro, 
	a.dt_liberacao, 
	b.cd_pessoa_fisica, 
	b.nr_atendimento, 
	cd_profissional, 
	18 ie_item_prontuario, 
	obter_perfil_ativo, 
	a.nr_sequencia, 
	a.dt_atualizacao, 
	a.nm_usuario, 
	a.dt_inativacao, 
	a.nm_usuario_inativacao, 
	a.nr_seq_assinatura	  
from  cirurgia_tec_anestesica a, 
	  cirurgia b 
where a.nr_cirurgia = b.nr_cirurgia 

union all
 
select 'Template', 
	'PEP', 
	24, 
	a.dt_registro dt_registro, 
	a.dt_liberacao, 
	b.cd_pessoa_fisica, 
	a.nr_atendimento, 
	a.cd_profissional, 
	410 ie_item_prontuario, 
	b.cd_perfil_ativo, 
	null nr_sequencia, 
	a.dt_atualizacao, 
	a.nm_usuario, 
	a.dt_inativacao, 
	a.nm_usuario_inativacao, 
	a.nr_seq_assinatura	  
from  ehr_registro a, 
	  atendimento_paciente b 
where a.nr_atendimento = b.nr_atendimento 

union all
 
select 'Histórico saúde - Cirurgia', 
	'PEP', 
	  25, 
	  a.dt_inicio dt_registro, 
	  a.dt_liberacao, 
	  a.cd_pessoa_fisica, 
	  null nr_atendimento, 
	  null cd_profissional, 
	  93 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_inativacao, 
	  a.nm_usuario_inativacao, 
	  a.nr_seq_assinatura	  
from  historico_saude_cirurgia a 

union all
 
select 'Laudo paciente', 
	'PEP', 
	  26, 
	  a.dt_laudo dt_registro, 
	  a.dt_liberacao, 
	  a.cd_pessoa_fisica, 
	  a.nr_atendimento, 
	  a.cd_medico_resp, 
	  365 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_cancelamento, 
	  a.nm_usuario_cancel, 
	  a.nr_seq_assinatura	  
from  laudo_paciente a 

union all
 
select 'Nutrição', 
	'Nutrição', 
	  27, 
	  a.dt_status dt_registro, 
	  null dt_liberacao, 
	  b.cd_pessoa_fisica, 
	  a.nr_atendimento, 
	  null cd_medico_resp, 
	  16 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_suspensao, 
	  a.nm_usuario_susp, 
	  a.nr_seq_assinatura	  
from  nut_paciente a, 
	  atendimento_paciente b 
where a.nr_atendimento = b.nr_atendimento 

union all
 
select 'Histórico de Saúde - Acessório/Órtese/Prótese', 
	'PEP', 
	  28, 
	  a.dt_inicio dt_registro, 
	  dt_liberacao, 
	  b.cd_pessoa_fisica, 
	  b.nr_atendimento, 
	  a.cd_profissional, 
	  93 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  dt_inativacao, 
	  nm_usuario_inativacao, 
	  a.nr_seq_assinatura	  
from  paciente_acessorio  a, 
	  atendimento_paciente b 
where a.cd_pessoa_fisica = b.cd_pessoa_fisica	  

union all
 
select 'Histórico de Saúde - Hábitos e vicios', 
	'PEP', 
	  30, 
	  a.dt_inicio dt_registro, 
	  dt_liberacao, 
	  a.cd_pessoa_fisica, 
	  a.nr_atendimento, 
	  null cd_profissional, 
	  93 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  dt_inativacao, 
	  nm_usuario_inativacao, 
	  a.nr_seq_assinatura	  
from  paciente_habito_vicio a 

union all
 
select 'Histórico de Saúde - Medicamentos em uso', 
	'PEP', 
	  31, 
	  a.dt_inicio dt_registro, 
	  dt_liberacao, 
	  a.cd_pessoa_fisica, 
	  a.nr_atendimento, 
	  null cd_profissional, 
	  93 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  dt_inativacao, 
	  nm_usuario_inativacao, 
	  a.nr_seq_assinatura	  
from  paciente_medic_uso a 

union all
 
select 'Histórico de Saúde - Ocorrências', 
	'PEP', 
	  32, 
	  a.dt_registro dt_registro, 
	  dt_liberacao, 
	  a.cd_pessoa_fisica, 
	  a.nr_atendimento, 
	  null cd_profissional, 
	  93 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  dt_inativacao, 
	  nm_usuario_inativacao, 
	  a.nr_seq_assinatura	  
from  paciente_ocorrencia a 

union all
 
select 'SAE', 
	'PEP', 
	  33, 
	  a.dt_prescricao dt_registro, 
	  dt_liberacao, 
	  a.cd_pessoa_fisica, 
	  a.nr_atendimento, 
	  cd_prescritor, 
	  383 ie_item_prontuario, 
	  cd_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  dt_inativacao, 
	  nm_usuario_inativacao, 
	  a.nr_seq_assinatura	  
from  pe_prescricao a 

union all
 
select 'Dietas', 
	'REP' ds_funcao, 
	  34, 
	  a.dt_emissao_dieta dt_registro, 
	  dt_liberacao, 
	  b.cd_pessoa_fisica, 
	  b.nr_atendimento, 
	  cd_prescritor, 
	  16 ie_item_prontuario, 
	  a.cd_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_suspensao, 
	  a.nm_usuario_susp, 
	  a.nr_seq_assinatura	  
from  prescr_dieta a, 
	  prescr_medica b 
where a.nr_prescricao = b.nr_prescricao 

union all
 
select 'Gasoterapia', 
	'REP' ds_funcao, 
	  35, 
	  a.dt_prev_execucao dt_registro, 
	  dt_liberacao, 
	  b.cd_pessoa_fisica, 
	  b.nr_atendimento, 
	  cd_prescritor, 
	  16 ie_item_prontuario, 
	  a.cd_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_suspensao, 
	  null nm_usuario_susp, 
	  a.nr_seq_assinatura	  
from  prescr_gasoterapia a, 
	  prescr_medica b 
where a.nr_prescricao = b.nr_prescricao 

union all
 
select 'Materiais', 
	'REP' ds_funcao, 
	  36, 
	  a.dt_inicio_medic dt_registro, 
	  a.dt_liberacao, 
	  b.cd_pessoa_fisica, 
	  b.nr_atendimento, 
	  cd_prescritor, 
	  16 ie_item_prontuario, 
	  a.cd_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_suspensao, 
	  a.nm_usuario_susp, 
	  a.nr_seq_assinatura	  
from  prescr_material a, 
	  prescr_medica b 
where a.nr_prescricao = b.nr_prescricao 

union all
 
select 'Prescrição', 
	'REP' ds_funcao, 
	  37, 
	  a.dt_prescricao dt_registro, 
	  a.dt_liberacao, 
	  a.cd_pessoa_fisica, 
	  a.nr_atendimento, 
	  cd_prescritor, 
	  16 ie_item_prontuario, 
	  obter_perfil_ativo, 
	  a.nr_prescricao, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_suspensao, 
	  a.nm_usuario_susp, 
	  a.nr_seq_assinatura	  
from  prescr_medica a 

union all
 
select 'Recomendação', 
	'REP' ds_funcao, 
	  38, 
	  a.dt_extensao dt_registro, 
	  null dt_liberacao, 
	  b.cd_pessoa_fisica, 
	  b.nr_atendimento, 
	  cd_prescritor, 
	  16 ie_item_prontuario, 
	  a.cd_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_suspensao, 
	  a.nm_usuario_susp, 
	  a.nr_seq_assinatura	  
from  prescr_recomendacao a, 
	  prescr_medica b 
where a.nr_prescricao = b.nr_prescricao 

union all
 
select 'Procedimento', 
	'REP' ds_funcao, 
	  41, 
	  a.dt_extensao dt_registro, 
	  null dt_liberacao, 
	  b.cd_pessoa_fisica, 
	  b.nr_atendimento, 
	  cd_prescritor, 
	  16 ie_item_prontuario, 
	  a.cd_perfil_ativo, 
	  a.nr_sequencia, 
	  a.dt_atualizacao, 
	  a.nm_usuario, 
	  a.dt_suspensao, 
	  a.nm_usuario_susp, 
	  a.nr_seq_assinatura	  
from  prescr_procedimento a, 
	  prescr_medica b 
where a.nr_prescricao = b.nr_prescricao;

