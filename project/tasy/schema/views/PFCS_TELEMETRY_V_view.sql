-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW pfcs_telemetry_v (indicator_sequencia, main_content, vl_indicator, vl_indicator_aux, nr_seq_ord, cd_estabelecimento, cd_department) AS select indi.nr_sequencia indicator_sequencia,
		pfcs_get_indicator_name(indi.nr_sequencia) main_content,
		panel.vl_indicator vl_indicator, panel.vl_indicator_aux vl_indicator_aux,
		(pfcs_get_indicator_rule(indi.nr_sequencia, coalesce(panel.vl_indicator,0), coalesce(panel.nr_seq_operational_level,0),'ORDER'))::numeric  nr_seq_ord,
		panel.nr_seq_operational_level cd_estabelecimento,
		panel.ds_reference_value cd_department
	FROM pfcs_indicator indi
	left join pfcs_panel panel on panel.nr_seq_indicator = indi.nr_sequencia and panel.ie_situation = 'A'
	where indi.ie_classification = 'TL';

