-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW eis_aval_paciente_v (nr_sequencia, dt_evolucao, nr_seq_tipo_avaliacao, ds_tipo_evolucao_clinica, nm_profissional, nr_atendimento, dt_liberacao, ie_situacao, cd_medico, cd_convenio, ds_convenio, cd_pessoa_fisica, nm_pessoa_fisica) AS select	a.nr_sequencia,
		trunc(a.DT_AVALIACAO) dt_evolucao, 
		a.NR_SEQ_TIPO_AVALIACAO, 
		SUBSTR(substr(obter_descricao_padrao('MED_TIPO_AVALIACAO','DS_TIPO', NR_SEQ_TIPO_AVALIACAO),1,100),1,255) ds_tipo_evolucao_clinica, 
		substr(obter_nome_usuario(a.NM_USUARIO),1,255) nm_profissional, 
		a.NR_ATENDIMENTO, 
		a.DT_LIBERACAO, 
		a.IE_SITUACAO, 
		a.cd_medico, 
		obter_convenio_atendimento(a.nr_atendimento) cd_convenio, 
		obter_desc_convenio(obter_convenio_atendimento(a.nr_atendimento)) ds_convenio, 
		a.cd_pessoa_fisica, 
		substr(obter_nome_pf(a.cd_pessoa_fisica),1,80) nm_pessoa_fisica 
FROM med_avaliacao_paciente a 
where	dt_inativacao is null;

