-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW plussoft_cpt_contrato_v (nr_contrato, cd_usuario_plano, nr_seq_tipo_carencia, ds_cpt, dt_inicio_vigencia, dt_fim_vigencia) AS select	c.nr_contrato,
		d.cd_usuario_plano,
		a.nr_seq_tipo_carencia,
		substr(pls_obter_desc_tipo_carencia(a.nr_seq_tipo_carencia),1,255) ds_cpt,
		a.dt_inicio_vigencia,
		a.dt_fim_vigencia
	FROM 	pls_carencia a,
		pls_segurado b,
		pls_contrato c,
		pls_segurado_carteira d
	where 	a.nr_seq_segurado = b.nr_sequencia
	and   	b.nr_seq_contrato = c.nr_sequencia
	and   	a.nr_seq_segurado = d.nr_seq_segurado
	and     a.ie_cpt          = 'S'
	order by 1,2 asc;

