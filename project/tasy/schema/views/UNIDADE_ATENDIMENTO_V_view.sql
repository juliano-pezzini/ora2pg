-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW unidade_atendimento_v (nr_seq_interno, cd_unidade_basica, cd_unidade_compl, cd_setor_atendimento, cd_tipo_acomodacao, ie_temporario, ie_situacao, dt_atualizacao, nm_usuario, ie_status_unidade, ie_leito_adaptado, nr_atendimento, dt_entrada_unidade, ie_status_ant_unidade, cd_paciente_reserva, dt_atualizacao_nrec, nm_usuario_reserva, nm_usuario_nrec, ie_classe_acomodacao, ie_sexo_paciente, ie_sexo_fixo, ie_inativar_leito_temp, nr_atendimento_acomp, ie_higienizacao, dt_higienizacao, nm_usuario_higienizacao, dt_inicio_higienizacao, ds_observacao, cd_motivo_interdicao, ie_ignorar_checklist, nr_ramal, dt_criacao, nm_usuario_fim_higienizacao, nr_agrupamento, ie_leito_prox_posto_enf, nr_seq_location, qt_max_visitante, nr_seq_local_pa, qt_max_acomp, qt_max_diario, ds_unidade_atend, qt_max_simultaneo, ie_necessita_isol_reserva, qt_idade_minima, qt_idade_dias_max, qt_idade_dias_min, qt_dias_prev_interd, nr_seq_classif, nr_seq_mot_isol, dt_interdicao, ie_controle_faixa_etaria, nr_externo, dt_aguard_higienizacao, nr_seq_unid_bloq, ie_bloq_unid_ant, nr_seq_grupo_equip_ca, nr_seq_classif_pac_leito, ds_ocupacao, qt_idade_maxima, nr_seq_superior, cd_convenio_reserva, qt_peso_maximo, qt_altura_maxima, nr_seq_motivo_reserva, nr_seq_computador, qt_tempo_prev_higien, ie_tipo_limpeza, nr_seq_computador_leito, nr_seq_apresent, cd_motivo_manutencao, qt_pac_unidade, nr_seq_unidade_rn, ds_agrupamento, nr_atendimento_ant, ie_leito_monitorado, ie_permite_alt_eup, ie_observacao_pa, ie_radioterapia, ie_interditado_radiacao, ie_exibir_cc, ie_tipo_reserva, nr_seq_room_number, ie_inativa_setor_auto, ie_monitorizacao_externa, nr_internacao_aghos, nm_pac_reserva, ie_leito_retaguarda, ie_retaguarda_atual, ie_family_room, nr_seq_genero, dt_start_reservation, dt_end_reservation, ie_mostra_gestao_disp, nm_setor_integracao, nm_leito_integracao, nr_seq_modelo, ie_gerint, ie_bloqueio_transf, ds_setor_atendimento, nm_unidade, cd_unidade, cd_unidade_classif, ds_tipo_acomodacao, ds_cor, cd_classif_setor, ds_classif_unidade, ie_leito_adapt) AS SELECT	A.NR_SEQ_INTERNO,
	A.CD_UNIDADE_BASICA,
	A.CD_UNIDADE_COMPL,
	A.CD_SETOR_ATENDIMENTO,
	A.CD_TIPO_ACOMODACAO,
	A.IE_TEMPORARIO,
	A.IE_SITUACAO,
	A.DT_ATUALIZACAO,
	A.NM_USUARIO,
	A.IE_STATUS_UNIDADE,
	A.IE_LEITO_ADAPTADO,
	A.NR_ATENDIMENTO,
	A.DT_ENTRADA_UNIDADE,
	A.IE_STATUS_ANT_UNIDADE,
	A.CD_PACIENTE_RESERVA,
	A.DT_ATUALIZACAO_NREC,
	A.NM_USUARIO_RESERVA,
	A.NM_USUARIO_NREC,
	A.IE_CLASSE_ACOMODACAO,
	A.IE_SEXO_PACIENTE,
	A.IE_SEXO_FIXO,
	A.IE_INATIVAR_LEITO_TEMP,
	A.NR_ATENDIMENTO_ACOMP,
	A.IE_HIGIENIZACAO,
	A.DT_HIGIENIZACAO,
	A.NM_USUARIO_HIGIENIZACAO,
	A.DT_INICIO_HIGIENIZACAO,
	A.DS_OBSERVACAO,
	A.CD_MOTIVO_INTERDICAO,
	A.IE_IGNORAR_CHECKLIST,
	A.NR_RAMAL,
	A.DT_CRIACAO,
	A.NM_USUARIO_FIM_HIGIENIZACAO,
	A.NR_AGRUPAMENTO,
	A.IE_LEITO_PROX_POSTO_ENF,
	A.NR_SEQ_LOCATION,
	A.QT_MAX_VISITANTE,
	A.NR_SEQ_LOCAL_PA,
	A.QT_MAX_ACOMP,
	A.QT_MAX_DIARIO,
	A.DS_UNIDADE_ATEND,
	A.QT_MAX_SIMULTANEO,
	A.IE_NECESSITA_ISOL_RESERVA,
	A.QT_IDADE_MINIMA,
	A.QT_IDADE_DIAS_MAX,
	A.QT_IDADE_DIAS_MIN,
	A.QT_DIAS_PREV_INTERD,
	A.NR_SEQ_CLASSIF,
	A.NR_SEQ_MOT_ISOL,
	A.DT_INTERDICAO,
	A.IE_CONTROLE_FAIXA_ETARIA,
	A.NR_EXTERNO,
	A.DT_AGUARD_HIGIENIZACAO,
	A.NR_SEQ_UNID_BLOQ,
	A.IE_BLOQ_UNID_ANT,
	A.NR_SEQ_GRUPO_EQUIP_CA,
	A.NR_SEQ_CLASSIF_PAC_LEITO,
	A.DS_OCUPACAO,
	A.QT_IDADE_MAXIMA,
	A.NR_SEQ_SUPERIOR,
	A.CD_CONVENIO_RESERVA,
	A.QT_PESO_MAXIMO,
	A.QT_ALTURA_MAXIMA,
	A.NR_SEQ_MOTIVO_RESERVA,
	A.NR_SEQ_COMPUTADOR,
	A.QT_TEMPO_PREV_HIGIEN,
	A.IE_TIPO_LIMPEZA,
	A.NR_SEQ_COMPUTADOR_LEITO,
	A.NR_SEQ_APRESENT,
	A.CD_MOTIVO_MANUTENCAO,
	A.QT_PAC_UNIDADE,
	A.NR_SEQ_UNIDADE_RN,
	A.DS_AGRUPAMENTO,
	A.NR_ATENDIMENTO_ANT,
	A.IE_LEITO_MONITORADO,
	A.IE_PERMITE_ALT_EUP,
	A.IE_OBSERVACAO_PA,
	A.IE_RADIOTERAPIA,
	A.IE_INTERDITADO_RADIACAO,
	A.IE_EXIBIR_CC,
	A.IE_TIPO_RESERVA,
	A.NR_SEQ_ROOM_NUMBER,
	A.IE_INATIVA_SETOR_AUTO,
	A.IE_MONITORIZACAO_EXTERNA,
	A.NR_INTERNACAO_AGHOS,
	A.NM_PAC_RESERVA,
	A.IE_LEITO_RETAGUARDA,
	A.IE_RETAGUARDA_ATUAL,
	A.IE_FAMILY_ROOM,
	A.NR_SEQ_GENERO,
	A.DT_START_RESERVATION,
	A.DT_END_RESERVATION,
	A.IE_MOSTRA_GESTAO_DISP,
	A.NM_SETOR_INTEGRACAO,
	A.NM_LEITO_INTEGRACAO,
	A.NR_SEQ_MODELO,
	A.IE_GERINT,
	A.IE_BLOQUEIO_TRANSF,
	D.DS_SETOR_ATENDIMENTO,
	(D.NM_UNIDADE_BASICA || '/'||D.NM_UNIDADE_COMPL) nm_unidade,
	(A.CD_UNIDADE_BASICA || ' ' || A.CD_UNIDADE_COMPL) cd_unidade,
	(A.CD_UNIDADE_BASICA || A.CD_UNIDADE_COMPL) cd_unidade_classif,
	B.DS_TIPO_ACOMODACAO,
	B.DS_COR,
	D.CD_CLASSIF_SETOR,
	substr(obter_desc_classif_unid(A.cd_setor_atendimento,A.cd_unidade_basica,A.cd_unidade_compl),1,255) DS_CLASSIF_UNIDADE,
	coalesce(A.IE_LEITO_ADAPTADO, 'N') IE_LEITO_ADAPT
FROM	TIPO_ACOMODACAO B,
	SETOR_ATENDIMENTO D,
	UNIDADE_ATENDIMENTO A
WHERE	A.CD_TIPO_ACOMODACAO    = B.CD_TIPO_ACOMODACAO
  AND	A.CD_SETOR_ATENDIMENTO  = D.CD_SETOR_ATENDIMENTO
  AND	A.IE_SITUACAO           = 'A';

