-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW tpm_all_items_v (si_order, si_order2, si_order3, si_order4, nr_sequencia, ds_item, cd_pessoa_fisica, nr_atendimento, ds_interval, ds_horarios, si_group_type, ds_group, si_item_type, ds_item_type, ds_administration, dt_lib_suspensao, dt_inicio, dt_fim, dt_liberacao, dt_liberacao_enfermagem, dt_liberacao_farmacia, dt_revalidacao, ie_lib_pendente_enf, ie_lib_pendente_farm, ie_item_conf_enf, ie_item_conf_farm, ie_retrogrado, dt_suspensao, dt_lib_suspensao_p, nr_seq_apresent_acm_sn, nr_seq_apresent_subgrupo, nr_seq_apresent_item, nr_seq_apresentacao, ie_urgencia, dt_adm_adicional, dt_programada, dt_inicio_hem1, dt_inicio_hem2, dt_inicio_hem3, dt_inicio_hem4, dt_inicio_hem5, dt_inicio_proc1, dt_inicio_proc2, dt_inicio_proc3, dt_inicio_proc4, dt_inicio_proc5, dt_inicio_proc6, dt_inicio_proc7, ds_hor_prox_adm, ds_protocolo, ds_subtipo_protocolo, ie_acm, ie_se_necessario, ie_interv_operacao, cd_funcao_origem, nm_usuario_nrec, ie_pend_reval, ie_itm_pend_reval, ie_oncologia, ie_paciente_alergico, ds_alertas, ie_medic_controlado, ie_material_alto_risco, ie_mat_alto_custo, ie_mat_composto, ie_medicacao_paciente, ie_padronizado, dt_fim_cih, ie_sem_aprazamento, dt_protocolo_onc, ie_segunda, ie_terca, ie_quarta, ie_quinta, ie_sexta, ie_sabado, ie_domingo) AS select	distinct
		--10 si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'N', 'G')='' THEN 1000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'N', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'N' si_group_type,
		obter_valor_dominio(7768,'N') ds_group,
		'_A' si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
FROM	cpoe_dieta a

union all

select	distinct
		--11 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'N', 'G')='' THEN 1000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'N', 'G')*10) END ) si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'N' si_group_type,
		null  ds_group,
		cpoe_obter_tipo_item('CPOE_DIETA',a.nr_sequencia, ie_tipo_dieta) si_item_type,
		CASE WHEN a.ie_tipo_dieta='J' THEN  obter_valor_dominio(7769,'J')  ELSE cpoe_obter_desc_tipo_item(cpoe_obter_tipo_item('CPOE_DIETA',a.nr_sequencia, ie_tipo_dieta)) END  ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p, 
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_dieta a

union all

select	distinct
		--20 si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'D', 'G')='' THEN 7000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'D', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_intervalo,
		null ds_horarios,
		'DIA' si_group_type,
		obter_valor_dominio(7768,'D') ds_group,
		'_A' si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p, 
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_dialise a

union all

select	distinct
		--21 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'D', 'G')='' THEN 7000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'D', 'G')*10) END ) si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_intervalo,
		null ds_horarios,
		'DIA' si_group_type,
		null ds_group,
		a.ie_tipo_dialise si_item_type,
		CASE WHEN a.ie_tipo_dialise='DP' THEN obter_valor_dominio(7769,'DP')  ELSE obter_valor_dominio(7769,'DI') END  ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p, 
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_dialise a

union all

select	distinct
		--30 si_order,
		--obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'G', 'G') si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'G', 'G')='' THEN 4000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'G', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		null ds_horarios,
		'G' si_group_type,
		obter_valor_dominio(7768,'G') ds_group,
		cpoe_obter_tipo_item('CPOE_GASOTERAPIA',a.nr_sequencia) si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p, 
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_gasoterapia a

union all

select	distinct
		--40 si_order,
		--obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'H', 'G') si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'H', 'G')='' THEN 6000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'H', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'H' si_group_type,
		obter_valor_dominio(7768,'H') ds_group,
		cpoe_obter_tipo_item('CPOE_HEMOTERAPIA',a.nr_sequencia) si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p, 
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_hemoterapia a

union all

select	distinct
		--50 si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'I', 'G')='' THEN 10000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'I', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'I' si_group_type,
		obter_valor_dominio(7768,'I') ds_group,
		'I' si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		null ds_protocolo,
		null ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_intervencao a

union all
 
select	distinct
		--60 si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'M', 'G')='' THEN 2000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'M', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'M' si_group_type,
		obter_valor_dominio(7768,'M') ds_group,
		'_A' si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		a.ie_sem_aprazamento,
		a.dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_material a
where   'N' = ie_material

union all
 
select	distinct
		--61 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'M', 'G')='' THEN 2000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'M', 'G')*10) END ) si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'M' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, ie_controle_tempo, ie_material) si_item_type,
		cpoe_obter_desc_tipo_item(cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, ie_controle_tempo, ie_material)) ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		a.ie_sem_aprazamento,
		a.dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_material a
where	'N' = ie_material

union all
 
select	distinct
		--90 si_order,
		--obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'MA', 'G') si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'MA', 'G')='' THEN 8000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'MA', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'MA' si_group_type,
		obter_valor_dominio(7768,'MA') ds_group,
		cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, ie_controle_tempo, ie_material) si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		a.ie_sem_aprazamento,
		a.dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_material a
where   'S' = ie_material

union all

select	distinct
		--70 si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'R', 'G')='' THEN 5000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'R', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'R' si_group_type,
		obter_valor_dominio(7768,'R') ds_group,
		cpoe_obter_tipo_item('CPOE_RECOMENDACAO',a.nr_sequencia) si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_recomendacao a

union all

select	distinct
		--80 si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'P', 'G')='' THEN 3000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'P', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'P' si_group_type,
		obter_valor_dominio(7768,'P') ds_group,
		cpoe_obter_tipo_item('CPOE_PROCEDIMENTO',a.nr_sequencia) si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_procedimento a

union all

select	distinct
		--100 si_order,
		CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'AP', 'G')='' THEN 9500000   ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'AP', 'G')*10) END  si_order,
		0 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		null nr_sequencia,
		null ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_interval,
		null ds_horarios,
		'AP' si_group_type,
		obter_valor_dominio(7768,'AP') ds_group,
		cpoe_obter_tipo_item('CPOE_ANATOMIA_PATOLOGICA',a.nr_sequencia) si_item_type,
		null ds_item_type,
		null ds_administration,
		null dt_lib_suspensao,
		null dt_inicio,
		null dt_fim,
		null dt_liberacao,
		null dt_liberacao_enfermagem,
		null dt_liberacao_farmacia,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		null ie_retrogrado,
		null dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		null ds_protocolo,
		null ds_subtipo_protocolo,
		null ie_acm,
		null ie_se_necessario,
		null ie_interv_operacao,
		null cd_funcao_origem,
		null nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		null ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_anatomia_patologica a

union all

/* Items */

select	--11 si_order,
		--(1 + obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'N', 'G')) si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'N', 'G')='' THEN 1000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'N', 'G')*10) END ) si_order,
		2 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		cpoe_obter_ds_dieta(
							ie_tipo_dieta,
							cd_dieta,
							cd_material,
							cd_mat_prod1,
							nr_seq_tipo,
							dt_liberacao,
							'S',
							dt_lib_suspensao,
							dt_suspensao,
							ie_administracao,
							cd_intervalo,
							cd_unid_med_prod1,
							ie_via_leite1,
							qt_dose_prod1,
							cd_mat_prod2,
							cd_unid_med_prod2,
							qt_dose_prod2,
							cd_mat_prod3,
							cd_unid_med_prod3,
							qt_dose_prod3,
							cd_mat_prod4,
							cd_unid_med_prod4,
							qt_dose_prod4,
							cd_mat_prod5,
							cd_unid_med_prod5,
							qt_dose_prod5,
							ie_forma,
							qt_dose,
							cd_unidade_medida_dose,
							null,
							null,
							'N',
							null,
							nr_sequencia,
							null) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'N' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_DIETA',a.nr_sequencia, ie_tipo_dieta) si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,
		obter_lib_die_hor_gpt('E','CPOE_DIETA',nr_sequencia) ie_lib_pendente_enf,
		obter_lib_die_hor_gpt('F','CPOE_DIETA',nr_sequencia) ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		a.ie_acm, 
		a.ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_DIETA',a.nr_sequencia, a.ie_tipo_dieta), a.nr_atendimento) ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		a.ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_dieta a
where 	exists (select 1 from prescr_dieta x where x.nr_seq_dieta_cpoe = a.nr_sequencia) or 
        exists (select 1 from prescr_material x where x.nr_seq_dieta_cpoe = a.nr_sequencia) or
	exists (select 1 from prescr_leite_deriv x where x.nr_seq_dieta_cpoe = a.nr_sequencia) or
	exists (select 1 from REP_JEJUM x where x.nr_seq_dieta_cpoe = a.nr_sequencia) or
	exists (select 1 from NUT_PAC x where x.nr_seq_NPT_cpoe = a.nr_sequencia)

union all

select	--21 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'D', 'G')='' THEN 7000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'D', 'G')*10) END ) si_order,
		2 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		CPOE_Obter_desc_dialise( 
								ie_tipo_dialise, 
								nr_seq_protocolo, 
								dt_lib_suspensao, 
								dt_suspensao, 
								qt_fluxo_sangue, 
								qt_hora_min_sessao, 
								'S', 
								ie_hemodialise, 
								ie_tipo_peritoneal, 
								qt_volume_ciclo, 
								qt_hora_min_duracao, 
								dt_atualizacao_peso) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		null ds_intervalo,
		ds_horarios,
		'DIA' si_group_type,
		null ds_group,
		a.ie_tipo_dialise si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,
		obter_lib_dia_hor_gpt('E', 'CPOE_DIALISE', nr_sequencia) ie_lib_pendente_enf,
		obter_lib_dia_hor_gpt('F', 'CPOE_DIALISE', nr_sequencia) ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		null ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		a.ie_acm, 
		null ie_se_necessario,
		null ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, a.ie_tipo_dialise, a.nr_atendimento) ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		a.ie_segunda,
		a.ie_terca,
		a.ie_quarta,
		a.ie_quinta,
		a.ie_sexta,
		a.ie_sabado,
		a.ie_domingo
from	cpoe_dialise a
 where 	exists (select 1 from prescr_solucao x where x.nr_seq_dialise_cpoe = a.nr_sequencia) 

union all

select	--31 si_order,
		--(1 + obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'G', 'G')) si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'G', 'G')='' THEN 4000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'G', 'G')*10) END ) si_order,
		1 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		CPOE_OBTER_DESC_GRID_GAS(
								substr(CPOE_Obter_Desc_Gas(nr_seq_gas,dt_liberacao),1,254), 
								QT_GASOTERAPIA, 
								CPOE_OBTER_DESC_UNID_MED_GAS(IE_UNIDADE_MEDIDA), 
								substr(obter_valor_dominio(1299, ie_respiracao),1,200), 
								substr(obter_desc_intervalo_prescr(cd_intervalo),1,255),
								dt_lib_suspensao,dt_suspensao, 
								ie_administracao) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'G' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_GASOTERAPIA',a.nr_sequencia) si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,
		obter_lib_gas_hor_gpt('E', 'CPOE_GASOTERAPIA', nr_sequencia) ie_lib_pendente_enf,
		obter_lib_gas_hor_gpt('F', 'CPOE_GASOTERAPIA', nr_sequencia) ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		a.ie_acm, 
		a.ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_GASOTERAPIA',a.nr_sequencia), a.nr_atendimento) ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_gasoterapia a
where 	exists (select 1 from prescr_gasoterapia x where x.nr_seq_gas_cpoe = a.nr_sequencia)

union all

select	--41 si_order,
		--(1 + obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'H', 'G')) si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'H', 'G')='' THEN 6000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'H', 'G')*10) END ) si_order,
		1 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		substr(cpoe_obter_ds_hemoterapia(NR_SEQUENCIA, dt_liberacao,'S', dt_lib_suspensao,dt_suspensao,ie_tipo,qt_procedimento,ie_reserva),1,2000) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'H' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_HEMOTERAPIA',a.nr_sequencia) si_item_type,
		null ds_item_type,
		null ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,
		obter_lib_hem_hor_gpt('E', 'CPOE_HEMOTERAPIA', nr_sequencia) ie_lib_pendente_enf,
		obter_lib_hem_hor_gpt('F', 'CPOE_HEMOTERAPIA', nr_sequencia) ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		a.dt_programada,
		a.dt_inicio_hem1,
		a.dt_inicio_hem2,
		a.dt_inicio_hem3,
		a.dt_inicio_hem4,
		a.dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		null ie_acm, 
		null ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_HEMOTERAPIA',a.nr_sequencia), a.nr_atendimento) ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_hemoterapia a
where 	exists (select 1 from prescr_procedimento x where x.nr_seq_proc_cpoe = a.nr_sequencia)
and 	a.dt_programada  <   fim_dia(LOCALTIMESTAMP)

union all

select	--51 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'I', 'G')='' THEN 10000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'I', 'G')*10) END ) si_order,
		1 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		CPOE_OBTER_DESC_GRID_SAE(
								nr_seq_proc, 
								cd_intervalo, 
								dt_lib_suspensao, 
								dt_suspensao, 
								ie_administracao) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'I' si_group_type,
		null ds_group,
		'I' si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,
		'N' ie_lib_pendente_enf,
		'N' ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		null ds_protocolo,
		null ds_subtipo_protocolo,
		a.ie_acm, 
		a.ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		null cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, 'I', a.nr_atendimento),
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_intervencao a

union all

select	--61 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'M', 'G')='' THEN 2000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'M', 'G')*10) END ) si_order,
		2 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
				CPOE_obter_desc_info_material(cd_material,
									cd_mat_comp1,
									qt_dose_comp1,
									cd_unid_med_dose_comp1,
									cd_mat_comp2,
									qt_dose_comp2,
									cd_unid_med_dose_comp2,
									cd_mat_comp3,
									qt_dose_comp3,
									cd_unid_med_dose_comp3,
									cd_mat_dil,
									qt_dose_dil,
									cd_unid_med_dose_dil,
									cd_mat_red,
									qt_dose_red,
									cd_unid_med_dose_red,	
									dt_liberacao,
									qt_dose,
									cd_unidade_medida,
									ie_via_aplicacao,
									cd_intervalo,
									dt_lib_suspensao,
									dt_suspensao,
									ie_administracao,
									nr_seq_ataque,
									nr_seq_procedimento,
									nr_seq_adicional,
									nr_seq_hemoterapia,
									ds_dose_diferenciada,
									ds_dose_diferenciada_dil,
									ds_dose_diferenciada_red,
									ds_dose_diferenciada_comp1,
									ds_dose_diferenciada_comp2,
									ds_dose_diferenciada_comp3,
									cd_mat_comp4,
									qt_dose_comp4,
									cd_unid_med_dose_comp4,
									ds_dose_diferenciada_comp4,
									cd_mat_comp5,
									qt_dose_comp5,
									cd_unid_med_dose_comp5,
									ds_dose_diferenciada_comp5,
									cd_mat_comp6,
									qt_dose_comp6,
									cd_unid_med_dose_comp6,
									ds_dose_diferenciada_comp6,
									dt_inicio,
									dt_fim, 
									dt_fim_cih,
									nr_dia_util,
									ie_antibiotico,
									ie_tipo_solucao,
									cd_mat_comp7,
									qt_dose_comp7,
									cd_unid_med_dose_comp7,
									ds_dose_diferenciada_comp7,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									'N',
									a.nr_sequencia,
									null,
									null,
									null,
									null,
									null,
									null,
									a.qt_final_concentration,
									a.ie_um_final_conc_pca, 
									null,
									null,
									null,
									ds_medic_nao_padrao,
									ie_medicacao_paciente,
                                    'N',
									qt_dose_dia,
                                                                        null,
                                                                        null,
                                                                        null,
                                                                        null,
                                                                        'S'
									) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'M' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, ie_controle_tempo, ie_material) si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,
		obter_lib_mat_hor_gpt('E','CPOE_MATERIAL',nr_sequencia) ie_lib_pendente_enf,
		obter_lib_mat_hor_gpt('F','CPOE_MATERIAL',nr_sequencia) ie_lib_pendente_farm,
		obter_se_item_conf_gpt(nr_sequencia,'MA','E') ie_item_conf_enf,
		obter_se_item_conf_gpt(nr_sequencia,'MA','F') ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		a.dt_lib_suspensao dt_lib_suspensao_p,
		cpoe_obter_posicao_acm(a.ie_administracao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario( Obter_Usuario_Ativo),  Obter_Usuario_Ativo, 'M', 'G') nr_seq_apresent_acm_sn,
		cpoe_obter_ordem_subgrupo( 'M', CASE WHEN coalesce(ie_controle_tempo,'N')='N' THEN 'M'  ELSE 'SOL' END , obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo,'G') nr_seq_apresent_subgrupo,
		CASE WHEN coalesce(a.ie_oncologia,'N')='S' THEN  a.nr_agrupamento  ELSE cpoe_obter_ordem_mat_sol( cd_material, ie_controle_tempo, ie_tipo_solucao, ie_via_aplicacao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo, 'G',								  cd_mat_comp1, cd_mat_comp2, cd_mat_comp3, cd_mat_comp4, cd_mat_comp5, cd_mat_comp6, cd_mat_comp7) END  nr_seq_apresent_item,
		--cpoe_obter_ordem_proced(nr_seq_proc_interno, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo) nr_seq_apresentacao 
		null nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		a.dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		a.ie_acm, 
		a.ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, a.ie_controle_tempo, a.ie_material), a.nr_atendimento) ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		substr(obter_se_alergico(obter_prescr_item_cpoe(a.nr_sequencia,cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, a.ie_controle_tempo, a.ie_material), 
			a.nr_atendimento, a.cd_pessoa_fisica), a.cd_material),1,1) ie_paciente_alergico,
		'' ds_alertas,
		substr(obter_se_medic_controlado(a.cd_material),1,1) ie_medic_controlado,
		substr(obter_se_medicam_alto_risco(a.cd_material),1,1) ie_material_alto_risco,
		substr(obter_se_mat_alto_custo(a.cd_material, wheb_usuario_pck.get_cd_estabelecimento),1,3) ie_mat_alto_custo,
		substr(obter_se_medic_composto_cpoe(a.nr_sequencia, a.cd_material, a.dt_inicio),1,1) ie_mat_composto,
		a.ie_medicacao_paciente,
		substr(obter_se_material_padronizado(wheb_usuario_pck.get_cd_estabelecimento, a.cd_material),1,1) ie_padronizado,
		a.dt_fim_cih,
		a.ie_sem_aprazamento,
		a.dt_protocolo_onc,
		a.ie_segunda,
		a.ie_terca,
		a.ie_quarta,
		a.ie_quinta,
		a.ie_sexta,
		a.ie_sabado,
		a.ie_domingo
from	cpoe_material a
where 	exists (select 1 from prescr_material x where x.nr_seq_mat_cpoe = a.nr_sequencia and x.ie_agrupador <> 2 )
and 'N' = ie_material

union all

select	--91 si_order,
		--(1 + obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'MA', 'G')) si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'MA', 'G')='' THEN 8000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'MA', 'G')*10) END ) si_order,
		1 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
				CPOE_obter_desc_info_material(cd_material,
									cd_mat_comp1,
									qt_dose_comp1,
									cd_unid_med_dose_comp1,
									cd_mat_comp2,
									qt_dose_comp2,
									cd_unid_med_dose_comp2,
									cd_mat_comp3,
									qt_dose_comp3,
									cd_unid_med_dose_comp3,
									cd_mat_dil,
									qt_dose_dil,
									cd_unid_med_dose_dil,
									cd_mat_red,
									qt_dose_red,
									cd_unid_med_dose_red,	
									dt_liberacao,
									qt_dose,
									cd_unidade_medida,
									ie_via_aplicacao,
									cd_intervalo,
									dt_lib_suspensao,
									dt_suspensao,
									ie_administracao,
									nr_seq_ataque,
									nr_seq_procedimento,
									nr_seq_adicional,
									nr_seq_hemoterapia,
									ds_dose_diferenciada,
									ds_dose_diferenciada_dil,
									ds_dose_diferenciada_red,
									ds_dose_diferenciada_comp1,
									ds_dose_diferenciada_comp2,
									ds_dose_diferenciada_comp3,
									cd_mat_comp4,
									qt_dose_comp4,
									cd_unid_med_dose_comp4,
									ds_dose_diferenciada_comp4,
									cd_mat_comp5,
									qt_dose_comp5,
									cd_unid_med_dose_comp5,
									ds_dose_diferenciada_comp5,
									cd_mat_comp6,
									qt_dose_comp6,
									cd_unid_med_dose_comp6,
									ds_dose_diferenciada_comp6,
									dt_inicio,
									dt_fim, 
									dt_fim_cih,
									nr_dia_util,
									ie_antibiotico,
									ie_tipo_solucao,
									cd_mat_comp7,
									qt_dose_comp7,
									cd_unid_med_dose_comp7,
									ds_dose_diferenciada_comp7,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									null,
									qt_final_concentration,
									ie_um_final_conc_pca) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'MA' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, ie_controle_tempo, ie_material) si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,		
		obter_lib_mat_hor_gpt('E','CPOE_MATERIAL',nr_sequencia) ie_lib_pendente_enf,
		obter_lib_mat_hor_gpt('F','CPOE_MATERIAL',nr_sequencia) ie_lib_pendente_farm,
		obter_se_item_conf_gpt(nr_sequencia,'MA','E') ie_item_conf_enf,
		obter_se_item_conf_gpt(nr_sequencia,'MA','F') ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		a.dt_lib_suspensao dt_lib_suspensao_p,
		cpoe_obter_posicao_acm(a.ie_administracao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario( Obter_Usuario_Ativo),  Obter_Usuario_Ativo, 'M', 'G') nr_seq_apresent_acm_sn,
		cpoe_obter_ordem_subgrupo( 'M', CASE WHEN coalesce(ie_controle_tempo,'N')='N' THEN 'M'  ELSE 'SOL' END , obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo,'G') nr_seq_apresent_subgrupo,
		cpoe_obter_ordem_mat_sol( cd_material, ie_controle_tempo, ie_tipo_solucao, ie_via_aplicacao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo, 'G',
								  cd_mat_comp1, cd_mat_comp2, cd_mat_comp3, cd_mat_comp4, cd_mat_comp5, cd_mat_comp6, cd_mat_comp7) nr_seq_apresent_item, 
		--cpoe_obter_ordem_proced(nr_seq_proc_interno, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo) nr_seq_apresentacao 
		null nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		a.dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		a.ie_acm, 
		a.ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_MATERIAL',a.nr_sequencia, null, a.ie_controle_tempo, a.ie_material), a.nr_atendimento) ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		substr(obter_se_alergico(obter_prescr_item_cpoe(a.nr_sequencia,cpoe_obter_tipo_item('CPOE_MATERIAL', a.nr_sequencia, null, a.ie_controle_tempo, a.ie_material), 
			a.nr_atendimento, a.cd_pessoa_fisica), a.cd_material),1,1) ie_paciente_alergico,
		'' ds_alertas,
		substr(obter_se_medic_controlado(a.cd_material),1,1) ie_medic_controlado,
		substr(obter_se_medicam_alto_risco(a.cd_material),1,1) ie_material_alto_risco,
		substr(obter_se_mat_alto_custo(a.cd_material, wheb_usuario_pck.get_cd_estabelecimento),1,3) ie_mat_alto_custo,
		substr(obter_se_medic_composto_cpoe(a.nr_sequencia, a.cd_material, a.dt_inicio),1,1) ie_mat_composto,
		a.ie_medicacao_paciente,
		substr(obter_se_material_padronizado(wheb_usuario_pck.get_cd_estabelecimento, a.cd_material),1,1) ie_padronizado,
		null dt_fim_cih,
		a.ie_sem_aprazamento,
		a.dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_material a
where 	exists (select 1 from prescr_material x where x.ie_agrupador = 2 )
and     'S' = ie_material

union all

select	--71 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'R', 'G')='' THEN 5000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'R', 'G')*10) END ) si_order,
		1 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		CPOE_OBTER_DESC_GRID_RECOM(
								substr(cpoe_obter_desc_recomendacao(cd_recomendacao,dt_liberacao),1,255), 
								substr(obter_desc_intervalo_prescr(cd_intervalo),1,255),
								dt_lib_suspensao,
								dt_suspensao, 
								ie_administracao) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'R' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_RECOMENDACAO',a.nr_sequencia) si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,		
		obter_lib_rec_hor_gpt('E', 'CPOE_RECOMENDACAO', nr_sequencia) ie_lib_pendente_enf,
		obter_lib_rec_hor_gpt('F', 'CPOE_RECOMENDACAO', nr_sequencia) ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		null dt_lib_suspensao_p,
		null nr_seq_apresent_acm_sn,
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		null nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		a.ie_acm, 
		a.ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_RECOMENDACAO',a.nr_sequencia), a.nr_atendimento) ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_recomendacao a
where 	exists (select 1 from prescr_recomendacao x where x.nr_seq_rec_cpoe = a.nr_sequencia)

union all

select	--81 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'P', 'G')='' THEN 3000000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'P', 'G')*10) END ) si_order,
		2 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		cpoe_obter_desc_grid_proc(
								substr(cpoe_obter_desc_proc_interno(nr_seq_proc_interno),1,255), 
								cd_intervalo, 
								qt_procedimento, 
								cd_mat_proc1, 
								qt_dose_mat1, 
								cd_unid_medida_dose_mat1, 
								ie_assoc_adep1, 
								cd_mat_proc2, 
								qt_dose_mat2, 
								cd_unid_medida_dose_mat2, 
								ie_assoc_adep2, 
								cd_mat_proc3, 
								qt_dose_mat3, 
								cd_unid_medida_dose_mat3, 
								ie_assoc_adep3, 
								cd_mat_proc4, 
								qt_dose_mat4, 
								cd_unid_medida_dose_mat4, 
								ie_assoc_adep4, 
								cd_mat_proc5, 
								qt_dose_mat5, 
								cd_unid_medida_dose_mat5, 
								ie_assoc_adep5, 
								dt_lib_suspensao,
								dt_suspensao, 
								ie_administracao, 
								null, 
								null, 
								cd_mat_proc6, 
								qt_dose_mat6, 
								cd_unid_medida_dose_mat6, 
								ie_assoc_adep6, 
								cd_mat_proc7, 
								qt_dose_mat7, 
								cd_unid_medida_dose_mat7, 
								ie_assoc_adep7) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(a.cd_intervalo) ds_interval,
		ds_horarios,
		'P' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_PROCEDIMENTO',a.nr_sequencia) si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,	
		obter_lib_proc_hor_gpt('E', 'CPOE_PROCEDIMENTO', nr_sequencia) ie_lib_pendente_enf,
		obter_lib_proc_hor_gpt('F', 'CPOE_PROCEDIMENTO', nr_sequencia) ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		a.dt_lib_suspensao dt_lib_suspensao_p, --------------------------------------
		cpoe_obter_posicao_acm(a.ie_administracao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario( Obter_Usuario_Ativo),  Obter_Usuario_Ativo, 'M', 'G') nr_seq_apresent_acm_sn,
		--cpoe_obter_ordem_subgrupo( 'M', decode(nvl(ie_controle_tempo,'N'),'N','M','SOL'), obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo,'G') nr_seq_apresent_subgrupo,
		--cpoe_obter_ordem_mat_sol( cd_material, ie_controle_tempo, ie_tipo_solucao, ie_via_aplicacao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo, 'G') nr_seq_apresent_item, 
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		cpoe_obter_ordem_proced(nr_seq_proc_interno, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo, 'G') nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		a.dt_inicio_proc1,
		a.dt_inicio_proc2,
		a.dt_inicio_proc3,
		a.dt_inicio_proc4,
		a.dt_inicio_proc5,
		a.dt_inicio_proc6,
		a.dt_inicio_proc7,
		null ds_hor_prox_adm,
		substr(obter_desc_protocolo(cd_protocolo),1,100) ds_protocolo,
		substr(obter_desc_protocolo_medic(nr_seq_protocolo,cd_protocolo),1,50) ds_subtipo_protocolo,
		a.ie_acm, 
		a.ie_se_necessario,
		Obter_dados_intervalo_prescr(a.cd_intervalo,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_PROCEDIMENTO',a.nr_sequencia), a.nr_atendimento) ie_itm_pend_reval,
		coalesce(a.ie_oncologia, 'N') ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		a.ie_segunda,
		a.ie_terca,
		a.ie_quarta,
		a.ie_quinta,
		a.ie_sexta,
		a.ie_sabado,
		a.ie_domingo
from	cpoe_procedimento a
where 	exists (select 1 from prescr_procedimento x where x.nr_seq_proc_cpoe = a.nr_sequencia)

union all

select	--101 si_order,
		(1 + CASE WHEN obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'AP', 'G')='' THEN 9500000  ELSE (obter_posicao_grupo(obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_ativo, Obter_Usuario_Ativo, 'AP', 'G')*10) END ) si_order,
		2 si_order2,
		0 si_order3,
		Obter_dados_usuario_opcao(a.nm_usuario_nrec, 'F') si_order4,
		a.nr_sequencia,
		substr(obter_desc_prescr_proc(null,null, nr_seq_proc_interno),1,240) ds_item,
		a.cd_pessoa_fisica,
		a.nr_atendimento,
		obter_desc_intervalo(null) ds_interval,
		null ds_horarios,
		'AP' si_group_type,
		null ds_group,
		cpoe_obter_tipo_item('CPOE_ANATOMIA_PATOLOGICA',a.nr_sequencia) si_item_type,
		null ds_item_type,
		CASE WHEN a.ie_administracao='P' THEN obter_desc_expressao(689211,null) WHEN a.ie_administracao=/* Conforme primeiro horario*/
				'N' THEN obter_desc_expressao(746576,null) WHEN a.ie_administracao=/* Se necessario */
				'C' THEN obter_desc_expressao(689215,null) END  /* Conforme criterio medico */
 ds_administration,
		a.dt_lib_suspensao,
		a.dt_inicio,
		a.dt_fim,
		a.dt_liberacao dt_liberacao,
		a.dt_liberacao_enf DT_LIBERACAO_ENFERMAGEM,
		a.dt_liberacao_farm DT_LIBERACAO_FARMACIA,
		null dt_revalidacao,	
		obter_lib_proc_hor_gpt('E', 'CPOE_ANATOMIA_PATOLOGICA', nr_sequencia) ie_lib_pendente_enf,
		obter_lib_proc_hor_gpt('F', 'CPOE_ANATOMIA_PATOLOGICA', nr_sequencia) ie_lib_pendente_farm,
		'N' ie_item_conf_enf,
		'N' ie_item_conf_farm,
		ie_retrogrado,
		dt_suspensao,
		a.dt_lib_suspensao dt_lib_suspensao_p, --------------------------------------
		cpoe_obter_posicao_acm(a.ie_administracao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario( Obter_Usuario_Ativo),  Obter_Usuario_Ativo, 'M', 'G') nr_seq_apresent_acm_sn,
		--cpoe_obter_ordem_subgrupo( 'M', decode(nvl(ie_controle_tempo,'N'),'N','M','SOL'), obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo,'G') nr_seq_apresent_subgrupo,
		--cpoe_obter_ordem_mat_sol( cd_material, ie_controle_tempo, ie_tipo_solucao, ie_via_aplicacao, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo, 'G') nr_seq_apresent_item, 
		null nr_seq_apresent_subgrupo,
		null nr_seq_apresent_item,
		cpoe_obter_ordem_proced(nr_seq_proc_interno, obter_estabelecimento_ativo, Obter_perfil_Ativo, obter_setor_usuario(Obter_Usuario_Ativo), Obter_Usuario_Ativo, 'G') nr_seq_apresentacao,
		a.ie_urgencia, ----------------------------------
		null dt_adm_adicional,
		null dt_programada,
		null dt_inicio_hem1,
		null dt_inicio_hem2,
		null dt_inicio_hem3,
		null dt_inicio_hem4,
		null dt_inicio_hem5,
		null dt_inicio_proc1,
		null dt_inicio_proc2,
		null dt_inicio_proc3,
		null dt_inicio_proc4,
		null dt_inicio_proc5,
		null dt_inicio_proc6,
		null dt_inicio_proc7,
		null ds_hor_prox_adm,
		null ds_protocolo,
		null ds_subtipo_protocolo,
		null ie_acm, 
		null ie_se_necessario,
		Obter_dados_intervalo_prescr(null,'OP', Obter_Usuario_Ativo) ie_interv_operacao,
		a.cd_funcao_origem,
		a.nm_usuario_nrec,
		gpt_obter_se_atend_pend_reval(a.nr_atendimento) ie_pend_reval,
		gpt_obter_se_pend_reval(a.nr_sequencia, cpoe_obter_tipo_item('CPOE_ANATOMIA_PATOLOGICA',a.nr_sequencia), a.nr_atendimento) ie_itm_pend_reval,
		null ie_oncologia,
		null ie_paciente_alergico,
		'' ds_alertas,
		null ie_medic_controlado,
		null ie_material_alto_risco,
		null ie_mat_alto_custo,
		null ie_mat_composto,
		null ie_medicacao_paciente,
		null ie_padronizado,
		null dt_fim_cih,
		null ie_sem_aprazamento,
		null dt_protocolo_onc,
		null ie_segunda,
		null ie_terca,
		null ie_quarta,
		null ie_quinta,
		null ie_sexta,
		null ie_sabado,
		null ie_domingo
from	cpoe_anatomia_patologica a
where 	exists (select 1 from prescr_procedimento x where x.nr_seq_proc_cpoe = a.nr_sequencia) ;

