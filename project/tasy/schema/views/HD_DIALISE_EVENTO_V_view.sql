-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW hd_dialise_evento_v (nr_sequencia, dt_atualizacao, nm_usuario, nr_seq_dialise, nr_seq_tipo_evento, dt_evento, nr_seq_unid_dialise, ds_observacao, nr_seq_dialise_peritonial, ds_unidade_dialise, ds_tipo_evento, nr_seq, cd_estabelecimento, cd_empresa) AS select	b.nr_sequencia,
	b.dt_atualizacao,
	b.nm_usuario,
	b.nr_seq_dialise,
	b.nr_seq_tipo_evento,
	b.dt_evento,
	b.nr_seq_unid_dialise,
	b.ds_observacao,
	b.nr_seq_dialise_peritonial,
	substr(hd_obter_desc_unid_dialise(b.nr_seq_unid_dialise),1,100) ds_unidade_dialise,
	substr(obter_descricao_padrao('HD_TIPO_EVENTO','DS_TIPO_EVENTO',b.nr_seq_tipo_evento),1,100) ds_tipo_evento,
	1 nr_seq,
	c.cd_estabelecimento,
	obter_empresa_estab(c.cd_estabelecimento) cd_empresa
FROM	hd_dialise a,
	hd_dialise_evento b,
	hd_pac_renal_cronico c
where	1 = 1
and	b.nr_seq_unid_dialise is not null
and	a.nr_sequencia = b.nr_seq_dialise
and	a.cd_pessoa_fisica = c.cd_pessoa_fisica
order by	b.dt_evento desc;

