-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW eis_dieta_v (dt_referencia, cd_estabelecimento, cd_refeicao, cd_dieta, ie_destino_dieta, cd_setor_atendimento, ie_sexo, ie_faixa_etaria, qt_dieta, cd_convenio, cd_tipo_acomodacao, nr_seq_mapa, ds_sexo, ds_faixa_etaria, ds_setor_atendimento, nm_dieta, ds_refeicao, ds_tipo_acomodacao, nm_convenio, cd_empresa, cd_classif_dieta, ds_classif_dieta, nr_atendimento, nm_pessoa_fisica) AS select	a.DT_REFERENCIA,a.CD_ESTABELECIMENTO,a.CD_REFEICAO,a.CD_DIETA,a.IE_DESTINO_DIETA,a.CD_SETOR_ATENDIMENTO,a.IE_SEXO,a.IE_FAIXA_ETARIA,a.QT_DIETA,a.CD_CONVENIO,a.CD_TIPO_ACOMODACAO,a.NR_SEQ_MAPA,
	obter_valor_dominio(004, a.ie_sexo) ds_sexo, 
	obter_valor_dominio(069, a.ie_faixa_etaria) ds_faixa_etaria, 
	obter_nome_setor(a.cd_setor_atendimento) ds_setor_atendimento, 
	obter_nome_dieta(a.cd_dieta)nm_dieta, 
	obter_valor_dominio(099, a.cd_refeicao) ds_refeicao, 
	substr(obter_desc_tipo_acomod(a.cd_tipo_acomodacao),1,255) ds_tipo_acomodacao, 
	substr(obter_nome_convenio(a.cd_convenio),1,255) nm_convenio, 
	obter_empresa_estab(a.cd_estabelecimento) cd_empresa, 
	obter_classif_dieta(a.cd_dieta) cd_classif_dieta, 
	substr(obter_desc_classif_dieta(a.cd_dieta),1,120) ds_classif_dieta, 
	b.nr_atendimento, 
	substr(obter_pessoa_atendimento(b.nr_atendimento,'N'),1,255) nm_pessoa_fisica 
FROM eis_dieta a
LEFT OUTER JOIN mapa_dieta b ON (a.nr_seq_mapa = b.nr_sequencia);

