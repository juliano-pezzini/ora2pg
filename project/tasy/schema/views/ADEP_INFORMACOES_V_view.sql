-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW adep_informacoes_v (nr_prescricao, nm_prescritor, dt_prescricao, dt_liberacao, dt_liberacao_medico, dt_liberacao_farmacia, dt_emissao_farmacia, dt_inicio_prescr, dt_validade_prescr, nr_horas_validade, nr_seq_item, ds_item, qt_item, cd_um, ie_via, ds_aplicacao, ds_componentes, nr_etapas, qt_volume, ds_obs_item, dt_horario, nm_resp_atend, ie_medicacao_paciente, ie_executar_leito, nr_seq_horario, ie_tipo_item, ds_justificativa, ie_bomba_infusao, ie_tipo_analgesia, ie_pca_modo_prog, qt_vol_infusao_pca, ie_um_fluxo_pca, qt_bolus_pca, ie_um_bolus_pca, qt_intervalo_bloqueio, qt_dose_inicial_pca, ie_um_dose_inicio_pca, qt_limite_quatro_hora, ie_um_limite_pca, qt_limite_uma_hora, ie_um_limite_hora_pca, ds_observacao, ds_obs_medic, ds_subgrupo, ds_classe) AS select a.nr_prescricao nr_prescricao,
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    null nr_seq_item, 
    substr(obter_valor_dominio(99,a.cd_refeicao),1,80) ds_item, 
    c.qt_parametro qt_item, 
    substr(Obter_Unid_Med_Dieta(c.cd_dieta),1,150) cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    substr(obter_inf_dieta_adep(a.nr_prescricao,null,'D'),1,2000) ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    substr(obter_inf_dieta_adep(a.nr_prescricao,null,'O'),1,255) ds_obs_item, 
    to_char(a.dt_horario,'dd/mm/yyyy hh24:mi') dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,a.dt_horario),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito,	 
	a.nr_sequencia nr_seq_horario, 
	'D' ie_tipo_item,	 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	SUBSTR(c.ds_observacao,1,254) ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
FROM  prescr_dieta c, 
    prescr_medica b, 
    prescr_dieta_hor a 
where  b.nr_prescricao	= a.nr_prescricao 
and   c.nr_prescricao = b.nr_prescricao 
and   c.nr_sequencia	= a.nr_seq_dieta 
and	Obter_se_horario_liberado(a.dt_lib_horario, a.dt_horario) = 'S' 

union
 
select a.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    to_char(a.dt_emissao_farmacia,'dd/mm/yyyy hh24:mi') dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    a.nr_seq_material nr_seq_item, 
    substr(obter_desc_material(a.cd_material),1,100) ds_item, 
    a.qt_dose qt_item, 
    a.cd_unidade_medida_dose cd_um, 
    c.ie_via_aplicacao ie_via, 
    substr(obter_aplicacao_item_prescr(a.nr_prescricao,a.nr_seq_material),1,240) ds_aplicacao, 
     substr(CASE WHEN coalesce(a.ie_dose_especial,'N')='N' THEN adep_obter_medic_comp(a.nr_prescricao,a.nr_seq_material) || CHR(10) || obter_riscos_medic(c.cd_material)  ELSE obter_dil_dose_esp_medic(a.nr_seq_material,a.nr_prescricao,a.nr_sequencia) END ,1,4000) ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    '' ds_obs_item, 
    to_char(a.dt_horario,'dd/mm/yyyy hh24:mi') dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,a.dt_horario),'Não informado'),1,60) nm_resp_atend, 
    c.ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	a.nr_sequencia nr_seq_horario, 
	'S,M,MAT,IA' ie_tipo_item,	 
	c.ds_justificativa, 
	c.ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	b.ds_observacao ds_obs_medic, 
	Obter_Dados_Material(c.cd_material, 'SUB') ds_subgrupo, 
	Obter_Dados_Material(c.cd_material, 'CLA') ds_classe 
from  prescr_material c, 
    prescr_medica b, 
    prescr_mat_hor a 
where  c.nr_prescricao  = b.nr_prescricao 
and   c.nr_sequencia  = a.nr_seq_material 
and   c.nr_prescricao  = a.nr_prescricao 
and	Obter_se_horario_liberado(a.dt_lib_horario, a.dt_horario) = 'S' 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select a.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    a.nr_seq_procedimento nr_seq_item, 
    substr(obter_desc_prescr_proc(a.cd_procedimento,a.ie_origem_proced,a.nr_seq_proc_interno),1,240) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    c.ds_observacao ds_obs_item, 
    to_char(a.dt_horario,'dd/mm/yyyy hh24:mi') dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,a.dt_horario),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    coalesce(c.ie_executar_leito,'N') ie_executar_leito, 
	a.nr_sequencia nr_seq_horario, 
	'P,G,C,I' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	b.ds_observacao ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_procedimento c, 
    prescr_medica b, 
    prescr_proc_hor a 
where  c.nr_prescricao  = b.nr_prescricao 
and   c.nr_sequencia  = a.nr_seq_procedimento 
and   c.nr_prescricao  = a.nr_prescricao 
and	Obter_se_horario_liberado(a.dt_lib_horario, a.dt_horario) = 'S' 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select a.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    a.nr_seq_recomendacao nr_seq_item, 
    substr(obter_rec_prescricao(a.nr_seq_recomendacao,a.nr_prescricao),1,240) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    '' ds_obs_item, 
    to_char(a.dt_horario,'dd/mm/yyyy hh24:mi') dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,a.dt_horario),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	a.nr_sequencia nr_seq_horario, 
	'R' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_recomendacao c, 
    prescr_medica b, 
    prescr_rec_hor a 
where  c.nr_prescricao  = b.nr_prescricao 
and   c.nr_sequencia  = a.nr_seq_recomendacao 
and   c.nr_prescricao  = a.nr_prescricao 
and	Obter_se_horario_liberado(a.dt_lib_horario, a.dt_horario) = 'S' 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select a.nr_seq_pe_prescr nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    '' dt_liberacao_medico, 
    '' dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    null nr_horas_validade, 
    a.nr_seq_pe_proc nr_seq_item, 
    substr(obter_desc_intervencoes(a.nr_seq_proc),1,240) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    substr(obter_mat_med_assoc_pe_proc(b.nr_prescricao,c.nr_sequencia),1,255) ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    c.ds_observacao || CASE WHEN c.nr_seq_topografia IS NULL THEN ''  ELSE ' Topografia: ' || obter_desc_topografia_dor(c.nr_seq_topografia) END ||CASE WHEN ie_lado IS NULL THEN  ''  ELSE ' Lado: '||obter_valor_dominio(1372, ie_lado) END  ds_obs_item, 
    to_char(a.dt_horario,'dd/mm/yyyy hh24:mi') dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,a.dt_horario),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	a.nr_sequencia nr_seq_horario, 
	'E' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  pe_prescr_proc c, 
    pe_prescricao b, 
    pe_prescr_proc_hor a 
where  c.nr_seq_prescr  = b.nr_sequencia 
and   c.nr_sequencia  = a.nr_seq_pe_proc 
and   c.nr_seq_prescr  = a.nr_seq_pe_prescr 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_desc_material(c.cd_material),1,100) ds_item, 
    c.qt_dose qt_item, 
    c.cd_unidade_medida_dose cd_um, 
    c.ie_via_aplicacao ie_via, 
    substr(obter_aplicacao_item_prescr(c.nr_prescricao,c.nr_sequencia),1,240) ds_aplicacao, 
    substr(obter_diluicao_medic(c.nr_sequencia,c.nr_prescricao),1,255) ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    c.ds_observacao ds_obs_item, 
    'ACM/SN' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    c.ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'S,M,MAT' ie_tipo_item, 
	'' ds_justificativa, 
	c.ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	Obter_Dados_Material(c.cd_material, 'SUB') ds_subgrupo, 
	Obter_Dados_Material(c.cd_material, 'CLA') ds_classe 
from  prescr_medica b, 
    prescr_material c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_desc_prescr_proc(c.cd_procedimento,c.ie_origem_proced,c.nr_seq_proc_interno),1,240) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    c.ds_observacao ds_obs_item, 
    'ACM/SN' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    coalesce(c.ie_executar_leito,'N') ie_executar_leito, 
	0 nr_seq_horario, 
	'P,G' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica b, 
    prescr_procedimento c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_rec_prescricao(c.nr_sequencia,c.nr_prescricao),1,240) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    '' ds_obs_item, 
    'ACM/SN' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'R' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica b, 
    prescr_recomendacao c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_sequencia nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    '' dt_liberacao_medico, 
    '' dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    null nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_desc_intervencoes(c.nr_seq_proc),1,240) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    substr(obter_mat_med_assoc_pe_proc(b.nr_prescricao,c.nr_sequencia),1,255) ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    c.ds_observacao || CASE WHEN c.nr_seq_topografia IS NULL THEN ''  ELSE ' Topografia: ' || obter_desc_topografia_dor(c.nr_seq_topografia) END ||CASE WHEN ie_lado IS NULL THEN  ''  ELSE ' Lado: '||obter_valor_dominio(1372, ie_lado) END  ds_obs_item, 
    'ACM/SN' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'E' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  pe_prescricao b, 
    pe_prescr_proc c 
where  b.nr_sequencia  = c.nr_seq_prescr 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_seq_solucao nr_seq_item, 
    c.ds_solucao ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    substr(obter_componentes_solucao(c.nr_prescricao,c.nr_seq_solucao,'S',null, null),1,255)||Obter_Vol_Etapas_Alternadas(c.nr_prescricao,c.nr_seq_solucao) ds_componentes, 
    c.nr_etapas nr_etapas, 
    coalesce(c.qt_solucao_total, c.qt_volume_adep) qt_volume, 
    c.ds_orientacao ds_obs_item, 
    'Solução '||to_char(obter_primeiro_hor_sol(c.hr_prim_horario, b.dt_inicio_prescr, c.ie_urgencia), 'dd/mm/yyyy hh24:mi:ss') dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'SOL' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	ie_tipo_analgesia, 
	ie_pca_modo_prog, 
	qt_vol_infusao_pca, 
	ie_um_fluxo_pca, 
	qt_bolus_pca, 
	ie_um_bolus_pca, 
	qt_intervalo_bloqueio, 
	qt_dose_inicial_pca, 
	ie_um_dose_inicio_pca, 
	qt_limite_quatro_hora, 
	ie_um_limite_pca, 
	qt_limite_uma_hora, 
	ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica b, 
    prescr_solucao c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_desc_material(c.cd_material),1,100) ds_item, 
    c.qt_dose qt_item, 
    c.cd_unidade_medida_dose cd_um, 
    c.ie_via_aplicacao ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    null nr_etapas, 
    c.qt_dose qt_volume, 
    c.ds_observacao ds_obs_item, 
    'Suporte nutricional enteral' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'SNE' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	Obter_Dados_Material(c.cd_material, 'SUB') ds_subgrupo, 
	Obter_Dados_Material(c.cd_material, 'CLA') ds_classe 
from  prescr_medica b, 
    prescr_material c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_desc_san_derivado(c.nr_seq_derivado),1,50) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    CASE WHEN c.ie_util_hemocomponente='R' THEN  'Utilização: Reservada' WHEN c.ie_util_hemocomponente='C' THEN  'Utilização: Confirmada'  ELSE '' END  ds_componentes, 
    c.qt_procedimento nr_etapas, 
    c.qt_vol_hemocomp qt_volume, 
    c.ds_observacao ds_obs_item, 
    'Hemoterapia' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'HM' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica b, 
    prescr_procedimento c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    'NPT Adulta' ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    c.qt_fase_npt nr_etapas, 
    obter_volume_nut_pac(c.nr_sequencia) qt_volume, 
    '' ds_obs_item, 
    '' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'NPA' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica b, 
    nut_paciente c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    'NPT Neonatal' ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    c.qt_fase_npt nr_etapas, 
    obter_volume_nut_pac(c.nr_sequencia) qt_volume, 
    '' ds_obs_item, 
    '' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'NPN' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica b, 
    nut_pac c 
where  b.nr_prescricao  = c.nr_prescricao 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select b.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
    to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    b.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    'NPT adulta' ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    c.qt_fase_npt nr_etapas, 
    obter_volume_nut_pac(c.nr_sequencia) qt_volume, 
    '' ds_obs_item, 
    '' dt_horario, 
    substr(coalesce(obter_resp_atend_data(b.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'NAN' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica b, 
    nut_pac c 
where  b.nr_prescricao	= c.nr_prescricao 
and   ie_npt_adulta	= 'S' 
and   ((b.dt_liberacao is not null) or (b.dt_liberacao_medico is not null)) 

union
 
select a.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(a.cd_prescritor),1,60) nm_prescritor, 
    to_char(a.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(a.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(a.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(a.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(a.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(a.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    a.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_desc_tipo_jejum(c.nr_seq_tipo),1,80) ds_item, 
    null qt_item, 
    '' cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    null nr_etapas, 
    null qt_volume, 
    '' ds_obs_item, 
    ('Vigência: ' || to_char(c.dt_inicio,'dd/mm/yyyy hh24:mi:ss') || ' até ' || to_char(c.dt_fim,'dd/mm/yyyy hh24:mi:ss')) dt_horario, 
    substr(coalesce(obter_resp_atend_data(a.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	0 nr_seq_horario, 
	'J' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica a, 
    rep_jejum c 
where  a.nr_prescricao  = c.nr_prescricao 
and   ((a.dt_liberacao is not null) or (a.dt_liberacao_medico is not null)) 

union
 
select a.nr_prescricao nr_prescricao, 
    substr(obter_nome_pf(a.cd_prescritor),1,60) nm_prescritor, 
    to_char(a.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
    to_char(a.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
    to_char(a.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
    to_char(a.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
    '' dt_emissao_farmacia, 
    to_char(a.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
    to_char(a.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
    a.nr_horas_validade nr_horas_validade, 
    c.nr_sequencia nr_seq_item, 
    substr(obter_valor_dominio(1299, c.ie_respiracao),1,50)||CASE WHEN ie_disp_resp_esp IS NULL THEN ''  ELSE ' - '||substr(obter_valor_dominio(1612,ie_disp_resp_esp),1,50) END  ds_item, 
    c.qt_gasoterapia qt_item, 
    ie_unidade_medida cd_um, 
    '' ie_via, 
    '' ds_aplicacao, 
    '' ds_componentes, 
    null nr_etapas, 
    null qt_volume,	 
    substr(c.ds_observacao,1,255) ds_obs_item, 
    to_char(c.dt_prev_execucao,'dd/mm/yyyy hh24:mi') dt_horario, 
    substr(coalesce(obter_resp_atend_data(a.nr_atendimento,LOCALTIMESTAMP),'Não informado'),1,60) nm_resp_atend, 
    'N' ie_medicacao_paciente, 
    'N' ie_executar_leito, 
	c.nr_sequencia nr_seq_horario, 
	'O' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from  prescr_medica a, 
    prescr_gasoterapia c 
where  a.nr_prescricao  = c.nr_prescricao 
and   ((a.dt_liberacao is not null) or (a.dt_liberacao_medico is not null)) 

union
 
select 	b.nr_prescricao nr_prescricao, 
	substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
	to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
	to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
	to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
	to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
	'' dt_emissao_farmacia, 
	to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
	to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
	b.nr_horas_validade nr_horas_validade, 
	null nr_seq_item, 
	substr(a.ds_servico,1,80) ds_item, 
	d.qt_parametro qt_item, 
	substr(obter_unid_med_dieta(d.cd_dieta),1,150) cd_um, 
	'' ie_via, 
	'' ds_aplicacao, 
	substr(obter_dietas_servico(x.nr_sequencia,1),1,2000) ds_componentes, 
	null nr_etapas, 
	null qt_volume, 
	substr(x.ds_observacao,1,255) ds_obs_item, 
	to_char(x.dt_servico,'dd/mm/yyyy hh24:mi') dt_horario, 
	substr(coalesce(obter_resp_atend_data(x.nr_atendimento,x.dt_servico),'Não informado'),1,60) nm_resp_atend, 
	'N' ie_medicacao_paciente, 
	'N' ie_executar_leito, 
	x.nr_sequencia nr_seq_horario, 
	'DE' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	'' ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from	prescr_dieta d, 
	nut_servico a, 
	prescr_medica b, 
	nut_atend_serv_dia x 
where	d.nr_prescricao	= b.nr_prescricao 
and 	x.nr_atendimento = b.nr_atendimento 
and	x.nr_seq_servico = a.nr_sequencia 
and	x.dt_servico between b.dt_inicio_prescr and b.dt_validade_prescr 
and 	x.ie_status_adep = 'Y' 

union
 
select 
	b.nr_prescricao nr_prescricao, 
	substr(obter_nome_pf(b.cd_prescritor),1,60) nm_prescritor, 
	to_char(b.dt_prescricao,'dd/mm/yyyy hh24:mi') dt_prescricao, 
	to_char(b.dt_liberacao,'dd/mm/yyyy hh24:mi') dt_liberacao, 
	to_char(b.dt_liberacao_medico,'dd/mm/yyyy hh24:mi') dt_liberacao_medico, 
	to_char(b.dt_liberacao_farmacia,'dd/mm/yyyy hh24:mi') dt_liberacao_farmacia, 
	'' dt_emissao_farmacia, 
	to_char(b.dt_inicio_prescr,'dd/mm/yyyy hh24:mi') dt_inicio_prescr, 
	to_char(b.dt_validade_prescr,'dd/mm/yyyy hh24:mi') dt_validade_prescr, 
	b.nr_horas_validade nr_horas_validade, 
	null nr_seq_item, 
	substr(a.ds_servico,1,80) ds_item, 
	d.qt_parametro qt_item, 
	substr(Obter_Unid_Med_Dieta(d.cd_dieta),1,150) cd_um, 
	'' ie_via, 
	'' ds_aplicacao, 
	substr(obter_dietas_servico(x.nr_sequencia,1),1,2000) ds_componentes, 
	null nr_etapas, 
	null qt_volume, 
	substr(x.ds_observacao,1,255) ds_obs_item, 
	to_char(x.dt_servico,'dd/mm/yyyy hh24:mi') dt_horario, 
	substr(coalesce(obter_resp_atend_data(x.nr_atendimento,x.dt_servico),'Não informado'),1,60) nm_resp_atend, 
	'N' ie_medicacao_paciente, 
	'N' ie_executar_leito, 
	x.nr_sequencia nr_seq_horario, 
	'DE' ie_tipo_item, 
	'' ds_justificativa, 
	'' ie_bomba_infusao, 
	'' ie_tipo_analgesia, 
	'' ie_pca_modo_prog, 
	NULL qt_vol_infusao_pca, 
	'' ie_um_fluxo_pca, 
	NULL qt_bolus_pca, 
	'' ie_um_bolus_pca, 
	NULL qt_intervalo_bloqueio, 
	NULL qt_dose_inicial_pca, 
	'' ie_um_dose_inicio_pca, 
	NULL qt_limite_quatro_hora, 
	'' ie_um_limite_pca, 
	NULL qt_limite_uma_hora, 
	'' ie_um_limite_hora_pca, 
	substr(d.ds_observacao,1,254) ds_observacao, 
	'' ds_obs_medic, 
	'' ds_subgrupo, 
	'' ds_classe 
from	prescr_dieta d, 
	nut_servico a, 
	nut_atend_serv_dia_rep c, 
	prescr_medica b, 
	nut_atend_serv_dia x 
where	d.nr_prescricao	= b.nr_prescricao 
and 	x.nr_atendimento = b.nr_atendimento 
and	x.nr_seq_servico = a.nr_sequencia 
and	b.nr_prescricao = c.nr_prescr_oral 
and	x.dt_servico between b.dt_inicio_prescr and b.dt_validade_prescr 
and	c.nr_seq_serv_dia = x.nr_sequencia 
and 	x.ie_status_adep <> 'Y';

