-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW solic_compra_v3 (nr_solic_compra, cd_estabelecimento, dt_solicitacao_compra, dt_atualizacao, nm_usuario, ie_situacao, cd_pessoa_solicitante, cd_local_estoque, cd_centro_custo, cd_conta_contabil, cd_setor_atendimento, ds_observacao, cd_motivo_baixa, dt_baixa, dt_liberacao, cd_pessoa_autoriza, cd_comprador_resp, dt_autorizacao, dt_impressao, nm_solicitante, ds_setor_atendimento, nr_cot_compra, ie_urgente, nr_seq_motivo_cancel, nr_seq_tipo_compra, nr_seq_mod_compra, nr_seq_forma_compra, nr_seq_grupo_resp_compra, ie_tipo_servico) AS select	distinct(c.nr_solic_compra),
	c.cd_estabelecimento,
	c.dt_solicitacao_compra,
	c.dt_atualizacao,
	c. nm_usuario,
	c.ie_situacao,
	c.cd_pessoa_solicitante,
	c.cd_local_estoque,
	c.cd_centro_custo,
	c.cd_conta_contabil,
	c.cd_setor_atendimento,
	c.ds_observacao,
	c.cd_motivo_baixa,
	c.dt_baixa,
	c.dt_liberacao,
	c.cd_pessoa_autoriza,
	c.cd_comprador_resp,
	c.dt_autorizacao,
	c.dt_impressao,
	p.nm_pessoa_fisica nm_solicitante,
	s.ds_setor_atendimento,
	i.nr_cot_compra,
	c.ie_urgente,
	c.nr_seq_motivo_cancel,
	nr_seq_tipo_compra,
	nr_seq_mod_compra,
	c.nr_seq_forma_compra,
	c.nr_seq_grupo_resp_compra,
	c.ie_tipo_servico
FROM pessoa_fisica p, solic_compra c
LEFT OUTER JOIN setor_atendimento s ON (c.cd_setor_atendimento = s.cd_setor_atendimento)
LEFT OUTER JOIN solic_compra_item i ON (c.nr_solic_compra = i.nr_solic_compra)
WHERE c.cd_pessoa_solicitante	= p.cd_pessoa_fisica;

