-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW eis_mat_med_cirurgia_v (dt_referencia, cd_procedimento, ie_origem_proced, cd_kit_material, cd_material, qt_material_util_kit, qt_material_util_intra, qt_material_devol_kit, qt_material_devol_intra, cd_medico_cirurgiao, cd_pessoa_fisica, ds_procedimento, cd_proc_origem, ds_material, ds_kit, nm_medico, nm_pessoa_fisica) AS SELECT	a.DT_REFERENCIA,a.CD_PROCEDIMENTO,a.IE_ORIGEM_PROCED,a.CD_KIT_MATERIAL,a.CD_MATERIAL,a.QT_MATERIAL_UTIL_KIT,a.QT_MATERIAL_UTIL_INTRA,a.QT_MATERIAL_DEVOL_KIT,a.QT_MATERIAL_DEVOL_INTRA,a.CD_MEDICO_CIRURGIAO,a.CD_PESSOA_FISICA,
	SUBSTR(obter_desc_estrut_proc(NULL, NULL, NULL, a.cd_procedimento, a.ie_origem_proced),1,110) ds_procedimento, 
	TO_CHAR(a.cd_procedimento) || TO_CHAR(a.ie_origem_proced) cd_proc_origem, 
	SUBSTR(OBTER_DESC_MATERIAL(a.cd_material),1,255) ds_material, 
	SUBSTR(OBTER_DESC_KIT(a.cd_kit_material),1,255) ds_kit, 
	SUBSTR(obter_nome_pf(a.cd_medico_cirurgiao),1,60) nm_medico, 
	SUBSTR(obter_nome_pf(a.cd_pessoa_fisica),1,255) nm_pessoa_fisica 
FROM	EIS_MATERIAL_CIRURGIA a;

