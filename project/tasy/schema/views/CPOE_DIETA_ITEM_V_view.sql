-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW cpoe_dieta_item_v (nr_sequencia, ie_tipo_dieta, nr_item, cd_mat_prod, ie_via_leite, qt_dose_prod, cd_unid_med_prod) AS SELECT nr_sequencia
         , ie_tipo_dieta
         , 1                 AS nr_item
         , cd_mat_prod1      AS cd_mat_prod
         , ie_via_leite1     AS ie_via_leite
         , qt_dose_prod1     AS qt_dose_prod
         , cd_unid_med_prod1 AS cd_unid_med_prod
  FROM   cpoe_dieta
  WHERE  cd_mat_prod1 IS NOT NULL

UNION

  SELECT nr_sequencia
         , ie_tipo_dieta
         , 2                 AS nr_item
         , cd_mat_prod2      AS cd_mat_prod
         , ie_via_leite2     AS ie_via_leite
         , qt_dose_prod2     AS qt_dose_prod
         , cd_unid_med_prod2 AS cd_unid_med_prod
  FROM   cpoe_dieta
  WHERE  cd_mat_prod2 IS NOT NULL
  
UNION

  SELECT nr_sequencia
         , ie_tipo_dieta
         , 3                 AS nr_item
         , cd_mat_prod3      AS cd_mat_prod
         , ie_via_leite3     AS ie_via_leite
         , qt_dose_prod3     AS qt_dose_prod
         , cd_unid_med_prod3 AS cd_unid_med_prod
  FROM   cpoe_dieta
  WHERE  cd_mat_prod3 IS NOT NULL
  
UNION

  SELECT nr_sequencia
         , ie_tipo_dieta
         , 4                 AS nr_item
         , cd_mat_prod4      AS cd_mat_prod
         , ie_via_leite4     AS ie_via_leite
         , qt_dose_prod4     AS qt_dose_prod
         , cd_unid_med_prod4 AS cd_unid_med_prod
  FROM   cpoe_dieta
  WHERE  cd_mat_prod4 IS NOT NULL;

