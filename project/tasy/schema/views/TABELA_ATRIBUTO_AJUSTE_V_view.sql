-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW tabela_atributo_ajuste_v (nm_atributo, ie_obrigatorio, ie_tipo_atributo, qt_tamanho, qt_decimais, vl_default, nm_tabela, nr_sequencia_criacao) AS SELECT 	a.nm_atributo,
	a.ie_obrigatorio,
	a.ie_tipo_atributo,
	a.qt_tamanho,
	a.qt_decimais,
	a.vl_default,
	a.nm_tabela,
	a.nr_sequencia_criacao
FROM	tabela_atributo a,
	tabela_sistema	c
WHERE	a.ie_tipo_atributo 	not in ('FUNCTION','VISUAL')
AND	a.nm_tabela		= c.nm_tabela
AND	gerar_objeto_aplicacao(c.ds_aplicacao) = 'S'
AND	NOT EXISTS ( 	SELECT 	1
	  	  	FROM	user_tab_columns b
			WHERE	a.nm_atributo = b.column_name
			AND	a.nm_tabela   = b.table_name
			AND	b.NULLABLE    <> CASE WHEN a.ie_obrigatorio='S' THEN 'Y'  ELSE 'N' END );

