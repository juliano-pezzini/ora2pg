-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW hd_dialise_concentrado_v (nr_sequencia, nr_seq_dialise, ie_atualiza_estoque, cd_lote_fornecedor, cd_material, cd_pf_inclusao, dt_inclusao, dt_retirada, cd_pf_retirada, ds_material, nr_seq_maquina, nr_seq_ponto_acesso, dt_atualizacao_nrec, nm_usuario_nrec, ie_opcao) AS SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	a.CD_PF_INCLUSAO,
	a.DT_INCLUSAO,
	null DT_RETIRADA,
	null CD_PF_RETIRADA,
	SUBSTR(obter_desc_material(cd_material),1,255) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'MD' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a

UNION

SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	a.CD_PF_INCLUSAO,
	a.DT_INCLUSAO,
	null DT_RETIRADA,
	null CD_PF_RETIRADA,
	SUBSTR(obter_desc_material(cd_material),1,255) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'SD' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a

UNION

SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	null CD_PF_INCLUSAO,
	null DT_INCLUSAO,
	a.DT_RETIRADA,
	a.CD_PF_RETIRADA,
	SUBSTR(obter_desc_material(cd_material),1,255) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'FD' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a

UNION

SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	null CD_PF_INCLUSAO,
	null DT_INCLUSAO,
	a.DT_RETIRADA,
	a.CD_PF_RETIRADA,
	SUBSTR(obter_desc_material(cd_material),1,255) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'RC' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a

UNION

SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	a.CD_PF_INCLUSAO,
	a.DT_INCLUSAO,
	a.DT_RETIRADA,
	a.CD_PF_RETIRADA,
	obter_desc_material(a.cd_material) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'SC' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a

UNION

SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	a.CD_PF_INCLUSAO,
	a.DT_INCLUSAO,
	null DT_RETIRADA,
	null CD_PF_RETIRADA,
	obter_desc_material(a.cd_material) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'IC' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a

UNION

SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	null CD_PF_INCLUSAO,
	null DT_INCLUSAO,
	a.DT_RETIRADA,
	a.CD_PF_RETIRADA,
	SUBSTR(obter_desc_material(a.cd_material),1,255) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'C' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a

UNION

SELECT	a.NR_SEQUENCIA,
	a.NR_SEQ_DIALISE,
	a.IE_ATUALIZA_ESTOQUE,
	a.CD_LOTE_FORNECEDOR,
	a.CD_MATERIAL,
	a.CD_PF_INCLUSAO,
	a.DT_INCLUSAO,
	null DT_RETIRADA,
	null CD_PF_RETIRADA,
	SUBSTR(obter_desc_material(cd_material),1,255) DS_MATERIAL,
	a.NR_SEQ_MAQUINA,
	a.NR_SEQ_PONTO_ACESSO,
	a.dt_atualizacao_nrec,
	SUBSTR(obter_nome_usuario(a.NM_USUARIO_NREC),1,200) NM_USUARIO_NREC,
	'MD' IE_OPCAO
FROM	HD_DIALISE_CONCENTRADO a;

