-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW sinal_vital_relatorio_v (dt_sinal_vital, nr_atendimento, dt_liberacao, dt_inativacao, ds_registro) AS select DT_SINAL_VITAL,
nr_atendimento,
dt_liberacao,
dt_inativacao,
 '<b>Daten:</b> ' || chr(13) ||
 case when CD_PESSOA_FISICA is null
        then ''
        else ' <b>Fachkraft:</b>  ' || substr(obter_nome_pf(cd_pessoa_fisica),1,40)|| '; ' end ||
		case when NR_HORA is null
        then ''
        else ' <b>Uhrzeit:</b> ' || to_char(NR_HORA)|| '; ' end ||
        chr(10)  || chr(13) || '<b>Vitalparameter:</b> ' || chr(13) ||
        case when IE_PRESSAO is null
        then ''
        else ' <b>Position Blutdruckmessung:</b> ' || OBTER_DESCRICAO_DOMINIO(1303, IE_PRESSAO) || '; ' end ||
        case when IE_APARELHO_PA is null
        then ''
        else ' <b>Blutdruckmessgerät:</b> ' || OBTER_DESCRICAO_DOMINIO(1306, IE_APARELHO_PA) || '; ' end ||
        case when IE_MANGUITO is null
        then ''
        else ' <b>Blutdruckmanschette:</b> ' || OBTER_DESCRICAO_DOMINIO(1305, IE_MANGUITO) || '; ' end ||
        case when IE_MEMBRO  is null
        then ''
        else ' <b>Blutdruck-Messort:</b> ' || OBTER_DESCRICAO_DOMINIO(1304, IE_MEMBRO) || '; ' end ||
        case when QT_PA_SISTOLICA is null
        then ''
        else ' <b>Systolischer BD (mmHg):</b> ' || QT_PA_SISTOLICA || '; ' end ||
        case when QT_PA_DIASTOLICA is null
        then ''
        else ' <b>Diastolischer BD (mmHg):</b> ' || QT_PA_DIASTOLICA|| '; ' end ||
        case when QT_PAM is null
        then ''
        else ' <b>MAD (mmHg):</b> ' || QT_PAM|| '; ' end ||
        case when QT_FREQ_CARDIACA is null
        then ''
        else ' <b>Puls (Schläge/Minute):</b> ' || QT_FREQ_CARDIACA|| '; ' end ||
        case when QT_FREQ_RESP is null
        then ''
        else ' <b>Atemfrequenz (Züge/Min.):</b> ' || QT_FREQ_RESP|| '; ' end ||
        case when QT_TEMP is null
        then ''
        else ' <b>Temperatur (°C):</b> ' || QT_TEMP|| '; ' end ||
        case when IE_SITIO is null
        then ''
        else ' <b>Messort:</b> ' || OBTER_DESCRICAO_DOMINIO(1558, IE_SITIO)|| '; ' end ||
		chr(10)  || chr(13) || '<b>Schmerzdokumentation:</b> ' || chr(13) ||
        case when CD_ESCALA_DOR is null
        then ''
        else ' <b>Schmerzskala:</b> ' || substr(obter_desc_escala_dor(CD_ESCALA_DOR),1,255)|| '; ' end ||
        case when QT_ESCALA_DOR is null
        then ''
        else ' <b>Wert:</b> ' || QT_ESCALA_DOR|| '; ' end ||
        case when NR_SEQ_RESULT_DOR is null
        then ''
        else ' <b>Abschluss:</b> ' || (select 	ds_escala FROM 	escala_dor_regra where nr_sequencia = NR_SEQ_RESULT_DOR)|| '; ' end ||
        case when NR_SEQ_TOPOGRAFIA_DOR is null
        then ''
        else ' <b>Topografie:</b> ' || (select ds_topografia ds from   topografia_dor where  nr_sequencia = NR_SEQ_TOPOGRAFIA_DOR)|| '; ' end ||
        case when IE_LADO is null
        then ''
        else ' <b>Seite:</b> ' || OBTER_DESCRICAO_DOMINIO(1372, IE_LADO)|| '; ' end ||
        case when IE_TIPO_DOR is null
        then ''
        else ' <b>Schmerzart:</b> ' || OBTER_DESCRICAO_DOMINIO(6011, IE_TIPO_DOR)|| '; ' end ||
        case when NR_SEQ_CONDICAO_DOR is null
        then ''
        else ' <b>Schmerzzustand:</b> ' || (select	ds_condicao ds from	condicao_dor where nr_sequencia = NR_SEQ_CONDICAO_DOR)|| '; ' end ||
        case when IE_FREQUENCIA_DOR is null
        then ''
        else ' <b>Häufigkeit:</b> ' || OBTER_DESCRICAO_DOMINIO(6010, IE_FREQUENCIA_DOR)|| '; ' end ||
        case when QT_PERIODO is null
        then ''
        else ' <b>Dauer:</b> ' || QT_PERIODO|| '; ' end ||
        case when IE_PERIODO is null
        then ''
        else ' <b>Zeitraum:</b> ' || OBTER_DESCRICAO_DOMINIO(4300, IE_PERIODO)|| '; ' end ||
        case when NR_SEQ_INAPTO_DOR is null
        then ''
        else ' <b>Grund für ausgebliebene Schmerzbewertung:</b> ' || (select  DS_MOTIVO ds from    INAPTO_DOR where nr_sequencia = NR_SEQ_INAPTO_DOR)|| '; ' end ||
		chr(10)  || chr(13) || case when QT_CETONA is null
        then ''
        else ' <b>Ketone (mmol/l)</b>: ' || QT_CETONA|| '; ' end ||
		case when QT_CETONA is null
        then ''
        else ' <b>Intermediärinsulin (IU)</b>: ' || QT_UI_INSULINA_INT|| '; ' end ||
		chr(10)  || chr(13) || '<b>Allgemeine Überwachung:</b> ' || chr(13) ||
        case when QT_SATURACAO_O2 is null
        then ''
        else ' <b>SpO2 Sauerstoff digital (%):</b> ' || QT_SATURACAO_O2|| '; ' end ||
		case when IE_COND_SAT_O2 is null
        then ''
        else ' <b>Sättigungszustand:</b> ' || OBTER_DESCRICAO_DOMINIO(4849, IE_COND_SAT_O2)|| '; ' end ||
		case when QT_SPO2R is null
        then ''
        else ' <b>HF Pulsoximeter (/min):</b> ' || QT_SPO2R|| '; ' end ||
		case when IE_MEMBRO_SAT_O2  is null
        then ''
        else ' <b>Extremität der Sättigung:</b> ' || OBTER_DESCRICAO_DOMINIO(1304, IE_MEMBRO_SAT_O2 )|| '; ' end ||
		case when QT_O2_SUPLEMENTAR is null
        then ''
        else ' <b>O2-Gabe:</b> ' || QT_O2_SUPLEMENTAR|| '; ' end ||
		case when IE_UNID_MED_O2_SUPLEM is null
        then ''
        else ' <b>Maßeinheit:</b> ' || OBTER_DESCRICAO_DOMINIO(3574, IE_UNID_MED_O2_SUPLEM)|| '; ' end ||
		case when QT_GLICEMIA_CAPILAR is null
        then ''
        else ' <b>Kapilläre Glykämie (mg/dl):</b> ' || QT_GLICEMIA_CAPILAR|| '; ' end ||
		case when IE_GLIC_EXTRAPOL is null
        then ''
        else ' <b>Glukoseprotokoll:</b> ' || OBTER_DESCRICAO_DOMINIO(4398, IE_GLIC_EXTRAPOL)|| '; ' end ||
		case when QT_VARIACAO_GLIC is null
        then ''
        else ' <b>Glykämie Variation:</b> ' || QT_VARIACAO_GLIC|| '; ' end ||
		case when QT_GLIC_MEDIA_DIA is null
        then ''
        else ' <b>Durchschnitt 24 h:</b> ' || QT_GLIC_MEDIA_DIA|| '; ' end ||
		case when QT_GLIC_MEDIA_ATEND is null
        then ''
        else ' <b>Durchschnittliche Glykämie des Falldetails:</b> ' || QT_GLIC_MEDIA_ATEND|| '; ' end ||
		case when QT_INSULINA is null
        then ''
        else ' <b>Insulin (IE):</b> ' || QT_INSULINA|| '; ' end ||
		case when QT_GLICOSE_ADM is null
        then ''
        else ' <b>Glukose (g):</b> ' || QT_GLICOSE_ADM|| '; ' end ||
		case when IE_RITMO_ECG  is null
        then ''
        else ' <b>EKG-Rhythmus:</b> ' || OBTER_DESCRICAO_DOMINIO(1557, IE_RITMO_ECG )|| '; ' end ||
		case when IE_DERIVACAO_SEG_ST is null
        then ''
        else ' <b>TS-Ableitung:</b> ' || OBTER_DESCRICAO_DOMINIO(4262, IE_DERIVACAO_SEG_ST)|| '; ' end ||
		case when QT_SEGMENTO_ST is null
        then ''
        else ' <b>Variation (mm):</b> ' || QT_SEGMENTO_ST|| '; ' end ||
		case when QT_PVC_H2O is null
        then ''
        else ' <b>ZVD (cmH20):</b> ' || QT_PVC_H2O|| '; ' end ||
		case when QT_PVC is null
        then ''
        else ' <b>ZVD (mmHg):</b> ' || QT_PVC|| '; ' end ||
		case when QT_PAE is null
        then ''
        else ' <b>LAP (mmHg):</b> ' || QT_PAE|| '; ' end ||
		case when QT_PRESSAO_INTRA_ABD_H2O is null
        then ''
        else ' <b>IAP (cmH²O):</b> ' || QT_PRESSAO_INTRA_ABD_H2O|| '; ' end ||
		case when QT_PRESSAO_INTRA_ABD is null
        then ''
        else ' <b>IAP (mmHg):</b> ' || QT_PRESSAO_INTRA_ABD|| '; ' end ||
		case when QT_PPA is null
        then ''
        else ' <b>APP (mmHg):</b> ' || QT_PPA|| '; ' end ||
		case when QT_PRESSAO_INTRA_CRANIO is null
        then ''
        else ' <b>ICP (mmHg):</b> ' || QT_PRESSAO_INTRA_CRANIO|| '; ' end ||
		case when QT_PIC_TEMP is null
        then ''
        else ' <b>Erhöhter intrakranieller Druck - ICP-Kathetertemperatur:</b> ' || QT_PIC_TEMP|| '; ' end ||
		case when QT_PPC is null
        then ''
        else ' <b>CPP (mmHg):</b> ' || QT_PPC|| '; ' end ||
		case when QT_MAEC is null
        then ''
        else ' <b>Hirnelektrische Aktivität (BIS):</b> ' || QT_MAEC|| '; ' end ||
		case when QT_TOF_BLOQ_NEURO_MUSC is null
        then ''
        else ' <b>TOF (%):</b> ' || QT_TOF_BLOQ_NEURO_MUSC|| '; ' end ||
		case when IE_DECUBITO  is null
        then ''
        else ' <b>Lagerung:</b> ' || OBTER_DESCRICAO_DOMINIO(2279, IE_DECUBITO )|| '; ' end ||
		case when QT_ANGULO_CABECEIRA is null
        then ''
        else ' <b>Anstellwinkel:</b> ' || QT_ANGULO_CABECEIRA|| '; ' end ||
        chr(10)  || chr(13) || '<b>Körpermaße:</b> ' || chr(13) ||
        case when qt_peso is null
        then ''
        else ' <b>Gewicht:</b> ' || qt_peso || IE_UNID_MED_PESO|| '; ' end ||
        case when qt_peso_atual is null
        then ''
        else ' <b>Gewicht:</b> ' || qt_peso_atual || IE_UNID_MED_PESO|| '; ' end ||
        case when IE_ORIGEM_PESO is null
        then ''
        else ' <b>Herkunft:</b> ' || OBTER_DESCRICAO_DOMINIO(3245, IE_ORIGEM_PESO)|| '; ' end ||
        case when QT_DELTA_PESO is null
        then ''
        else ' <b>Gewichtsdifferenz:</b> ' || QT_DELTA_PESO|| '; ' end ||
        case when QT_ALTURA_M is null
        then ''
        else ' <b>Größe:</b> ' || QT_ALTURA_M || IE_UNID_MED_ALTURA|| '; ' end ||
        case when QT_ALTURA_CM is null
        then ''
        else ' <b>Größe:</b> ' || QT_ALTURA_CM || IE_UNID_MED_ALTURA|| '; ' end ||
        case when IE_ORIGEM_ALTURA is null
        then ''
        else ' <b>Herkunft:</b> ' || OBTER_DESCRICAO_DOMINIO(3245, IE_ORIGEM_ALTURA)|| '; ' end ||
        case when QT_SUPERF_CORPORIA is null
        then ''
        else ' <b>Körperoberfläche (m²):</b> ' || QT_SUPERF_CORPORIA|| '; ' end ||
        case when QT_IMC is null
        then ''
        else ' <b>BMI (kg/m²):</b> ' || QT_IMC|| '; ' end ||
        case when QT_IMC is null
        then ''
        else ' <b>Beschreibung:</b> ' || substr(Obter_Desc_IMC(QT_IMC,somente_numero(obter_idade_pf(obter_pessoa_atendimento(nr_atendimento,'C'),LOCALTIMESTAMP,'A'))),1,40)|| '; ' end ||
        case when QT_CIRCUNF_BRACO is null
        then ''
        else ' <b>Armumfang:</b> ' || QT_CIRCUNF_BRACO|| '; ' end ||
        case when QT_PREGA_CUTANEA_TRICEPS is null
        then ''
        else ' <b>Trizeps-Hautfaltendicke (mm):</b> ' || QT_PREGA_CUTANEA_TRICEPS|| '; ' end ||
        case when QT_CIRCUNF_BRACO is null or QT_PREGA_CUTANEA_TRICEPS is null
        then ''
        else ' <b>Armmuskelumfang:</b> ' || (QT_CIRCUNF_BRACO - (0.314 * QT_PREGA_CUTANEA_TRICEPS))|| '; ' end ||
        case when QT_CIRCUNF_PANTURRILHA is null
        then ''
        else ' <b>Wadenumfang:</b> ' || QT_CIRCUNF_PANTURRILHA|| '; ' end ||
        case when QT_RELACAO_ABD_QUAD is null
        then ''
        else ' <b>Taille/Hüfte-Verhältnis:</b> ' || QT_RELACAO_ABD_QUAD|| '; ' end || chr(13) ||
		chr(10)  || chr(13) || '<b>Umfänge:</b> ' || chr(13) ||
		case when QT_PERIMETRO_CEFALICO is null
        then ''
        else ' <b>Cephal:</b> ' || QT_PERIMETRO_CEFALICO|| '; ' end ||
		case when QT_PERIMETRO_TORACICO is null
        then ''
        else ' <b>Thorakal:</b> ' || QT_PERIMETRO_TORACICO|| '; ' end ||
		case when QT_PERIMITRO_ABDOMINAL is null
        then ''
        else ' <b>Abdominal:</b> ' || QT_PERIMITRO_ABDOMINAL|| '; ' end ||
		case when QT_PERIMETRO_QUADRIL is null
        then ''
        else ' <b>Hüfte:</b> ' || QT_PERIMETRO_QUADRIL|| '; ' end ||
		chr(10)  || chr(13) || '<b>Pädiatrische Überwachung:</b> ' || chr(13) ||
		case when QT_UMID_INCUBADORA is null
        then ''
        else ' <b>Luftfeuchtigkeit im Inkubator (%):</b> ' || QT_UMID_INCUBADORA|| '; ' end ||
		case when QT_TEMP_INCUBADORA is null
        then ''
        else ' <b>Inkubatortemperatur:</b> ' || QT_TEMP_INCUBADORA|| '; ' end ||
		case when QT_TEMP_BERCO is null
        then ''
        else ' <b>Temperatur der Wiege:</b> ' || QT_TEMP_BERCO|| '; ' end ||
		case when QT_BILIRRUBINA_TRONCO is null
        then ''
        else ' <b>Transkutane Bilirubinmessung (mg/dl):</b> ' || QT_BILIRRUBINA_TRONCO|| '; ' end ||
		case when QT_BILIRRUBINA_FRONTE is null
        then ''
        else ' <b>Bilirubin direkt + indirekt (mg/dl):</b> ' || QT_BILIRRUBINA_FRONTE|| '; ' end ||
		case when QT_IRRADIANCIA is null
        then ''
        else ' <b>Bestrahlung (mW/cm²/nm):</b> ' || QT_IRRADIANCIA|| '; ' end ||
		chr(10)  || chr(13) || '<b>Neurologische Beurteilung:</b> ' || chr(13) ||
		case when QT_PUPILA_TAMANHO is null
        then ''
        else ' <b>Pupillengröße - rechts:</b> ' || OBTER_DESCRICAO_DOMINIO(4365, QT_PUPILA_TAMANHO)|| '; ' end ||
		case when QT_PUPILA_TAM_ESQ is null
        then ''
        else ' <b>Pupillengröße - links:</b> ' || OBTER_DESCRICAO_DOMINIO(4365, QT_PUPILA_TAM_ESQ)|| '; ' end ||
		case when IE_PUPILA_REACAO_LUZ is null
        then ''
        else ' <b>Reaktion auf Licht rechtsseitig:</b> ' || OBTER_DESCRICAO_DOMINIO(2925, IE_PUPILA_REACAO_LUZ)|| '; ' end ||
		case when IE_PUPILA_REACAO_LUZ_E is null
        then ''
        else ' <b>Reaktion auf Licht linksseitig:</b> ' || OBTER_DESCRICAO_DOMINIO(2925, IE_PUPILA_REACAO_LUZ_E)|| '; ' end ||
		case when IE_PUPILA_ALTERACAO is null
        then ''
        else ' <b>Änderung:</b> ' || OBTER_DESCRICAO_DOMINIO(2926, IE_PUPILA_ALTERACAO)|| '; ' end ||
		case when IE_PUPILA_LADO is null
        then ''
        else ' <b>Seite:</b> ' || OBTER_DESCRICAO_DOMINIO(1372, IE_PUPILA_LADO)|| '; ' end ||
		case when IE_SINAL_FOCAL is null
        then ''
        else ' <b>Fokalzeichen:</b> ' || OBTER_DESCRICAO_DOMINIO(2927, IE_SINAL_FOCAL)|| '; ' end ||
		case when IE_SINAL_FOCAL_LOCAL is null
        then ''
        else ' <b>Ort des fokalen Signals:</b> ' || OBTER_DESCRICAO_DOMINIO(2928, IE_SINAL_FOCAL_LOCAL)|| '; ' end ||
		case when IE_NIVEL_CONSCIENCIA is null
        then ''
        else ' <b>Bewusstseinsgrad:</b> ' || OBTER_DESCRICAO_DOMINIO(3342, IE_NIVEL_CONSCIENCIA)|| '; ' end ||
		case when IE_BABINSKI is null
        then ''
        else ' <b>Babinski:</b> ' || OBTER_DESCRICAO_DOMINIO(3441, IE_BABINSKI)|| '; ' end ||
		chr(10)  || chr(13) || '<b>Aufzeichnungen aus Geburtshilfe:</b> ' || chr(13) ||
		case when QT_BCF is null
        then ''
        else ' <b>Fetale Herzfrequenz (bpm):</b> ' || QT_BCF|| '; ' end ||
		case when QT_BCF_2 is null
        then ''
        else ' <b>Fetale Herzfrequenz (bpm):</b> ' || QT_BCF_2|| '; ' end ||
		case when QT_BCF_3 is null
        then ''
        else ' <b>Fetale Herzfrequenz (bpm):</b> ' || QT_BCF_3|| '; ' end ||
		chr(10)  || chr(13) || case when DS_OBSERVACAO is null
        then ''
        else ' <b>Bemerkung</b>: ' || DS_OBSERVACAO|| '; ' end
		ds_registro
 from   atendimento_sinal_vital;

