-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW modelo_conteudo_v (nr_sequencia, nr_seq_modelo, nr_seq_perg_visual, nr_seq_pergunta, dt_atualizacao, nm_usuario, dt_atualizacao_nrec, nm_usuario_nrec, nr_seq_apres, qt_tamanho, ds_label, qt_tam_grid, qt_altura, ds_label_grid, ds_mascara, ie_readonly, ie_obrigatorio, ie_tabstop, ds_sql, qt_desloc_dir, qt_pos_esquerda, ie_italico, ie_negrito, ie_sublinhado, ds_cor, qt_fonte, qt_altura_perg_visual, ie_alterar_label, vl_padrao, ie_apres_cad_pre, ds_formula, qt_tam_label, ds_regra, qt_max_caracter, qt_topo_campo, qt_intervalo_campo, ie_componente, ds_item, ie_tipo_atributo, cd_dominio, nr_seq_grupo, ds_grupo, nr_seq_apres_grupo, ie_nova_linha, ds_tooltip, ie_oculta_tooltip, nr_seq_item_dep, ie_comparacao, vl_comparacao) AS select	a.NR_SEQUENCIA,
	a.NR_SEQ_MODELO,
	a.NR_SEQ_PERG_VISUAL,
	a.NR_SEQ_PERGUNTA,
	a.DT_ATUALIZACAO,
	a.NM_USUARIO,
	a.DT_ATUALIZACAO_NREC,
	a.NM_USUARIO_NREC,
	a.NR_SEQ_APRES,
	a.QT_TAMANHO,
	a.DS_LABEL,
	a.QT_TAM_GRID,
	a.QT_ALTURA,
	a.DS_LABEL_GRID,
	a.DS_MASCARA,
	a.IE_READONLY,
	a.IE_OBRIGATORIO,
	a.IE_TABSTOP,
	a.DS_SQL,
	a.QT_DESLOC_DIR,
	a.QT_POS_ESQUERDA,
	a.IE_ITALICO,
	a.IE_NEGRITO,
	a.IE_SUBLINHADO,
	a.DS_COR,
	a.QT_FONTE,
	a.QT_ALTURA_PERG_VISUAL,
	a.IE_ALTERAR_LABEL,
	a.VL_PADRAO,
	a.IE_APRES_CAD_PRE,
	a.DS_FORMULA,
	a.QT_TAM_LABEL,
	a.DS_REGRA,
	a.QT_MAX_CARACTER,
	b.qt_topo_campo,
	b.qt_intervalo_campo,
	c.ie_componente,
	coalesce(ds_label,substr(obter_desc_pergunta(nr_seq_pergunta),1,255)) ds_item,
	c.ie_tipo_atributo,
	c.cd_dominio,
	a.nr_seq_grupo,
	(select	x.ds_grupo
	FROM	modelo_grupo_conteudo x
	where	x.nr_sequencia = a.nr_seq_grupo) ds_grupo,
	(select	x.nr_seq_apres
	from	modelo_grupo_conteudo x
	where	x.nr_sequencia = a.nr_seq_grupo) nr_seq_apres_grupo,
	a.ie_nova_linha,
	a.ds_tooltip,
a.ie_oculta_tooltip,
    a.nr_seq_item_dep,
    a.ie_comparacao,
    a.vl_comparacao
from	pergunta        c,
	modelo	b,
	modelo_conteudo a
where	a.nr_seq_modelo         = b.nr_sequencia
and	a.nr_seq_pergunta       = c.nr_sequencia

union

	select	a.NR_SEQUENCIA,
	a.NR_SEQ_MODELO,
	a.NR_SEQ_PERG_VISUAL,
	a.NR_SEQ_PERGUNTA,
	a.DT_ATUALIZACAO,
	a.NM_USUARIO,
	a.DT_ATUALIZACAO_NREC,
	a.NM_USUARIO_NREC,
	a.NR_SEQ_APRES,
	a.QT_TAMANHO,
	a.DS_LABEL,
	a.QT_TAM_GRID,
	a.QT_ALTURA,
	a.DS_LABEL_GRID,
	a.DS_MASCARA,
	a.IE_READONLY,
	a.IE_OBRIGATORIO,
	a.IE_TABSTOP,
	a.DS_SQL,
	a.QT_DESLOC_DIR,
	a.QT_POS_ESQUERDA,
	a.IE_ITALICO,
	a.IE_NEGRITO,
	a.IE_SUBLINHADO,
	a.DS_COR,
	a.QT_FONTE,
	a.QT_ALTURA_PERG_VISUAL,
	a.IE_ALTERAR_LABEL,
	a.VL_PADRAO,
	a.IE_APRES_CAD_PRE,
	a.DS_FORMULA,
	a.QT_TAM_LABEL,
	a.DS_REGRA,
	a.QT_MAX_CARACTER,
	b.qt_topo_campo,
	b.qt_intervalo_campo,
	'Visual' ie_componente,
	coalesce(ds_label,ds_pergunta) ds_item,
	null ie_tipo_atributo,
	null cd_dominio,
	a.nr_seq_grupo,
	(select	x.ds_grupo
	from	modelo_grupo_conteudo x
	where	x.nr_sequencia = a.nr_seq_grupo) ds_grupo,
	(select	x.nr_seq_apres
	from	modelo_grupo_conteudo x
	where	x.nr_sequencia = a.nr_seq_grupo) nr_seq_apres_grupo,
	a.ie_nova_linha,
	a.ds_tooltip,
	a.ie_oculta_tooltip,
    a.nr_seq_item_dep,
    a.ie_comparacao,
    a.vl_comparacao
from	pergunta_visual c,
	modelo          b,
	modelo_conteudo a
where	a.nr_seq_modelo         = b.nr_sequencia
and	a.nr_seq_perg_visual    = c.nr_sequencia;

