-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW alerta_v (nr_seq_apresent, ie_tipo_alerta, ds_tipo_alerta, nr_seq_alerta, cd_pessoa_alerta, nr_seq_alergeno, ds_alergeno, nr_seq_dcb, ds_dcb, nr_seq_ficha_tecnica, ds_ficha_tecnica, ds_ficha_tecnica_derivados, cd_material, ds_material, nr_seq_dcb_mat, ds_dcb_mat, cd_classe_mat, ds_classe_mat, nr_seq_familia, ds_familia, nr_seq_reacao, ds_tipo_reacao, ds_medic_nao_cad, ie_confirmacao, ds_confirmacao, nr_seq_tipo_vicio, ds_tipo_vicio, ie_freq_vicio, ds_freq_vicio, ds_doenca, nr_seq_doenca, ds_doenca_sae, ie_status_doenca, ds_status_doenca, dt_cirurgia, cd_procedimento, ie_origem_proced, ds_procedimento, ds_proced_desc, cd_medic_uso, ds_medic_uso, ds_medicamento, dt_inicio, ds_observacao, nr_seq_restricao, ds_restricao, nr_seq_nivel, ie_alerta, cd_nivel, ds_nivel, ds_cor_nivel, ie_nao_sabe_fim, dt_liberacao, ds_acessorio, ds_localizacao, nr_atendimento, ds_precaucao, ds_cuidado, ds_motivo, ds_intervalo, ds_amostra_cultura, ds_microorganismo, ds_cid_doenca, ds_motivo_internacao, ds_tratamento, ds_exame, ds_resultado, cd_topografia, ie_nega, ds_tipo_ocorrencia, dt_insercao) AS select	1 nr_seq_apresent,
	'A' ie_tipo_alerta,
	obter_nome_tipo_alerta('A') || '(' || obter_texto_tasy(CASE WHEN coalesce(a.ie_classificacao,'A')='A' THEN 338412  ELSE 1195481 END ,philips_param_pck.get_nr_seq_idioma) || ')' ds_tipo_alerta,--'Alergias / Reacoees adversas'
	a.nr_sequencia nr_seq_alerta,
	a.cd_pessoa_fisica cd_pessoa_alerta,
	a.nr_seq_tipo nr_seq_alergeno,
	CASE WHEN a.ie_nega_alergias='N' THEN substr(obter_desc_alergeno(a.nr_seq_tipo),1,80)  ELSE obter_texto_tasy(CASE WHEN coalesce(a.ie_classificacao,'A')='A',338465,1195482),philips_param_pck.get_nr_seq_idioma)) ds_alergeno,--'Paciente nega alergias'	a.nr_seq_dcb THEN	substr(obter_desc_dcb(a.nr_seq_dcb),1,80) ds_dcb WHEN coalesce(a.ie_classificacao,'A')=a.nr_seq_ficha_tecnica THEN 	substr(obter_estrut_princ_ativo(a.nr_seq_ficha_tecnica,'P'),1,2000) ds_ficha_tecnica WHEN coalesce(a.ie_classificacao,'A')=substr(obter_estrut_princ_ativo(a.nr_seq_ficha_tecnica,'D'),1,2000) ds_ficha_tecnica_derivados THEN 	a.cd_material WHEN coalesce(a.ie_classificacao,'A')=substr(obter_desc_material(a.cd_material),1,100) ds_material THEN 	substr(obter_desc_dcb_mat(a.cd_material,'C'),1,10) nr_seq_dcb_mat WHEN coalesce(a.ie_classificacao,'A')=substr(obter_desc_dcb_mat(a.cd_material,'D'),1,80) ds_dcb_mat THEN 	a.cd_classe_mat WHEN coalesce(a.ie_classificacao,'A')=substr(obter_desc_classe_mat(a.cd_classe_mat),1,60) ds_classe_mat THEN 	a.nr_seq_familia WHEN coalesce(a.ie_classificacao,'A')=substr(obter_desc_familia_mat(a.nr_seq_familia),1,100) ds_familia THEN 	a.nr_seq_reacao WHEN coalesce(a.ie_classificacao,'A')=substr(obter_desc_reacao_alergica(a.nr_seq_reacao),1,100) ds_tipo_reacao THEN 	substr(ds_medic_nao_cad,1,100) ds_medic_nao_cad WHEN coalesce(a.ie_classificacao,'A')=a.ie_confirmacao THEN 	CASE WHEN a.ie_confirmacao='C' THEN obter_texto_tasy(338499,philips_param_pck.get_nr_seq_idioma) WHEN a.ie_confirmacao='S' THEN obter_texto_tasy(338500,philips_param_pck.get_nr_seq_idioma) END  ds_confirmacao WHEN coalesce(a.ie_classificacao,'A')=0 nr_seq_tipo_vicio THEN 	'' ds_tipo_vicio WHEN coalesce(a.ie_classificacao,'A')='' ie_freq_vicio THEN 	'' ds_freq_vicio WHEN coalesce(a.ie_classificacao,'A')='' ds_doenca THEN 	0 nr_seq_doenca WHEN coalesce(a.ie_classificacao,'A')='' ds_doenca_sae THEN 	'' ie_status_doenca WHEN coalesce(a.ie_classificacao,'A')='' ds_status_doenca THEN 	null dt_cirurgia WHEN coalesce(a.ie_classificacao,'A')=0 cd_procedimento THEN 	0 ie_origem_proced WHEN coalesce(a.ie_classificacao,'A')='' ds_procedimento THEN 	'' ds_proced_desc WHEN coalesce(a.ie_classificacao,'A')=0 cd_medic_uso THEN 	'' ds_medic_uso WHEN coalesce(a.ie_classificacao,'A')='' ds_medicamento THEN 	null dt_inicio WHEN coalesce(a.ie_classificacao,'A')=a.ds_observacao THEN 	0 nr_seq_restricao WHEN coalesce(a.ie_classificacao,'A')='' ds_restricao THEN 	b.nr_sequencia nr_seq_nivel WHEN coalesce(a.ie_classificacao,'A')=b.ie_alerta THEN 	b.cd_nivel cd_nivel WHEN coalesce(a.ie_classificacao,'A')=b.ds_nivel ds_nivel THEN 	b.ds_cor ds_cor_nivel WHEN coalesce(a.ie_classificacao,'A')='N' ie_nao_sabe_fim THEN 	a.dt_liberacao WHEN coalesce(a.ie_classificacao,'A')='' ds_acessorio THEN 	'' ds_localizacao WHEN coalesce(a.ie_classificacao,'A')=a.nr_atendimento THEN 	'' ds_precaucao WHEN coalesce(a.ie_classificacao,'A')='' ds_cuidado THEN 	''ds_motivo WHEN coalesce(a.ie_classificacao,'A')='' ds_intervalo THEN 	'' ds_amostra_cultura WHEN coalesce(a.ie_classificacao,'A')='' ds_microorganismo THEN 	'' ds_cid_doenca WHEN coalesce(a.ie_classificacao,'A')='' ds_motivo_internacao THEN 	'' ds_tratamento WHEN coalesce(a.ie_classificacao,'A')='' ds_exame THEN 	'' ds_resultado WHEN coalesce(a.ie_classificacao,'A')='' cd_topografia THEN 	a.ie_nega_alergias ie_nega WHEN coalesce(a.ie_classificacao,'A')='' ds_tipo_ocorrencia THEN 	a.dt_atualizacao_nrec dt_insercaoFROM a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE ((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days') and a.dt_fim))  -- Removido data_fim : OS 376981
  and a.dt_inativacao is null and consiste_se_exibe_alergia(nr_seq_tipo)	= 'S' and coalesce(a.ie_alerta,'S')	= 'S' --and nvl(a.ie_nega_alergias,'N') = 'N'
 
union all
select	2 nr_seq_apresent THEN 	'H' ie_tipo_alerta  ELSE coalesce(obter_nome_tipo_alerta('H'),obter_texto_tasy(338414,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta, --'Habitos e vicios'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	a.nr_seq_tipo nr_seq_tipo_vicio,	CASE WHEN a.ie_nega_habito='N',substr(obter_desc_tipo_vicio(a.nr_seq_tipo),1,80),obter_texto_tasy(338501,philips_param_pck.get_nr_seq_idioma)) ds_tipo_vicio,--'Paciente nega habitos'	a.ie_frequencia ie_freq_vicio THEN 	substr(obter_valor_dominio(1336,a.ie_frequencia),1,240) ds_freq_vicio WHEN a.ie_nega_habito='' ds_doenca THEN 	0 nr_seq_doenca WHEN a.ie_nega_habito='' ds_doenca_sae THEN 	'' ie_status_doenca WHEN a.ie_nega_habito='' ds_status_doenca THEN 	null dt_cirurgia WHEN a.ie_nega_habito=0 cd_procedimento THEN 	0 ie_origem_proced WHEN a.ie_nega_habito='' ds_procedimento THEN 	'' ds_proced_desc WHEN a.ie_nega_habito=0 cd_medic_uso THEN 	'' ds_medic_uso WHEN a.ie_nega_habito='' ds_medicamento THEN 	null dt_inicio WHEN a.ie_nega_habito=a.ds_observacao THEN 	0 nr_seq_restricao WHEN a.ie_nega_habito='' ds_restricao THEN 	b.nr_sequencia nr_seq_nivel WHEN a.ie_nega_habito=b.ie_alerta THEN 	b.cd_nivel cd_nivel WHEN a.ie_nega_habito=b.ds_nivel ds_nivel THEN 	b.ds_cor ds_cor_nivel WHEN a.ie_nega_habito='N' ie_nao_sabe_fim THEN 	a.dt_liberacao WHEN a.ie_nega_habito='' ds_acessorio THEN 	'' ds_localizacao WHEN a.ie_nega_habito=a.nr_atendimento THEN 	'' ds_precaucao WHEN a.ie_nega_habito='' ds_cuidado THEN 	''ds_motivo WHEN a.ie_nega_habito='' ds_intervalo THEN 	'' ds_amostra_cultura WHEN a.ie_nega_habito='' ds_microorganismo THEN 	'' ds_cid_doenca WHEN a.ie_nega_habito='' ds_motivo_internacao THEN 	'' ds_tratamento WHEN a.ie_nega_habito='' ds_exame THEN 	'' ds_resultado WHEN a.ie_nega_habito='' cd_topografia THEN 	a.ie_nega_habito ie_nega WHEN a.ie_nega_habito='' ds_tipo_ocorrencia THEN 	a.dt_atualizacao_nrec dt_insercaoFROM a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE ((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days') and a.dt_fim)) and a.dt_inativacao is null and coalesce(a.ie_alerta,'S')	= 'S' 
union all
select	3 nr_seq_apresent THEN 	'D' ie_tipo_alerta  ELSE coalesce(obter_nome_tipo_alerta('D'),obter_texto_tasy(338415,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta, --'Doencas previas e atuais'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	CASE WHEN IE_NEGA_DOENCAS='S',obter_texto_tasy(338464,philips_param_pck.get_nr_seq_idioma),nvl(a.ds_doenca,substr(obter_desc_cid(CD_DOENCA),1,200))) ds_doenca,--'NEGA DOENCAS'	a.nr_seq_doenca THEN 	substr(obter_desc_pe_doenca(a.nr_seq_doenca),1,80) ds_doenca_sae WHEN IE_NEGA_DOENCAS=a.ie_status ie_status_doenca THEN 	substr(obter_valor_dominio(1332,a.ie_status),1,240) ds_status_doenca WHEN IE_NEGA_DOENCAS IS NULL dt_cirurgia THEN 	0 cd_procedimento WHEN IE_NEGA_DOENCAS=0 ie_origem_proced THEN 	'' ds_procedimento WHEN IE_NEGA_DOENCAS='' ds_proced_desc THEN 	0 cd_medic_uso WHEN IE_NEGA_DOENCAS='' ds_medic_uso THEN 	'' ds_medicamento WHEN IE_NEGA_DOENCAS IS NULL dt_inicio THEN 	a.ds_observacao WHEN IE_NEGA_DOENCAS=0 nr_seq_restricao THEN 	'' ds_restricao WHEN IE_NEGA_DOENCAS=b.nr_sequencia nr_seq_nivel THEN 	b.ie_alerta WHEN IE_NEGA_DOENCAS=b.cd_nivel cd_nivel THEN 	b.ds_nivel ds_nivel WHEN IE_NEGA_DOENCAS=b.ds_cor ds_cor_nivel THEN 	'N' ie_nao_sabe_fim WHEN IE_NEGA_DOENCAS=a.dt_liberacao THEN 	'' ds_acessorio WHEN IE_NEGA_DOENCAS='' ds_localizacao THEN 	a.nr_atendimento WHEN IE_NEGA_DOENCAS='' ds_precaucao THEN 	'' ds_cuidado WHEN IE_NEGA_DOENCAS=''ds_motivo THEN 	'' ds_intervalo WHEN IE_NEGA_DOENCAS='' ds_amostra_cultura THEN 	'' ds_microorganismo WHEN IE_NEGA_DOENCAS='' ds_cid_doenca THEN 	'' ds_motivo_internacao WHEN IE_NEGA_DOENCAS='' ds_tratamento THEN 	'' ds_exame WHEN IE_NEGA_DOENCAS='' ds_resultado THEN 	'' cd_topografia WHEN IE_NEGA_DOENCAS=a.IE_NEGA_DOENCAS ie_nega THEN 	'' ds_tipo_ocorrencia WHEN IE_NEGA_DOENCAS=a.dt_atualizacao_nrec dt_insercaoFROM a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE ((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days') and a.dt_fim)) and a.dt_inativacao is null and coalesce(ie_paciente,'S')	= 'S' and coalesce(a.ie_alerta,'S')	= 'S' 
union all
select	4 nr_seq_apresent WHEN IE_NEGA_DOENCAS='C' ie_tipo_alerta THEN 	coalesce(obter_nome_tipo_alerta('C'),obter_texto_tasy(338416,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Cirurgias'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	a.dt_cirurgia,	a.cd_procedimento,	a.ie_origem_proced,	substr(obter_descricao_procedimento(a.cd_procedimento,a.ie_origem_proced),1,240) ds_procedimento,	a.ds_procedimento_inf ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	null dt_inicio,	a.ds_observacao,	0 nr_seq_restricao,	'' ds_restricao,	b.nr_sequencia nr_seq_nivel,	b.ie_alerta,	b.cd_nivel cd_nivel,	b.ds_nivel ds_nivel,	b.ds_cor ds_cor_nivel,	'N' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	''ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	'' cd_topografia,	a.IE_NEGA_CIRURGIAS ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM historico_saude_cirurgia a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE ((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days'), a.dt_cirurgia) and a.dt_fim + 86399/86400)) and a.dt_inativacao is null and coalesce(IE_NEGA_CIRURGIAS,'N')	= 'N' and coalesce(a.ie_alerta,'S')	= 'S' 
union all
select	5 nr_seq_apresent,	'M' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('M'),obter_texto_tasy(338417,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Medicamentos em uso'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	null dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	a.cd_material cd_medic_uso,	substr(obter_desc_material(a.cd_material),1,100) ds_medic_uso,	CASE WHEN IE_NEGA_MEDICAMENTOS='S',obter_texto_tasy(338498,philips_param_pck.get_nr_seq_idioma),a.ds_medicamento) ds_medicamento,--'Paciente nega uso de medicamentos continuos'	a.dt_inicio THEN 	a.ds_observacao WHEN IE_NEGA_MEDICAMENTOS=0 nr_seq_restricao THEN 	'' ds_restricao WHEN IE_NEGA_MEDICAMENTOS=b.nr_sequencia nr_seq_nivel THEN 	b.ie_alerta WHEN IE_NEGA_MEDICAMENTOS=b.cd_nivel cd_nivel THEN 	b.ds_nivel ds_nivel WHEN IE_NEGA_MEDICAMENTOS=b.ds_cor ds_cor_nivel THEN 	a.ie_nao_sabe_fim WHEN IE_NEGA_MEDICAMENTOS=a.dt_liberacao THEN 	'' ds_acessorio WHEN IE_NEGA_MEDICAMENTOS='' ds_localizacao THEN 	a.nr_atendimento WHEN IE_NEGA_MEDICAMENTOS='' ds_precaucao THEN 	'' ds_cuidado WHEN IE_NEGA_MEDICAMENTOS=''ds_motivo THEN 	substr(coalesce(OBTER_DESC_INTERVALO(a.cd_intervalo),''),1,255) ds_intervalo WHEN IE_NEGA_MEDICAMENTOS='' ds_amostra_cultura THEN 	'' ds_microorganismo WHEN IE_NEGA_MEDICAMENTOS='' ds_cid_doenca THEN 	'' ds_motivo_internacao WHEN IE_NEGA_MEDICAMENTOS='' ds_tratamento THEN 	'' ds_exame WHEN IE_NEGA_MEDICAMENTOS='' ds_resultado THEN 	'' cd_topografia WHEN IE_NEGA_MEDICAMENTOS=a.IE_NEGA_MEDICAMENTOS ie_nega THEN 	'' ds_tipo_ocorrencia WHEN IE_NEGA_MEDICAMENTOS=a.dt_atualizacao_nrec dt_insercaoFROM a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE ((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days') and a.dt_fim)) and a.dt_inativacao is null --and	nvl(IE_NEGA_MEDICAMENTOS,'N')	= 'N'
  and coalesce(a.ie_alerta,'S')	= 'S' 
union all
select	6 nr_seq_apresent WHEN IE_NEGA_MEDICAMENTOS='R' ie_tipo_alerta THEN 	coalesce(obter_nome_tipo_alerta('R'),obter_texto_tasy(338413,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Restricoes'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	null dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	null dt_inicio,	a.ds_observacao,	a.nr_seq_restricao,	CASE WHEN coalesce(ie_nega_restricoes,'N')='S' THEN obter_texto_tasy(1121012,philips_param_pck.get_nr_seq_idioma)  ELSE c.ds_restricao END  ds_restricao,--Nega restricoes
	b.nr_sequencia nr_seq_nivel,	b.ie_alerta,	b.cd_nivel cd_nivel,	b.ds_nivel ds_nivel,	b.ds_cor ds_cor_nivel,	'N' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	''ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	'' cd_topografia,	coalesce(ie_nega_restricoes,'N') ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM paciente_rep_prescricao a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
LEFT OUTER JOIN rep_restricao c ON (a.nr_seq_restricao = c.nr_sequencia)
WHERE a.ie_alerta = 'S' AND a.ie_situacao = 'A' and ((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days') and a.dt_fim)) 
union all
select	7 nr_seq_apresent,	'O' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('O'),obter_texto_tasy(338426,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Acessorio/Ortese/Protese'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	null dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	null dt_inicio,	a.ds_observacao,	0 nr_seq_restricao,	'' ds_restricao,	b.nr_sequencia nr_seq_nivel,	b.ie_alerta,	b.cd_nivel cd_nivel,	b.ds_nivel ds_nivel,	b.ds_cor ds_cor_nivel,	'' ie_nao_sabe_fim,	a.dt_liberacao,	substr(obter_desc_acessorio_pac(nr_seq_acessorio),1,255) ds_acessorio,	substr(obter_desc_local_acessorio_pac(nr_seq_localizacao),1,255) ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	''ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	'' cd_topografia,	a.IE_NEGA_ACESSORIO ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM paciente_acessorio a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE ((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days') and a.dt_fim)) and a.dt_inativacao is null and a.ie_alerta = 'S' 
union all
select	8 nr_seq_apresent,	'I' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('I'),obter_texto_tasy(338435,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Isolamento / Precaucao'	a.nr_sequencia nr_seq_alerta,	c.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	null dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	null dt_inicio,	a.ds_observacao,  --a.ds_observacao,
 0 nr_seq_restricao,	'' ds_restricao,	0 nr_seq_nivel,  --b.nr_sequencia nr_seq_nivel,
 'T' ie_alerta,  --b.ie_alerta,
 0 cd_nivel,  --b.cd_nivel cd_nivel,
 '' ds_nivel,  --b.ds_nivel ds_nivel,
 coalesce(d.DS_COR_ALERTA,d.ds_cor) ds_cor_nivel,  --b.ds_cor ds_cor_nivel,
 '' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	a.nr_atendimento,	d.ds_precaucao,	d.ds_cuidado,	e.ds_motivo,	'' ds_intervalo,	substr(obter_amostra_precaucao(a.nr_sequencia),1,255) ds_amostra_cultura,	substr(obter_microorganismo_precaucao(a.nr_Sequencia),1,255) ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	substr(obter_cih_topografia(a.cd_topografia),1,255) cd_topografia,	'N' ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaofrom 	--nivel_seguranca_alerta b,
 atendimento_precaucao a,	atendimento_paciente c,	cih_precaucao d,	motivo_isolamento e
WHERE	c.nr_atendimento = a.nr_atendimento and d.nr_sequencia = a.nr_seq_precaucao  and a.dt_inativacao is null and ((a.dt_termino is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,a.dt_termino) and a.dt_termino)) and (select obter_alerta_isolamento(c.cd_estabelecimento) ) = 'T' 
union all
select	8 nr_seq_apresent,	'I' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('I'),obter_texto_tasy(338460,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Isolamento / Precaucao'	a.nr_sequencia nr_seq_alerta,	c.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	null dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	null dt_inicio,	a.ds_observacao,  --a.ds_observacao,
 0 nr_seq_restricao,	'' ds_restricao,	0 nr_seq_nivel,  --b.nr_sequencia nr_seq_nivel,
 'T' ie_alerta,  --b.ie_alerta,
 0 cd_nivel,  --b.cd_nivel cd_nivel,
 '' ds_nivel,  --b.ds_nivel ds_nivel,
 coalesce(d.DS_COR_ALERTA,d.ds_cor) ds_cor_nivel,  --b.ds_cor ds_cor_nivel,
 '' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	a.nr_atendimento,	d.ds_precaucao,	d.ds_cuidado,	e.ds_motivo,	'' ds_intervalo,	substr(obter_amostra_precaucao(a.nr_sequencia),1,255) ds_amostra_cultura,	substr(obter_microorganismo_precaucao(a.nr_Sequencia),1,255) ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	substr(obter_cih_topografia(a.cd_topografia),1,255) cd_topografia,	'N' ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaofrom 	--nivel_seguranca_alerta b
 atendimento_precaucao a,	atendimento_paciente c,	cih_precaucao d,	motivo_isolamento e
WHERE	c.nr_atendimento = a.nr_atendimento and d.nr_sequencia = a.nr_seq_precaucao  and a.dt_inativacao is null and a.DT_FINAL_PRECAUCAO is null and a.dt_liberacao is not null --and	((a.dt_termino is null) or (sysdate between nvl(a.dt_inicio,a.dt_termino) and a.dt_termino))
  and (select obter_alerta_isolamento(c.cd_estabelecimento) ) = 'F' 
union all
select	8 nr_seq_apresent,	'I' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('I'),obter_texto_tasy(338460,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Isolamento / Precaucao'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	null dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	null dt_inicio,	a.ds_observacao,  --a.ds_observacao,
 0 nr_seq_restricao,	'' ds_restricao,	0 nr_seq_nivel,  --b.nr_sequencia nr_seq_nivel,
 'T' ie_alerta,  --b.ie_alerta,
 0 cd_nivel,  --b.cd_nivel cd_nivel,
 '' ds_nivel,  --b.ds_nivel ds_nivel,
 coalesce(d.DS_COR_ALERTA,d.ds_cor) ds_cor_nivel,  --b.ds_cor ds_cor_nivel,
 '' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	a.nr_atendimento,	d.ds_precaucao,	d.ds_cuidado,	e.ds_motivo,	'' ds_intervalo,	substr(obter_amostra_precaucao(a.nr_sequencia),1,255) ds_amostra_cultura,	substr(obter_microorganismo_precaucao(a.nr_Sequencia),1,255) ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	substr(obter_cih_topografia(a.cd_topografia),1,255) cd_topografia,	'N' ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaofrom 	--nivel_seguranca_alerta b
 atendimento_precaucao a,	cih_precaucao d,	motivo_isolamento e
WHERE	d.nr_sequencia = a.nr_seq_precaucao  and a.dt_inativacao is null and a.DT_FINAL_PRECAUCAO is null and a.dt_liberacao is not null and a.nr_atendimento is null and a.cd_pessoa_fisica is not null and ((a.dt_termino is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,a.dt_termino) and a.dt_termino)) and (select obter_alerta_isolamento(obter_estabelecimento_ativo) ) = 'T' and (select pkg_i18n.get_user_locale() ) = 'en_AU' 
union all
select	9 nr_seq_apresent,	'E' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('E'),obter_texto_tasy(338461,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Internacoes'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	null dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	null dt_inicio,	a.ds_observacao,	0 nr_seq_restricao,	'' ds_restricao,	b.nr_sequencia nr_seq_nivel,	b.ie_alerta,	b.cd_nivel cd_nivel,	b.ds_nivel ds_nivel,	b.ds_cor ds_cor_nivel,	'' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	''ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	substr(Obter_Desc_CID_Doenca(a.cd_doenca),1,255) ds_cid_doenca,	substr(DS_MOTIVO_INTERNACAO,1,255) ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	'' cd_topografia,	'N' ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM historico_saude_internacao a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE a.dt_inativacao is null and a.ie_alerta = 'S' and coalesce(a.IE_NEGA_INTERNACAO,'N')	= 'N' 
union all
SELECT	10 nr_seq_apresent,	'TA' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('TA'),obter_texto_tasy(338462,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Tratamentos anteriores'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	NULL dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	NULL dt_inicio,	a.ds_observacao,	0 nr_seq_restricao,	'' ds_restricao,	b.nr_sequencia nr_seq_nivel,	b.ie_alerta,	b.cd_nivel cd_nivel,	b.ds_nivel ds_nivel,	b.ds_cor ds_cor_nivel,	'' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	''ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	ds_tratamento ds_tratamento,	'' ds_exame,	'' ds_resultado,	'' cd_topografia,	'N' ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM tipo_tratamento_saude c, historico_saude_tratamento a
LEFT OUTER JOIN nivel_seguranca_alerta b ON (a.nr_seq_nivel_seg = b.nr_sequencia)
WHERE a.NR_SEQ_TIPO_TRATAMENTO = C.nr_sequencia AND a.dt_inativacao IS NULL AND a.ie_alerta = 'S' 
union all
SELECT	11 nr_seq_apresent,	'PE' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('PE'),obter_texto_tasy(338463,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Paciente exame'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	NULL dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	NULL dt_inicio,	a.ds_observacao,	0 nr_seq_restricao,	'' ds_restricao,	0 nr_seq_nivel,	'' ie_alerta,	0 cd_nivel,	'' ds_nivel,	'' ds_cor_nivel,	'' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	'' ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	substr(obter_valor_dominio(3966, ie_exame_pac),1,255) ds_exame,	ds_resultado ds_resultado,	'' cd_topografia,	'N' ie_nega,	'' ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM	paciente_exame aWHERE	a.dt_inativacao IS NULLAND	coalesce(a.ie_alerta,'N') = 'S'
union all
SELECT	12 nr_seq_apresent,	'OC' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('OC'),obter_texto_tasy(355666,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Ocorrencia'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	NULL dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	NULL dt_inicio,	a.ds_observacao,	0 nr_seq_restricao,	'' ds_restricao,	0 nr_seq_nivel,	'' ie_alerta,	0 cd_nivel,	'' ds_nivel,	'' ds_cor_nivel,	'' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	'' ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,	'' ds_exame,	'' ds_resultado,	'' cd_topografia,	'N' ie_nega,	substr(obter_desc_tipo_pac_ocorrencia(nr_seq_tipo_ocorrencia),1,100) ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM	paciente_ocorrencia aWHERE	a.dt_inativacao IS NULLand	((a.dt_fim is null) or (LOCALTIMESTAMP between coalesce(a.dt_inicio,LOCALTIMESTAMP - interval '1 days') and a.dt_fim))AND	coalesce(a.ie_alerta,'N') = 'S'
union all
SELECT	13 nr_seq_apresent,	'DA' ie_tipo_alerta,	coalesce(obter_nome_tipo_alerta('DA'),obter_texto_tasy(357203,philips_param_pck.get_nr_seq_idioma)) ds_tipo_alerta,--'Deficiencia do paciente'	a.nr_sequencia nr_seq_alerta,	a.cd_pessoa_fisica cd_pessoa_alerta,	0 nr_seq_alergeno,	'' ds_alergeno,	0 nr_seq_dcb,	'' ds_dcb,	0 nr_seq_ficha_tecnica,	'' ds_ficha_tecnica,	'' ds_ficha_tecnica_derivados,	0 cd_material,	'' ds_material,	'0' nr_seq_dcb_mat,	'' ds_dcb_mat,	0 cd_classe_mat,	'' ds_classe_mat,	0 nr_seq_familia,	'' ds_familia,	0 nr_seq_reacao,	'' ds_tipo_reacao,	'' ds_medic_nao_cad,	'' ie_confirmacao,	'' ds_confirmacao,	0 nr_seq_tipo_vicio,	'' ds_tipo_vicio,	'' ie_freq_vicio,	'' ds_freq_vicio,	'' ds_doenca,	0 nr_seq_doenca,	'' ds_doenca_sae,	'' ie_status_doenca,	'' ds_status_doenca,	NULL dt_cirurgia,	0 cd_procedimento,	0 ie_origem_proced,	'' ds_procedimento,	'' ds_proced_desc,	0 cd_medic_uso,	'' ds_medic_uso,	'' ds_medicamento,	NULL dt_inicio,	a.ds_observacao,	0 nr_seq_restricao,	'' ds_restricao,	0 nr_seq_nivel,  a.ie_alerta,	0 cd_nivel,	'' ds_nivel,	'' ds_cor_nivel,	'' ie_nao_sabe_fim,	a.dt_liberacao,	'' ds_acessorio,	'' ds_localizacao,	0 nr_atendimento,	'' ds_precaucao,	'' ds_cuidado,	'' ds_motivo,	'' ds_intervalo,	'' ds_amostra_cultura,	'' ds_microorganismo,	'' ds_cid_doenca,	'' ds_motivo_internacao,	'' ds_tratamento,  '' ds_exame,	'' ds_resultado,	'' cd_topografia,	a.IE_NEGA_DEFICIENCIA,	CASE WHEN a.IE_NEGA_DEFICIENCIA='N' THEN substr(RP_OBTER_DESC_DEFICIENCIA(NR_SEQ_TIPO_DEF),1,100)  ELSE obter_texto_tasy(820209,philips_param_pck.get_nr_seq_idioma) END  ds_tipo_ocorrencia,	a.dt_atualizacao_nrec dt_insercaoFROM	PF_TIPO_DEFICIENCIA aWHERE	a.dt_inativacao IS NULLAND	coalesce(a.ie_alerta,'N') = 'S'
union all
	SELECT	14 nr_seq_apresent,		'CA' ie_tipo_alerta,		obter_texto_tasy(1120675,philips_param_pck.get_nr_seq_idioma) ds_tipo_alerta,--'calculation'
		a.nr_sequencia nr_seq_alerta,		a.cd_pessoa_fisica cd_pessoa_alerta,		0 nr_seq_alergeno,		'' ds_alergeno,		0 nr_seq_dcb,		'' ds_dcb,		0 nr_seq_ficha_tecnica,		'' ds_ficha_tecnica,		'' ds_ficha_tecnica_derivados,		0 cd_material,		'' ds_material,		'0' nr_seq_dcb_mat,		'' ds_dcb_mat,		0 cd_classe_mat,		'' ds_classe_mat,		0 nr_seq_familia,		'' ds_familia,		0 nr_seq_reacao,		'' ds_tipo_reacao,		'' ds_medic_nao_cad,		'' ie_confirmacao,		'' ds_confirmacao,		0 nr_seq_tipo_vicio,		'' ds_tipo_vicio,		'' ie_freq_vicio,		'' ds_freq_vicio,		'' ds_doenca,		0 nr_seq_doenca,		'' ds_doenca_sae,		'' ie_status_doenca,		'' ds_status_doenca,		NULL dt_cirurgia,		0 cd_procedimento,		0 ie_origem_proced,		'' ds_procedimento,		'' ds_proced_desc,		0 cd_medic_uso,		'' ds_medic_uso,		'' ds_medicamento,		NULL dt_inicio,		'' ds_observacao,		0 nr_seq_restricao,		'' ds_restricao,		0 nr_seq_nivel,		'' ie_alerta,		0 cd_nivel,		CASE WHEN a.ie_advisory_severity=1 THEN  obter_texto_tasy(1120683,philips_param_pck.get_nr_seq_idioma) WHEN a.ie_advisory_severity=/*baixa*/
										2 THEN  obter_texto_tasy(1120705,philips_param_pck.get_nr_seq_idioma) WHEN a.ie_advisory_severity=/*media*/
										3 THEN  obter_texto_tasy(1120706,philips_param_pck.get_nr_seq_idioma)/*alta*/
 END ds_nivel,		CASE WHEN a.ie_advisory_severity=1 THEN  '#008000' WHEN a.ie_advisory_severity=/*verde*/
										2 THEN  '#FFFF00' WHEN a.ie_advisory_severity=/*amarelo*/
										3 THEN  '#FF0000'/*vermelho*/
 END  ds_cor_nivel,		'' ie_nao_sabe_fim,		a.dt_atualizacao_nrec dt_liberacao,		'' ds_acessorio,		'' ds_localizacao,		0  nr_atendimento,		'' ds_precaucao,		'' ds_cuidado,		'' ds_motivo,		'' ds_intervalo,		'' ds_amostra_cultura,		'' ds_microorganismo,		'' ds_cid_doenca,		'' ds_motivo_internacao,		'' ds_tratamento,		a.ds_titulo ds_exame,		a.ds_alerta ds_resultado,		'' cd_topografia,		'' ie_nega,		'' ds_tipo_ocorrencia,		null dt_insercao	FROM	CALCULOS_ADVISORY a	WHERE	a.ie_situacao = 'A' 	AND		a.ie_exibe_alerta = 'S'
union all
	SELECT	15 nr_seq_apresent,		'AA' ie_tipo_alerta /*alertas de anestesia*/
,		obter_texto_tasy(1126204,philips_param_pck.get_nr_seq_idioma) ds_tipo_alerta,--'anesthesia warnings'
		a.nr_sequencia nr_seq_alerta,		a.cd_pessoa_fisica cd_pessoa_alerta,		0 nr_seq_alergeno,		'' ds_alergeno,		0 nr_seq_dcb,		'' ds_dcb,		0 nr_seq_ficha_tecnica,		'' ds_ficha_tecnica,		'' ds_ficha_tecnica_derivados,		0 cd_material,		'' ds_material,		'0' nr_seq_dcb_mat,		'' ds_dcb_mat,		0 cd_classe_mat,		'' ds_classe_mat,		0 nr_seq_familia,		'' ds_familia,		0 nr_seq_reacao,		'' ds_tipo_reacao,		'' ds_medic_nao_cad,		'' ie_confirmacao,		'' ds_confirmacao,		0 nr_seq_tipo_vicio,		'' ds_tipo_vicio,		'' ie_freq_vicio,		'' ds_freq_vicio,		'' ds_doenca,		0 nr_seq_doenca,		'' ds_doenca_sae,		'' ie_status_doenca,		'' ds_status_doenca,		NULL dt_cirurgia,		0 cd_procedimento,		0 ie_origem_proced,		'' ds_procedimento,		'' ds_proced_desc,		0 cd_medic_uso,		'' ds_medic_uso,		'' ds_medicamento,		NULL dt_inicio,		'' ds_observacao,		0 nr_seq_restricao,		'' ds_restricao,		0 nr_seq_nivel,		'' ie_alerta,		0 cd_nivel,		'' ds_nivel,		'' ds_cor_nivel,		'' ie_nao_sabe_fim,		a.dt_liberacao,		'' ds_acessorio,		'' ds_localizacao,		0  nr_atendimento,		'' ds_precaucao,		'' ds_cuidado,		'' ds_motivo,		'' ds_intervalo,		'' ds_amostra_cultura,		'' ds_microorganismo,		'' ds_cid_doenca,		'' ds_motivo_internacao,		'' ds_tratamento,		CASE WHEN ie_tipo_alerta=0 THEN (select substr(max(b.ds_alerta),1,100) 		from alerta_anestesia b where b.nr_sequencia = a.nr_seq_alerta)  ELSE (select substr(max(c.ds_diagnostico),1,100) from apa_diagnostico c 	where c.nr_sequencia = a.nr_seq_diag) END  ds_exame,		'' ds_resultado,		'' cd_topografia,		'' ie_nega,		'' ds_tipo_ocorrencia,		a.dt_atualizacao_nrec dt_insercao	FROM	ALERTA_ANESTESIA_APAE a 	WHERE	coalesce(a.ie_situacao, 'A') = 'A'	and	((a.dt_fim_alerta is null) or (LOCALTIMESTAMP between coalesce(a.dt_alerta,LOCALTIMESTAMP - interval '1 days') and a.dt_fim_alerta))	and	a.dt_inativacao is null END END END  END  END;

