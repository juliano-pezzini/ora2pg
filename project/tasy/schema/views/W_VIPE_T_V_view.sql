-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW w_vipe_t_v (nr_seq_ordem, nr_seq_apres_grupo, nr_seq_apres_inf, nr_sequencia, nm_usuario, ie_tipo_item, cd_item, ds_prescrito, ds_prescricao, cd_intervalo, ds_interv_prescr, qt_item, cd_unid_med_qtde, ie_via_aplicacao, ie_medic_controlado, ie_acm_sn, ds_diluicao, ds_inf_dil, nr_agrupamento, nr_dia_util, ie_pendente_liberacao, ie_status_item, dt_prev_term, ie_diferenciado, nr_prescricao, nr_seq_item, nr_seq_proc_interno, nr_prescricoes, ie_tipo_registro, nr_seq_registro, qt_total_dias_lib, nr_seq_prot_glic, ie_composto, ds_dose_diferenciada, ds_recomendacao, ie_copiar, ie_pintar, ie_possui_horarios, ie_observacao, ie_ciencia, ie_administrar, hora1, hora2, hora3, hora4, hora5, hora6, hora7, hora8, hora9, hora10, hora11, hora12, hora13, hora14, hora15, hora16, hora17, hora18, hora19, hora20, hora21, hora22, hora23, hora24, hora25, hora26, hora27, hora28, hora29, hora30, hora31, hora32, hora33, hora34, hora35, hora36, hora37, hora38, hora39, hora40, ie_hemodialise, ie_forma, ie_permite_acao, ie_modificada) AS select	obter_ordem_informacoes_gestao(ie_tipo_item, 'R', ie_classif_adep) nr_seq_ordem,
	nr_seq_apres_grupo,
	nr_seq_apres_inf,
	nr_sequencia,
	nm_usuario,
	ie_tipo_item,
	cd_item,
	obter_espacamento_gestao_adep || ds_item ds_prescrito,
	ds_prescricao,
	cd_intervalo,
	ds_interv_prescr,
	qt_item,
	cd_unid_med_qtde,
	ie_via_aplicacao,
	ie_medic_controlado,
	ie_acm_sn,
	ds_diluicao,
	substr(ds_diluicao,1,240) ds_inf_dil,
	nr_agrupamento,
	nr_dia_util,
	ie_pendente_liberacao,
	ie_status_item,
	dt_prev_term,
	ie_diferenciado,
	nr_prescricao,
	nr_seq_item,
	nr_seq_proc_interno,
	nr_prescricoes,
	'R' ie_tipo_registro,
	ie_tipo_item || somente_numero(cd_item) || somente_numero(ds_prescricao) || somente_numero(nr_prescricoes) nr_seq_registro,
	qt_total_dias_lib,
	nr_seq_prot_glic,
	ie_composto,
	ds_dose_diferenciada,
	ds_recomendacao,
	ie_copiar,
	ie_pintar,
	ie_possui_horarios,
	ie_observacao,
	IE_CIENCIA,
	ie_administrar,
	hora1,
	hora2,
	hora3,
	hora4,
	hora5,
	hora6,
	hora7,
	hora8,
	hora9,
	hora10,
	hora11,
	hora12,
	hora13,
	hora14,
	hora15,
	hora16,
	hora17,
	hora18,
	hora19,
	hora20,
	hora21,
	hora22,
	hora23,
	hora24,
	hora25,
	hora26,
	hora27,
	hora28,
	hora29,
	hora30,
	hora31,
	hora32,
	hora33,
	hora34,
	hora35,
	hora36,
	hora37,
	hora38,
	hora39,
	hora40,
	ie_hemodialise,
	ie_forma,
	ie_permite_acao,
	ie_modificada
FROM	w_vipe_t
where	ie_tipo_item <> 'H'

union all

--Titulos
select	obter_ordem_informacoes_gestao(ie_tipo_item, 'T', ie_classif_adep) nr_seq_ordem,
	null nr_seq_apres_grupo,
	null nr_seq_apres_inf,
	null nr_sequencia,
	null nm_usuario,
	ie_tipo_item,
	null cd_item,
	obter_titulos_gestao_adep(ie_tipo_item, ie_classif_adep) ds_prescrito,
	null ds_prescricao,
	null cd_intervalo,
	null ds_interv_prescr,
	null qt_item,
	null cd_unid_med_qtde,
	null ie_via_aplicacao,
	null ie_medic_controlado,
	null ie_acm_sn,
	null ds_diluicao,
	null ds_inf_dil,
	null nr_agrupamento,
	null nr_dia_util,
	null ie_pendente_liberacao,
	null ie_status_item,
	null dt_prev_term,
	null ie_diferenciado,
	null nr_prescricao,
	null nr_seq_item,
	null nr_seq_proc_interno,
	null nr_prescricoes,
	'T' ie_tipo_registro,
	null nr_seq_registro,
	null qt_total_dias_lib,
	null nr_seq_prot_glic,
	null ie_composto,
	null ds_dose_diferenciada,
	null ds_recomendacao,
	null ie_copiar,
	null ie_pintar,
	null ie_possui_horarios,
	null ie_observacao,
	null IE_CIENCIA,
	null ie_administrar,
	null hora1,
	null hora2,
	null hora3,
	null hora4,
	null hora5,
	null hora6,
	null hora7,
	null hora8,
	null hora9,
	null hora10,
	null hora11,
	null hora12,
	null hora13,
	null hora14,
	null hora15,
	null hora16,
	null hora17,
	null hora18,
	null hora19,
	null hora20,
	null hora21,
	null hora22,
	null hora23,
	null hora24,
	null hora25,
	null hora26,
	null hora27,
	null hora28,
	null hora29,
	null hora30,
	null hora31,
	null hora32,
	null hora33,
	null hora34,
	null hora35,
	null hora36,
	null hora37,
	null hora38,
	null hora39,
	null hora40,
	null ie_hemodialise,
	null ie_forma,
	null ie_permite_acao,
	null ie_modificada
from	w_vipe_t
where	ie_tipo_item <> 'H'
group by ie_tipo_item, ie_classif_adep;

