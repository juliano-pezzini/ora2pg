-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW tws_mensalidade_estipulante_v (nr_seq_contrato, dt_referencia, dt_vencimento, nr_seq_pagador, nr_titulo, nr_seq_mensalidade, nr_parcela, vl_mensalidade, vl_coparticipacao, dt_pagamento_previsto, vl_titulo, ie_situacao) AS select	d.nr_seq_contrato,
	a.dt_referencia,
	c.dt_vencimento,
	d.nr_sequencia nr_seq_pagador,
	c.nr_titulo,
	a.nr_sequencia nr_seq_mensalidade,
	a.nr_parcela,
	a.vl_mensalidade,
	a.vl_coparticipacao,
	c.dt_pagamento_previsto,
	c.vl_titulo,
	c.ie_situacao
FROM	pls_mensalidade a,
	pls_lote_mensalidade b,
	titulo_receber c,
	pls_contrato_pagador d
where	b.nr_sequencia = a.nr_seq_lote
and	a.nr_sequencia = c.nr_seq_mensalidade
and	d.nr_sequencia = a.nr_seq_pagador
and	a.dt_cancelamento is null
and	c.ie_situacao in ('1', '2', '4', '6')
and	((b.ie_visualizar_portal = 'S') or (b.ie_visualizar_portal is null));

