-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW adiantamento_pago_v (nr_adiantamento, cd_estabelecimento, dt_atualizacao, nm_usuario, dt_adiantamento, vl_adiantamento, vl_adto_estrang, vl_saldo, vl_saldo_estrang, cd_moeda, vl_cotacao, cd_pessoa_fisica, cd_cgc, cd_banco, nr_lote_contabil, ds_observacao, dt_baixa, nr_seq_trans_fin, nr_seq_conta_banco, nr_titulo_original, nr_seq_distribuicao, nr_seq_nf, nr_seq_tipo, nr_adiant_original, dt_prev_devolucao, dt_liberacao, ds_razao_social, ds_moeda, nm_pessoa_juridica, nm_pessoa_fisica, ds_banco, ds_tipo_adiantamento, ds_lista_ordem_compra, cd_empresa) AS Select	a.NR_ADIANTAMENTO,
	a.CD_ESTABELECIMENTO, 
	a.DT_ATUALIZACAO, 
	a.NM_USUARIO, 
	a.DT_ADIANTAMENTO, 
	a.VL_ADIANTAMENTO, 
	a.vl_adto_estrang, 
	a.VL_SALDO, 
	a.vl_saldo_estrang, 
	a.CD_MOEDA, 
	a.vl_cotacao, 
	a.CD_PESSOA_FISICA, 
	a.CD_CGC, 
	a.CD_BANCO, 
	a.NR_LOTE_CONTABIL, 
	a.DS_OBSERVACAO, 
	a.DT_BAIXA, 
	a.NR_SEQ_TRANS_FIN, 
	a.NR_SEQ_CONTA_BANCO, 
	a.NR_TITULO_ORIGINAL, 
	a.NR_SEQ_DISTRIBUICAO, 
	a.NR_SEQ_NF, 
	a.NR_SEQ_TIPO, 
	a.NR_ADIANT_ORIGINAL, 
	a.DT_PREV_DEVOLUCAO, 
	a.dt_liberacao, 
    	c.ds_razao_social, 
	d.ds_moeda, 
    f.ds_razao_social nm_pessoa_juridica, 
		substr(obter_nome_pf(g.cd_pessoa_fisica),1,255) nm_pessoa_fisica, 
    h.ds_banco, 
	e.ds_tipo_adiantamento, 
	substr(obter_ordem_compra_adto_pago(a.nr_adiantamento),1,255) ds_lista_ordem_compra, 
	obter_empresa_estab(a.CD_ESTABELECIMENTO) cd_empresa 
FROM moeda d, pessoa_juridica c, estabelecimento b, adiantamento_pago a
LEFT OUTER JOIN tipo_adiant_pago e ON (a.nr_seq_tipo = e.nr_sequencia)
LEFT OUTER JOIN pessoa_juridica f ON (a.cd_cgc = f.cd_cgc)
LEFT OUTER JOIN pessoa_fisica g ON (a.cd_pessoa_fisica = g.cd_pessoa_fisica)
LEFT OUTER JOIN banco h ON (a.cd_banco = h.cd_banco)
WHERE a.cd_estabelecimento	= b.cd_estabelecimento and b.cd_cgc		= c.cd_cgc and a.cd_moeda		= d.cd_moeda;

