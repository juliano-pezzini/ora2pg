-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW cpoe_procedimento_ava_v (nr_sequencia, dt_solicitacao, nm_usuario, nr_atendimento, cd_paciente, nm_paciente, dt_inicio_prev, dt_fim_prev, cd_proc_int, ds_procedimento, cd_procedimento, cd_setor, ds_setor, cd_medico, nm_medico) AS SELECT A.NR_SEQUENCIA NR_SEQUENCIA,
A.DT_LIBERACAO DT_SOLICITACAO,
A.NM_USUARIO NM_USUARIO,
A.NR_ATENDIMENTO NR_ATENDIMENTO,
A.CD_PESSOA_FISICA CD_PACIENTE,
B.NM_PESSOA_FISICA NM_PACIENTE,
A.DT_INICIO DT_INICIO_PREV,
A.DT_FIM DT_FIM_PREV,
A.NR_SEQ_PROC_INTERNO CD_PROC_INT,
D.DS_PROC_EXAME DS_PROCEDIMENTO,
f.cd_procedimento CD_PROCEDIMENTO,
A.cd_setor_atendimento CD_SETOR,
E.ds_setor_atendimento DS_SETOR,
A.CD_MEDICO CD_MEDICO,
c.nm_guerra NM_MEDICO
FROM cpoe_procedimento A,
PESSOA_FISICA B,
medico c,
PROC_INTERNO D,
setor_atendimento E,
procedimento f
WHERE A.IE_AVAL_ANESTESIA = 'S'
and A.CD_PESSOA_FISICA = B.cd_pessoa_fisica
AND D.nr_sequencia = A.NR_SEQ_PROC_INTERNO
and A.cd_setor_atendimento = E.cd_setor_atendimento
and c.cd_pessoa_fisica = A.cd_medico
and D.cd_procedimento = f.cd_procedimento
and D.ie_origem_proced = f.ie_origem_proced
and A.DT_LIBERACAO is not null
order by A.NR_SEQUENCIA, A.DT_LIBERACAO;

