-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW unidade_atend_livre_v (ds_setor_atendimento, nm_unidade, cd_unidade_basica, cd_unidade_compl, cd_setor_atendimento, cd_tipo_acomodacao, ie_temporario, ie_situacao, dt_atualizacao, nm_usuario, ie_status_unidade, nr_atendimento, dt_entrada_unidade, cd_paciente_reserva, nm_usuario_reserva, ie_classe_acomodacao, ie_sexo_paciente, ie_sexo_fixo, ie_higienizacao, dt_higienizacao, nm_usuario_higienizacao, dt_inicio_higienizacao, nr_seq_interno, ds_observacao, cd_motivo_interdicao, nr_atendimento_acomp, nr_ramal, dt_criacao, qt_max_visitante, qt_max_acomp, qt_idade_minima, qt_idade_maxima, ds_ocupacao, nr_seq_superior, nr_agrupamento, qt_peso_maximo, qt_altura_maxima, cd_convenio_reserva, ie_status_ant_unidade, qt_tempo_prev_higien, nr_seq_motivo_reserva, nr_seq_computador, nm_usuario_fim_higienizacao, ie_tipo_limpeza, nr_seq_computador_leito, nr_seq_apresent, qt_pac_unidade, ds_unidade_atend, ie_leito_monitorado, ie_permite_alt_eup, ie_inativar_leito_temp, ie_radioterapia, ie_interditado_radiacao, ie_exibir_cc, nr_seq_local_pa, qt_idade_dias_min, qt_idade_dias_max, ie_tipo_reserva, ie_mostra_gestao_disp, ie_inativa_setor_auto, ie_necessita_isol_reserva, nr_seq_unidade_rn, qt_max_diario, qt_max_simultaneo, cd_motivo_manutencao, nm_setor_integracao, nr_atendimento_ant, ds_agrupamento, nr_seq_classif, qt_dias_prev_interd, nr_seq_mot_isol, dt_interdicao, ie_observacao_pa, nr_internacao_aghos, dt_aguard_higienizacao, ie_controle_faixa_etaria, nr_externo, nr_seq_unid_bloq, ie_bloq_unid_ant, nr_seq_grupo_equip_ca, ie_leito_adaptado, nm_pac_reserva, ie_leito_retaguarda, ie_retaguarda_atual, nm_leito_integracao, ie_ignorar_checklist, ie_bloqueio_transf, nr_seq_classif_pac_leito, dt_atualizacao_nrec, nm_usuario_nrec, nr_seq_modelo, nr_seq_location, ie_gerint, nr_seq_room_number, ie_monitorizacao_externa, ie_family_room, dt_start_reservation, dt_end_reservation, nr_seq_genero, ie_leito_prox_posto_enf, cd_unidade, cd_unidade_classif, ds_tipo_acomodacao, ds_cor, cd_classif_setor, ie_leito_adapt) AS SELECT D.DS_SETOR_ATENDIMENTO,
      (D.NM_UNIDADE_BASICA || '/'||D.NM_UNIDADE_COMPL) nm_unidade,
       	A.CD_UNIDADE_BASICA,
		A.CD_UNIDADE_COMPL,
		A.CD_SETOR_ATENDIMENTO,
		A.CD_TIPO_ACOMODACAO,
		A.IE_TEMPORARIO,
		A.IE_SITUACAO,
		A.DT_ATUALIZACAO,
		A.NM_USUARIO,
		A.IE_STATUS_UNIDADE,
		A.NR_ATENDIMENTO,
		A.DT_ENTRADA_UNIDADE,
		A.CD_PACIENTE_RESERVA,
		A.NM_USUARIO_RESERVA,
		A.IE_CLASSE_ACOMODACAO,
		A.IE_SEXO_PACIENTE,
		A.IE_SEXO_FIXO,
		A.IE_HIGIENIZACAO,
		A.DT_HIGIENIZACAO,
		A.NM_USUARIO_HIGIENIZACAO,
		A.DT_INICIO_HIGIENIZACAO,
		A.NR_SEQ_INTERNO,
		A.DS_OBSERVACAO,
		A.CD_MOTIVO_INTERDICAO,
		A.NR_ATENDIMENTO_ACOMP,
		A.NR_RAMAL,
		A.DT_CRIACAO,
		A.QT_MAX_VISITANTE,
		A.QT_MAX_ACOMP,
		A.QT_IDADE_MINIMA,
		A.QT_IDADE_MAXIMA,
		A.DS_OCUPACAO,
		A.NR_SEQ_SUPERIOR,
		A.NR_AGRUPAMENTO,
		A.QT_PESO_MAXIMO,
		A.QT_ALTURA_MAXIMA,
		A.CD_CONVENIO_RESERVA,
		A.IE_STATUS_ANT_UNIDADE,
		A.QT_TEMPO_PREV_HIGIEN,
		A.NR_SEQ_MOTIVO_RESERVA,
		A.NR_SEQ_COMPUTADOR,
		A.NM_USUARIO_FIM_HIGIENIZACAO,
		A.IE_TIPO_LIMPEZA,
		A.NR_SEQ_COMPUTADOR_LEITO,
		A.NR_SEQ_APRESENT,
		A.QT_PAC_UNIDADE,
		A.DS_UNIDADE_ATEND,
		A.IE_LEITO_MONITORADO,
		A.IE_PERMITE_ALT_EUP,
		A.IE_INATIVAR_LEITO_TEMP,
		A.IE_RADIOTERAPIA,
		A.IE_INTERDITADO_RADIACAO,
		A.IE_EXIBIR_CC,
		A.NR_SEQ_LOCAL_PA,
		A.QT_IDADE_DIAS_MIN,
		A.QT_IDADE_DIAS_MAX,
		A.IE_TIPO_RESERVA,
		A.IE_MOSTRA_GESTAO_DISP,
		A.IE_INATIVA_SETOR_AUTO,
		A.IE_NECESSITA_ISOL_RESERVA,
		A.NR_SEQ_UNIDADE_RN,
		A.QT_MAX_DIARIO,
		A.QT_MAX_SIMULTANEO,
		A.CD_MOTIVO_MANUTENCAO,
		A.NM_SETOR_INTEGRACAO,
		A.NR_ATENDIMENTO_ANT,
		A.DS_AGRUPAMENTO,
		A.NR_SEQ_CLASSIF,
		A.QT_DIAS_PREV_INTERD,
		A.NR_SEQ_MOT_ISOL,
		A.DT_INTERDICAO,
		A.IE_OBSERVACAO_PA,
		A.NR_INTERNACAO_AGHOS,
		A.DT_AGUARD_HIGIENIZACAO,
		A.IE_CONTROLE_FAIXA_ETARIA,
		A.NR_EXTERNO,
		A.NR_SEQ_UNID_BLOQ,
		A.IE_BLOQ_UNID_ANT,
		A.NR_SEQ_GRUPO_EQUIP_CA,
		A.IE_LEITO_ADAPTADO,
		A.NM_PAC_RESERVA,
		A.IE_LEITO_RETAGUARDA,
		A.IE_RETAGUARDA_ATUAL,
		A.NM_LEITO_INTEGRACAO,
		A.IE_IGNORAR_CHECKLIST,
		A.IE_BLOQUEIO_TRANSF,
		A.NR_SEQ_CLASSIF_PAC_LEITO,
		A.DT_ATUALIZACAO_NREC,
		A.NM_USUARIO_NREC,
		A.NR_SEQ_MODELO,
		A.NR_SEQ_LOCATION,
		A.IE_GERINT,
		A.NR_SEQ_ROOM_NUMBER,
		A.IE_MONITORIZACAO_EXTERNA,
		A.IE_FAMILY_ROOM,
		A.DT_START_RESERVATION,
		A.DT_END_RESERVATION,
		A.NR_SEQ_GENERO,
		A.IE_LEITO_PROX_POSTO_ENF,
      (A.CD_UNIDADE_BASICA || ' ' || A.CD_UNIDADE_COMPL) cd_unidade,
      (A.CD_UNIDADE_BASICA || A.CD_UNIDADE_COMPL) cd_unidade_classif,
       B.DS_TIPO_ACOMODACAO,
	 B.DS_COR,
	 D.CD_CLASSIF_SETOR,
	 coalesce(A.IE_LEITO_ADAPTADO, 'N') IE_LEITO_ADAPT
FROM TIPO_ACOMODACAO B,
     SETOR_ATENDIMENTO D,
     UNIDADE_ATENDIMENTO A
WHERE A.CD_TIPO_ACOMODACAO    = B.CD_TIPO_ACOMODACAO
  AND A.CD_SETOR_ATENDIMENTO  = D.CD_SETOR_ATENDIMENTO
  AND A.IE_SITUACAO           = 'A'
  AND A.IE_STATUS_UNIDADE     IN ('L');

