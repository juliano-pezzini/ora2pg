-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW os_recebida_gerencia_sup_v (nr_sequencia, dt_ordem_servico, nr_seq_grupo_sup, nr_seq_localizacao, cd_funcao, nr_seq_gerencia_sup, ie_classificacao, nr_seq_grupo_des, nr_seq_gerencia) AS select	a.nr_sequencia,
	a.dt_ordem_servico,
	a.nr_seq_grupo_sup,
	a.nr_seq_localizacao,
	a.cd_funcao,
	b.nr_seq_gerencia_sup,
	a.ie_classificacao,
	a.nr_seq_grupo_des,
	c.nr_seq_gerencia
FROM man_ordem_servico a
LEFT OUTER JOIN grupo_suporte b ON (a.nr_seq_grupo_sup = b.nr_sequencia)
LEFT OUTER JOIN grupo_desenvolvimento c ON (a.nr_seq_grupo_des = c.nr_sequencia)
WHERE exists (	select	1
			from	man_estagio_processo c,
				man_ordem_serv_estagio d
			where	c.nr_sequencia = d.nr_seq_estagio
			and	d.nr_seq_ordem = a.nr_sequencia
			and	c.ie_suporte = 'S'
			and	c.nr_sequencia	<> 511
		);

