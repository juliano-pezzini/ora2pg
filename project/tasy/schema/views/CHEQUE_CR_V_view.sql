-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW cheque_cr_v (nr_seq_cheque, dt_atualizacao, nm_usuario, cd_banco, cd_agencia_bancaria, nr_conta, nr_cheque, vl_cheque, cd_moeda, dt_vencimento, nr_adiantamento, nr_titulo, cd_pessoa_fisica, cd_cgc, dt_deposito, dt_reapresentacao, dt_devolucao, nm_usuario_devolucao, cd_motivo_devolucao, ds_observacao, dt_devolucao_banco, dt_seg_devolucao, ie_origem_cheque, dt_registro, cd_portador, cd_tipo_portador, vl_terceiro, dt_contabil, cd_estabelecimento, nr_seq_lote, nr_seq_saldo_caixa, dt_venda_terc, dt_saque, nr_seq_caixa_rec, nr_seq_motivo_dev, ie_lib_caixa, nr_seq_motivo_seg_dev, nr_seq_trans_caixa, dt_vencimento_atual, dt_compensacao, dt_terc_devolucao, nr_seq_motivo_terc_dev, dt_seg_reapresentacao, ie_deposito_paciente, nr_seq_movto_dep, vl_saldo_negociado, nr_seq_camara, dt_prev_desbloqueio, dt_prev_seg_desbloqueio, dt_prev_terc_desbloqueio, ds_cmc7, ds_beneficiario, ds_autorizacao_tef, cd_retorno_tef, cd_tipo_taxa_juros, cd_tipo_taxa_multa, tx_juros_cobranca, tx_multa_cobranca, nr_seq_grupo_prod, nr_seq_produto, ds_banco, ds_cod_banco, ds_razao_social, nm_pessoa_fisica, ds_favorecido, vl_hospital, dt_cobranca, dt_custodia, dt_resgate_custodia, nr_cpf) AS Select	a.NR_SEQ_CHEQUE,
	a.DT_ATUALIZACAO, 
	a.NM_USUARIO, 
	a.CD_BANCO, 
	a.CD_AGENCIA_BANCARIA, 
	a.NR_CONTA, 
	a.NR_CHEQUE, 
	a.VL_CHEQUE, 
	a.CD_MOEDA, 
	a.DT_VENCIMENTO, 
	a.NR_ADIANTAMENTO, 
	a.NR_TITULO, 
	a.CD_PESSOA_FISICA, 
	a.CD_CGC, 
	a.DT_DEPOSITO, 
	a.DT_REAPRESENTACAO, 
	a.DT_DEVOLUCAO, 
	a.NM_USUARIO_DEVOLUCAO, 
	a.CD_MOTIVO_DEVOLUCAO, 
	a.DS_OBSERVACAO, 
	a.DT_DEVOLUCAO_BANCO, 
	a.DT_SEG_DEVOLUCAO, 
	a.IE_ORIGEM_CHEQUE, 
	a.DT_REGISTRO, 
	a.CD_PORTADOR, 
	a.CD_TIPO_PORTADOR, 
	a.VL_TERCEIRO, 
	a.DT_CONTABIL, 
	a.CD_ESTABELECIMENTO, 
	a.NR_SEQ_LOTE, 
	a.NR_SEQ_SALDO_CAIXA, 
	a.DT_VENDA_TERC, 
	a.DT_SAQUE, 
	a.NR_SEQ_CAIXA_REC, 
	a.NR_SEQ_MOTIVO_DEV, 
	a.IE_LIB_CAIXA, 
	a.NR_SEQ_MOTIVO_SEG_DEV, 
	a.NR_SEQ_TRANS_CAIXA, 
	a.DT_VENCIMENTO_ATUAL, 
	a.DT_COMPENSACAO, 
	a.DT_TERC_DEVOLUCAO, 
	a.NR_SEQ_MOTIVO_TERC_DEV, 
	a.DT_SEG_REAPRESENTACAO, 
	a.IE_DEPOSITO_PACIENTE, 
	a.NR_SEQ_MOVTO_DEP, 
	a.VL_SALDO_NEGOCIADO, 
	a.NR_SEQ_CAMARA, 
	a.DT_PREV_DESBLOQUEIO, 
	a.DT_PREV_SEG_DESBLOQUEIO, 
	a.DT_PREV_TERC_DESBLOQUEIO, 
	a.DS_CMC7, 
	a.DS_BENEFICIARIO, 
	a.DS_AUTORIZACAO_TEF, 
	a.CD_RETORNO_TEF, 
	a.CD_TIPO_TAXA_JUROS, 
	a.CD_TIPO_TAXA_MULTA, 
	a.TX_JUROS_COBRANCA, 
	a.TX_MULTA_COBRANCA, 
	a.NR_SEQ_GRUPO_PROD, 
	a.NR_SEQ_PRODUTO, 
	b.ds_banco, 
	b.cd_banco||' '||b.ds_banco ds_cod_banco, 
	d.ds_razao_social, 
	substr(obter_nome_pf(e.cd_pessoa_fisica),1,255) nm_pessoa_fisica, 
	coalesce(d.ds_razao_social, obter_nome_pf(e.cd_pessoa_fisica)) ds_favorecido, 
	a.vl_cheque - a.vl_terceiro vl_hospital, 
	to_date(OBTER_DADOS_COBRANCA(NR_SEQ_CHEQUE, '1')) dt_cobranca, 
	a.dt_custodia, 
	a.dt_resgate_custodia, 
	e.nr_cpf 
FROM banco b, cheque_cr a
LEFT OUTER JOIN pessoa_juridica d ON (a.cd_cgc = d.cd_cgc)
LEFT OUTER JOIN pessoa_fisica e ON (a.cd_pessoa_fisica = e.cd_pessoa_fisica)
WHERE a.cd_banco = b.cd_banco;

