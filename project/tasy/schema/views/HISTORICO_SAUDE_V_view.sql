-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW historico_saude_v (ie_tipo, cd_pessoa_fisica, ie_historico, nr_seq_apres, ie_posicao, ds_tipo, ie_intensidade, ds_intensidade, ds_elemento, ds_complemento, dt_registro, dt_registro_date, nr_atendimento, dt_liberacao, nm_usuario, dt_inativacao, nm_usuario_inativacao, ds_justificativa, dt_inicio, dt_fim, ds_observacao, nr_seq_grupo_diag, nr_sequencia, ie_tipo_diagnostico, nr_seq_apres_grupo, ie_classificacao_doenca, ie_lista_problema, ds_complemento_oft) AS SELECT	'R' ie_tipo,
	cd_pessoa_fisica,
	30 ie_historico,
	30 nr_seq_apres,
	HS_Obter_Evento_Encerrado(dt_fim) ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(492992),0,255) ds_tipo, --'Reacao adversa ou alergica'
	ie_intensidade,
	substr(obter_valor_dominio(1334,IE_INTENSIDADE),1,60) ds_intensidade,
	CASE WHEN ie_nega_alergias='S' THEN substr(obter_desc_expressao(294054), 1, 254)/*Nega alergias*/
  ELSE SUBSTR(obter_desc_alergeno(nr_seq_tipo),1,80) END  ds_elemento,
	SUBSTR(Obter_Hist_Saude_Alergia(nr_sequencia),1,4000) ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	ds_justificativa,
	dt_inicio,
	dt_fim,
	SUBSTR(ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	ie_lista_problema,
	SUBSTR(oft_obter_hist_saude_alergia(nr_sequencia),1,4000) ds_complemento_oft
FROM	paciente_alergia
WHERE	dt_inativacao IS NULL

UNION ALL

SELECT	'H' ie_tipo,
	cd_pessoa_fisica,
	10 ie_historico,
	10 nr_seq_apres,
	HS_Obter_Evento_Encerrado(dt_fim) ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(291200),0,255) ds_tipo, --'Habitos'
	ie_intensidade,
	substr(obter_valor_dominio(1334,IE_INTENSIDADE),1,60) ds_intensidade,
	CASE WHEN IE_NEGA_HABITO='S' THEN substr(obter_desc_expressao(294060), 1, 254)/*Nega habitos*/
  ELSE SUBSTR(obter_desc_tipo_vicio(nr_seq_tipo),1,80) END  ds_elemento,
	SUBSTR(Obter_Hist_Saude_Habito(nr_sequencia),1,4000) ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	ds_justificativa,
	dt_inicio,
	dt_fim,
	SUBSTR(ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	ie_lista_problema,
	null ds_complemento_oft
FROM	paciente_habito_vicio
WHERE	dt_inativacao IS NULL

UNION ALL

SELECT	'M' ie_tipo,
	cd_pessoa_fisica,
	5 ie_historico,
	5 nr_seq_apres,
	HS_Obter_Evento_Encerrado(dt_fim) ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(293088),0,255) ds_tipo, --'Medicamentos em uso'
	ie_intensidade,
	substr(obter_valor_dominio(1334,IE_INTENSIDADE),1,60) ds_intensidade,
	CASE WHEN IE_NEGA_MEDICAMENTOS='S' THEN substr(obter_desc_expressao(293921),1,255)/*Nao faz uso continuo de medicamentos*/
  ELSE coalesce(SUBSTR(obter_desc_material(cd_material),1,100),ds_medicamento) END  ds_elemento,
	SUBSTR(Obter_Hist_Saude_Medic(nr_sequencia),1,4000) ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	ds_justificativa,
	dt_inicio,
	dt_fim,
	SUBSTR(ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	paciente_medic_uso
WHERE	dt_inativacao IS NULL

UNION ALL

SELECT	'DP' ie_tipo,
	cd_pessoa_fisica,
	15 ie_historico,
	15 nr_seq_apres,
	HS_Obter_Evento_Encerrado(dt_fim) ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(314080),0,255) ds_tipo, --'Doencas previas e atuais'
	ie_intensidade,
	substr(obter_valor_dominio(1334,IE_INTENSIDADE),1,60) ds_intensidade,
	CASE WHEN IE_NEGA_DOENCAS='S' THEN substr(obter_desc_expressao(294059),1,255)/*Nega doencas*/
  ELSE coalesce(ds_doenca,coalesce(SUBSTR(obter_desc_pe_doenca(nr_seq_doenca),1,80),SUBSTR(obter_desc_cid(CD_DOENCA),1,200))) END  ds_elemento,
	SUBSTR(Obter_Hist_Saude_Ant_Clinico(nr_sequencia),1,4000) ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	ds_justificativa,
	dt_inicio,
	dt_fim,
	SUBSTR(ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	ie_lista_problema,
	null ds_complemento_oft
FROM	paciente_antec_clinico
WHERE	coalesce(ie_paciente,'S')	= 'S'
AND	dt_inativacao IS NULL

UNION ALL

SELECT	'T' ie_tipo,
	cd_pessoa_fisica,
	2 ie_historico,
	2 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(492993),0,255) ds_tipo, --'Tipo sanguineo e fator Rh'
	'L' ie_intensidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	ie_tipo_sangue||ie_fator_rh ds_elemento,
	substr(OBTER_DESC_EXPRESSAO(709780),0,255)/*Grupo*/
||': '||ie_tipo_sangue||CHR(13)||CHR(10)||substr(OBTER_DESC_EXPRESSAO(290015),0,255)/*Fator RH*/||': '||ie_fator_rh ds_complemento,
	NULL,null,
	(NULL)::numeric ,
	LOCALTIMESTAMP,
	nm_usuario,
	NULL,
	'',
	'',
	NULL,
	NULL,
	NULL,
	NULL nr_seq_grupo_diag,
	NULL nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	pessoa_fisica
WHERE	ie_tipo_sangue IS NOT NULL

UNION ALL

SELECT	'B' ie_tipo,
	a.cd_pessoa_fisica,
	1 ie_historico,
	1 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(492994),0,255) ds_tipo, --'Dados biometricos'
	'L' ie_intensidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	substr(obter_desc_expressao(728552),1,255)/*Peso, altura, IMC e SC (primeira e ultima verificacao)*/
 ds_elemento,
	SUBSTR(Obter_Hist_Saude_Dados_Biomet(b.nr_atendimento),1,4000) ds_complemento,
	NULL,null,
	b.nr_atendimento,
	LOCALTIMESTAMP,
	--a.nm_usuario,

	(select max(x.nm_usuario)
	from	atendimento_sinal_vital x
	where	x.nr_atendimento	= b.nr_atendimento
	and		x.dt_sinal_vital	= (	select	max(b.dt_sinal_vital)
					from	atendimento_sinal_vital b
					where	b.nr_atendimento	= x.nr_atendimento
					and	qt_peso is not null
					and	qt_altura_cm is not null
					and	qt_imc is not null
					and	qt_superf_corporia is not null)) nm_usuario,
	NULL,
	'',
	'',
	NULL,
	NULL,
	NULL,
	NULL nr_seq_grupo_diag,
	NULL nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	atendimento_paciente b,
	pessoa_fisica a
WHERE	a.cd_pessoa_fisica	= b.cd_pessoa_fisica
AND	b.nr_atendimento	= (	SELECT	MAX(x.nr_atendimento)
					FROM	atendimento_paciente x
					WHERE	x.cd_pessoa_fisica	= a.cd_pessoa_fisica
					AND	Obter_Hist_Saude_Dados_Biomet(x.nr_atendimento) IS NOT NULL)

UNION ALL

SELECT	'CE' ie_tipo,
	cd_pessoa_fisica,
	40 ie_historico,
	40 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(492995),1,255) ds_tipo, --'Cirurgias externas'
	ie_intensidade,
	substr(obter_valor_dominio(1334,IE_INTENSIDADE),1,60) ds_intensidade,
	CASE WHEN IE_NEGA_CIRURGIAS='S' THEN substr(OBTER_DESC_EXPRESSAO(294055),1,255)/*Nega cirurgia*/
  ELSE coalesce(ds_procedimento_inf,SUBSTR(obter_descricao_procedimento(cd_procedimento,ie_origem_proced),1,240)) END  ds_elemento,
	(substr(OBTER_DESC_EXPRESSAO(622368),1,255)/*Data cirurgia:*/
||' '|| TO_CHAR(dt_cirurgia,'dd/mm/yyy') || CHR(13) || CHR(10)	||
	substr(OBTER_DESC_EXPRESSAO(283468),1,255)/*Anestesia*/
||': '|| SUBSTR(obter_valor_dominio(36,ie_tipo_anestesia),1,100)    	|| CHR(13) || CHR(10) ||
	substr(OBTER_DESC_EXPRESSAO(325812),1,255)/*Local:*/
||' '|| ds_local 	|| CHR(13) || CHR(10) ||
	substr(OBTER_DESC_EXPRESSAO(285579),1,255)/*Complicacao*/
||': '		|| ds_complicacao || CHR(13) || CHR(10) ||
	substr(OBTER_DESC_EXPRESSAO(329252),1,255)/*Observacao:*/
||' '|| ds_observacao) ds_complemento,
	TO_CHAR(dt_atualizacao_nrec,'dd/mm/yyyy'),
	dt_atualizacao_nrec dt_registro_date,
	nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	ds_justificativa,
	dt_inicio,
	dt_fim,
	SUBSTR(ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	historico_saude_cirurgia
WHERE	dt_inativacao IS NULL

UNION ALL

SELECT	'C' ie_tipo,
	cd_pessoa_fisica,
	41 ie_historico,
	41 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(492996),0,255) ds_tipo, --'Cirurgias instituicao'
	'L' ie_intesidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	SUBSTR(obter_descricao_procedimento(cd_procedimento_princ,ie_origem_proced),1,240) ds_elemento,
	(substr(OBTER_DESC_EXPRESSAO(622368),1,255)/*Data cirurgia:*/
||' '|| dt_inicio_real 					|| CHR(13) || CHR(10) ||
	substr(OBTER_DESC_EXPRESSAO(328095),1,255)/*Cirurgiao:*/
||' '|| SUBSTR(obter_nome_medico(cd_medico_cirurgiao,'N'),1,60) 	|| CHR(13) || CHR(10) ||
	substr(OBTER_DESC_EXPRESSAO(283472),1,255)/*Anestesista*/
||': '|| SUBSTR(obter_nome_medico(cd_medico_anestesista,'N'),1,60) 	|| CHR(13) || CHR(10) ||
	substr(OBTER_DESC_EXPRESSAO(325937),1,255)/*Tipo anestesia:*/
||' '|| SUBSTR(obter_valor_dominio(36,cd_tipo_anestesia),1,100) 	|| CHR(13) || CHR(10) ||
	substr(obter_complicacoes_cirurgia(nr_cirurgia), 1, 1000)) ds_complemento,
	TO_CHAR(dt_inicio_prevista,'dd/mm/yyyy'),
	dt_inicio_prevista dt_registro_date,
	nr_atendimento,
	LOCALTIMESTAMP,
	nm_usuario,
	NULL,
	'',
	'',
	NULL,
	NULL,
	NULL,
	NULL nr_seq_grupo_diag,
	nr_cirurgia nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	cirurgia
WHERE	ie_status_cirurgia = '2'

UNION ALL

SELECT	'O' ie_tipo,
	cd_pessoa_fisica,
	42 ie_historico,
	42 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(294713),0,255) ds_tipo, --'Ocorrencias'
	ie_intensidade,
	substr(obter_valor_dominio(1334,IE_INTENSIDADE),1,60) ds_intensidade,
	SUBSTR(obter_desc_tipo_pac_ocorrencia(nr_seq_tipo_ocorrencia),1,100) ds_elemento,
	SUBSTR(ds_comentario,1,2000) ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	ds_justificativa,
	NULL,
	NULL,
	NULL ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	paciente_ocorrencia
WHERE	dt_inativacao IS NULL

UNION ALL

SELECT	'D' ie_tipo,
	b.cd_pessoa_fisica,
	50 ie_historico,
	50 nr_seq_apres,
	1 ie_posicao,
	coalesce(SUBSTR(obter_desc_grupo_diag(a.nr_seq_grupo_diag),1,60), substr(OBTER_DESC_EXPRESSAO(303710),0,255)) ds_tipo, --'Diagnosticos'
	'L' ie_intesidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	SUBSTR(Obter_desc_cid_interno(a.cd_doenca,a.nr_seq_diag_interno),1,60) ds_elemento,
	SUBSTR(Obter_compl_CID_PEP(DS_DIAGNOSTICO,IE_CLASSIFICACAO_DOENCA,IE_TIPO_DOENCA,IE_UNIDADE_TEMPO,QT_TEMPO,IE_LADO,DT_MANIFESTACAO),1,2000) ds_complemento,
	TO_CHAR(coalesce(a.dt_manifestacao,a.dt_diagnostico),'dd/mm/yyyy') dt_registro,
	coalesce(a.dt_manifestacao,a.dt_diagnostico) dt_registro_date,
	a.nr_atendimento,
	NULL dt_liberacao,
	a.nm_usuario,
	--to_date(obter_status_diag_opcao(b.cd_pessoa_fisica, a.cd_doenca, 'DT'), 'dd/mm/yyyy hh24:mi:ss'),

	NULL,
	'',
	'',
	dt_inicio,
	dt_fim,
	SUBSTR(DS_DIAGNOSTICO,1,255),
	a.nr_seq_grupo_diag,
	NULL nr_sequencia,
	ie_tipo_diagnostico,
	coalesce(obter_seq_grupo_diag(a.nr_seq_grupo_diag),999) nr_seq_apres_grupo,
	a.ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	atendimento_paciente b,
	diagnostico_doenca a
WHERE	a.nr_atendimento	= b.nr_atendimento
AND		A.DT_INATIVACAO IS NULL

UNION ALL

SELECT	'V' ie_tipo,
	coalesce(a.cd_pessoa_fisica, b.cd_pessoa_fisica),
	60 ie_historico,
	60 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(314074),0,255) ds_tipo, --'Vacinas'
	'L' ie_intensidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	SUBSTR(obter_desc_vacina(a.nr_seq_vacina),1,100) ds_elemento,
	NULL ds_complemento,
	TO_CHAR(a.dt_vacina,'dd/mm/yyyy') dt_registro,
	a.dt_vacina dt_registro_date,
	a.nr_atendimento,
	NULL dt_liberacao,
	a.nm_usuario,
	dt_inativacao dt_inativacao,
	'' nm_usuario_inativacao,
	'' ds_justificativa,
	NULL dt_inicio,
	NULL dt_fim,
	NULL ds_observacao,
	NULL nr_seq_grupo_diag,
	a.nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM paciente_vacina a
LEFT OUTER JOIN atendimento_paciente b ON (a.nr_atendimento = b.nr_atendimento)
UNION ALL

SELECT	'E' ie_tipo,
	cd_pessoa_fisica,
	61 ie_historico,
	61	nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(289728),0,255) ds_tipo, --'Exames'
	'L' ie_intensidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	SUBSTR(Obter_Valor_Dominio(3966,ie_exame_pac),1,50) ds_elemento,
	ds_resultado ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	NULL nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	'' ds_justificativa,
	NULL dt_inicio,
	NULL dt_fim,
	SUBSTR(ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM paciente_exame
WHERE dt_inativacao IS NULL

UNION ALL

SELECT	'TR' ie_tipo,
	cd_pessoa_fisica,
	62 ie_historico,
	62	nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(300409),0,255) ds_tipo, --'Transfusao'
	'L' ie_intensidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	SUBSTR(obter_desc_san_derivado(nr_seq_derivado),1,255) ds_elemento,
	SUBSTR(obter_hist_transfusao(nr_sequencia,1),1,255) ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	NULL nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	'' ds_justificativa,
	NULL dt_inicio,
	NULL dt_fim,
	SUBSTR(ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM paciente_transfusao
WHERE dt_inativacao IS NULL

UNION ALL

SELECT	'TH' ie_tipo,
	b.cd_pessoa_fisica,
	63 ie_historico,
	63 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(688895),0,255) ds_tipo, --'Transfusao hemoterapia'
	'L' ie_intensidade,
	substr(obter_valor_dominio(1334,'L'),1,60) ds_intensidade,
	SUBSTR(obter_desc_san_derivado(a.nr_seq_derivado),1,255) ds_elemento,
	SUBSTR(obter_hist_transfusao(a.nr_sequencia,2),1,255) ds_complemento,
	TO_CHAR(b.dt_transfusao,'dd/mm/yyyy') dt_registro,
	b.dt_transfusao dt_registro_date,
	b.nr_atendimento,
	LOCALTIMESTAMP dt_liberacao,
	b.nm_usuario,
	NULL dt_inativacao,
	'' nm_usuario_inativacao,
	'' ds_justificativa,
	NULL dt_inicio,
	NULL dt_fim,
	SUBSTR(a.ds_observacao,1,255) ds_observacao,
	NULL nr_seq_grupo_diag,
	a.nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM san_producao a,
	san_transfusao b
WHERE a.nr_seq_transfusao = b.nr_sequencia

UNION ALL

SELECT	'IF' ie_tipo,
	cd_pessoa_fisica,
	60 ie_historico,
	60 nr_seq_apres,
	1 ie_posicao,
	substr(OBTER_DESC_EXPRESSAO(291914),1,255) ds_tipo, --'Infections'
	null ie_intensidade,
	null ds_intensidade,
	(SELECT max(ds_tipo_infeccao)  FROM   tipo_infeccao where nr_sequencia = a.CD_TIPO_INFECCAO) ds_elemento,
	SUBSTR(DS_ITEM_INVESTIGACAO,1,2000) ds_complemento,
	TO_CHAR(dt_registro,'dd/mm/yyyy') dt_registro,
	dt_registro dt_registro_date,
	null nr_atendimento,
	dt_liberacao,
	nm_usuario,
	dt_inativacao,
	nm_usuario_inativacao,
	ds_justificativa,
	NULL,
	NULL,
	NULL ds_observacao,
	NULL nr_seq_grupo_diag,
	nr_sequencia,
	NULL ie_tipo_diagnostico,
	NULL nr_seq_apres_grupo,
	NULL ie_classificacao_doenca,
	null ie_lista_problema,
	null ds_complemento_oft
FROM	historico_infeccao a
WHERE	a.dt_inativacao IS NULL;

