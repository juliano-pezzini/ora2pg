-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW cpoe_regra_ordem_lib_v (nr_seq_regra_ordem, nm_usuario_regra, cd_setor_atendimento, cd_perfil, cd_estabelecimento, ie_situacao, ie_funcao_cpoe) AS select	a.nr_sequencia nr_seq_regra_ordem,
		b.nm_usuario_regra,
		b.cd_setor_atendimento,
		b.cd_perfil,
		b.cd_estabelecimento,
		a.ie_situacao,
		a.ie_funcao_cpoe
FROM	cpoe_regra_ordenacao a,
		cpoe_regra_ordem_liberacao b
where	a.nr_sequencia = b.nr_seq_regra_ordem

union all

select	a.nr_sequencia nr_seq_regra_ordem,
		null nm_usuario_regra,
		null cd_setor_atendimento,
		null cd_perfil,
		null cd_estabelecimento,
		a.ie_situacao,
		a.ie_funcao_cpoe
from	cpoe_regra_ordenacao a
where	1 = 1
and		a.nr_sequencia not in (	select	b.nr_seq_regra_ordem
									from	cpoe_regra_ordem_liberacao b);

