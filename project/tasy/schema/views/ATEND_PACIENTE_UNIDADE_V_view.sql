-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW atend_paciente_unidade_v (nr_atendimento, ds_setor_atendimento, nm_unidade, cd_unidade, dt_entrada_unidade, dt_saida_unidade, ds_observacao, cd_setor_atendimento, cd_tipo_acomodacao, ds_tipo_acomodacao, cd_classif_setor, nr_seq_interno, nr_sequencia) AS SELECT A.NR_ATENDIMENTO,
       B.DS_SETOR_ATENDIMENTO,
      (B.NM_UNIDADE_BASICA || '/'||B.NM_UNIDADE_COMPL)   nm_unidade,
      (A.CD_UNIDADE_BASICA || ' ' || A.CD_UNIDADE_COMPL) cd_unidade,
       A.DT_ENTRADA_UNIDADE,
       A.DT_SAIDA_UNIDADE,
       A.DS_OBSERVACAO,
       B.CD_SETOR_ATENDIMENTO,
       C.CD_TIPO_ACOMODACAO,
       C.DS_TIPO_ACOMODACAO,
       B.CD_CLASSIF_SETOR,
	A.nr_seq_interno,
	A.nr_sequencia
FROM   TIPO_ACOMODACAO C, SETOR_ATENDIMENTO B, ATEND_PACIENTE_UNIDADE A
WHERE A.CD_SETOR_ATENDIMENTO = B.CD_SETOR_ATENDIMENTO
  AND A.CD_TIPO_ACOMODACAO   = C.CD_TIPO_ACOMODACAO;

