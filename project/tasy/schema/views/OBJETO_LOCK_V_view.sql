-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW objeto_lock_v (sid, "serial#", username, nm_objeto, locked_mode, os_user_name, status, bd, programa, machine, modulo) AS SELECT   b.session_id AS SID, c.serial#,
            SUBSTR(coalesce(b.oracle_username, '(oracle)'), 1, 15) AS username,
            SUBSTR(a.object_name, 1, 30) nm_objeto,
            SUBSTR(CASE WHEN b.locked_mode=0 THEN  'None' WHEN b.locked_mode=1 THEN  'Null (NULL)' WHEN b.locked_mode=2 THEN  'Row-S (SS)' WHEN b.locked_mode=3 THEN  'Row-X (SX)' WHEN b.locked_mode=4 THEN  'Share (S)' WHEN b.locked_mode=5 THEN  'S/Row-X (SSX)' WHEN b.locked_mode=6 THEN  'Exclusive (X)'  ELSE b.locked_mode END ,
                    1,
                    30
                   ) locked_mode,
            SUBSTR(b.os_user_name, 1, 20) os_user_name, c.status,
            c.inst_id bd,
	SUBSTR(c.program, 1, 15) programa,
	SUBSTR(c.machine, 1, 15) machine,
	SUBSTR(c.module, 1, 15) modulo
       FROM user_objects a, gv$locked_object b, gv$session c
      WHERE a.object_id = b.object_id AND b.session_id = c.SID
   ORDER BY 1, 2, 3, 4;

