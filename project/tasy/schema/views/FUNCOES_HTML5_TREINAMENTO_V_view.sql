-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW funcoes_html5_treinamento_v (qt_funcao, ie_opcao, ie_idioma, ds_opcao, nr_seq_ordem, nm_campo) AS select 	count(1) qt_funcao,
	'T' ie_opcao,
	'PT' ie_idioma,
	substr(obter_desc_expressao(300177),1,120) ds_opcao,
	1 nr_seq_ordem,
	'QT_FUNCOES' nm_campo
FROM	funcoes_html5

union all

--Total em execução
select	count(1) qt_funcao,
	'E' ie_opcao,
	'PT' ie_idioma,
	substr(obter_desc_expressao(330852),1,120) ds_opcao,
	2 nr_seq_ordem,
	'QT_EXEC' nm_campo
from 	funcoes_html5
where 	NR_ORDEM_SERV_TRE is not null
and	DT_FIM_REAL_TRE is null
and  	DT_INICIO_REAL_TRE is not null

union all

--Total pendente
select	count(1) qt_funcao,
	'P' ie_opcao,
	'PT' ie_idioma,
	substr(obter_desc_expressao(295406),1,120) ds_opcao,
	3 nr_seq_ordem,
	'QT_PEND' nm_campo
from 	funcoes_html5
where 	NR_ORDEM_SERV_TRE is not null
and  	DT_FIM_REAL_TRE is null
and  	DT_INICIO_REAL_TRE is null

union all

--Total concluído
select	count(1) qt_funcao,
	'C' ie_opcao,
	'PT' ie_idioma,
	substr(obter_desc_expressao(330733),1,120) ds_opcao,
	4 nr_seq_ordem,
	'QT_CONC' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE is not null
and	DT_FIM_REAL_TRE is not null

union all

--Total de funções
select 	count(1) qt_funcao,
	'T' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(300177),1,120) ds_opcao,
	1 nr_seq_ordem,
	'QT_FUNCOES' nm_campo
from	funcoes_html5

union all

--Total em execução
select	count(1) qt_funcao,
	'E' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(330852),1,120) ds_opcao,
	2 nr_seq_ordem,
	'QT_EXEC_EN' nm_campo
from 	funcoes_html5
where 	NR_ORDEM_SERV_TRE_EN is not null
and	DT_FIM_REAL_TRE_EN is null
and  	DT_INICIO_REAL_TRE_EN is not null

union all

--Total pendente
select	count(1) qt_funcao,
	'P' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(295406),1,120) ds_opcao,
	3 nr_seq_ordem,
	'QT_PEND_EN' nm_campo
from 	funcoes_html5
where 	NR_ORDEM_SERV_TRE_EN is not null
and  	DT_FIM_REAL_TRE_EN is null
and  	DT_INICIO_REAL_TRE_EN is null

union all

--Total concluído
select	count(1) qt_funcao,
	'C' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(330733),1,120) ds_opcao,
	4 nr_seq_ordem,
	'QT_CONC_EN' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE_EN is not null
and	DT_FIM_REAL_TRE_EN is not null

union all

select	coalesce(sum(coalesce(QT_ORDEM_SERV_TRE,0)),0) qt_funcao,
	'OS' ie_opcao,
	'PT' ie_idioma,
	substr(obter_desc_expressao(308716),1,120) ds_opcao,
	5 nr_seq_ordem,
	'QT_OS' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE is not null
and	QT_ORDEM_SERV_TRE is not null

union all

select	coalesce(sum(coalesce(QT_ORDEM_SERV_TRE_EN,0)),0) qt_funcao,
	'OS' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(308716),1,120) ds_opcao,
	5 nr_seq_ordem,
	'QT_OS_EN' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE_EN is not null
and	QT_ORDEM_SERV_TRE_EN is not null

union all

select	count(1) qt_funcao,
	'AD' ie_opcao,
	'PT' ie_idioma,
	substr(obter_desc_expressao(757842),1,120) ds_opcao,
	5 nr_seq_ordem,
	'QT_PEND_LIB' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE is null

union all

select	count(1) qt_funcao,
	'AD' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(757842),1,120) ds_opcao,
	5 nr_seq_ordem,
	'QT_PEND_LIB_EN' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE_EN is null

union all

select	count(distinct cd_funcao) qt_funcao,
	'FUNCOS' ie_opcao,
	'PT' ie_idioma,
	substr(obter_desc_expressao(757929),1,120) ds_opcao,
	5 nr_seq_ordem,
	'QT_FUNCAO_OS' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE is not null
and	coalesce(QT_ORDEM_SERV_TRE,0)	> 0

union all

select	count(distinct cd_funcao) qt_funcao,
	'FUNCOS' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(757929),1,120) ds_opcao,
	5 nr_seq_ordem,
	'QT_FUNCAO_OS_EN' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE_EN is not null
and	coalesce(QT_ORDEM_SERV_TRE_EN,0) > 0

union all

select	count(distinct cd_funcao) qt_funcao,
	'FUNCOSTO' ie_opcao,
	'EN' ie_idioma,
	substr(obter_desc_expressao(757929),1,120) ds_opcao,
	5 nr_seq_ordem,
	'QT_FUNCAO_OS_TOTAL' nm_campo
from  	funcoes_html5
where 	NR_ORDEM_SERV_TRE_EN is not null
and (coalesce(QT_ORDEM_SERV_TRE_EN,0) > 0 or coalesce(QT_ORDEM_SERV_TRE,0) > 0);

