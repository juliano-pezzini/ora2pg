-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW unimed_litoral_controle_terc_v (cd_empresa, ie_tipo_colaborador, cd_funcionario, dt_pagamento_previsto, nr_seq_classe, dt_referencia, qt_parcelas, vl_saldo_titulo, nr_titulo, cd_pessoa_fisica, dt_pagamento_prev) AS select	'0001' cd_empresa,
	'1' ie_tipo_colaborador,
	LPAD(b.cd_funcionario,9,0) cd_funcionario,
	TO_CHAR(a.dt_pagamento_previsto,'dd/mm/yyyy') dt_pagamento_previsto,
	a.nr_seq_classe,
	TO_CHAR(LOCALTIMESTAMP,'mm/yyyy') dt_referencia,
	'001' qt_parcelas,
	a.vl_saldo_titulo,
	a.nr_titulo,
	b.cd_pessoa_fisica,
	trunc(a.dt_pagamento_previsto) dt_pagamento_prev
FROM	titulo_receber a,
	pessoa_fisica b
where	a.cd_pessoa_fisica = b.cd_pessoa_fisica
and 	a.ie_situacao <> '3'
and	b.ie_funcionario = 'S'
and 	not exists (select 1 from medico c where c.cd_pessoa_fisica = b.cd_pessoa_fisica);

