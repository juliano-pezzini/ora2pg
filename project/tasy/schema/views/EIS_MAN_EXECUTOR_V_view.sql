-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW eis_man_executor_v (nr_sequencia, cd_estabelecimento, dt_referencia, nm_usuario_executor, dt_atualizacao, nm_usuario, nr_seq_estagio, qt_ordem_servico, qt_pendente, qt_encerrada, nr_seq_planej, nr_seq_localizador, dt_atualizacao_nrec, nm_usuario_nrec, ie_informacao, nr_grupo_trabalho, ds_usuario_exec, cd_setor_atendimento, nr_seq_motivo_cancel, ds_estagio, ds_planejamento, ds_localizador, ds_grupo_trabalho, ds_setor_local, qt_encerradas, qt_ordem_servicos, qt_pendentes, ds_motivo_cancel) AS SELECT	a.NR_SEQUENCIA,a.CD_ESTABELECIMENTO,a.DT_REFERENCIA,a.NM_USUARIO_EXECUTOR,a.DT_ATUALIZACAO,a.NM_USUARIO,a.NR_SEQ_ESTAGIO,a.QT_ORDEM_SERVICO,a.QT_PENDENTE,a.QT_ENCERRADA,a.NR_SEQ_PLANEJ,a.NR_SEQ_LOCALIZADOR,a.DT_ATUALIZACAO_NREC,a.NM_USUARIO_NREC,a.IE_INFORMACAO,a.NR_GRUPO_TRABALHO,a.DS_USUARIO_EXEC,a.CD_SETOR_ATENDIMENTO,a.NR_SEQ_MOTIVO_CANCEL,
	SUBSTR(Obter_desc_estagio_proc(a.nr_seq_estagio), 1, 200) ds_estagio,
	SUBSTR(Obter_desc_grupo_planej(a.nr_seq_planej),1,200) ds_planejamento,
	SUBSTR(Obter_desc_man_localizacao(a.nr_seq_localizador),1,200) ds_localizador,
	SUBSTR(obter_desc_grupo_trab(a.nr_grupo_trabalho),1,255) ds_grupo_trabalho,
	SUBSTR(coalesce(obter_desc_setor_atend(a.cd_setor_atendimento),'NÃ£o informado'),1,200) ds_setor_local,
	CASE WHEN coalesce(ie_informacao,'1')='1' THEN  QT_ENCERRADA  ELSE 0 END  QT_ENCERRADAS,
	CASE WHEN coalesce(ie_informacao,'0')='2' THEN  QT_ORDEM_SERVICO  ELSE 0 END  QT_ORDEM_SERVICOS,
	CASE WHEN coalesce(ie_informacao,'0')='0' THEN  QT_PENDENTE  ELSE 0 END  QT_PENDENTES,
	SUBSTR(Obter_Descricao_Padrao('MAN_MOTIVO_CANCEL_OS','DS_MOTIVO_CANCEL', a.nr_seq_motivo_cancel),1,255) ds_motivo_cancel
FROM	eis_man_executor a;

