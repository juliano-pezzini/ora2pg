-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW med_avaliacao_v (tp_registro, nr_seq_avaliacao, ds_tipo, ie_usuario_restrito, qt_max_reg, cd_funcao, ds_item, nr_seq_apresent, ie_resultado, qt_decimais, ds_unid_med, qt_minimo, qt_maximo, qt_tamanho, qt_desloc_direita, nr_seq_superior, ds_item_superior, nr_seq_apres_superior, ie_obrigatorio, qt_pos_esquerda, cd_dominio, nr_seq_item_ref, ds_item_ref, nr_seq_apres_ref, vl_padrao, ds_complemento, ie_tipo_campo, ds_mascara, ds_regra, ds_tipo_avaliacao, nr_seq_item_res, ds_item_res, ds_resultado, qt_resultado, nr_seq_item_ref_res, ds_item_ref_res, ds_result_ref_res, qt_altura) AS select	0 tp_registro,
	a.nr_sequencia nr_seq_avaliacao,
	a.ds_tipo,
	a.ie_usuario_restrito,
	a.qt_max_reg,
	a.cd_funcao,
	'' ds_item,
	0 nr_seq_apresent,
	'' ie_resultado,
	0 qt_decimais,
	'' ds_unid_med,
	0 qt_minimo,
	0 qt_maximo,
	0 qt_tamanho,
	0 qt_desloc_direita,
	0 nr_seq_superior,
	'' ds_item_superior,
	0 nr_seq_apres_superior,
	'' ie_obrigatorio,
	0 qt_pos_esquerda,
	0 cd_dominio,
	0 nr_seq_item_ref,
	'' ds_item_ref,
	0 nr_seq_apres_ref,
	'' vl_padrao,
	'' ds_complemento,
	'' ie_tipo_campo,
	'' ds_mascara,
	'' ds_regra,
	'' ds_tipo_avaliacao,
	0 nr_seq_item_res,
	'' ds_item_res,
	'' ds_resultado,
	0 qt_resultado,
	0 nr_seq_item_ref_res,
	'' ds_item_ref_res,
	'' ds_result_ref_res,
	0 qt_altura
FROM	med_tipo_avaliacao a

union

select	2 tp_registro,
	b.nr_seq_tipo,
	'',
	'',
	0, 0,
	b.ds_item,
	b.nr_seq_apresent,
	b.ie_resultado,
	b.qt_decimais,
	b.ds_unid_med,
	b.qt_minimo,
	b.qt_maximo,
	b.qt_tamanho,
	b.qt_desloc_direita,
	0,
	'',
	0,
	b.ie_obrigatorio,
	b.qt_pos_esquerda,
	b.cd_dominio,
	0,
	'',
	0,
	b.vl_padrao,
	b.ds_complemento,
	b.ie_tipo_campo,
	b.ds_mascara,
	REPLACE(REPLACE(b.ds_regra,chr(10), ' '), chr(13), ' '),
	a.ds_tipo ds_tipo_avaliacao,
	0 nr_seq_item_res,
	'' ds_item_res,
	'' ds_resultado,
	0 qt_resultado,
	0 nr_seq_item_ref_res,
	'' ds_item_ref_res,
	'' ds_result_ref_res,
	b.qt_altura
from	med_tipo_avaliacao a,
	med_item_avaliar b
where	b.nr_seq_superior is null
and	b.nr_seq_item_ref is null
and	a.nr_sequencia	= b.nr_seq_tipo

union

select	3 tp_registro,
	b.nr_seq_tipo,
	'',
	'',
	0, 0,
	b.ds_item,
	b.nr_seq_apresent,
	b.ie_resultado,
	b.qt_decimais,
	b.ds_unid_med,
	b.qt_minimo,
	b.qt_maximo,
	b.qt_tamanho,
	b.qt_desloc_direita,
	b.nr_seq_superior,
	c.ds_item,
	c.nr_seq_apresent,
	b.ie_obrigatorio,
	b.qt_pos_esquerda,
	b.cd_dominio,
	0,
	'',
	0,
	b.vl_padrao,
	b.ds_complemento,
	b.ie_tipo_campo,
	b.ds_mascara,
	REPLACE(REPLACE(b.ds_regra,chr(10), ' '), chr(13), ' '),
	a.ds_tipo ds_tipo_avaliacao,
	0 nr_seq_item_res,
	'' ds_item_res,
	'' ds_resultado,
	0 qt_resultado,
	0 nr_seq_item_ref_res,
	'' ds_item_ref_res,
	'' ds_result_ref_res,
	b.qt_altura
from	med_tipo_avaliacao a,
	med_item_avaliar c,
	med_item_avaliar b
where	b.nr_seq_superior is not null
and	b.nr_seq_superior = c.nr_sequencia
and	a.nr_sequencia	= b.nr_seq_tipo

union

select	4 tp_registro,
	b.nr_seq_tipo,
	'',
	'',
	0, 0,
	b.ds_item,
	b.nr_seq_apresent,
	b.ie_resultado,
	b.qt_decimais,
	b.ds_unid_med,
	b.qt_minimo,
	b.qt_maximo,
	b.qt_tamanho,
	b.qt_desloc_direita,
	0,
	'',
	0,
	b.ie_obrigatorio,
	b.qt_pos_esquerda,
	b.cd_dominio,
	b.nr_seq_item_ref,
	c.ds_item,
	c.nr_seq_apresent,
	b.vl_padrao,
	b.ds_complemento,
	b.ie_tipo_campo,
	b.ds_mascara,
	REPLACE(REPLACE(b.ds_regra,chr(10), ' '), chr(13), ' '),
	a.ds_tipo ds_tipo_avaliacao,
	0 nr_seq_item_res,
	'' ds_item_res,
	'' ds_resultado,
	0 qt_resultado,
	0 nr_seq_item_ref_res,
	'' ds_item_ref_res,
	'' ds_result_ref_res,
	b.qt_altura
from	med_tipo_avaliacao a,
	med_item_avaliar c,
	med_item_avaliar b
where	b.nr_seq_superior is null
and	b.nr_seq_item_ref = c.nr_sequencia
and	a.nr_sequencia	= b.nr_seq_tipo

union

select	5 tp_registro,
	b.nr_seq_tipo,
	'',
	'',
	0,
	0,
	'' ds_item,
	0 nr_seq_apresent,
	'' ie_resultado,
	0 qt_decimais,
	'' ds_unid_med,
	0 qt_minimo,
	0 qt_maximo,
	0 qt_tamanho,
	0 qt_desloc_direita,
	0 nr_seq_superior,
	'' ds_item_superior,
	0 nr_seq_apres_superior,
	'' ie_obrigatorio,
	0 qt_pos_esquerda,
	0 cd_dominio,
	0 nr_seq_item_ref,
	'' ds_item_ref,
	0 nr_seq_apres_ref,
	'' vl_padrao,
	'' ds_complemento,
	'' ie_tipo_campo,
	'' ds_mascara,
	'' ds_regra,
	c.ds_tipo ds_tipo_avaliacao,
	a.nr_seq_item,
	b.ds_item,
	a.ds_resultado,
	a.qt_resultado,
	0,
	'' ds_item_ref_res,
	'',
	0 qt_altura
from	med_tipo_avaliacao c,
	med_item_avaliar b,
	med_item_avaliar_res a
where	a.nr_seq_item	= b.nr_sequencia
and	b.nr_seq_tipo	= c.nr_sequencia
and	a.nr_seq_item_ref is null

union

select	6 tp_registro,
	b.nr_seq_tipo,
	'',
	'',
	0,
	0,
	'' ds_item,
	0 nr_seq_apresent,
	'' ie_resultado,
	0 qt_decimais,
	'' ds_unid_med,
	0 qt_minimo,
	0 qt_maximo,
	0 qt_tamanho,
	0 qt_desloc_direita,
	0 nr_seq_superior,
	'' ds_item_superior,
	0 nr_seq_apres_superior,
	'' ie_obrigatorio,
	0 qt_pos_esquerda,
	0 cd_dominio,
	0 nr_seq_item_ref,
	'' ds_item_ref,
	0 nr_seq_apres_ref,
	'' vl_padrao,
	'' ds_complemento,
	'' ie_tipo_campo,
	'' ds_mascara,
	'' ds_regra,
	c.ds_tipo ds_tipo_avaliacao,
	a.nr_seq_item,
	b.ds_item,
	a.ds_resultado,
	a.qt_resultado,
	a.NR_SEQ_ITEM_REF,
	d.ds_item,
	a.DS_RESULT_REF,
	0 qt_altura
from	med_tipo_avaliacao c,
	med_item_avaliar b,
	med_item_avaliar d,
	med_item_avaliar_res a
where	a.nr_seq_item	= b.nr_sequencia
and	b.nr_seq_tipo	= c.nr_sequencia
and	d.nr_sequencia	= a.nr_seq_item_ref
and	a.nr_seq_item_ref is not null;

