-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW requisicao_descricao_v (nr_requisicao, cd_local_estoque, ds_local_estoque, cd_setor_atendimento, ds_setor_atendimento, dt_solicitacao_requisicao, cd_pessoa_requisitante, dt_liberacao, dt_baixa, dt_emissao_loc_estoque, nm_usuario, nm_pessoa_fisica, ds_centro_custo, ds_local_estoque_destino, dt_atualizacao, dt_aprovacao, ds_operacao, cd_local_estoque_destino, cd_centro_custo, ds_observacao, cd_operacao_estoque, cd_setor_entrega, ds_setor_entrega, cd_pessoa_solicitante, nr_seq_justificativa, ds_urgente) AS select	a.nr_requisicao,
	a.cd_local_estoque , 
	substr(obter_desc_local_estoque(a.cd_local_estoque),1,40) ds_local_estoque, 
	a.cd_setor_atendimento, 
	substr(obter_nome_setor(a.cd_setor_atendimento),1,100) ds_setor_atendimento, 
	a.dt_solicitacao_requisicao , 
	a.cd_pessoa_requisitante , 
	a.dt_liberacao , 
	a.dt_baixa, 
	a.dt_emissao_loc_estoque , 
	a.nm_usuario , 
	substr(obter_nome_pessoa_fisica(a.cd_pessoa_requisitante, null),1,40) nm_pessoa_fisica , 
	substr(obter_desc_centro_custo(a.cd_centro_custo),1,40) ds_centro_custo, 
	substr(obter_desc_local_estoque(a.cd_local_estoque_destino),1,40) ds_local_estoque_destino, 
	a.dt_atualizacao, 
	a.dt_aprovacao, 
	g.ds_operacao, 
	a.cd_local_estoque_destino, 
	a.cd_centro_custo, 
	a.ds_observacao, 
	a.cd_operacao_estoque, 
	a.cd_setor_entrega, 
	substr(obter_nome_setor(a.cd_setor_entrega),1,100) ds_setor_entrega, 
	cd_pessoa_solicitante, 
	a.nr_seq_justificativa, 
	CASE WHEN ie_urgente='S' THEN 'Sim'  ELSE 'NÃ£o' END  ds_urgente 
FROM	operacao_estoque g, 
	requisicao_material a 
where	a.cd_operacao_estoque    = g.cd_operacao_estoque;

