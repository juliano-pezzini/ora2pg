-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW sl_chelist_item_rel_v (ordem, ds_item_padrao, nr_seq_grupo, nr_seq_checklist, nr_seq_item_checklist, ie_resultado, ds_item, ds_grupo, ds_observacao, ie_nao_aplica, dt_liberacao, nr_seq_sl_unid, nr_seq_servico, cd_setor_higienizacao, cd_executor) AS select distinct
 1 ordem,
 a.ds_grupo ds_item_padrao,
 a.nr_sequencia nr_seq_grupo,
 c.NR_SEQ_CHECKLIST NR_SEQ_CHECKLIST,
 null nr_seq_item_checklist,
 null IE_RESULTADO,
 null DS_ITEM,
 a.ds_grupo ds_grupo,
 null ds_observacao,
 null ie_nao_aplica,
 d.dt_liberacao,
 d.NR_SEQ_SL_UNID,
 E.NR_SEQ_SERVICO,
 g.cd_setor_atendimento cd_setor_higienizacao,
 E.cd_executor
FROM SL_CHECK_LIST_UNID_ITEM c,
 SL_ITEM_CHECK_LIST b,
 SL_GRUPO_CHECK_LIST a,
 SL_CHECK_LIST_UNID d,
 SL_UNID_ATEND E,
 unidade_atendimento g
where c.NR_SEQ_ITEM_CHECK_LIST = b.nr_sequencia
and b.NR_SEQ_GRUPO_CHECK_LIST = a.nr_sequencia
and c.NR_SEQ_CHECKLIST = d.nr_sequencia
and d.NR_SEQ_SL_UNID = E.NR_SEQUENCIA
and E.nr_seq_unidade = g.nr_seq_interno
and coalesce(a.ie_situacao, 'A') = 'A'
and coalesce(b.ie_situacao, 'A') = 'A'

union

select distinct
 2 ordem,
 '       ' || b.DS_ITEM ds_item_padrao,
 a.nr_sequencia nr_seq_grupo,
 c.NR_SEQ_CHECKLIST NR_SEQ_CHECKLIST,
 c.nr_sequencia nr_seq_item_checklist,
 IE_RESULTADO IE_RESULTADO,
 b.DS_ITEM,
 a.ds_grupo ds_grupo,
 c.ds_observacao,
 c.ie_nao_aplica,
 d.dt_liberacao,
 d.NR_SEQ_SL_UNID,
 E.NR_SEQ_SERVICO,
 g.cd_setor_atendimento cd_setor_higienizacao,
  E.cd_executor
from SL_CHECK_LIST_UNID_ITEM c,
 SL_ITEM_CHECK_LIST b,
 SL_GRUPO_CHECK_LIST a,
 SL_CHECK_LIST_UNID d,
 SL_UNID_ATEND E,
 unidade_atendimento g
where c.NR_SEQ_ITEM_CHECK_LIST = b.nr_sequencia
and b.NR_SEQ_GRUPO_CHECK_LIST = a.nr_sequencia
and c.NR_SEQ_CHECKLIST = d.nr_sequencia
and d.NR_SEQ_SL_UNID = E.NR_SEQUENCIA
and E.nr_seq_unidade = g.nr_seq_interno
and coalesce(a.ie_situacao, 'A') = 'A'
and coalesce(b.ie_situacao, 'A') = 'A';

