-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW lock_v3 (ds_comando) AS SELECT 	substr('ALTER SYSTEM DISCONNECT SESSION ' || chr(39) || S.sid || ',' || S.serial# || chr(39) || ' IMMEDIATE; ',1,70) ds_comando
FROM 	GV$LOCK L,
	GV$SESSION S,
	user_objects u
WHERE	S.sid = L.sid
AND	u.object_id = L.ID1

union

SELECT	substr('ALTER SYSTEM DISCONNECT SESSION ' || chr(39) || c.sid || ',' || c.serial# || chr(39) || ' IMMEDIATE; ',1,70) ds_comando
       FROM	user_objects a,
		gv$locked_object b,
		gv$session c
      WHERE	a.object_id = b.object_id
      AND	b.session_id = c.SID

union

select	distinct
	substr('ALTER SYSTEM DISCONNECT SESSION ' || chr(39) || a.sid || ',' || a.serial# || chr(39) || ' IMMEDIATE; ',1,70) ds_comando
from 	v_$session a,
	v_$lock x
where	x.sid = a.sid
and (x.request > 0 OR x.block > 0)
 ORDER BY 1;

