-- Generated by Ora2Pg, the Oracle database Schema converter, version 23.1
-- Copyright 2000-2022 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=srv-dbora-03.whebdc.com.br;service_name=DEV_1815;port=1521

SET client_encoding TO 'UTF8';

CREATE OR REPLACE VIEW eis_medic_continuo_v (cd_medicamento, ds_medicamento, cd_pessoa_fisica, nm_paciente, nr_seq_unid_dialise, ds_unid_dialise, cd_empresa, nm_empresa) AS select	cd_material cd_medicamento,
	substr(obter_desc_material(cd_material),1,100) ds_medicamento, 
	cd_pessoa_fisica, 
	substr(obter_nome_pf(cd_pessoa_fisica),1,100) nm_paciente, 
	hd_obter_unidade_prc(cd_pessoa_fisica,'C') nr_seq_unid_dialise, 
	substr(hd_obter_unidade_prc(cd_pessoa_fisica,'D'),1,200) ds_unid_dialise, 
	hd_obter_estab_unidade(hd_obter_unidade_prc(cd_pessoa_fisica,'C')) cd_empresa, 
	substr(obter_nome_estabelecimento(hd_obter_estab_unidade(hd_obter_unidade_prc(cd_pessoa_fisica,'C'))),1,100) nm_empresa 
FROM	medic_uso_continuo 
where	obter_fim_uso_medic(nr_sequencia) <> 'Suspenso';

